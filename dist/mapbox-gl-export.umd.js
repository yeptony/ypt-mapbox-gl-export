(function(Xn,Xs){typeof exports=="object"&&typeof module<"u"?Xs(exports,require("mapbox-gl")):typeof define=="function"&&define.amd?define(["exports","mapbox-gl"],Xs):(Xn=typeof globalThis<"u"?globalThis:Xn||self,Xs(Xn.MapboxExportControl={},Xn.mapboxgl))})(this,function(Xn,Xs){"use strict";var Yz=Object.defineProperty;var Jz=(Xn,Xs,Yc)=>Xs in Xn?Yz(Xn,Xs,{enumerable:!0,configurable:!0,writable:!0,value:Yc}):Xn[Xs]=Yc;var $y=(Xn,Xs,Yc)=>Jz(Xn,typeof Xs!="symbol"?Xs+"":Xs,Yc);var Yc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qy={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.6.0/LICENSE.txt
 */(function(n,t){(function(i,s){n.exports=s()})(Yc,function(){var i={},s={};function u(p,A,v){if(s[p]=v,p==="index"){var C="var sharedModule = {}; ("+s.shared+")(sharedModule); ("+s.worker+")(sharedModule);",F={};return s.shared(F),s.index(i,F),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([C],{type:"text/javascript"}))),i}}u("shared",["exports"],function(p){function A(o,r,l,f){return new(l||(l=Promise))(function(y,b){function x(D){try{U(f.next(D))}catch(O){b(O)}}function I(D){try{U(f.throw(D))}catch(O){b(O)}}function U(D){var O;D.done?y(D.value):(O=D.value,O instanceof l?O:new l(function(z){z(O)})).then(x,I)}U((f=f.apply(o,r||[])).next())})}function v(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var C=F;function F(o,r){this.x=o,this.y=r}F.prototype={clone:function(){return new F(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,r){return this.clone()._rotateAround(o,r)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var r=o.x-this.x,l=o.y-this.y;return r*r+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,r){return Math.atan2(this.x*r-this.y*o,this.x*o+this.y*r)},_matMult:function(o){var r=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=r,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var r=Math.cos(o),l=Math.sin(o),f=l*this.x+r*this.y;return this.x=r*this.x-l*this.y,this.y=f,this},_rotateAround:function(o,r){var l=Math.cos(o),f=Math.sin(o),y=r.y+f*(this.x-r.x)+l*(this.y-r.y);return this.x=r.x+l*(this.x-r.x)-f*(this.y-r.y),this.y=y,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},F.convert=function(o){return o instanceof F?o:Array.isArray(o)?new F(o[0],o[1]):o};var E=v(C),Q=T;function T(o,r,l,f){this.cx=3*o,this.bx=3*(l-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(f-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=r,this.p2x=l,this.p2y=f}T.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,r){if(r===void 0&&(r=1e-6),o<0)return 0;if(o>1)return 1;for(var l=o,f=0;f<8;f++){var y=this.sampleCurveX(l)-o;if(Math.abs(y)<r)return l;var b=this.sampleCurveDerivativeX(l);if(Math.abs(b)<1e-6)break;l-=y/b}var x=0,I=1;for(l=o,f=0;f<20&&(y=this.sampleCurveX(l),!(Math.abs(y-o)<r));f++)o>y?x=l:I=l,l=.5*(I-x)+x;return l},solve:function(o,r){return this.sampleCurveY(this.solveCurveX(o,r))}};var V=v(Q);let R,W;function j(){return R==null&&(R=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),R}function rt(){if(W==null&&(W=!1,j())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let f=0;f<5*5;f++){const y=4*f;r.fillStyle=`rgb(${y},${y+1},${y+2})`,r.fillRect(f%5,Math.floor(f/5),1,1)}const l=r.getImageData(0,0,5,5).data;for(let f=0;f<5*5*4;f++)if(f%4!=3&&l[f]!==f){W=!0;break}}}return W||!1}function ht(o,r,l,f){const y=new V(o,r,l,f);return b=>y.solve(b)}const Bt=ht(.25,.1,.25,1);function Et(o,r,l){return Math.min(l,Math.max(r,o))}function Tt(o,r,l){const f=l-r,y=((o-r)%f+f)%f+r;return y===r?l:y}function xt(o,...r){for(const l of r)for(const f in l)o[f]=l[f];return o}let ft=1;function Nt(o,r,l){const f={};for(const y in o)f[y]=r.call(this,o[y],y,o);return f}function jt(o,r,l){const f={};for(const y in o)r.call(this,o[y],y,o)&&(f[y]=o[y]);return f}function at(o){return Array.isArray(o)?o.map(at):typeof o=="object"&&o?Nt(o,at):o}const ct={};function vt(o){ct[o]||(typeof console<"u"&&console.warn(o),ct[o]=!0)}function mt(o,r,l){return(l.y-o.y)*(r.x-o.x)>(r.y-o.y)*(l.x-o.x)}function $t(o){return typeof WorkerGlobalScope<"u"&&o!==void 0&&o instanceof WorkerGlobalScope}let Vt=null;function Zt(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const Ht="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Yt(o,r,l,f,y){return A(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const b=new VideoFrame(o,{timestamp:0});try{const x=b==null?void 0:b.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const I=x.startsWith("BGR"),U=new Uint8ClampedArray(f*y*4);if(yield b.copyTo(U,function(D,O,z,$,Y){const ot=4*Math.max(-O,0),lt=(Math.max(0,z)-z)*$*4+ot,wt=4*$,Ft=Math.max(0,O),Kt=Math.max(0,z);return{rect:{x:Ft,y:Kt,width:Math.min(D.width,O+$)-Ft,height:Math.min(D.height,z+Y)-Kt},layout:[{offset:lt,stride:wt}]}}(o,r,l,f,y)),I)for(let D=0;D<U.length;D+=4){const O=U[D];U[D]=U[D+2],U[D+2]=O}return U}finally{b.close()}})}let Wt,me;const et="AbortError";function dt(){return new Error(et)}const _t={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function St(o){return _t.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))]}const Ot="global-dispatcher";class Rt extends Error{constructor(r,l,f,y){super(`AJAXError: ${l} (${r}): ${f}`),this.status=r,this.statusText=l,this.url=f,this.body=y}}const Jt=()=>$t(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,re=function(o,r){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){const f=St(o.url);if(f)return f(o,r);if($t(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,targetMapId:Ot},r)}if(!(/^file:/.test(l=o.url)||/^file:/.test(Jt())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(f,y){return A(this,void 0,void 0,function*(){const b=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,cache:f.cache,referrer:Jt(),signal:y.signal});f.type!=="json"||b.headers.has("Accept")||b.headers.set("Accept","application/json");const x=yield fetch(b);if(!x.ok){const D=yield x.blob();throw new Rt(x.status,x.statusText,f.url,D)}let I;I=f.type==="arrayBuffer"||f.type==="image"?x.arrayBuffer():f.type==="json"?x.json():x.text();const U=yield I;if(y.signal.aborted)throw dt();return{data:U,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(o,r);if($t(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,mustQueue:!0,targetMapId:Ot},r)}var l;return function(f,y){return new Promise((b,x)=>{var I;const U=new XMLHttpRequest;U.open(f.method||"GET",f.url,!0),f.type!=="arrayBuffer"&&f.type!=="image"||(U.responseType="arraybuffer");for(const D in f.headers)U.setRequestHeader(D,f.headers[D]);f.type==="json"&&(U.responseType="text",!((I=f.headers)===null||I===void 0)&&I.Accept||U.setRequestHeader("Accept","application/json")),U.withCredentials=f.credentials==="include",U.onerror=()=>{x(new Error(U.statusText))},U.onload=()=>{if(!y.signal.aborted)if((U.status>=200&&U.status<300||U.status===0)&&U.response!==null){let D=U.response;if(f.type==="json")try{D=JSON.parse(U.response)}catch(O){return void x(O)}b({data:D,cacheControl:U.getResponseHeader("Cache-Control"),expires:U.getResponseHeader("Expires")})}else{const D=new Blob([U.response],{type:U.getResponseHeader("Content-Type")});x(new Rt(U.status,U.statusText,f.url,D))}},y.signal.addEventListener("abort",()=>{U.abort(),x(dt())}),U.send(f.body)})}(o,r)};function be(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const r=new URL(o),l=window.location;return r.protocol===l.protocol&&r.host===l.host}function _e(o,r,l){l[o]&&l[o].indexOf(r)!==-1||(l[o]=l[o]||[],l[o].push(r))}function Te(o,r,l){if(l&&l[o]){const f=l[o].indexOf(r);f!==-1&&l[o].splice(f,1)}}class Qe{constructor(r,l={}){xt(this,l),this.type=r}}class je extends Qe{constructor(r,l={}){super("error",xt({error:r},l))}}class oe{on(r,l){return this._listeners=this._listeners||{},_e(r,l,this._listeners),this}off(r,l){return Te(r,l,this._listeners),Te(r,l,this._oneTimeListeners),this}once(r,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},_e(r,l,this._oneTimeListeners),this):new Promise(f=>this.once(r,f))}fire(r,l){typeof r=="string"&&(r=new Qe(r,l||{}));const f=r.type;if(this.listens(f)){r.target=this;const y=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const I of y)I.call(this,r);const b=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const I of b)Te(f,I,this._oneTimeListeners),I.call(this,r);const x=this._eventedParent;x&&(xt(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(r))}else r instanceof je&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,l){return this._eventedParent=r,this._eventedParentData=l,this}}var nt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const cr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Ke(o,r){const l={};for(const f in o)f!=="ref"&&(l[f]=o[f]);return cr.forEach(f=>{f in r&&(l[f]=r[f])}),l}function Ae(o,r){if(Array.isArray(o)){if(!Array.isArray(r)||o.length!==r.length)return!1;for(let l=0;l<o.length;l++)if(!Ae(o[l],r[l]))return!1;return!0}if(typeof o=="object"&&o!==null&&r!==null){if(typeof r!="object"||Object.keys(o).length!==Object.keys(r).length)return!1;for(const l in o)if(!Ae(o[l],r[l]))return!1;return!0}return o===r}function ge(o,r){o.push(r)}function Se(o,r,l){ge(l,{command:"addSource",args:[o,r[o]]})}function Ce(o,r,l){ge(r,{command:"removeSource",args:[o]}),l[o]=!0}function He(o,r,l,f){Ce(o,l,f),Se(o,r,l)}function Xe(o,r,l){let f;for(f in o[l])if(Object.prototype.hasOwnProperty.call(o[l],f)&&f!=="data"&&!Ae(o[l][f],r[l][f]))return!1;for(f in r[l])if(Object.prototype.hasOwnProperty.call(r[l],f)&&f!=="data"&&!Ae(o[l][f],r[l][f]))return!1;return!0}function nr(o,r,l,f,y,b){o=o||{},r=r||{};for(const x in o)Object.prototype.hasOwnProperty.call(o,x)&&(Ae(o[x],r[x])||l.push({command:b,args:[f,x,r[x],y]}));for(const x in r)Object.prototype.hasOwnProperty.call(r,x)&&!Object.prototype.hasOwnProperty.call(o,x)&&(Ae(o[x],r[x])||l.push({command:b,args:[f,x,r[x],y]}))}function yr(o){return o.id}function br(o,r){return o[r.id]=r,o}class ce{constructor(r,l,f,y){this.message=(r?`${r}: `:"")+f,y&&(this.identifier=y),l!=null&&l.__line__&&(this.line=l.__line__)}}function Je(o,...r){for(const l of r)for(const f in l)o[f]=l[f];return o}class sr extends Error{constructor(r,l){super(l),this.message=l,this.key=r}}class Ie{constructor(r,l=[]){this.parent=r,this.bindings={};for(const[f,y]of l)this.bindings[f]=y}concat(r){return new Ie(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const Xr={kind:"null"},he={kind:"number"},rr={kind:"string"},Ee={kind:"boolean"},vr={kind:"color"},ti={kind:"object"},Pe={kind:"value"},mi={kind:"collator"},Rr={kind:"formatted"},ri={kind:"padding"},jr={kind:"resolvedImage"},gt={kind:"variableAnchorOffsetCollection"};function K(o,r){return{kind:"array",itemType:o,N:r}}function q(o){if(o.kind==="array"){const r=q(o.itemType);return typeof o.N=="number"?`array<${r}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${r}>`}return o.kind}const At=[Xr,he,rr,Ee,vr,Rr,ti,K(Pe),ri,jr,gt];function pt(o,r){if(r.kind==="error")return null;if(o.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!pt(o.itemType,r.itemType))&&(typeof o.N!="number"||o.N===r.N))return null}else{if(o.kind===r.kind)return null;if(o.kind==="value"){for(const l of At)if(!pt(l,r))return null}}return`Expected ${q(o)} but found ${q(r)} instead.`}function Pt(o,r){return r.some(l=>l.kind===o.kind)}function Dt(o,r){return r.some(l=>l==="null"?o===null:l==="array"?Array.isArray(o):l==="object"?o&&!Array.isArray(o)&&typeof o=="object":l===typeof o)}function Ut(o,r){return o.kind==="array"&&r.kind==="array"?o.itemType.kind===r.itemType.kind&&typeof o.N=="number":o.kind===r.kind}const It=.96422,te=.82521,le=4/29,qt=6/29,pe=3*qt*qt,ke=qt*qt*qt,Ge=Math.PI/180,ar=180/Math.PI;function xr(o){return(o%=360)<0&&(o+=360),o}function tr([o,r,l,f]){let y,b;const x=Kr((.2225045*(o=Br(o))+.7168786*(r=Br(r))+.0606169*(l=Br(l)))/1);o===r&&r===l?y=b=x:(y=Kr((.4360747*o+.3850649*r+.1430804*l)/It),b=Kr((.0139322*o+.0971045*r+.7141733*l)/te));const I=116*x-16;return[I<0?0:I,500*(y-x),200*(x-b),f]}function Br(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Kr(o){return o>ke?Math.pow(o,1/3):o/pe+le}function qr([o,r,l,f]){let y=(o+16)/116,b=isNaN(r)?y:y+r/500,x=isNaN(l)?y:y-l/200;return y=1*Mr(y),b=It*Mr(b),x=te*Mr(x),[gr(3.1338561*b-1.6168667*y-.4906146*x),gr(-.9787684*b+1.9161415*y+.033454*x),gr(.0719453*b-.2289914*y+1.4052427*x),f]}function gr(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function Mr(o){return o>qt?o*o*o:pe*(o-le)}function Zr(o){return parseInt(o.padEnd(2,o),16)/255}function Ct(o,r){return Fe(r?o/100:o,0,1)}function Fe(o,r,l){return Math.min(Math.max(r,o),l)}function ye(o){return!o.some(Number.isNaN)}const Lr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class dr{constructor(r,l,f,y=1,b=!0){this.r=r,this.g=l,this.b=f,this.a=y,b||(this.r*=y,this.g*=y,this.b*=y,y||this.overwriteGetter("rgb",[r,l,f,y]))}static parse(r){if(r instanceof dr)return r;if(typeof r!="string")return;const l=function(f){if((f=f.toLowerCase().trim())==="transparent")return[0,0,0,0];const y=Lr[f];if(y){const[x,I,U]=y;return[x/255,I/255,U/255,1]}if(f.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(f)){const x=f.length<6?1:2;let I=1;return[Zr(f.slice(I,I+=x)),Zr(f.slice(I,I+=x)),Zr(f.slice(I,I+=x)),Zr(f.slice(I,I+x)||"ff")]}if(f.startsWith("rgb")){const x=f.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[I,U,D,O,z,$,Y,ot,lt,wt,Ft,Kt]=x,kt=[O||" ",Y||" ",wt].join("");if(kt==="  "||kt==="  /"||kt===",,"||kt===",,,"){const zt=[D,$,lt].join(""),se=zt==="%%%"?100:zt===""?255:0;if(se){const ve=[Fe(+U/se,0,1),Fe(+z/se,0,1),Fe(+ot/se,0,1),Ft?Ct(+Ft,Kt):1];if(ye(ve))return ve}}return}}const b=f.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(b){const[x,I,U,D,O,z,$,Y,ot]=b,lt=[U||" ",O||" ",$].join("");if(lt==="  "||lt==="  /"||lt===",,"||lt===",,,"){const wt=[+I,Fe(+D,0,100),Fe(+z,0,100),Y?Ct(+Y,ot):1];if(ye(wt))return function([Ft,Kt,kt,zt]){function se(ve){const Oe=(ve+Ft/30)%12,hr=Kt*Math.min(kt,1-kt);return kt-hr*Math.max(-1,Math.min(Oe-3,9-Oe,1))}return Ft=xr(Ft),Kt/=100,kt/=100,[se(0),se(8),se(4),zt]}(wt)}}}(r);return l?new dr(...l,!1):void 0}get rgb(){const{r,g:l,b:f,a:y}=this,b=y||1/0;return this.overwriteGetter("rgb",[r/b,l/b,f/b,y])}get hcl(){return this.overwriteGetter("hcl",function(r){const[l,f,y,b]=tr(r),x=Math.sqrt(f*f+y*y);return[Math.round(1e4*x)?xr(Math.atan2(y,f)*ar):NaN,x,l,b]}(this.rgb))}get lab(){return this.overwriteGetter("lab",tr(this.rgb))}overwriteGetter(r,l){return Object.defineProperty(this,r,{value:l}),l}toString(){const[r,l,f,y]=this.rgb;return`rgba(${[r,l,f].map(b=>Math.round(255*b)).join(",")},${y})`}}dr.black=new dr(0,0,0,1),dr.white=new dr(1,1,1,1),dr.transparent=new dr(0,0,0,0),dr.red=new dr(1,0,0,1);class zi{constructor(r,l,f){this.sensitivity=r?l?"variant":"case":l?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,l){return this.collator.compare(r,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ai{constructor(r,l,f,y,b){this.text=r,this.image=l,this.scale=f,this.fontStack=y,this.textColor=b}}class yi{constructor(r){this.sections=r}static fromString(r){return new yi([new ai(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof yi?r:yi.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class di{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof di)return r;if(typeof r=="number")return new di([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const l of r)if(typeof l!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new di(r)}}toString(){return JSON.stringify(this.values)}}const Oi=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Xi{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Xi)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let l=0;l<r.length;l+=2){const f=r[l],y=r[l+1];if(typeof f!="string"||!Oi.has(f)||!Array.isArray(y)||y.length!==2||typeof y[0]!="number"||typeof y[1]!="number")return}return new Xi(r)}}toString(){return JSON.stringify(this.values)}}class Hi{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new Hi({name:r,available:!1}):null}}function aA(o,r,l,f){return typeof o=="number"&&o>=0&&o<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof l=="number"&&l>=0&&l<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[o,r,l,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[o,r,l,f]:[o,r,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function to(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof dr||o instanceof zi||o instanceof yi||o instanceof di||o instanceof Xi||o instanceof Hi)return!0;if(Array.isArray(o)){for(const r of o)if(!to(r))return!1;return!0}if(typeof o=="object"){for(const r in o)if(!to(o[r]))return!1;return!0}return!1}function Li(o){if(o===null)return Xr;if(typeof o=="string")return rr;if(typeof o=="boolean")return Ee;if(typeof o=="number")return he;if(o instanceof dr)return vr;if(o instanceof zi)return mi;if(o instanceof yi)return Rr;if(o instanceof di)return ri;if(o instanceof Xi)return gt;if(o instanceof Hi)return jr;if(Array.isArray(o)){const r=o.length;let l;for(const f of o){const y=Li(f);if(l){if(l===y)continue;l=Pe;break}l=y}return K(l||Pe,r)}return ti}function si(o){const r=typeof o;return o===null?"":r==="string"||r==="number"||r==="boolean"?String(o):o instanceof dr||o instanceof yi||o instanceof di||o instanceof Xi||o instanceof Hi?o.toString():JSON.stringify(o)}class eo{constructor(r,l){this.type=r,this.value=l}static parse(r,l){if(r.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!to(r[1]))return l.error("invalid value");const f=r[1];let y=Li(f);const b=l.expectedType;return y.kind!=="array"||y.N!==0||!b||b.kind!=="array"||typeof b.N=="number"&&b.N!==0||(y=b),new eo(y,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Bi{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const Sa={string:rr,number:he,boolean:Ee,object:ti};class vn{constructor(r,l){this.type=r,this.args=l}static parse(r,l){if(r.length<2)return l.error("Expected at least one argument.");let f,y=1;const b=r[0];if(b==="array"){let I,U;if(r.length>2){const D=r[1];if(typeof D!="string"||!(D in Sa)||D==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);I=Sa[D],y++}else I=Pe;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return l.error('The length argument to "array" must be a positive integer literal',2);U=r[2],y++}f=K(I,U)}else{if(!Sa[b])throw new Error(`Types doesn't contain name = ${b}`);f=Sa[b]}const x=[];for(;y<r.length;y++){const I=l.parse(r[y],y,Pe);if(!I)return null;x.push(I)}return new vn(f,x)}evaluate(r){for(let l=0;l<this.args.length;l++){const f=this.args[l].evaluate(r);if(!pt(this.type,Li(f)))return f;if(l===this.args.length-1)throw new Bi(`Expected value to be of type ${q(this.type)}, but found ${q(Li(f))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Ia={"to-boolean":Ee,"to-color":vr,"to-number":he,"to-string":rr};class Zi{constructor(r,l){this.type=r,this.args=l}static parse(r,l){if(r.length<2)return l.error("Expected at least one argument.");const f=r[0];if(!Ia[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&r.length!==2)return l.error("Expected one argument.");const y=Ia[f],b=[];for(let x=1;x<r.length;x++){const I=l.parse(r[x],x,Pe);if(!I)return null;b.push(I)}return new Zi(y,b)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let l,f;for(const y of this.args){if(l=y.evaluate(r),f=null,l instanceof dr)return l;if(typeof l=="string"){const b=r.parseColor(l);if(b)return b}else if(Array.isArray(l)&&(f=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:aA(l[0],l[1],l[2],l[3]),!f))return new dr(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new Bi(f||`Could not parse color from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"padding":{let l;for(const f of this.args){l=f.evaluate(r);const y=di.parse(l);if(y)return y}throw new Bi(`Could not parse padding from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(const f of this.args){l=f.evaluate(r);const y=Xi.parse(l);if(y)return y}throw new Bi(`Could not parse variableAnchorOffsetCollection from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(const f of this.args){if(l=f.evaluate(r),l===null)return 0;const y=Number(l);if(!isNaN(y))return y}throw new Bi(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return yi.fromString(si(this.args[0].evaluate(r)));case"resolvedImage":return Hi.fromString(si(this.args[0].evaluate(r)));default:return si(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const jo=["Unknown","Point","LineString","Polygon"];class Wi{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?jo[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let l=this._parseColorCache[r];return l||(l=this._parseColorCache[r]=dr.parse(r)),l}}class fs{constructor(r,l,f=[],y,b=new Ie,x=[]){this.registry=r,this.path=f,this.key=f.map(I=>`[${I}]`).join(""),this.scope=b,this.errors=x,this.expectedType=y,this._isConstant=l}parse(r,l,f,y,b={}){return l?this.concat(l,f,y)._parse(r,b):this._parse(r,b)}_parse(r,l){function f(y,b,x){return x==="assert"?new vn(b,[y]):x==="coerce"?new Zi(b,[y]):y}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const y=r[0];if(typeof y!="string")return this.error(`Expression name must be a string, but found ${typeof y} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const b=this.registry[y];if(b){let x=b.parse(r,this);if(!x)return null;if(this.expectedType){const I=this.expectedType,U=x.type;if(I.kind!=="string"&&I.kind!=="number"&&I.kind!=="boolean"&&I.kind!=="object"&&I.kind!=="array"||U.kind!=="value")if(I.kind!=="color"&&I.kind!=="formatted"&&I.kind!=="resolvedImage"||U.kind!=="value"&&U.kind!=="string")if(I.kind!=="padding"||U.kind!=="value"&&U.kind!=="number"&&U.kind!=="array")if(I.kind!=="variableAnchorOffsetCollection"||U.kind!=="value"&&U.kind!=="array"){if(this.checkSubtype(I,U))return null}else x=f(x,I,l.typeAnnotation||"coerce");else x=f(x,I,l.typeAnnotation||"coerce");else x=f(x,I,l.typeAnnotation||"coerce");else x=f(x,I,l.typeAnnotation||"assert")}if(!(x instanceof eo)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const I=new Wi;try{x=new eo(x.type,x.evaluate(I))}catch(U){return this.error(U.message),null}}return x}return this.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,l,f){const y=typeof r=="number"?this.path.concat(r):this.path,b=f?this.scope.concat(f):this.scope;return new fs(this.registry,this._isConstant,y,l||null,b,this.errors)}error(r,...l){const f=`${this.key}${l.map(y=>`[${y}]`).join("")}`;this.errors.push(new sr(f,r))}checkSubtype(r,l){const f=pt(r,l);return f&&this.error(f),f}}class Vr{constructor(r,l){this.type=l.type,this.bindings=[].concat(r),this.result=l}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const l of this.bindings)r(l[1]);r(this.result)}static parse(r,l){if(r.length<4)return l.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const f=[];for(let b=1;b<r.length-1;b+=2){const x=r[b];if(typeof x!="string")return l.error(`Expected string, but found ${typeof x} instead.`,b);if(/[^a-zA-Z0-9_]/.test(x))return l.error("Variable names must contain only alphanumeric characters or '_'.",b);const I=l.parse(r[b+1],b+1);if(!I)return null;f.push([x,I])}const y=l.parse(r[r.length-1],r.length-1,l.expectedType,f);return y?new Vr(f,y):null}outputDefined(){return this.result.outputDefined()}}class AA{constructor(r,l){this.type=l.type,this.name=r,this.boundExpression=l}static parse(r,l){if(r.length!==2||typeof r[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const f=r[1];return l.scope.has(f)?new AA(f,l.scope.get(f)):l.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class lA{constructor(r,l,f){this.type=r,this.index=l,this.input=f}static parse(r,l){if(r.length!==3)return l.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const f=l.parse(r[1],1,he),y=l.parse(r[2],2,K(l.expectedType||Pe));return f&&y?new lA(y.type.itemType,f,y):null}evaluate(r){const l=this.index.evaluate(r),f=this.input.evaluate(r);if(l<0)throw new Bi(`Array index out of bounds: ${l} < 0.`);if(l>=f.length)throw new Bi(`Array index out of bounds: ${l} > ${f.length-1}.`);if(l!==Math.floor(l))throw new Bi(`Array index must be an integer, but found ${l} instead.`);return f[l]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class Ea{constructor(r,l){this.type=Ee,this.needle=r,this.haystack=l}static parse(r,l){if(r.length!==3)return l.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const f=l.parse(r[1],1,Pe),y=l.parse(r[2],2,Pe);return f&&y?Pt(f.type,[Ee,rr,he,Xr,Pe])?new Ea(f,y):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${q(f.type)} instead`):null}evaluate(r){const l=this.needle.evaluate(r),f=this.haystack.evaluate(r);if(!f)return!1;if(!Dt(l,["boolean","string","number","null"]))throw new Bi(`Expected first argument to be of type boolean, string, number or null, but found ${q(Li(l))} instead.`);if(!Dt(f,["string","array"]))throw new Bi(`Expected second argument to be of type array or string, but found ${q(Li(f))} instead.`);return f.indexOf(l)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class Ta{constructor(r,l,f){this.type=he,this.needle=r,this.haystack=l,this.fromIndex=f}static parse(r,l){if(r.length<=2||r.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const f=l.parse(r[1],1,Pe),y=l.parse(r[2],2,Pe);if(!f||!y)return null;if(!Pt(f.type,[Ee,rr,he,Xr,Pe]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${q(f.type)} instead`);if(r.length===4){const b=l.parse(r[3],3,he);return b?new Ta(f,y,b):null}return new Ta(f,y)}evaluate(r){const l=this.needle.evaluate(r),f=this.haystack.evaluate(r);if(!Dt(l,["boolean","string","number","null"]))throw new Bi(`Expected first argument to be of type boolean, string, number or null, but found ${q(Li(l))} instead.`);let y;if(this.fromIndex&&(y=this.fromIndex.evaluate(r)),Dt(f,["string"])){const b=f.indexOf(l,y);return b===-1?-1:[...f.slice(0,b)].length}if(Dt(f,["array"]))return f.indexOf(l,y);throw new Bi(`Expected second argument to be of type array or string, but found ${q(Li(f))} instead.`)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class cA{constructor(r,l,f,y,b,x){this.inputType=r,this.type=l,this.input=f,this.cases=y,this.outputs=b,this.otherwise=x}static parse(r,l){if(r.length<5)return l.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return l.error("Expected an even number of arguments.");let f,y;l.expectedType&&l.expectedType.kind!=="value"&&(y=l.expectedType);const b={},x=[];for(let D=2;D<r.length-1;D+=2){let O=r[D];const z=r[D+1];Array.isArray(O)||(O=[O]);const $=l.concat(D);if(O.length===0)return $.error("Expected at least one branch label.");for(const ot of O){if(typeof ot!="number"&&typeof ot!="string")return $.error("Branch labels must be numbers or strings.");if(typeof ot=="number"&&Math.abs(ot)>Number.MAX_SAFE_INTEGER)return $.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ot=="number"&&Math.floor(ot)!==ot)return $.error("Numeric branch labels must be integer values.");if(f){if($.checkSubtype(f,Li(ot)))return null}else f=Li(ot);if(b[String(ot)]!==void 0)return $.error("Branch labels must be unique.");b[String(ot)]=x.length}const Y=l.parse(z,D,y);if(!Y)return null;y=y||Y.type,x.push(Y)}const I=l.parse(r[1],1,Pe);if(!I)return null;const U=l.parse(r[r.length-1],r.length-1,y);return U?I.type.kind!=="value"&&l.concat(1).checkSubtype(f,I.type)?null:new cA(f,y,I,b,x,U):null}evaluate(r){const l=this.input.evaluate(r);return(Li(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class Ko{constructor(r,l,f){this.type=r,this.branches=l,this.otherwise=f}static parse(r,l){if(r.length<4)return l.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return l.error("Expected an odd number of arguments.");let f;l.expectedType&&l.expectedType.kind!=="value"&&(f=l.expectedType);const y=[];for(let x=1;x<r.length-1;x+=2){const I=l.parse(r[x],x,Ee);if(!I)return null;const U=l.parse(r[x+1],x+1,f);if(!U)return null;y.push([I,U]),f=f||U.type}const b=l.parse(r[r.length-1],r.length-1,f);if(!b)return null;if(!f)throw new Error("Can't infer output type");return new Ko(f,y,b)}evaluate(r){for(const[l,f]of this.branches)if(l.evaluate(r))return f.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[l,f]of this.branches)r(l),r(f);r(this.otherwise)}outputDefined(){return this.branches.every(([r,l])=>l.outputDefined())&&this.otherwise.outputDefined()}}class uA{constructor(r,l,f,y){this.type=r,this.input=l,this.beginIndex=f,this.endIndex=y}static parse(r,l){if(r.length<=2||r.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const f=l.parse(r[1],1,Pe),y=l.parse(r[2],2,he);if(!f||!y)return null;if(!Pt(f.type,[K(Pe),rr,Pe]))return l.error(`Expected first argument to be of type array or string, but found ${q(f.type)} instead`);if(r.length===4){const b=l.parse(r[3],3,he);return b?new uA(f.type,f,y,b):null}return new uA(f.type,f,y)}evaluate(r){const l=this.input.evaluate(r),f=this.beginIndex.evaluate(r);let y;if(this.endIndex&&(y=this.endIndex.evaluate(r)),Dt(l,["string"]))return[...l].slice(f,y).join("");if(Dt(l,["array"]))return l.slice(f,y);throw new Bi(`Expected first argument to be of type array or string, but found ${q(Li(l))} instead.`)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function Ua(o,r){const l=o.length-1;let f,y,b=0,x=l,I=0;for(;b<=x;)if(I=Math.floor((b+x)/2),f=o[I],y=o[I+1],f<=r){if(I===l||r<y)return I;b=I+1}else{if(!(f>r))throw new Bi("Input is not a number.");x=I-1}return 0}class $o{constructor(r,l,f){this.type=r,this.input=l,this.labels=[],this.outputs=[];for(const[y,b]of f)this.labels.push(y),this.outputs.push(b)}static parse(r,l){if(r.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return l.error("Expected an even number of arguments.");const f=l.parse(r[1],1,he);if(!f)return null;const y=[];let b=null;l.expectedType&&l.expectedType.kind!=="value"&&(b=l.expectedType);for(let x=1;x<r.length;x+=2){const I=x===1?-1/0:r[x],U=r[x+1],D=x,O=x+1;if(typeof I!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(y.length&&y[y.length-1][0]>=I)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',D);const z=l.parse(U,O,b);if(!z)return null;b=b||z.type,y.push([I,z])}return new $o(b,f,y)}evaluate(r){const l=this.labels,f=this.outputs;if(l.length===1)return f[0].evaluate(r);const y=this.input.evaluate(r);if(y<=l[0])return f[0].evaluate(r);const b=l.length;return y>=l[b-1]?f[b-1].evaluate(r):f[Ua(l,y)].evaluate(r)}eachChild(r){r(this.input);for(const l of this.outputs)r(l)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function bo(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var hA=Pa;function Pa(o,r,l,f){this.cx=3*o,this.bx=3*(l-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(f-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=r,this.p2x=l,this.p2y=f}Pa.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,r){if(r===void 0&&(r=1e-6),o<0)return 0;if(o>1)return 1;for(var l=o,f=0;f<8;f++){var y=this.sampleCurveX(l)-o;if(Math.abs(y)<r)return l;var b=this.sampleCurveDerivativeX(l);if(Math.abs(b)<1e-6)break;l-=y/b}var x=0,I=1;for(l=o,f=0;f<20&&(y=this.sampleCurveX(l),!(Math.abs(y-o)<r));f++)o>y?x=l:I=l,l=.5*(I-x)+x;return l},solve:function(o,r){return this.sampleCurveY(this.solveCurveX(o,r))}};var Gl=bo(hA);function Ei(o,r,l){return o+l*(r-o)}function La(o,r,l){return o.map((f,y)=>Ei(f,r[y],l))}const wn={number:Ei,color:function(o,r,l,f="rgb"){switch(f){case"rgb":{const[y,b,x,I]=La(o.rgb,r.rgb,l);return new dr(y,b,x,I,!1)}case"hcl":{const[y,b,x,I]=o.hcl,[U,D,O,z]=r.hcl;let $,Y;if(isNaN(y)||isNaN(U))isNaN(y)?isNaN(U)?$=NaN:($=U,x!==1&&x!==0||(Y=D)):($=y,O!==1&&O!==0||(Y=b));else{let Kt=U-y;U>y&&Kt>180?Kt-=360:U<y&&y-U>180&&(Kt+=360),$=y+l*Kt}const[ot,lt,wt,Ft]=function([Kt,kt,zt,se]){return Kt=isNaN(Kt)?0:Kt*Ge,qr([zt,Math.cos(Kt)*kt,Math.sin(Kt)*kt,se])}([$,Y??Ei(b,D,l),Ei(x,O,l),Ei(I,z,l)]);return new dr(ot,lt,wt,Ft,!1)}case"lab":{const[y,b,x,I]=qr(La(o.lab,r.lab,l));return new dr(y,b,x,I,!1)}}},array:La,padding:function(o,r,l){return new di(La(o.values,r.values,l))},variableAnchorOffsetCollection:function(o,r,l){const f=o.values,y=r.values;if(f.length!==y.length)throw new Bi(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${r.toString()}`);const b=[];for(let x=0;x<f.length;x+=2){if(f[x]!==y[x])throw new Bi(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${f[x]}, to[${x}]: ${y[x]}`);b.push(f[x]);const[I,U]=f[x+1],[D,O]=y[x+1];b.push([Ei(I,D,l),Ei(U,O,l)])}return new Xi(b)}};class lr{constructor(r,l,f,y,b){this.type=r,this.operator=l,this.interpolation=f,this.input=y,this.labels=[],this.outputs=[];for(const[x,I]of b)this.labels.push(x),this.outputs.push(I)}static interpolationFactor(r,l,f,y){let b=0;if(r.name==="exponential")b=Qa(l,r.base,f,y);else if(r.name==="linear")b=Qa(l,1,f,y);else if(r.name==="cubic-bezier"){const x=r.controlPoints;b=new Gl(x[0],x[1],x[2],x[3]).solve(Qa(l,1,f,y))}return b}static parse(r,l){let[f,y,b,...x]=r;if(!Array.isArray(y)||y.length===0)return l.error("Expected an interpolation type expression.",1);if(y[0]==="linear")y={name:"linear"};else if(y[0]==="exponential"){const D=y[1];if(typeof D!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:D}}else{if(y[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(y[0])}`,1,0);{const D=y.slice(1);if(D.length!==4||D.some(O=>typeof O!="number"||O<0||O>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:D}}}if(r.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(b=l.parse(b,2,he),!b)return null;const I=[];let U=null;f==="interpolate-hcl"||f==="interpolate-lab"?U=vr:l.expectedType&&l.expectedType.kind!=="value"&&(U=l.expectedType);for(let D=0;D<x.length;D+=2){const O=x[D],z=x[D+1],$=D+3,Y=D+4;if(typeof O!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',$);if(I.length&&I[I.length-1][0]>=O)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',$);const ot=l.parse(z,Y,U);if(!ot)return null;U=U||ot.type,I.push([O,ot])}return Ut(U,he)||Ut(U,vr)||Ut(U,ri)||Ut(U,gt)||Ut(U,K(he))?new lr(U,f,y,b,I):l.error(`Type ${q(U)} is not interpolatable.`)}evaluate(r){const l=this.labels,f=this.outputs;if(l.length===1)return f[0].evaluate(r);const y=this.input.evaluate(r);if(y<=l[0])return f[0].evaluate(r);const b=l.length;if(y>=l[b-1])return f[b-1].evaluate(r);const x=Ua(l,y),I=lr.interpolationFactor(this.interpolation,y,l[x],l[x+1]),U=f[x].evaluate(r),D=f[x+1].evaluate(r);switch(this.operator){case"interpolate":return wn[this.type.kind](U,D,I);case"interpolate-hcl":return wn.color(U,D,I,"hcl");case"interpolate-lab":return wn.color(U,D,I,"lab")}}eachChild(r){r(this.input);for(const l of this.outputs)r(l)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Qa(o,r,l,f){const y=f-l,b=o-l;return y===0?0:r===1?b/y:(Math.pow(r,b)-1)/(Math.pow(r,y)-1)}class dA{constructor(r,l){this.type=r,this.args=l}static parse(r,l){if(r.length<2)return l.error("Expectected at least one argument.");let f=null;const y=l.expectedType;y&&y.kind!=="value"&&(f=y);const b=[];for(const I of r.slice(1)){const U=l.parse(I,1+b.length,f,void 0,{typeAnnotation:"omit"});if(!U)return null;f=f||U.type,b.push(U)}if(!f)throw new Error("No output type");const x=y&&b.some(I=>pt(y,I.type));return new dA(x?Pe:f,b)}evaluate(r){let l,f=null,y=0;for(const b of this.args)if(y++,f=b.evaluate(r),f&&f instanceof Hi&&!f.available&&(l||(l=f.name),f=null,y===this.args.length&&(f=l)),f!==null)break;return f}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}function Qs(o,r){return o==="=="||o==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function ol(o,r,l,f){return f.compare(r,l)===0}function ro(o,r,l){const f=o!=="=="&&o!=="!=";return class ZC{constructor(b,x,I){this.type=Ee,this.lhs=b,this.rhs=x,this.collator=I,this.hasUntypedArgument=b.type.kind==="value"||x.type.kind==="value"}static parse(b,x){if(b.length!==3&&b.length!==4)return x.error("Expected two or three arguments.");const I=b[0];let U=x.parse(b[1],1,Pe);if(!U)return null;if(!Qs(I,U.type))return x.concat(1).error(`"${I}" comparisons are not supported for type '${q(U.type)}'.`);let D=x.parse(b[2],2,Pe);if(!D)return null;if(!Qs(I,D.type))return x.concat(2).error(`"${I}" comparisons are not supported for type '${q(D.type)}'.`);if(U.type.kind!==D.type.kind&&U.type.kind!=="value"&&D.type.kind!=="value")return x.error(`Cannot compare types '${q(U.type)}' and '${q(D.type)}'.`);f&&(U.type.kind==="value"&&D.type.kind!=="value"?U=new vn(D.type,[U]):U.type.kind!=="value"&&D.type.kind==="value"&&(D=new vn(U.type,[D])));let O=null;if(b.length===4){if(U.type.kind!=="string"&&D.type.kind!=="string"&&U.type.kind!=="value"&&D.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(O=x.parse(b[3],3,mi),!O)return null}return new ZC(U,D,O)}evaluate(b){const x=this.lhs.evaluate(b),I=this.rhs.evaluate(b);if(f&&this.hasUntypedArgument){const U=Li(x),D=Li(I);if(U.kind!==D.kind||U.kind!=="string"&&U.kind!=="number")throw new Bi(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${U.kind}, ${D.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const U=Li(x),D=Li(I);if(U.kind!=="string"||D.kind!=="string")return r(b,x,I)}return this.collator?l(b,x,I,this.collator.evaluate(b)):r(b,x,I)}eachChild(b){b(this.lhs),b(this.rhs),this.collator&&b(this.collator)}outputDefined(){return!0}}}const ka=ro("==",function(o,r,l){return r===l},ol),al=ro("!=",function(o,r,l){return r!==l},function(o,r,l,f){return!ol(0,r,l,f)}),Qc=ro("<",function(o,r,l){return r<l},function(o,r,l,f){return f.compare(r,l)<0}),Xl=ro(">",function(o,r,l){return r>l},function(o,r,l,f){return f.compare(r,l)>0}),Zl=ro("<=",function(o,r,l){return r<=l},function(o,r,l,f){return f.compare(r,l)<=0}),Al=ro(">=",function(o,r,l){return r>=l},function(o,r,l,f){return f.compare(r,l)>=0});class io{constructor(r,l,f){this.type=mi,this.locale=f,this.caseSensitive=r,this.diacriticSensitive=l}static parse(r,l){if(r.length!==2)return l.error("Expected one argument.");const f=r[1];if(typeof f!="object"||Array.isArray(f))return l.error("Collator options argument must be an object.");const y=l.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,Ee);if(!y)return null;const b=l.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,Ee);if(!b)return null;let x=null;return f.locale&&(x=l.parse(f.locale,1,rr),!x)?null:new io(y,b,x)}evaluate(r){return new zi(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}class no{constructor(r,l,f,y,b){this.type=rr,this.number=r,this.locale=l,this.currency=f,this.minFractionDigits=y,this.maxFractionDigits=b}static parse(r,l){if(r.length!==3)return l.error("Expected two arguments.");const f=l.parse(r[1],1,he);if(!f)return null;const y=r[2];if(typeof y!="object"||Array.isArray(y))return l.error("NumberFormat options argument must be an object.");let b=null;if(y.locale&&(b=l.parse(y.locale,1,rr),!b))return null;let x=null;if(y.currency&&(x=l.parse(y.currency,1,rr),!x))return null;let I=null;if(y["min-fraction-digits"]&&(I=l.parse(y["min-fraction-digits"],1,he),!I))return null;let U=null;return y["max-fraction-digits"]&&(U=l.parse(y["max-fraction-digits"],1,he),!U)?null:new no(f,b,x,I,U)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class pA{constructor(r){this.type=Rr,this.sections=r}static parse(r,l){if(r.length<2)return l.error("Expected at least one argument.");const f=r[1];if(!Array.isArray(f)&&typeof f=="object")return l.error("First argument must be an image or text section.");const y=[];let b=!1;for(let x=1;x<=r.length-1;++x){const I=r[x];if(b&&typeof I=="object"&&!Array.isArray(I)){b=!1;let U=null;if(I["font-scale"]&&(U=l.parse(I["font-scale"],1,he),!U))return null;let D=null;if(I["text-font"]&&(D=l.parse(I["text-font"],1,K(rr)),!D))return null;let O=null;if(I["text-color"]&&(O=l.parse(I["text-color"],1,vr),!O))return null;const z=y[y.length-1];z.scale=U,z.font=D,z.textColor=O}else{const U=l.parse(r[x],1,Pe);if(!U)return null;const D=U.type.kind;if(D!=="string"&&D!=="value"&&D!=="null"&&D!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");b=!0,y.push({content:U,scale:null,font:null,textColor:null})}}return new pA(y)}evaluate(r){return new yi(this.sections.map(l=>{const f=l.content.evaluate(r);return Li(f)===jr?new ai("",f,null,null,null):new ai(si(f),null,l.scale?l.scale.evaluate(r):null,l.font?l.font.evaluate(r).join(","):null,l.textColor?l.textColor.evaluate(r):null)}))}eachChild(r){for(const l of this.sections)r(l.content),l.scale&&r(l.scale),l.font&&r(l.font),l.textColor&&r(l.textColor)}outputDefined(){return!1}}class xo{constructor(r){this.type=jr,this.input=r}static parse(r,l){if(r.length!==2)return l.error("Expected two arguments.");const f=l.parse(r[1],1,rr);return f?new xo(f):l.error("No image name provided.")}evaluate(r){const l=this.input.evaluate(r),f=Hi.fromString(l);return f&&r.availableImages&&(f.available=r.availableImages.indexOf(l)>-1),f}eachChild(r){r(this.input)}outputDefined(){return!1}}class Ma{constructor(r){this.type=he,this.input=r}static parse(r,l){if(r.length!==2)return l.error(`Expected 1 argument, but found ${r.length-1} instead.`);const f=l.parse(r[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${q(f.type)} instead.`):new Ma(f):null}evaluate(r){const l=this.input.evaluate(r);if(typeof l=="string")return[...l].length;if(Array.isArray(l))return l.length;throw new Bi(`Expected value to be of type string or array, but found ${q(Li(l))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const Tn=8192;function fA(o,r){const l=(180+o[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,y=Math.pow(2,r.z);return[Math.round(l*y*Tn),Math.round(f*y*Tn)]}function Bo(o,r){const l=Math.pow(2,r.z);return[(y=(o[0]/Tn+r.x)/l,360*y-180),(f=(o[1]/Tn+r.y)/l,360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90)];var f,y}function Dr(o,r){o[0]=Math.min(o[0],r[0]),o[1]=Math.min(o[1],r[1]),o[2]=Math.max(o[2],r[0]),o[3]=Math.max(o[3],r[1])}function qo(o,r){return!(o[0]<=r[0]||o[2]>=r[2]||o[1]<=r[1]||o[3]>=r[3])}function Co(o,r,l){const f=o[0]-r[0],y=o[1]-r[1],b=o[0]-l[0],x=o[1]-l[1];return f*x-b*y==0&&f*b<=0&&y*x<=0}function ks(o,r,l,f){return(y=[f[0]-l[0],f[1]-l[1]])[0]*(b=[r[0]-o[0],r[1]-o[1]])[1]-y[1]*b[0]!=0&&!(!Wl(o,r,l,f)||!Wl(l,f,o,r));var y,b}function kc(o,r,l){for(const f of l)for(let y=0;y<f.length-1;++y)if(ks(o,r,f[y],f[y+1]))return!0;return!1}function ts(o,r,l=!1){let f=!1;for(const I of r)for(let U=0;U<I.length-1;U++){if(Co(o,I[U],I[U+1]))return l;(b=I[U])[1]>(y=o)[1]!=(x=I[U+1])[1]>y[1]&&y[0]<(x[0]-b[0])*(y[1]-b[1])/(x[1]-b[1])+b[0]&&(f=!f)}var y,b,x;return f}function Ms(o,r){for(const l of r)if(ts(o,l))return!0;return!1}function gA(o,r){for(const l of o)if(!ts(l,r))return!1;for(let l=0;l<o.length-1;++l)if(kc(o[l],o[l+1],r))return!1;return!0}function Da(o,r){for(const l of r)if(gA(o,l))return!0;return!1}function Wl(o,r,l,f){const y=f[0]-l[0],b=f[1]-l[1],x=(o[0]-l[0])*b-y*(o[1]-l[1]),I=(r[0]-l[0])*b-y*(r[1]-l[1]);return x>0&&I<0||x<0&&I>0}function Go(o,r,l){const f=[];for(let y=0;y<o.length;y++){const b=[];for(let x=0;x<o[y].length;x++){const I=fA(o[y][x],l);Dr(r,I),b.push(I)}f.push(b)}return f}function Yl(o,r,l){const f=[];for(let y=0;y<o.length;y++){const b=Go(o[y],r,l);f.push(b)}return f}function mA(o,r,l,f){if(o[0]<l[0]||o[0]>l[2]){const y=.5*f;let b=o[0]-l[0]>y?-f:l[0]-o[0]>y?f:0;b===0&&(b=o[0]-l[2]>y?-f:l[2]-o[0]>y?f:0),o[0]+=b}Dr(r,o)}function yA(o,r,l,f){const y=Math.pow(2,f.z)*Tn,b=[f.x*Tn,f.y*Tn],x=[];for(const I of o)for(const U of I){const D=[U.x+b[0],U.y+b[1]];mA(D,r,l,y),x.push(D)}return x}function ll(o,r,l,f){const y=Math.pow(2,f.z)*Tn,b=[f.x*Tn,f.y*Tn],x=[];for(const U of o){const D=[];for(const O of U){const z=[O.x+b[0],O.y+b[1]];Dr(r,z),D.push(z)}x.push(D)}if(r[2]-r[0]<=y/2){(I=r)[0]=I[1]=1/0,I[2]=I[3]=-1/0;for(const U of x)for(const D of U)mA(D,r,l,y)}var I;return x}class gs{constructor(r,l){this.type=Ee,this.geojson=r,this.geometries=l}static parse(r,l){if(r.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(to(r[1])){const f=r[1];if(f.type==="FeatureCollection"){const y=[];for(const b of f.features){const{type:x,coordinates:I}=b.geometry;x==="Polygon"&&y.push(I),x==="MultiPolygon"&&y.push(...I)}if(y.length)return new gs(f,{type:"MultiPolygon",coordinates:y})}else if(f.type==="Feature"){const y=f.geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new gs(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new gs(f,f)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(l,f){const y=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(f.type==="Polygon"){const I=Go(f.coordinates,b,x),U=yA(l.geometry(),y,b,x);if(!qo(y,b))return!1;for(const D of U)if(!ts(D,I))return!1}if(f.type==="MultiPolygon"){const I=Yl(f.coordinates,b,x),U=yA(l.geometry(),y,b,x);if(!qo(y,b))return!1;for(const D of U)if(!Ms(D,I))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(l,f){const y=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(f.type==="Polygon"){const I=Go(f.coordinates,b,x),U=ll(l.geometry(),y,b,x);if(!qo(y,b))return!1;for(const D of U)if(!gA(D,I))return!1}if(f.type==="MultiPolygon"){const I=Yl(f.coordinates,b,x),U=ll(l.geometry(),y,b,x);if(!qo(y,b))return!1;for(const D of U)if(!Da(D,I))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let vA=class{constructor(o=[],r=(l,f)=>l<f?-1:l>f?1:0){if(this.data=o,this.length=this.data.length,this.compare=r,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(o){this.data.push(o),this._up(this.length++)}pop(){if(this.length===0)return;const o=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:r,compare:l}=this,f=r[o];for(;o>0;){const y=o-1>>1,b=r[y];if(l(f,b)>=0)break;r[o]=b,o=y}r[o]=f}_down(o){const{data:r,compare:l}=this,f=this.length>>1,y=r[o];for(;o<f;){let b=1+(o<<1);const x=b+1;if(x<this.length&&l(r[x],r[b])<0&&(b=x),l(r[b],y)>=0)break;r[o]=r[b],o=b}r[o]=y}};function cl(o,r,l,f,y){ul(o,r,l,f||o.length-1,y||wA)}function ul(o,r,l,f,y){for(;f>l;){if(f-l>600){var b=f-l+1,x=r-l+1,I=Math.log(b),U=.5*Math.exp(2*I/3),D=.5*Math.sqrt(I*U*(b-U)/b)*(x-b/2<0?-1:1);ul(o,r,Math.max(l,Math.floor(r-x*U/b+D)),Math.min(f,Math.floor(r+(b-x)*U/b+D)),y)}var O=o[r],z=l,$=f;for(Na(o,l,r),y(o[f],O)>0&&Na(o,l,f);z<$;){for(Na(o,z,$),z++,$--;y(o[z],O)<0;)z++;for(;y(o[$],O)>0;)$--}y(o[l],O)===0?Na(o,l,$):Na(o,++$,f),$<=r&&(l=$+1),r<=$&&(f=$-1)}}function Na(o,r,l){var f=o[r];o[r]=o[l],o[l]=f}function wA(o,r){return o<r?-1:o>r?1:0}function so(o,r){if(o.length<=1)return[o];const l=[];let f,y;for(const b of o){const x=Xo(b);x!==0&&(b.area=Math.abs(x),y===void 0&&(y=x<0),y===x<0?(f&&l.push(f),f=[b]):f.push(b))}if(f&&l.push(f),r>1)for(let b=0;b<l.length;b++)l[b].length<=r||(cl(l[b],r,1,l[b].length-1,hl),l[b]=l[b].slice(0,r));return l}function hl(o,r){return r.area-o.area}function Xo(o){let r=0;for(let l,f,y=0,b=o.length,x=b-1;y<b;x=y++)l=o[y],f=o[x],r+=(f.x-l.x)*(l.y+f.y);return r}const _A=1/298.257223563,k=_A*(2-_A),J=Math.PI/180;class bt{constructor(r){const l=6378.137*J*1e3,f=Math.cos(r*J),y=1/(1-k*(1-f*f)),b=Math.sqrt(y);this.kx=l*b*f,this.ky=l*b*y*(1-k)}distance(r,l){const f=this.wrap(r[0]-l[0])*this.kx,y=(r[1]-l[1])*this.ky;return Math.sqrt(f*f+y*y)}pointOnLine(r,l){let f,y,b,x,I=1/0;for(let U=0;U<r.length-1;U++){let D=r[U][0],O=r[U][1],z=this.wrap(r[U+1][0]-D)*this.kx,$=(r[U+1][1]-O)*this.ky,Y=0;z===0&&$===0||(Y=(this.wrap(l[0]-D)*this.kx*z+(l[1]-O)*this.ky*$)/(z*z+$*$),Y>1?(D=r[U+1][0],O=r[U+1][1]):Y>0&&(D+=z/this.kx*Y,O+=$/this.ky*Y)),z=this.wrap(l[0]-D)*this.kx,$=(l[1]-O)*this.ky;const ot=z*z+$*$;ot<I&&(I=ot,f=D,y=O,b=U,x=Y)}return{point:[f,y],index:b,t:Math.max(0,Math.min(1,x))}}wrap(r){for(;r<-180;)r+=360;for(;r>180;)r-=360;return r}}function Mt(o,r){return r[0]-o[0]}function Gt(o){return o[1]-o[0]+1}function ae(o,r){return o[1]>=o[0]&&o[1]<r}function xe(o,r){if(o[0]>o[1])return[null,null];const l=Gt(o);if(r){if(l===2)return[o,null];const y=Math.floor(l/2);return[[o[0],o[0]+y],[o[0]+y,o[1]]]}if(l===1)return[o,null];const f=Math.floor(l/2)-1;return[[o[0],o[0]+f],[o[0]+f+1,o[1]]]}function ze(o,r){if(!ae(r,o.length))return[1/0,1/0,-1/0,-1/0];const l=[1/0,1/0,-1/0,-1/0];for(let f=r[0];f<=r[1];++f)Dr(l,o[f]);return l}function ur(o){const r=[1/0,1/0,-1/0,-1/0];for(const l of o)for(const f of l)Dr(r,f);return r}function Ir(o){return o[0]!==-1/0&&o[1]!==-1/0&&o[2]!==1/0&&o[3]!==1/0}function Tr(o,r,l){if(!Ir(o)||!Ir(r))return NaN;let f=0,y=0;return o[2]<r[0]&&(f=r[0]-o[2]),o[0]>r[2]&&(f=o[0]-r[2]),o[1]>r[3]&&(y=o[1]-r[3]),o[3]<r[1]&&(y=r[1]-o[3]),l.distance([0,0],[f,y])}function Qr(o,r,l){const f=l.pointOnLine(r,o);return l.distance(o,f.point)}function Sr(o,r,l,f,y){const b=Math.min(Qr(o,[l,f],y),Qr(r,[l,f],y)),x=Math.min(Qr(l,[o,r],y),Qr(f,[o,r],y));return Math.min(b,x)}function ki(o,r,l,f,y){if(!ae(r,o.length)||!ae(f,l.length))return 1/0;let b=1/0;for(let x=r[0];x<r[1];++x){const I=o[x],U=o[x+1];for(let D=f[0];D<f[1];++D){const O=l[D],z=l[D+1];if(ks(I,U,O,z))return 0;b=Math.min(b,Sr(I,U,O,z,y))}}return b}function Ar(o,r,l,f,y){if(!ae(r,o.length)||!ae(f,l.length))return NaN;let b=1/0;for(let x=r[0];x<=r[1];++x)for(let I=f[0];I<=f[1];++I)if(b=Math.min(b,y.distance(o[x],l[I])),b===0)return b;return b}function Yi(o,r,l){if(ts(o,r,!0))return 0;let f=1/0;for(const y of r){const b=y[0],x=y[y.length-1];if(b!==x&&(f=Math.min(f,Qr(o,[x,b],l)),f===0))return f;const I=l.pointOnLine(y,o);if(f=Math.min(f,l.distance(o,I.point)),f===0)return f}return f}function Ur(o,r,l,f){if(!ae(r,o.length))return NaN;for(let b=r[0];b<=r[1];++b)if(ts(o[b],l,!0))return 0;let y=1/0;for(let b=r[0];b<r[1];++b){const x=o[b],I=o[b+1];for(const U of l)for(let D=0,O=U.length,z=O-1;D<O;z=D++){const $=U[z],Y=U[D];if(ks(x,I,$,Y))return 0;y=Math.min(y,Sr(x,I,$,Y,f))}}return y}function zr(o,r){for(const l of o)for(const f of l)if(ts(f,r,!0))return!0;return!1}function Un(o,r,l,f=1/0){const y=ur(o),b=ur(r);if(f!==1/0&&Tr(y,b,l)>=f)return f;if(qo(y,b)){if(zr(o,r))return 0}else if(zr(r,o))return 0;let x=1/0;for(const I of o)for(let U=0,D=I.length,O=D-1;U<D;O=U++){const z=I[O],$=I[U];for(const Y of r)for(let ot=0,lt=Y.length,wt=lt-1;ot<lt;wt=ot++){const Ft=Y[wt],Kt=Y[ot];if(ks(z,$,Ft,Kt))return 0;x=Math.min(x,Sr(z,$,Ft,Kt,l))}}return x}function Ds(o,r,l,f,y,b){if(!b)return;const x=Tr(ze(f,b),y,l);x<r&&o.push([x,b,[0,0]])}function Zo(o,r,l,f,y,b,x){if(!b||!x)return;const I=Tr(ze(f,b),ze(y,x),l);I<r&&o.push([I,b,x])}function Wo(o,r,l,f,y=1/0){let b=Math.min(f.distance(o[0],l[0][0]),y);if(b===0)return b;const x=new vA([[0,[0,o.length-1],[0,0]]],Mt),I=ur(l);for(;x.length>0;){const U=x.pop();if(U[0]>=b)continue;const D=U[1],O=r?50:100;if(Gt(D)<=O){if(!ae(D,o.length))return NaN;if(r){const z=Ur(o,D,l,f);if(isNaN(z)||z===0)return z;b=Math.min(b,z)}else for(let z=D[0];z<=D[1];++z){const $=Yi(o[z],l,f);if(b=Math.min(b,$),b===0)return 0}}else{const z=xe(D,r);Ds(x,b,f,o,I,z[0]),Ds(x,b,f,o,I,z[1])}}return b}function Yo(o,r,l,f,y,b=1/0){let x=Math.min(b,y.distance(o[0],l[0]));if(x===0)return x;const I=new vA([[0,[0,o.length-1],[0,l.length-1]]],Mt);for(;I.length>0;){const U=I.pop();if(U[0]>=x)continue;const D=U[1],O=U[2],z=r?50:100,$=f?50:100;if(Gt(D)<=z&&Gt(O)<=$){if(!ae(D,o.length)&&ae(O,l.length))return NaN;let Y;if(r&&f)Y=ki(o,D,l,O,y),x=Math.min(x,Y);else if(r&&!f){const ot=o.slice(D[0],D[1]+1);for(let lt=O[0];lt<=O[1];++lt)if(Y=Qr(l[lt],ot,y),x=Math.min(x,Y),x===0)return x}else if(!r&&f){const ot=l.slice(O[0],O[1]+1);for(let lt=D[0];lt<=D[1];++lt)if(Y=Qr(o[lt],ot,y),x=Math.min(x,Y),x===0)return x}else Y=Ar(o,D,l,O,y),x=Math.min(x,Y)}else{const Y=xe(D,r),ot=xe(O,f);Zo(I,x,y,o,l,Y[0],ot[0]),Zo(I,x,y,o,l,Y[0],ot[1]),Zo(I,x,y,o,l,Y[1],ot[0]),Zo(I,x,y,o,l,Y[1],ot[1])}}return x}function Jo(o){return o.type==="MultiPolygon"?o.coordinates.map(r=>({type:"Polygon",coordinates:r})):o.type==="MultiLineString"?o.coordinates.map(r=>({type:"LineString",coordinates:r})):o.type==="MultiPoint"?o.coordinates.map(r=>({type:"Point",coordinates:r})):[o]}class Ns{constructor(r,l){this.type=he,this.geojson=r,this.geometries=l}static parse(r,l){if(r.length!==2)return l.error(`'distance' expression requires exactly one argument, but found ${r.length-1} instead.`);if(to(r[1])){const f=r[1];if(f.type==="FeatureCollection")return new Ns(f,f.features.map(y=>Jo(y.geometry)).flat());if(f.type==="Feature")return new Ns(f,Jo(f.geometry));if("type"in f&&"coordinates"in f)return new Ns(f,Jo(f))}return l.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(l,f){const y=l.geometry(),b=y.flat().map(U=>Bo([U.x,U.y],l.canonical));if(y.length===0)return NaN;const x=new bt(b[0][1]);let I=1/0;for(const U of f){switch(U.type){case"Point":I=Math.min(I,Yo(b,!1,[U.coordinates],!1,x,I));break;case"LineString":I=Math.min(I,Yo(b,!1,U.coordinates,!0,x,I));break;case"Polygon":I=Math.min(I,Wo(b,!1,U.coordinates,x,I))}if(I===0)return I}return I}(r,this.geometries);if(r.geometryType()==="LineString")return function(l,f){const y=l.geometry(),b=y.flat().map(U=>Bo([U.x,U.y],l.canonical));if(y.length===0)return NaN;const x=new bt(b[0][1]);let I=1/0;for(const U of f){switch(U.type){case"Point":I=Math.min(I,Yo(b,!0,[U.coordinates],!1,x,I));break;case"LineString":I=Math.min(I,Yo(b,!0,U.coordinates,!0,x,I));break;case"Polygon":I=Math.min(I,Wo(b,!0,U.coordinates,x,I))}if(I===0)return I}return I}(r,this.geometries);if(r.geometryType()==="Polygon")return function(l,f){const y=l.geometry();if(y.length===0||y[0].length===0)return NaN;const b=so(y,0).map(U=>U.map(D=>D.map(O=>Bo([O.x,O.y],l.canonical)))),x=new bt(b[0][0][0][1]);let I=1/0;for(const U of f)for(const D of b){switch(U.type){case"Point":I=Math.min(I,Wo([U.coordinates],!1,D,x,I));break;case"LineString":I=Math.min(I,Wo(U.coordinates,!0,D,x,I));break;case"Polygon":I=Math.min(I,Un(D,U.coordinates,x,I))}if(I===0)return I}return I}(r,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Os={"==":ka,"!=":al,">":Xl,"<":Qc,">=":Al,"<=":Zl,array:vn,at:lA,boolean:vn,case:Ko,coalesce:dA,collator:io,format:pA,image:xo,in:Ea,"index-of":Ta,interpolate:lr,"interpolate-hcl":lr,"interpolate-lab":lr,length:Ma,let:Vr,literal:eo,match:cA,number:vn,"number-format":no,object:vn,slice:uA,step:$o,string:vn,"to-boolean":Zi,"to-color":Zi,"to-number":Zi,"to-string":Zi,var:AA,within:gs,distance:Ns};class Ji{constructor(r,l,f,y){this.name=r,this.type=l,this._evaluate=f,this.args=y}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,l){const f=r[0],y=Ji.definitions[f];if(!y)return l.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const b=Array.isArray(y)?y[0]:y.type,x=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,I=x.filter(([D])=>!Array.isArray(D)||D.length===r.length-1);let U=null;for(const[D,O]of I){U=new fs(l.registry,ea,l.path,null,l.scope);const z=[];let $=!1;for(let Y=1;Y<r.length;Y++){const ot=r[Y],lt=Array.isArray(D)?D[Y-1]:D.type,wt=U.parse(ot,1+z.length,lt);if(!wt){$=!0;break}z.push(wt)}if(!$)if(Array.isArray(D)&&D.length!==z.length)U.error(`Expected ${D.length} arguments, but found ${z.length} instead.`);else{for(let Y=0;Y<z.length;Y++){const ot=Array.isArray(D)?D[Y]:D.type,lt=z[Y];U.concat(Y+1).checkSubtype(ot,lt.type)}if(U.errors.length===0)return new Ji(f,b,O,z)}}if(I.length===1)l.errors.push(...U.errors);else{const D=(I.length?I:x).map(([z])=>{return $=z,Array.isArray($)?`(${$.map(q).join(", ")})`:`(${q($.type)}...)`;var $}).join(" | "),O=[];for(let z=1;z<r.length;z++){const $=l.parse(r[z],1+O.length);if(!$)return null;O.push(q($.type))}l.error(`Expected arguments of type ${D}, but found (${O.join(", ")}) instead.`)}return null}static register(r,l){Ji.definitions=l;for(const f in l)r[f]=Ji}}function _n(o,[r,l,f,y]){r=r.evaluate(o),l=l.evaluate(o),f=f.evaluate(o);const b=y?y.evaluate(o):1,x=aA(r,l,f,b);if(x)throw new Bi(x);return new dr(r/255,l/255,f/255,b,!1)}function ta(o,r){return o in r}function oo(o,r){const l=r[o];return l===void 0?null:l}function ms(o){return{type:o}}function ea(o){if(o instanceof AA)return ea(o.boundExpression);if(o instanceof Ji&&o.name==="error"||o instanceof io||o instanceof gs||o instanceof Ns)return!1;const r=o instanceof Zi||o instanceof vn;let l=!0;return o.eachChild(f=>{l=r?l&&ea(f):l&&f instanceof eo}),!!l&&hn(o)&&ra(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function hn(o){if(o instanceof Ji&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof gs||o instanceof Ns)return!1;let r=!0;return o.eachChild(l=>{r&&!hn(l)&&(r=!1)}),r}function Oa(o){if(o instanceof Ji&&o.name==="feature-state")return!1;let r=!0;return o.eachChild(l=>{r&&!Oa(l)&&(r=!1)}),r}function ra(o,r){if(o instanceof Ji&&r.indexOf(o.name)>=0)return!1;let l=!0;return o.eachChild(f=>{l&&!ra(f,r)&&(l=!1)}),l}function dl(o){return{result:"success",value:o}}function bn(o){return{result:"error",value:o}}function ao(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function pl(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function bA(o){return!!o.expression&&o.expression.interpolated}function Er(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function Pn(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function ys(o){return o}function Ao(o,r){const l=r.type==="color",f=o.stops&&typeof o.stops[0][0]=="object",y=f||!(f||o.property!==void 0),b=o.type||(bA(r)?"exponential":"interval");if(l||r.type==="padding"){const O=l?dr.parse:di.parse;(o=Je({},o)).stops&&(o.stops=o.stops.map(z=>[z[0],O(z[1])])),o.default=O(o.default?o.default:r.default)}if(o.colorSpace&&(x=o.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var x;let I,U,D;if(b==="exponential")I=Ln;else if(b==="interval")I=Fo;else if(b==="categorical"){I=Rs,U=Object.create(null);for(const O of o.stops)U[O[0]]=O[1];D=typeof o.stops[0][0]}else{if(b!=="identity")throw new Error(`Unknown function type "${b}"`);I=Ra}if(f){const O={},z=[];for(let ot=0;ot<o.stops.length;ot++){const lt=o.stops[ot],wt=lt[0].zoom;O[wt]===void 0&&(O[wt]={zoom:wt,type:o.type,property:o.property,default:o.default,stops:[]},z.push(wt)),O[wt].stops.push([lt[0].value,lt[1]])}const $=[];for(const ot of z)$.push([O[ot].zoom,Ao(O[ot],r)]);const Y={name:"linear"};return{kind:"composite",interpolationType:Y,interpolationFactor:lr.interpolationFactor.bind(void 0,Y),zoomStops:$.map(ot=>ot[0]),evaluate:({zoom:ot},lt)=>Ln({stops:$,base:o.base},r,ot).evaluate(ot,lt)}}if(y){const O=b==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:O,interpolationFactor:lr.interpolationFactor.bind(void 0,O),zoomStops:o.stops.map(z=>z[0]),evaluate:({zoom:z})=>I(o,r,z,U,D)}}return{kind:"source",evaluate(O,z){const $=z&&z.properties?z.properties[o.property]:void 0;return $===void 0?Rn(o.default,r.default):I(o,r,$,U,D)}}}function Rn(o,r,l){return o!==void 0?o:r!==void 0?r:l!==void 0?l:void 0}function Rs(o,r,l,f,y){return Rn(typeof l===y?f[l]:void 0,o.default,r.default)}function Fo(o,r,l){if(Er(l)!=="number")return Rn(o.default,r.default);const f=o.stops.length;if(f===1||l<=o.stops[0][0])return o.stops[0][1];if(l>=o.stops[f-1][0])return o.stops[f-1][1];const y=Ua(o.stops.map(b=>b[0]),l);return o.stops[y][1]}function Ln(o,r,l){const f=o.base!==void 0?o.base:1;if(Er(l)!=="number")return Rn(o.default,r.default);const y=o.stops.length;if(y===1||l<=o.stops[0][0])return o.stops[0][1];if(l>=o.stops[y-1][0])return o.stops[y-1][1];const b=Ua(o.stops.map(O=>O[0]),l),x=function(O,z,$,Y){const ot=Y-$,lt=O-$;return ot===0?0:z===1?lt/ot:(Math.pow(z,lt)-1)/(Math.pow(z,ot)-1)}(l,f,o.stops[b][0],o.stops[b+1][0]),I=o.stops[b][1],U=o.stops[b+1][1],D=wn[r.type]||ys;return typeof I.evaluate=="function"?{evaluate(...O){const z=I.evaluate.apply(void 0,O),$=U.evaluate.apply(void 0,O);if(z!==void 0&&$!==void 0)return D(z,$,x,o.colorSpace)}}:D(I,U,x,o.colorSpace)}function Ra(o,r,l){switch(r.type){case"color":l=dr.parse(l);break;case"formatted":l=yi.fromString(l.toString());break;case"resolvedImage":l=Hi.fromString(l.toString());break;case"padding":l=di.parse(l);break;default:Er(l)===r.type||r.type==="enum"&&r.values[l]||(l=void 0)}return Rn(l,o.default,r.default)}Ji.register(Os,{error:[{kind:"error"},[rr],(o,[r])=>{throw new Bi(r.evaluate(o))}],typeof:[rr,[Pe],(o,[r])=>q(Li(r.evaluate(o)))],"to-rgba":[K(he,4),[vr],(o,[r])=>{const[l,f,y,b]=r.evaluate(o).rgb;return[255*l,255*f,255*y,b]}],rgb:[vr,[he,he,he],_n],rgba:[vr,[he,he,he,he],_n],has:{type:Ee,overloads:[[[rr],(o,[r])=>ta(r.evaluate(o),o.properties())],[[rr,ti],(o,[r,l])=>ta(r.evaluate(o),l.evaluate(o))]]},get:{type:Pe,overloads:[[[rr],(o,[r])=>oo(r.evaluate(o),o.properties())],[[rr,ti],(o,[r,l])=>oo(r.evaluate(o),l.evaluate(o))]]},"feature-state":[Pe,[rr],(o,[r])=>oo(r.evaluate(o),o.featureState||{})],properties:[ti,[],o=>o.properties()],"geometry-type":[rr,[],o=>o.geometryType()],id:[Pe,[],o=>o.id()],zoom:[he,[],o=>o.globals.zoom],"heatmap-density":[he,[],o=>o.globals.heatmapDensity||0],"line-progress":[he,[],o=>o.globals.lineProgress||0],accumulated:[Pe,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[he,ms(he),(o,r)=>{let l=0;for(const f of r)l+=f.evaluate(o);return l}],"*":[he,ms(he),(o,r)=>{let l=1;for(const f of r)l*=f.evaluate(o);return l}],"-":{type:he,overloads:[[[he,he],(o,[r,l])=>r.evaluate(o)-l.evaluate(o)],[[he],(o,[r])=>-r.evaluate(o)]]},"/":[he,[he,he],(o,[r,l])=>r.evaluate(o)/l.evaluate(o)],"%":[he,[he,he],(o,[r,l])=>r.evaluate(o)%l.evaluate(o)],ln2:[he,[],()=>Math.LN2],pi:[he,[],()=>Math.PI],e:[he,[],()=>Math.E],"^":[he,[he,he],(o,[r,l])=>Math.pow(r.evaluate(o),l.evaluate(o))],sqrt:[he,[he],(o,[r])=>Math.sqrt(r.evaluate(o))],log10:[he,[he],(o,[r])=>Math.log(r.evaluate(o))/Math.LN10],ln:[he,[he],(o,[r])=>Math.log(r.evaluate(o))],log2:[he,[he],(o,[r])=>Math.log(r.evaluate(o))/Math.LN2],sin:[he,[he],(o,[r])=>Math.sin(r.evaluate(o))],cos:[he,[he],(o,[r])=>Math.cos(r.evaluate(o))],tan:[he,[he],(o,[r])=>Math.tan(r.evaluate(o))],asin:[he,[he],(o,[r])=>Math.asin(r.evaluate(o))],acos:[he,[he],(o,[r])=>Math.acos(r.evaluate(o))],atan:[he,[he],(o,[r])=>Math.atan(r.evaluate(o))],min:[he,ms(he),(o,r)=>Math.min(...r.map(l=>l.evaluate(o)))],max:[he,ms(he),(o,r)=>Math.max(...r.map(l=>l.evaluate(o)))],abs:[he,[he],(o,[r])=>Math.abs(r.evaluate(o))],round:[he,[he],(o,[r])=>{const l=r.evaluate(o);return l<0?-Math.round(-l):Math.round(l)}],floor:[he,[he],(o,[r])=>Math.floor(r.evaluate(o))],ceil:[he,[he],(o,[r])=>Math.ceil(r.evaluate(o))],"filter-==":[Ee,[rr,Pe],(o,[r,l])=>o.properties()[r.value]===l.value],"filter-id-==":[Ee,[Pe],(o,[r])=>o.id()===r.value],"filter-type-==":[Ee,[rr],(o,[r])=>o.geometryType()===r.value],"filter-<":[Ee,[rr,Pe],(o,[r,l])=>{const f=o.properties()[r.value],y=l.value;return typeof f==typeof y&&f<y}],"filter-id-<":[Ee,[Pe],(o,[r])=>{const l=o.id(),f=r.value;return typeof l==typeof f&&l<f}],"filter->":[Ee,[rr,Pe],(o,[r,l])=>{const f=o.properties()[r.value],y=l.value;return typeof f==typeof y&&f>y}],"filter-id->":[Ee,[Pe],(o,[r])=>{const l=o.id(),f=r.value;return typeof l==typeof f&&l>f}],"filter-<=":[Ee,[rr,Pe],(o,[r,l])=>{const f=o.properties()[r.value],y=l.value;return typeof f==typeof y&&f<=y}],"filter-id-<=":[Ee,[Pe],(o,[r])=>{const l=o.id(),f=r.value;return typeof l==typeof f&&l<=f}],"filter->=":[Ee,[rr,Pe],(o,[r,l])=>{const f=o.properties()[r.value],y=l.value;return typeof f==typeof y&&f>=y}],"filter-id->=":[Ee,[Pe],(o,[r])=>{const l=o.id(),f=r.value;return typeof l==typeof f&&l>=f}],"filter-has":[Ee,[Pe],(o,[r])=>r.value in o.properties()],"filter-has-id":[Ee,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[Ee,[K(rr)],(o,[r])=>r.value.indexOf(o.geometryType())>=0],"filter-id-in":[Ee,[K(Pe)],(o,[r])=>r.value.indexOf(o.id())>=0],"filter-in-small":[Ee,[rr,K(Pe)],(o,[r,l])=>l.value.indexOf(o.properties()[r.value])>=0],"filter-in-large":[Ee,[rr,K(Pe)],(o,[r,l])=>function(f,y,b,x){for(;b<=x;){const I=b+x>>1;if(y[I]===f)return!0;y[I]>f?x=I-1:b=I+1}return!1}(o.properties()[r.value],l.value,0,l.value.length-1)],all:{type:Ee,overloads:[[[Ee,Ee],(o,[r,l])=>r.evaluate(o)&&l.evaluate(o)],[ms(Ee),(o,r)=>{for(const l of r)if(!l.evaluate(o))return!1;return!0}]]},any:{type:Ee,overloads:[[[Ee,Ee],(o,[r,l])=>r.evaluate(o)||l.evaluate(o)],[ms(Ee),(o,r)=>{for(const l of r)if(l.evaluate(o))return!0;return!1}]]},"!":[Ee,[Ee],(o,[r])=>!r.evaluate(o)],"is-supported-script":[Ee,[rr],(o,[r])=>{const l=o.globals&&o.globals.isSupportedScript;return!l||l(r.evaluate(o))}],upcase:[rr,[rr],(o,[r])=>r.evaluate(o).toUpperCase()],downcase:[rr,[rr],(o,[r])=>r.evaluate(o).toLowerCase()],concat:[rr,ms(Pe),(o,r)=>r.map(l=>si(l.evaluate(o))).join("")],"resolved-locale":[rr,[mi],(o,[r])=>r.evaluate(o).resolvedLocale()]});class So{constructor(r,l){var f;this.expression=r,this._warningHistory={},this._evaluator=new Wi,this._defaultValue=l?(f=l).type==="color"&&Pn(f.default)?new dr(0,0,0,0):f.type==="color"?dr.parse(f.default)||null:f.type==="padding"?di.parse(f.default)||null:f.type==="variableAnchorOffsetCollection"?Xi.parse(f.default)||null:f.default===void 0?null:f.default:null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(r,l,f,y,b,x){return this._evaluator.globals=r,this._evaluator.feature=l,this._evaluator.featureState=f,this._evaluator.canonical=y,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(r,l,f,y,b,x){this._evaluator.globals=r,this._evaluator.feature=l||null,this._evaluator.featureState=f||null,this._evaluator.canonical=y,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=x||null;try{const I=this.expression.evaluate(this._evaluator);if(I==null||typeof I=="number"&&I!=I)return this._defaultValue;if(this._enumValues&&!(I in this._enumValues))throw new Bi(`Expected value to be one of ${Object.keys(this._enumValues).map(U=>JSON.stringify(U)).join(", ")}, but found ${JSON.stringify(I)} instead.`);return I}catch(I){return this._warningHistory[I.message]||(this._warningHistory[I.message]=!0,typeof console<"u"&&console.warn(I.message)),this._defaultValue}}}function vs(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Os}function Qn(o,r){const l=new fs(Os,ea,[],r?function(y){const b={color:vr,string:rr,number:he,enum:rr,boolean:Ee,formatted:Rr,padding:ri,resolvedImage:jr,variableAnchorOffsetCollection:gt};return y.type==="array"?K(b[y.value]||Pe,y.length):b[y.type]}(r):void 0),f=l.parse(o,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?dl(new So(f,r)):bn(l.errors)}class zn{constructor(r,l){this.kind=r,this._styleExpression=l,this.isStateDependent=r!=="constant"&&!Oa(l.expression)}evaluateWithoutErrorHandling(r,l,f,y,b,x){return this._styleExpression.evaluateWithoutErrorHandling(r,l,f,y,b,x)}evaluate(r,l,f,y,b,x){return this._styleExpression.evaluate(r,l,f,y,b,x)}}class Io{constructor(r,l,f,y){this.kind=r,this.zoomStops=f,this._styleExpression=l,this.isStateDependent=r!=="camera"&&!Oa(l.expression),this.interpolationType=y}evaluateWithoutErrorHandling(r,l,f,y,b,x){return this._styleExpression.evaluateWithoutErrorHandling(r,l,f,y,b,x)}evaluate(r,l,f,y,b,x){return this._styleExpression.evaluate(r,l,f,y,b,x)}interpolationFactor(r,l,f){return this.interpolationType?lr.interpolationFactor(this.interpolationType,r,l,f):0}}function za(o,r){const l=Qn(o,r);if(l.result==="error")return l;const f=l.value.expression,y=hn(f);if(!y&&!ao(r))return bn([new sr("","data expressions not supported")]);const b=ra(f,["zoom"]);if(!b&&!pl(r))return bn([new sr("","zoom expressions not supported")]);const x=zs(f);return x||b?x instanceof sr?bn([x]):x instanceof lr&&!bA(r)?bn([new sr("",'"interpolate" expressions cannot be used with this property')]):dl(x?new Io(y?"camera":"composite",l.value,x.labels,x instanceof lr?x.interpolation:void 0):new zn(y?"constant":"source",l.value)):bn([new sr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class lo{constructor(r,l){this._parameters=r,this._specification=l,Je(this,Ao(this._parameters,this._specification))}static deserialize(r){return new lo(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function zs(o){let r=null;if(o instanceof Vr)r=zs(o.result);else if(o instanceof dA){for(const l of o.args)if(r=zs(l),r)break}else(o instanceof $o||o instanceof lr)&&o.input instanceof Ji&&o.input.name==="zoom"&&(r=o);return r instanceof sr||o.eachChild(l=>{const f=zs(l);f instanceof sr?r=f:!r&&f?r=new sr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&f&&r!==f&&(r=new sr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function Ha(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const r of o.slice(1))if(!Ha(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const kn={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Hn(o){if(o==null)return{filter:()=>!0,needGeometry:!1};Ha(o)||(o=vi(o));const r=Qn(o,kn);if(r.result==="error")throw new Error(r.value.map(l=>`${l.key}: ${l.message}`).join(", "));return{filter:(l,f,y)=>r.value.evaluate(l,f,{},y),needGeometry:ei(o)}}function Or(o,r){return o<r?-1:o>r?1:0}function ei(o){if(!Array.isArray(o))return!1;if(o[0]==="within"||o[0]==="distance")return!0;for(let r=1;r<o.length;r++)if(ei(o[r]))return!0;return!1}function vi(o){if(!o)return!0;const r=o[0];return o.length<=1?r!=="any":r==="=="?Mi(o[1],o[2],"=="):r==="!="?uo(Mi(o[1],o[2],"==")):r==="<"||r===">"||r==="<="||r===">="?Mi(o[1],o[2],r):r==="any"?(l=o.slice(1),["any"].concat(l.map(vi))):r==="all"?["all"].concat(o.slice(1).map(vi)):r==="none"?["all"].concat(o.slice(1).map(vi).map(uo)):r==="in"?co(o[1],o.slice(2)):r==="!in"?uo(co(o[1],o.slice(2))):r==="has"?es(o[1]):r!=="!has"||uo(es(o[1]));var l}function Mi(o,r,l){switch(o){case"$type":return[`filter-type-${l}`,r];case"$id":return[`filter-id-${l}`,r];default:return[`filter-${l}`,o,r]}}function co(o,r){if(r.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(l=>typeof l!=typeof r[0])?["filter-in-large",o,["literal",r.sort(Or)]]:["filter-in-small",o,["literal",r]]}}function es(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function uo(o){return["!",o]}function ia(o){const r=typeof o;if(r==="number"||r==="boolean"||r==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let y="[";for(const b of o)y+=`${ia(b)},`;return`${y}]`}const l=Object.keys(o).sort();let f="{";for(let y=0;y<l.length;y++)f+=`${JSON.stringify(l[y])}:${ia(o[l[y]])},`;return`${f}}`}function Ou(o){let r="";for(const l of cr)r+=`/${ia(o[l])}`;return r}function fl(o){const r=o.value;return r?[new ce(o.key,r,"constants have been deprecated as of v8")]:[]}function Ti(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function ws(o){if(Array.isArray(o))return o.map(ws);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const r={};for(const l in o)r[l]=ws(o[l]);return r}return Ti(o)}function rs(o){const r=o.key,l=o.value,f=o.valueSpec||{},y=o.objectElementValidators||{},b=o.style,x=o.styleSpec,I=o.validateSpec;let U=[];const D=Er(l);if(D!=="object")return[new ce(r,l,`object expected, ${D} found`)];for(const O in l){const z=O.split(".")[0],$=f[z]||f["*"];let Y;if(y[z])Y=y[z];else if(f[z])Y=I;else if(y["*"])Y=y["*"];else{if(!f["*"]){U.push(new ce(r,l[O],`unknown property "${O}"`));continue}Y=I}U=U.concat(Y({key:(r&&`${r}.`)+O,value:l[O],valueSpec:$,style:b,styleSpec:x,object:l,objectKey:O,validateSpec:I},l))}for(const O in f)y[O]||f[O].required&&f[O].default===void 0&&l[O]===void 0&&U.push(new ce(r,l,`missing required property "${O}"`));return U}function xA(o){const r=o.value,l=o.valueSpec,f=o.style,y=o.styleSpec,b=o.key,x=o.arrayElementValidator||o.validateSpec;if(Er(r)!=="array")return[new ce(b,r,`array expected, ${Er(r)} found`)];if(l.length&&r.length!==l.length)return[new ce(b,r,`array length ${l.length} expected, length ${r.length} found`)];if(l["min-length"]&&r.length<l["min-length"])return[new ce(b,r,`array length at least ${l["min-length"]} expected, length ${r.length} found`)];let I={type:l.value,values:l.values};y.$version<7&&(I.function=l.function),Er(l.value)==="object"&&(I=l.value);let U=[];for(let D=0;D<r.length;D++)U=U.concat(x({array:r,arrayIndex:D,value:r[D],valueSpec:I,validateSpec:o.validateSpec,style:f,styleSpec:y,key:`${b}[${D}]`}));return U}function BA(o){const r=o.key,l=o.value,f=o.valueSpec;let y=Er(l);return y==="number"&&l!=l&&(y="NaN"),y!=="number"?[new ce(r,l,`number expected, ${y} found`)]:"minimum"in f&&l<f.minimum?[new ce(r,l,`${l} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&l>f.maximum?[new ce(r,l,`${l} is greater than the maximum value ${f.maximum}`)]:[]}function Va(o){const r=o.valueSpec,l=Ti(o.value.type);let f,y,b,x={};const I=l!=="categorical"&&o.value.property===void 0,U=!I,D=Er(o.value.stops)==="array"&&Er(o.value.stops[0])==="array"&&Er(o.value.stops[0][0])==="object",O=rs({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(Y){if(l==="identity")return[new ce(Y.key,Y.value,'identity function may not have a "stops" property')];let ot=[];const lt=Y.value;return ot=ot.concat(xA({key:Y.key,value:lt,valueSpec:Y.valueSpec,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec,arrayElementValidator:z})),Er(lt)==="array"&&lt.length===0&&ot.push(new ce(Y.key,lt,"array must have at least one stop")),ot},default:function(Y){return Y.validateSpec({key:Y.key,value:Y.value,valueSpec:r,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec})}}});return l==="identity"&&I&&O.push(new ce(o.key,o.value,'missing required property "property"')),l==="identity"||o.value.stops||O.push(new ce(o.key,o.value,'missing required property "stops"')),l==="exponential"&&o.valueSpec.expression&&!bA(o.valueSpec)&&O.push(new ce(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(U&&!ao(o.valueSpec)?O.push(new ce(o.key,o.value,"property functions not supported")):I&&!pl(o.valueSpec)&&O.push(new ce(o.key,o.value,"zoom functions not supported"))),l!=="categorical"&&!D||o.value.property!==void 0||O.push(new ce(o.key,o.value,'"property" property is required')),O;function z(Y){let ot=[];const lt=Y.value,wt=Y.key;if(Er(lt)!=="array")return[new ce(wt,lt,`array expected, ${Er(lt)} found`)];if(lt.length!==2)return[new ce(wt,lt,`array length 2 expected, length ${lt.length} found`)];if(D){if(Er(lt[0])!=="object")return[new ce(wt,lt,`object expected, ${Er(lt[0])} found`)];if(lt[0].zoom===void 0)return[new ce(wt,lt,"object stop key must have zoom")];if(lt[0].value===void 0)return[new ce(wt,lt,"object stop key must have value")];if(b&&b>Ti(lt[0].zoom))return[new ce(wt,lt[0].zoom,"stop zoom values must appear in ascending order")];Ti(lt[0].zoom)!==b&&(b=Ti(lt[0].zoom),y=void 0,x={}),ot=ot.concat(rs({key:`${wt}[0]`,value:lt[0],valueSpec:{zoom:{}},validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec,objectElementValidators:{zoom:BA,value:$}}))}else ot=ot.concat($({key:`${wt}[0]`,value:lt[0],valueSpec:{},validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec},lt));return vs(ws(lt[1]))?ot.concat([new ce(`${wt}[1]`,lt[1],"expressions are not allowed in function stops.")]):ot.concat(Y.validateSpec({key:`${wt}[1]`,value:lt[1],valueSpec:r,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec}))}function $(Y,ot){const lt=Er(Y.value),wt=Ti(Y.value),Ft=Y.value!==null?Y.value:ot;if(f){if(lt!==f)return[new ce(Y.key,Ft,`${lt} stop domain type must match previous stop domain type ${f}`)]}else f=lt;if(lt!=="number"&&lt!=="string"&&lt!=="boolean")return[new ce(Y.key,Ft,"stop domain value must be a number, string, or boolean")];if(lt!=="number"&&l!=="categorical"){let Kt=`number expected, ${lt} found`;return ao(r)&&l===void 0&&(Kt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ce(Y.key,Ft,Kt)]}return l!=="categorical"||lt!=="number"||isFinite(wt)&&Math.floor(wt)===wt?l!=="categorical"&&lt==="number"&&y!==void 0&&wt<y?[new ce(Y.key,Ft,"stop domain values must appear in ascending order")]:(y=wt,l==="categorical"&&wt in x?[new ce(Y.key,Ft,"stop domain values must be unique")]:(x[wt]=!0,[])):[new ce(Y.key,Ft,`integer expected, found ${wt}`)]}}function Vi(o){const r=(o.expressionContext==="property"?za:Qn)(ws(o.value),o.valueSpec);if(r.result==="error")return r.value.map(f=>new ce(`${o.key}${f.key}`,o.value,f.message));const l=r.value.expression||r.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!l.outputDefined())return[new ce(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!Oa(l))return[new ce(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!Oa(l))return[new ce(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!ra(l,["zoom","feature-state"]))return[new ce(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!hn(l))return[new ce(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function dn(o){const r=o.key,l=o.value,f=o.valueSpec,y=[];return Array.isArray(f.values)?f.values.indexOf(Ti(l))===-1&&y.push(new ce(r,l,`expected one of [${f.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(f.values).indexOf(Ti(l))===-1&&y.push(new ce(r,l,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(l)} found`)),y}function CA(o){return Ha(ws(o.value))?Vi(Je({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ja(o)}function ja(o){const r=o.value,l=o.key;if(Er(r)!=="array")return[new ce(l,r,`array expected, ${Er(r)} found`)];const f=o.styleSpec;let y,b=[];if(r.length<1)return[new ce(l,r,"filter array must have at least 1 element")];switch(b=b.concat(dn({key:`${l}[0]`,value:r[0],valueSpec:f.filter_operator,style:o.style,styleSpec:o.styleSpec})),Ti(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&Ti(r[1])==="$type"&&b.push(new ce(l,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&b.push(new ce(l,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(y=Er(r[1]),y!=="string"&&b.push(new ce(`${l}[1]`,r[1],`string expected, ${y} found`)));for(let x=2;x<r.length;x++)y=Er(r[x]),Ti(r[1])==="$type"?b=b.concat(dn({key:`${l}[${x}]`,value:r[x],valueSpec:f.geometry_type,style:o.style,styleSpec:o.styleSpec})):y!=="string"&&y!=="number"&&y!=="boolean"&&b.push(new ce(`${l}[${x}]`,r[x],`string, number, or boolean expected, ${y} found`));break;case"any":case"all":case"none":for(let x=1;x<r.length;x++)b=b.concat(ja({key:`${l}[${x}]`,value:r[x],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":y=Er(r[1]),r.length!==2?b.push(new ce(l,r,`filter array for "${r[0]}" operator must have 2 elements`)):y!=="string"&&b.push(new ce(`${l}[1]`,r[1],`string expected, ${y} found`))}return b}function FA(o,r){const l=o.key,f=o.validateSpec,y=o.style,b=o.styleSpec,x=o.value,I=o.objectKey,U=b[`${r}_${o.layerType}`];if(!U)return[];const D=I.match(/^(.*)-transition$/);if(r==="paint"&&D&&U[D[1]]&&U[D[1]].transition)return f({key:l,value:x,valueSpec:b.transition,style:y,styleSpec:b});const O=o.valueSpec||U[I];if(!O)return[new ce(l,x,`unknown property "${I}"`)];let z;if(Er(x)==="string"&&ao(O)&&!O.tokens&&(z=/^{([^}]+)}$/.exec(x)))return[new ce(l,x,`"${I}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(z[1])} }\`.`)];const $=[];return o.layerType==="symbol"&&(I==="text-field"&&y&&!y.glyphs&&$.push(new ce(l,x,'use of "text-field" requires a style "glyphs" property')),I==="text-font"&&Pn(ws(x))&&Ti(x.type)==="identity"&&$.push(new ce(l,x,'"text-font" does not support identity functions'))),$.concat(f({key:o.key,value:x,valueSpec:O,style:y,styleSpec:b,expressionContext:"property",propertyType:r,propertyKey:I}))}function SA(o){return FA(o,"paint")}function IA(o){return FA(o,"layout")}function gl(o){let r=[];const l=o.value,f=o.key,y=o.style,b=o.styleSpec;l.type||l.ref||r.push(new ce(f,l,'either "type" or "ref" is required'));let x=Ti(l.type);const I=Ti(l.ref);if(l.id){const U=Ti(l.id);for(let D=0;D<o.arrayIndex;D++){const O=y.layers[D];Ti(O.id)===U&&r.push(new ce(f,l.id,`duplicate layer id "${l.id}", previously used at line ${O.id.__line__}`))}}if("ref"in l){let U;["type","source","source-layer","filter","layout"].forEach(D=>{D in l&&r.push(new ce(f,l[D],`"${D}" is prohibited for ref layers`))}),y.layers.forEach(D=>{Ti(D.id)===I&&(U=D)}),U?U.ref?r.push(new ce(f,l.ref,"ref cannot reference another ref layer")):x=Ti(U.type):r.push(new ce(f,l.ref,`ref layer "${I}" not found`))}else if(x!=="background")if(l.source){const U=y.sources&&y.sources[l.source],D=U&&Ti(U.type);U?D==="vector"&&x==="raster"?r.push(new ce(f,l.source,`layer "${l.id}" requires a raster source`)):D!=="raster-dem"&&x==="hillshade"?r.push(new ce(f,l.source,`layer "${l.id}" requires a raster-dem source`)):D==="raster"&&x!=="raster"?r.push(new ce(f,l.source,`layer "${l.id}" requires a vector source`)):D!=="vector"||l["source-layer"]?D==="raster-dem"&&x!=="hillshade"?r.push(new ce(f,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!l.paint||!l.paint["line-gradient"]||D==="geojson"&&U.lineMetrics||r.push(new ce(f,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new ce(f,l,`layer "${l.id}" must specify a "source-layer"`)):r.push(new ce(f,l.source,`source "${l.source}" not found`))}else r.push(new ce(f,l,'missing required property "source"'));return r=r.concat(rs({key:f,value:l,valueSpec:b.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${f}.type`,value:l.type,valueSpec:b.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:l,objectKey:"type"}),filter:CA,layout:U=>rs({layer:l,key:U.key,value:U.value,style:U.style,styleSpec:U.styleSpec,validateSpec:U.validateSpec,objectElementValidators:{"*":D=>IA(Je({layerType:x},D))}}),paint:U=>rs({layer:l,key:U.key,value:U.value,style:U.style,styleSpec:U.styleSpec,validateSpec:U.validateSpec,objectElementValidators:{"*":D=>SA(Je({layerType:x},D))}})}})),r}function Eo(o){const r=o.value,l=o.key,f=Er(r);return f!=="string"?[new ce(l,r,`string expected, ${f} found`)]:[]}const EA={promoteId:function({key:o,value:r}){if(Er(r)==="string")return Eo({key:o,value:r});{const l=[];for(const f in r)l.push(...Eo({key:`${o}.${f}`,value:r[f]}));return l}}};function ml(o){const r=o.value,l=o.key,f=o.styleSpec,y=o.style,b=o.validateSpec;if(!r.type)return[new ce(l,r,'"type" is required')];const x=Ti(r.type);let I;switch(x){case"vector":case"raster":return I=rs({key:l,value:r,valueSpec:f[`source_${x.replace("-","_")}`],style:o.style,styleSpec:f,objectElementValidators:EA,validateSpec:b}),I;case"raster-dem":return I=function(U){var D;const O=(D=U.sourceName)!==null&&D!==void 0?D:"",z=U.value,$=U.styleSpec,Y=$.source_raster_dem,ot=U.style;let lt=[];const wt=Er(z);if(z===void 0)return lt;if(wt!=="object")return lt.push(new ce("source_raster_dem",z,`object expected, ${wt} found`)),lt;const Ft=Ti(z.encoding)==="custom",Kt=["redFactor","greenFactor","blueFactor","baseShift"],kt=U.value.encoding?`"${U.value.encoding}"`:"Default";for(const zt in z)!Ft&&Kt.includes(zt)?lt.push(new ce(zt,z[zt],`In "${O}": "${zt}" is only valid when "encoding" is set to "custom". ${kt} encoding found`)):Y[zt]?lt=lt.concat(U.validateSpec({key:zt,value:z[zt],valueSpec:Y[zt],validateSpec:U.validateSpec,style:ot,styleSpec:$})):lt.push(new ce(zt,z[zt],`unknown property "${zt}"`));return lt}({sourceName:l,value:r,style:o.style,styleSpec:f,validateSpec:b}),I;case"geojson":if(I=rs({key:l,value:r,valueSpec:f.source_geojson,style:y,styleSpec:f,validateSpec:b,objectElementValidators:EA}),r.cluster)for(const U in r.clusterProperties){const[D,O]=r.clusterProperties[U],z=typeof D=="string"?[D,["accumulated"],["get",U]]:D;I.push(...Vi({key:`${l}.${U}.map`,value:O,validateSpec:b,expressionContext:"cluster-map"})),I.push(...Vi({key:`${l}.${U}.reduce`,value:z,validateSpec:b,expressionContext:"cluster-reduce"}))}return I;case"video":return rs({key:l,value:r,valueSpec:f.source_video,style:y,validateSpec:b,styleSpec:f});case"image":return rs({key:l,value:r,valueSpec:f.source_image,style:y,validateSpec:b,styleSpec:f});case"canvas":return[new ce(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return dn({key:`${l}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:y,validateSpec:b,styleSpec:f})}}function yl(o){const r=o.value,l=o.styleSpec,f=l.light,y=o.style;let b=[];const x=Er(r);if(r===void 0)return b;if(x!=="object")return b=b.concat([new ce("light",r,`object expected, ${x} found`)]),b;for(const I in r){const U=I.match(/^(.*)-transition$/);b=b.concat(U&&f[U[1]]&&f[U[1]].transition?o.validateSpec({key:I,value:r[I],valueSpec:l.transition,validateSpec:o.validateSpec,style:y,styleSpec:l}):f[I]?o.validateSpec({key:I,value:r[I],valueSpec:f[I],validateSpec:o.validateSpec,style:y,styleSpec:l}):[new ce(I,r[I],`unknown property "${I}"`)])}return b}function vl(o){const r=o.value,l=o.styleSpec,f=l.sky,y=o.style,b=Er(r);if(r===void 0)return[];if(b!=="object")return[new ce("sky",r,`object expected, ${b} found`)];let x=[];for(const I in r)x=x.concat(f[I]?o.validateSpec({key:I,value:r[I],valueSpec:f[I],style:y,styleSpec:l}):[new ce(I,r[I],`unknown property "${I}"`)]);return x}function Ru(o){const r=o.value,l=o.styleSpec,f=l.terrain,y=o.style;let b=[];const x=Er(r);if(r===void 0)return b;if(x!=="object")return b=b.concat([new ce("terrain",r,`object expected, ${x} found`)]),b;for(const I in r)b=b.concat(f[I]?o.validateSpec({key:I,value:r[I],valueSpec:f[I],validateSpec:o.validateSpec,style:y,styleSpec:l}):[new ce(I,r[I],`unknown property "${I}"`)]);return b}function Mc(o){let r=[];const l=o.value,f=o.key;if(Array.isArray(l)){const y=[],b=[];for(const x in l)l[x].id&&y.includes(l[x].id)&&r.push(new ce(f,l,`all the sprites' ids must be unique, but ${l[x].id} is duplicated`)),y.push(l[x].id),l[x].url&&b.includes(l[x].url)&&r.push(new ce(f,l,`all the sprites' URLs must be unique, but ${l[x].url} is duplicated`)),b.push(l[x].url),r=r.concat(rs({key:`${f}[${x}]`,value:l[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return r}return Eo({key:f,value:l})}const Jl={"*":()=>[],array:xA,boolean:function(o){const r=o.value,l=o.key,f=Er(r);return f!=="boolean"?[new ce(l,r,`boolean expected, ${f} found`)]:[]},number:BA,color:function(o){const r=o.key,l=o.value,f=Er(l);return f!=="string"?[new ce(r,l,`color expected, ${f} found`)]:dr.parse(String(l))?[]:[new ce(r,l,`color expected, "${l}" found`)]},constants:fl,enum:dn,filter:CA,function:Va,layer:gl,object:rs,source:ml,light:yl,sky:vl,terrain:Ru,projection:function(o){const r=o.value,l=o.styleSpec,f=l.projection,y=o.style,b=Er(r);if(r===void 0)return[];if(b!=="object")return[new ce("projection",r,`object expected, ${b} found`)];let x=[];for(const I in r)x=x.concat(f[I]?o.validateSpec({key:I,value:r[I],valueSpec:f[I],style:y,styleSpec:l}):[new ce(I,r[I],`unknown property "${I}"`)]);return x},string:Eo,formatted:function(o){return Eo(o).length===0?[]:Vi(o)},resolvedImage:function(o){return Eo(o).length===0?[]:Vi(o)},padding:function(o){const r=o.key,l=o.value;if(Er(l)==="array"){if(l.length<1||l.length>4)return[new ce(r,l,`padding requires 1 to 4 values; ${l.length} values found`)];const f={type:"number"};let y=[];for(let b=0;b<l.length;b++)y=y.concat(o.validateSpec({key:`${r}[${b}]`,value:l[b],validateSpec:o.validateSpec,valueSpec:f}));return y}return BA({key:r,value:l,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const r=o.key,l=o.value,f=Er(l),y=o.styleSpec;if(f!=="array"||l.length<1||l.length%2!=0)return[new ce(r,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let b=[];for(let x=0;x<l.length;x+=2)b=b.concat(dn({key:`${r}[${x}]`,value:l[x],valueSpec:y.layout_symbol["text-anchor"]})),b=b.concat(xA({key:`${r}[${x+1}]`,value:l[x+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:y}));return b},sprite:Mc};function TA(o){const r=o.value,l=o.valueSpec,f=o.styleSpec;return o.validateSpec=TA,l.expression&&Pn(Ti(r))?Va(o):l.expression&&vs(ws(r))?Vi(o):l.type&&Jl[l.type]?Jl[l.type](o):rs(Je({},o,{valueSpec:l.type?f[l.type]:l}))}function zu(o){const r=o.value,l=o.key,f=Eo(o);return f.length||(r.indexOf("{fontstack}")===-1&&f.push(new ce(l,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&f.push(new ce(l,r,'"glyphs" url must include a "{range}" token'))),f}function Hs(o,r=nt){let l=[];return l=l.concat(TA({key:"",value:o,valueSpec:r.$root,styleSpec:r,style:o,validateSpec:TA,objectElementValidators:{glyphs:zu,"*":()=>[]}})),o.constants&&(l=l.concat(fl({key:"constants",value:o.constants,style:o,styleSpec:r,validateSpec:TA}))),Dc(l)}function Vs(o){return function(r){return o({...r,validateSpec:TA})}}function Dc(o){return[].concat(o).sort((r,l)=>r.line-l.line)}function is(o){return function(...r){return Dc(o.apply(this,r))}}Hs.source=is(Vs(ml)),Hs.sprite=is(Vs(Mc)),Hs.glyphs=is(Vs(zu)),Hs.light=is(Vs(yl)),Hs.sky=is(Vs(vl)),Hs.terrain=is(Vs(Ru)),Hs.layer=is(Vs(gl)),Hs.filter=is(Vs(CA)),Hs.paintProperty=is(Vs(SA)),Hs.layoutProperty=is(Vs(IA));const To=Hs,na=To.light,dd=To.sky,Nc=To.paintProperty,Hu=To.layoutProperty;function Vu(o,r){let l=!1;if(r&&r.length)for(const f of r)o.fire(new je(new Error(f.message))),l=!0;return l}class UA{constructor(r,l,f){const y=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const x=new Int32Array(this.arrayBuffer);r=x[0],this.d=(l=x[1])+2*(f=x[2]);for(let U=0;U<this.d*this.d;U++){const D=x[3+U],O=x[3+U+1];y.push(D===O?null:x.subarray(D,O))}const I=x[3+y.length+1];this.keys=x.subarray(x[3+y.length],I),this.bboxes=x.subarray(I),this.insert=this._insertReadonly}else{this.d=l+2*f;for(let x=0;x<this.d*this.d;x++)y.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=r,this.padding=f,this.scale=l/r,this.uid=0;const b=f/l*r;this.min=-b,this.max=r+b}insert(r,l,f,y,b){this._forEachCell(l,f,y,b,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(l),this.bboxes.push(f),this.bboxes.push(y),this.bboxes.push(b)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,l,f,y,b,x){this.cells[b].push(x)}query(r,l,f,y,b){const x=this.min,I=this.max;if(r<=x&&l<=x&&I<=f&&I<=y&&!b)return Array.prototype.slice.call(this.keys);{const U=[];return this._forEachCell(r,l,f,y,this._queryCell,U,{},b),U}}_queryCell(r,l,f,y,b,x,I,U){const D=this.cells[b];if(D!==null){const O=this.keys,z=this.bboxes;for(let $=0;$<D.length;$++){const Y=D[$];if(I[Y]===void 0){const ot=4*Y;(U?U(z[ot+0],z[ot+1],z[ot+2],z[ot+3]):r<=z[ot+2]&&l<=z[ot+3]&&f>=z[ot+0]&&y>=z[ot+1])?(I[Y]=!0,x.push(O[Y])):I[Y]=!1}}}}_forEachCell(r,l,f,y,b,x,I,U){const D=this._convertToCellCoord(r),O=this._convertToCellCoord(l),z=this._convertToCellCoord(f),$=this._convertToCellCoord(y);for(let Y=D;Y<=z;Y++)for(let ot=O;ot<=$;ot++){const lt=this.d*ot+Y;if((!U||U(this._convertFromCellCoord(Y),this._convertFromCellCoord(ot),this._convertFromCellCoord(Y+1),this._convertFromCellCoord(ot+1)))&&b.call(this,r,l,f,y,lt,x,I,U))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,l=3+this.cells.length+1+1;let f=0;for(let x=0;x<this.cells.length;x++)f+=this.cells[x].length;const y=new Int32Array(l+f+this.keys.length+this.bboxes.length);y[0]=this.extent,y[1]=this.n,y[2]=this.padding;let b=l;for(let x=0;x<r.length;x++){const I=r[x];y[3+x]=b,y.set(I,b),b+=I.length}return y[3+r.length]=b,y.set(this.keys,b),b+=this.keys.length,y[3+r.length+1]=b,y.set(this.bboxes,b),b+=this.bboxes.length,y.buffer}static serialize(r,l){const f=r.toArrayBuffer();return l&&l.push(f),{buffer:f}}static deserialize(r){return new UA(r.buffer)}}const ho={};function Re(o,r,l={}){if(ho[o])throw new Error(`${o} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:o,writeable:!1}),ho[o]={klass:r,omit:l.omit||[],shallow:l.shallow||[]}}Re("Object",Object),Re("TransferableGridIndex",UA),Re("Color",dr),Re("Error",Error),Re("AJAXError",Rt),Re("ResolvedImage",Hi),Re("StylePropertyFunction",lo),Re("StyleExpression",So,{omit:["_evaluator"]}),Re("ZoomDependentExpression",Io),Re("ZoomConstantExpression",zn),Re("CompoundExpression",Ji,{omit:["_evaluate"]});for(const o in Os)Os[o]._classRegistryKey||Re(`Expression_${o}`,Os[o]);function Uo(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function ns(o){return o.$name||o.constructor._classRegistryKey}function po(o){return!function(r){if(r===null||typeof r!="object")return!1;const l=ns(r);return!(!l||l==="Object")}(o)&&(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error||Uo(o)||Zt(o)||ArrayBuffer.isView(o)||o instanceof ImageData)}function wl(o,r){if(po(o))return(Uo(o)||Zt(o))&&r&&r.push(o),ArrayBuffer.isView(o)&&r&&r.push(o.buffer),o instanceof ImageData&&r&&r.push(o.data.buffer),o;if(Array.isArray(o)){const b=[];for(const x of o)b.push(wl(x,r));return b}if(typeof o!="object")throw new Error("can't serialize object of type "+typeof o);const l=ns(o);if(!l)throw new Error(`can't serialize object of unregistered class ${o.constructor.name}`);if(!ho[l])throw new Error(`${l} is not registered.`);const{klass:f}=ho[l],y=f.serialize?f.serialize(o,r):{};if(f.serialize){if(r&&y===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const b in o){if(!o.hasOwnProperty(b)||ho[l].omit.indexOf(b)>=0)continue;const x=o[b];y[b]=ho[l].shallow.indexOf(b)>=0?x:wl(x,r)}o instanceof Error&&(y.message=o.message)}if(y.$name)throw new Error("$name property is reserved for worker serialization logic.");return l!=="Object"&&(y.$name=l),y}function PA(o){if(po(o))return o;if(Array.isArray(o))return o.map(PA);if(typeof o!="object")throw new Error("can't deserialize object of type "+typeof o);const r=ns(o)||"Object";if(!ho[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:l}=ho[r];if(!l)throw new Error(`can't deserialize unregistered class ${r}`);if(l.deserialize)return l.deserialize(o);const f=Object.create(l.prototype);for(const y of Object.keys(o)){if(y==="$name")continue;const b=o[y];f[y]=ho[r].shallow.indexOf(y)>=0?b:PA(b)}return f}class Vn{constructor(){this.first=!0}update(r,l){const f=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=l),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=f,!0))}}const _r={"Latin-1 Supplement":o=>o>=128&&o<=255,"Hangul Jamo":o=>o>=4352&&o<=4607,Khmer:o=>o>=6016&&o<=6143,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Katakana:o=>o>=12448&&o<=12543,Kanbun:o=>o>=12688&&o<=12703,"CJK Strokes":o=>o>=12736&&o<=12783,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"Private Use Area":o=>o>=57344&&o<=63743,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function Oc(o){for(const r of o)if(Po(r.charCodeAt(0)))return!0;return!1}function pd(o){for(const r of o)if(!ju(r.charCodeAt(0)))return!1;return!0}function tc(o){const r=o.map(l=>{try{return new RegExp(`\\p{sc=${l}}`,"u").source}catch{return null}}).filter(l=>l);return new RegExp(r.join("|"),"u")}const Rc=tc(["Arab","Dupl","Mong","Ougr","Syrc"]);function ju(o){return!Rc.test(String.fromCodePoint(o))}const zc=tc(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Po(o){return!(o!==746&&o!==747&&(o<4352||!(_r["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||_r["CJK Compatibility"](o)||_r["CJK Strokes"](o)||!(!_r["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||_r["Enclosed CJK Letters and Months"](o)||_r["Ideographic Description Characters"](o)||_r.Kanbun(o)||_r.Katakana(o)&&o!==12540||!(!_r["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!_r["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||_r["Vertical Forms"](o)||_r["Yijing Hexagram Symbols"](o)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(o))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(o))||zc.test(String.fromCodePoint(o)))))}function LA(o){return!(Po(o)||function(r){return!!(_r["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||_r["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||_r["Letterlike Symbols"](r)||_r["Number Forms"](r)||_r["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||_r["Control Pictures"](r)&&r!==9251||_r["Optical Character Recognition"](r)||_r["Enclosed Alphanumerics"](r)||_r["Geometric Shapes"](r)||_r["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||_r["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||_r["CJK Symbols and Punctuation"](r)||_r.Katakana(r)||_r["Private Use Area"](r)||_r["CJK Compatibility Forms"](r)||_r["Small Form Variants"](r)||_r["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(o))}const QA=tc(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Ka(o){return QA.test(String.fromCodePoint(o))}function _l(o,r){return!(!r&&Ka(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||_r.Khmer(o))}function Ku(o){for(const r of o)if(Ka(r.charCodeAt(0)))return!0;return!1}const fo=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(o){this.pluginStatus=o.pluginStatus,this.pluginURL=o.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(o){this.applyArabicShaping=o.applyArabicShaping,this.processBidirectionalText=o.processBidirectionalText,this.processStyledBidirectionalText=o.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class ii{constructor(r,l){this.zoom=r,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.zoomHistory=l.zoomHistory,this.transition=l.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Vn,this.transition={})}isSupportedScript(r){return function(l,f){for(const y of l)if(!_l(y.charCodeAt(0),f))return!1;return!0}(r,fo.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,l=r-Math.floor(r),f=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*l}}}class ec{constructor(r,l){this.property=r,this.value=l,this.expression=function(f,y){if(Pn(f))return new lo(f,y);if(vs(f)){const b=za(f,y);if(b.result==="error")throw new Error(b.value.map(x=>`${x.key}: ${x.message}`).join(", "));return b.value}{let b=f;return y.type==="color"&&typeof f=="string"?b=dr.parse(f):y.type!=="padding"||typeof f!="number"&&!Array.isArray(f)?y.type==="variableAnchorOffsetCollection"&&Array.isArray(f)&&(b=Xi.parse(f)):b=di.parse(f),{kind:"constant",evaluate:()=>b}}}(l===void 0?r.specification.default:l,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,l,f){return this.property.possiblyEvaluate(this,r,l,f)}}class rc{constructor(r){this.property=r,this.value=new ec(r,void 0)}transitioned(r,l){return new $u(this.property,this.value,l,xt({},r.transition,this.transition),r.now)}untransitioned(){return new $u(this.property,this.value,null,{},0)}}class kA{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return at(this._values[r].value.value)}setValue(r,l){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new rc(this._values[r].property)),this._values[r].value=new ec(this._values[r].property,l===null?void 0:at(l))}getTransition(r){return at(this._values[r].transition)}setTransition(r,l){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new rc(this._values[r].property)),this._values[r].transition=at(l)||void 0}serialize(){const r={};for(const l of Object.keys(this._values)){const f=this.getValue(l);f!==void 0&&(r[l]=f);const y=this.getTransition(l);y!==void 0&&(r[`${l}-transition`]=y)}return r}transitioned(r,l){const f=new qu(this._properties);for(const y of Object.keys(this._values))f._values[y]=this._values[y].transitioned(r,l._values[y]);return f}untransitioned(){const r=new qu(this._properties);for(const l of Object.keys(this._values))r._values[l]=this._values[l].untransitioned();return r}}class $u{constructor(r,l,f,y,b){this.property=r,this.value=l,this.begin=b+y.delay||0,this.end=this.begin+y.duration||0,r.specification.transition&&(y.delay||y.duration)&&(this.prior=f)}possiblyEvaluate(r,l,f){const y=r.now||0,b=this.value.possiblyEvaluate(r,l,f),x=this.prior;if(x){if(y>this.end)return this.prior=null,b;if(this.value.isDataDriven())return this.prior=null,b;if(y<this.begin)return x.possiblyEvaluate(r,l,f);{const I=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(r,l,f),b,function(U){if(U<=0)return 0;if(U>=1)return 1;const D=U*U,O=D*U;return 4*(U<.5?O:3*(U-D)+O-.75)}(I))}}return b}}class qu{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,l,f){const y=new _(this._properties);for(const b of Object.keys(this._values))y._values[b]=this._values[b].possiblyEvaluate(r,l,f);return y}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class Gu{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}hasValue(r){return this._values[r].value!==void 0}getValue(r){return at(this._values[r].value)}setValue(r,l){this._values[r]=new ec(this._values[r].property,l===null?void 0:at(l))}serialize(){const r={};for(const l of Object.keys(this._values)){const f=this.getValue(l);f!==void 0&&(r[l]=f)}return r}possiblyEvaluate(r,l,f){const y=new _(this._properties);for(const b of Object.keys(this._values))y._values[b]=this._values[b].possiblyEvaluate(r,l,f);return y}}class js{constructor(r,l,f){this.property=r,this.value=l,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,l,f,y){return this.property.evaluate(this.value,this.parameters,r,l,f,y)}}class _{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class e{constructor(r){this.specification=r}possiblyEvaluate(r,l){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(l)}interpolate(r,l,f){const y=wn[this.specification.type];return y?y(r,l,f):r}}class c{constructor(r,l){this.specification=r,this.overrides=l}possiblyEvaluate(r,l,f,y){return new js(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(l,null,{},f,y)}:r.expression,l)}interpolate(r,l,f){if(r.value.kind!=="constant"||l.value.kind!=="constant")return r;if(r.value.value===void 0||l.value.value===void 0)return new js(this,{kind:"constant",value:void 0},r.parameters);const y=wn[this.specification.type];if(y){const b=y(r.value.value,l.value.value,f);return new js(this,{kind:"constant",value:b},r.parameters)}return r}evaluate(r,l,f,y,b,x){return r.kind==="constant"?r.value:r.evaluate(l,f,y,b,x)}}class g extends c{possiblyEvaluate(r,l,f,y){if(r.value===void 0)return new js(this,{kind:"constant",value:void 0},l);if(r.expression.kind==="constant"){const b=r.expression.evaluate(l,null,{},f,y),x=r.property.specification.type==="resolvedImage"&&typeof b!="string"?b.name:b,I=this._calculate(x,x,x,l);return new js(this,{kind:"constant",value:I},l)}if(r.expression.kind==="camera"){const b=this._calculate(r.expression.evaluate({zoom:l.zoom-1}),r.expression.evaluate({zoom:l.zoom}),r.expression.evaluate({zoom:l.zoom+1}),l);return new js(this,{kind:"constant",value:b},l)}return new js(this,r.expression,l)}evaluate(r,l,f,y,b,x){if(r.kind==="source"){const I=r.evaluate(l,f,y,b,x);return this._calculate(I,I,I,l)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(l.zoom)-1},f,y),r.evaluate({zoom:Math.floor(l.zoom)},f,y),r.evaluate({zoom:Math.floor(l.zoom)+1},f,y),l):r.value}_calculate(r,l,f,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:r,to:l}:{from:f,to:l}}interpolate(r){return r}}class a{constructor(r){this.specification=r}possiblyEvaluate(r,l,f,y){if(r.value!==void 0){if(r.expression.kind==="constant"){const b=r.expression.evaluate(l,null,{},f,y);return this._calculate(b,b,b,l)}return this._calculate(r.expression.evaluate(new ii(Math.floor(l.zoom-1),l)),r.expression.evaluate(new ii(Math.floor(l.zoom),l)),r.expression.evaluate(new ii(Math.floor(l.zoom+1),l)),l)}}_calculate(r,l,f,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:r,to:l}:{from:f,to:l}}interpolate(r){return r}}class h{constructor(r){this.specification=r}possiblyEvaluate(r,l,f,y){return!!r.expression.evaluate(l,null,{},f,y)}interpolate(){return!1}}class m{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const l in r){const f=r[l];f.specification.overridable&&this.overridableProperties.push(l);const y=this.defaultPropertyValues[l]=new ec(f,void 0),b=this.defaultTransitionablePropertyValues[l]=new rc(f);this.defaultTransitioningPropertyValues[l]=b.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=y.possiblyEvaluate({})}}}Re("DataDrivenProperty",c),Re("DataConstantProperty",e),Re("CrossFadedDataDrivenProperty",g),Re("CrossFadedProperty",a),Re("ColorRampProperty",h);const w="-transition";class B extends oe{constructor(r,l){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),l.layout&&(this._unevaluatedLayout=new Gu(l.layout)),l.paint)){this._transitionablePaint=new kA(l.paint);for(const f in r.paint)this.setPaintProperty(f,r.paint[f],{validate:!1});for(const f in r.layout)this.setLayoutProperty(f,r.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new _(l.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,l,f={}){l!=null&&this._validate(Hu,`layers.${this.id}.layout.${r}`,r,l,f)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,l):this.visibility=l)}getPaintProperty(r){return r.endsWith(w)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,l,f={}){if(l!=null&&this._validate(Nc,`layers.${this.id}.paint.${r}`,r,l,f))return!1;if(r.endsWith(w))return this._transitionablePaint.setTransition(r.slice(0,-11),l||void 0),!1;{const y=this._transitionablePaint._values[r],b=y.property.specification["property-type"]==="cross-faded-data-driven",x=y.value.isDataDriven(),I=y.value;this._transitionablePaint.setValue(r,l),this._handleSpecialPaintPropertyUpdate(r);const U=this._transitionablePaint._values[r].value;return U.isDataDriven()||x||b||this._handleOverridablePaintPropertyUpdate(r,I,U)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,l,f){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,l){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,l)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),jt(r,(l,f)=>!(l===void 0||f==="layout"&&!Object.keys(l).length||f==="paint"&&!Object.keys(l).length))}_validate(r,l,f,y,b={}){return(!b||b.validate!==!1)&&Vu(this,r.call(To,{key:l,layerType:this.type,objectKey:f,value:y,styleSpec:nt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const l=this.paint.get(r);if(l instanceof js&&ao(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}}const S={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class P{constructor(r,l){this._structArray=r,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class L{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,l){return r._trim(),l&&(r.isTransferred=!0,l.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const l=Object.create(this.prototype);return l.arrayBuffer=r.arrayBuffer,l.length=r.length,l.capacity=r.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function M(o,r=1){let l=0,f=0;return{members:o.map(y=>{const b=S[y.type].BYTES_PER_ELEMENT,x=l=N(l,Math.max(r,b)),I=y.components||1;return f=Math.max(f,b),l+=b*I,{name:y.name,type:y.type,components:I,offset:x}}),size:N(l,Math.max(f,r)),alignment:r}}function N(o,r){return Math.ceil(o/r)*r}class H extends L{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l){const f=this.length;return this.resize(f+1),this.emplace(f,r,l)}emplace(r,l,f){const y=2*r;return this.int16[y+0]=l,this.int16[y+1]=f,r}}H.prototype.bytesPerElement=4,Re("StructArrayLayout2i4",H);class Z extends L{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,f){const y=this.length;return this.resize(y+1),this.emplace(y,r,l,f)}emplace(r,l,f,y){const b=3*r;return this.int16[b+0]=l,this.int16[b+1]=f,this.int16[b+2]=y,r}}Z.prototype.bytesPerElement=6,Re("StructArrayLayout3i6",Z);class G extends L{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,f,y){const b=this.length;return this.resize(b+1),this.emplace(b,r,l,f,y)}emplace(r,l,f,y,b){const x=4*r;return this.int16[x+0]=l,this.int16[x+1]=f,this.int16[x+2]=y,this.int16[x+3]=b,r}}G.prototype.bytesPerElement=8,Re("StructArrayLayout4i8",G);class X extends L{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,f,y,b,x){const I=this.length;return this.resize(I+1),this.emplace(I,r,l,f,y,b,x)}emplace(r,l,f,y,b,x,I){const U=6*r;return this.int16[U+0]=l,this.int16[U+1]=f,this.int16[U+2]=y,this.int16[U+3]=b,this.int16[U+4]=x,this.int16[U+5]=I,r}}X.prototype.bytesPerElement=12,Re("StructArrayLayout2i4i12",X);class ut extends L{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,f,y,b,x){const I=this.length;return this.resize(I+1),this.emplace(I,r,l,f,y,b,x)}emplace(r,l,f,y,b,x,I){const U=4*r,D=8*r;return this.int16[U+0]=l,this.int16[U+1]=f,this.uint8[D+4]=y,this.uint8[D+5]=b,this.uint8[D+6]=x,this.uint8[D+7]=I,r}}ut.prototype.bytesPerElement=8,Re("StructArrayLayout2i4ub8",ut);class tt extends L{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l){const f=this.length;return this.resize(f+1),this.emplace(f,r,l)}emplace(r,l,f){const y=2*r;return this.float32[y+0]=l,this.float32[y+1]=f,r}}tt.prototype.bytesPerElement=8,Re("StructArrayLayout2f8",tt);class it extends L{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,f,y,b,x,I,U,D,O){const z=this.length;return this.resize(z+1),this.emplace(z,r,l,f,y,b,x,I,U,D,O)}emplace(r,l,f,y,b,x,I,U,D,O,z){const $=10*r;return this.uint16[$+0]=l,this.uint16[$+1]=f,this.uint16[$+2]=y,this.uint16[$+3]=b,this.uint16[$+4]=x,this.uint16[$+5]=I,this.uint16[$+6]=U,this.uint16[$+7]=D,this.uint16[$+8]=O,this.uint16[$+9]=z,r}}it.prototype.bytesPerElement=20,Re("StructArrayLayout10ui20",it);class st extends L{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,f,y,b,x,I,U,D,O,z,$){const Y=this.length;return this.resize(Y+1),this.emplace(Y,r,l,f,y,b,x,I,U,D,O,z,$)}emplace(r,l,f,y,b,x,I,U,D,O,z,$,Y){const ot=12*r;return this.int16[ot+0]=l,this.int16[ot+1]=f,this.int16[ot+2]=y,this.int16[ot+3]=b,this.uint16[ot+4]=x,this.uint16[ot+5]=I,this.uint16[ot+6]=U,this.uint16[ot+7]=D,this.int16[ot+8]=O,this.int16[ot+9]=z,this.int16[ot+10]=$,this.int16[ot+11]=Y,r}}st.prototype.bytesPerElement=24,Re("StructArrayLayout4i4ui4i24",st);class yt extends L{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,f){const y=this.length;return this.resize(y+1),this.emplace(y,r,l,f)}emplace(r,l,f,y){const b=3*r;return this.float32[b+0]=l,this.float32[b+1]=f,this.float32[b+2]=y,r}}yt.prototype.bytesPerElement=12,Re("StructArrayLayout3f12",yt);class Lt extends L{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const l=this.length;return this.resize(l+1),this.emplace(l,r)}emplace(r,l){return this.uint32[1*r+0]=l,r}}Lt.prototype.bytesPerElement=4,Re("StructArrayLayout1ul4",Lt);class Qt extends L{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,f,y,b,x,I,U,D){const O=this.length;return this.resize(O+1),this.emplace(O,r,l,f,y,b,x,I,U,D)}emplace(r,l,f,y,b,x,I,U,D,O){const z=10*r,$=5*r;return this.int16[z+0]=l,this.int16[z+1]=f,this.int16[z+2]=y,this.int16[z+3]=b,this.int16[z+4]=x,this.int16[z+5]=I,this.uint32[$+3]=U,this.uint16[z+8]=D,this.uint16[z+9]=O,r}}Qt.prototype.bytesPerElement=20,Re("StructArrayLayout6i1ul2ui20",Qt);class ne extends L{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,f,y,b,x){const I=this.length;return this.resize(I+1),this.emplace(I,r,l,f,y,b,x)}emplace(r,l,f,y,b,x,I){const U=6*r;return this.int16[U+0]=l,this.int16[U+1]=f,this.int16[U+2]=y,this.int16[U+3]=b,this.int16[U+4]=x,this.int16[U+5]=I,r}}ne.prototype.bytesPerElement=12,Re("StructArrayLayout2i2i2i12",ne);class ee extends L{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,f,y,b){const x=this.length;return this.resize(x+1),this.emplace(x,r,l,f,y,b)}emplace(r,l,f,y,b,x){const I=4*r,U=8*r;return this.float32[I+0]=l,this.float32[I+1]=f,this.float32[I+2]=y,this.int16[U+6]=b,this.int16[U+7]=x,r}}ee.prototype.bytesPerElement=16,Re("StructArrayLayout2f1f2i16",ee);class ie extends L{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,f,y,b,x){const I=this.length;return this.resize(I+1),this.emplace(I,r,l,f,y,b,x)}emplace(r,l,f,y,b,x,I){const U=16*r,D=4*r,O=8*r;return this.uint8[U+0]=l,this.uint8[U+1]=f,this.float32[D+1]=y,this.float32[D+2]=b,this.int16[O+6]=x,this.int16[O+7]=I,r}}ie.prototype.bytesPerElement=16,Re("StructArrayLayout2ub2f2i16",ie);class Xt extends L{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,f){const y=this.length;return this.resize(y+1),this.emplace(y,r,l,f)}emplace(r,l,f,y){const b=3*r;return this.uint16[b+0]=l,this.uint16[b+1]=f,this.uint16[b+2]=y,r}}Xt.prototype.bytesPerElement=6,Re("StructArrayLayout3ui6",Xt);class we extends L{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,f,y,b,x,I,U,D,O,z,$,Y,ot,lt,wt,Ft){const Kt=this.length;return this.resize(Kt+1),this.emplace(Kt,r,l,f,y,b,x,I,U,D,O,z,$,Y,ot,lt,wt,Ft)}emplace(r,l,f,y,b,x,I,U,D,O,z,$,Y,ot,lt,wt,Ft,Kt){const kt=24*r,zt=12*r,se=48*r;return this.int16[kt+0]=l,this.int16[kt+1]=f,this.uint16[kt+2]=y,this.uint16[kt+3]=b,this.uint32[zt+2]=x,this.uint32[zt+3]=I,this.uint32[zt+4]=U,this.uint16[kt+10]=D,this.uint16[kt+11]=O,this.uint16[kt+12]=z,this.float32[zt+7]=$,this.float32[zt+8]=Y,this.uint8[se+36]=ot,this.uint8[se+37]=lt,this.uint8[se+38]=wt,this.uint32[zt+10]=Ft,this.int16[kt+22]=Kt,r}}we.prototype.bytesPerElement=48,Re("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",we);class De extends L{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,f,y,b,x,I,U,D,O,z,$,Y,ot,lt,wt,Ft,Kt,kt,zt,se,ve,Oe,hr,Me,Le,Ye,$e){const Ve=this.length;return this.resize(Ve+1),this.emplace(Ve,r,l,f,y,b,x,I,U,D,O,z,$,Y,ot,lt,wt,Ft,Kt,kt,zt,se,ve,Oe,hr,Me,Le,Ye,$e)}emplace(r,l,f,y,b,x,I,U,D,O,z,$,Y,ot,lt,wt,Ft,Kt,kt,zt,se,ve,Oe,hr,Me,Le,Ye,$e,Ve){const ue=32*r,er=16*r;return this.int16[ue+0]=l,this.int16[ue+1]=f,this.int16[ue+2]=y,this.int16[ue+3]=b,this.int16[ue+4]=x,this.int16[ue+5]=I,this.int16[ue+6]=U,this.int16[ue+7]=D,this.uint16[ue+8]=O,this.uint16[ue+9]=z,this.uint16[ue+10]=$,this.uint16[ue+11]=Y,this.uint16[ue+12]=ot,this.uint16[ue+13]=lt,this.uint16[ue+14]=wt,this.uint16[ue+15]=Ft,this.uint16[ue+16]=Kt,this.uint16[ue+17]=kt,this.uint16[ue+18]=zt,this.uint16[ue+19]=se,this.uint16[ue+20]=ve,this.uint16[ue+21]=Oe,this.uint16[ue+22]=hr,this.uint32[er+12]=Me,this.float32[er+13]=Le,this.float32[er+14]=Ye,this.uint16[ue+30]=$e,this.uint16[ue+31]=Ve,r}}De.prototype.bytesPerElement=64,Re("StructArrayLayout8i15ui1ul2f2ui64",De);class de extends L{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const l=this.length;return this.resize(l+1),this.emplace(l,r)}emplace(r,l){return this.float32[1*r+0]=l,r}}de.prototype.bytesPerElement=4,Re("StructArrayLayout1f4",de);class fe extends L{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,f){const y=this.length;return this.resize(y+1),this.emplace(y,r,l,f)}emplace(r,l,f,y){const b=3*r;return this.uint16[6*r+0]=l,this.float32[b+1]=f,this.float32[b+2]=y,r}}fe.prototype.bytesPerElement=12,Re("StructArrayLayout1ui2f12",fe);class Ne extends L{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,f){const y=this.length;return this.resize(y+1),this.emplace(y,r,l,f)}emplace(r,l,f,y){const b=4*r;return this.uint32[2*r+0]=l,this.uint16[b+2]=f,this.uint16[b+3]=y,r}}Ne.prototype.bytesPerElement=8,Re("StructArrayLayout1ul2ui8",Ne);class pr extends L{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l){const f=this.length;return this.resize(f+1),this.emplace(f,r,l)}emplace(r,l,f){const y=2*r;return this.uint16[y+0]=l,this.uint16[y+1]=f,r}}pr.prototype.bytesPerElement=4,Re("StructArrayLayout2ui4",pr);class Ue extends L{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const l=this.length;return this.resize(l+1),this.emplace(l,r)}emplace(r,l){return this.uint16[1*r+0]=l,r}}Ue.prototype.bytesPerElement=2,Re("StructArrayLayout1ui2",Ue);class or extends L{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,f,y){const b=this.length;return this.resize(b+1),this.emplace(b,r,l,f,y)}emplace(r,l,f,y,b){const x=4*r;return this.float32[x+0]=l,this.float32[x+1]=f,this.float32[x+2]=y,this.float32[x+3]=b,r}}or.prototype.bytesPerElement=16,Re("StructArrayLayout4f16",or);class Nr extends P{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new E(this.anchorPointX,this.anchorPointY)}}Nr.prototype.size=20;class $r extends Qt{get(r){return new Nr(this,r)}}Re("CollisionBoxArray",$r);class Ci extends P{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ci.prototype.size=48;class fr extends we{get(r){return new Ci(this,r)}}Re("PlacedSymbolArray",fr);class pi extends P{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}pi.prototype.size=64;class Ai extends De{get(r){return new pi(this,r)}}Re("SymbolInstanceArray",Ai);class Gr extends de{getoffsetX(r){return this.float32[1*r+0]}}Re("GlyphOffsetArray",Gr);class Wr extends Z{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}Re("SymbolLineVertexArray",Wr);class wi extends P{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}wi.prototype.size=12;class tn extends fe{get(r){return new wi(this,r)}}Re("TextAnchorOffsetArray",tn);class jn extends P{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}jn.prototype.size=8;class Fi extends Ne{get(r){return new jn(this,r)}}Re("FeatureIndexArray",Fi);class xn extends H{}class go extends H{}class sa extends H{}class ji extends X{}class Yr extends ut{}class mo extends tt{}class _s extends it{}class Bn extends st{}class Ki extends yt{}class pn extends Lt{}class fi extends ne{}class Cn extends ie{}class ss extends Xt{}class yo extends pr{}const Xu=M([{name:"a_pos",components:2,type:"Int16"}],4),{members:ic}=Xu;class en{constructor(r=[]){this.segments=r}prepareSegment(r,l,f,y){let b=this.segments[this.segments.length-1];return r>en.MAX_VERTEX_ARRAY_LENGTH&&vt(`Max vertices per segment is ${en.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!b||b.vertexLength+r>en.MAX_VERTEX_ARRAY_LENGTH||b.sortKey!==y)&&(b={vertexOffset:l.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},y!==void 0&&(b.sortKey=y),this.segments.push(b)),b}get(){return this.segments}destroy(){for(const r of this.segments)for(const l in r.vaos)r.vaos[l].destroy()}static simpleSegment(r,l,f,y){return new en([{vertexOffset:r,primitiveOffset:l,vertexLength:f,primitiveLength:y,vaos:{},sortKey:0}])}}function Ks(o,r){return 256*(o=Et(Math.floor(o),0,255))+Et(Math.floor(r),0,255)}en.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Re("SegmentVector",en);const $a=M([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var oa={exports:{}},qa={exports:{}};qa.exports=function(o,r){var l,f,y,b,x,I,U,D;for(f=o.length-(l=3&o.length),y=r,x=3432918353,I=461845907,D=0;D<f;)U=255&o.charCodeAt(D)|(255&o.charCodeAt(++D))<<8|(255&o.charCodeAt(++D))<<16|(255&o.charCodeAt(++D))<<24,++D,y=27492+(65535&(b=5*(65535&(y=(y^=U=(65535&(U=(U=(65535&U)*x+(((U>>>16)*x&65535)<<16)&4294967295)<<15|U>>>17))*I+(((U>>>16)*I&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(b>>>16)&65535)<<16);switch(U=0,l){case 3:U^=(255&o.charCodeAt(D+2))<<16;case 2:U^=(255&o.charCodeAt(D+1))<<8;case 1:y^=U=(65535&(U=(U=(65535&(U^=255&o.charCodeAt(D)))*x+(((U>>>16)*x&65535)<<16)&4294967295)<<15|U>>>17))*I+(((U>>>16)*I&65535)<<16)&4294967295}return y^=o.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0};var Hc=qa.exports,Vc={exports:{}};Vc.exports=function(o,r){for(var l,f=o.length,y=r^f,b=0;f>=4;)l=1540483477*(65535&(l=255&o.charCodeAt(b)|(255&o.charCodeAt(++b))<<8|(255&o.charCodeAt(++b))<<16|(255&o.charCodeAt(++b))<<24))+((1540483477*(l>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),f-=4,++b;switch(f){case 3:y^=(255&o.charCodeAt(b+2))<<16;case 2:y^=(255&o.charCodeAt(b+1))<<8;case 1:y=1540483477*(65535&(y^=255&o.charCodeAt(b)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0};var MA=Hc,DA=Vc.exports;oa.exports=MA,oa.exports.murmur3=MA,oa.exports.murmur2=DA;var fd=v(oa.exports);class Zu{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,l,f,y){this.ids.push(qf(r)),this.positions.push(l,f,y)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const l=qf(r);let f=0,y=this.ids.length-1;for(;f<y;){const x=f+y>>1;this.ids[x]>=l?y=x:f=x+1}const b=[];for(;this.ids[f]===l;)b.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return b}static serialize(r,l){const f=new Float64Array(r.ids),y=new Uint32Array(r.positions);return Wu(f,y,0,f.length-1),l&&l.push(f.buffer,y.buffer),{ids:f,positions:y}}static deserialize(r){const l=new Zu;return l.ids=r.ids,l.positions=r.positions,l.indexed=!0,l}}function qf(o){const r=+o;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:fd(String(o))}function Wu(o,r,l,f){for(;l<f;){const y=o[l+f>>1];let b=l-1,x=f+1;for(;;){do b++;while(o[b]<y);do x--;while(o[x]>y);if(b>=x)break;bl(o,b,x),bl(r,3*b,3*x),bl(r,3*b+1,3*x+1),bl(r,3*b+2,3*x+2)}x-l<f-x?(Wu(o,r,l,x),l=x+1):(Wu(o,r,x+1,f),f=x)}}function bl(o,r,l){const f=o[r];o[r]=o[l],o[l]=f}Re("FeaturePositionMap",Zu);class NA{constructor(r,l){this.gl=r.gl,this.location=l}}class jc extends NA{constructor(r,l){super(r,l),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class Kc extends NA{constructor(r,l){super(r,l),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class Yu extends NA{constructor(r,l){super(r,l),this.current=dr.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const $c=new Float32Array(16);function Ju(o){return[Ks(255*o.r,255*o.g),Ks(255*o.b,255*o.a)]}class qc{constructor(r,l,f){this.value=r,this.uniformNames=l.map(y=>`u_${y}`),this.type=f}setUniform(r,l,f){r.set(f.constantOr(this.value))}getBinding(r,l,f){return this.type==="color"?new Yu(r,l):new jc(r,l)}}class Ga{constructor(r,l){this.uniformNames=l.map(f=>`u_${f}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=r.tlbr}setUniform(r,l,f,y){const b=y==="u_pattern_to"?this.patternTo:y==="u_pattern_from"?this.patternFrom:y==="u_pixel_ratio_to"?this.pixelRatioTo:y==="u_pixel_ratio_from"?this.pixelRatioFrom:null;b&&r.set(b)}getBinding(r,l,f){return f.substr(0,9)==="u_pattern"?new Kc(r,l):new jc(r,l)}}class aa{constructor(r,l,f,y){this.expression=r,this.type=f,this.maxValue=0,this.paintVertexAttributes=l.map(b=>({name:`a_${b}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new y}populatePaintArray(r,l,f,y,b){const x=this.paintVertexArray.length,I=this.expression.evaluate(new ii(0),l,{},y,[],b);this.paintVertexArray.resize(r),this._setPaintValue(x,r,I)}updatePaintArray(r,l,f,y){const b=this.expression.evaluate({zoom:0},f,y);this._setPaintValue(r,l,b)}_setPaintValue(r,l,f){if(this.type==="color"){const y=Ju(f);for(let b=r;b<l;b++)this.paintVertexArray.emplace(b,y[0],y[1])}else{for(let y=r;y<l;y++)this.paintVertexArray.emplace(y,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class $s{constructor(r,l,f,y,b,x){this.expression=r,this.uniformNames=l.map(I=>`u_${I}_t`),this.type=f,this.useIntegerZoom=y,this.zoom=b,this.maxValue=0,this.paintVertexAttributes=l.map(I=>({name:`a_${I}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(r,l,f,y,b){const x=this.expression.evaluate(new ii(this.zoom),l,{},y,[],b),I=this.expression.evaluate(new ii(this.zoom+1),l,{},y,[],b),U=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(U,r,x,I)}updatePaintArray(r,l,f,y){const b=this.expression.evaluate({zoom:this.zoom},f,y),x=this.expression.evaluate({zoom:this.zoom+1},f,y);this._setPaintValue(r,l,b,x)}_setPaintValue(r,l,f,y){if(this.type==="color"){const b=Ju(f),x=Ju(y);for(let I=r;I<l;I++)this.paintVertexArray.emplace(I,b[0],b[1],x[0],x[1])}else{for(let b=r;b<l;b++)this.paintVertexArray.emplace(b,f,y);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(y))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,l){const f=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,y=Et(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);r.set(y)}getBinding(r,l,f){return new jc(r,l)}}class os{constructor(r,l,f,y,b,x){this.expression=r,this.type=l,this.useIntegerZoom=f,this.zoom=y,this.layerId=x,this.zoomInPaintVertexArray=new b,this.zoomOutPaintVertexArray=new b}populatePaintArray(r,l,f){const y=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(y,r,l.patterns&&l.patterns[this.layerId],f)}updatePaintArray(r,l,f,y,b){this._setPaintValues(r,l,f.patterns&&f.patterns[this.layerId],b)}_setPaintValues(r,l,f,y){if(!y||!f)return;const{min:b,mid:x,max:I}=f,U=y[b],D=y[x],O=y[I];if(U&&D&&O)for(let z=r;z<l;z++)this.zoomInPaintVertexArray.emplace(z,D.tl[0],D.tl[1],D.br[0],D.br[1],U.tl[0],U.tl[1],U.br[0],U.br[1],D.pixelRatio,U.pixelRatio),this.zoomOutPaintVertexArray.emplace(z,D.tl[0],D.tl[1],D.br[0],D.br[1],O.tl[0],O.tl[1],O.br[0],O.br[1],D.pixelRatio,O.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,$a.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,$a.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class gd{constructor(r,l,f){this.binders={},this._buffers=[];const y=[];for(const b in r.paint._values){if(!f(b))continue;const x=r.paint.get(b);if(!(x instanceof js&&ao(x.property.specification)))continue;const I=ly(b,r.type),U=x.value,D=x.property.specification.type,O=x.property.useIntegerZoom,z=x.property.specification["property-type"],$=z==="cross-faded"||z==="cross-faded-data-driven";if(U.kind==="constant")this.binders[b]=$?new Ga(U.value,I):new qc(U.value,I,D),y.push(`/u_${b}`);else if(U.kind==="source"||$){const Y=md(b,D,"source");this.binders[b]=$?new os(U,D,O,l,Y,r.id):new aa(U,I,D,Y),y.push(`/a_${b}`)}else{const Y=md(b,D,"composite");this.binders[b]=new $s(U,I,D,O,l,Y),y.push(`/z_${b}`)}}this.cacheKey=y.sort().join("")}getMaxValue(r){const l=this.binders[r];return l instanceof aa||l instanceof $s?l.maxValue:0}populatePaintArrays(r,l,f,y,b){for(const x in this.binders){const I=this.binders[x];(I instanceof aa||I instanceof $s||I instanceof os)&&I.populatePaintArray(r,l,f,y,b)}}setConstantPatternPositions(r,l){for(const f in this.binders){const y=this.binders[f];y instanceof Ga&&y.setConstantPatternPositions(r,l)}}updatePaintArrays(r,l,f,y,b){let x=!1;for(const I in r){const U=l.getPositions(I);for(const D of U){const O=f.feature(D.index);for(const z in this.binders){const $=this.binders[z];if(($ instanceof aa||$ instanceof $s||$ instanceof os)&&$.expression.isStateDependent===!0){const Y=y.paint.get(z);$.expression=Y.value,$.updatePaintArray(D.start,D.end,O,r[I],b),x=!0}}}}return x}defines(){const r=[];for(const l in this.binders){const f=this.binders[l];(f instanceof qc||f instanceof Ga)&&r.push(...f.uniformNames.map(y=>`#define HAS_UNIFORM_${y}`))}return r}getBinderAttributes(){const r=[];for(const l in this.binders){const f=this.binders[l];if(f instanceof aa||f instanceof $s)for(let y=0;y<f.paintVertexAttributes.length;y++)r.push(f.paintVertexAttributes[y].name);else if(f instanceof os)for(let y=0;y<$a.members.length;y++)r.push($a.members[y].name)}return r}getBinderUniforms(){const r=[];for(const l in this.binders){const f=this.binders[l];if(f instanceof qc||f instanceof Ga||f instanceof $s)for(const y of f.uniformNames)r.push(y)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,l){const f=[];for(const y in this.binders){const b=this.binders[y];if(b instanceof qc||b instanceof Ga||b instanceof $s){for(const x of b.uniformNames)if(l[x]){const I=b.getBinding(r,l[x],x);f.push({name:x,property:y,binding:I})}}}return f}setUniforms(r,l,f,y){for(const{name:b,property:x,binding:I}of l)this.binders[x].setUniform(I,y,f.get(x),b)}updatePaintBuffers(r){this._buffers=[];for(const l in this.binders){const f=this.binders[l];if(r&&f instanceof os){const y=r.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;y&&this._buffers.push(y)}else(f instanceof aa||f instanceof $s)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(r){for(const l in this.binders){const f=this.binders[l];(f instanceof aa||f instanceof $s||f instanceof os)&&f.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const l=this.binders[r];(l instanceof aa||l instanceof $s||l instanceof os)&&l.destroy()}}}class OA{constructor(r,l,f=()=>!0){this.programConfigurations={};for(const y of r)this.programConfigurations[y.id]=new gd(y,l,f);this.needsUpload=!1,this._featureMap=new Zu,this._bufferOffset=0}populatePaintArrays(r,l,f,y,b,x){for(const I in this.programConfigurations)this.programConfigurations[I].populatePaintArrays(r,l,y,b,x);l.id!==void 0&&this._featureMap.add(l.id,f,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,l,f,y){for(const b of f)this.needsUpload=this.programConfigurations[b.id].updatePaintArrays(r,this._featureMap,l,b,y)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function ly(o,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${r}-`,"").replace(/-/g,"_")]}function md(o,r,l){const f={color:{source:tt,composite:or},number:{source:de,composite:tt}},y=function(b){return{"line-pattern":{source:_s,composite:_s},"fill-pattern":{source:_s,composite:_s},"fill-extrusion-pattern":{source:_s,composite:_s}}[b]}(o);return y&&y[l]||f[r][l]}Re("ConstantBinder",qc),Re("CrossFadedConstantBinder",Ga),Re("SourceExpressionBinder",aa),Re("CrossFadedCompositeBinder",os),Re("CompositeExpressionBinder",$s),Re("ProgramConfiguration",gd,{omit:["_buffers"]}),Re("ProgramConfigurationSet",OA);const _i=8192,yd=Math.pow(2,14)-1,vd=-yd-1;function xl(o){const r=_i/o.extent,l=o.loadGeometry();for(let f=0;f<l.length;f++){const y=l[f];for(let b=0;b<y.length;b++){const x=y[b],I=Math.round(x.x*r),U=Math.round(x.y*r);x.x=Et(I,vd,yd),x.y=Et(U,vd,yd),(I<x.x||I>x.x+1||U<x.y||U>x.y+1)&&vt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function RA(o,r){return{type:o.type,id:o.id,properties:o.properties,geometry:r?xl(o):[]}}function th(o,r,l,f,y){o.emplaceBack(2*r+(f+1)/2,2*l+(y+1)/2)}class Bl{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new go,this.indexArray=new ss,this.segments=new en,this.programConfigurations=new OA(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,f){const y=this.layers[0],b=[];let x=null,I=!1;y.type==="circle"&&(x=y.layout.get("circle-sort-key"),I=!x.isConstant());for(const{feature:U,id:D,index:O,sourceLayerIndex:z}of r){const $=this.layers[0]._featureFilter.needGeometry,Y=RA(U,$);if(!this.layers[0]._featureFilter.filter(new ii(this.zoom),Y,f))continue;const ot=I?x.evaluate(Y,{},f):void 0,lt={id:D,properties:U.properties,type:U.type,sourceLayerIndex:z,index:O,geometry:$?Y.geometry:xl(U),patterns:{},sortKey:ot};b.push(lt)}I&&b.sort((U,D)=>U.sortKey-D.sortKey);for(const U of b){const{geometry:D,index:O,sourceLayerIndex:z}=U,$=r[O].feature;this.addFeature(U,D,O,f),l.featureIndex.insert($,D,O,z,this.index)}}update(r,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,ic),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,l,f,y){for(const b of l)for(const x of b){const I=x.x,U=x.y;if(I<0||I>=_i||U<0||U>=_i)continue;const D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),O=D.vertexLength;th(this.layoutVertexArray,I,U,-1,-1),th(this.layoutVertexArray,I,U,1,-1),th(this.layoutVertexArray,I,U,1,1),th(this.layoutVertexArray,I,U,-1,1),this.indexArray.emplaceBack(O,O+1,O+2),this.indexArray.emplaceBack(O,O+3,O+2),D.vertexLength+=4,D.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,f,{},y)}}function eh(o,r){for(let l=0;l<o.length;l++)if(HA(r,o[l]))return!0;for(let l=0;l<r.length;l++)if(HA(o,r[l]))return!0;return!!la(o,r)}function rh(o,r,l){return!!HA(o,r)||!!Gc(r,o,l)}function Aa(o,r){if(o.length===1)return Gf(r,o[0]);for(let l=0;l<r.length;l++){const f=r[l];for(let y=0;y<f.length;y++)if(HA(o,f[y]))return!0}for(let l=0;l<o.length;l++)if(Gf(r,o[l]))return!0;for(let l=0;l<r.length;l++)if(la(o,r[l]))return!0;return!1}function zA(o,r,l){if(o.length>1){if(la(o,r))return!0;for(let f=0;f<r.length;f++)if(Gc(r[f],o,l))return!0}for(let f=0;f<o.length;f++)if(Gc(o[f],r,l))return!0;return!1}function la(o,r){if(o.length===0||r.length===0)return!1;for(let l=0;l<o.length-1;l++){const f=o[l],y=o[l+1];for(let b=0;b<r.length-1;b++)if(ih(f,y,r[b],r[b+1]))return!0}return!1}function ih(o,r,l,f){return mt(o,l,f)!==mt(r,l,f)&&mt(o,r,l)!==mt(o,r,f)}function Gc(o,r,l){const f=l*l;if(r.length===1)return o.distSqr(r[0])<f;for(let y=1;y<r.length;y++)if(wd(o,r[y-1],r[y])<f)return!0;return!1}function wd(o,r,l){const f=r.distSqr(l);if(f===0)return o.distSqr(r);const y=((o.x-r.x)*(l.x-r.x)+(o.y-r.y)*(l.y-r.y))/f;return o.distSqr(y<0?r:y>1?l:l.sub(r)._mult(y)._add(r))}function Gf(o,r){let l,f,y,b=!1;for(let x=0;x<o.length;x++){l=o[x];for(let I=0,U=l.length-1;I<l.length;U=I++)f=l[I],y=l[U],f.y>r.y!=y.y>r.y&&r.x<(y.x-f.x)*(r.y-f.y)/(y.y-f.y)+f.x&&(b=!b)}return b}function HA(o,r){let l=!1;for(let f=0,y=o.length-1;f<o.length;y=f++){const b=o[f],x=o[y];b.y>r.y!=x.y>r.y&&r.x<(x.x-b.x)*(r.y-b.y)/(x.y-b.y)+b.x&&(l=!l)}return l}function _d(o,r,l){const f=l[0],y=l[2];if(o.x<f.x&&r.x<f.x||o.x>y.x&&r.x>y.x||o.y<f.y&&r.y<f.y||o.y>y.y&&r.y>y.y)return!1;const b=mt(o,r,l[0]);return b!==mt(o,r,l[1])||b!==mt(o,r,l[2])||b!==mt(o,r,l[3])}function bd(o,r,l){const f=r.paint.get(o).value;return f.kind==="constant"?f.value:l.programConfigurations.get(r.id).getMaxValue(o)}function Xf(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Zf(o,r,l,f,y){if(!r[0]&&!r[1])return o;const b=E.convert(r)._mult(y);l==="viewport"&&b._rotate(-f);const x=[];for(let I=0;I<o.length;I++)x.push(o[I].sub(b));return x}let b5,x5;Re("CircleBucket",Bl,{omit:["layers"]});var h7={get paint(){return x5=x5||new m({"circle-radius":new c(nt.paint_circle["circle-radius"]),"circle-color":new c(nt.paint_circle["circle-color"]),"circle-blur":new c(nt.paint_circle["circle-blur"]),"circle-opacity":new c(nt.paint_circle["circle-opacity"]),"circle-translate":new e(nt.paint_circle["circle-translate"]),"circle-translate-anchor":new e(nt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new e(nt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new e(nt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new c(nt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new c(nt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new c(nt.paint_circle["circle-stroke-opacity"])})},get layout(){return b5=b5||new m({"circle-sort-key":new c(nt.layout_circle["circle-sort-key"])})}},bs=1e-6,nh=typeof Float32Array<"u"?Float32Array:Array;function cy(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function B5(o,r,l){var f=r[0],y=r[1],b=r[2],x=r[3],I=r[4],U=r[5],D=r[6],O=r[7],z=r[8],$=r[9],Y=r[10],ot=r[11],lt=r[12],wt=r[13],Ft=r[14],Kt=r[15],kt=l[0],zt=l[1],se=l[2],ve=l[3];return o[0]=kt*f+zt*I+se*z+ve*lt,o[1]=kt*y+zt*U+se*$+ve*wt,o[2]=kt*b+zt*D+se*Y+ve*Ft,o[3]=kt*x+zt*O+se*ot+ve*Kt,o[4]=(kt=l[4])*f+(zt=l[5])*I+(se=l[6])*z+(ve=l[7])*lt,o[5]=kt*y+zt*U+se*$+ve*wt,o[6]=kt*b+zt*D+se*Y+ve*Ft,o[7]=kt*x+zt*O+se*ot+ve*Kt,o[8]=(kt=l[8])*f+(zt=l[9])*I+(se=l[10])*z+(ve=l[11])*lt,o[9]=kt*y+zt*U+se*$+ve*wt,o[10]=kt*b+zt*D+se*Y+ve*Ft,o[11]=kt*x+zt*O+se*ot+ve*Kt,o[12]=(kt=l[12])*f+(zt=l[13])*I+(se=l[14])*z+(ve=l[15])*lt,o[13]=kt*y+zt*U+se*$+ve*wt,o[14]=kt*b+zt*D+se*Y+ve*Ft,o[15]=kt*x+zt*O+se*ot+ve*Kt,o}Math.hypot||(Math.hypot=function(){for(var o=0,r=arguments.length;r--;)o+=arguments[r]*arguments[r];return Math.sqrt(o)});var xd,d7=B5;function Wf(o,r,l){var f=r[0],y=r[1],b=r[2],x=r[3];return o[0]=l[0]*f+l[4]*y+l[8]*b+l[12]*x,o[1]=l[1]*f+l[5]*y+l[9]*b+l[13]*x,o[2]=l[2]*f+l[6]*y+l[10]*b+l[14]*x,o[3]=l[3]*f+l[7]*y+l[11]*b+l[15]*x,o}xd=new nh(4),nh!=Float32Array&&(xd[0]=0,xd[1]=0,xd[2]=0,xd[3]=0);class p7 extends B{constructor(r){super(r,h7)}createBucket(r){return new Bl(r)}queryRadius(r){const l=r;return bd("circle-radius",this,l)+bd("circle-stroke-width",this,l)+Xf(this.paint.get("circle-translate"))}queryIntersectsFeature(r,l,f,y,b,x,I,U){const D=Zf(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,I),O=this.paint.get("circle-radius").evaluate(l,f)+this.paint.get("circle-stroke-width").evaluate(l,f),z=this.paint.get("circle-pitch-alignment")==="map",$=z?D:function(ot,lt){return ot.map(wt=>C5(wt,lt))}(D,U),Y=z?O*I:O;for(const ot of y)for(const lt of ot){const wt=z?lt:C5(lt,U);let Ft=Y;const Kt=Wf([],[lt.x,lt.y,0,1],U);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ft*=Kt[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ft*=x.cameraToCenterDistance/Kt[3]),rh($,wt,Ft))return!0}return!1}}function C5(o,r){const l=Wf([],[o.x,o.y,0,1],r);return new E(l[0]/l[3],l[1]/l[3])}class F5 extends Bl{}let S5;Re("HeatmapBucket",F5,{omit:["layers"]});var f7={get paint(){return S5=S5||new m({"heatmap-radius":new c(nt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new c(nt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new e(nt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new h(nt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new e(nt.paint_heatmap["heatmap-opacity"])})}};function uy(o,{width:r,height:l},f,y){if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==r*l*f)throw new RangeError(`mismatched image size. expected: ${y.length} but got: ${r*l*f}`)}else y=new Uint8Array(r*l*f);return o.width=r,o.height=l,o.data=y,o}function I5(o,{width:r,height:l},f){if(r===o.width&&l===o.height)return;const y=uy({},{width:r,height:l},f);hy(o,y,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,r),height:Math.min(o.height,l)},f),o.width=r,o.height=l,o.data=y.data}function hy(o,r,l,f,y,b){if(y.width===0||y.height===0)return r;if(y.width>o.width||y.height>o.height||l.x>o.width-y.width||l.y>o.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>r.width||y.height>r.height||f.x>r.width-y.width||f.y>r.height-y.height)throw new RangeError("out of range destination coordinates for image copy");const x=o.data,I=r.data;if(x===I)throw new Error("srcData equals dstData, so image is already copied");for(let U=0;U<y.height;U++){const D=((l.y+U)*o.width+l.x)*b,O=((f.y+U)*r.width+f.x)*b;for(let z=0;z<y.width*b;z++)I[O+z]=x[D+z]}return r}class Bd{constructor(r,l){uy(this,r,1,l)}resize(r){I5(this,r,1)}clone(){return new Bd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,l,f,y,b){hy(r,l,f,y,b,1)}}class Lo{constructor(r,l){uy(this,r,4,l)}resize(r){I5(this,r,4)}replace(r,l){l?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new Lo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,l,f,y,b){hy(r,l,f,y,b,4)}}function E5(o){const r={},l=o.resolution||256,f=o.clips?o.clips.length:1,y=o.image||new Lo({width:l,height:f});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);const b=(x,I,U)=>{r[o.evaluationKey]=U;const D=o.expression.evaluate(r);y.data[x+I+0]=Math.floor(255*D.r/D.a),y.data[x+I+1]=Math.floor(255*D.g/D.a),y.data[x+I+2]=Math.floor(255*D.b/D.a),y.data[x+I+3]=Math.floor(255*D.a)};if(o.clips)for(let x=0,I=0;x<f;++x,I+=4*l)for(let U=0,D=0;U<l;U++,D+=4){const O=U/(l-1),{start:z,end:$}=o.clips[x];b(I,D,z*(1-O)+$*O)}else for(let x=0,I=0;x<l;x++,I+=4)b(0,I,x/(l-1));return y}Re("AlphaImage",Bd),Re("RGBAImage",Lo);class g7 extends B{createBucket(r){return new F5(r)}constructor(r){super(r,f7),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=E5({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let T5;var m7={get paint(){return T5=T5||new m({"hillshade-illumination-direction":new e(nt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new e(nt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new e(nt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new e(nt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new e(nt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new e(nt.paint_hillshade["hillshade-accent-color"])})}};class y7 extends B{constructor(r){super(r,m7)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const v7=M([{name:"a_pos",components:2,type:"Int16"}],4),{members:w7}=v7;function U5(o,r,l=2){const f=r&&r.length,y=f?r[0]*l:o.length;let b=P5(o,0,y,l,!0);const x=[];if(!b||b.next===b.prev)return x;let I,U,D;if(f&&(b=function(O,z,$,Y){const ot=[];for(let lt=0,wt=z.length;lt<wt;lt++){const Ft=P5(O,z[lt]*Y,lt<wt-1?z[lt+1]*Y:O.length,Y,!1);Ft===Ft.next&&(Ft.steiner=!0),ot.push(I7(Ft))}ot.sort(C7);for(let lt=0;lt<ot.length;lt++)$=F7(ot[lt],$);return $}(o,r,b,l)),o.length>80*l){I=1/0,U=1/0;let O=-1/0,z=-1/0;for(let $=l;$<y;$+=l){const Y=o[$],ot=o[$+1];Y<I&&(I=Y),ot<U&&(U=ot),Y>O&&(O=Y),ot>z&&(z=ot)}D=Math.max(O-I,z-U),D=D!==0?32767/D:0}return Cd(b,x,l,I,U,D,0),x}function P5(o,r,l,f,y){let b;if(y===function(x,I,U,D){let O=0;for(let z=I,$=U-D;z<U;z+=D)O+=(x[$]-x[z])*(x[z+1]+x[$+1]),$=z;return O}(o,r,l,f)>0)for(let x=r;x<l;x+=f)b=k5(x/f|0,o[x],o[x+1],b);else for(let x=l-f;x>=r;x-=f)b=k5(x/f|0,o[x],o[x+1],b);return b&&Yf(b,b.next)&&(Sd(b),b=b.next),b}function Xc(o,r){if(!o)return o;r||(r=o);let l,f=o;do if(l=!1,f.steiner||!Yf(f,f.next)&&$i(f.prev,f,f.next)!==0)f=f.next;else{if(Sd(f),f=r=f.prev,f===f.next)break;l=!0}while(l||f!==r);return r}function Cd(o,r,l,f,y,b,x){if(!o)return;!x&&b&&function(U,D,O,z){let $=U;do $.z===0&&($.z=dy($.x,$.y,D,O,z)),$.prevZ=$.prev,$.nextZ=$.next,$=$.next;while($!==U);$.prevZ.nextZ=null,$.prevZ=null,function(Y){let ot,lt=1;do{let wt,Ft=Y;Y=null;let Kt=null;for(ot=0;Ft;){ot++;let kt=Ft,zt=0;for(let ve=0;ve<lt&&(zt++,kt=kt.nextZ,kt);ve++);let se=lt;for(;zt>0||se>0&&kt;)zt!==0&&(se===0||!kt||Ft.z<=kt.z)?(wt=Ft,Ft=Ft.nextZ,zt--):(wt=kt,kt=kt.nextZ,se--),Kt?Kt.nextZ=wt:Y=wt,wt.prevZ=Kt,Kt=wt;Ft=kt}Kt.nextZ=null,lt*=2}while(ot>1)}($)}(o,f,y,b);let I=o;for(;o.prev!==o.next;){const U=o.prev,D=o.next;if(b?b7(o,f,y,b):_7(o))r.push(U.i,o.i,D.i),Sd(o),o=D.next,I=D.next;else if((o=D)===I){x?x===1?Cd(o=x7(Xc(o),r),r,l,f,y,b,2):x===2&&B7(o,r,l,f,y,b):Cd(Xc(o),r,l,f,y,b,1);break}}}function _7(o){const r=o.prev,l=o,f=o.next;if($i(r,l,f)>=0)return!1;const y=r.x,b=l.x,x=f.x,I=r.y,U=l.y,D=f.y,O=y<b?y<x?y:x:b<x?b:x,z=I<U?I<D?I:D:U<D?U:D,$=y>b?y>x?y:x:b>x?b:x,Y=I>U?I>D?I:D:U>D?U:D;let ot=f.next;for(;ot!==r;){if(ot.x>=O&&ot.x<=$&&ot.y>=z&&ot.y<=Y&&sh(y,I,b,U,x,D,ot.x,ot.y)&&$i(ot.prev,ot,ot.next)>=0)return!1;ot=ot.next}return!0}function b7(o,r,l,f){const y=o.prev,b=o,x=o.next;if($i(y,b,x)>=0)return!1;const I=y.x,U=b.x,D=x.x,O=y.y,z=b.y,$=x.y,Y=I<U?I<D?I:D:U<D?U:D,ot=O<z?O<$?O:$:z<$?z:$,lt=I>U?I>D?I:D:U>D?U:D,wt=O>z?O>$?O:$:z>$?z:$,Ft=dy(Y,ot,r,l,f),Kt=dy(lt,wt,r,l,f);let kt=o.prevZ,zt=o.nextZ;for(;kt&&kt.z>=Ft&&zt&&zt.z<=Kt;){if(kt.x>=Y&&kt.x<=lt&&kt.y>=ot&&kt.y<=wt&&kt!==y&&kt!==x&&sh(I,O,U,z,D,$,kt.x,kt.y)&&$i(kt.prev,kt,kt.next)>=0||(kt=kt.prevZ,zt.x>=Y&&zt.x<=lt&&zt.y>=ot&&zt.y<=wt&&zt!==y&&zt!==x&&sh(I,O,U,z,D,$,zt.x,zt.y)&&$i(zt.prev,zt,zt.next)>=0))return!1;zt=zt.nextZ}for(;kt&&kt.z>=Ft;){if(kt.x>=Y&&kt.x<=lt&&kt.y>=ot&&kt.y<=wt&&kt!==y&&kt!==x&&sh(I,O,U,z,D,$,kt.x,kt.y)&&$i(kt.prev,kt,kt.next)>=0)return!1;kt=kt.prevZ}for(;zt&&zt.z<=Kt;){if(zt.x>=Y&&zt.x<=lt&&zt.y>=ot&&zt.y<=wt&&zt!==y&&zt!==x&&sh(I,O,U,z,D,$,zt.x,zt.y)&&$i(zt.prev,zt,zt.next)>=0)return!1;zt=zt.nextZ}return!0}function x7(o,r){let l=o;do{const f=l.prev,y=l.next.next;!Yf(f,y)&&L5(f,l,l.next,y)&&Fd(f,y)&&Fd(y,f)&&(r.push(f.i,l.i,y.i),Sd(l),Sd(l.next),l=o=y),l=l.next}while(l!==o);return Xc(l)}function B7(o,r,l,f,y,b){let x=o;do{let I=x.next.next;for(;I!==x.prev;){if(x.i!==I.i&&E7(x,I)){let U=Q5(x,I);return x=Xc(x,x.next),U=Xc(U,U.next),Cd(x,r,l,f,y,b,0),void Cd(U,r,l,f,y,b,0)}I=I.next}x=x.next}while(x!==o)}function C7(o,r){return o.x-r.x}function F7(o,r){const l=function(y,b){let x=b;const I=y.x,U=y.y;let D,O=-1/0;do{if(U<=x.y&&U>=x.next.y&&x.next.y!==x.y){const lt=x.x+(U-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(lt<=I&&lt>O&&(O=lt,D=x.x<x.next.x?x:x.next,lt===I))return D}x=x.next}while(x!==b);if(!D)return null;const z=D,$=D.x,Y=D.y;let ot=1/0;x=D;do{if(I>=x.x&&x.x>=$&&I!==x.x&&sh(U<Y?I:O,U,$,Y,U<Y?O:I,U,x.x,x.y)){const lt=Math.abs(U-x.y)/(I-x.x);Fd(x,y)&&(lt<ot||lt===ot&&(x.x>D.x||x.x===D.x&&S7(D,x)))&&(D=x,ot=lt)}x=x.next}while(x!==z);return D}(o,r);if(!l)return r;const f=Q5(l,o);return Xc(f,f.next),Xc(l,l.next)}function S7(o,r){return $i(o.prev,o,r.prev)<0&&$i(r.next,o,o.next)<0}function dy(o,r,l,f,y){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-l)*y|0)|o<<8))|o<<4))|o<<2))|o<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-f)*y|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function I7(o){let r=o,l=o;do(r.x<l.x||r.x===l.x&&r.y<l.y)&&(l=r),r=r.next;while(r!==o);return l}function sh(o,r,l,f,y,b,x,I){return(y-x)*(r-I)>=(o-x)*(b-I)&&(o-x)*(f-I)>=(l-x)*(r-I)&&(l-x)*(b-I)>=(y-x)*(f-I)}function E7(o,r){return o.next.i!==r.i&&o.prev.i!==r.i&&!function(l,f){let y=l;do{if(y.i!==l.i&&y.next.i!==l.i&&y.i!==f.i&&y.next.i!==f.i&&L5(y,y.next,l,f))return!0;y=y.next}while(y!==l);return!1}(o,r)&&(Fd(o,r)&&Fd(r,o)&&function(l,f){let y=l,b=!1;const x=(l.x+f.x)/2,I=(l.y+f.y)/2;do y.y>I!=y.next.y>I&&y.next.y!==y.y&&x<(y.next.x-y.x)*(I-y.y)/(y.next.y-y.y)+y.x&&(b=!b),y=y.next;while(y!==l);return b}(o,r)&&($i(o.prev,o,r.prev)||$i(o,r.prev,r))||Yf(o,r)&&$i(o.prev,o,o.next)>0&&$i(r.prev,r,r.next)>0)}function $i(o,r,l){return(r.y-o.y)*(l.x-r.x)-(r.x-o.x)*(l.y-r.y)}function Yf(o,r){return o.x===r.x&&o.y===r.y}function L5(o,r,l,f){const y=tg($i(o,r,l)),b=tg($i(o,r,f)),x=tg($i(l,f,o)),I=tg($i(l,f,r));return y!==b&&x!==I||!(y!==0||!Jf(o,l,r))||!(b!==0||!Jf(o,f,r))||!(x!==0||!Jf(l,o,f))||!(I!==0||!Jf(l,r,f))}function Jf(o,r,l){return r.x<=Math.max(o.x,l.x)&&r.x>=Math.min(o.x,l.x)&&r.y<=Math.max(o.y,l.y)&&r.y>=Math.min(o.y,l.y)}function tg(o){return o>0?1:o<0?-1:0}function Fd(o,r){return $i(o.prev,o,o.next)<0?$i(o,r,o.next)>=0&&$i(o,o.prev,r)>=0:$i(o,r,o.prev)<0||$i(o,o.next,r)<0}function Q5(o,r){const l=py(o.i,o.x,o.y),f=py(r.i,r.x,r.y),y=o.next,b=r.prev;return o.next=r,r.prev=o,l.next=y,y.prev=l,f.next=l,l.prev=f,b.next=f,f.prev=b,f}function k5(o,r,l,f){const y=py(o,r,l);return f?(y.next=f.next,y.prev=f,f.next.prev=y,f.next=y):(y.prev=y,y.next=y),y}function Sd(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function py(o,r,l){return{i:o,x:r,y:l,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function fy(o,r,l){const f=l.patternDependencies;let y=!1;for(const b of r){const x=b.paint.get(`${o}-pattern`);x.isConstant()||(y=!0);const I=x.constantOr(null);I&&(y=!0,f[I.to]=!0,f[I.from]=!0)}return y}function gy(o,r,l,f,y){const b=y.patternDependencies;for(const x of r){const I=x.paint.get(`${o}-pattern`).value;if(I.kind!=="constant"){let U=I.evaluate({zoom:f-1},l,{},y.availableImages),D=I.evaluate({zoom:f},l,{},y.availableImages),O=I.evaluate({zoom:f+1},l,{},y.availableImages);U=U&&U.name?U.name:U,D=D&&D.name?D.name:D,O=O&&O.name?O.name:O,b[U]=!0,b[D]=!0,b[O]=!0,l.patterns[x.id]={min:U,mid:D,max:O}}}return l}class my{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new sa,this.indexArray=new ss,this.indexArray2=new yo,this.programConfigurations=new OA(r.layers,r.zoom),this.segments=new en,this.segments2=new en,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,f){this.hasPattern=fy("fill",this.layers,l);const y=this.layers[0].layout.get("fill-sort-key"),b=!y.isConstant(),x=[];for(const{feature:I,id:U,index:D,sourceLayerIndex:O}of r){const z=this.layers[0]._featureFilter.needGeometry,$=RA(I,z);if(!this.layers[0]._featureFilter.filter(new ii(this.zoom),$,f))continue;const Y=b?y.evaluate($,{},f,l.availableImages):void 0,ot={id:U,properties:I.properties,type:I.type,sourceLayerIndex:O,index:D,geometry:z?$.geometry:xl(I),patterns:{},sortKey:Y};x.push(ot)}b&&x.sort((I,U)=>I.sortKey-U.sortKey);for(const I of x){const{geometry:U,index:D,sourceLayerIndex:O}=I;if(this.hasPattern){const z=gy("fill",this.layers,I,this.zoom,l);this.patternFeatures.push(z)}else this.addFeature(I,U,D,f,{});l.featureIndex.insert(r[D].feature,U,D,O,this.index)}}update(r,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,f)}addFeatures(r,l,f){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,l,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,w7),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,l,f,y,b){for(const x of so(l,500)){let I=0;for(const Y of x)I+=Y.length;const U=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray),D=U.vertexLength,O=[],z=[];for(const Y of x){if(Y.length===0)continue;Y!==x[0]&&z.push(O.length/2);const ot=this.segments2.prepareSegment(Y.length,this.layoutVertexArray,this.indexArray2),lt=ot.vertexLength;this.layoutVertexArray.emplaceBack(Y[0].x,Y[0].y),this.indexArray2.emplaceBack(lt+Y.length-1,lt),O.push(Y[0].x),O.push(Y[0].y);for(let wt=1;wt<Y.length;wt++)this.layoutVertexArray.emplaceBack(Y[wt].x,Y[wt].y),this.indexArray2.emplaceBack(lt+wt-1,lt+wt),O.push(Y[wt].x),O.push(Y[wt].y);ot.vertexLength+=Y.length,ot.primitiveLength+=Y.length}const $=U5(O,z);for(let Y=0;Y<$.length;Y+=3)this.indexArray.emplaceBack(D+$[Y],D+$[Y+1],D+$[Y+2]);U.vertexLength+=I,U.primitiveLength+=$.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,f,b,y)}}let M5,D5;Re("FillBucket",my,{omit:["layers","patternFeatures"]});var T7={get paint(){return D5=D5||new m({"fill-antialias":new e(nt.paint_fill["fill-antialias"]),"fill-opacity":new c(nt.paint_fill["fill-opacity"]),"fill-color":new c(nt.paint_fill["fill-color"]),"fill-outline-color":new c(nt.paint_fill["fill-outline-color"]),"fill-translate":new e(nt.paint_fill["fill-translate"]),"fill-translate-anchor":new e(nt.paint_fill["fill-translate-anchor"]),"fill-pattern":new g(nt.paint_fill["fill-pattern"])})},get layout(){return M5=M5||new m({"fill-sort-key":new c(nt.layout_fill["fill-sort-key"])})}};class U7 extends B{constructor(r){super(r,T7)}recalculate(r,l){super.recalculate(r,l);const f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new my(r)}queryRadius(){return Xf(this.paint.get("fill-translate"))}queryIntersectsFeature(r,l,f,y,b,x,I){return Aa(Zf(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,I),y)}isTileClipped(){return!0}}const P7=M([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),L7=M([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Q7}=P7;var nc={},k7=C,N5=oh;function oh(o,r,l,f,y){this.properties={},this.extent=l,this.type=0,this._pbf=o,this._geometry=-1,this._keys=f,this._values=y,o.readFields(M7,this,r)}function M7(o,r,l){o==1?r.id=l.readVarint():o==2?function(f,y){for(var b=f.readVarint()+f.pos;f.pos<b;){var x=y._keys[f.readVarint()],I=y._values[f.readVarint()];y.properties[x]=I}}(l,r):o==3?r.type=l.readVarint():o==4&&(r._geometry=l.pos)}function D7(o){for(var r,l,f=0,y=0,b=o.length,x=b-1;y<b;x=y++)f+=((l=o[x]).x-(r=o[y]).x)*(r.y+l.y);return f}oh.types=["Unknown","Point","LineString","Polygon"],oh.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var r,l=o.readVarint()+o.pos,f=1,y=0,b=0,x=0,I=[];o.pos<l;){if(y<=0){var U=o.readVarint();f=7&U,y=U>>3}if(y--,f===1||f===2)b+=o.readSVarint(),x+=o.readSVarint(),f===1&&(r&&I.push(r),r=[]),r.push(new k7(b,x));else{if(f!==7)throw new Error("unknown command "+f);r&&r.push(r[0].clone())}}return r&&I.push(r),I},oh.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var r=o.readVarint()+o.pos,l=1,f=0,y=0,b=0,x=1/0,I=-1/0,U=1/0,D=-1/0;o.pos<r;){if(f<=0){var O=o.readVarint();l=7&O,f=O>>3}if(f--,l===1||l===2)(y+=o.readSVarint())<x&&(x=y),y>I&&(I=y),(b+=o.readSVarint())<U&&(U=b),b>D&&(D=b);else if(l!==7)throw new Error("unknown command "+l)}return[x,U,I,D]},oh.prototype.toGeoJSON=function(o,r,l){var f,y,b=this.extent*Math.pow(2,l),x=this.extent*o,I=this.extent*r,U=this.loadGeometry(),D=oh.types[this.type];function O(Y){for(var ot=0;ot<Y.length;ot++){var lt=Y[ot];Y[ot]=[360*(lt.x+x)/b-180,360/Math.PI*Math.atan(Math.exp((180-360*(lt.y+I)/b)*Math.PI/180))-90]}}switch(this.type){case 1:var z=[];for(f=0;f<U.length;f++)z[f]=U[f][0];O(U=z);break;case 2:for(f=0;f<U.length;f++)O(U[f]);break;case 3:for(U=function(Y){var ot=Y.length;if(ot<=1)return[Y];for(var lt,wt,Ft=[],Kt=0;Kt<ot;Kt++){var kt=D7(Y[Kt]);kt!==0&&(wt===void 0&&(wt=kt<0),wt===kt<0?(lt&&Ft.push(lt),lt=[Y[Kt]]):lt.push(Y[Kt]))}return lt&&Ft.push(lt),Ft}(U),f=0;f<U.length;f++)for(y=0;y<U[f].length;y++)O(U[f][y])}U.length===1?U=U[0]:D="Multi"+D;var $={type:"Feature",geometry:{type:D,coordinates:U},properties:this.properties};return"id"in this&&($.id=this.id),$};var N7=N5,O5=R5;function R5(o,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(O7,this,r),this.length=this._features.length}function O7(o,r,l){o===15?r.version=l.readVarint():o===1?r.name=l.readString():o===5?r.extent=l.readVarint():o===2?r._features.push(l.pos):o===3?r._keys.push(l.readString()):o===4&&r._values.push(function(f){for(var y=null,b=f.readVarint()+f.pos;f.pos<b;){var x=f.readVarint()>>3;y=x===1?f.readString():x===2?f.readFloat():x===3?f.readDouble():x===4?f.readVarint64():x===5?f.readVarint():x===6?f.readSVarint():x===7?f.readBoolean():null}return y}(l))}R5.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var r=this._pbf.readVarint()+this._pbf.pos;return new N7(this._pbf,r,this.extent,this._keys,this._values)};var R7=O5;function z7(o,r,l){if(o===3){var f=new R7(l,l.readVarint()+l.pos);f.length&&(r[f.name]=f)}}nc.VectorTile=function(o,r){this.layers=o.readFields(z7,{},r)},nc.VectorTileFeature=N5,nc.VectorTileLayer=O5;const H7=nc.VectorTileFeature.types,yy=Math.pow(2,13);function Id(o,r,l,f,y,b,x,I){o.emplaceBack(r,l,2*Math.floor(f*yy)+x,y*yy*2,b*yy*2,Math.round(I))}class vy{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new ji,this.centroidVertexArray=new xn,this.indexArray=new ss,this.programConfigurations=new OA(r.layers,r.zoom),this.segments=new en,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,f){this.features=[],this.hasPattern=fy("fill-extrusion",this.layers,l);for(const{feature:y,id:b,index:x,sourceLayerIndex:I}of r){const U=this.layers[0]._featureFilter.needGeometry,D=RA(y,U);if(!this.layers[0]._featureFilter.filter(new ii(this.zoom),D,f))continue;const O={id:b,sourceLayerIndex:I,index:x,geometry:U?D.geometry:xl(y),properties:y.properties,type:y.type,patterns:{}};this.hasPattern?this.features.push(gy("fill-extrusion",this.layers,O,this.zoom,l)):this.addFeature(O,O.geometry,x,f,{}),l.featureIndex.insert(y,O.geometry,x,I,this.index,!0)}}addFeatures(r,l,f){for(const y of this.features){const{geometry:b}=y;this.addFeature(y,b,y.index,l,f)}}update(r,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Q7),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,L7.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,l,f,y,b){for(const x of so(l,500)){const I={x:0,y:0,vertexCount:0};let U=0;for(const ot of x)U+=ot.length;let D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ot of x){if(ot.length===0||j7(ot))continue;let lt=0;for(let wt=0;wt<ot.length;wt++){const Ft=ot[wt];if(wt>=1){const Kt=ot[wt-1];if(!V7(Ft,Kt)){D.vertexLength+4>en.MAX_VERTEX_ARRAY_LENGTH&&(D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const kt=Ft.sub(Kt)._perp()._unit(),zt=Kt.dist(Ft);lt+zt>32768&&(lt=0),Id(this.layoutVertexArray,Ft.x,Ft.y,kt.x,kt.y,0,0,lt),Id(this.layoutVertexArray,Ft.x,Ft.y,kt.x,kt.y,0,1,lt),I.x+=2*Ft.x,I.y+=2*Ft.y,I.vertexCount+=2,lt+=zt,Id(this.layoutVertexArray,Kt.x,Kt.y,kt.x,kt.y,0,0,lt),Id(this.layoutVertexArray,Kt.x,Kt.y,kt.x,kt.y,0,1,lt),I.x+=2*Kt.x,I.y+=2*Kt.y,I.vertexCount+=2;const se=D.vertexLength;this.indexArray.emplaceBack(se,se+2,se+1),this.indexArray.emplaceBack(se+1,se+2,se+3),D.vertexLength+=4,D.primitiveLength+=2}}}}if(D.vertexLength+U>en.MAX_VERTEX_ARRAY_LENGTH&&(D=this.segments.prepareSegment(U,this.layoutVertexArray,this.indexArray)),H7[r.type]!=="Polygon")continue;const O=[],z=[],$=D.vertexLength;for(const ot of x)if(ot.length!==0){ot!==x[0]&&z.push(O.length/2);for(let lt=0;lt<ot.length;lt++){const wt=ot[lt];Id(this.layoutVertexArray,wt.x,wt.y,0,0,1,1,0),I.x+=wt.x,I.y+=wt.y,I.vertexCount+=1,O.push(wt.x),O.push(wt.y)}}const Y=U5(O,z);for(let ot=0;ot<Y.length;ot+=3)this.indexArray.emplaceBack($+Y[ot],$+Y[ot+2],$+Y[ot+1]);D.primitiveLength+=Y.length/3,D.vertexLength+=U;for(let ot=0;ot<I.vertexCount;ot++){const lt=Math.floor(I.x/I.vertexCount),wt=Math.floor(I.y/I.vertexCount);this.centroidVertexArray.emplaceBack(lt,wt)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,f,b,y)}}function V7(o,r){return o.x===r.x&&(o.x<0||o.x>_i)||o.y===r.y&&(o.y<0||o.y>_i)}function j7(o){return o.every(r=>r.x<0)||o.every(r=>r.x>_i)||o.every(r=>r.y<0)||o.every(r=>r.y>_i)}let z5;Re("FillExtrusionBucket",vy,{omit:["layers","features"]});var K7={get paint(){return z5=z5||new m({"fill-extrusion-opacity":new e(nt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new c(nt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new e(nt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new e(nt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new g(nt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new c(nt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new c(nt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new e(nt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class $7 extends B{constructor(r){super(r,K7)}createBucket(r){return new vy(r)}queryRadius(){return Xf(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,l,f,y,b,x,I,U){const D=Zf(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,I),O=this.paint.get("fill-extrusion-height").evaluate(l,f),z=this.paint.get("fill-extrusion-base").evaluate(l,f),$=function(ot,lt,wt,Ft){const Kt=[];for(const kt of ot){const zt=[kt.x,kt.y,0,1];Wf(zt,zt,lt),Kt.push(new E(zt[0]/zt[3],zt[1]/zt[3]))}return Kt}(D,U),Y=function(ot,lt,wt,Ft){const Kt=[],kt=[],zt=Ft[8]*lt,se=Ft[9]*lt,ve=Ft[10]*lt,Oe=Ft[11]*lt,hr=Ft[8]*wt,Me=Ft[9]*wt,Le=Ft[10]*wt,Ye=Ft[11]*wt;for(const $e of ot){const Ve=[],ue=[];for(const er of $e){const Ze=er.x,wr=er.y,gi=Ft[0]*Ze+Ft[4]*wr+Ft[12],ci=Ft[1]*Ze+Ft[5]*wr+Ft[13],Fn=Ft[2]*Ze+Ft[6]*wr+Ft[14],ca=Ft[3]*Ze+Ft[7]*wr+Ft[15],$n=Fn+ve,Sn=ca+Oe,xs=gi+hr,Bs=ci+Me,Cs=Fn+Le,Ri=ca+Ye,In=new E((gi+zt)/Sn,(ci+se)/Sn);In.z=$n/Sn,Ve.push(In);const as=new E(xs/Ri,Bs/Ri);as.z=Cs/Ri,ue.push(as)}Kt.push(Ve),kt.push(ue)}return[Kt,kt]}(y,z,O,U);return function(ot,lt,wt){let Ft=1/0;Aa(wt,lt)&&(Ft=H5(wt,lt[0]));for(let Kt=0;Kt<lt.length;Kt++){const kt=lt[Kt],zt=ot[Kt];for(let se=0;se<kt.length-1;se++){const ve=kt[se],Oe=[ve,kt[se+1],zt[se+1],zt[se],ve];eh(wt,Oe)&&(Ft=Math.min(Ft,H5(wt,Oe)))}}return Ft!==1/0&&Ft}(Y[0],Y[1],$)}}function Ed(o,r){return o.x*r.x+o.y*r.y}function H5(o,r){if(o.length===1){let l=0;const f=r[l++];let y;for(;!y||f.equals(y);)if(y=r[l++],!y)return 1/0;for(;l<r.length;l++){const b=r[l],x=o[0],I=y.sub(f),U=b.sub(f),D=x.sub(f),O=Ed(I,I),z=Ed(I,U),$=Ed(U,U),Y=Ed(D,I),ot=Ed(D,U),lt=O*$-z*z,wt=($*Y-z*ot)/lt,Ft=(O*ot-z*Y)/lt,Kt=f.z*(1-wt-Ft)+y.z*wt+b.z*Ft;if(isFinite(Kt))return Kt}return 1/0}{let l=1/0;for(const f of r)l=Math.min(l,f.z);return l}}const q7=M([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:G7}=q7,X7=M([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Z7}=X7,W7=nc.VectorTileFeature.types,Y7=Math.cos(Math.PI/180*37.5),V5=Math.pow(2,14)/.5;class wy{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new Yr,this.layoutVertexArray2=new mo,this.indexArray=new ss,this.programConfigurations=new OA(r.layers,r.zoom),this.segments=new en,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,f){this.hasPattern=fy("line",this.layers,l);const y=this.layers[0].layout.get("line-sort-key"),b=!y.isConstant(),x=[];for(const{feature:I,id:U,index:D,sourceLayerIndex:O}of r){const z=this.layers[0]._featureFilter.needGeometry,$=RA(I,z);if(!this.layers[0]._featureFilter.filter(new ii(this.zoom),$,f))continue;const Y=b?y.evaluate($,{},f):void 0,ot={id:U,properties:I.properties,type:I.type,sourceLayerIndex:O,index:D,geometry:z?$.geometry:xl(I),patterns:{},sortKey:Y};x.push(ot)}b&&x.sort((I,U)=>I.sortKey-U.sortKey);for(const I of x){const{geometry:U,index:D,sourceLayerIndex:O}=I;if(this.hasPattern){const z=gy("line",this.layers,I,this.zoom,l);this.patternFeatures.push(z)}else this.addFeature(I,U,D,f,{});l.featureIndex.insert(r[D].feature,U,D,O,this.index)}}update(r,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,f)}addFeatures(r,l,f){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,l,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,Z7)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,G7),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,l,f,y,b){const x=this.layers[0].layout,I=x.get("line-join").evaluate(r,{}),U=x.get("line-cap"),D=x.get("line-miter-limit"),O=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const z of l)this.addLine(z,r,I,U,D,O);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,f,b,y)}addLine(r,l,f,y,b,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ft=0;Ft<r.length-1;Ft++)this.totalDistance+=r[Ft].dist(r[Ft+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const I=W7[l.type]==="Polygon";let U=r.length;for(;U>=2&&r[U-1].equals(r[U-2]);)U--;let D=0;for(;D<U-1&&r[D].equals(r[D+1]);)D++;if(U<(I?3:2))return;f==="bevel"&&(b=1.05);const O=this.overscaling<=16?15*_i/(512*this.overscaling):0,z=this.segments.prepareSegment(10*U,this.layoutVertexArray,this.indexArray);let $,Y,ot,lt,wt;this.e1=this.e2=-1,I&&($=r[U-2],wt=r[D].sub($)._unit()._perp());for(let Ft=D;Ft<U;Ft++){if(ot=Ft===U-1?I?r[D+1]:void 0:r[Ft+1],ot&&r[Ft].equals(ot))continue;wt&&(lt=wt),$&&(Y=$),$=r[Ft],wt=ot?ot.sub($)._unit()._perp():lt,lt=lt||wt;let Kt=lt.add(wt);Kt.x===0&&Kt.y===0||Kt._unit();const kt=lt.x*wt.x+lt.y*wt.y,zt=Kt.x*wt.x+Kt.y*wt.y,se=zt!==0?1/zt:1/0,ve=2*Math.sqrt(2-2*zt),Oe=zt<Y7&&Y&&ot,hr=lt.x*wt.y-lt.y*wt.x>0;if(Oe&&Ft>D){const Ye=$.dist(Y);if(Ye>2*O){const $e=$.sub($.sub(Y)._mult(O/Ye)._round());this.updateDistance(Y,$e),this.addCurrentVertex($e,lt,0,0,z),Y=$e}}const Me=Y&&ot;let Le=Me?f:I?"butt":y;if(Me&&Le==="round"&&(se<x?Le="miter":se<=2&&(Le="fakeround")),Le==="miter"&&se>b&&(Le="bevel"),Le==="bevel"&&(se>2&&(Le="flipbevel"),se<b&&(Le="miter")),Y&&this.updateDistance(Y,$),Le==="miter")Kt._mult(se),this.addCurrentVertex($,Kt,0,0,z);else if(Le==="flipbevel"){if(se>100)Kt=wt.mult(-1);else{const Ye=se*lt.add(wt).mag()/lt.sub(wt).mag();Kt._perp()._mult(Ye*(hr?-1:1))}this.addCurrentVertex($,Kt,0,0,z),this.addCurrentVertex($,Kt.mult(-1),0,0,z)}else if(Le==="bevel"||Le==="fakeround"){const Ye=-Math.sqrt(se*se-1),$e=hr?Ye:0,Ve=hr?0:Ye;if(Y&&this.addCurrentVertex($,lt,$e,Ve,z),Le==="fakeround"){const ue=Math.round(180*ve/Math.PI/20);for(let er=1;er<ue;er++){let Ze=er/ue;if(Ze!==.5){const gi=Ze-.5;Ze+=Ze*gi*(Ze-1)*((1.0904+kt*(kt*(3.55645-1.43519*kt)-3.2452))*gi*gi+(.848013+kt*(.215638*kt-1.06021)))}const wr=wt.sub(lt)._mult(Ze)._add(lt)._unit()._mult(hr?-1:1);this.addHalfVertex($,wr.x,wr.y,!1,hr,0,z)}}ot&&this.addCurrentVertex($,wt,-$e,-Ve,z)}else if(Le==="butt")this.addCurrentVertex($,Kt,0,0,z);else if(Le==="square"){const Ye=Y?1:-1;this.addCurrentVertex($,Kt,Ye,Ye,z)}else Le==="round"&&(Y&&(this.addCurrentVertex($,lt,0,0,z),this.addCurrentVertex($,lt,1,1,z,!0)),ot&&(this.addCurrentVertex($,wt,-1,-1,z,!0),this.addCurrentVertex($,wt,0,0,z)));if(Oe&&Ft<U-1){const Ye=$.dist(ot);if(Ye>2*O){const $e=$.add(ot.sub($)._mult(O/Ye)._round());this.updateDistance($,$e),this.addCurrentVertex($e,wt,0,0,z),$=$e}}}}addCurrentVertex(r,l,f,y,b,x=!1){const I=l.y*y-l.x,U=-l.y-l.x*y;this.addHalfVertex(r,l.x+l.y*f,l.y-l.x*f,x,!1,f,b),this.addHalfVertex(r,I,U,x,!0,-y,b),this.distance>V5/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,l,f,y,b,x))}addHalfVertex({x:r,y:l},f,y,b,x,I,U){const D=.5*(this.lineClips?this.scaledDistance*(V5-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(b?1:0),(l<<1)+(x?1:0),Math.round(63*f)+128,Math.round(63*y)+128,1+(I===0?0:I<0?-1:1)|(63&D)<<2,D>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const O=U.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,O),U.primitiveLength++),x?this.e2=O:this.e1=O}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,l){this.distance+=r.dist(l),this.updateScaledDistance()}}let j5,K5;Re("LineBucket",wy,{omit:["layers","patternFeatures"]});var $5={get paint(){return K5=K5||new m({"line-opacity":new c(nt.paint_line["line-opacity"]),"line-color":new c(nt.paint_line["line-color"]),"line-translate":new e(nt.paint_line["line-translate"]),"line-translate-anchor":new e(nt.paint_line["line-translate-anchor"]),"line-width":new c(nt.paint_line["line-width"]),"line-gap-width":new c(nt.paint_line["line-gap-width"]),"line-offset":new c(nt.paint_line["line-offset"]),"line-blur":new c(nt.paint_line["line-blur"]),"line-dasharray":new a(nt.paint_line["line-dasharray"]),"line-pattern":new g(nt.paint_line["line-pattern"]),"line-gradient":new h(nt.paint_line["line-gradient"])})},get layout(){return j5=j5||new m({"line-cap":new e(nt.layout_line["line-cap"]),"line-join":new c(nt.layout_line["line-join"]),"line-miter-limit":new e(nt.layout_line["line-miter-limit"]),"line-round-limit":new e(nt.layout_line["line-round-limit"]),"line-sort-key":new c(nt.layout_line["line-sort-key"])})}};class J7 extends c{possiblyEvaluate(r,l){return l=new ii(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(r,l)}evaluate(r,l,f,y){return l=xt({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(r,l,f,y)}}let eg;class tz extends B{constructor(r){super(r,$5),this.gradientVersion=0,eg||(eg=new J7($5.paint.properties["line-width"].specification),eg.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const l=this.gradientExpression();this.stepInterpolant=!!function(f){return f._styleExpression!==void 0}(l)&&l._styleExpression.expression instanceof $o,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,l){super.recalculate(r,l),this.paint._values["line-floorwidth"]=eg.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new wy(r)}queryRadius(r){const l=r,f=q5(bd("line-width",this,l),bd("line-gap-width",this,l)),y=bd("line-offset",this,l);return f/2+Math.abs(y)+Xf(this.paint.get("line-translate"))}queryIntersectsFeature(r,l,f,y,b,x,I){const U=Zf(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,I),D=I/2*q5(this.paint.get("line-width").evaluate(l,f),this.paint.get("line-gap-width").evaluate(l,f)),O=this.paint.get("line-offset").evaluate(l,f);return O&&(y=function(z,$){const Y=[];for(let ot=0;ot<z.length;ot++){const lt=z[ot],wt=[];for(let Ft=0;Ft<lt.length;Ft++){const Kt=lt[Ft-1],kt=lt[Ft],zt=lt[Ft+1],se=Ft===0?new E(0,0):kt.sub(Kt)._unit()._perp(),ve=Ft===lt.length-1?new E(0,0):zt.sub(kt)._unit()._perp(),Oe=se._add(ve)._unit(),hr=Oe.x*ve.x+Oe.y*ve.y;hr!==0&&Oe._mult(1/hr),wt.push(Oe._mult($)._add(kt))}Y.push(wt)}return Y}(y,O*I)),function(z,$,Y){for(let ot=0;ot<$.length;ot++){const lt=$[ot];if(z.length>=3){for(let wt=0;wt<lt.length;wt++)if(HA(z,lt[wt]))return!0}if(zA(z,lt,Y))return!0}return!1}(U,y,D)}isTileClipped(){return!0}}function q5(o,r){return r>0?r+2*o:o}const ez=M([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),rz=M([{name:"a_projected_pos",components:3,type:"Float32"}],4);M([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const iz=M([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);M([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const G5=M([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),nz=M([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function sz(o,r,l){return o.sections.forEach(f=>{f.text=function(y,b,x){const I=b.layout.get("text-transform").evaluate(x,{});return I==="uppercase"?y=y.toLocaleUpperCase():I==="lowercase"&&(y=y.toLocaleLowerCase()),fo.applyArabicShaping&&(y=fo.applyArabicShaping(y)),y}(f.text,r,l)}),o}M([{name:"triangle",components:3,type:"Uint16"}]),M([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),M([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),M([{type:"Float32",name:"offsetX"}]),M([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),M([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Td={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var fn=24,X5=li,Z5=function(o,r,l,f,y){var b,x,I=8*y-f-1,U=(1<<I)-1,D=U>>1,O=-7,z=y-1,$=-1,Y=o[r+z];for(z+=$,b=Y&(1<<-O)-1,Y>>=-O,O+=I;O>0;b=256*b+o[r+z],z+=$,O-=8);for(x=b&(1<<-O)-1,b>>=-O,O+=f;O>0;x=256*x+o[r+z],z+=$,O-=8);if(b===0)b=1-D;else{if(b===U)return x?NaN:1/0*(Y?-1:1);x+=Math.pow(2,f),b-=D}return(Y?-1:1)*x*Math.pow(2,b-f)},W5=function(o,r,l,f,y,b){var x,I,U,D=8*b-y-1,O=(1<<D)-1,z=O>>1,$=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,Y=0,ot=1,lt=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(I=isNaN(r)?1:0,x=O):(x=Math.floor(Math.log(r)/Math.LN2),r*(U=Math.pow(2,-x))<1&&(x--,U*=2),(r+=x+z>=1?$/U:$*Math.pow(2,1-z))*U>=2&&(x++,U/=2),x+z>=O?(I=0,x=O):x+z>=1?(I=(r*U-1)*Math.pow(2,y),x+=z):(I=r*Math.pow(2,z-1)*Math.pow(2,y),x=0));y>=8;o[l+Y]=255&I,Y+=ot,I/=256,y-=8);for(x=x<<y|I,D+=y;D>0;o[l+Y]=255&x,Y+=ot,x/=256,D-=8);o[l+Y-ot]|=128*lt};function li(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}li.Varint=0,li.Fixed64=1,li.Bytes=2,li.Fixed32=5;var _y=4294967296,Y5=1/_y,J5=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function Cl(o){return o.type===li.Bytes?o.readVarint()+o.pos:o.pos+1}function ah(o,r,l){return l?4294967296*r+(o>>>0):4294967296*(r>>>0)+(o>>>0)}function tC(o,r,l){var f=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));l.realloc(f);for(var y=l.pos-1;y>=o;y--)l.buf[y+f]=l.buf[y]}function oz(o,r){for(var l=0;l<o.length;l++)r.writeVarint(o[l])}function az(o,r){for(var l=0;l<o.length;l++)r.writeSVarint(o[l])}function Az(o,r){for(var l=0;l<o.length;l++)r.writeFloat(o[l])}function lz(o,r){for(var l=0;l<o.length;l++)r.writeDouble(o[l])}function cz(o,r){for(var l=0;l<o.length;l++)r.writeBoolean(o[l])}function uz(o,r){for(var l=0;l<o.length;l++)r.writeFixed32(o[l])}function hz(o,r){for(var l=0;l<o.length;l++)r.writeSFixed32(o[l])}function dz(o,r){for(var l=0;l<o.length;l++)r.writeFixed64(o[l])}function pz(o,r){for(var l=0;l<o.length;l++)r.writeSFixed64(o[l])}function rg(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+16777216*o[r+3]}function Ah(o,r,l){o[l]=r,o[l+1]=r>>>8,o[l+2]=r>>>16,o[l+3]=r>>>24}function eC(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+(o[r+3]<<24)}li.prototype={destroy:function(){this.buf=null},readFields:function(o,r,l){for(l=l||this.length;this.pos<l;){var f=this.readVarint(),y=f>>3,b=this.pos;this.type=7&f,o(y,r,this),this.pos===b&&this.skip(f)}return r},readMessage:function(o,r){return this.readFields(o,r,this.readVarint()+this.pos)},readFixed32:function(){var o=rg(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=eC(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=rg(this.buf,this.pos)+rg(this.buf,this.pos+4)*_y;return this.pos+=8,o},readSFixed64:function(){var o=rg(this.buf,this.pos)+eC(this.buf,this.pos+4)*_y;return this.pos+=8,o},readFloat:function(){var o=Z5(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=Z5(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var r,l,f=this.buf;return r=127&(l=f[this.pos++]),l<128?r:(r|=(127&(l=f[this.pos++]))<<7,l<128?r:(r|=(127&(l=f[this.pos++]))<<14,l<128?r:(r|=(127&(l=f[this.pos++]))<<21,l<128?r:function(y,b,x){var I,U,D=x.buf;if(I=(112&(U=D[x.pos++]))>>4,U<128||(I|=(127&(U=D[x.pos++]))<<3,U<128)||(I|=(127&(U=D[x.pos++]))<<10,U<128)||(I|=(127&(U=D[x.pos++]))<<17,U<128)||(I|=(127&(U=D[x.pos++]))<<24,U<128)||(I|=(1&(U=D[x.pos++]))<<31,U<128))return ah(y,I,b);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(l=f[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,r=this.pos;return this.pos=o,o-r>=12&&J5?function(l,f,y){return J5.decode(l.subarray(f,y))}(this.buf,r,o):function(l,f,y){for(var b="",x=f;x<y;){var I,U,D,O=l[x],z=null,$=O>239?4:O>223?3:O>191?2:1;if(x+$>y)break;$===1?O<128&&(z=O):$===2?(192&(I=l[x+1]))==128&&(z=(31&O)<<6|63&I)<=127&&(z=null):$===3?(U=l[x+2],(192&(I=l[x+1]))==128&&(192&U)==128&&((z=(15&O)<<12|(63&I)<<6|63&U)<=2047||z>=55296&&z<=57343)&&(z=null)):$===4&&(U=l[x+2],D=l[x+3],(192&(I=l[x+1]))==128&&(192&U)==128&&(192&D)==128&&((z=(15&O)<<18|(63&I)<<12|(63&U)<<6|63&D)<=65535||z>=1114112)&&(z=null)),z===null?(z=65533,$=1):z>65535&&(z-=65536,b+=String.fromCharCode(z>>>10&1023|55296),z=56320|1023&z),b+=String.fromCharCode(z),x+=$}return b}(this.buf,r,o)},readBytes:function(){var o=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,o);return this.pos=o,r},readPackedVarint:function(o,r){if(this.type!==li.Bytes)return o.push(this.readVarint(r));var l=Cl(this);for(o=o||[];this.pos<l;)o.push(this.readVarint(r));return o},readPackedSVarint:function(o){if(this.type!==li.Bytes)return o.push(this.readSVarint());var r=Cl(this);for(o=o||[];this.pos<r;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==li.Bytes)return o.push(this.readBoolean());var r=Cl(this);for(o=o||[];this.pos<r;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==li.Bytes)return o.push(this.readFloat());var r=Cl(this);for(o=o||[];this.pos<r;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==li.Bytes)return o.push(this.readDouble());var r=Cl(this);for(o=o||[];this.pos<r;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==li.Bytes)return o.push(this.readFixed32());var r=Cl(this);for(o=o||[];this.pos<r;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==li.Bytes)return o.push(this.readSFixed32());var r=Cl(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==li.Bytes)return o.push(this.readFixed64());var r=Cl(this);for(o=o||[];this.pos<r;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==li.Bytes)return o.push(this.readSFixed64());var r=Cl(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed64());return o},skip:function(o){var r=7&o;if(r===li.Varint)for(;this.buf[this.pos++]>127;);else if(r===li.Bytes)this.pos=this.readVarint()+this.pos;else if(r===li.Fixed32)this.pos+=4;else{if(r!==li.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(o,r){this.writeVarint(o<<3|r)},realloc:function(o){for(var r=this.length||16;r<this.pos+o;)r*=2;if(r!==this.length){var l=new Uint8Array(r);l.set(this.buf),this.buf=l,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),Ah(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),Ah(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),Ah(this.buf,-1&o,this.pos),Ah(this.buf,Math.floor(o*Y5),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),Ah(this.buf,-1&o,this.pos),Ah(this.buf,Math.floor(o*Y5),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(r,l){var f,y;if(r>=0?(f=r%4294967296|0,y=r/4294967296|0):(y=~(-r/4294967296),4294967295^(f=~(-r%4294967296))?f=f+1|0:(f=0,y=y+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),function(b,x,I){I.buf[I.pos++]=127&b|128,b>>>=7,I.buf[I.pos++]=127&b|128,b>>>=7,I.buf[I.pos++]=127&b|128,b>>>=7,I.buf[I.pos++]=127&b|128,I.buf[I.pos]=127&(b>>>=7)}(f,0,l),function(b,x){var I=(7&b)<<4;x.buf[x.pos++]|=I|((b>>>=3)?128:0),b&&(x.buf[x.pos++]=127&b|((b>>>=7)?128:0),b&&(x.buf[x.pos++]=127&b|((b>>>=7)?128:0),b&&(x.buf[x.pos++]=127&b|((b>>>=7)?128:0),b&&(x.buf[x.pos++]=127&b|((b>>>=7)?128:0),b&&(x.buf[x.pos++]=127&b)))))}(y,l)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var r=this.pos;this.pos=function(f,y,b){for(var x,I,U=0;U<y.length;U++){if((x=y.charCodeAt(U))>55295&&x<57344){if(!I){x>56319||U+1===y.length?(f[b++]=239,f[b++]=191,f[b++]=189):I=x;continue}if(x<56320){f[b++]=239,f[b++]=191,f[b++]=189,I=x;continue}x=I-55296<<10|x-56320|65536,I=null}else I&&(f[b++]=239,f[b++]=191,f[b++]=189,I=null);x<128?f[b++]=x:(x<2048?f[b++]=x>>6|192:(x<65536?f[b++]=x>>12|224:(f[b++]=x>>18|240,f[b++]=x>>12&63|128),f[b++]=x>>6&63|128),f[b++]=63&x|128)}return b}(this.buf,o,this.pos);var l=this.pos-r;l>=128&&tC(r,l,this),this.pos=r-1,this.writeVarint(l),this.pos+=l},writeFloat:function(o){this.realloc(4),W5(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),W5(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var r=o.length;this.writeVarint(r),this.realloc(r);for(var l=0;l<r;l++)this.buf[this.pos++]=o[l]},writeRawMessage:function(o,r){this.pos++;var l=this.pos;o(r,this);var f=this.pos-l;f>=128&&tC(l,f,this),this.pos=l-1,this.writeVarint(f),this.pos+=f},writeMessage:function(o,r,l){this.writeTag(o,li.Bytes),this.writeRawMessage(r,l)},writePackedVarint:function(o,r){r.length&&this.writeMessage(o,oz,r)},writePackedSVarint:function(o,r){r.length&&this.writeMessage(o,az,r)},writePackedBoolean:function(o,r){r.length&&this.writeMessage(o,cz,r)},writePackedFloat:function(o,r){r.length&&this.writeMessage(o,Az,r)},writePackedDouble:function(o,r){r.length&&this.writeMessage(o,lz,r)},writePackedFixed32:function(o,r){r.length&&this.writeMessage(o,uz,r)},writePackedSFixed32:function(o,r){r.length&&this.writeMessage(o,hz,r)},writePackedFixed64:function(o,r){r.length&&this.writeMessage(o,dz,r)},writePackedSFixed64:function(o,r){r.length&&this.writeMessage(o,pz,r)},writeBytesField:function(o,r){this.writeTag(o,li.Bytes),this.writeBytes(r)},writeFixed32Field:function(o,r){this.writeTag(o,li.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(o,r){this.writeTag(o,li.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(o,r){this.writeTag(o,li.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(o,r){this.writeTag(o,li.Fixed64),this.writeSFixed64(r)},writeVarintField:function(o,r){this.writeTag(o,li.Varint),this.writeVarint(r)},writeSVarintField:function(o,r){this.writeTag(o,li.Varint),this.writeSVarint(r)},writeStringField:function(o,r){this.writeTag(o,li.Bytes),this.writeString(r)},writeFloatField:function(o,r){this.writeTag(o,li.Fixed32),this.writeFloat(r)},writeDoubleField:function(o,r){this.writeTag(o,li.Fixed64),this.writeDouble(r)},writeBooleanField:function(o,r){this.writeVarintField(o,!!r)}};var by=v(X5);const xy=3;function fz(o,r,l){o===1&&l.readMessage(gz,r)}function gz(o,r,l){if(o===3){const{id:f,bitmap:y,width:b,height:x,left:I,top:U,advance:D}=l.readMessage(mz,{});r.push({id:f,bitmap:new Bd({width:b+2*xy,height:x+2*xy},y),metrics:{width:b,height:x,left:I,top:U,advance:D}})}}function mz(o,r,l){o===1?r.id=l.readVarint():o===2?r.bitmap=l.readBytes():o===3?r.width=l.readVarint():o===4?r.height=l.readVarint():o===5?r.left=l.readSVarint():o===6?r.top=l.readSVarint():o===7&&(r.advance=l.readVarint())}const rC=xy;function iC(o){let r=0,l=0;for(const x of o)r+=x.w*x.h,l=Math.max(l,x.w);o.sort((x,I)=>I.h-x.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),l),h:1/0}];let y=0,b=0;for(const x of o)for(let I=f.length-1;I>=0;I--){const U=f[I];if(!(x.w>U.w||x.h>U.h)){if(x.x=U.x,x.y=U.y,b=Math.max(b,x.y+x.h),y=Math.max(y,x.x+x.w),x.w===U.w&&x.h===U.h){const D=f.pop();I<f.length&&(f[I]=D)}else x.h===U.h?(U.x+=x.w,U.w-=x.w):x.w===U.w?(U.y+=x.h,U.h-=x.h):(f.push({x:U.x+x.w,y:U.y,w:U.w-x.w,h:x.h}),U.y+=x.h,U.h-=x.h);break}}return{w:y,h:b,fill:r/(y*b)||0}}const qs=1;class By{constructor(r,{pixelRatio:l,version:f,stretchX:y,stretchY:b,content:x,textFitWidth:I,textFitHeight:U}){this.paddedRect=r,this.pixelRatio=l,this.stretchX=y,this.stretchY=b,this.content=x,this.version=f,this.textFitWidth=I,this.textFitHeight=U}get tl(){return[this.paddedRect.x+qs,this.paddedRect.y+qs]}get br(){return[this.paddedRect.x+this.paddedRect.w-qs,this.paddedRect.y+this.paddedRect.h-qs]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*qs)/this.pixelRatio,(this.paddedRect.h-2*qs)/this.pixelRatio]}}class nC{constructor(r,l){const f={},y={};this.haveRenderCallbacks=[];const b=[];this.addImages(r,f,b),this.addImages(l,y,b);const{w:x,h:I}=iC(b),U=new Lo({width:x||1,height:I||1});for(const D in r){const O=r[D],z=f[D].paddedRect;Lo.copy(O.data,U,{x:0,y:0},{x:z.x+qs,y:z.y+qs},O.data)}for(const D in l){const O=l[D],z=y[D].paddedRect,$=z.x+qs,Y=z.y+qs,ot=O.data.width,lt=O.data.height;Lo.copy(O.data,U,{x:0,y:0},{x:$,y:Y},O.data),Lo.copy(O.data,U,{x:0,y:lt-1},{x:$,y:Y-1},{width:ot,height:1}),Lo.copy(O.data,U,{x:0,y:0},{x:$,y:Y+lt},{width:ot,height:1}),Lo.copy(O.data,U,{x:ot-1,y:0},{x:$-1,y:Y},{width:1,height:lt}),Lo.copy(O.data,U,{x:0,y:0},{x:$+ot,y:Y},{width:1,height:lt})}this.image=U,this.iconPositions=f,this.patternPositions=y}addImages(r,l,f){for(const y in r){const b=r[y],x={x:0,y:0,w:b.data.width+2*qs,h:b.data.height+2*qs};f.push(x),l[y]=new By(x,b),b.hasRenderCallback&&this.haveRenderCallbacks.push(y)}}patchUpdatedImages(r,l){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in r.updatedImages)this.patchUpdatedImage(this.iconPositions[f],r.getImage(f),l),this.patchUpdatedImage(this.patternPositions[f],r.getImage(f),l)}patchUpdatedImage(r,l,f){if(!r||!l||r.version===l.version)return;r.version=l.version;const[y,b]=r.tl;f.update(l.data,void 0,{x:y,y:b})}}var sc;Re("ImagePosition",By),Re("ImageAtlas",nC),p.ah=void 0,(sc=p.ah||(p.ah={}))[sc.none=0]="none",sc[sc.horizontal=1]="horizontal",sc[sc.vertical=2]="vertical",sc[sc.horizontalOnly=3]="horizontalOnly";const Ud=-17;class Pd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,l){const f=new Pd;return f.scale=r||1,f.fontStack=l,f}static forImage(r){const l=new Pd;return l.imageName=r,l}}class lh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,l){const f=new lh;for(let y=0;y<r.sections.length;y++){const b=r.sections[y];b.image?f.addImageSection(b):f.addTextSection(b,l)}return f}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let l="";for(let f=0;f<r.length;f++){const y=r.charCodeAt(f+1)||null,b=r.charCodeAt(f-1)||null;l+=y&&LA(y)&&!Td[r[f+1]]||b&&LA(b)&&!Td[r[f-1]]||!Td[r[f]]?r[f]:Td[r[f]]}return l}(this.text)}trim(){let r=0;for(let f=0;f<this.text.length&&ng[this.text.charCodeAt(f)];f++)r++;let l=this.text.length;for(let f=this.text.length-1;f>=0&&f>=r&&ng[this.text.charCodeAt(f)];f--)l--;this.text=this.text.substring(r,l),this.sectionIndex=this.sectionIndex.slice(r,l)}substring(r,l){const f=new lh;return f.text=this.text.substring(r,l),f.sectionIndex=this.sectionIndex.slice(r,l),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,l)=>Math.max(r,this.sections[l].scale),0)}addTextSection(r,l){this.text+=r.text,this.sections.push(Pd.forText(r.scale,r.fontStack||l));const f=this.sections.length-1;for(let y=0;y<r.text.length;++y)this.sectionIndex.push(f)}addImageSection(r){const l=r.image?r.image.name:"";if(l.length===0)return void vt("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(Pd.forImage(l)),this.sectionIndex.push(this.sections.length-1)):vt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function ig(o,r,l,f,y,b,x,I,U,D,O,z,$,Y,ot){const lt=lh.fromFeature(o,y);let wt;z===p.ah.vertical&&lt.verticalizePunctuation();const{processBidirectionalText:Ft,processStyledBidirectionalText:Kt}=fo;if(Ft&&lt.sections.length===1){wt=[];const se=Ft(lt.toString(),Cy(lt,D,b,r,f,Y));for(const ve of se){const Oe=new lh;Oe.text=ve,Oe.sections=lt.sections;for(let hr=0;hr<ve.length;hr++)Oe.sectionIndex.push(0);wt.push(Oe)}}else if(Kt){wt=[];const se=Kt(lt.text,lt.sectionIndex,Cy(lt,D,b,r,f,Y));for(const ve of se){const Oe=new lh;Oe.text=ve[0],Oe.sectionIndex=ve[1],Oe.sections=lt.sections,wt.push(Oe)}}else wt=function(se,ve){const Oe=[],hr=se.text;let Me=0;for(const Le of ve)Oe.push(se.substring(Me,Le)),Me=Le;return Me<hr.length&&Oe.push(se.substring(Me,hr.length)),Oe}(lt,Cy(lt,D,b,r,f,Y));const kt=[],zt={positionedLines:kt,text:lt.toString(),top:O[1],bottom:O[1],left:O[0],right:O[0],writingMode:z,iconsInText:!1,verticalizable:!1};return function(se,ve,Oe,hr,Me,Le,Ye,$e,Ve,ue,er,Ze){let wr=0,gi=Ud,ci=0,Fn=0;const ca=$e==="right"?1:$e==="left"?0:.5;let $n=0;for(const Ri of Me){Ri.trim();const In=Ri.getMaxScale(),as=(In-1)*fn,qn={positionedGlyphs:[],lineOffset:0};se.positionedLines[$n]=qn;const Fs=qn.positionedGlyphs;let Gn=0;if(!Ri.length()){gi+=Le,++$n;continue}for(let Gs=0;Gs<Ri.length();Gs++){const Jr=Ri.getSection(Gs),bi=Ri.getSectionIndex(Gs),Si=Ri.getCharCode(Gs);let vo=0,Di=null,dh=null,jA=null,KA=fn;const ua=!(Ve===p.ah.horizontal||!er&&!Po(Si)||er&&(ng[Si]||(Sn=Si,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(Sn)))));if(Jr.imageName){const Mo=hr[Jr.imageName];if(!Mo)continue;jA=Jr.imageName,se.iconsInText=se.iconsInText||!0,dh=Mo.paddedRect;const Mn=Mo.displaySize;Jr.scale=Jr.scale*fn/Ze,Di={width:Mn[0],height:Mn[1],left:qs,top:-rC,advance:ua?Mn[1]:Mn[0]},vo=as+(fn-Mn[1]*Jr.scale),KA=Di.advance;const Fl=ua?Mn[0]*Jr.scale-fn*In:Mn[1]*Jr.scale-fn*In;Fl>0&&Fl>Gn&&(Gn=Fl)}else{const Mo=Oe[Jr.fontStack],Mn=Mo&&Mo[Si];if(Mn&&Mn.rect)dh=Mn.rect,Di=Mn.metrics;else{const Fl=ve[Jr.fontStack],Nd=Fl&&Fl[Si];if(!Nd)continue;Di=Nd.metrics}vo=(In-Jr.scale)*fn}ua?(se.verticalizable=!0,Fs.push({glyph:Si,imageName:jA,x:wr,y:gi+vo,vertical:ua,scale:Jr.scale,fontStack:Jr.fontStack,sectionIndex:bi,metrics:Di,rect:dh}),wr+=KA*Jr.scale+ue):(Fs.push({glyph:Si,imageName:jA,x:wr,y:gi+vo,vertical:ua,scale:Jr.scale,fontStack:Jr.fontStack,sectionIndex:bi,metrics:Di,rect:dh}),wr+=Di.advance*Jr.scale+ue)}Fs.length!==0&&(ci=Math.max(wr-ue,ci),_z(Fs,0,Fs.length-1,ca,Gn)),wr=0;const ko=Le*In+Gn;qn.lineOffset=Math.max(Gn,as),gi+=ko,Fn=Math.max(ko,Fn),++$n}var Sn;const xs=gi-Ud,{horizontalAlign:Bs,verticalAlign:Cs}=Fy(Ye);(function(Ri,In,as,qn,Fs,Gn,ko,Gs,Jr){const bi=(In-as)*Fs;let Si=0;Si=Gn!==ko?-Gs*qn-Ud:(-qn*Jr+.5)*ko;for(const vo of Ri)for(const Di of vo.positionedGlyphs)Di.x+=bi,Di.y+=Si})(se.positionedLines,ca,Bs,Cs,ci,Fn,Le,xs,Me.length),se.top+=-Cs*xs,se.bottom=se.top+xs,se.left+=-Bs*ci,se.right=se.left+ci}(zt,r,l,f,wt,x,I,U,z,D,$,ot),!function(se){for(const ve of se)if(ve.positionedGlyphs.length!==0)return!1;return!0}(kt)&&zt}const ng={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},yz={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},vz={40:!0};function sC(o,r,l,f,y,b){if(r.imageName){const x=f[r.imageName];return x?x.displaySize[0]*r.scale*fn/b+y:0}{const x=l[r.fontStack],I=x&&x[o];return I?I.metrics.advance*r.scale+y:0}}function oC(o,r,l,f){const y=Math.pow(o-r,2);return f?o<r?y/2:2*y:y+Math.abs(l)*l}function wz(o,r,l){let f=0;return o===10&&(f-=1e4),l&&(f+=150),o!==40&&o!==65288||(f+=50),r!==41&&r!==65289||(f+=50),f}function aC(o,r,l,f,y,b){let x=null,I=oC(r,l,y,b);for(const U of f){const D=oC(r-U.x,l,y,b)+U.badness;D<=I&&(x=U,I=D)}return{index:o,x:r,priorBreak:x,badness:I}}function AC(o){return o?AC(o.priorBreak).concat(o.index):[]}function Cy(o,r,l,f,y,b){if(!o)return[];const x=[],I=function(z,$,Y,ot,lt,wt){let Ft=0;for(let Kt=0;Kt<z.length();Kt++){const kt=z.getSection(Kt);Ft+=sC(z.getCharCode(Kt),kt,ot,lt,$,wt)}return Ft/Math.max(1,Math.ceil(Ft/Y))}(o,r,l,f,y,b),U=o.text.indexOf("")>=0;let D=0;for(let z=0;z<o.length();z++){const $=o.getSection(z),Y=o.getCharCode(z);if(ng[Y]||(D+=sC(Y,$,f,y,r,b)),z<o.length()-1){const ot=!((O=Y)<11904)&&(!!_r["CJK Compatibility Forms"](O)||!!_r["CJK Compatibility"](O)||!!_r["CJK Strokes"](O)||!!_r["CJK Symbols and Punctuation"](O)||!!_r["Enclosed CJK Letters and Months"](O)||!!_r["Halfwidth and Fullwidth Forms"](O)||!!_r["Ideographic Description Characters"](O)||!!_r["Vertical Forms"](O)||zc.test(String.fromCodePoint(O)));(yz[Y]||ot||$.imageName||z!==o.length()-2&&vz[o.getCharCode(z+1)])&&x.push(aC(z+1,D,I,x,wz(Y,o.getCharCode(z+1),ot&&U),!1))}}var O;return AC(aC(o.length(),D,I,x,0,!0))}function Fy(o){let r=.5,l=.5;switch(o){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:r,verticalAlign:l}}function _z(o,r,l,f,y){if(!f&&!y)return;const b=o[l],x=(o[l].x+b.metrics.advance*b.scale)*f;for(let I=r;I<=l;I++)o[I].x-=x,o[I].y+=y}function bz(o,r,l){const{horizontalAlign:f,verticalAlign:y}=Fy(l),b=r[0]-o.displaySize[0]*f,x=r[1]-o.displaySize[1]*y;return{image:o,top:x,bottom:x+o.displaySize[1],left:b,right:b+o.displaySize[0]}}function lC(o){var r,l;let f=o.left,y=o.top,b=o.right-f,x=o.bottom-y;const I=(r=o.image.textFitWidth)!==null&&r!==void 0?r:"stretchOrShrink",U=(l=o.image.textFitHeight)!==null&&l!==void 0?l:"stretchOrShrink",D=(o.image.content[2]-o.image.content[0])/(o.image.content[3]-o.image.content[1]);if(U==="proportional"){if(I==="stretchOnly"&&b/x<D||I==="proportional"){const O=Math.ceil(x*D);f*=O/b,b=O}}else if(I==="proportional"&&U==="stretchOnly"&&D!==0&&b/x>D){const O=Math.ceil(b/D);y*=O/x,x=O}return{x1:f,y1:y,x2:f+b,y2:y+x}}function cC(o,r,l,f,y,b){const x=o.image;let I;if(x.content){const wt=x.content,Ft=x.pixelRatio||1;I=[wt[0]/Ft,wt[1]/Ft,x.displaySize[0]-wt[2]/Ft,x.displaySize[1]-wt[3]/Ft]}const U=r.left*b,D=r.right*b;let O,z,$,Y;l==="width"||l==="both"?(Y=y[0]+U-f[3],z=y[0]+D+f[1]):(Y=y[0]+(U+D-x.displaySize[0])/2,z=Y+x.displaySize[0]);const ot=r.top*b,lt=r.bottom*b;return l==="height"||l==="both"?(O=y[1]+ot-f[0],$=y[1]+lt+f[2]):(O=y[1]+(ot+lt-x.displaySize[1])/2,$=O+x.displaySize[1]),{image:x,top:O,right:z,bottom:$,left:Y,collisionPadding:I}}const Ld=255,VA=128,oc=Ld*VA;function uC(o,r){const{expression:l}=r;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new ii(o+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:y}=l;let b=0;for(;b<f.length&&f[b]<=o;)b++;b=Math.max(0,b-1);let x=b;for(;x<f.length&&f[x]<o+1;)x++;x=Math.min(f.length-1,x);const I=f[b],U=f[x];return l.kind==="composite"?{kind:"composite",minZoom:I,maxZoom:U,interpolationType:y}:{kind:"camera",minZoom:I,maxZoom:U,minSize:l.evaluate(new ii(I)),maxSize:l.evaluate(new ii(U)),interpolationType:y}}}function Sy(o,r,l){let f="never";const y=o.get(r);return y?f=y:o.get(l)&&(f="always"),f}const xz=nc.VectorTileFeature.types,Bz=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function sg(o,r,l,f,y,b,x,I,U,D,O,z,$){const Y=I?Math.min(oc,Math.round(I[0])):0,ot=I?Math.min(oc,Math.round(I[1])):0;o.emplaceBack(r,l,Math.round(32*f),Math.round(32*y),b,x,(Y<<1)+(U?1:0),ot,16*D,16*O,256*z,256*$)}function Iy(o,r,l){o.emplaceBack(r.x,r.y,l),o.emplaceBack(r.x,r.y,l),o.emplaceBack(r.x,r.y,l),o.emplaceBack(r.x,r.y,l)}function Cz(o){for(const r of o.sections)if(Ku(r.text))return!0;return!1}class Ey{constructor(r){this.layoutVertexArray=new Bn,this.indexArray=new ss,this.programConfigurations=r,this.segments=new en,this.dynamicLayoutVertexArray=new Ki,this.opacityVertexArray=new pn,this.hasVisibleVertices=!1,this.placedSymbolArray=new fr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,l,f,y){this.isEmpty()||(f&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,ez.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,rz.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,Bz,!0),this.opacityVertexBuffer.itemSize=1),(f||y)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Re("SymbolBuffers",Ey);class Ty{constructor(r,l,f){this.layoutVertexArray=new r,this.layoutAttributes=l,this.indexArray=new f,this.segments=new en,this.collisionVertexArray=new Cn}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,iz.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Re("CollisionBuffers",Ty);class ch{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(x=>x.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=cy([]),this.placementViewportMatrix=cy([]);const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=uC(this.zoom,l["text-size"]),this.iconSizeData=uC(this.zoom,l["icon-size"]);const f=this.layers[0].layout,y=f.get("symbol-sort-key"),b=f.get("symbol-z-order");this.canOverlap=Sy(f,"text-overlap","text-allow-overlap")!=="never"||Sy(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=b!=="viewport-y"&&!y.isConstant(),this.sortFeaturesByY=(b==="viewport-y"||b==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map(x=>p.ah[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=r.sourceID}createArrays(){this.text=new Ey(new OA(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new Ey(new OA(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new Gr,this.lineVertexArray=new Wr,this.symbolInstances=new Ai,this.textAnchorOffsets=new tn}calculateGlyphDependencies(r,l,f,y,b){for(let x=0;x<r.length;x++)if(l[r.charCodeAt(x)]=!0,(f||y)&&b){const I=Td[r.charAt(x)];I&&(l[I.charCodeAt(0)]=!0)}}populate(r,l,f){const y=this.layers[0],b=y.layout,x=b.get("text-font"),I=b.get("text-field"),U=b.get("icon-image"),D=(I.value.kind!=="constant"||I.value.value instanceof yi&&!I.value.value.isEmpty()||I.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),O=U.value.kind!=="constant"||!!U.value.value||Object.keys(U.parameters).length>0,z=b.get("symbol-sort-key");if(this.features=[],!D&&!O)return;const $=l.iconDependencies,Y=l.glyphDependencies,ot=l.availableImages,lt=new ii(this.zoom);for(const{feature:wt,id:Ft,index:Kt,sourceLayerIndex:kt}of r){const zt=y._featureFilter.needGeometry,se=RA(wt,zt);if(!y._featureFilter.filter(lt,se,f))continue;let ve,Oe;if(zt||(se.geometry=xl(wt)),D){const Me=y.getValueAndResolveTokens("text-field",se,f,ot),Le=yi.factory(Me),Ye=this.hasRTLText=this.hasRTLText||Cz(Le);(!Ye||fo.getRTLTextPluginStatus()==="unavailable"||Ye&&fo.isParsed())&&(ve=sz(Le,y,se))}if(O){const Me=y.getValueAndResolveTokens("icon-image",se,f,ot);Oe=Me instanceof Hi?Me:Hi.fromString(Me)}if(!ve&&!Oe)continue;const hr=this.sortFeaturesByKey?z.evaluate(se,{},f):void 0;if(this.features.push({id:Ft,text:ve,icon:Oe,index:Kt,sourceLayerIndex:kt,geometry:se.geometry,properties:wt.properties,type:xz[wt.type],sortKey:hr}),Oe&&($[Oe.name]=!0),ve){const Me=x.evaluate(se,{},f).join(","),Le=b.get("text-rotation-alignment")!=="viewport"&&b.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(p.ah.vertical)>=0;for(const Ye of ve.sections)if(Ye.image)$[Ye.image.name]=!0;else{const $e=Oc(ve.toString()),Ve=Ye.fontStack||Me,ue=Y[Ve]=Y[Ve]||{};this.calculateGlyphDependencies(Ye.text,ue,Le,this.allowVerticalPlacement,$e)}}}b.get("symbol-placement")==="line"&&(this.features=function(wt){const Ft={},Kt={},kt=[];let zt=0;function se(Me){kt.push(wt[Me]),zt++}function ve(Me,Le,Ye){const $e=Kt[Me];return delete Kt[Me],Kt[Le]=$e,kt[$e].geometry[0].pop(),kt[$e].geometry[0]=kt[$e].geometry[0].concat(Ye[0]),$e}function Oe(Me,Le,Ye){const $e=Ft[Le];return delete Ft[Le],Ft[Me]=$e,kt[$e].geometry[0].shift(),kt[$e].geometry[0]=Ye[0].concat(kt[$e].geometry[0]),$e}function hr(Me,Le,Ye){const $e=Ye?Le[0][Le[0].length-1]:Le[0][0];return`${Me}:${$e.x}:${$e.y}`}for(let Me=0;Me<wt.length;Me++){const Le=wt[Me],Ye=Le.geometry,$e=Le.text?Le.text.toString():null;if(!$e){se(Me);continue}const Ve=hr($e,Ye),ue=hr($e,Ye,!0);if(Ve in Kt&&ue in Ft&&Kt[Ve]!==Ft[ue]){const er=Oe(Ve,ue,Ye),Ze=ve(Ve,ue,kt[er].geometry);delete Ft[Ve],delete Kt[ue],Kt[hr($e,kt[Ze].geometry,!0)]=Ze,kt[er].geometry=null}else Ve in Kt?ve(Ve,ue,Ye):ue in Ft?Oe(Ve,ue,Ye):(se(Me),Ft[Ve]=zt-1,Kt[ue]=zt-1)}return kt.filter(Me=>Me.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((wt,Ft)=>wt.sortKey-Ft.sortKey)}update(r,l,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,l,this.layers,f),this.icon.programConfigurations.updatePaintArrays(r,l,this.layers,f))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,l){const f=this.lineVertexArray.length;if(r.segment!==void 0){let y=r.dist(l[r.segment+1]),b=r.dist(l[r.segment]);const x={};for(let I=r.segment+1;I<l.length;I++)x[I]={x:l[I].x,y:l[I].y,tileUnitDistanceFromAnchor:y},I<l.length-1&&(y+=l[I+1].dist(l[I]));for(let I=r.segment||0;I>=0;I--)x[I]={x:l[I].x,y:l[I].y,tileUnitDistanceFromAnchor:b},I>0&&(b+=l[I-1].dist(l[I]));for(let I=0;I<l.length;I++){const U=x[I];this.lineVertexArray.emplaceBack(U.x,U.y,U.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(r,l,f,y,b,x,I,U,D,O,z,$){const Y=r.indexArray,ot=r.layoutVertexArray,lt=r.segments.prepareSegment(4*l.length,ot,Y,this.canOverlap?x.sortKey:void 0),wt=this.glyphOffsetArray.length,Ft=lt.vertexLength,Kt=this.allowVerticalPlacement&&I===p.ah.vertical?Math.PI/2:0,kt=x.text&&x.text.sections;for(let zt=0;zt<l.length;zt++){const{tl:se,tr:ve,bl:Oe,br:hr,tex:Me,pixelOffsetTL:Le,pixelOffsetBR:Ye,minFontScaleX:$e,minFontScaleY:Ve,glyphOffset:ue,isSDF:er,sectionIndex:Ze}=l[zt],wr=lt.vertexLength,gi=ue[1];sg(ot,U.x,U.y,se.x,gi+se.y,Me.x,Me.y,f,er,Le.x,Le.y,$e,Ve),sg(ot,U.x,U.y,ve.x,gi+ve.y,Me.x+Me.w,Me.y,f,er,Ye.x,Le.y,$e,Ve),sg(ot,U.x,U.y,Oe.x,gi+Oe.y,Me.x,Me.y+Me.h,f,er,Le.x,Ye.y,$e,Ve),sg(ot,U.x,U.y,hr.x,gi+hr.y,Me.x+Me.w,Me.y+Me.h,f,er,Ye.x,Ye.y,$e,Ve),Iy(r.dynamicLayoutVertexArray,U,Kt),Y.emplaceBack(wr,wr+1,wr+2),Y.emplaceBack(wr+1,wr+2,wr+3),lt.vertexLength+=4,lt.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ue[0]),zt!==l.length-1&&Ze===l[zt+1].sectionIndex||r.programConfigurations.populatePaintArrays(ot.length,x,x.index,{},$,kt&&kt[Ze])}r.placedSymbolArray.emplaceBack(U.x,U.y,wt,this.glyphOffsetArray.length-wt,Ft,D,O,U.segment,f?f[0]:0,f?f[1]:0,y[0],y[1],I,0,!1,0,z)}_addCollisionDebugVertex(r,l,f,y,b,x){return l.emplaceBack(0,0),r.emplaceBack(f.x,f.y,y,b,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(r,l,f,y,b,x,I){const U=b.segments.prepareSegment(4,b.layoutVertexArray,b.indexArray),D=U.vertexLength,O=b.layoutVertexArray,z=b.collisionVertexArray,$=I.anchorX,Y=I.anchorY;this._addCollisionDebugVertex(O,z,x,$,Y,new E(r,l)),this._addCollisionDebugVertex(O,z,x,$,Y,new E(f,l)),this._addCollisionDebugVertex(O,z,x,$,Y,new E(f,y)),this._addCollisionDebugVertex(O,z,x,$,Y,new E(r,y)),U.vertexLength+=4;const ot=b.indexArray;ot.emplaceBack(D,D+1),ot.emplaceBack(D+1,D+2),ot.emplaceBack(D+2,D+3),ot.emplaceBack(D+3,D),U.primitiveLength+=4}addDebugCollisionBoxes(r,l,f,y){for(let b=r;b<l;b++){const x=this.collisionBoxArray.get(b);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,y?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Ty(fi,G5.members,yo),this.iconCollisionBox=new Ty(fi,G5.members,yo);for(let r=0;r<this.symbolInstances.length;r++){const l=this.symbolInstances.get(r);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(r,l,f,y,b,x,I,U,D){const O={};for(let z=l;z<f;z++){const $=r.get(z);O.textBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},O.textFeatureIndex=$.featureIndex;break}for(let z=y;z<b;z++){const $=r.get(z);O.verticalTextBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},O.verticalTextFeatureIndex=$.featureIndex;break}for(let z=x;z<I;z++){const $=r.get(z);O.iconBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},O.iconFeatureIndex=$.featureIndex;break}for(let z=U;z<D;z++){const $=r.get(z);O.verticalIconBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},O.verticalIconFeatureIndex=$.featureIndex;break}return O}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const f=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,l){const f=r.placedSymbolArray.get(l),y=f.vertexStartIndex+4*f.numGlyphs;for(let b=f.vertexStartIndex;b<y;b+=4)r.indexArray.emplaceBack(b,b+1,b+2),r.indexArray.emplaceBack(b+1,b+2,b+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(r),f=Math.cos(r),y=[],b=[],x=[];for(let I=0;I<this.symbolInstances.length;++I){x.push(I);const U=this.symbolInstances.get(I);y.push(0|Math.round(l*U.anchorX+f*U.anchorY)),b.push(U.featureIndex)}return x.sort((I,U)=>y[I]-y[U]||b[U]-b[I]),x}addToSortKeyRanges(r,l){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===l?f.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const f=this.symbolInstances.get(l);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach((y,b,x)=>{y>=0&&x.indexOf(y)===b&&this.addIndicesForPlacedSymbol(this.text,y)}),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let hC,dC;Re("SymbolBucket",ch,{omit:["layers","collisionBoxArray","features","compareText"]}),ch.MAX_GLYPHS=65535,ch.addDynamicAttributes=Iy;var Uy={get paint(){return dC=dC||new m({"icon-opacity":new c(nt.paint_symbol["icon-opacity"]),"icon-color":new c(nt.paint_symbol["icon-color"]),"icon-halo-color":new c(nt.paint_symbol["icon-halo-color"]),"icon-halo-width":new c(nt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new c(nt.paint_symbol["icon-halo-blur"]),"icon-translate":new e(nt.paint_symbol["icon-translate"]),"icon-translate-anchor":new e(nt.paint_symbol["icon-translate-anchor"]),"text-opacity":new c(nt.paint_symbol["text-opacity"]),"text-color":new c(nt.paint_symbol["text-color"],{runtimeType:vr,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new c(nt.paint_symbol["text-halo-color"]),"text-halo-width":new c(nt.paint_symbol["text-halo-width"]),"text-halo-blur":new c(nt.paint_symbol["text-halo-blur"]),"text-translate":new e(nt.paint_symbol["text-translate"]),"text-translate-anchor":new e(nt.paint_symbol["text-translate-anchor"])})},get layout(){return hC=hC||new m({"symbol-placement":new e(nt.layout_symbol["symbol-placement"]),"symbol-spacing":new e(nt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new e(nt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new c(nt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new e(nt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new e(nt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new e(nt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new e(nt.layout_symbol["icon-ignore-placement"]),"icon-optional":new e(nt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new e(nt.layout_symbol["icon-rotation-alignment"]),"icon-size":new c(nt.layout_symbol["icon-size"]),"icon-text-fit":new e(nt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new e(nt.layout_symbol["icon-text-fit-padding"]),"icon-image":new c(nt.layout_symbol["icon-image"]),"icon-rotate":new c(nt.layout_symbol["icon-rotate"]),"icon-padding":new c(nt.layout_symbol["icon-padding"]),"icon-keep-upright":new e(nt.layout_symbol["icon-keep-upright"]),"icon-offset":new c(nt.layout_symbol["icon-offset"]),"icon-anchor":new c(nt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new e(nt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new e(nt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new e(nt.layout_symbol["text-rotation-alignment"]),"text-field":new c(nt.layout_symbol["text-field"]),"text-font":new c(nt.layout_symbol["text-font"]),"text-size":new c(nt.layout_symbol["text-size"]),"text-max-width":new c(nt.layout_symbol["text-max-width"]),"text-line-height":new e(nt.layout_symbol["text-line-height"]),"text-letter-spacing":new c(nt.layout_symbol["text-letter-spacing"]),"text-justify":new c(nt.layout_symbol["text-justify"]),"text-radial-offset":new c(nt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new e(nt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new c(nt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new c(nt.layout_symbol["text-anchor"]),"text-max-angle":new e(nt.layout_symbol["text-max-angle"]),"text-writing-mode":new e(nt.layout_symbol["text-writing-mode"]),"text-rotate":new c(nt.layout_symbol["text-rotate"]),"text-padding":new e(nt.layout_symbol["text-padding"]),"text-keep-upright":new e(nt.layout_symbol["text-keep-upright"]),"text-transform":new c(nt.layout_symbol["text-transform"]),"text-offset":new c(nt.layout_symbol["text-offset"]),"text-allow-overlap":new e(nt.layout_symbol["text-allow-overlap"]),"text-overlap":new e(nt.layout_symbol["text-overlap"]),"text-ignore-placement":new e(nt.layout_symbol["text-ignore-placement"]),"text-optional":new e(nt.layout_symbol["text-optional"])})}};class pC{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:Xr,this.defaultValue=r}evaluate(r){if(r.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(r.formattedSection))return l.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Re("FormatSectionOverride",pC,{omit:["defaultValue"]});class og extends B{constructor(r){super(r,Uy)}recalculate(r,l){if(super.recalculate(r,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const y=[];for(const b of f)y.indexOf(b)<0&&y.push(b);this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,l,f,y){const b=this.layout.get(r).evaluate(l,{},f,y),x=this._unevaluatedLayout._values[r];return x.isDataDriven()||vs(x.value)||!b?b:function(I,U){return U.replace(/{([^{}]+)}/g,(D,O)=>I&&O in I?String(I[O]):"")}(l.properties,b)}createBucket(r){return new ch(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of Uy.paint.overridableProperties){if(!og.hasPaintOverride(this.layout,r))continue;const l=this.paint.get(r),f=new pC(l),y=new So(f,l.property.specification);let b=null;b=l.value.kind==="constant"||l.value.kind==="source"?new zn("source",y):new Io("composite",y,l.value.zoomStops),this.paint._values[r]=new js(l.property,b,l.parameters)}}_handleOverridablePaintPropertyUpdate(r,l,f){return!(!this.layout||l.isDataDriven()||f.isDataDriven())&&og.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,l){const f=r.get("text-field"),y=Uy.paint.properties[l];let b=!1;const x=I=>{for(const U of I)if(y.overrides&&y.overrides.hasOverride(U))return void(b=!0)};if(f.value.kind==="constant"&&f.value.value instanceof yi)x(f.value.value.sections);else if(f.value.kind==="source"){const I=D=>{b||(D instanceof eo&&Li(D.value)===Rr?x(D.value.sections):D instanceof pA?x(D.sections):D.eachChild(I))},U=f.value;U._styleExpression&&I(U._styleExpression.expression)}return b}}let fC;var Fz={get paint(){return fC=fC||new m({"background-color":new e(nt.paint_background["background-color"]),"background-pattern":new a(nt.paint_background["background-pattern"]),"background-opacity":new e(nt.paint_background["background-opacity"])})}};class Sz extends B{constructor(r){super(r,Fz)}}let gC;var Iz={get paint(){return gC=gC||new m({"raster-opacity":new e(nt.paint_raster["raster-opacity"]),"raster-hue-rotate":new e(nt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new e(nt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new e(nt.paint_raster["raster-brightness-max"]),"raster-saturation":new e(nt.paint_raster["raster-saturation"]),"raster-contrast":new e(nt.paint_raster["raster-contrast"]),"raster-resampling":new e(nt.paint_raster["raster-resampling"]),"raster-fade-duration":new e(nt.paint_raster["raster-fade-duration"])})}};class Ez extends B{constructor(r){super(r,Iz)}}class Tz extends B{constructor(r){super(r,{}),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Uz{constructor(r){this._methodToThrottle=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Py=63710088e-1;class ac{constructor(r,l){if(isNaN(r)||isNaN(l))throw new Error(`Invalid LngLat object: (${r}, ${l})`);if(this.lng=+r,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ac(Tt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const l=Math.PI/180,f=this.lat*l,y=r.lat*l,b=Math.sin(f)*Math.sin(y)+Math.cos(f)*Math.cos(y)*Math.cos((r.lng-this.lng)*l);return Py*Math.acos(Math.min(b,1))}static convert(r){if(r instanceof ac)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new ac(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new ac(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const mC=2*Math.PI*Py;function yC(o){return mC*Math.cos(o*Math.PI/180)}function vC(o){return(180+o)/360}function wC(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function _C(o,r){return o/yC(r)}function Ly(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class Qd{constructor(r,l,f=0){this.x=+r,this.y=+l,this.z=+f}static fromLngLat(r,l=0){const f=ac.convert(r);return new Qd(vC(f.lng),wC(f.lat),_C(l,f.lat))}toLngLat(){return new ac(360*this.x-180,Ly(this.y))}toAltitude(){return this.z*yC(Ly(this.y))}meterInMercatorCoordinateUnits(){return 1/mC*(r=Ly(this.y),1/Math.cos(r*Math.PI/180));var r}}function bC(o,r,l){var f=2*Math.PI*6378137/256/Math.pow(2,l);return[o*f-2*Math.PI*6378137/2,r*f-2*Math.PI*6378137/2]}class Qy{constructor(r,l,f){if(!function(y,b,x){return!(y<0||y>25||x<0||x>=Math.pow(2,y)||b<0||b>=Math.pow(2,y))}(r,l,f))throw new Error(`x=${l}, y=${f}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=l,this.y=f,this.key=kd(0,r,r,l,f)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,l,f){const y=(x=this.y,I=this.z,U=bC(256*(b=this.x),256*(x=Math.pow(2,I)-x-1),I),D=bC(256*(b+1),256*(x+1),I),U[0]+","+U[1]+","+D[0]+","+D[1]);var b,x,I,U,D;const O=function(z,$,Y){let ot,lt="";for(let wt=z;wt>0;wt--)ot=1<<wt-1,lt+=($&ot?1:0)+(Y&ot?2:0);return lt}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,O).replace(/{bbox-epsg-3857}/g,y)}isChildOf(r){const l=this.z-r.z;return l>0&&r.x===this.x>>l&&r.y===this.y>>l}getTilePoint(r){const l=Math.pow(2,this.z);return new E((r.x*l-this.x)*_i,(r.y*l-this.y)*_i)}toString(){return`${this.z}/${this.x}/${this.y}`}}class xC{constructor(r,l){this.wrap=r,this.canonical=l,this.key=kd(r,l.z,l.z,l.x,l.y)}}class Qo{constructor(r,l,f,y,b){if(r<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${f}`);this.overscaledZ=r,this.wrap=l,this.canonical=new Qy(f,+y,+b),this.key=kd(l,r,f,y,b)}clone(){return new Qo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-r;return r>this.canonical.z?new Qo(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Qo(r,this.wrap,r,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(r,l){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-r;return r>this.canonical.z?kd(this.wrap*+l,r,this.canonical.z,this.canonical.x,this.canonical.y):kd(this.wrap*+l,r,r,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const l=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>l&&r.canonical.y===this.canonical.y>>l}children(r){if(this.overscaledZ>=r)return[new Qo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,f=2*this.canonical.x,y=2*this.canonical.y;return[new Qo(l,this.wrap,l,f,y),new Qo(l,this.wrap,l,f+1,y),new Qo(l,this.wrap,l,f,y+1),new Qo(l,this.wrap,l,f+1,y+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new Qo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new Qo(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new xC(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new Qd(r.x-this.wrap,r.y))}}function kd(o,r,l,f,y){(o*=2)<0&&(o=-1*o-1);const b=1<<l;return(b*b*o+b*y+f).toString(36)+l.toString(36)+r.toString(36)}Re("CanonicalTileID",Qy),Re("OverscaledTileID",Qo,{omit:["posMatrix"]});class BC{constructor(r,l,f,y=1,b=1,x=1,I=0){if(this.uid=r,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(f&&!["mapbox","terrarium","custom"].includes(f))return void vt(`"${f}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;const U=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),f){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=y,this.greenFactor=b,this.blueFactor=x,this.baseShift=I;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let D=0;D<U;D++)this.data[this._idx(-1,D)]=this.data[this._idx(0,D)],this.data[this._idx(U,D)]=this.data[this._idx(U-1,D)],this.data[this._idx(D,-1)]=this.data[this._idx(D,0)],this.data[this._idx(D,U)]=this.data[this._idx(D,U-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(U,-1)]=this.data[this._idx(U-1,0)],this.data[this._idx(-1,U)]=this.data[this._idx(0,U-1)],this.data[this._idx(U,U)]=this.data[this._idx(U-1,U-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let D=0;D<U;D++)for(let O=0;O<U;O++){const z=this.get(D,O);z>this.max&&(this.max=z),z<this.min&&(this.min=z)}}get(r,l){const f=new Uint8Array(this.data.buffer),y=4*this._idx(r,l);return this.unpack(f[y],f[y+1],f[y+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,l){if(r<-1||r>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(r+1)}unpack(r,l,f){return r*this.redFactor+l*this.greenFactor+f*this.blueFactor-this.baseShift}getPixels(){return new Lo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,l,f){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let y=l*this.dim,b=l*this.dim+this.dim,x=f*this.dim,I=f*this.dim+this.dim;switch(l){case-1:y=b-1;break;case 1:b=y+1}switch(f){case-1:x=I-1;break;case 1:I=x+1}const U=-l*this.dim,D=-f*this.dim;for(let O=x;O<I;O++)for(let z=y;z<b;z++)this.data[this._idx(z,O)]=r.data[this._idx(z+U,O+D)]}}Re("DEMData",BC);class CC{constructor(r){this._stringToNumber={},this._numberToString=[];for(let l=0;l<r.length;l++){const f=r[l];this._stringToNumber[f]=l,this._numberToString[l]=f}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class FC{constructor(r,l,f,y,b){this.type="Feature",this._vectorTileFeature=r,r._z=l,r._x=f,r._y=y,this.properties=r.properties,this.id=b}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&(r[l]=this[l]);return r}}class SC{constructor(r,l){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new UA(_i,16,0),this.grid3D=new UA(_i,16,0),this.featureIndexArray=new Fi,this.promoteId=l}insert(r,l,f,y,b,x){const I=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,y,b);const U=x?this.grid3D:this.grid;for(let D=0;D<l.length;D++){const O=l[D],z=[1/0,1/0,-1/0,-1/0];for(let $=0;$<O.length;$++){const Y=O[$];z[0]=Math.min(z[0],Y.x),z[1]=Math.min(z[1],Y.y),z[2]=Math.max(z[2],Y.x),z[3]=Math.max(z[3],Y.y)}z[0]<_i&&z[1]<_i&&z[2]>=0&&z[3]>=0&&U.insert(I,z[0],z[1],z[2],z[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new nc.VectorTile(new by(this.rawTileData)).layers,this.sourceLayerCoder=new CC(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,l,f,y){this.loadVTLayers();const b=r.params||{},x=_i/r.tileSize/r.scale,I=Hn(b.filter),U=r.queryGeometry,D=r.queryPadding*x,O=EC(U),z=this.grid.query(O.minX-D,O.minY-D,O.maxX+D,O.maxY+D),$=EC(r.cameraQueryGeometry),Y=this.grid3D.query($.minX-D,$.minY-D,$.maxX+D,$.maxY+D,(wt,Ft,Kt,kt)=>function(zt,se,ve,Oe,hr){for(const Le of zt)if(se<=Le.x&&ve<=Le.y&&Oe>=Le.x&&hr>=Le.y)return!0;const Me=[new E(se,ve),new E(se,hr),new E(Oe,hr),new E(Oe,ve)];if(zt.length>2){for(const Le of Me)if(HA(zt,Le))return!0}for(let Le=0;Le<zt.length-1;Le++)if(_d(zt[Le],zt[Le+1],Me))return!0;return!1}(r.cameraQueryGeometry,wt-D,Ft-D,Kt+D,kt+D));for(const wt of Y)z.push(wt);z.sort(Pz);const ot={};let lt;for(let wt=0;wt<z.length;wt++){const Ft=z[wt];if(Ft===lt)continue;lt=Ft;const Kt=this.featureIndexArray.get(Ft);let kt=null;this.loadMatchingFeature(ot,Kt.bucketIndex,Kt.sourceLayerIndex,Kt.featureIndex,I,b.layers,b.availableImages,l,f,y,(zt,se,ve)=>(kt||(kt=xl(zt)),se.queryIntersectsFeature(U,zt,ve,kt,this.z,r.transform,x,r.pixelPosMatrix)))}return ot}loadMatchingFeature(r,l,f,y,b,x,I,U,D,O,z){const $=this.bucketLayerIDs[l];if(x&&!function(wt,Ft){for(let Kt=0;Kt<wt.length;Kt++)if(Ft.indexOf(wt[Kt])>=0)return!0;return!1}(x,$))return;const Y=this.sourceLayerCoder.decode(f),ot=this.vtLayers[Y].feature(y);if(b.needGeometry){const wt=RA(ot,!0);if(!b.filter(new ii(this.tileID.overscaledZ),wt,this.tileID.canonical))return}else if(!b.filter(new ii(this.tileID.overscaledZ),ot))return;const lt=this.getId(ot,Y);for(let wt=0;wt<$.length;wt++){const Ft=$[wt];if(x&&x.indexOf(Ft)<0)continue;const Kt=U[Ft];if(!Kt)continue;let kt={};lt&&O&&(kt=O.getState(Kt.sourceLayer||"_geojsonTileLayer",lt));const zt=xt({},D[Ft]);zt.paint=IC(zt.paint,Kt.paint,ot,kt,I),zt.layout=IC(zt.layout,Kt.layout,ot,kt,I);const se=!z||z(ot,Kt,kt);if(!se)continue;const ve=new FC(ot,this.z,this.x,this.y,lt);ve.layer=zt;let Oe=r[Ft];Oe===void 0&&(Oe=r[Ft]=[]),Oe.push({featureIndex:y,feature:ve,intersectionZ:se})}}lookupSymbolFeatures(r,l,f,y,b,x,I,U){const D={};this.loadVTLayers();const O=Hn(b);for(const z of r)this.loadMatchingFeature(D,f,y,z,O,x,I,U,l);return D}hasLayer(r){for(const l of this.bucketLayerIDs)for(const f of l)if(r===f)return!0;return!1}getId(r,l){let f=r.id;return this.promoteId&&(f=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof f=="boolean"&&(f=Number(f))),f}}function IC(o,r,l,f,y){return Nt(o,(b,x)=>{const I=r instanceof _?r.get(x):null;return I&&I.evaluate?I.evaluate(l,f,y):I})}function EC(o){let r=1/0,l=1/0,f=-1/0,y=-1/0;for(const b of o)r=Math.min(r,b.x),l=Math.min(l,b.y),f=Math.max(f,b.x),y=Math.max(y,b.y);return{minX:r,minY:l,maxX:f,maxY:y}}function Pz(o,r){return r-o}function TC(o,r,l,f,y){const b=[];for(let x=0;x<o.length;x++){const I=o[x];let U;for(let D=0;D<I.length-1;D++){let O=I[D],z=I[D+1];O.x<r&&z.x<r||(O.x<r?O=new E(r,O.y+(r-O.x)/(z.x-O.x)*(z.y-O.y))._round():z.x<r&&(z=new E(r,O.y+(r-O.x)/(z.x-O.x)*(z.y-O.y))._round()),O.y<l&&z.y<l||(O.y<l?O=new E(O.x+(l-O.y)/(z.y-O.y)*(z.x-O.x),l)._round():z.y<l&&(z=new E(O.x+(l-O.y)/(z.y-O.y)*(z.x-O.x),l)._round()),O.x>=f&&z.x>=f||(O.x>=f?O=new E(f,O.y+(f-O.x)/(z.x-O.x)*(z.y-O.y))._round():z.x>=f&&(z=new E(f,O.y+(f-O.x)/(z.x-O.x)*(z.y-O.y))._round()),O.y>=y&&z.y>=y||(O.y>=y?O=new E(O.x+(y-O.y)/(z.y-O.y)*(z.x-O.x),y)._round():z.y>=y&&(z=new E(O.x+(y-O.y)/(z.y-O.y)*(z.x-O.x),y)._round()),U&&O.equals(U[U.length-1])||(U=[O],b.push(U)),U.push(z)))))}}return b}Re("FeatureIndex",SC,{omit:["rawTileData","sourceLayerCoder"]});class Ac extends E{constructor(r,l,f,y){super(r,l),this.angle=f,y!==void 0&&(this.segment=y)}clone(){return new Ac(this.x,this.y,this.angle,this.segment)}}function UC(o,r,l,f,y){if(r.segment===void 0||l===0)return!0;let b=r,x=r.segment+1,I=0;for(;I>-l/2;){if(x--,x<0)return!1;I-=o[x].dist(b),b=o[x]}I+=o[x].dist(o[x+1]),x++;const U=[];let D=0;for(;I<l/2;){const O=o[x],z=o[x+1];if(!z)return!1;let $=o[x-1].angleTo(O)-O.angleTo(z);for($=Math.abs(($+3*Math.PI)%(2*Math.PI)-Math.PI),U.push({distance:I,angleDelta:$}),D+=$;I-U[0].distance>f;)D-=U.shift().angleDelta;if(D>y)return!1;x++,I+=O.dist(z)}return!0}function PC(o){let r=0;for(let l=0;l<o.length-1;l++)r+=o[l].dist(o[l+1]);return r}function LC(o,r,l){return o?.6*r*l:0}function QC(o,r){return Math.max(o?o.right-o.left:0,r?r.right-r.left:0)}function Lz(o,r,l,f,y,b){const x=LC(l,y,b),I=QC(l,f)*b;let U=0;const D=PC(o)/2;for(let O=0;O<o.length-1;O++){const z=o[O],$=o[O+1],Y=z.dist($);if(U+Y>D){const ot=(D-U)/Y,lt=wn.number(z.x,$.x,ot),wt=wn.number(z.y,$.y,ot),Ft=new Ac(lt,wt,$.angleTo(z),O);return Ft._round(),!x||UC(o,Ft,I,x,r)?Ft:void 0}U+=Y}}function Qz(o,r,l,f,y,b,x,I,U){const D=LC(f,b,x),O=QC(f,y),z=O*x,$=o[0].x===0||o[0].x===U||o[0].y===0||o[0].y===U;return r-z<r/4&&(r=z+r/4),kC(o,$?r/2*I%r:(O/2+2*b)*x*I%r,r,D,l,z,$,!1,U)}function kC(o,r,l,f,y,b,x,I,U){const D=b/2,O=PC(o);let z=0,$=r-l,Y=[];for(let ot=0;ot<o.length-1;ot++){const lt=o[ot],wt=o[ot+1],Ft=lt.dist(wt),Kt=wt.angleTo(lt);for(;$+l<z+Ft;){$+=l;const kt=($-z)/Ft,zt=wn.number(lt.x,wt.x,kt),se=wn.number(lt.y,wt.y,kt);if(zt>=0&&zt<U&&se>=0&&se<U&&$-D>=0&&$+D<=O){const ve=new Ac(zt,se,Kt,ot);ve._round(),f&&!UC(o,ve,b,f,y)||Y.push(ve)}}z+=Ft}return I||Y.length||x||(Y=kC(o,z/2,l,f,y,b,x,!0,U)),Y}Re("Anchor",Ac);const uh=qs;function MC(o,r,l,f){const y=[],b=o.image,x=b.pixelRatio,I=b.paddedRect.w-2*uh,U=b.paddedRect.h-2*uh;let D={x1:o.left,y1:o.top,x2:o.right,y2:o.bottom};const O=b.stretchX||[[0,I]],z=b.stretchY||[[0,U]],$=(ue,er)=>ue+er[1]-er[0],Y=O.reduce($,0),ot=z.reduce($,0),lt=I-Y,wt=U-ot;let Ft=0,Kt=Y,kt=0,zt=ot,se=0,ve=lt,Oe=0,hr=wt;if(b.content&&f){const ue=b.content,er=ue[2]-ue[0],Ze=ue[3]-ue[1];(b.textFitWidth||b.textFitHeight)&&(D=lC(o)),Ft=ag(O,0,ue[0]),kt=ag(z,0,ue[1]),Kt=ag(O,ue[0],ue[2]),zt=ag(z,ue[1],ue[3]),se=ue[0]-Ft,Oe=ue[1]-kt,ve=er-Kt,hr=Ze-zt}const Me=D.x1,Le=D.y1,Ye=D.x2-Me,$e=D.y2-Le,Ve=(ue,er,Ze,wr)=>{const gi=Ag(ue.stretch-Ft,Kt,Ye,Me),ci=lg(ue.fixed-se,ve,ue.stretch,Y),Fn=Ag(er.stretch-kt,zt,$e,Le),ca=lg(er.fixed-Oe,hr,er.stretch,ot),$n=Ag(Ze.stretch-Ft,Kt,Ye,Me),Sn=lg(Ze.fixed-se,ve,Ze.stretch,Y),xs=Ag(wr.stretch-kt,zt,$e,Le),Bs=lg(wr.fixed-Oe,hr,wr.stretch,ot),Cs=new E(gi,Fn),Ri=new E($n,Fn),In=new E($n,xs),as=new E(gi,xs),qn=new E(ci/x,ca/x),Fs=new E(Sn/x,Bs/x),Gn=r*Math.PI/180;if(Gn){const Jr=Math.sin(Gn),bi=Math.cos(Gn),Si=[bi,-Jr,Jr,bi];Cs._matMult(Si),Ri._matMult(Si),as._matMult(Si),In._matMult(Si)}const ko=ue.stretch+ue.fixed,Gs=er.stretch+er.fixed;return{tl:Cs,tr:Ri,bl:as,br:In,tex:{x:b.paddedRect.x+uh+ko,y:b.paddedRect.y+uh+Gs,w:Ze.stretch+Ze.fixed-ko,h:wr.stretch+wr.fixed-Gs},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:qn,pixelOffsetBR:Fs,minFontScaleX:ve/x/Ye,minFontScaleY:hr/x/$e,isSDF:l}};if(f&&(b.stretchX||b.stretchY)){const ue=DC(O,lt,Y),er=DC(z,wt,ot);for(let Ze=0;Ze<ue.length-1;Ze++){const wr=ue[Ze],gi=ue[Ze+1];for(let ci=0;ci<er.length-1;ci++)y.push(Ve(wr,er[ci],gi,er[ci+1]))}}else y.push(Ve({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:I+1},{fixed:0,stretch:U+1}));return y}function ag(o,r,l){let f=0;for(const y of o)f+=Math.max(r,Math.min(l,y[1]))-Math.max(r,Math.min(l,y[0]));return f}function DC(o,r,l){const f=[{fixed:-uh,stretch:0}];for(const[y,b]of o){const x=f[f.length-1];f.push({fixed:y-x.stretch,stretch:x.stretch}),f.push({fixed:y-x.stretch,stretch:x.stretch+(b-y)})}return f.push({fixed:r+uh,stretch:l}),f}function Ag(o,r,l,f){return o/r*l+f}function lg(o,r,l,f){return o-r*l/f}class cg{constructor(r,l,f,y,b,x,I,U,D,O){var z;if(this.boxStartIndex=r.length,D){let $=x.top,Y=x.bottom;const ot=x.collisionPadding;ot&&($-=ot[1],Y+=ot[3]);let lt=Y-$;lt>0&&(lt=Math.max(10,lt),this.circleDiameter=lt)}else{const $=!((z=x.image)===null||z===void 0)&&z.content&&(x.image.textFitWidth||x.image.textFitHeight)?lC(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};$.y1=$.y1*I-U[0],$.y2=$.y2*I+U[2],$.x1=$.x1*I-U[3],$.x2=$.x2*I+U[1];const Y=x.collisionPadding;if(Y&&($.x1-=Y[0]*I,$.y1-=Y[1]*I,$.x2+=Y[2]*I,$.y2+=Y[3]*I),O){const ot=new E($.x1,$.y1),lt=new E($.x2,$.y1),wt=new E($.x1,$.y2),Ft=new E($.x2,$.y2),Kt=O*Math.PI/180;ot._rotate(Kt),lt._rotate(Kt),wt._rotate(Kt),Ft._rotate(Kt),$.x1=Math.min(ot.x,lt.x,wt.x,Ft.x),$.x2=Math.max(ot.x,lt.x,wt.x,Ft.x),$.y1=Math.min(ot.y,lt.y,wt.y,Ft.y),$.y2=Math.max(ot.y,lt.y,wt.y,Ft.y)}r.emplaceBack(l.x,l.y,$.x1,$.y1,$.x2,$.y2,f,y,b)}this.boxEndIndex=r.length}}class kz{constructor(r=[],l=(f,y)=>f<y?-1:f>y?1:0){if(this.data=r,this.length=this.data.length,this.compare=l,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(r){this.data.push(r),this._up(this.length++)}pop(){if(this.length===0)return;const r=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:l,compare:f}=this,y=l[r];for(;r>0;){const b=r-1>>1,x=l[b];if(f(y,x)>=0)break;l[r]=x,r=b}l[r]=y}_down(r){const{data:l,compare:f}=this,y=this.length>>1,b=l[r];for(;r<y;){let x=1+(r<<1);const I=x+1;if(I<this.length&&f(l[I],l[x])<0&&(x=I),f(l[x],b)>=0)break;l[r]=l[x],r=x}l[r]=b}}function Mz(o,r=1,l=!1){let f=1/0,y=1/0,b=-1/0,x=-1/0;const I=o[0];for(let Y=0;Y<I.length;Y++){const ot=I[Y];(!Y||ot.x<f)&&(f=ot.x),(!Y||ot.y<y)&&(y=ot.y),(!Y||ot.x>b)&&(b=ot.x),(!Y||ot.y>x)&&(x=ot.y)}const U=Math.min(b-f,x-y);let D=U/2;const O=new kz([],Dz);if(U===0)return new E(f,y);for(let Y=f;Y<b;Y+=U)for(let ot=y;ot<x;ot+=U)O.push(new hh(Y+D,ot+D,D,o));let z=function(Y){let ot=0,lt=0,wt=0;const Ft=Y[0];for(let Kt=0,kt=Ft.length,zt=kt-1;Kt<kt;zt=Kt++){const se=Ft[Kt],ve=Ft[zt],Oe=se.x*ve.y-ve.x*se.y;lt+=(se.x+ve.x)*Oe,wt+=(se.y+ve.y)*Oe,ot+=3*Oe}return new hh(lt/ot,wt/ot,0,Y)}(o),$=O.length;for(;O.length;){const Y=O.pop();(Y.d>z.d||!z.d)&&(z=Y,l&&console.log("found best %d after %d probes",Math.round(1e4*Y.d)/1e4,$)),Y.max-z.d<=r||(D=Y.h/2,O.push(new hh(Y.p.x-D,Y.p.y-D,D,o)),O.push(new hh(Y.p.x+D,Y.p.y-D,D,o)),O.push(new hh(Y.p.x-D,Y.p.y+D,D,o)),O.push(new hh(Y.p.x+D,Y.p.y+D,D,o)),$+=4)}return l&&(console.log(`num probes: ${$}`),console.log(`best distance: ${z.d}`)),z.p}function Dz(o,r){return r.max-o.max}function hh(o,r,l,f){this.p=new E(o,r),this.h=l,this.d=function(y,b){let x=!1,I=1/0;for(let U=0;U<b.length;U++){const D=b[U];for(let O=0,z=D.length,$=z-1;O<z;$=O++){const Y=D[O],ot=D[$];Y.y>y.y!=ot.y>y.y&&y.x<(ot.x-Y.x)*(y.y-Y.y)/(ot.y-Y.y)+Y.x&&(x=!x),I=Math.min(I,wd(y,Y,ot))}}return(x?1:-1)*Math.sqrt(I)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}var Kn;p.aq=void 0,(Kn=p.aq||(p.aq={}))[Kn.center=1]="center",Kn[Kn.left=2]="left",Kn[Kn.right=3]="right",Kn[Kn.top=4]="top",Kn[Kn.bottom=5]="bottom",Kn[Kn["top-left"]=6]="top-left",Kn[Kn["top-right"]=7]="top-right",Kn[Kn["bottom-left"]=8]="bottom-left",Kn[Kn["bottom-right"]=9]="bottom-right";const lc=7,ky=Number.POSITIVE_INFINITY;function NC(o,r){return r[1]!==ky?function(l,f,y){let b=0,x=0;switch(f=Math.abs(f),y=Math.abs(y),l){case"top-right":case"top-left":case"top":x=y-lc;break;case"bottom-right":case"bottom-left":case"bottom":x=-y+lc}switch(l){case"top-right":case"bottom-right":case"right":b=-f;break;case"top-left":case"bottom-left":case"left":b=f}return[b,x]}(o,r[0],r[1]):function(l,f){let y=0,b=0;f<0&&(f=0);const x=f/Math.SQRT2;switch(l){case"top-right":case"top-left":b=x-lc;break;case"bottom-right":case"bottom-left":b=-x+lc;break;case"bottom":b=-f+lc;break;case"top":b=f-lc}switch(l){case"top-right":case"bottom-right":y=-x;break;case"top-left":case"bottom-left":y=x;break;case"left":y=f;break;case"right":y=-f}return[y,b]}(o,r[0])}function OC(o,r,l){var f;const y=o.layout,b=(f=y.get("text-variable-anchor-offset"))===null||f===void 0?void 0:f.evaluate(r,{},l);if(b){const I=b.values,U=[];for(let D=0;D<I.length;D+=2){const O=U[D]=I[D],z=I[D+1].map($=>$*fn);O.startsWith("top")?z[1]-=lc:O.startsWith("bottom")&&(z[1]+=lc),U[D+1]=z}return new Xi(U)}const x=y.get("text-variable-anchor");if(x){let I;I=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[y.get("text-radial-offset").evaluate(r,{},l)*fn,ky]:y.get("text-offset").evaluate(r,{},l).map(D=>D*fn);const U=[];for(const D of x)U.push(D,NC(D,I));return new Xi(U)}return null}function My(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Nz(o,r,l,f,y,b,x,I,U,D,O){let z=b.textMaxSize.evaluate(r,{});z===void 0&&(z=x);const $=o.layers[0].layout,Y=$.get("icon-offset").evaluate(r,{},O),ot=zC(l.horizontal),lt=x/24,wt=o.tilePixelRatio*lt,Ft=o.tilePixelRatio*z/24,Kt=o.tilePixelRatio*I,kt=o.tilePixelRatio*$.get("symbol-spacing"),zt=$.get("text-padding")*o.tilePixelRatio,se=function(ue,er,Ze,wr=1){const gi=ue.get("icon-padding").evaluate(er,{},Ze),ci=gi&&gi.values;return[ci[0]*wr,ci[1]*wr,ci[2]*wr,ci[3]*wr]}($,r,O,o.tilePixelRatio),ve=$.get("text-max-angle")/180*Math.PI,Oe=$.get("text-rotation-alignment")!=="viewport"&&$.get("symbol-placement")!=="point",hr=$.get("icon-rotation-alignment")==="map"&&$.get("symbol-placement")!=="point",Me=$.get("symbol-placement"),Le=kt/2,Ye=$.get("icon-text-fit");let $e;f&&Ye!=="none"&&(o.allowVerticalPlacement&&l.vertical&&($e=cC(f,l.vertical,Ye,$.get("icon-text-fit-padding"),Y,lt)),ot&&(f=cC(f,ot,Ye,$.get("icon-text-fit-padding"),Y,lt)));const Ve=(ue,er)=>{er.x<0||er.x>=_i||er.y<0||er.y>=_i||function(Ze,wr,gi,ci,Fn,ca,$n,Sn,xs,Bs,Cs,Ri,In,as,qn,Fs,Gn,ko,Gs,Jr,bi,Si,vo,Di,dh){const jA=Ze.addToLineVertexArray(wr,gi);let KA,ua,Mo,Mn,Fl=0,Nd=0,KC=0,$C=0,jy=-1,Ky=-1;const Sl={};let qC=fd("");if(Ze.allowVerticalPlacement&&ci.vertical){const As=Sn.layout.get("text-rotate").evaluate(bi,{},Di)+90;Mo=new cg(xs,wr,Bs,Cs,Ri,ci.vertical,In,as,qn,As),$n&&(Mn=new cg(xs,wr,Bs,Cs,Ri,$n,Gn,ko,qn,As))}if(Fn){const As=Sn.layout.get("icon-rotate").evaluate(bi,{}),Do=Sn.layout.get("icon-text-fit")!=="none",Zc=MC(Fn,As,vo,Do),Za=$n?MC($n,As,vo,Do):void 0;ua=new cg(xs,wr,Bs,Cs,Ri,Fn,Gn,ko,!1,As),Fl=4*Zc.length;const Wc=Ze.iconSizeData;let $A=null;Wc.kind==="source"?($A=[VA*Sn.layout.get("icon-size").evaluate(bi,{})],$A[0]>oc&&vt(`${Ze.layerIds[0]}: Value for "icon-size" is >= ${Ld}. Reduce your "icon-size".`)):Wc.kind==="composite"&&($A=[VA*Si.compositeIconSizes[0].evaluate(bi,{},Di),VA*Si.compositeIconSizes[1].evaluate(bi,{},Di)],($A[0]>oc||$A[1]>oc)&&vt(`${Ze.layerIds[0]}: Value for "icon-size" is >= ${Ld}. Reduce your "icon-size".`)),Ze.addSymbols(Ze.icon,Zc,$A,Jr,Gs,bi,p.ah.none,wr,jA.lineStartIndex,jA.lineLength,-1,Di),jy=Ze.icon.placedSymbolArray.length-1,Za&&(Nd=4*Za.length,Ze.addSymbols(Ze.icon,Za,$A,Jr,Gs,bi,p.ah.vertical,wr,jA.lineStartIndex,jA.lineLength,-1,Di),Ky=Ze.icon.placedSymbolArray.length-1)}const GC=Object.keys(ci.horizontal);for(const As of GC){const Do=ci.horizontal[As];if(!KA){qC=fd(Do.text);const Za=Sn.layout.get("text-rotate").evaluate(bi,{},Di);KA=new cg(xs,wr,Bs,Cs,Ri,Do,In,as,qn,Za)}const Zc=Do.positionedLines.length===1;if(KC+=RC(Ze,wr,Do,ca,Sn,qn,bi,Fs,jA,ci.vertical?p.ah.horizontal:p.ah.horizontalOnly,Zc?GC:[As],Sl,jy,Si,Di),Zc)break}ci.vertical&&($C+=RC(Ze,wr,ci.vertical,ca,Sn,qn,bi,Fs,jA,p.ah.vertical,["vertical"],Sl,Ky,Si,Di));const zz=KA?KA.boxStartIndex:Ze.collisionBoxArray.length,Hz=KA?KA.boxEndIndex:Ze.collisionBoxArray.length,Vz=Mo?Mo.boxStartIndex:Ze.collisionBoxArray.length,jz=Mo?Mo.boxEndIndex:Ze.collisionBoxArray.length,Kz=ua?ua.boxStartIndex:Ze.collisionBoxArray.length,$z=ua?ua.boxEndIndex:Ze.collisionBoxArray.length,qz=Mn?Mn.boxStartIndex:Ze.collisionBoxArray.length,Gz=Mn?Mn.boxEndIndex:Ze.collisionBoxArray.length;let Xa=-1;const hg=(As,Do)=>As&&As.circleDiameter?Math.max(As.circleDiameter,Do):Do;Xa=hg(KA,Xa),Xa=hg(Mo,Xa),Xa=hg(ua,Xa),Xa=hg(Mn,Xa);const XC=Xa>-1?1:0;XC&&(Xa*=dh/fn),Ze.glyphOffsetArray.length>=ch.MAX_GLYPHS&&vt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),bi.sortKey!==void 0&&Ze.addToSortKeyRanges(Ze.symbolInstances.length,bi.sortKey);const Xz=OC(Sn,bi,Di),[Zz,Wz]=function(As,Do){const Zc=As.length,Za=Do==null?void 0:Do.values;if((Za==null?void 0:Za.length)>0)for(let Wc=0;Wc<Za.length;Wc+=2){const $A=Za[Wc+1];As.emplaceBack(p.aq[Za[Wc]],$A[0],$A[1])}return[Zc,As.length]}(Ze.textAnchorOffsets,Xz);Ze.symbolInstances.emplaceBack(wr.x,wr.y,Sl.right>=0?Sl.right:-1,Sl.center>=0?Sl.center:-1,Sl.left>=0?Sl.left:-1,Sl.vertical||-1,jy,Ky,qC,zz,Hz,Vz,jz,Kz,$z,qz,Gz,Bs,KC,$C,Fl,Nd,XC,0,In,Xa,Zz,Wz)}(o,er,ue,l,f,y,$e,o.layers[0],o.collisionBoxArray,r.index,r.sourceLayerIndex,o.index,wt,[zt,zt,zt,zt],Oe,U,Kt,se,hr,Y,r,b,D,O,x)};if(Me==="line")for(const ue of TC(r.geometry,0,0,_i,_i)){const er=Qz(ue,kt,ve,l.vertical||ot,f,24,Ft,o.overscaling,_i);for(const Ze of er)ot&&Oz(o,ot.text,Le,Ze)||Ve(ue,Ze)}else if(Me==="line-center"){for(const ue of r.geometry)if(ue.length>1){const er=Lz(ue,ve,l.vertical||ot,f,24,Ft);er&&Ve(ue,er)}}else if(r.type==="Polygon")for(const ue of so(r.geometry,0)){const er=Mz(ue,16);Ve(ue[0],new Ac(er.x,er.y,0))}else if(r.type==="LineString")for(const ue of r.geometry)Ve(ue,new Ac(ue[0].x,ue[0].y,0));else if(r.type==="Point")for(const ue of r.geometry)for(const er of ue)Ve([er],new Ac(er.x,er.y,0))}function RC(o,r,l,f,y,b,x,I,U,D,O,z,$,Y,ot){const lt=function(Kt,kt,zt,se,ve,Oe,hr,Me){const Le=se.layout.get("text-rotate").evaluate(Oe,{})*Math.PI/180,Ye=[];for(const $e of kt.positionedLines)for(const Ve of $e.positionedGlyphs){if(!Ve.rect)continue;const ue=Ve.rect||{};let er=rC+1,Ze=!0,wr=1,gi=0;const ci=(ve||Me)&&Ve.vertical,Fn=Ve.metrics.advance*Ve.scale/2;if(Me&&kt.verticalizable&&(gi=$e.lineOffset/2-(Ve.imageName?-(fn-Ve.metrics.width*Ve.scale)/2:(Ve.scale-1)*fn)),Ve.imageName){const Jr=hr[Ve.imageName];Ze=Jr.sdf,wr=Jr.pixelRatio,er=qs/wr}const ca=ve?[Ve.x+Fn,Ve.y]:[0,0];let $n=ve?[0,0]:[Ve.x+Fn+zt[0],Ve.y+zt[1]-gi],Sn=[0,0];ci&&(Sn=$n,$n=[0,0]);const xs=Ve.metrics.isDoubleResolution?2:1,Bs=(Ve.metrics.left-er)*Ve.scale-Fn+$n[0],Cs=(-Ve.metrics.top-er)*Ve.scale+$n[1],Ri=Bs+ue.w/xs*Ve.scale/wr,In=Cs+ue.h/xs*Ve.scale/wr,as=new E(Bs,Cs),qn=new E(Ri,Cs),Fs=new E(Bs,In),Gn=new E(Ri,In);if(ci){const Jr=new E(-Fn,Fn-Ud),bi=-Math.PI/2,Si=fn/2-Fn,vo=new E(5-Ud-Si,-(Ve.imageName?Si:0)),Di=new E(...Sn);as._rotateAround(bi,Jr)._add(vo)._add(Di),qn._rotateAround(bi,Jr)._add(vo)._add(Di),Fs._rotateAround(bi,Jr)._add(vo)._add(Di),Gn._rotateAround(bi,Jr)._add(vo)._add(Di)}if(Le){const Jr=Math.sin(Le),bi=Math.cos(Le),Si=[bi,-Jr,Jr,bi];as._matMult(Si),qn._matMult(Si),Fs._matMult(Si),Gn._matMult(Si)}const ko=new E(0,0),Gs=new E(0,0);Ye.push({tl:as,tr:qn,bl:Fs,br:Gn,tex:ue,writingMode:kt.writingMode,glyphOffset:ca,sectionIndex:Ve.sectionIndex,isSDF:Ze,pixelOffsetTL:ko,pixelOffsetBR:Gs,minFontScaleX:0,minFontScaleY:0})}return Ye}(0,l,I,y,b,x,f,o.allowVerticalPlacement),wt=o.textSizeData;let Ft=null;wt.kind==="source"?(Ft=[VA*y.layout.get("text-size").evaluate(x,{})],Ft[0]>oc&&vt(`${o.layerIds[0]}: Value for "text-size" is >= ${Ld}. Reduce your "text-size".`)):wt.kind==="composite"&&(Ft=[VA*Y.compositeTextSizes[0].evaluate(x,{},ot),VA*Y.compositeTextSizes[1].evaluate(x,{},ot)],(Ft[0]>oc||Ft[1]>oc)&&vt(`${o.layerIds[0]}: Value for "text-size" is >= ${Ld}. Reduce your "text-size".`)),o.addSymbols(o.text,lt,Ft,I,b,x,D,r,U.lineStartIndex,U.lineLength,$,ot);for(const Kt of O)z[Kt]=o.text.placedSymbolArray.length-1;return 4*lt.length}function zC(o){for(const r in o)return o[r];return null}function Oz(o,r,l,f){const y=o.compareText;if(r in y){const b=y[r];for(let x=b.length-1;x>=0;x--)if(f.dist(b[x])<l)return!0}else y[r]=[];return y[r].push(f),!1}const HC=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Dy{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,f]=new Uint8Array(r,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const y=f>>4;if(y!==1)throw new Error(`Got v${y} data when expected v1.`);const b=HC[15&f];if(!b)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(r,2,1),[I]=new Uint32Array(r,4,1);return new Dy(I,x,b,r)}constructor(r,l=64,f=Float64Array,y){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=f,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const b=HC.indexOf(this.ArrayType),x=2*r*this.ArrayType.BYTES_PER_ELEMENT,I=r*this.IndexArrayType.BYTES_PER_ELEMENT,U=(8-I%8)%8;if(b<0)throw new Error(`Unexpected typed array class: ${f}.`);y&&y instanceof ArrayBuffer?(this.data=y,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+I+U,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+x+I+U),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+I+U,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+b]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=r)}add(r,l){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=r,this.coords[this._pos++]=l,f}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return Ny(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,l,f,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:b,coords:x,nodeSize:I}=this,U=[0,b.length-1,0],D=[];for(;U.length;){const O=U.pop()||0,z=U.pop()||0,$=U.pop()||0;if(z-$<=I){for(let wt=$;wt<=z;wt++){const Ft=x[2*wt],Kt=x[2*wt+1];Ft>=r&&Ft<=f&&Kt>=l&&Kt<=y&&D.push(b[wt])}continue}const Y=$+z>>1,ot=x[2*Y],lt=x[2*Y+1];ot>=r&&ot<=f&&lt>=l&&lt<=y&&D.push(b[Y]),(O===0?r<=ot:l<=lt)&&(U.push($),U.push(Y-1),U.push(1-O)),(O===0?f>=ot:y>=lt)&&(U.push(Y+1),U.push(z),U.push(1-O))}return D}within(r,l,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:b,nodeSize:x}=this,I=[0,y.length-1,0],U=[],D=f*f;for(;I.length;){const O=I.pop()||0,z=I.pop()||0,$=I.pop()||0;if(z-$<=x){for(let wt=$;wt<=z;wt++)jC(b[2*wt],b[2*wt+1],r,l)<=D&&U.push(y[wt]);continue}const Y=$+z>>1,ot=b[2*Y],lt=b[2*Y+1];jC(ot,lt,r,l)<=D&&U.push(y[Y]),(O===0?r-f<=ot:l-f<=lt)&&(I.push($),I.push(Y-1),I.push(1-O)),(O===0?r+f>=ot:l+f>=lt)&&(I.push(Y+1),I.push(z),I.push(1-O))}return U}}function Ny(o,r,l,f,y,b){if(y-f<=l)return;const x=f+y>>1;VC(o,r,x,f,y,b),Ny(o,r,l,f,x-1,1-b),Ny(o,r,l,x+1,y,1-b)}function VC(o,r,l,f,y,b){for(;y>f;){if(y-f>600){const D=y-f+1,O=l-f+1,z=Math.log(D),$=.5*Math.exp(2*z/3),Y=.5*Math.sqrt(z*$*(D-$)/D)*(O-D/2<0?-1:1);VC(o,r,l,Math.max(f,Math.floor(l-O*$/D+Y)),Math.min(y,Math.floor(l+(D-O)*$/D+Y)),b)}const x=r[2*l+b];let I=f,U=y;for(Md(o,r,f,l),r[2*y+b]>x&&Md(o,r,f,y);I<U;){for(Md(o,r,I,U),I++,U--;r[2*I+b]<x;)I++;for(;r[2*U+b]>x;)U--}r[2*f+b]===x?Md(o,r,f,U):(U++,Md(o,r,U,y)),U<=l&&(f=U+1),l<=U&&(y=U-1)}}function Md(o,r,l,f){Oy(o,l,f),Oy(r,2*l,2*f),Oy(r,2*l+1,2*f+1)}function Oy(o,r,l){const f=o[r];o[r]=o[l],o[l]=f}function jC(o,r,l,f){const y=o-l,b=r-f;return y*y+b*b}var Ry;p.bf=void 0,(Ry=p.bf||(p.bf={})).create="create",Ry.load="load",Ry.fullLoad="fullLoad";let ug=null,Dd=[];const zy=1e3/60,Hy="loadTime",Vy="fullLoadTime",Rz={mark(o){performance.mark(o)},frame(o){const r=o;ug!=null&&Dd.push(r-ug),ug=r},clearMetrics(){ug=null,Dd=[],performance.clearMeasures(Hy),performance.clearMeasures(Vy);for(const o in p.bf)performance.clearMarks(p.bf[o])},getPerformanceMetrics(){performance.measure(Hy,p.bf.create,p.bf.load),performance.measure(Vy,p.bf.create,p.bf.fullLoad);const o=performance.getEntriesByName(Hy)[0].duration,r=performance.getEntriesByName(Vy)[0].duration,l=Dd.length,f=1/(Dd.reduce((b,x)=>b+x,0)/l/1e3),y=Dd.filter(b=>b>zy).reduce((b,x)=>b+(x-zy)/zy,0);return{loadTime:o,fullLoadTime:r,fps:f,percentDroppedFrames:y/(l+y)*100,totalFrames:l}}};p.$=class extends G{},p.A=nh,p.B=dd,p.C=function(o){if(Vt==null){const r=o.navigator?o.navigator.userAgent:null;Vt=!!o.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Vt},p.D=e,p.E=oe,p.F=class{constructor(o,r){this.target=o,this.mapId=r,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Uz(()=>this.process()),this.subscription=function(l,f,y,b){return l.addEventListener(f,y,!1),{unsubscribe:()=>{l.removeEventListener(f,y,!1)}}}(this.target,"message",l=>this.receive(l)),this.globalScope=$t(self)?o:window}registerMessageHandler(o,r){this.messageHandlers[o]=r}sendAsync(o,r){return new Promise((l,f)=>{const y=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[y]={resolve:l,reject:f},r&&r.signal.addEventListener("abort",()=>{delete this.resolveRejects[y];const I={id:y,type:"<cancel>",origin:location.origin,targetMapId:o.targetMapId,sourceMapId:this.mapId};this.target.postMessage(I)},{once:!0});const b=[],x=Object.assign(Object.assign({},o),{id:y,sourceMapId:this.mapId,origin:location.origin,data:wl(o.data,b)});this.target.postMessage(x,{transfer:b})})}receive(o){const r=o.data,l=r.id;if(!(r.origin!=="file://"&&location.origin!=="file://"&&r.origin!=="resource://android"&&location.origin!=="resource://android"&&r.origin!==location.origin||r.targetMapId&&this.mapId!==r.targetMapId)){if(r.type==="<cancel>"){delete this.tasks[l];const f=this.abortControllers[l];return delete this.abortControllers[l],void(f&&f.abort())}if($t(self)||r.mustQueue)return this.tasks[l]=r,this.taskQueue.push(l),void this.invoker.trigger();this.processTask(l,r)}}process(){if(this.taskQueue.length===0)return;const o=this.taskQueue.shift(),r=this.tasks[o];delete this.tasks[o],this.taskQueue.length>0&&this.invoker.trigger(),r&&this.processTask(o,r)}processTask(o,r){return A(this,void 0,void 0,function*(){if(r.type==="<response>"){const y=this.resolveRejects[o];return delete this.resolveRejects[o],y?void(r.error?y.reject(PA(r.error)):y.resolve(PA(r.data))):void 0}if(!this.messageHandlers[r.type])return void this.completeTask(o,new Error(`Could not find a registered handler for ${r.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const l=PA(r.data),f=new AbortController;this.abortControllers[o]=f;try{const y=yield this.messageHandlers[r.type](r.sourceMapId,l,f);this.completeTask(o,null,y)}catch(y){this.completeTask(o,y)}})}completeTask(o,r,l){const f=[];delete this.abortControllers[o];const y={id:o,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:r?wl(r):null,data:wl(l,f)};this.target.postMessage(y,{transfer:f})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},p.G=Ot,p.H=function(){var o=new nh(16);return nh!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},p.I=By,p.J=function(o,r,l){var f,y,b,x,I,U,D,O,z,$,Y,ot,lt=l[0],wt=l[1],Ft=l[2];return r===o?(o[12]=r[0]*lt+r[4]*wt+r[8]*Ft+r[12],o[13]=r[1]*lt+r[5]*wt+r[9]*Ft+r[13],o[14]=r[2]*lt+r[6]*wt+r[10]*Ft+r[14],o[15]=r[3]*lt+r[7]*wt+r[11]*Ft+r[15]):(y=r[1],b=r[2],x=r[3],I=r[4],U=r[5],D=r[6],O=r[7],z=r[8],$=r[9],Y=r[10],ot=r[11],o[0]=f=r[0],o[1]=y,o[2]=b,o[3]=x,o[4]=I,o[5]=U,o[6]=D,o[7]=O,o[8]=z,o[9]=$,o[10]=Y,o[11]=ot,o[12]=f*lt+I*wt+z*Ft+r[12],o[13]=y*lt+U*wt+$*Ft+r[13],o[14]=b*lt+D*wt+Y*Ft+r[14],o[15]=x*lt+O*wt+ot*Ft+r[15]),o},p.K=function(o,r,l){var f=l[0],y=l[1],b=l[2];return o[0]=r[0]*f,o[1]=r[1]*f,o[2]=r[2]*f,o[3]=r[3]*f,o[4]=r[4]*y,o[5]=r[5]*y,o[6]=r[6]*y,o[7]=r[7]*y,o[8]=r[8]*b,o[9]=r[9]*b,o[10]=r[10]*b,o[11]=r[11]*b,o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},p.L=B5,p.M=function(o,r){const l={};for(let f=0;f<r.length;f++){const y=r[f];y in o&&(l[y]=o[y])}return l},p.N=ac,p.O=vC,p.P=E,p.Q=wC,p.R=Lo,p.S=Qo,p.T=kA,p.U=j,p.V=rt,p.W=Yt,p.X=_i,p.Y=M,p.Z=Qd,p._=A,p.a=_t,p.a$=function(o,r){return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},p.a0=en,p.a1=Qy,p.a2=ce,p.a3=o=>{const r=window.document.createElement("video");return r.muted=!0,new Promise(l=>{r.onloadstart=()=>{l(r)};for(const f of o){const y=window.document.createElement("source");be(f)||(r.crossOrigin="Anonymous"),y.src=f,r.appendChild(y)}})},p.a4=function(){return ft++},p.a5=$r,p.a6=ch,p.a7=Hn,p.a8=RA,p.a9=FC,p.aA=function(o){if(o.type==="custom")return new Tz(o);switch(o.type){case"background":return new Sz(o);case"circle":return new p7(o);case"fill":return new U7(o);case"fill-extrusion":return new $7(o);case"heatmap":return new g7(o);case"hillshade":return new y7(o);case"line":return new tz(o);case"raster":return new Ez(o);case"symbol":return new og(o)}},p.aB=at,p.aC=function(o,r){if(!o)return[{command:"setStyle",args:[r]}];let l=[];try{if(!Ae(o.version,r.version))return[{command:"setStyle",args:[r]}];Ae(o.center,r.center)||l.push({command:"setCenter",args:[r.center]}),Ae(o.zoom,r.zoom)||l.push({command:"setZoom",args:[r.zoom]}),Ae(o.bearing,r.bearing)||l.push({command:"setBearing",args:[r.bearing]}),Ae(o.pitch,r.pitch)||l.push({command:"setPitch",args:[r.pitch]}),Ae(o.sprite,r.sprite)||l.push({command:"setSprite",args:[r.sprite]}),Ae(o.glyphs,r.glyphs)||l.push({command:"setGlyphs",args:[r.glyphs]}),Ae(o.transition,r.transition)||l.push({command:"setTransition",args:[r.transition]}),Ae(o.light,r.light)||l.push({command:"setLight",args:[r.light]}),Ae(o.terrain,r.terrain)||l.push({command:"setTerrain",args:[r.terrain]}),Ae(o.sky,r.sky)||l.push({command:"setSky",args:[r.sky]}),Ae(o.projection,r.projection)||l.push({command:"setProjection",args:[r.projection]});const f={},y=[];(function(x,I,U,D){let O;for(O in I=I||{},x=x||{})Object.prototype.hasOwnProperty.call(x,O)&&(Object.prototype.hasOwnProperty.call(I,O)||Ce(O,U,D));for(O in I)Object.prototype.hasOwnProperty.call(I,O)&&(Object.prototype.hasOwnProperty.call(x,O)?Ae(x[O],I[O])||(x[O].type==="geojson"&&I[O].type==="geojson"&&Xe(x,I,O)?ge(U,{command:"setGeoJSONSourceData",args:[O,I[O].data]}):He(O,I,U,D)):Se(O,I,U))})(o.sources,r.sources,y,f);const b=[];o.layers&&o.layers.forEach(x=>{"source"in x&&f[x.source]?l.push({command:"removeLayer",args:[x.id]}):b.push(x)}),l=l.concat(y),function(x,I,U){I=I||[];const D=(x=x||[]).map(yr),O=I.map(yr),z=x.reduce(br,{}),$=I.reduce(br,{}),Y=D.slice(),ot=Object.create(null);let lt,wt,Ft,Kt,kt;for(let zt=0,se=0;zt<D.length;zt++)lt=D[zt],Object.prototype.hasOwnProperty.call($,lt)?se++:(ge(U,{command:"removeLayer",args:[lt]}),Y.splice(Y.indexOf(lt,se),1));for(let zt=0,se=0;zt<O.length;zt++)lt=O[O.length-1-zt],Y[Y.length-1-zt]!==lt&&(Object.prototype.hasOwnProperty.call(z,lt)?(ge(U,{command:"removeLayer",args:[lt]}),Y.splice(Y.lastIndexOf(lt,Y.length-se),1)):se++,Kt=Y[Y.length-zt],ge(U,{command:"addLayer",args:[$[lt],Kt]}),Y.splice(Y.length-zt,0,lt),ot[lt]=!0);for(let zt=0;zt<O.length;zt++)if(lt=O[zt],wt=z[lt],Ft=$[lt],!ot[lt]&&!Ae(wt,Ft))if(Ae(wt.source,Ft.source)&&Ae(wt["source-layer"],Ft["source-layer"])&&Ae(wt.type,Ft.type)){for(kt in nr(wt.layout,Ft.layout,U,lt,null,"setLayoutProperty"),nr(wt.paint,Ft.paint,U,lt,null,"setPaintProperty"),Ae(wt.filter,Ft.filter)||ge(U,{command:"setFilter",args:[lt,Ft.filter]}),Ae(wt.minzoom,Ft.minzoom)&&Ae(wt.maxzoom,Ft.maxzoom)||ge(U,{command:"setLayerZoomRange",args:[lt,Ft.minzoom,Ft.maxzoom]}),wt)Object.prototype.hasOwnProperty.call(wt,kt)&&kt!=="layout"&&kt!=="paint"&&kt!=="filter"&&kt!=="metadata"&&kt!=="minzoom"&&kt!=="maxzoom"&&(kt.indexOf("paint.")===0?nr(wt[kt],Ft[kt],U,lt,kt.slice(6),"setPaintProperty"):Ae(wt[kt],Ft[kt])||ge(U,{command:"setLayerProperty",args:[lt,kt,Ft[kt]]}));for(kt in Ft)Object.prototype.hasOwnProperty.call(Ft,kt)&&!Object.prototype.hasOwnProperty.call(wt,kt)&&kt!=="layout"&&kt!=="paint"&&kt!=="filter"&&kt!=="metadata"&&kt!=="minzoom"&&kt!=="maxzoom"&&(kt.indexOf("paint.")===0?nr(wt[kt],Ft[kt],U,lt,kt.slice(6),"setPaintProperty"):Ae(wt[kt],Ft[kt])||ge(U,{command:"setLayerProperty",args:[lt,kt,Ft[kt]]}))}else ge(U,{command:"removeLayer",args:[lt]}),Kt=Y[Y.lastIndexOf(lt)+1],ge(U,{command:"addLayer",args:[Ft,Kt]})}(b,r.layers,l)}catch(f){console.warn("Unable to compute style diff:",f),l=[{command:"setStyle",args:[r]}]}return l},p.aD=function(o){const r=[],l=o.id;return l===void 0&&r.push({message:`layers.${l}: missing required property "id"`}),o.render===void 0&&r.push({message:`layers.${l}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&r.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),r},p.aE=function o(r,l){if(Array.isArray(r)){if(!Array.isArray(l)||r.length!==l.length)return!1;for(let f=0;f<r.length;f++)if(!o(r[f],l[f]))return!1;return!0}if(typeof r=="object"&&r!==null&&l!==null){if(typeof l!="object"||Object.keys(r).length!==Object.keys(l).length)return!1;for(const f in r)if(!o(r[f],l[f]))return!1;return!0}return r===l},p.aF=Nt,p.aG=jt,p.aH=class extends NA{constructor(o,r){super(o,r),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},p.aI=jc,p.aJ=class extends NA{constructor(o,r){super(o,r),this.current=$c}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let r=1;r<16;r++)if(o[r]!==this.current[r]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},p.aK=Kc,p.aL=Yu,p.aM=dr,p.aN=class extends NA{constructor(o,r){super(o,r),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},p.aO=class extends NA{constructor(o,r){super(o,r),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},p.aP=function(o,r,l,f,y,b,x){var I=1/(r-l),U=1/(f-y),D=1/(b-x);return o[0]=-2*I,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*U,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*D,o[11]=0,o[12]=(r+l)*I,o[13]=(y+f)*U,o[14]=(x+b)*D,o[15]=1,o},p.aQ=d7,p.aR=class extends ee{},p.aS=nz,p.aT=class extends Xt{},p.aU=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},p.aV=E5,p.aW=xn,p.aX=ss,p.aY=class extends Ue{},p.aZ=function(o,r){return o[0]===r[0]&&o[1]===r[1]&&o[2]===r[2]&&o[3]===r[3]&&o[4]===r[4]&&o[5]===r[5]&&o[6]===r[6]&&o[7]===r[7]&&o[8]===r[8]&&o[9]===r[9]&&o[10]===r[10]&&o[11]===r[11]&&o[12]===r[12]&&o[13]===r[13]&&o[14]===r[14]&&o[15]===r[15]},p.a_=function(o,r){var l=o[0],f=o[1],y=o[2],b=o[3],x=o[4],I=o[5],U=o[6],D=o[7],O=o[8],z=o[9],$=o[10],Y=o[11],ot=o[12],lt=o[13],wt=o[14],Ft=o[15],Kt=r[0],kt=r[1],zt=r[2],se=r[3],ve=r[4],Oe=r[5],hr=r[6],Me=r[7],Le=r[8],Ye=r[9],$e=r[10],Ve=r[11],ue=r[12],er=r[13],Ze=r[14],wr=r[15];return Math.abs(l-Kt)<=bs*Math.max(1,Math.abs(l),Math.abs(Kt))&&Math.abs(f-kt)<=bs*Math.max(1,Math.abs(f),Math.abs(kt))&&Math.abs(y-zt)<=bs*Math.max(1,Math.abs(y),Math.abs(zt))&&Math.abs(b-se)<=bs*Math.max(1,Math.abs(b),Math.abs(se))&&Math.abs(x-ve)<=bs*Math.max(1,Math.abs(x),Math.abs(ve))&&Math.abs(I-Oe)<=bs*Math.max(1,Math.abs(I),Math.abs(Oe))&&Math.abs(U-hr)<=bs*Math.max(1,Math.abs(U),Math.abs(hr))&&Math.abs(D-Me)<=bs*Math.max(1,Math.abs(D),Math.abs(Me))&&Math.abs(O-Le)<=bs*Math.max(1,Math.abs(O),Math.abs(Le))&&Math.abs(z-Ye)<=bs*Math.max(1,Math.abs(z),Math.abs(Ye))&&Math.abs($-$e)<=bs*Math.max(1,Math.abs($),Math.abs($e))&&Math.abs(Y-Ve)<=bs*Math.max(1,Math.abs(Y),Math.abs(Ve))&&Math.abs(ot-ue)<=bs*Math.max(1,Math.abs(ot),Math.abs(ue))&&Math.abs(lt-er)<=bs*Math.max(1,Math.abs(lt),Math.abs(er))&&Math.abs(wt-Ze)<=bs*Math.max(1,Math.abs(wt),Math.abs(Ze))&&Math.abs(Ft-wr)<=bs*Math.max(1,Math.abs(Ft),Math.abs(wr))},p.aa=function(o){const r={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,f,y,b)=>{const x=y||b;return r[f]=!x||x.toLowerCase(),""}),r["max-age"]){const l=parseInt(r["max-age"],10);isNaN(l)?delete r["max-age"]:r["max-age"]=l}return r},p.ab=function(o,r){const l=[];for(const f in o)f in r||l.push(f);return l},p.ac=Et,p.ad=function(o,r,l){var f=Math.sin(l),y=Math.cos(l),b=r[0],x=r[1],I=r[2],U=r[3],D=r[4],O=r[5],z=r[6],$=r[7];return r!==o&&(o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[0]=b*y+D*f,o[1]=x*y+O*f,o[2]=I*y+z*f,o[3]=U*y+$*f,o[4]=D*y-b*f,o[5]=O*y-x*f,o[6]=z*y-I*f,o[7]=$*y-U*f,o},p.ae=function(o){var r=new nh(16);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],r},p.af=Wf,p.ag=function(o,r){let l=0,f=0;if(o.kind==="constant")f=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:y,minZoom:b,maxZoom:x}=o,I=y?Et(lr.interpolationFactor(y,r,b,x),0,1):0;o.kind==="camera"?f=wn.number(o.minSize,o.maxSize,I):l=I}return{uSizeT:l,uSize:f}},p.ai=function(o,{uSize:r,uSizeT:l},{lowerSize:f,upperSize:y}){return o.kind==="source"?f/VA:o.kind==="composite"?wn.number(f/VA,y/VA,l):r},p.aj=Iy,p.ak=function(o,r,l,f){const y=r.y-o.y,b=r.x-o.x,x=f.y-l.y,I=f.x-l.x,U=x*b-I*y;if(U===0)return null;const D=(I*(o.y-l.y)-x*(o.x-l.x))/U;return new E(o.x+D*b,o.y+D*y)},p.al=TC,p.am=eh,p.an=cy,p.ao=function(o){let r=1/0,l=1/0,f=-1/0,y=-1/0;for(const b of o)r=Math.min(r,b.x),l=Math.min(l,b.y),f=Math.max(f,b.x),y=Math.max(y,b.y);return[r,l,f,y]},p.ap=fn,p.ar=Sy,p.as=function(o,r){var l=r[0],f=r[1],y=r[2],b=r[3],x=r[4],I=r[5],U=r[6],D=r[7],O=r[8],z=r[9],$=r[10],Y=r[11],ot=r[12],lt=r[13],wt=r[14],Ft=r[15],Kt=l*I-f*x,kt=l*U-y*x,zt=l*D-b*x,se=f*U-y*I,ve=f*D-b*I,Oe=y*D-b*U,hr=O*lt-z*ot,Me=O*wt-$*ot,Le=O*Ft-Y*ot,Ye=z*wt-$*lt,$e=z*Ft-Y*lt,Ve=$*Ft-Y*wt,ue=Kt*Ve-kt*$e+zt*Ye+se*Le-ve*Me+Oe*hr;return ue?(o[0]=(I*Ve-U*$e+D*Ye)*(ue=1/ue),o[1]=(y*$e-f*Ve-b*Ye)*ue,o[2]=(lt*Oe-wt*ve+Ft*se)*ue,o[3]=($*ve-z*Oe-Y*se)*ue,o[4]=(U*Le-x*Ve-D*Me)*ue,o[5]=(l*Ve-y*Le+b*Me)*ue,o[6]=(wt*zt-ot*Oe-Ft*kt)*ue,o[7]=(O*Oe-$*zt+Y*kt)*ue,o[8]=(x*$e-I*Le+D*hr)*ue,o[9]=(f*Le-l*$e-b*hr)*ue,o[10]=(ot*ve-lt*zt+Ft*Kt)*ue,o[11]=(z*zt-O*ve-Y*Kt)*ue,o[12]=(I*Me-x*Ye-U*hr)*ue,o[13]=(l*Ye-f*Me+y*hr)*ue,o[14]=(lt*kt-ot*se-wt*Kt)*ue,o[15]=(O*se-z*kt+$*Kt)*ue,o):null},p.at=My,p.au=Fy,p.av=Dy,p.aw=function(){const o={},r=nt.$version;for(const l in nt.$root){const f=nt.$root[l];if(f.required){let y=null;y=l==="version"?r:f.type==="array"?[]:{},y!=null&&(o[l]=y)}}return o},p.ax=Vn,p.ay=Jt,p.az=function(o){o=o.slice();const r=Object.create(null);for(let l=0;l<o.length;l++)r[o[l].id]=o[l];for(let l=0;l<o.length;l++)"ref"in o[l]&&(o[l]=Ke(o[l],r[o[l].ref]));return o},p.b=Zt,p.b0=function(o,r,l){return o[0]=r[0]*l[0],o[1]=r[1]*l[1],o[2]=r[2]*l[2],o[3]=r[3]*l[3],o},p.b1=function(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]+o[3]*r[3]},p.b2=Tt,p.b3=xC,p.b4=_C,p.b5=function(o,r,l,f,y){var b,x=1/Math.tan(r/2);return o[0]=x/l,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=x,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,y!=null&&y!==1/0?(o[10]=(y+f)*(b=1/(f-y)),o[14]=2*y*f*b):(o[10]=-1,o[14]=-2*f),o},p.b6=function(o,r,l){var f=Math.sin(l),y=Math.cos(l),b=r[4],x=r[5],I=r[6],U=r[7],D=r[8],O=r[9],z=r[10],$=r[11];return r!==o&&(o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[4]=b*y+D*f,o[5]=x*y+O*f,o[6]=I*y+z*f,o[7]=U*y+$*f,o[8]=D*y-b*f,o[9]=O*y-x*f,o[10]=z*y-I*f,o[11]=$*y-U*f,o},p.b7=ht,p.b8=Bt,p.b9=function(o){return o*Math.PI/180},p.bA=function(o){return o.message===et},p.bB=Qn,p.bC=fo,p.ba=function(o,r){const{x:l,y:f}=Qd.fromLngLat(r);return!(o<0||o>25||f<0||f>=1||l<0||l>=1)},p.bb=function(o,r){return o[0]=r[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=r[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=r[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},p.bc=class extends Z{},p.bd=Py,p.be=Rz,p.bg=Rt,p.bh=function(o,r){_t.REGISTERED_PROTOCOLS[o]=r},p.bi=function(o){delete _t.REGISTERED_PROTOCOLS[o]},p.bj=function(o,r){const l={};for(let y=0;y<o.length;y++){const b=r&&r[o[y].id]||Ou(o[y]);r&&(r[o[y].id]=b);let x=l[b];x||(x=l[b]=[]),x.push(o[y])}const f=[];for(const y in l)f.push(l[y]);return f},p.bk=Re,p.bl=CC,p.bm=SC,p.bn=nC,p.bo=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=_i/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const r=o.bucket.layers[0],l=r.layout,f=r._unevaluatedLayout._values,y={layoutIconSize:f["icon-size"].possiblyEvaluate(new ii(o.bucket.zoom+1),o.canonical),layoutTextSize:f["text-size"].possiblyEvaluate(new ii(o.bucket.zoom+1),o.canonical),textMaxSize:f["text-size"].possiblyEvaluate(new ii(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:D,maxZoom:O}=o.bucket.textSizeData;y.compositeTextSizes=[f["text-size"].possiblyEvaluate(new ii(D),o.canonical),f["text-size"].possiblyEvaluate(new ii(O),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:D,maxZoom:O}=o.bucket.iconSizeData;y.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new ii(D),o.canonical),f["icon-size"].possiblyEvaluate(new ii(O),o.canonical)]}const b=l.get("text-line-height")*fn,x=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",I=l.get("text-keep-upright"),U=l.get("text-size");for(const D of o.bucket.features){const O=l.get("text-font").evaluate(D,{},o.canonical).join(","),z=U.evaluate(D,{},o.canonical),$=y.layoutTextSize.evaluate(D,{},o.canonical),Y=y.layoutIconSize.evaluate(D,{},o.canonical),ot={horizontal:{},vertical:void 0},lt=D.text;let wt,Ft=[0,0];if(lt){const zt=lt.toString(),se=l.get("text-letter-spacing").evaluate(D,{},o.canonical)*fn,ve=pd(zt)?se:0,Oe=l.get("text-anchor").evaluate(D,{},o.canonical),hr=OC(r,D,o.canonical);if(!hr){const $e=l.get("text-radial-offset").evaluate(D,{},o.canonical);Ft=$e?NC(Oe,[$e*fn,ky]):l.get("text-offset").evaluate(D,{},o.canonical).map(Ve=>Ve*fn)}let Me=x?"center":l.get("text-justify").evaluate(D,{},o.canonical);const Le=l.get("symbol-placement")==="point"?l.get("text-max-width").evaluate(D,{},o.canonical)*fn:1/0,Ye=()=>{o.bucket.allowVerticalPlacement&&Oc(zt)&&(ot.vertical=ig(lt,o.glyphMap,o.glyphPositions,o.imagePositions,O,Le,b,Oe,"left",ve,Ft,p.ah.vertical,!0,$,z))};if(!x&&hr){const $e=new Set;if(Me==="auto")for(let ue=0;ue<hr.values.length;ue+=2)$e.add(My(hr.values[ue]));else $e.add(Me);let Ve=!1;for(const ue of $e)if(!ot.horizontal[ue])if(Ve)ot.horizontal[ue]=ot.horizontal[0];else{const er=ig(lt,o.glyphMap,o.glyphPositions,o.imagePositions,O,Le,b,"center",ue,ve,Ft,p.ah.horizontal,!1,$,z);er&&(ot.horizontal[ue]=er,Ve=er.positionedLines.length===1)}Ye()}else{Me==="auto"&&(Me=My(Oe));const $e=ig(lt,o.glyphMap,o.glyphPositions,o.imagePositions,O,Le,b,Oe,Me,ve,Ft,p.ah.horizontal,!1,$,z);$e&&(ot.horizontal[Me]=$e),Ye(),Oc(zt)&&x&&I&&(ot.vertical=ig(lt,o.glyphMap,o.glyphPositions,o.imagePositions,O,Le,b,Oe,Me,ve,Ft,p.ah.vertical,!1,$,z))}}let Kt=!1;if(D.icon&&D.icon.name){const zt=o.imageMap[D.icon.name];zt&&(wt=bz(o.imagePositions[D.icon.name],l.get("icon-offset").evaluate(D,{},o.canonical),l.get("icon-anchor").evaluate(D,{},o.canonical)),Kt=!!zt.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=Kt:o.bucket.sdfIcons!==Kt&&vt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(zt.pixelRatio!==o.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const kt=zC(ot.horizontal)||ot.vertical;o.bucket.iconsInText=!!kt&&kt.iconsInText,(kt||wt)&&Nz(o.bucket,D,ot,wt,o.imageMap,y,$,Y,Ft,Kt,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},p.bp=wy,p.bq=my,p.br=vy,p.bs=nc,p.bt=by,p.bu=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},p.bv=function(o,r,l,f,y){return A(this,void 0,void 0,function*(){if(rt())try{return yield Yt(o,r,l,f,y)}catch{}return function(b,x,I,U,D){const O=b.width,z=b.height;Wt&&me||(Wt=new OffscreenCanvas(O,z),me=Wt.getContext("2d",{willReadFrequently:!0})),Wt.width=O,Wt.height=z,me.drawImage(b,0,0,O,z);const $=me.getImageData(x,I,U,D);return me.clearRect(0,0,O,z),$.data}(o,r,l,f,y)})},p.bw=BC,p.bx=v,p.by=C,p.bz=X5,p.c=dt,p.d=o=>A(void 0,void 0,void 0,function*(){if(o.byteLength===0)return createImageBitmap(new ImageData(1,1));const r=new Blob([new Uint8Array(o)],{type:"image/png"});try{return createImageBitmap(r)}catch(l){throw new Error(`Could not load image because of ${l.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),p.e=xt,p.f=o=>new Promise((r,l)=>{const f=new Image;f.onload=()=>{r(f),URL.revokeObjectURL(f.src),f.onload=null,window.requestAnimationFrame(()=>{f.src=Ht})},f.onerror=()=>l(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const y=new Blob([new Uint8Array(o)],{type:"image/png"});f.src=o.byteLength?URL.createObjectURL(y):Ht}),p.g=St,p.h=(o,r)=>re(xt(o,{type:"json"}),r),p.i=$t,p.j=je,p.k=Qe,p.l=(o,r)=>re(xt(o,{type:"arrayBuffer"}),r),p.m=re,p.n=function(o){return new by(o).readFields(fz,[])},p.o=Bd,p.p=iC,p.q=m,p.r=na,p.s=be,p.t=Vu,p.u=To,p.v=nt,p.w=vt,p.x=function([o,r,l]){return r+=90,r*=Math.PI/180,l*=Math.PI/180,{x:o*Math.cos(r)*Math.sin(l),y:o*Math.sin(r)*Math.sin(l),z:o*Math.cos(l)}},p.y=wn,p.z=ii}),u("worker",["./shared"],function(p){class A{constructor(K){this.keyCache={},K&&this.replace(K)}replace(K){this._layerConfigs={},this._layers={},this.update(K,[])}update(K,q){for(const pt of K){this._layerConfigs[pt.id]=pt;const Pt=this._layers[pt.id]=p.aA(pt);Pt._featureFilter=p.a7(Pt.filter),this.keyCache[pt.id]&&delete this.keyCache[pt.id]}for(const pt of q)delete this.keyCache[pt],delete this._layerConfigs[pt],delete this._layers[pt];this.familiesBySource={};const At=p.bj(Object.values(this._layerConfigs),this.keyCache);for(const pt of At){const Pt=pt.map(qt=>this._layers[qt.id]),Dt=Pt[0];if(Dt.visibility==="none")continue;const Ut=Dt.source||"";let It=this.familiesBySource[Ut];It||(It=this.familiesBySource[Ut]={});const te=Dt.sourceLayer||"_geojsonTileLayer";let le=It[te];le||(le=It[te]=[]),le.push(Pt)}}}class v{constructor(K){const q={},At=[];for(const Ut in K){const It=K[Ut],te=q[Ut]={};for(const le in It){const qt=It[+le];if(!qt||qt.bitmap.width===0||qt.bitmap.height===0)continue;const pe={x:0,y:0,w:qt.bitmap.width+2,h:qt.bitmap.height+2};At.push(pe),te[le]={rect:pe,metrics:qt.metrics}}}const{w:pt,h:Pt}=p.p(At),Dt=new p.o({width:pt||1,height:Pt||1});for(const Ut in K){const It=K[Ut];for(const te in It){const le=It[+te];if(!le||le.bitmap.width===0||le.bitmap.height===0)continue;const qt=q[Ut][te].rect;p.o.copy(le.bitmap,Dt,{x:0,y:0},{x:qt.x+1,y:qt.y+1},le.bitmap)}}this.image=Dt,this.positions=q}}p.bk("GlyphAtlas",v);class C{constructor(K){this.tileID=new p.S(K.tileID.overscaledZ,K.tileID.wrap,K.tileID.canonical.z,K.tileID.canonical.x,K.tileID.canonical.y),this.uid=K.uid,this.zoom=K.zoom,this.pixelRatio=K.pixelRatio,this.tileSize=K.tileSize,this.source=K.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=K.showCollisionBoxes,this.collectResourceTiming=!!K.collectResourceTiming,this.returnDependencies=!!K.returnDependencies,this.promoteId=K.promoteId,this.inFlightDependencies=[]}parse(K,q,At,pt){return p._(this,void 0,void 0,function*(){this.status="parsing",this.data=K,this.collisionBoxArray=new p.a5;const Pt=new p.bl(Object.keys(K.layers).sort()),Dt=new p.bm(this.tileID,this.promoteId);Dt.bucketLayerIDs=[];const Ut={},It={featureIndex:Dt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:At},te=q.familiesBySource[this.source];for(const gr in te){const Mr=K.layers[gr];if(!Mr)continue;Mr.version===1&&p.w(`Vector tile source "${this.source}" layer "${gr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Zr=Pt.encode(gr),Ct=[];for(let Fe=0;Fe<Mr.length;Fe++){const ye=Mr.feature(Fe),Lr=Dt.getId(ye,gr);Ct.push({feature:ye,id:Lr,index:Fe,sourceLayerIndex:Zr})}for(const Fe of te[gr]){const ye=Fe[0];ye.source!==this.source&&p.w(`layer.source = ${ye.source} does not equal this.source = ${this.source}`),ye.minzoom&&this.zoom<Math.floor(ye.minzoom)||ye.maxzoom&&this.zoom>=ye.maxzoom||ye.visibility!=="none"&&(F(Fe,this.zoom,At),(Ut[ye.id]=ye.createBucket({index:Dt.bucketLayerIDs.length,layers:Fe,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Zr,sourceID:this.source})).populate(Ct,It,this.tileID.canonical),Dt.bucketLayerIDs.push(Fe.map(Lr=>Lr.id)))}}const le=p.aF(It.glyphDependencies,gr=>Object.keys(gr).map(Number));this.inFlightDependencies.forEach(gr=>gr==null?void 0:gr.abort()),this.inFlightDependencies=[];let qt=Promise.resolve({});if(Object.keys(le).length){const gr=new AbortController;this.inFlightDependencies.push(gr),qt=pt.sendAsync({type:"GG",data:{stacks:le,source:this.source,tileID:this.tileID,type:"glyphs"}},gr)}const pe=Object.keys(It.iconDependencies);let ke=Promise.resolve({});if(pe.length){const gr=new AbortController;this.inFlightDependencies.push(gr),ke=pt.sendAsync({type:"GI",data:{icons:pe,source:this.source,tileID:this.tileID,type:"icons"}},gr)}const Ge=Object.keys(It.patternDependencies);let ar=Promise.resolve({});if(Ge.length){const gr=new AbortController;this.inFlightDependencies.push(gr),ar=pt.sendAsync({type:"GI",data:{icons:Ge,source:this.source,tileID:this.tileID,type:"patterns"}},gr)}const[xr,tr,Br]=yield Promise.all([qt,ke,ar]),Kr=new v(xr),qr=new p.bn(tr,Br);for(const gr in Ut){const Mr=Ut[gr];Mr instanceof p.a6?(F(Mr.layers,this.zoom,At),p.bo({bucket:Mr,glyphMap:xr,glyphPositions:Kr.positions,imageMap:tr,imagePositions:qr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Mr.hasPattern&&(Mr instanceof p.bp||Mr instanceof p.bq||Mr instanceof p.br)&&(F(Mr.layers,this.zoom,At),Mr.addFeatures(It,this.tileID.canonical,qr.patternPositions))}return this.status="done",{buckets:Object.values(Ut).filter(gr=>!gr.isEmpty()),featureIndex:Dt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Kr.image,imageAtlas:qr,glyphMap:this.returnDependencies?xr:null,iconMap:this.returnDependencies?tr:null,glyphPositions:this.returnDependencies?Kr.positions:null}})}}function F(gt,K,q){const At=new p.z(K);for(const pt of gt)pt.recalculate(At,q)}class E{constructor(K,q,At){this.actor=K,this.layerIndex=q,this.availableImages=At,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(K,q){return p._(this,void 0,void 0,function*(){const At=yield p.l(K.request,q);try{return{vectorTile:new p.bs.VectorTile(new p.bt(At.data)),rawData:At.data,cacheControl:At.cacheControl,expires:At.expires}}catch(pt){const Pt=new Uint8Array(At.data);let Dt=`Unable to parse the tile at ${K.request.url}, `;throw Dt+=Pt[0]===31&&Pt[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${pt.message}`,new Error(Dt)}})}loadTile(K){return p._(this,void 0,void 0,function*(){const q=K.uid,At=!!(K&&K.request&&K.request.collectResourceTiming)&&new p.bu(K.request),pt=new C(K);this.loading[q]=pt;const Pt=new AbortController;pt.abort=Pt;try{const Dt=yield this.loadVectorTile(K,Pt);if(delete this.loading[q],!Dt)return null;const Ut=Dt.rawData,It={};Dt.expires&&(It.expires=Dt.expires),Dt.cacheControl&&(It.cacheControl=Dt.cacheControl);const te={};if(At){const qt=At.finish();qt&&(te.resourceTiming=JSON.parse(JSON.stringify(qt)))}pt.vectorTile=Dt.vectorTile;const le=pt.parse(Dt.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[q]=pt,this.fetching[q]={rawTileData:Ut,cacheControl:It,resourceTiming:te};try{const qt=yield le;return p.e({rawTileData:Ut.slice(0)},qt,It,te)}finally{delete this.fetching[q]}}catch(Dt){throw delete this.loading[q],pt.status="done",this.loaded[q]=pt,Dt}})}reloadTile(K){return p._(this,void 0,void 0,function*(){const q=K.uid;if(!this.loaded||!this.loaded[q])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const At=this.loaded[q];if(At.showCollisionBoxes=K.showCollisionBoxes,At.status==="parsing"){const pt=yield At.parse(At.vectorTile,this.layerIndex,this.availableImages,this.actor);let Pt;if(this.fetching[q]){const{rawTileData:Dt,cacheControl:Ut,resourceTiming:It}=this.fetching[q];delete this.fetching[q],Pt=p.e({rawTileData:Dt.slice(0)},pt,Ut,It)}else Pt=pt;return Pt}if(At.status==="done"&&At.vectorTile)return At.parse(At.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(K){return p._(this,void 0,void 0,function*(){const q=this.loading,At=K.uid;q&&q[At]&&q[At].abort&&(q[At].abort.abort(),delete q[At])})}removeTile(K){return p._(this,void 0,void 0,function*(){this.loaded&&this.loaded[K.uid]&&delete this.loaded[K.uid]})}}class Q{constructor(){this.loaded={}}loadTile(K){return p._(this,void 0,void 0,function*(){const{uid:q,encoding:At,rawImageData:pt,redFactor:Pt,greenFactor:Dt,blueFactor:Ut,baseShift:It}=K,te=pt.width+2,le=pt.height+2,qt=p.b(pt)?new p.R({width:te,height:le},yield p.bv(pt,-1,-1,te,le)):pt,pe=new p.bw(q,qt,At,Pt,Dt,Ut,It);return this.loaded=this.loaded||{},this.loaded[q]=pe,pe})}removeTile(K){const q=this.loaded,At=K.uid;q&&q[At]&&delete q[At]}}function T(gt,K){if(gt.length!==0){V(gt[0],K);for(var q=1;q<gt.length;q++)V(gt[q],!K)}}function V(gt,K){for(var q=0,At=0,pt=0,Pt=gt.length,Dt=Pt-1;pt<Pt;Dt=pt++){var Ut=(gt[pt][0]-gt[Dt][0])*(gt[Dt][1]+gt[pt][1]),It=q+Ut;At+=Math.abs(q)>=Math.abs(Ut)?q-It+Ut:Ut-It+q,q=It}q+At>=0!=!!K&&gt.reverse()}var R=p.bx(function gt(K,q){var At,pt=K&&K.type;if(pt==="FeatureCollection")for(At=0;At<K.features.length;At++)gt(K.features[At],q);else if(pt==="GeometryCollection")for(At=0;At<K.geometries.length;At++)gt(K.geometries[At],q);else if(pt==="Feature")gt(K.geometry,q);else if(pt==="Polygon")T(K.coordinates,q);else if(pt==="MultiPolygon")for(At=0;At<K.coordinates.length;At++)T(K.coordinates[At],q);return K});const W=p.bs.VectorTileFeature.prototype.toGeoJSON;var j={exports:{}},rt=p.by,ht=p.bs.VectorTileFeature,Bt=Et;function Et(gt,K){this.options=K||{},this.features=gt,this.length=gt.length}function Tt(gt,K){this.id=typeof gt.id=="number"?gt.id:void 0,this.type=gt.type,this.rawGeometry=gt.type===1?[gt.geometry]:gt.geometry,this.properties=gt.tags,this.extent=K||4096}Et.prototype.feature=function(gt){return new Tt(this.features[gt],this.options.extent)},Tt.prototype.loadGeometry=function(){var gt=this.rawGeometry;this.geometry=[];for(var K=0;K<gt.length;K++){for(var q=gt[K],At=[],pt=0;pt<q.length;pt++)At.push(new rt(q[pt][0],q[pt][1]));this.geometry.push(At)}return this.geometry},Tt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var gt=this.geometry,K=1/0,q=-1/0,At=1/0,pt=-1/0,Pt=0;Pt<gt.length;Pt++)for(var Dt=gt[Pt],Ut=0;Ut<Dt.length;Ut++){var It=Dt[Ut];K=Math.min(K,It.x),q=Math.max(q,It.x),At=Math.min(At,It.y),pt=Math.max(pt,It.y)}return[K,At,q,pt]},Tt.prototype.toGeoJSON=ht.prototype.toGeoJSON;var xt=p.bz,ft=Bt;function Nt(gt){var K=new xt;return function(q,At){for(var pt in q.layers)At.writeMessage(3,jt,q.layers[pt])}(gt,K),K.finish()}function jt(gt,K){var q;K.writeVarintField(15,gt.version||1),K.writeStringField(1,gt.name||""),K.writeVarintField(5,gt.extent||4096);var At={keys:[],values:[],keycache:{},valuecache:{}};for(q=0;q<gt.length;q++)At.feature=gt.feature(q),K.writeMessage(2,at,At);var pt=At.keys;for(q=0;q<pt.length;q++)K.writeStringField(3,pt[q]);var Pt=At.values;for(q=0;q<Pt.length;q++)K.writeMessage(4,Vt,Pt[q])}function at(gt,K){var q=gt.feature;q.id!==void 0&&K.writeVarintField(1,q.id),K.writeMessage(2,ct,gt),K.writeVarintField(3,q.type),K.writeMessage(4,$t,q)}function ct(gt,K){var q=gt.feature,At=gt.keys,pt=gt.values,Pt=gt.keycache,Dt=gt.valuecache;for(var Ut in q.properties){var It=q.properties[Ut],te=Pt[Ut];if(It!==null){te===void 0&&(At.push(Ut),Pt[Ut]=te=At.length-1),K.writeVarint(te);var le=typeof It;le!=="string"&&le!=="boolean"&&le!=="number"&&(It=JSON.stringify(It));var qt=le+":"+It,pe=Dt[qt];pe===void 0&&(pt.push(It),Dt[qt]=pe=pt.length-1),K.writeVarint(pe)}}}function vt(gt,K){return(K<<3)+(7&gt)}function mt(gt){return gt<<1^gt>>31}function $t(gt,K){for(var q=gt.loadGeometry(),At=gt.type,pt=0,Pt=0,Dt=q.length,Ut=0;Ut<Dt;Ut++){var It=q[Ut],te=1;At===1&&(te=It.length),K.writeVarint(vt(1,te));for(var le=At===3?It.length-1:It.length,qt=0;qt<le;qt++){qt===1&&At!==1&&K.writeVarint(vt(2,le-1));var pe=It[qt].x-pt,ke=It[qt].y-Pt;K.writeVarint(mt(pe)),K.writeVarint(mt(ke)),pt+=pe,Pt+=ke}At===3&&K.writeVarint(vt(7,1))}}function Vt(gt,K){var q=typeof gt;q==="string"?K.writeStringField(1,gt):q==="boolean"?K.writeBooleanField(7,gt):q==="number"&&(gt%1!=0?K.writeDoubleField(3,gt):gt<0?K.writeSVarintField(6,gt):K.writeVarintField(5,gt))}j.exports=Nt,j.exports.fromVectorTileJs=Nt,j.exports.fromGeojsonVt=function(gt,K){K=K||{};var q={};for(var At in gt)q[At]=new ft(gt[At].features,K),q[At].name=At,q[At].version=K.version,q[At].extent=K.extent;return Nt({layers:q})},j.exports.GeoJSONWrapper=ft;var Zt=p.bx(j.exports);const Ht={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:gt=>gt},Yt=Math.fround||(Wt=new Float32Array(1),gt=>(Wt[0]=+gt,Wt[0]));var Wt;const me=3,et=5,dt=6;class _t{constructor(K){this.options=Object.assign(Object.create(Ht),K),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(K){const{log:q,minZoom:At,maxZoom:pt}=this.options;q&&console.time("total time");const Pt=`prepare ${K.length} points`;q&&console.time(Pt),this.points=K;const Dt=[];for(let It=0;It<K.length;It++){const te=K[It];if(!te.geometry)continue;const[le,qt]=te.geometry.coordinates,pe=Yt(Rt(le)),ke=Yt(Jt(qt));Dt.push(pe,ke,1/0,It,-1,1),this.options.reduce&&Dt.push(0)}let Ut=this.trees[pt+1]=this._createTree(Dt);q&&console.timeEnd(Pt);for(let It=pt;It>=At;It--){const te=+Date.now();Ut=this.trees[It]=this._createTree(this._cluster(Ut,It)),q&&console.log("z%d: %d clusters in %dms",It,Ut.numItems,+Date.now()-te)}return q&&console.timeEnd("total time"),this}getClusters(K,q){let At=((K[0]+180)%360+360)%360-180;const pt=Math.max(-90,Math.min(90,K[1]));let Pt=K[2]===180?180:((K[2]+180)%360+360)%360-180;const Dt=Math.max(-90,Math.min(90,K[3]));if(K[2]-K[0]>=360)At=-180,Pt=180;else if(At>Pt){const qt=this.getClusters([At,pt,180,Dt],q),pe=this.getClusters([-180,pt,Pt,Dt],q);return qt.concat(pe)}const Ut=this.trees[this._limitZoom(q)],It=Ut.range(Rt(At),Jt(Dt),Rt(Pt),Jt(pt)),te=Ut.data,le=[];for(const qt of It){const pe=this.stride*qt;le.push(te[pe+et]>1?St(te,pe,this.clusterProps):this.points[te[pe+me]])}return le}getChildren(K){const q=this._getOriginId(K),At=this._getOriginZoom(K),pt="No cluster with the specified id.",Pt=this.trees[At];if(!Pt)throw new Error(pt);const Dt=Pt.data;if(q*this.stride>=Dt.length)throw new Error(pt);const Ut=this.options.radius/(this.options.extent*Math.pow(2,At-1)),It=Pt.within(Dt[q*this.stride],Dt[q*this.stride+1],Ut),te=[];for(const le of It){const qt=le*this.stride;Dt[qt+4]===K&&te.push(Dt[qt+et]>1?St(Dt,qt,this.clusterProps):this.points[Dt[qt+me]])}if(te.length===0)throw new Error(pt);return te}getLeaves(K,q,At){const pt=[];return this._appendLeaves(pt,K,q=q||10,At=At||0,0),pt}getTile(K,q,At){const pt=this.trees[this._limitZoom(K)],Pt=Math.pow(2,K),{extent:Dt,radius:Ut}=this.options,It=Ut/Dt,te=(At-It)/Pt,le=(At+1+It)/Pt,qt={features:[]};return this._addTileFeatures(pt.range((q-It)/Pt,te,(q+1+It)/Pt,le),pt.data,q,At,Pt,qt),q===0&&this._addTileFeatures(pt.range(1-It/Pt,te,1,le),pt.data,Pt,At,Pt,qt),q===Pt-1&&this._addTileFeatures(pt.range(0,te,It/Pt,le),pt.data,-1,At,Pt,qt),qt.features.length?qt:null}getClusterExpansionZoom(K){let q=this._getOriginZoom(K)-1;for(;q<=this.options.maxZoom;){const At=this.getChildren(K);if(q++,At.length!==1)break;K=At[0].properties.cluster_id}return q}_appendLeaves(K,q,At,pt,Pt){const Dt=this.getChildren(q);for(const Ut of Dt){const It=Ut.properties;if(It&&It.cluster?Pt+It.point_count<=pt?Pt+=It.point_count:Pt=this._appendLeaves(K,It.cluster_id,At,pt,Pt):Pt<pt?Pt++:K.push(Ut),K.length===At)break}return Pt}_createTree(K){const q=new p.av(K.length/this.stride|0,this.options.nodeSize,Float32Array);for(let At=0;At<K.length;At+=this.stride)q.add(K[At],K[At+1]);return q.finish(),q.data=K,q}_addTileFeatures(K,q,At,pt,Pt,Dt){for(const Ut of K){const It=Ut*this.stride,te=q[It+et]>1;let le,qt,pe;if(te)le=Ot(q,It,this.clusterProps),qt=q[It],pe=q[It+1];else{const ar=this.points[q[It+me]];le=ar.properties;const[xr,tr]=ar.geometry.coordinates;qt=Rt(xr),pe=Jt(tr)}const ke={type:1,geometry:[[Math.round(this.options.extent*(qt*Pt-At)),Math.round(this.options.extent*(pe*Pt-pt))]],tags:le};let Ge;Ge=te||this.options.generateId?q[It+me]:this.points[q[It+me]].id,Ge!==void 0&&(ke.id=Ge),Dt.features.push(ke)}}_limitZoom(K){return Math.max(this.options.minZoom,Math.min(Math.floor(+K),this.options.maxZoom+1))}_cluster(K,q){const{radius:At,extent:pt,reduce:Pt,minPoints:Dt}=this.options,Ut=At/(pt*Math.pow(2,q)),It=K.data,te=[],le=this.stride;for(let qt=0;qt<It.length;qt+=le){if(It[qt+2]<=q)continue;It[qt+2]=q;const pe=It[qt],ke=It[qt+1],Ge=K.within(It[qt],It[qt+1],Ut),ar=It[qt+et];let xr=ar;for(const tr of Ge){const Br=tr*le;It[Br+2]>q&&(xr+=It[Br+et])}if(xr>ar&&xr>=Dt){let tr,Br=pe*ar,Kr=ke*ar,qr=-1;const gr=((qt/le|0)<<5)+(q+1)+this.points.length;for(const Mr of Ge){const Zr=Mr*le;if(It[Zr+2]<=q)continue;It[Zr+2]=q;const Ct=It[Zr+et];Br+=It[Zr]*Ct,Kr+=It[Zr+1]*Ct,It[Zr+4]=gr,Pt&&(tr||(tr=this._map(It,qt,!0),qr=this.clusterProps.length,this.clusterProps.push(tr)),Pt(tr,this._map(It,Zr)))}It[qt+4]=gr,te.push(Br/xr,Kr/xr,1/0,gr,-1,xr),Pt&&te.push(qr)}else{for(let tr=0;tr<le;tr++)te.push(It[qt+tr]);if(xr>1)for(const tr of Ge){const Br=tr*le;if(!(It[Br+2]<=q)){It[Br+2]=q;for(let Kr=0;Kr<le;Kr++)te.push(It[Br+Kr])}}}}return te}_getOriginId(K){return K-this.points.length>>5}_getOriginZoom(K){return(K-this.points.length)%32}_map(K,q,At){if(K[q+et]>1){const Dt=this.clusterProps[K[q+dt]];return At?Object.assign({},Dt):Dt}const pt=this.points[K[q+me]].properties,Pt=this.options.map(pt);return At&&Pt===pt?Object.assign({},Pt):Pt}}function St(gt,K,q){return{type:"Feature",id:gt[K+me],properties:Ot(gt,K,q),geometry:{type:"Point",coordinates:[(At=gt[K],360*(At-.5)),re(gt[K+1])]}};var At}function Ot(gt,K,q){const At=gt[K+et],pt=At>=1e4?`${Math.round(At/1e3)}k`:At>=1e3?Math.round(At/100)/10+"k":At,Pt=gt[K+dt],Dt=Pt===-1?{}:Object.assign({},q[Pt]);return Object.assign(Dt,{cluster:!0,cluster_id:gt[K+me],point_count:At,point_count_abbreviated:pt})}function Rt(gt){return gt/360+.5}function Jt(gt){const K=Math.sin(gt*Math.PI/180),q=.5-.25*Math.log((1+K)/(1-K))/Math.PI;return q<0?0:q>1?1:q}function re(gt){const K=(180-360*gt)*Math.PI/180;return 360*Math.atan(Math.exp(K))/Math.PI-90}function be(gt,K,q,At){let pt=At;const Pt=K+(q-K>>1);let Dt,Ut=q-K;const It=gt[K],te=gt[K+1],le=gt[q],qt=gt[q+1];for(let pe=K+3;pe<q;pe+=3){const ke=_e(gt[pe],gt[pe+1],It,te,le,qt);if(ke>pt)Dt=pe,pt=ke;else if(ke===pt){const Ge=Math.abs(pe-Pt);Ge<Ut&&(Dt=pe,Ut=Ge)}}pt>At&&(Dt-K>3&&be(gt,K,Dt,At),gt[Dt+2]=pt,q-Dt>3&&be(gt,Dt,q,At))}function _e(gt,K,q,At,pt,Pt){let Dt=pt-q,Ut=Pt-At;if(Dt!==0||Ut!==0){const It=((gt-q)*Dt+(K-At)*Ut)/(Dt*Dt+Ut*Ut);It>1?(q=pt,At=Pt):It>0&&(q+=Dt*It,At+=Ut*It)}return Dt=gt-q,Ut=K-At,Dt*Dt+Ut*Ut}function Te(gt,K,q,At){const pt={id:gt??null,type:K,geometry:q,tags:At,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(K==="Point"||K==="MultiPoint"||K==="LineString")Qe(pt,q);else if(K==="Polygon")Qe(pt,q[0]);else if(K==="MultiLineString")for(const Pt of q)Qe(pt,Pt);else if(K==="MultiPolygon")for(const Pt of q)Qe(pt,Pt[0]);return pt}function Qe(gt,K){for(let q=0;q<K.length;q+=3)gt.minX=Math.min(gt.minX,K[q]),gt.minY=Math.min(gt.minY,K[q+1]),gt.maxX=Math.max(gt.maxX,K[q]),gt.maxY=Math.max(gt.maxY,K[q+1])}function je(gt,K,q,At){if(!K.geometry)return;const pt=K.geometry.coordinates;if(pt&&pt.length===0)return;const Pt=K.geometry.type,Dt=Math.pow(q.tolerance/((1<<q.maxZoom)*q.extent),2);let Ut=[],It=K.id;if(q.promoteId?It=K.properties[q.promoteId]:q.generateId&&(It=At||0),Pt==="Point")oe(pt,Ut);else if(Pt==="MultiPoint")for(const te of pt)oe(te,Ut);else if(Pt==="LineString")nt(pt,Ut,Dt,!1);else if(Pt==="MultiLineString"){if(q.lineMetrics){for(const te of pt)Ut=[],nt(te,Ut,Dt,!1),gt.push(Te(It,"LineString",Ut,K.properties));return}cr(pt,Ut,Dt,!1)}else if(Pt==="Polygon")cr(pt,Ut,Dt,!0);else{if(Pt!=="MultiPolygon"){if(Pt==="GeometryCollection"){for(const te of K.geometry.geometries)je(gt,{id:It,geometry:te,properties:K.properties},q,At);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const te of pt){const le=[];cr(te,le,Dt,!0),Ut.push(le)}}gt.push(Te(It,Pt,Ut,K.properties))}function oe(gt,K){K.push(Ke(gt[0]),Ae(gt[1]),0)}function nt(gt,K,q,At){let pt,Pt,Dt=0;for(let It=0;It<gt.length;It++){const te=Ke(gt[It][0]),le=Ae(gt[It][1]);K.push(te,le,0),It>0&&(Dt+=At?(pt*le-te*Pt)/2:Math.sqrt(Math.pow(te-pt,2)+Math.pow(le-Pt,2))),pt=te,Pt=le}const Ut=K.length-3;K[2]=1,be(K,0,Ut,q),K[Ut+2]=1,K.size=Math.abs(Dt),K.start=0,K.end=K.size}function cr(gt,K,q,At){for(let pt=0;pt<gt.length;pt++){const Pt=[];nt(gt[pt],Pt,q,At),K.push(Pt)}}function Ke(gt){return gt/360+.5}function Ae(gt){const K=Math.sin(gt*Math.PI/180),q=.5-.25*Math.log((1+K)/(1-K))/Math.PI;return q<0?0:q>1?1:q}function ge(gt,K,q,At,pt,Pt,Dt,Ut){if(At/=K,Pt>=(q/=K)&&Dt<At)return gt;if(Dt<q||Pt>=At)return null;const It=[];for(const te of gt){const le=te.geometry;let qt=te.type;const pe=pt===0?te.minX:te.minY,ke=pt===0?te.maxX:te.maxY;if(pe>=q&&ke<At){It.push(te);continue}if(ke<q||pe>=At)continue;let Ge=[];if(qt==="Point"||qt==="MultiPoint")Se(le,Ge,q,At,pt);else if(qt==="LineString")Ce(le,Ge,q,At,pt,!1,Ut.lineMetrics);else if(qt==="MultiLineString")Xe(le,Ge,q,At,pt,!1);else if(qt==="Polygon")Xe(le,Ge,q,At,pt,!0);else if(qt==="MultiPolygon")for(const ar of le){const xr=[];Xe(ar,xr,q,At,pt,!0),xr.length&&Ge.push(xr)}if(Ge.length){if(Ut.lineMetrics&&qt==="LineString"){for(const ar of Ge)It.push(Te(te.id,qt,ar,te.tags));continue}qt!=="LineString"&&qt!=="MultiLineString"||(Ge.length===1?(qt="LineString",Ge=Ge[0]):qt="MultiLineString"),qt!=="Point"&&qt!=="MultiPoint"||(qt=Ge.length===3?"Point":"MultiPoint"),It.push(Te(te.id,qt,Ge,te.tags))}}return It.length?It:null}function Se(gt,K,q,At,pt){for(let Pt=0;Pt<gt.length;Pt+=3){const Dt=gt[Pt+pt];Dt>=q&&Dt<=At&&nr(K,gt[Pt],gt[Pt+1],gt[Pt+2])}}function Ce(gt,K,q,At,pt,Pt,Dt){let Ut=He(gt);const It=pt===0?yr:br;let te,le,qt=gt.start;for(let xr=0;xr<gt.length-3;xr+=3){const tr=gt[xr],Br=gt[xr+1],Kr=gt[xr+2],qr=gt[xr+3],gr=gt[xr+4],Mr=pt===0?tr:Br,Zr=pt===0?qr:gr;let Ct=!1;Dt&&(te=Math.sqrt(Math.pow(tr-qr,2)+Math.pow(Br-gr,2))),Mr<q?Zr>q&&(le=It(Ut,tr,Br,qr,gr,q),Dt&&(Ut.start=qt+te*le)):Mr>At?Zr<At&&(le=It(Ut,tr,Br,qr,gr,At),Dt&&(Ut.start=qt+te*le)):nr(Ut,tr,Br,Kr),Zr<q&&Mr>=q&&(le=It(Ut,tr,Br,qr,gr,q),Ct=!0),Zr>At&&Mr<=At&&(le=It(Ut,tr,Br,qr,gr,At),Ct=!0),!Pt&&Ct&&(Dt&&(Ut.end=qt+te*le),K.push(Ut),Ut=He(gt)),Dt&&(qt+=te)}let pe=gt.length-3;const ke=gt[pe],Ge=gt[pe+1],ar=pt===0?ke:Ge;ar>=q&&ar<=At&&nr(Ut,ke,Ge,gt[pe+2]),pe=Ut.length-3,Pt&&pe>=3&&(Ut[pe]!==Ut[0]||Ut[pe+1]!==Ut[1])&&nr(Ut,Ut[0],Ut[1],Ut[2]),Ut.length&&K.push(Ut)}function He(gt){const K=[];return K.size=gt.size,K.start=gt.start,K.end=gt.end,K}function Xe(gt,K,q,At,pt,Pt){for(const Dt of gt)Ce(Dt,K,q,At,pt,Pt,!1)}function nr(gt,K,q,At){gt.push(K,q,At)}function yr(gt,K,q,At,pt,Pt){const Dt=(Pt-K)/(At-K);return nr(gt,Pt,q+(pt-q)*Dt,1),Dt}function br(gt,K,q,At,pt,Pt){const Dt=(Pt-q)/(pt-q);return nr(gt,K+(At-K)*Dt,Pt,1),Dt}function ce(gt,K){const q=[];for(let At=0;At<gt.length;At++){const pt=gt[At],Pt=pt.type;let Dt;if(Pt==="Point"||Pt==="MultiPoint"||Pt==="LineString")Dt=Je(pt.geometry,K);else if(Pt==="MultiLineString"||Pt==="Polygon"){Dt=[];for(const Ut of pt.geometry)Dt.push(Je(Ut,K))}else if(Pt==="MultiPolygon"){Dt=[];for(const Ut of pt.geometry){const It=[];for(const te of Ut)It.push(Je(te,K));Dt.push(It)}}q.push(Te(pt.id,Pt,Dt,pt.tags))}return q}function Je(gt,K){const q=[];q.size=gt.size,gt.start!==void 0&&(q.start=gt.start,q.end=gt.end);for(let At=0;At<gt.length;At+=3)q.push(gt[At]+K,gt[At+1],gt[At+2]);return q}function sr(gt,K){if(gt.transformed)return gt;const q=1<<gt.z,At=gt.x,pt=gt.y;for(const Pt of gt.features){const Dt=Pt.geometry,Ut=Pt.type;if(Pt.geometry=[],Ut===1)for(let It=0;It<Dt.length;It+=2)Pt.geometry.push(Ie(Dt[It],Dt[It+1],K,q,At,pt));else for(let It=0;It<Dt.length;It++){const te=[];for(let le=0;le<Dt[It].length;le+=2)te.push(Ie(Dt[It][le],Dt[It][le+1],K,q,At,pt));Pt.geometry.push(te)}}return gt.transformed=!0,gt}function Ie(gt,K,q,At,pt,Pt){return[Math.round(q*(gt*At-pt)),Math.round(q*(K*At-Pt))]}function Xr(gt,K,q,At,pt){const Pt=K===pt.maxZoom?0:pt.tolerance/((1<<K)*pt.extent),Dt={features:[],numPoints:0,numSimplified:0,numFeatures:gt.length,source:null,x:q,y:At,z:K,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Ut of gt)he(Dt,Ut,Pt,pt);return Dt}function he(gt,K,q,At){const pt=K.geometry,Pt=K.type,Dt=[];if(gt.minX=Math.min(gt.minX,K.minX),gt.minY=Math.min(gt.minY,K.minY),gt.maxX=Math.max(gt.maxX,K.maxX),gt.maxY=Math.max(gt.maxY,K.maxY),Pt==="Point"||Pt==="MultiPoint")for(let Ut=0;Ut<pt.length;Ut+=3)Dt.push(pt[Ut],pt[Ut+1]),gt.numPoints++,gt.numSimplified++;else if(Pt==="LineString")rr(Dt,pt,gt,q,!1,!1);else if(Pt==="MultiLineString"||Pt==="Polygon")for(let Ut=0;Ut<pt.length;Ut++)rr(Dt,pt[Ut],gt,q,Pt==="Polygon",Ut===0);else if(Pt==="MultiPolygon")for(let Ut=0;Ut<pt.length;Ut++){const It=pt[Ut];for(let te=0;te<It.length;te++)rr(Dt,It[te],gt,q,!0,te===0)}if(Dt.length){let Ut=K.tags||null;if(Pt==="LineString"&&At.lineMetrics){Ut={};for(const te in K.tags)Ut[te]=K.tags[te];Ut.mapbox_clip_start=pt.start/pt.size,Ut.mapbox_clip_end=pt.end/pt.size}const It={geometry:Dt,type:Pt==="Polygon"||Pt==="MultiPolygon"?3:Pt==="LineString"||Pt==="MultiLineString"?2:1,tags:Ut};K.id!==null&&(It.id=K.id),gt.features.push(It)}}function rr(gt,K,q,At,pt,Pt){const Dt=At*At;if(At>0&&K.size<(pt?Dt:At))return void(q.numPoints+=K.length/3);const Ut=[];for(let It=0;It<K.length;It+=3)(At===0||K[It+2]>Dt)&&(q.numSimplified++,Ut.push(K[It],K[It+1])),q.numPoints++;pt&&function(It,te){let le=0;for(let qt=0,pe=It.length,ke=pe-2;qt<pe;ke=qt,qt+=2)le+=(It[qt]-It[ke])*(It[qt+1]+It[ke+1]);if(le>0===te)for(let qt=0,pe=It.length;qt<pe/2;qt+=2){const ke=It[qt],Ge=It[qt+1];It[qt]=It[pe-2-qt],It[qt+1]=It[pe-1-qt],It[pe-2-qt]=ke,It[pe-1-qt]=Ge}}(Ut,Pt),gt.push(Ut)}const Ee={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class vr{constructor(K,q){const At=(q=this.options=function(Pt,Dt){for(const Ut in Dt)Pt[Ut]=Dt[Ut];return Pt}(Object.create(Ee),q)).debug;if(At&&console.time("preprocess data"),q.maxZoom<0||q.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(q.promoteId&&q.generateId)throw new Error("promoteId and generateId cannot be used together.");let pt=function(Pt,Dt){const Ut=[];if(Pt.type==="FeatureCollection")for(let It=0;It<Pt.features.length;It++)je(Ut,Pt.features[It],Dt,It);else je(Ut,Pt.type==="Feature"?Pt:{geometry:Pt},Dt);return Ut}(K,q);this.tiles={},this.tileCoords=[],At&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",q.indexMaxZoom,q.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),pt=function(Pt,Dt){const Ut=Dt.buffer/Dt.extent;let It=Pt;const te=ge(Pt,1,-1-Ut,Ut,0,-1,2,Dt),le=ge(Pt,1,1-Ut,2+Ut,0,-1,2,Dt);return(te||le)&&(It=ge(Pt,1,-Ut,1+Ut,0,-1,2,Dt)||[],te&&(It=ce(te,1).concat(It)),le&&(It=It.concat(ce(le,-1)))),It}(pt,q),pt.length&&this.splitTile(pt,0,0,0),At&&(pt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(K,q,At,pt,Pt,Dt,Ut){const It=[K,q,At,pt],te=this.options,le=te.debug;for(;It.length;){pt=It.pop(),At=It.pop(),q=It.pop(),K=It.pop();const qt=1<<q,pe=ti(q,At,pt);let ke=this.tiles[pe];if(!ke&&(le>1&&console.time("creation"),ke=this.tiles[pe]=Xr(K,q,At,pt,te),this.tileCoords.push({z:q,x:At,y:pt}),le)){le>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",q,At,pt,ke.numFeatures,ke.numPoints,ke.numSimplified),console.timeEnd("creation"));const Ct=`z${q}`;this.stats[Ct]=(this.stats[Ct]||0)+1,this.total++}if(ke.source=K,Pt==null){if(q===te.indexMaxZoom||ke.numPoints<=te.indexMaxPoints)continue}else{if(q===te.maxZoom||q===Pt)continue;if(Pt!=null){const Ct=Pt-q;if(At!==Dt>>Ct||pt!==Ut>>Ct)continue}}if(ke.source=null,K.length===0)continue;le>1&&console.time("clipping");const Ge=.5*te.buffer/te.extent,ar=.5-Ge,xr=.5+Ge,tr=1+Ge;let Br=null,Kr=null,qr=null,gr=null,Mr=ge(K,qt,At-Ge,At+xr,0,ke.minX,ke.maxX,te),Zr=ge(K,qt,At+ar,At+tr,0,ke.minX,ke.maxX,te);K=null,Mr&&(Br=ge(Mr,qt,pt-Ge,pt+xr,1,ke.minY,ke.maxY,te),Kr=ge(Mr,qt,pt+ar,pt+tr,1,ke.minY,ke.maxY,te),Mr=null),Zr&&(qr=ge(Zr,qt,pt-Ge,pt+xr,1,ke.minY,ke.maxY,te),gr=ge(Zr,qt,pt+ar,pt+tr,1,ke.minY,ke.maxY,te),Zr=null),le>1&&console.timeEnd("clipping"),It.push(Br||[],q+1,2*At,2*pt),It.push(Kr||[],q+1,2*At,2*pt+1),It.push(qr||[],q+1,2*At+1,2*pt),It.push(gr||[],q+1,2*At+1,2*pt+1)}}getTile(K,q,At){K=+K,q=+q,At=+At;const pt=this.options,{extent:Pt,debug:Dt}=pt;if(K<0||K>24)return null;const Ut=1<<K,It=ti(K,q=q+Ut&Ut-1,At);if(this.tiles[It])return sr(this.tiles[It],Pt);Dt>1&&console.log("drilling down to z%d-%d-%d",K,q,At);let te,le=K,qt=q,pe=At;for(;!te&&le>0;)le--,qt>>=1,pe>>=1,te=this.tiles[ti(le,qt,pe)];return te&&te.source?(Dt>1&&(console.log("found parent tile z%d-%d-%d",le,qt,pe),console.time("drilling down")),this.splitTile(te.source,le,qt,pe,K,q,At),Dt>1&&console.timeEnd("drilling down"),this.tiles[It]?sr(this.tiles[It],Pt):null):null}}function ti(gt,K,q){return 32*((1<<gt)*q+K)+gt}function Pe(gt,K){return K?gt.properties[K]:gt.id}function mi(gt,K){if(gt==null)return!0;if(gt.type==="Feature")return Pe(gt,K)!=null;if(gt.type==="FeatureCollection"){const q=new Set;for(const At of gt.features){const pt=Pe(At,K);if(pt==null||q.has(pt))return!1;q.add(pt)}return!0}return!1}function Rr(gt,K){const q=new Map;if(gt!=null)if(gt.type==="Feature")q.set(Pe(gt,K),gt);else for(const At of gt.features)q.set(Pe(At,K),At);return q}class ri extends E{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(K,q){return p._(this,void 0,void 0,function*(){const At=K.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const pt=this._geoJSONIndex.getTile(At.z,At.x,At.y);if(!pt)return null;const Pt=new class{constructor(Ut){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=p.X,this.length=Ut.length,this._features=Ut}feature(Ut){return new class{constructor(It){this._feature=It,this.extent=p.X,this.type=It.type,this.properties=It.tags,"id"in It&&!isNaN(It.id)&&(this.id=parseInt(It.id,10))}loadGeometry(){if(this._feature.type===1){const It=[];for(const te of this._feature.geometry)It.push([new p.P(te[0],te[1])]);return It}{const It=[];for(const te of this._feature.geometry){const le=[];for(const qt of te)le.push(new p.P(qt[0],qt[1]));It.push(le)}return It}}toGeoJSON(It,te,le){return W.call(this,It,te,le)}}(this._features[Ut])}}(pt.features);let Dt=Zt(Pt);return Dt.byteOffset===0&&Dt.byteLength===Dt.buffer.byteLength||(Dt=new Uint8Array(Dt)),{vectorTile:Pt,rawData:Dt.buffer}})}loadData(K){return p._(this,void 0,void 0,function*(){var q;(q=this._pendingRequest)===null||q===void 0||q.abort();const At=!!(K&&K.request&&K.request.collectResourceTiming)&&new p.bu(K.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(K,this._pendingRequest),this._geoJSONIndex=K.cluster?new _t(function({superclusterOptions:Dt,clusterProperties:Ut}){if(!Ut||!Dt)return Dt;const It={},te={},le={accumulated:null,zoom:0},qt={properties:null},pe=Object.keys(Ut);for(const ke of pe){const[Ge,ar]=Ut[ke],xr=p.bB(ar),tr=p.bB(typeof Ge=="string"?[Ge,["accumulated"],["get",ke]]:Ge);It[ke]=xr.value,te[ke]=tr.value}return Dt.map=ke=>{qt.properties=ke;const Ge={};for(const ar of pe)Ge[ar]=It[ar].evaluate(le,qt);return Ge},Dt.reduce=(ke,Ge)=>{qt.properties=Ge;for(const ar of pe)le.accumulated=ke[ar],ke[ar]=te[ar].evaluate(le,qt)},Dt}(K)).load((yield this._pendingData).features):(pt=yield this._pendingData,new vr(pt,K.geojsonVtOptions)),this.loaded={};const Pt={};if(At){const Dt=At.finish();Dt&&(Pt.resourceTiming={},Pt.resourceTiming[K.source]=JSON.parse(JSON.stringify(Dt)))}return Pt}catch(Pt){if(delete this._pendingRequest,p.bA(Pt))return{abandoned:!0};throw Pt}var pt})}getData(){return p._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(K){const q=this.loaded;return q&&q[K.uid]?super.reloadTile(K):this.loadTile(K)}loadAndProcessGeoJSON(K,q){return p._(this,void 0,void 0,function*(){let At=yield this.loadGeoJSON(K,q);if(delete this._pendingRequest,typeof At!="object")throw new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`);if(R(At,!0),K.filter){const pt=p.bB(K.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(pt.result==="error")throw new Error(pt.value.map(Dt=>`${Dt.key}: ${Dt.message}`).join(", "));At={type:"FeatureCollection",features:At.features.filter(Dt=>pt.value.evaluate({zoom:0},Dt))}}return At})}loadGeoJSON(K,q){return p._(this,void 0,void 0,function*(){const{promoteId:At}=K;if(K.request){const pt=yield p.h(K.request,q);return this._dataUpdateable=mi(pt.data,At)?Rr(pt.data,At):void 0,pt.data}if(typeof K.data=="string")try{const pt=JSON.parse(K.data);return this._dataUpdateable=mi(pt,At)?Rr(pt,At):void 0,pt}catch{throw new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`)}if(!K.dataDiff)throw new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${K.source}`);return function(pt,Pt,Dt){var Ut,It,te,le;if(Pt.removeAll&&pt.clear(),Pt.remove)for(const qt of Pt.remove)pt.delete(qt);if(Pt.add)for(const qt of Pt.add){const pe=Pe(qt,Dt);pe!=null&&pt.set(pe,qt)}if(Pt.update)for(const qt of Pt.update){let pe=pt.get(qt.id);if(pe==null)continue;const ke=!qt.removeAllProperties&&(((Ut=qt.removeProperties)===null||Ut===void 0?void 0:Ut.length)>0||((It=qt.addOrUpdateProperties)===null||It===void 0?void 0:It.length)>0);if((qt.newGeometry||qt.removeAllProperties||ke)&&(pe=Object.assign({},pe),pt.set(qt.id,pe),ke&&(pe.properties=Object.assign({},pe.properties))),qt.newGeometry&&(pe.geometry=qt.newGeometry),qt.removeAllProperties)pe.properties={};else if(((te=qt.removeProperties)===null||te===void 0?void 0:te.length)>0)for(const Ge of qt.removeProperties)Object.prototype.hasOwnProperty.call(pe.properties,Ge)&&delete pe.properties[Ge];if(((le=qt.addOrUpdateProperties)===null||le===void 0?void 0:le.length)>0)for(const{key:Ge,value:ar}of qt.addOrUpdateProperties)pe.properties[Ge]=ar}}(this._dataUpdateable,K.dataDiff,At),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(K){return p._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(K){return this._geoJSONIndex.getClusterExpansionZoom(K.clusterId)}getClusterChildren(K){return this._geoJSONIndex.getChildren(K.clusterId)}getClusterLeaves(K){return this._geoJSONIndex.getLeaves(K.clusterId,K.limit,K.offset)}}class jr{constructor(K){this.self=K,this.actor=new p.F(K),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(q,At)=>{if(this.externalWorkerSourceTypes[q])throw new Error(`Worker source with name "${q}" already registered.`);this.externalWorkerSourceTypes[q]=At},this.self.addProtocol=p.bh,this.self.removeProtocol=p.bi,this.self.registerRTLTextPlugin=q=>{if(p.bC.isParsed())throw new Error("RTL text plugin already registered.");p.bC.setMethods(q)},this.actor.registerMessageHandler("LDT",(q,At)=>this._getDEMWorkerSource(q,At.source).loadTile(At)),this.actor.registerMessageHandler("RDT",(q,At)=>p._(this,void 0,void 0,function*(){this._getDEMWorkerSource(q,At.source).removeTile(At)})),this.actor.registerMessageHandler("GCEZ",(q,At)=>p._(this,void 0,void 0,function*(){return this._getWorkerSource(q,At.type,At.source).getClusterExpansionZoom(At)})),this.actor.registerMessageHandler("GCC",(q,At)=>p._(this,void 0,void 0,function*(){return this._getWorkerSource(q,At.type,At.source).getClusterChildren(At)})),this.actor.registerMessageHandler("GCL",(q,At)=>p._(this,void 0,void 0,function*(){return this._getWorkerSource(q,At.type,At.source).getClusterLeaves(At)})),this.actor.registerMessageHandler("LD",(q,At)=>this._getWorkerSource(q,At.type,At.source).loadData(At)),this.actor.registerMessageHandler("GD",(q,At)=>this._getWorkerSource(q,At.type,At.source).getData()),this.actor.registerMessageHandler("LT",(q,At)=>this._getWorkerSource(q,At.type,At.source).loadTile(At)),this.actor.registerMessageHandler("RT",(q,At)=>this._getWorkerSource(q,At.type,At.source).reloadTile(At)),this.actor.registerMessageHandler("AT",(q,At)=>this._getWorkerSource(q,At.type,At.source).abortTile(At)),this.actor.registerMessageHandler("RMT",(q,At)=>this._getWorkerSource(q,At.type,At.source).removeTile(At)),this.actor.registerMessageHandler("RS",(q,At)=>p._(this,void 0,void 0,function*(){if(!this.workerSources[q]||!this.workerSources[q][At.type]||!this.workerSources[q][At.type][At.source])return;const pt=this.workerSources[q][At.type][At.source];delete this.workerSources[q][At.type][At.source],pt.removeSource!==void 0&&pt.removeSource(At)})),this.actor.registerMessageHandler("RM",q=>p._(this,void 0,void 0,function*(){delete this.layerIndexes[q],delete this.availableImages[q],delete this.workerSources[q],delete this.demWorkerSources[q]})),this.actor.registerMessageHandler("SR",(q,At)=>p._(this,void 0,void 0,function*(){this.referrer=At})),this.actor.registerMessageHandler("SRPS",(q,At)=>this._syncRTLPluginState(q,At)),this.actor.registerMessageHandler("IS",(q,At)=>p._(this,void 0,void 0,function*(){this.self.importScripts(At)})),this.actor.registerMessageHandler("SI",(q,At)=>this._setImages(q,At)),this.actor.registerMessageHandler("UL",(q,At)=>p._(this,void 0,void 0,function*(){this._getLayerIndex(q).update(At.layers,At.removedIds)})),this.actor.registerMessageHandler("SL",(q,At)=>p._(this,void 0,void 0,function*(){this._getLayerIndex(q).replace(At)}))}_setImages(K,q){return p._(this,void 0,void 0,function*(){this.availableImages[K]=q;for(const At in this.workerSources[K]){const pt=this.workerSources[K][At];for(const Pt in pt)pt[Pt].availableImages=q}})}_syncRTLPluginState(K,q){return p._(this,void 0,void 0,function*(){if(p.bC.isParsed())return p.bC.getState();if(q.pluginStatus!=="loading")return p.bC.setState(q),q;const At=q.pluginURL;if(this.self.importScripts(At),p.bC.isParsed()){const pt={pluginStatus:"loaded",pluginURL:At};return p.bC.setState(pt),pt}throw p.bC.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${At}`)})}_getAvailableImages(K){let q=this.availableImages[K];return q||(q=[]),q}_getLayerIndex(K){let q=this.layerIndexes[K];return q||(q=this.layerIndexes[K]=new A),q}_getWorkerSource(K,q,At){if(this.workerSources[K]||(this.workerSources[K]={}),this.workerSources[K][q]||(this.workerSources[K][q]={}),!this.workerSources[K][q][At]){const pt={sendAsync:(Pt,Dt)=>(Pt.targetMapId=K,this.actor.sendAsync(Pt,Dt))};switch(q){case"vector":this.workerSources[K][q][At]=new E(pt,this._getLayerIndex(K),this._getAvailableImages(K));break;case"geojson":this.workerSources[K][q][At]=new ri(pt,this._getLayerIndex(K),this._getAvailableImages(K));break;default:this.workerSources[K][q][At]=new this.externalWorkerSourceTypes[q](pt,this._getLayerIndex(K),this._getAvailableImages(K))}}return this.workerSources[K][q][At]}_getDEMWorkerSource(K,q){return this.demWorkerSources[K]||(this.demWorkerSources[K]={}),this.demWorkerSources[K][q]||(this.demWorkerSources[K][q]=new Q),this.demWorkerSources[K][q]}}return p.i(self)&&(self.worker=new jr(self)),jr}),u("index",["exports","./shared"],function(p,A){var v="4.6.0";let C,F;const E={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:_=>new Promise((e,c)=>{const g=requestAnimationFrame(e);_.signal.addEventListener("abort",()=>{cancelAnimationFrame(g),c(A.c())})}),getImageData(_,e=0){return this.getImageCanvasContext(_).getImageData(-e,-e,_.width+2*e,_.height+2*e)},getImageCanvasContext(_){const e=window.document.createElement("canvas"),c=e.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return e.width=_.width,e.height=_.height,c.drawImage(_,0,0,_.width,_.height),c},resolveURL:_=>(C||(C=document.createElement("a")),C.href=_,C.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(F==null&&(F=matchMedia("(prefers-reduced-motion: reduce)")),F.matches)}};class Q{static testProp(e){if(!Q.docStyle)return e[0];for(let c=0;c<e.length;c++)if(e[c]in Q.docStyle)return e[c];return e[0]}static create(e,c,g){const a=window.document.createElement(e);return c!==void 0&&(a.className=c),g&&g.appendChild(a),a}static createNS(e,c){return window.document.createElementNS(e,c)}static disableDrag(){Q.docStyle&&Q.selectProp&&(Q.userSelect=Q.docStyle[Q.selectProp],Q.docStyle[Q.selectProp]="none")}static enableDrag(){Q.docStyle&&Q.selectProp&&(Q.docStyle[Q.selectProp]=Q.userSelect)}static setTransform(e,c){e.style[Q.transformProp]=c}static addEventListener(e,c,g,a={}){e.addEventListener(c,g,"passive"in a?a:a.capture)}static removeEventListener(e,c,g,a={}){e.removeEventListener(c,g,"passive"in a?a:a.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",Q.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",Q.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",Q.suppressClickInternal,!0)},0)}static getScale(e){const c=e.getBoundingClientRect();return{x:c.width/e.offsetWidth||1,y:c.height/e.offsetHeight||1,boundingClientRect:c}}static getPoint(e,c,g){const a=c.boundingClientRect;return new A.P((g.clientX-a.left)/c.x-e.clientLeft,(g.clientY-a.top)/c.y-e.clientTop)}static mousePos(e,c){const g=Q.getScale(e);return Q.getPoint(e,g,c)}static touchPos(e,c){const g=[],a=Q.getScale(e);for(let h=0;h<c.length;h++)g.push(Q.getPoint(e,a,c[h]));return g}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}}Q.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,Q.selectProp=Q.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),Q.transformProp=Q.testProp(["transform","WebkitTransform"]);const T={supported:!1,testSupport:function(_){!W&&R&&(j?rt(_):V=_)}};let V,R,W=!1,j=!1;function rt(_){const e=_.createTexture();_.bindTexture(_.TEXTURE_2D,e);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,R),_.isContextLost())return;T.supported=!0}catch{}_.deleteTexture(e),W=!0}var ht;typeof document<"u"&&(R=document.createElement("img"),R.onload=()=>{V&&rt(V),V=null,j=!0},R.onerror=()=>{W=!0,V=null},R.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(_){let e,c,g,a;_.resetRequestQueue=()=>{e=[],c=0,g=0,a={}},_.addThrottleControl=B=>{const S=g++;return a[S]=B,S},_.removeThrottleControl=B=>{delete a[B],m()},_.getImage=(B,S,P=!0)=>new Promise((L,M)=>{T.supported&&(B.headers||(B.headers={}),B.headers.accept="image/webp,*/*"),A.e(B,{type:"image"}),e.push({abortController:S,requestParameters:B,supportImageRefresh:P,state:"queued",onError:N=>{M(N)},onSuccess:N=>{L(N)}}),m()});const h=B=>A._(this,void 0,void 0,function*(){B.state="running";const{requestParameters:S,supportImageRefresh:P,onError:L,onSuccess:M,abortController:N}=B,H=P===!1&&!A.i(self)&&!A.g(S.url)&&(!S.headers||Object.keys(S.headers).reduce((X,ut)=>X&&ut==="accept",!0));c++;const Z=H?w(S,N):A.m(S,N);try{const X=yield Z;delete B.abortController,B.state="completed",X.data instanceof HTMLImageElement||A.b(X.data)?M(X):X.data&&M({data:yield(G=X.data,typeof createImageBitmap=="function"?A.d(G):A.f(G)),cacheControl:X.cacheControl,expires:X.expires})}catch(X){delete B.abortController,L(X)}finally{c--,m()}var G}),m=()=>{const B=(()=>{for(const S of Object.keys(a))if(a[S]())return!0;return!1})()?A.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:A.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let S=c;S<B&&e.length>0;S++){const P=e.shift();P.abortController.signal.aborted?S--:h(P)}},w=(B,S)=>new Promise((P,L)=>{const M=new Image,N=B.url,H=B.credentials;H&&H==="include"?M.crossOrigin="use-credentials":(H&&H==="same-origin"||!A.s(N))&&(M.crossOrigin="anonymous"),S.signal.addEventListener("abort",()=>{M.src="",L(A.c())}),M.fetchPriority="high",M.onload=()=>{M.onerror=M.onload=null,P({data:M})},M.onerror=()=>{M.onerror=M.onload=null,S.signal.aborted||L(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},M.src=N})}(ht||(ht={})),ht.resetRequestQueue();class Bt{constructor(e){this._transformRequestFn=e}transformRequest(e,c){return this._transformRequestFn&&this._transformRequestFn(e,c)||{url:e}}setTransformRequest(e){this._transformRequestFn=e}}function Et(_){var e=new A.A(3);return e[0]=_[0],e[1]=_[1],e[2]=_[2],e}var Tt,xt=function(_,e,c){return _[0]=e[0]-c[0],_[1]=e[1]-c[1],_[2]=e[2]-c[2],_};Tt=new A.A(3),A.A!=Float32Array&&(Tt[0]=0,Tt[1]=0,Tt[2]=0);var ft=function(_){var e=_[0],c=_[1];return e*e+c*c};function Nt(_){const e=[];if(typeof _=="string")e.push({id:"default",url:_});else if(_&&_.length>0){const c=[];for(const{id:g,url:a}of _){const h=`${g}${a}`;c.indexOf(h)===-1&&(c.push(h),e.push({id:g,url:a}))}}return e}function jt(_,e,c){const g=_.split("?");return g[0]+=`${e}${c}`,g.join("?")}(function(){var _=new A.A(2);A.A!=Float32Array&&(_[0]=0,_[1]=0)})();class at{constructor(e,c,g,a){this.context=e,this.format=g,this.texture=e.gl.createTexture(),this.update(c,a)}update(e,c,g){const{width:a,height:h}=e,m=!(this.size&&this.size[0]===a&&this.size[1]===h||g),{context:w}=this,{gl:B}=w;if(this.useMipmap=!!(c&&c.useMipmap),B.bindTexture(B.TEXTURE_2D,this.texture),w.pixelStoreUnpackFlipY.set(!1),w.pixelStoreUnpack.set(1),w.pixelStoreUnpackPremultiplyAlpha.set(this.format===B.RGBA&&(!c||c.premultiply!==!1)),m)this.size=[a,h],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||A.b(e)?B.texImage2D(B.TEXTURE_2D,0,this.format,this.format,B.UNSIGNED_BYTE,e):B.texImage2D(B.TEXTURE_2D,0,this.format,a,h,0,this.format,B.UNSIGNED_BYTE,e.data);else{const{x:S,y:P}=g||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||A.b(e)?B.texSubImage2D(B.TEXTURE_2D,0,S,P,B.RGBA,B.UNSIGNED_BYTE,e):B.texSubImage2D(B.TEXTURE_2D,0,S,P,a,h,B.RGBA,B.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&B.generateMipmap(B.TEXTURE_2D)}bind(e,c,g){const{context:a}=this,{gl:h}=a;h.bindTexture(h.TEXTURE_2D,this.texture),g!==h.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(g=h.LINEAR),e!==this.filter&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,e),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,g||e),this.filter=e),c!==this.wrap&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,c),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}function ct(_){const{userImage:e}=_;return!!(e&&e.render&&e.render())&&(_.data.replace(new Uint8Array(e.data.buffer)),!0)}class vt extends A.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new A.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:c,promiseResolve:g}of this.requestors)g(this._getImagesForIds(c));this.requestors=[]}}getImage(e){const c=this.images[e];if(c&&!c.data&&c.spriteData){const g=c.spriteData;c.data=new A.R({width:g.width,height:g.height},g.context.getImageData(g.x,g.y,g.width,g.height).data),c.spriteData=null}return c}addImage(e,c){if(this.images[e])throw new Error(`Image id ${e} already exist, use updateImage instead`);this._validate(e,c)&&(this.images[e]=c)}_validate(e,c){let g=!0;const a=c.data||c.spriteData;return this._validateStretch(c.stretchX,a&&a.width)||(this.fire(new A.j(new Error(`Image "${e}" has invalid "stretchX" value`))),g=!1),this._validateStretch(c.stretchY,a&&a.height)||(this.fire(new A.j(new Error(`Image "${e}" has invalid "stretchY" value`))),g=!1),this._validateContent(c.content,c)||(this.fire(new A.j(new Error(`Image "${e}" has invalid "content" value`))),g=!1),g}_validateStretch(e,c){if(!e)return!0;let g=0;for(const a of e){if(a[0]<g||a[1]<a[0]||c<a[1])return!1;g=a[1]}return!0}_validateContent(e,c){if(!e)return!0;if(e.length!==4)return!1;const g=c.spriteData,a=g&&g.width||c.data.width,h=g&&g.height||c.data.height;return!(e[0]<0||a<e[0]||e[1]<0||h<e[1]||e[2]<0||a<e[2]||e[3]<0||h<e[3]||e[2]<e[0]||e[3]<e[1])}updateImage(e,c,g=!0){const a=this.getImage(e);if(g&&(a.data.width!==c.data.width||a.data.height!==c.data.height))throw new Error(`size mismatch between old image (${a.data.width}x${a.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=a.version+1,this.images[e]=c,this.updatedImages[e]=!0}removeImage(e){const c=this.images[e];delete this.images[e],delete this.patterns[e],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e){return new Promise((c,g)=>{let a=!0;if(!this.isLoaded())for(const h of e)this.images[h]||(a=!1);this.isLoaded()||a?c(this._getImagesForIds(e)):this.requestors.push({ids:e,promiseResolve:c})})}_getImagesForIds(e){const c={};for(const g of e){let a=this.getImage(g);a||(this.fire(new A.k("styleimagemissing",{id:g})),a=this.getImage(g)),a?c[g]={data:a.data.clone(),pixelRatio:a.pixelRatio,sdf:a.sdf,version:a.version,stretchX:a.stretchX,stretchY:a.stretchY,content:a.content,textFitWidth:a.textFitWidth,textFitHeight:a.textFitHeight,hasRenderCallback:!!(a.userImage&&a.userImage.render)}:A.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:e,height:c}=this.atlasImage;return{width:e,height:c}}getPattern(e){const c=this.patterns[e],g=this.getImage(e);if(!g)return null;if(c&&c.position.version===g.version)return c.position;if(c)c.position.version=g.version;else{const a={w:g.data.width+2,h:g.data.height+2,x:0,y:0},h=new A.I(a,g);this.patterns[e]={bin:a,position:h}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const c=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new at(e,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const h in this.patterns)e.push(this.patterns[h].bin);const{w:c,h:g}=A.p(e),a=this.atlasImage;a.resize({width:c||1,height:g||1});for(const h in this.patterns){const{bin:m}=this.patterns[h],w=m.x+1,B=m.y+1,S=this.getImage(h).data,P=S.width,L=S.height;A.R.copy(S,a,{x:0,y:0},{x:w,y:B},{width:P,height:L}),A.R.copy(S,a,{x:0,y:L-1},{x:w,y:B-1},{width:P,height:1}),A.R.copy(S,a,{x:0,y:0},{x:w,y:B+L},{width:P,height:1}),A.R.copy(S,a,{x:P-1,y:0},{x:w-1,y:B},{width:1,height:L}),A.R.copy(S,a,{x:0,y:0},{x:w+P,y:B},{width:1,height:L})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const c of e){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const g=this.getImage(c);g||A.w(`Image with ID: "${c}" was not found`),ct(g)&&this.updateImage(c,g)}}}const mt=1e20;function $t(_,e,c,g,a,h,m,w,B){for(let S=e;S<e+g;S++)Vt(_,c*h+S,h,a,m,w,B);for(let S=c;S<c+a;S++)Vt(_,S*h+e,1,g,m,w,B)}function Vt(_,e,c,g,a,h,m){h[0]=0,m[0]=-mt,m[1]=mt,a[0]=_[e];for(let w=1,B=0,S=0;w<g;w++){a[w]=_[e+w*c];const P=w*w;do{const L=h[B];S=(a[w]-a[L]+P-L*L)/(w-L)/2}while(S<=m[B]&&--B>-1);B++,h[B]=w,m[B]=S,m[B+1]=mt}for(let w=0,B=0;w<g;w++){for(;m[B+1]<w;)B++;const S=h[B],P=w-S;_[e+w*c]=a[S]+P*P}}class Zt{constructor(e,c){this.requestManager=e,this.localIdeographFontFamily=c,this.entries={}}setURL(e){this.url=e}getGlyphs(e){return A._(this,void 0,void 0,function*(){const c=[];for(const h in e)for(const m of e[h])c.push(this._getAndCacheGlyphsPromise(h,m));const g=yield Promise.all(c),a={};for(const{stack:h,id:m,glyph:w}of g)a[h]||(a[h]={}),a[h][m]=w&&{id:w.id,bitmap:w.bitmap.clone(),metrics:w.metrics};return a})}_getAndCacheGlyphsPromise(e,c){return A._(this,void 0,void 0,function*(){let g=this.entries[e];g||(g=this.entries[e]={glyphs:{},requests:{},ranges:{}});let a=g.glyphs[c];if(a!==void 0)return{stack:e,id:c,glyph:a};if(a=this._tinySDF(g,e,c),a)return g.glyphs[c]=a,{stack:e,id:c,glyph:a};const h=Math.floor(c/256);if(256*h>65535)throw new Error("glyphs > 65535 not supported");if(g.ranges[h])return{stack:e,id:c,glyph:a};if(!this.url)throw new Error("glyphsUrl is not set");if(!g.requests[h]){const w=Zt.loadGlyphRange(e,h,this.url,this.requestManager);g.requests[h]=w}const m=yield g.requests[h];for(const w in m)this._doesCharSupportLocalGlyph(+w)||(g.glyphs[+w]=m[+w]);return g.ranges[h]=!0,{stack:e,id:c,glyph:m[c]||null}})}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(e))}_tinySDF(e,c,g){const a=this.localIdeographFontFamily;if(!a||!this._doesCharSupportLocalGlyph(g))return;let h=e.tinySDF;if(!h){let w="400";/bold/i.test(c)?w="900":/medium/i.test(c)?w="500":/light/i.test(c)&&(w="200"),h=e.tinySDF=new Zt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:a,fontWeight:w})}const m=h.draw(String.fromCharCode(g));return{id:g,bitmap:new A.o({width:m.width||60,height:m.height||60},m.data),metrics:{width:m.glyphWidth/2||24,height:m.glyphHeight/2||24,left:m.glyphLeft/2+.5||0,top:m.glyphTop/2-27.5||-8,advance:m.glyphAdvance/2||24,isDoubleResolution:!0}}}}Zt.loadGlyphRange=function(_,e,c,g){return A._(this,void 0,void 0,function*(){const a=256*e,h=a+255,m=g.transformRequest(c.replace("{fontstack}",_).replace("{range}",`${a}-${h}`),"Glyphs"),w=yield A.l(m,new AbortController);if(!w||!w.data)throw new Error(`Could not load glyph range. range: ${e}, ${a}-${h}`);const B={};for(const S of A.n(w.data))B[S.id]=S;return B})},Zt.TinySDF=class{constructor({fontSize:_=24,buffer:e=3,radius:c=8,cutoff:g=.25,fontFamily:a="sans-serif",fontWeight:h="normal",fontStyle:m="normal"}={}){this.buffer=e,this.cutoff=g,this.radius=c;const w=this.size=_+4*e,B=this._createCanvas(w),S=this.ctx=B.getContext("2d",{willReadFrequently:!0});S.font=`${m} ${h} ${_}px ${a}`,S.textBaseline="alphabetic",S.textAlign="left",S.fillStyle="black",this.gridOuter=new Float64Array(w*w),this.gridInner=new Float64Array(w*w),this.f=new Float64Array(w),this.z=new Float64Array(w+1),this.v=new Uint16Array(w)}_createCanvas(_){const e=document.createElement("canvas");return e.width=e.height=_,e}draw(_){const{width:e,actualBoundingBoxAscent:c,actualBoundingBoxDescent:g,actualBoundingBoxLeft:a,actualBoundingBoxRight:h}=this.ctx.measureText(_),m=Math.ceil(c),w=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(h-a))),B=Math.min(this.size-this.buffer,m+Math.ceil(g)),S=w+2*this.buffer,P=B+2*this.buffer,L=Math.max(S*P,0),M=new Uint8ClampedArray(L),N={data:M,width:S,height:P,glyphWidth:w,glyphHeight:B,glyphTop:m,glyphLeft:0,glyphAdvance:e};if(w===0||B===0)return N;const{ctx:H,buffer:Z,gridInner:G,gridOuter:X}=this;H.clearRect(Z,Z,w,B),H.fillText(_,Z,Z+m);const ut=H.getImageData(Z,Z,w,B);X.fill(mt,0,L),G.fill(0,0,L);for(let tt=0;tt<B;tt++)for(let it=0;it<w;it++){const st=ut.data[4*(tt*w+it)+3]/255;if(st===0)continue;const yt=(tt+Z)*S+it+Z;if(st===1)X[yt]=0,G[yt]=mt;else{const Lt=.5-st;X[yt]=Lt>0?Lt*Lt:0,G[yt]=Lt<0?Lt*Lt:0}}$t(X,0,0,S,P,S,this.f,this.v,this.z),$t(G,Z,Z,w,B,S,this.f,this.v,this.z);for(let tt=0;tt<L;tt++){const it=Math.sqrt(X[tt])-Math.sqrt(G[tt]);M[tt]=Math.round(255-255*(it/this.radius+this.cutoff))}return N}};class Ht{constructor(){this.specification=A.v.light.position}possiblyEvaluate(e,c){return A.x(e.expression.evaluate(c))}interpolate(e,c,g){return{x:A.y.number(e.x,c.x,g),y:A.y.number(e.y,c.y,g),z:A.y.number(e.z,c.z,g)}}}let Yt;class Wt extends A.E{constructor(e){super(),Yt=Yt||new A.q({anchor:new A.D(A.v.light.anchor),position:new Ht,color:new A.D(A.v.light.color),intensity:new A.D(A.v.light.intensity)}),this._transitionable=new A.T(Yt),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,c={}){if(!this._validate(A.r,e,c))for(const g in e){const a=e[g];g.endsWith("-transition")?this._transitionable.setTransition(g.slice(0,-11),a):this._transitionable.setValue(g,a)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,c,g){return(!g||g.validate!==!1)&&A.t(this,e.call(A.u,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:A.v}))}}const me=new A.q({"sky-color":new A.D(A.v.sky["sky-color"]),"horizon-color":new A.D(A.v.sky["horizon-color"]),"fog-color":new A.D(A.v.sky["fog-color"]),"fog-ground-blend":new A.D(A.v.sky["fog-ground-blend"]),"horizon-fog-blend":new A.D(A.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new A.D(A.v.sky["sky-horizon-blend"]),"atmosphere-blend":new A.D(A.v.sky["atmosphere-blend"])});class et extends A.E{constructor(e){super(),this._transitionable=new A.T(me),this.setSky(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new A.z(0))}setSky(e,c={}){if(!this._validate(A.B,e,c)){e||(e={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent"});for(const g in e){const a=e[g];g.endsWith("-transition")?this._transitionable.setTransition(g.slice(0,-11),a):this._transitionable.setValue(g,a)}}}getSky(){return this._transitionable.serialize()}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,c,g={}){return(g==null?void 0:g.validate)!==!1&&A.t(this,e.call(A.u,A.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:A.v})))}calculateFogBlendOpacity(e){return e<60?0:e<70?(e-60)/10:1}}class dt{constructor(e,c){this.width=e,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,c){const g=e.join(",")+String(c);return this.dashEntry[g]||(this.dashEntry[g]=this.addDash(e,c)),this.dashEntry[g]}getDashRanges(e,c,g){const a=[];let h=e.length%2==1?-e[e.length-1]*g:0,m=e[0]*g,w=!0;a.push({left:h,right:m,isDash:w,zeroLength:e[0]===0});let B=e[0];for(let S=1;S<e.length;S++){w=!w;const P=e[S];h=B*g,B+=P,m=B*g,a.push({left:h,right:m,isDash:w,zeroLength:P===0})}return a}addRoundDash(e,c,g){const a=c/2;for(let h=-g;h<=g;h++){const m=this.width*(this.nextRow+g+h);let w=0,B=e[w];for(let S=0;S<this.width;S++){S/B.right>1&&(B=e[++w]);const P=Math.abs(S-B.left),L=Math.abs(S-B.right),M=Math.min(P,L);let N;const H=h/g*(a+1);if(B.isDash){const Z=a-Math.abs(H);N=Math.sqrt(M*M+Z*Z)}else N=a-Math.sqrt(M*M+H*H);this.data[m+S]=Math.max(0,Math.min(255,N+128))}}}addRegularDash(e){for(let w=e.length-1;w>=0;--w){const B=e[w],S=e[w+1];B.zeroLength?e.splice(w,1):S&&S.isDash===B.isDash&&(S.left=B.left,e.splice(w,1))}const c=e[0],g=e[e.length-1];c.isDash===g.isDash&&(c.left=g.left-this.width,g.right=c.right+this.width);const a=this.width*this.nextRow;let h=0,m=e[h];for(let w=0;w<this.width;w++){w/m.right>1&&(m=e[++h]);const B=Math.abs(w-m.left),S=Math.abs(w-m.right),P=Math.min(B,S);this.data[a+w]=Math.max(0,Math.min(255,(m.isDash?P:-P)+128))}}addDash(e,c){const g=c?7:0,a=2*g+1;if(this.nextRow+a>this.height)return A.w("LineAtlas out of space"),null;let h=0;for(let w=0;w<e.length;w++)h+=e[w];if(h!==0){const w=this.width/h,B=this.getDashRanges(e,this.width,w);c?this.addRoundDash(B,w,g):this.addRegularDash(B)}const m={y:(this.nextRow+g+.5)/this.height,height:2*g/this.height,width:h};return this.nextRow+=a,this.dirty=!0,m}bind(e){const c=e.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const _t="maplibre_preloaded_worker_pool";class St{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<St.workerCount;)this.workers.push(new Worker(A.a.WORKER_URL));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[_t]}numActive(){return Object.keys(this.active).length}}const Ot=Math.floor(E.hardwareConcurrency/2);let Rt,Jt;function re(){return Rt||(Rt=new St),Rt}St.workerCount=A.C(globalThis)?Math.max(Math.min(Ot,3),1):1;class be{constructor(e,c){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=c;const g=this.workerPool.acquire(c);for(let a=0;a<g.length;a++){const h=new A.F(g[a],c);h.name=`Worker ${a}`,this.actors.push(h)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,c){const g=[];for(const a of this.actors)g.push(a.sendAsync({type:e,data:c}));return Promise.all(g)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(e=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],e&&this.workerPool.release(this.id)}registerMessageHandler(e,c){for(const g of this.actors)g.registerMessageHandler(e,c)}}function _e(){return Jt||(Jt=new be(re(),A.G),Jt.registerMessageHandler("GR",(_,e,c)=>A.m(e,c))),Jt}function Te(_,e){const c=A.H();return A.J(c,c,[1,1,0]),A.K(c,c,[.5*_.width,.5*_.height,1]),A.L(c,c,_.calculatePosMatrix(e.toUnwrapped()))}function Qe(_,e,c,g,a,h){const m=function(L,M,N){if(L)for(const H of L){const Z=M[H];if(Z&&Z.source===N&&Z.type==="fill-extrusion")return!0}else for(const H in M){const Z=M[H];if(Z.source===N&&Z.type==="fill-extrusion")return!0}return!1}(a&&a.layers,e,_.id),w=h.maxPitchScaleFactor(),B=_.tilesIn(g,w,m);B.sort(je);const S=[];for(const L of B)S.push({wrappedTileID:L.tileID.wrapped().key,queryResults:L.tile.queryRenderedFeatures(e,c,_._state,L.queryGeometry,L.cameraQueryGeometry,L.scale,a,h,w,Te(_.transform,L.tileID))});const P=function(L){const M={},N={};for(const H of L){const Z=H.queryResults,G=H.wrappedTileID,X=N[G]=N[G]||{};for(const ut in Z){const tt=Z[ut],it=X[ut]=X[ut]||{},st=M[ut]=M[ut]||[];for(const yt of tt)it[yt.featureIndex]||(it[yt.featureIndex]=!0,st.push(yt))}}return M}(S);for(const L in P)P[L].forEach(M=>{const N=M.feature,H=_.getFeatureState(N.layer["source-layer"],N.id);N.source=N.layer.source,N.layer["source-layer"]&&(N.sourceLayer=N.layer["source-layer"]),N.state=H});return P}function je(_,e){const c=_.tileID,g=e.tileID;return c.overscaledZ-g.overscaledZ||c.canonical.y-g.canonical.y||c.wrap-g.wrap||c.canonical.x-g.canonical.x}function oe(_,e,c){return A._(this,void 0,void 0,function*(){let g=_;if(_.url?g=(yield A.h(e.transformRequest(_.url,"Source"),c)).data:yield E.frameAsync(c),!g)return null;const a=A.M(A.e(g,_),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in g&&g.vector_layers&&(a.vectorLayerIds=g.vector_layers.map(h=>h.id)),a})}class nt{constructor(e,c){e&&(c?this.setSouthWest(e).setNorthEast(c):Array.isArray(e)&&(e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1])))}setNorthEast(e){return this._ne=e instanceof A.N?new A.N(e.lng,e.lat):A.N.convert(e),this}setSouthWest(e){return this._sw=e instanceof A.N?new A.N(e.lng,e.lat):A.N.convert(e),this}extend(e){const c=this._sw,g=this._ne;let a,h;if(e instanceof A.N)a=e,h=e;else{if(!(e instanceof nt))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(nt.convert(e)):this.extend(A.N.convert(e)):e&&("lng"in e||"lon"in e)&&"lat"in e?this.extend(A.N.convert(e)):this;if(a=e._sw,h=e._ne,!a||!h)return this}return c||g?(c.lng=Math.min(a.lng,c.lng),c.lat=Math.min(a.lat,c.lat),g.lng=Math.max(h.lng,g.lng),g.lat=Math.max(h.lat,g.lat)):(this._sw=new A.N(a.lng,a.lat),this._ne=new A.N(h.lng,h.lat)),this}getCenter(){return new A.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new A.N(this.getWest(),this.getNorth())}getSouthEast(){return new A.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:c,lat:g}=A.N.convert(e);let a=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(a=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=g&&g<=this._ne.lat&&a}static convert(e){return e instanceof nt?e:e&&new nt(e)}static fromLngLat(e,c=0){const g=360*c/40075017,a=g/Math.cos(Math.PI/180*e.lat);return new nt(new A.N(e.lng-a,e.lat-g),new A.N(e.lng+a,e.lat+g))}}class cr{constructor(e,c,g){this.bounds=nt.convert(this.validateBounds(e)),this.minzoom=c||0,this.maxzoom=g||24}validateBounds(e){return Array.isArray(e)&&e.length===4?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(e){const c=Math.pow(2,e.z),g=Math.floor(A.O(this.bounds.getWest())*c),a=Math.floor(A.Q(this.bounds.getNorth())*c),h=Math.ceil(A.O(this.bounds.getEast())*c),m=Math.ceil(A.Q(this.bounds.getSouth())*c);return e.x>=g&&e.x<h&&e.y>=a&&e.y<m}}class Ke extends A.E{constructor(e,c,g,a){if(super(),this.id=e,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,A.e(this,A.M(c,["url","scheme","tileSize","promoteId"])),this._options=A.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(a)}load(){return A._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new A.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield oe(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e&&(A.e(this,e),e.bounds&&(this.tileBounds=new cr(e.bounds,this.minzoom,this.maxzoom)),this.fire(new A.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new A.k("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new A.j(e))}})}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.abort(),e(),this.load()}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return A.e({},this._options)}loadTile(e){return A._(this,void 0,void 0,function*(){const c=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(c,"Tile"),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};g.request.collectResourceTiming=this._collectResourceTiming;let a="RT";if(e.actor&&e.state!=="expired"){if(e.state==="loading")return new Promise((h,m)=>{e.reloadPromise={resolve:h,reject:m}})}else e.actor=this.dispatcher.getActor(),a="LT";e.abortController=new AbortController;try{const h=yield e.actor.sendAsync({type:a,data:g},e.abortController);if(delete e.abortController,e.aborted)return;this._afterTileLoadWorkerResponse(e,h)}catch(h){if(delete e.abortController,e.aborted)return;if(h&&h.status!==404)throw h;this._afterTileLoadWorkerResponse(e,null)}})}_afterTileLoadWorkerResponse(e,c){if(c&&c.resourceTiming&&(e.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&e.setExpiryData(c),e.loadVectorData(c,this.map.painter),e.reloadPromise){const g=e.reloadPromise;e.reloadPromise=null,this.loadTile(e).then(g.resolve).catch(g.reject)}}abortTile(e){return A._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.actor&&(yield e.actor.sendAsync({type:"AT",data:{uid:e.uid,type:this.type,source:this.id}}))})}unloadTile(e){return A._(this,void 0,void 0,function*(){e.unloadVectorData(),e.actor&&(yield e.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Ae extends A.E{constructor(e,c,g,a){super(),this.id=e,this.dispatcher=g,this.setEventedParent(a),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=A.e({type:"raster"},c),A.e(this,A.M(c,["url","scheme","tileSize"]))}load(){return A._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new A.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield oe(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,e&&(A.e(this,e),e.bounds&&(this.tileBounds=new cr(e.bounds,this.minzoom,this.maxzoom)),this.fire(new A.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new A.k("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new A.j(e))}})}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(e){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),e(),this.load()}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}serialize(){return A.e({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e){return A._(this,void 0,void 0,function*(){const c=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.abortController=new AbortController;try{const g=yield ht.getImage(this.map._requestManager.transformRequest(c,"Tile"),e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(g&&g.data){this.map._refreshExpiredTiles&&g.cacheControl&&g.expires&&e.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});const a=this.map.painter.context,h=a.gl,m=g.data;e.texture=this.map.painter.getTileTexture(m.width),e.texture?e.texture.update(m,{useMipmap:!0}):(e.texture=new at(a,m,h.RGBA,{useMipmap:!0}),e.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE,h.LINEAR_MIPMAP_NEAREST)),e.state="loaded"}}catch(g){if(delete e.abortController,e.aborted)e.state="unloaded";else if(g)throw e.state="errored",g}})}abortTile(e){return A._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController)})}unloadTile(e){return A._(this,void 0,void 0,function*(){e.texture&&this.map.painter.saveTileTexture(e.texture)})}hasTransition(){return!1}}class ge extends Ae{constructor(e,c,g,a){super(e,c,g,a),this.type="raster-dem",this.maxzoom=22,this._options=A.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(e){return A._(this,void 0,void 0,function*(){const c=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(c,"Tile");e.neighboringTiles=this._getNeighboringTiles(e.tileID),e.abortController=new AbortController;try{const a=yield ht.getImage(g,e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(a&&a.data){const h=a.data;this.map._refreshExpiredTiles&&a.cacheControl&&a.expires&&e.setExpiryData({cacheControl:a.cacheControl,expires:a.expires});const m=A.b(h)&&A.U()?h:yield this.readImageNow(h),w={type:this.type,uid:e.uid,source:this.id,rawImageData:m,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!e.actor||e.state==="expired"){e.actor=this.dispatcher.getActor();const B=yield e.actor.sendAsync({type:"LDT",data:w});e.dem=B,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded"}}}catch(a){if(delete e.abortController,e.aborted)e.state="unloaded";else if(a)throw e.state="errored",a}})}readImageNow(e){return A._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&A.V()){const c=e.width+2,g=e.height+2;try{return new A.R({width:c,height:g},yield A.W(e,-1,-1,c,g))}catch{}}return E.getImageData(e,1)})}_getNeighboringTiles(e){const c=e.canonical,g=Math.pow(2,c.z),a=(c.x-1+g)%g,h=c.x===0?e.wrap-1:e.wrap,m=(c.x+1+g)%g,w=c.x+1===g?e.wrap+1:e.wrap,B={};return B[new A.S(e.overscaledZ,h,c.z,a,c.y).key]={backfilled:!1},B[new A.S(e.overscaledZ,w,c.z,m,c.y).key]={backfilled:!1},c.y>0&&(B[new A.S(e.overscaledZ,h,c.z,a,c.y-1).key]={backfilled:!1},B[new A.S(e.overscaledZ,e.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},B[new A.S(e.overscaledZ,w,c.z,m,c.y-1).key]={backfilled:!1}),c.y+1<g&&(B[new A.S(e.overscaledZ,h,c.z,a,c.y+1).key]={backfilled:!1},B[new A.S(e.overscaledZ,e.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},B[new A.S(e.overscaledZ,w,c.z,m,c.y+1).key]={backfilled:!1}),B}unloadTile(e){return A._(this,void 0,void 0,function*(){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&(yield e.actor.sendAsync({type:"RDT",data:{type:this.type,uid:e.uid,source:this.id}}))})}}class Se extends A.E{constructor(e,c,g,a){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=g.getActor(),this.setEventedParent(a),this._data=c.data,this._options=A.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const h=A.X/this.tileSize;this.workerOptions=A.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*h,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*h,extent:A.X,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:A.X,radius:(c.clusterRadius||50)*h,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return A._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(e){this.map=e,this.load()}setData(e){return this._data=e,this._updateWorkerData(),this}updateData(e){return this._updateWorkerData(e),this}getData(){return A._(this,void 0,void 0,function*(){const e=A.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:e})})}setClusterOptions(e){return this.workerOptions.cluster=e.cluster,e&&(e.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=e.clusterRadius),e.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=e.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(e){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:e,source:this.id}})}getClusterChildren(e){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:e,source:this.id}})}getClusterLeaves(e,c,g){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:e,limit:c,offset:g}})}_updateWorkerData(e){return A._(this,void 0,void 0,function*(){const c=A.e({type:this.type},this.workerOptions);e?c.dataDiff=e:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(E.resolveURL(this._data),"Source"),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new A.k("dataloading",{dataType:"source"}));try{const g=yield this.actor.sendAsync({type:"LD",data:c});if(this._pendingLoads--,this._removed||g.abandoned)return void this.fire(new A.k("dataabort",{dataType:"source"}));let a=null;g.resourceTiming&&g.resourceTiming[this.id]&&(a=g.resourceTiming[this.id].slice(0));const h={dataType:"source"};this._collectResourceTiming&&a&&a.length>0&&A.e(h,{resourceTiming:a}),this.fire(new A.k("data",Object.assign(Object.assign({},h),{sourceDataType:"metadata"}))),this.fire(new A.k("data",Object.assign(Object.assign({},h),{sourceDataType:"content"})))}catch(g){if(this._pendingLoads--,this._removed)return void this.fire(new A.k("dataabort",{dataType:"source"}));this.fire(new A.j(g))}})}loaded(){return this._pendingLoads===0}loadTile(e){return A._(this,void 0,void 0,function*(){const c=e.actor?"RT":"LT";e.actor=this.actor;const g={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};e.abortController=new AbortController;const a=yield this.actor.sendAsync({type:c,data:g},e.abortController);delete e.abortController,e.unloadVectorData(),e.aborted||e.loadVectorData(a,this.map.painter,c==="RT")})}abortTile(e){return A._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.aborted=!0})}unloadTile(e){return A._(this,void 0,void 0,function*(){e.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return A.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Ce=A.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class He extends A.E{constructor(e,c,g,a){super(),this.id=e,this.dispatcher=g,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(a),this.options=c}load(e){return A._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new A.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield ht.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,e&&(this.coordinates=e),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new A.j(c))}})}loaded(){return this._loaded}updateImage(e){return e.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=e.url,this.load(e.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new A.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(e){this.coordinates=e;const c=e.map(A.Z.fromLngLat);this.tileID=function(a){let h=1/0,m=1/0,w=-1/0,B=-1/0;for(const M of a)h=Math.min(h,M.x),m=Math.min(m,M.y),w=Math.max(w,M.x),B=Math.max(B,M.y);const S=Math.max(w-h,B-m),P=Math.max(0,Math.floor(-Math.log(S)/Math.LN2)),L=Math.pow(2,P);return new A.a1(P,Math.floor((h+w)/2*L),Math.floor((m+B)/2*L))}(c),this.minzoom=this.maxzoom=this.tileID.z;const g=c.map(a=>this.tileID.getTilePoint(a)._round());return this._boundsArray=new A.$,this._boundsArray.emplaceBack(g[0].x,g[0].y,0,0),this._boundsArray.emplaceBack(g[1].x,g[1].y,A.X,0),this._boundsArray.emplaceBack(g[3].x,g[3].y,0,A.X),this._boundsArray.emplaceBack(g[2].x,g[2].y,A.X,A.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new A.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const e=this.map.painter.context,c=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,Ce.members)),this.boundsSegments||(this.boundsSegments=A.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new at(e,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let g=!1;for(const a in this.tiles){const h=this.tiles[a];h.state!=="loaded"&&(h.state="loaded",h.texture=this.texture,g=!0)}g&&this.fire(new A.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(e){return A._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={}):e.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Xe extends He{constructor(e,c,g,a){super(e,c,g,a),this.roundZoom=!0,this.type="video",this.options=c}load(){return A._(this,void 0,void 0,function*(){this._loaded=!1;const e=this.options;this.urls=[];for(const c of e.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield A.a3(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new A.j(c))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const c=this.video.seekable;e<c.start(0)||e>c.end(0)?this.fire(new A.j(new A.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const e=this.map.painter.context,c=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,Ce.members)),this.boundsSegments||(this.boundsSegments=A.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new at(e,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let g=!1;for(const a in this.tiles){const h=this.tiles[a];h.state!=="loaded"&&(h.state="loaded",h.texture=this.texture,g=!0)}g&&this.fire(new A.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class nr extends He{constructor(e,c,g,a){super(e,c,g,a),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(h=>!Array.isArray(h)||h.length!==2||h.some(m=>typeof m!="number"))||this.fire(new A.j(new A.a2(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new A.j(new A.a2(`sources.${e}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new A.j(new A.a2(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new A.j(new A.a2(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new A.j(new A.a2(`sources.${e}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return A._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new A.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,g=c.gl;this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,Ce.members)),this.boundsSegments||(this.boundsSegments=A.a0.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new at(c,this.canvas,g.RGBA,{premultiply:!0});let a=!1;for(const h in this.tiles){const m=this.tiles[h];m.state!=="loaded"&&(m.state="loaded",m.texture=this.texture,a=!0)}a&&this.fire(new A.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}const yr={},br=_=>{switch(_){case"geojson":return Se;case"image":return He;case"raster":return Ae;case"raster-dem":return ge;case"vector":return Ke;case"video":return Xe;case"canvas":return nr}return yr[_]},ce="RTLPluginLoaded";class Je extends A.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=_e()}_syncState(e){return this.status=e,this.dispatcher.broadcast("SRPS",{pluginStatus:e,pluginURL:this.url}).catch(c=>{throw this.status="error",c})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(e){return A._(this,arguments,void 0,function*(c,g=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=E.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!g)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return A._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new A.k(ce))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let sr=null;function Ie(){return sr||(sr=new Je),sr}class Xr{constructor(e,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=e,this.uid=A.a4(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const c=e+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(e,c,g){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(a,h){const m={};if(!h)return m;for(const w of a){const B=w.layerIds.map(S=>h.getLayer(S)).filter(Boolean);if(B.length!==0){w.layers=B,w.stateDependentLayerIds&&(w.stateDependentLayers=w.stateDependentLayerIds.map(S=>B.filter(P=>P.id===S)[0]));for(const S of B)m[S.id]=w}}return m}(e.buckets,c.style),this.hasSymbolBuckets=!1;for(const a in this.buckets){const h=this.buckets[a];if(h instanceof A.a6){if(this.hasSymbolBuckets=!0,!g)break;h.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const a in this.buckets){const h=this.buckets[a];if(h instanceof A.a6&&h.hasRTLText){this.hasRTLText=!0,Ie().lazyLoad();break}}this.queryPadding=0;for(const a in this.buckets){const h=this.buckets[a];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(a).queryRadius(h))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new A.a5}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const g in this.buckets){const a=this.buckets[g];a.uploadPending()&&a.upload(e)}const c=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new at(e,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new at(e,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,c,g,a,h,m,w,B,S,P){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:a,cameraQueryGeometry:h,scale:m,tileSize:this.tileSize,pixelPosMatrix:P,transform:B,params:w,queryPadding:this.queryPadding*S},e,c,g):{}}querySourceFeatures(e,c){const g=this.latestFeatureIndex;if(!g||!g.rawTileData)return;const a=g.loadVTLayers(),h=c&&c.sourceLayer?c.sourceLayer:"",m=a._geojsonTileLayer||a[h];if(!m)return;const w=A.a7(c&&c.filter),{z:B,x:S,y:P}=this.tileID.canonical,L={z:B,x:S,y:P};for(let M=0;M<m.length;M++){const N=m.feature(M);if(w.needGeometry){const G=A.a8(N,!0);if(!w.filter(new A.z(this.tileID.overscaledZ),G,this.tileID.canonical))continue}else if(!w.filter(new A.z(this.tileID.overscaledZ),N))continue;const H=g.getId(N,h),Z=new A.a9(N,B,S,P,H);Z.tile=L,e.push(Z)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const c=this.expirationTime;if(e.cacheControl){const g=A.aa(e.cacheControl);g["max-age"]&&(this.expirationTime=Date.now()+1e3*g["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const g=Date.now();let a=!1;if(this.expirationTime>g)a=!1;else if(c)if(this.expirationTime<c)a=!0;else{const h=this.expirationTime-c;h?this.expirationTime=g+Math.max(h,3e4):a=!0}else a=!0;a?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(e,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(e).length===0)return;const g=this.latestFeatureIndex.loadVTLayers();for(const a in this.buckets){if(!c.style.hasLayer(a))continue;const h=this.buckets[a],m=h.layers[0].sourceLayer||"_geojsonTileLayer",w=g[m],B=e[m];if(!w||!B||Object.keys(B).length===0)continue;h.update(B,w,this.imageAtlas&&this.imageAtlas.patternPositions||{});const S=c&&c.style&&c.style.getLayer(a);S&&(this.queryPadding=Math.max(this.queryPadding,S.queryRadius(h)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<E.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=E.now()+e}setDependencies(e,c){const g={};for(const a of c)g[a]=!0;this.dependencies[e]=g}hasDependency(e,c){for(const g of e){const a=this.dependencies[g];if(a){for(const h of c)if(a[h])return!0}}return!1}}class he{constructor(e,c){this.max=e,this.onRemove=c,this.reset()}reset(){for(const e in this.data)for(const c of this.data[e])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(e,c,g){const a=e.wrapped().key;this.data[a]===void 0&&(this.data[a]=[]);const h={value:c,timeout:void 0};if(g!==void 0&&(h.timeout=setTimeout(()=>{this.remove(e,h)},g)),this.data[a].push(h),this.order.push(a),this.order.length>this.max){const m=this._getAndRemoveByKey(this.order[0]);m&&this.onRemove(m)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const c=this.data[e].shift();return c.timeout&&clearTimeout(c.timeout),this.data[e].length===0&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),c.value}getByKey(e){const c=this.data[e];return c?c[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,c){if(!this.has(e))return this;const g=e.wrapped().key,a=c===void 0?0:this.data[g].indexOf(c),h=this.data[g][a];return this.data[g].splice(a,1),h.timeout&&clearTimeout(h.timeout),this.data[g].length===0&&delete this.data[g],this.onRemove(h.value),this.order.splice(this.order.indexOf(g),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(e){const c=[];for(const g in this.data)for(const a of this.data[g])e(a.value)||c.push(a);for(const g of c)this.remove(g.value.tileID,g)}}class rr{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,c,g){const a=String(c);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][a]=this.stateChanges[e][a]||{},A.e(this.stateChanges[e][a],g),this.deletedStates[e]===null){this.deletedStates[e]={};for(const h in this.state[e])h!==a&&(this.deletedStates[e][h]=null)}else if(this.deletedStates[e]&&this.deletedStates[e][a]===null){this.deletedStates[e][a]={};for(const h in this.state[e][a])g[h]||(this.deletedStates[e][a][h]=null)}else for(const h in g)this.deletedStates[e]&&this.deletedStates[e][a]&&this.deletedStates[e][a][h]===null&&delete this.deletedStates[e][a][h]}removeFeatureState(e,c,g){if(this.deletedStates[e]===null)return;const a=String(c);if(this.deletedStates[e]=this.deletedStates[e]||{},g&&c!==void 0)this.deletedStates[e][a]!==null&&(this.deletedStates[e][a]=this.deletedStates[e][a]||{},this.deletedStates[e][a][g]=null);else if(c!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][a])for(g in this.deletedStates[e][a]={},this.stateChanges[e][a])this.deletedStates[e][a][g]=null;else this.deletedStates[e][a]=null;else this.deletedStates[e]=null}getState(e,c){const g=String(c),a=A.e({},(this.state[e]||{})[g],(this.stateChanges[e]||{})[g]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){const h=this.deletedStates[e][c];if(h===null)return{};for(const m in h)delete a[m]}return a}initializeTileState(e,c){e.setFeatureState(this.state,c)}coalesceChanges(e,c){const g={};for(const a in this.stateChanges){this.state[a]=this.state[a]||{};const h={};for(const m in this.stateChanges[a])this.state[a][m]||(this.state[a][m]={}),A.e(this.state[a][m],this.stateChanges[a][m]),h[m]=this.state[a][m];g[a]=h}for(const a in this.deletedStates){this.state[a]=this.state[a]||{};const h={};if(this.deletedStates[a]===null)for(const m in this.state[a])h[m]={},this.state[a][m]={};else for(const m in this.deletedStates[a]){if(this.deletedStates[a][m]===null)this.state[a][m]={};else for(const w of Object.keys(this.deletedStates[a][m]))delete this.state[a][m][w];h[m]=this.state[a][m]}g[a]=g[a]||{},A.e(g[a],h)}if(this.stateChanges={},this.deletedStates={},Object.keys(g).length!==0)for(const a in e)e[a].setFeatureState(g,c)}}class Ee extends A.E{constructor(e,c,g){super(),this.id=e,this.dispatcher=g,this.on("data",a=>this._dataHandler(a)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((a,h,m,w)=>{const B=new(br(h.type))(a,h,m,w);if(B.id!==a)throw new Error(`Expected Source id to be ${a} instead of ${B.id}`);return B})(e,c,g,this),this._tiles={},this._cache=new he(0,a=>this._unloadTile(a)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new rr,this._didEmitContent=!1,this._updated=!1}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._maxTileCacheZoomLevels=e?e._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}onRemove(e){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const e in this._tiles){const c=this._tiles[e];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(e,c,g){return A._(this,void 0,void 0,function*(){try{yield this._source.loadTile(e),this._tileLoaded(e,c,g)}catch(a){e.state="errored",a.status!==404?this._source.fire(new A.j(a,{tile:e})):this.update(this.transform,this.terrain)}})}_unloadTile(e){this._source.unloadTile&&this._source.unloadTile(e)}_abortTile(e){this._source.abortTile&&this._source.abortTile(e),this._source.fire(new A.k("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const g=this._tiles[c];g.upload(e),g.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(e=>e.tileID).sort(vr).map(e=>e.key)}getRenderableIds(e){const c=[];for(const g in this._tiles)this._isIdRenderable(g,e)&&c.push(this._tiles[g]);return e?c.sort((g,a)=>{const h=g.tileID,m=a.tileID,w=new A.P(h.canonical.x,h.canonical.y)._rotate(this.transform.angle),B=new A.P(m.canonical.x,m.canonical.y)._rotate(this.transform.angle);return h.overscaledZ-m.overscaledZ||B.y-w.y||B.x-w.x}).map(g=>g.tileID.key):c.map(g=>g.tileID).sort(vr).map(g=>g.key)}hasRenderableParent(e){const c=this.findLoadedParent(e,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(e,c){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(c||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)this._tiles[e].state!=="errored"&&this._reloadTile(e,"reloading")}}_reloadTile(e,c){return A._(this,void 0,void 0,function*(){const g=this._tiles[e];g&&(g.state!=="loading"&&(g.state=c),yield this._loadTile(g,e,c))})}_tileLoaded(e,c,g){e.timeAdded=E.now(),g==="expired"&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(c,e),this.getSource().type==="raster-dem"&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new A.k("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(e){const c=this.getRenderableIds();for(let a=0;a<c.length;a++){const h=c[a];if(e.neighboringTiles&&e.neighboringTiles[h]){const m=this.getTileByID(h);g(e,m),g(m,e)}}function g(a,h){a.needsHillshadePrepare=!0,a.needsTerrainPrepare=!0;let m=h.tileID.canonical.x-a.tileID.canonical.x;const w=h.tileID.canonical.y-a.tileID.canonical.y,B=Math.pow(2,a.tileID.canonical.z),S=h.tileID.key;m===0&&w===0||Math.abs(w)>1||(Math.abs(m)>1&&(Math.abs(m+B)===1?m+=B:Math.abs(m-B)===1&&(m-=B)),h.dem&&a.dem&&(a.dem.backfillBorder(h.dem,m,w),a.neighboringTiles&&a.neighboringTiles[S]&&(a.neighboringTiles[S].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,c,g,a){for(const h in this._tiles){let m=this._tiles[h];if(a[h]||!m.hasData()||m.tileID.overscaledZ<=c||m.tileID.overscaledZ>g)continue;let w=m.tileID;for(;m&&m.tileID.overscaledZ>c+1;){const S=m.tileID.scaledTo(m.tileID.overscaledZ-1);m=this._tiles[S.key],m&&m.hasData()&&(w=S)}let B=w;for(;B.overscaledZ>c;)if(B=B.scaledTo(B.overscaledZ-1),e[B.key]){a[w.key]=w;break}}}findLoadedParent(e,c){if(e.key in this._loadedParentTiles){const g=this._loadedParentTiles[e.key];return g&&g.tileID.overscaledZ>=c?g:null}for(let g=e.overscaledZ-1;g>=c;g--){const a=e.scaledTo(g),h=this._getLoadedTile(a);if(h)return h}}findLoadedSibling(e){return this._getLoadedTile(e)}_getLoadedTile(e){const c=this._tiles[e.key];return c&&c.hasData()?c:this._cache.getByKey(e.wrapped().key)}updateCacheSize(e){const c=Math.ceil(e.width/this._source.tileSize)+1,g=Math.ceil(e.height/this._source.tileSize)+1,a=Math.floor(c*g*(this._maxTileCacheZoomLevels===null?A.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),h=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,a):a;this._cache.setMaxSize(h)}handleWrapJump(e){const c=Math.round((e-(this._prevLng===void 0?e:this._prevLng))/360);if(this._prevLng=e,c){const g={};for(const a in this._tiles){const h=this._tiles[a];h.tileID=h.tileID.unwrapTo(h.tileID.wrap+c),g[h.tileID.key]=h}this._tiles=g;for(const a in this._timers)clearTimeout(this._timers[a]),delete this._timers[a];for(const a in this._tiles)this._setTileReloadTimer(a,this._tiles[a])}}_updateCoveredAndRetainedTiles(e,c,g,a,h,m){const w={},B={},S=Object.keys(e),P=E.now();for(const L of S){const M=e[L],N=this._tiles[L];if(!N||N.fadeEndTime!==0&&N.fadeEndTime<=P)continue;const H=this.findLoadedParent(M,c),Z=this.findLoadedSibling(M),G=H||Z||null;G&&(this._addTile(G.tileID),w[G.tileID.key]=G.tileID),B[L]=M}this._retainLoadedChildren(B,a,g,e);for(const L in w)e[L]||(this._coveredTiles[L]=!0,e[L]=w[L]);if(m){const L={},M={};for(const N of h)this._tiles[N.key].hasData()?L[N.key]=N:M[N.key]=N;for(const N in M){const H=M[N].children(this._source.maxzoom);this._tiles[H[0].key]&&this._tiles[H[1].key]&&this._tiles[H[2].key]&&this._tiles[H[3].key]&&(L[H[0].key]=e[H[0].key]=H[0],L[H[1].key]=e[H[1].key]=H[1],L[H[2].key]=e[H[2].key]=H[2],L[H[3].key]=e[H[3].key]=H[3],delete M[N])}for(const N in M){const H=M[N],Z=this.findLoadedParent(H,this._source.minzoom),G=this.findLoadedSibling(H),X=Z||G||null;if(X){L[X.tileID.key]=e[X.tileID.key]=X.tileID;for(const ut in L)L[ut].isChildOf(X.tileID)&&delete L[ut]}}for(const N in this._tiles)L[N]||(this._coveredTiles[N]=!0)}}update(e,c){if(!this._sourceLoaded||this._paused)return;let g;this.transform=e,this.terrain=c,this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?g=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(P=>new A.S(P.canonical.z,P.wrap,P.canonical.z,P.canonical.x,P.canonical.y)):(g=e.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c}),this._source.hasTile&&(g=g.filter(P=>this._source.hasTile(P)))):g=[];const a=e.coveringZoomLevel(this._source),h=Math.max(a-Ee.maxOverzooming,this._source.minzoom),m=Math.max(a+Ee.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const P={};for(const L of g)if(L.canonical.z>this._source.minzoom){const M=L.scaledTo(L.canonical.z-1);P[M.key]=M;const N=L.scaledTo(Math.max(this._source.minzoom,Math.min(L.canonical.z,5)));P[N.key]=N}g=g.concat(Object.values(P))}const w=g.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,w&&this.fire(new A.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const B=this._updateRetainedTiles(g,a);ti(this._source.type)&&this._updateCoveredAndRetainedTiles(B,h,m,a,g,c);for(const P in B)this._tiles[P].clearFadeHold();const S=A.ab(this._tiles,B);for(const P of S){const L=this._tiles[P];L.hasSymbolBuckets&&!L.holdingForFade()?L.setHoldDuration(this.map._fadeDuration):L.hasSymbolBuckets&&!L.symbolFadeFinished()||this._removeTile(P)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)}_updateRetainedTiles(e,c){var g;const a={},h={},m=Math.max(c-Ee.maxOverzooming,this._source.minzoom),w=Math.max(c+Ee.maxUnderzooming,this._source.minzoom),B={};for(const S of e){const P=this._addTile(S);a[S.key]=S,P.hasData()||c<this._source.maxzoom&&(B[S.key]=S)}this._retainLoadedChildren(B,c,w,a);for(const S of e){let P=this._tiles[S.key];if(P.hasData())continue;if(c+1>this._source.maxzoom){const M=S.children(this._source.maxzoom)[0],N=this.getTile(M);if(N&&N.hasData()){a[M.key]=M;continue}}else{const M=S.children(this._source.maxzoom);if(a[M[0].key]&&a[M[1].key]&&a[M[2].key]&&a[M[3].key])continue}let L=P.wasRequested();for(let M=S.overscaledZ-1;M>=m;--M){const N=S.scaledTo(M);if(h[N.key])break;if(h[N.key]=!0,P=this.getTile(N),!P&&L&&(P=this._addTile(N)),P){const H=P.hasData();if((H||!(!((g=this.map)===null||g===void 0)&&g.cancelPendingTileRequestsWhileZooming)||L)&&(a[N.key]=N),L=P.wasRequested(),H)break}}}return a}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const c=[];let g,a=this._tiles[e].tileID;for(;a.overscaledZ>0;){if(a.key in this._loadedParentTiles){g=this._loadedParentTiles[a.key];break}c.push(a.key);const h=a.scaledTo(a.overscaledZ-1);if(g=this._getLoadedTile(h),g)break;a=h}for(const h of c)this._loadedParentTiles[h]=g}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const e in this._tiles){const c=this._tiles[e].tileID,g=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=g}}_addTile(e){let c=this._tiles[e.key];if(c)return c;c=this._cache.getAndRemove(e),c&&(this._setTileReloadTimer(e.key,c),c.tileID=e,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,c)));const g=c;return c||(c=new Xr(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(c,e.key,c.state)),c.uses++,this._tiles[e.key]=c,g||this._source.fire(new A.k("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(e,c){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const g=c.getExpiryTimeout();g&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},g))}_removeTile(e){const c=this._tiles[e];c&&(c.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(e){const c=e.sourceDataType;e.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&e.dataType==="source"&&c==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(e);this._cache.reset()}tilesIn(e,c,g){const a=[],h=this.transform;if(!h)return a;const m=g?h.getCameraQueryGeometry(e):e,w=e.map(H=>h.pointCoordinate(H,this.terrain)),B=m.map(H=>h.pointCoordinate(H,this.terrain)),S=this.getIds();let P=1/0,L=1/0,M=-1/0,N=-1/0;for(const H of B)P=Math.min(P,H.x),L=Math.min(L,H.y),M=Math.max(M,H.x),N=Math.max(N,H.y);for(let H=0;H<S.length;H++){const Z=this._tiles[S[H]];if(Z.holdingForFade())continue;const G=Z.tileID,X=Math.pow(2,h.zoom-Z.tileID.overscaledZ),ut=c*Z.queryPadding*A.X/Z.tileSize/X,tt=[G.getTilePoint(new A.Z(P,L)),G.getTilePoint(new A.Z(M,N))];if(tt[0].x-ut<A.X&&tt[0].y-ut<A.X&&tt[1].x+ut>=0&&tt[1].y+ut>=0){const it=w.map(yt=>G.getTilePoint(yt)),st=B.map(yt=>G.getTilePoint(yt));a.push({tile:Z,tileID:G,queryGeometry:it,cameraQueryGeometry:st,scale:X})}}return a}getVisibleCoordinates(e){const c=this.getRenderableIds(e).map(g=>this._tiles[g].tileID);for(const g of c)g.posMatrix=this.transform.calculatePosMatrix(g.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(ti(this._source.type)){const e=E.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=e)return!0}return!1}setFeatureState(e,c,g){this._state.updateState(e=e||"_geojsonTileLayer",c,g)}removeFeatureState(e,c,g){this._state.removeFeatureState(e=e||"_geojsonTileLayer",c,g)}getFeatureState(e,c){return this._state.getState(e=e||"_geojsonTileLayer",c)}setDependencies(e,c,g){const a=this._tiles[e];a&&a.setDependencies(c,g)}reloadTilesForDependencies(e,c){for(const g in this._tiles)this._tiles[g].hasDependency(e,c)&&this._reloadTile(g,"reloading");this._cache.filter(g=>!g.hasDependency(e,c))}}function vr(_,e){const c=Math.abs(2*_.wrap)-+(_.wrap<0),g=Math.abs(2*e.wrap)-+(e.wrap<0);return _.overscaledZ-e.overscaledZ||g-c||e.canonical.y-_.canonical.y||e.canonical.x-_.canonical.x}function ti(_){return _==="raster"||_==="image"||_==="video"}Ee.maxOverzooming=10,Ee.maxUnderzooming=3;class Pe{constructor(e,c){this.reset(e,c)}reset(e,c){this.points=e||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(this.points.length===1)return this.points[0];e=A.ac(e,0,1);let c=1,g=this._distances[c];const a=e*this.paddedLength+this.padding;for(;g<a&&c<this._distances.length;)g=this._distances[++c];const h=c-1,m=this._distances[h],w=g-m,B=w>0?(a-m)/w:0;return this.points[h].mult(1-B).add(this.points[c].mult(B))}}function mi(_,e){let c=!0;return _==="always"||_!=="never"&&e!=="never"||(c=!1),c}class Rr{constructor(e,c,g){const a=this.boxCells=[],h=this.circleCells=[];this.xCellCount=Math.ceil(e/g),this.yCellCount=Math.ceil(c/g);for(let m=0;m<this.xCellCount*this.yCellCount;m++)a.push([]),h.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=c,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,c,g,a,h){this._forEachCell(c,g,a,h,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(c),this.bboxes.push(g),this.bboxes.push(a),this.bboxes.push(h)}insertCircle(e,c,g,a){this._forEachCell(c-a,g-a,c+a,g+a,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(c),this.circles.push(g),this.circles.push(a)}_insertBoxCell(e,c,g,a,h,m){this.boxCells[h].push(m)}_insertCircleCell(e,c,g,a,h,m){this.circleCells[h].push(m)}_query(e,c,g,a,h,m,w){if(g<0||e>this.width||a<0||c>this.height)return[];const B=[];if(e<=0&&c<=0&&this.width<=g&&this.height<=a){if(h)return[{key:null,x1:e,y1:c,x2:g,y2:a}];for(let S=0;S<this.boxKeys.length;S++)B.push({key:this.boxKeys[S],x1:this.bboxes[4*S],y1:this.bboxes[4*S+1],x2:this.bboxes[4*S+2],y2:this.bboxes[4*S+3]});for(let S=0;S<this.circleKeys.length;S++){const P=this.circles[3*S],L=this.circles[3*S+1],M=this.circles[3*S+2];B.push({key:this.circleKeys[S],x1:P-M,y1:L-M,x2:P+M,y2:L+M})}}else this._forEachCell(e,c,g,a,this._queryCell,B,{hitTest:h,overlapMode:m,seenUids:{box:{},circle:{}}},w);return B}query(e,c,g,a){return this._query(e,c,g,a,!1,null)}hitTest(e,c,g,a,h,m){return this._query(e,c,g,a,!0,h,m).length>0}hitTestCircle(e,c,g,a,h){const m=e-g,w=e+g,B=c-g,S=c+g;if(w<0||m>this.width||S<0||B>this.height)return!1;const P=[];return this._forEachCell(m,B,w,S,this._queryCellCircle,P,{hitTest:!0,overlapMode:a,circle:{x:e,y:c,radius:g},seenUids:{box:{},circle:{}}},h),P.length>0}_queryCell(e,c,g,a,h,m,w,B){const{seenUids:S,hitTest:P,overlapMode:L}=w,M=this.boxCells[h];if(M!==null){const H=this.bboxes;for(const Z of M)if(!S.box[Z]){S.box[Z]=!0;const G=4*Z,X=this.boxKeys[Z];if(e<=H[G+2]&&c<=H[G+3]&&g>=H[G+0]&&a>=H[G+1]&&(!B||B(X))&&(!P||!mi(L,X.overlapMode))&&(m.push({key:X,x1:H[G],y1:H[G+1],x2:H[G+2],y2:H[G+3]}),P))return!0}}const N=this.circleCells[h];if(N!==null){const H=this.circles;for(const Z of N)if(!S.circle[Z]){S.circle[Z]=!0;const G=3*Z,X=this.circleKeys[Z];if(this._circleAndRectCollide(H[G],H[G+1],H[G+2],e,c,g,a)&&(!B||B(X))&&(!P||!mi(L,X.overlapMode))){const ut=H[G],tt=H[G+1],it=H[G+2];if(m.push({key:X,x1:ut-it,y1:tt-it,x2:ut+it,y2:tt+it}),P)return!0}}}return!1}_queryCellCircle(e,c,g,a,h,m,w,B){const{circle:S,seenUids:P,overlapMode:L}=w,M=this.boxCells[h];if(M!==null){const H=this.bboxes;for(const Z of M)if(!P.box[Z]){P.box[Z]=!0;const G=4*Z,X=this.boxKeys[Z];if(this._circleAndRectCollide(S.x,S.y,S.radius,H[G+0],H[G+1],H[G+2],H[G+3])&&(!B||B(X))&&!mi(L,X.overlapMode))return m.push(!0),!0}}const N=this.circleCells[h];if(N!==null){const H=this.circles;for(const Z of N)if(!P.circle[Z]){P.circle[Z]=!0;const G=3*Z,X=this.circleKeys[Z];if(this._circlesCollide(H[G],H[G+1],H[G+2],S.x,S.y,S.radius)&&(!B||B(X))&&!mi(L,X.overlapMode))return m.push(!0),!0}}}_forEachCell(e,c,g,a,h,m,w,B){const S=this._convertToXCellCoord(e),P=this._convertToYCellCoord(c),L=this._convertToXCellCoord(g),M=this._convertToYCellCoord(a);for(let N=S;N<=L;N++)for(let H=P;H<=M;H++)if(h.call(this,e,c,g,a,this.xCellCount*H+N,m,w,B))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,c,g,a,h,m){const w=a-e,B=h-c,S=g+m;return S*S>w*w+B*B}_circleAndRectCollide(e,c,g,a,h,m,w){const B=(m-a)/2,S=Math.abs(e-(a+B));if(S>B+g)return!1;const P=(w-h)/2,L=Math.abs(c-(h+P));if(L>P+g)return!1;if(S<=B||L<=P)return!0;const M=S-B,N=L-P;return M*M+N*N<=g*g}}function ri(_,e,c,g,a){const h=A.H();return e?(A.K(h,h,[1/a,1/a,1]),c||A.ad(h,h,g.angle)):A.L(h,g.labelPlaneMatrix,_),h}function jr(_,e,c,g,a){if(e){const h=A.ae(_);return A.K(h,h,[a,a,1]),c||A.ad(h,h,-g.angle),h}return g.glCoordMatrix}function gt(_,e,c){let g;c?(g=[_.x,_.y,c(_.x,_.y),1],A.af(g,g,e)):(g=[_.x,_.y,0,1],function(h,m,w){const B=m[0],S=m[1];h[0]=w[0]*B+w[4]*S+w[12],h[1]=w[1]*B+w[5]*S+w[13],h[3]=w[3]*B+w[7]*S+w[15]}(g,g,e));const a=g[3];return{point:new A.P(g[0]/a,g[1]/a),signedDistanceFromCamera:a,isOccluded:!1}}function K(_,e){return .5+_/e*.5}function q(_,e){return _.x>=-e[0]&&_.x<=e[0]&&_.y>=-e[1]&&_.y<=e[1]}function At(_,e,c,g,a,h,m,w,B,S,P,L,M,N,H){const Z=g?_.textSizeData:_.iconSizeData,G=A.ag(Z,c.transform.zoom),X=[256/c.width*2+1,256/c.height*2+1],ut=g?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;ut.clear();const tt=_.lineVertexArray,it=g?_.text.placedSymbolArray:_.icon.placedSymbolArray,st=c.transform.width/c.transform.height;let yt=!1;for(let Lt=0;Lt<it.length;Lt++){const Qt=it.get(Lt);if(Qt.hidden||Qt.writingMode===A.ah.vertical&&!yt){Ge(Qt.numGlyphs,ut);continue}yt=!1;const ne=gt(new A.P(Qt.anchorX,Qt.anchorY),e,H);if(!q(ne.point,X)){Ge(Qt.numGlyphs,ut);continue}const ee=K(c.transform.cameraToCenterDistance,ne.signedDistanceFromCamera),ie=A.ai(Z,G,Qt),Xt=m?ie/ee:ie*ee,we={getElevation:H,labelPlaneMatrix:a,lineVertexArray:tt,pitchWithMap:m,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:S,tileAnchorPoint:new A.P(Qt.anchorX,Qt.anchorY),unwrappedTileID:P,width:L,height:M,translation:N},De=Dt(we,Qt,Xt,!1,w,e,h,_.glyphOffsetArray,ut,st,B);yt=De.useVertical,(De.notEnoughRoom||yt||De.needsFlipping&&Dt(we,Qt,Xt,!0,w,e,h,_.glyphOffsetArray,ut,st,B).notEnoughRoom)&&Ge(Qt.numGlyphs,ut)}g?_.text.dynamicLayoutVertexBuffer.updateData(ut):_.icon.dynamicLayoutVertexBuffer.updateData(ut)}function pt(_,e,c,g,a,h,m,w){const B=h.glyphStartIndex+h.numGlyphs,S=h.lineStartIndex,P=h.lineStartIndex+h.lineLength,L=e.getoffsetX(h.glyphStartIndex),M=e.getoffsetX(B-1),N=pe(_*L,c,g,a,h.segment,S,P,w,m);if(!N)return null;const H=pe(_*M,c,g,a,h.segment,S,P,w,m);return H?w.projectionCache.anyProjectionOccluded?null:{first:N,last:H}:null}function Pt(_,e,c,g){return _===A.ah.horizontal&&Math.abs(c.y-e.y)>Math.abs(c.x-e.x)*g?{useVertical:!0}:(_===A.ah.vertical?e.y<c.y:e.x>c.x)?{needsFlipping:!0}:null}function Dt(_,e,c,g,a,h,m,w,B,S,P){const L=c/24,M=e.lineOffsetX*L,N=e.lineOffsetY*L;let H;if(e.numGlyphs>1){const Z=e.glyphStartIndex+e.numGlyphs,G=e.lineStartIndex,X=e.lineStartIndex+e.lineLength,ut=pt(L,w,M,N,g,e,P,_);if(!ut)return{notEnoughRoom:!0};const tt=gt(ut.first.point,m,_.getElevation).point,it=gt(ut.last.point,m,_.getElevation).point;if(a&&!g){const st=Pt(e.writingMode,tt,it,S);if(st)return st}H=[ut.first];for(let st=e.glyphStartIndex+1;st<Z-1;st++)H.push(pe(L*w.getoffsetX(st),M,N,g,e.segment,G,X,_,P));H.push(ut.last)}else{if(a&&!g){const G=gt(_.tileAnchorPoint,h,_.getElevation).point,X=e.lineStartIndex+e.segment+1,ut=new A.P(_.lineVertexArray.getx(X),_.lineVertexArray.gety(X)),tt=gt(ut,h,_.getElevation),it=tt.signedDistanceFromCamera>0?tt.point:function(yt,Lt,Qt,ne,ee,ie){return Ut(yt,Lt,Qt,1,ee,ie)}(_.tileAnchorPoint,ut,G,0,h,_),st=Pt(e.writingMode,G,it,S);if(st)return st}const Z=pe(L*w.getoffsetX(e.glyphStartIndex),M,N,g,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,_,P);if(!Z||_.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};H=[Z]}for(const Z of H)A.aj(B,Z.point,Z.angle);return{}}function Ut(_,e,c,g,a,h){const m=_.add(_.sub(e)._unit()),w=a!==void 0?gt(m,a,h.getElevation).point:te(m.x,m.y,h).point,B=c.sub(w);return c.add(B._mult(g/B.mag()))}function It(_,e,c){const g=e.projectionCache;if(g.projections[_])return g.projections[_];const a=new A.P(e.lineVertexArray.getx(_),e.lineVertexArray.gety(_)),h=te(a.x,a.y,e);if(h.signedDistanceFromCamera>0)return g.projections[_]=h.point,g.anyProjectionOccluded=g.anyProjectionOccluded||h.isOccluded,h.point;const m=_-c.direction;return function(w,B,S,P,L){return Ut(w,B,S,P,void 0,L)}(c.distanceFromAnchor===0?e.tileAnchorPoint:new A.P(e.lineVertexArray.getx(m),e.lineVertexArray.gety(m)),a,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,e)}function te(_,e,c){const g=_+c.translation[0],a=e+c.translation[1];let h;return!c.pitchWithMap&&c.projection.useSpecialProjectionForSymbols?(h=c.projection.projectTileCoordinates(g,a,c.unwrappedTileID,c.getElevation),h.point.x=(.5*h.point.x+.5)*c.width,h.point.y=(.5*-h.point.y+.5)*c.height):(h=gt(new A.P(g,a),c.labelPlaneMatrix,c.getElevation),h.isOccluded=!1),h}function le(_,e,c){return _._unit()._perp()._mult(e*c)}function qt(_,e,c,g,a,h,m,w,B){if(w.projectionCache.offsets[_])return w.projectionCache.offsets[_];const S=c.add(e);if(_+B.direction<g||_+B.direction>=a)return w.projectionCache.offsets[_]=S,S;const P=It(_+B.direction,w,B),L=le(P.sub(c),m,B.direction),M=c.add(L),N=P.add(L);return w.projectionCache.offsets[_]=A.ak(h,S,M,N)||S,w.projectionCache.offsets[_]}function pe(_,e,c,g,a,h,m,w,B){const S=g?_-e:_+e;let P=S>0?1:-1,L=0;g&&(P*=-1,L=Math.PI),P<0&&(L+=Math.PI);let M,N=P>0?h+a:h+a+1;w.projectionCache.cachedAnchorPoint?M=w.projectionCache.cachedAnchorPoint:(M=te(w.tileAnchorPoint.x,w.tileAnchorPoint.y,w).point,w.projectionCache.cachedAnchorPoint=M);let H,Z,G=M,X=M,ut=0,tt=0;const it=Math.abs(S),st=[];let yt;for(;ut+tt<=it;){if(N+=P,N<h||N>=m)return null;ut+=tt,X=G,Z=H;const ne={absOffsetX:it,direction:P,distanceFromAnchor:ut,previousVertex:X};if(G=It(N,w,ne),c===0)st.push(X),yt=G.sub(X);else{let ee;const ie=G.sub(X);ee=ie.mag()===0?le(It(N+P,w,ne).sub(G),c,P):le(ie,c,P),Z||(Z=X.add(ee)),H=qt(N,ee,G,h,m,Z,c,w,ne),st.push(Z),yt=H.sub(Z)}tt=yt.mag()}const Lt=yt._mult((it-ut)/tt)._add(Z||X),Qt=L+Math.atan2(G.y-X.y,G.x-X.x);return st.push(Lt),{point:Lt,angle:B?Qt:0,path:st}}const ke=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ge(_,e){for(let c=0;c<_;c++){const g=e.length;e.resize(g+4),e.float32.set(ke,3*g)}}const ar=100;class xr{constructor(e,c,g=new Rr(e.width+200,e.height+200,25),a=new Rr(e.width+200,e.height+200,25)){this.transform=e,this.mapProjection=c,this.grid=g,this.ignoredGrid=a,this.pitchFactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+ar,this.screenBottomBoundary=e.height+ar,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(e,c,g,a,h,m,w,B,S,P,L){const M=e.anchorPointX+B[0],N=e.anchorPointY+B[1],H=this.projectAndGetPerspectiveRatio(a,M,N,h,P),Z=this._projectCollisionBox(e,g,a,h,m,w,B,H,P,L),[G,X,ut,tt]=Z.box;return this.mapProjection.useSpecialProjectionForSymbols&&(m?Z.allPointsOccluded:this.mapProjection.isOccluded(M,N,h))||H.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(G,X,ut,tt)||c!=="always"&&this.grid.hitTest(G,X,ut,tt,c,S)?{box:[G,X,ut,tt],placeable:!1,offscreen:!1}:{box:[G,X,ut,tt],placeable:!0,offscreen:this.isOffscreen(G,X,ut,tt)}}placeCollisionCircles(e,c,g,a,h,m,w,B,S,P,L,M,N,H,Z,G){const X=[],ut=new A.P(c.anchorX,c.anchorY),tt=this.getPerspectiveRatio(m,ut.x,ut.y,w,G),it=(L?h/tt:h*tt)/A.ap,st={getElevation:G,labelPlaneMatrix:B,lineVertexArray:g,pitchWithMap:L,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:ut,unwrappedTileID:w,width:this.transform.width,height:this.transform.height,translation:Z},yt=pt(it,a,c.lineOffsetX*it,c.lineOffsetY*it,!1,c,!1,st);let Lt=!1,Qt=!1,ne=!0;if(yt){const ee=.5*N*tt+H,ie=new A.P(-100,-100),Xt=new A.P(this.screenRightBoundary,this.screenBottomBoundary),we=new Pe,De=yt.first,de=yt.last;let fe=[];for(let Ue=De.path.length-1;Ue>=1;Ue--)fe.push(De.path[Ue]);for(let Ue=1;Ue<de.path.length;Ue++)fe.push(de.path[Ue]);const Ne=2.5*ee;if(S){const Ue=this.projectPathToScreenSpace(fe,st,S);fe=Ue.some(or=>or.signedDistanceFromCamera<=0)?[]:Ue.map(or=>or.point)}let pr=[];if(fe.length>0){const Ue=fe[0].clone(),or=fe[0].clone();for(let Nr=1;Nr<fe.length;Nr++)Ue.x=Math.min(Ue.x,fe[Nr].x),Ue.y=Math.min(Ue.y,fe[Nr].y),or.x=Math.max(or.x,fe[Nr].x),or.y=Math.max(or.y,fe[Nr].y);pr=Ue.x>=ie.x&&or.x<=Xt.x&&Ue.y>=ie.y&&or.y<=Xt.y?[fe]:or.x<ie.x||Ue.x>Xt.x||or.y<ie.y||Ue.y>Xt.y?[]:A.al([fe],ie.x,ie.y,Xt.x,Xt.y)}for(const Ue of pr){we.reset(Ue,.25*ee);let or=0;or=we.length<=.5*ee?1:Math.ceil(we.paddedLength/Ne)+1;for(let Nr=0;Nr<or;Nr++){const $r=Nr/Math.max(or-1,1),Ci=we.lerp($r),fr=Ci.x+ar,pi=Ci.y+ar;X.push(fr,pi,ee,0);const Ai=fr-ee,Gr=pi-ee,Wr=fr+ee,wi=pi+ee;if(ne=ne&&this.isOffscreen(Ai,Gr,Wr,wi),Qt=Qt||this.isInsideGrid(Ai,Gr,Wr,wi),e!=="always"&&this.grid.hitTestCircle(fr,pi,ee,e,M)&&(Lt=!0,!P))return{circles:[],offscreen:!1,collisionDetected:Lt}}}}return{circles:!P&&Lt||!Qt||tt<this.perspectiveRatioCutoff?[]:X,offscreen:ne,collisionDetected:Lt}}projectPathToScreenSpace(e,c,g){return e.map(a=>gt(a,g,c.getElevation))}queryRenderedSymbols(e){if(e.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let g=1/0,a=1/0,h=-1/0,m=-1/0;for(const P of e){const L=new A.P(P.x+ar,P.y+ar);g=Math.min(g,L.x),a=Math.min(a,L.y),h=Math.max(h,L.x),m=Math.max(m,L.y),c.push(L)}const w=this.grid.query(g,a,h,m).concat(this.ignoredGrid.query(g,a,h,m)),B={},S={};for(const P of w){const L=P.key;if(B[L.bucketInstanceId]===void 0&&(B[L.bucketInstanceId]={}),B[L.bucketInstanceId][L.featureIndex])continue;const M=[new A.P(P.x1,P.y1),new A.P(P.x2,P.y1),new A.P(P.x2,P.y2),new A.P(P.x1,P.y2)];A.am(c,M)&&(B[L.bucketInstanceId][L.featureIndex]=!0,S[L.bucketInstanceId]===void 0&&(S[L.bucketInstanceId]=[]),S[L.bucketInstanceId].push(L.featureIndex))}return S}insertCollisionBox(e,c,g,a,h,m){(g?this.ignoredGrid:this.grid).insert({bucketInstanceId:a,featureIndex:h,collisionGroupID:m,overlapMode:c},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,c,g,a,h,m){const w=g?this.ignoredGrid:this.grid,B={bucketInstanceId:a,featureIndex:h,collisionGroupID:m,overlapMode:c};for(let S=0;S<e.length;S+=4)w.insertCircle(B,e[S],e[S+1],e[S+2])}projectAndGetPerspectiveRatio(e,c,g,a,h){const m=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(c,g,a,h):gt(new A.P(c,g),e,h);return{point:new A.P((m.point.x+1)/2*this.transform.width+ar,(1-m.point.y)/2*this.transform.height+ar),perspectiveRatio:.5+this.transform.cameraToCenterDistance/m.signedDistanceFromCamera*.5,isOccluded:m.isOccluded,signedDistanceFromCamera:m.signedDistanceFromCamera}}getPerspectiveRatio(e,c,g,a,h){const m=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(c,g,a,h):gt(new A.P(c,g),e,h);return .5+this.transform.cameraToCenterDistance/m.signedDistanceFromCamera*.5}isOffscreen(e,c,g,a){return g<ar||e>=this.screenRightBoundary||a<ar||c>this.screenBottomBoundary}isInsideGrid(e,c,g,a){return g>=0&&e<this.gridRightBoundary&&a>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const e=A.an([]);return A.J(e,e,[-100,-100,0]),e}_projectCollisionBox(e,c,g,a,h,m,w,B,S,P){const L=c*B.perspectiveRatio;let M=new A.P(1,0),N=new A.P(0,1);const H=new A.P(e.anchorPointX+w[0],e.anchorPointY+w[1]);if(m&&!h){const ee=this.projectAndGetPerspectiveRatio(g,H.x+1,H.y,a,S).point.sub(B.point).unit(),ie=Math.atan(ee.y/ee.x)+(ee.x<0?Math.PI:0),Xt=Math.sin(ie),we=Math.cos(ie);M=new A.P(we,Xt),N=new A.P(-Xt,we)}else if(!m&&h){const ee=-this.transform.angle,ie=Math.sin(ee),Xt=Math.cos(ee);M=new A.P(Xt,ie),N=new A.P(-ie,Xt)}let Z=B.point,G=L;if(h){Z=H;const ee=this.transform.zoom-Math.floor(this.transform.zoom);G=Math.pow(2,-ee),G*=this.mapProjection.getPitchedTextCorrection(this.transform,H,a),P||(G*=A.ac(.5+B.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}P&&(Z=Z.add(M.mult(P.x*G)).add(N.mult(P.y*G)));const X=e.x1*G,ut=e.x2*G,tt=(X+ut)/2,it=e.y1*G,st=e.y2*G,yt=(it+st)/2,Lt=[{offsetX:X,offsetY:it},{offsetX:tt,offsetY:it},{offsetX:ut,offsetY:it},{offsetX:ut,offsetY:yt},{offsetX:ut,offsetY:st},{offsetX:tt,offsetY:st},{offsetX:X,offsetY:st},{offsetX:X,offsetY:yt}];let Qt=[];for(const{offsetX:ee,offsetY:ie}of Lt)Qt.push(new A.P(Z.x+M.x*ee+N.x*ie,Z.y+M.y*ee+N.y*ie));let ne=!1;if(h){const ee=Qt.map(ie=>this.projectAndGetPerspectiveRatio(g,ie.x,ie.y,a,S));ne=ee.some(ie=>!ie.isOccluded),Qt=ee.map(ie=>ie.point)}else ne=!0;return{box:A.ao(Qt),allPointsOccluded:!ne}}}function tr(_,e,c){return e*(A.X/(_.tileSize*Math.pow(2,c-_.tileID.overscaledZ)))}class Br{constructor(e,c,g,a){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?c:-c))):a&&g?1:0,this.placed=g}isHidden(){return this.opacity===0&&!this.placed}}class Kr{constructor(e,c,g,a,h){this.text=new Br(e?e.text:null,c,g,h),this.icon=new Br(e?e.icon:null,c,a,h)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class qr{constructor(e,c,g){this.text=e,this.icon=c,this.skipFade=g}}class gr{constructor(){this.invProjMatrix=A.H(),this.viewportMatrix=A.H(),this.circles=[]}}class Mr{constructor(e,c,g,a,h){this.bucketInstanceId=e,this.featureIndex=c,this.sourceLayerIndex=g,this.bucketIndex=a,this.tileID=h}}class Zr{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const c=++this.maxGroupID;this.collisionGroups[e]={ID:c,predicate:g=>g.collisionGroupID===c}}return this.collisionGroups[e]}}function Ct(_,e,c,g,a){const{horizontalAlign:h,verticalAlign:m}=A.au(_);return new A.P(-(h-.5)*e+g[0]*a,-(m-.5)*c+g[1]*a)}class Fe{constructor(e,c,g,a,h,m){this.transform=e.clone(),this.terrain=g,this.collisionIndex=new xr(this.transform,c),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=a,this.retainedQueryData={},this.collisionGroups=new Zr(h),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=m,m&&(m.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(e){const c=this.terrain;return c?(g,a)=>c.getElevation(e,g,a):null}getBucketParts(e,c,g,a){const h=g.getBucket(c),m=g.latestFeatureIndex;if(!h||!m||c.id!==h.layerIds[0])return;const w=g.collisionBoxArray,B=h.layers[0].layout,S=h.layers[0].paint,P=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),L=g.tileSize/A.X,M=g.tileID.toUnwrapped(),N=this.transform.calculatePosMatrix(M),H=B.get("text-pitch-alignment")==="map",Z=B.get("text-rotation-alignment")==="map",G=tr(g,1,this.transform.zoom),X=this.collisionIndex.mapProjection.translatePosition(this.transform,g,S.get("text-translate"),S.get("text-translate-anchor")),ut=this.collisionIndex.mapProjection.translatePosition(this.transform,g,S.get("icon-translate"),S.get("icon-translate-anchor")),tt=ri(N,H,Z,this.transform,G);let it=null;if(H){const yt=jr(N,H,Z,this.transform,G);it=A.L([],this.transform.labelPlaneMatrix,yt)}this.retainedQueryData[h.bucketInstanceId]=new Mr(h.bucketInstanceId,m,h.sourceLayerIndex,h.index,g.tileID);const st={bucket:h,layout:B,translationText:X,translationIcon:ut,posMatrix:N,unwrappedTileID:M,textLabelPlaneMatrix:tt,labelToScreenMatrix:it,scale:P,textPixelRatio:L,holdingForFade:g.holdingForFade(),collisionBoxArray:w,partiallyEvaluatedTextSize:A.ag(h.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(h.sourceID)};if(a)for(const yt of h.sortKeyRanges){const{sortKey:Lt,symbolInstanceStart:Qt,symbolInstanceEnd:ne}=yt;e.push({sortKey:Lt,symbolInstanceStart:Qt,symbolInstanceEnd:ne,parameters:st})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:h.symbolInstances.length,parameters:st})}attemptAnchorPlacement(e,c,g,a,h,m,w,B,S,P,L,M,N,H,Z,G,X,ut,tt){const it=A.aq[e.textAnchor],st=[e.textOffset0,e.textOffset1],yt=Ct(it,g,a,st,h),Lt=this.collisionIndex.placeCollisionBox(c,M,B,S,P,w,m,G,L.predicate,tt,yt);if((!ut||this.collisionIndex.placeCollisionBox(ut,M,B,S,P,w,m,X,L.predicate,tt,yt).placeable)&&Lt.placeable){let Qt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[N.crossTileID]&&this.prevPlacement.placements[N.crossTileID]&&this.prevPlacement.placements[N.crossTileID].text&&(Qt=this.prevPlacement.variableOffsets[N.crossTileID].anchor),N.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[N.crossTileID]={textOffset:st,width:g,height:a,anchor:it,textBoxScale:h,prevAnchor:Qt},this.markUsedJustification(H,it,N,Z),H.allowVerticalPlacement&&(this.markUsedOrientation(H,Z,N),this.placedOrientations[N.crossTileID]=Z),{shift:yt,placedGlyphBoxes:Lt}}}placeLayerBucketPart(e,c,g){const{bucket:a,layout:h,translationText:m,translationIcon:w,posMatrix:B,unwrappedTileID:S,textLabelPlaneMatrix:P,labelToScreenMatrix:L,textPixelRatio:M,holdingForFade:N,collisionBoxArray:H,partiallyEvaluatedTextSize:Z,collisionGroup:G}=e.parameters,X=h.get("text-optional"),ut=h.get("icon-optional"),tt=A.ar(h,"text-overlap","text-allow-overlap"),it=tt==="always",st=A.ar(h,"icon-overlap","icon-allow-overlap"),yt=st==="always",Lt=h.get("text-rotation-alignment")==="map",Qt=h.get("text-pitch-alignment")==="map",ne=h.get("icon-text-fit")!=="none",ee=h.get("symbol-z-order")==="viewport-y",ie=it&&(yt||!a.hasIconData()||ut),Xt=yt&&(it||!a.hasTextData()||X);!a.collisionArrays&&H&&a.deserializeCollisionBoxes(H);const we=this._getTerrainElevationFunc(this.retainedQueryData[a.bucketInstanceId].tileID),De=(de,fe,Ne)=>{var pr,Ue;if(c[de.crossTileID])return;if(N)return void(this.placements[de.crossTileID]=new qr(!1,!1,!1));let or=!1,Nr=!1,$r=!0,Ci=null,fr={box:null,placeable:!1,offscreen:null},pi={box:null,placeable:!1,offscreen:null},Ai=null,Gr=null,Wr=null,wi=0,tn=0,jn=0;fe.textFeatureIndex?wi=fe.textFeatureIndex:de.useRuntimeCollisionCircles&&(wi=de.featureIndex),fe.verticalTextFeatureIndex&&(tn=fe.verticalTextFeatureIndex);const Fi=fe.textBox;if(Fi){const ji=Bn=>{let Ki=A.ah.horizontal;if(a.allowVerticalPlacement&&!Bn&&this.prevPlacement){const pn=this.prevPlacement.placedOrientations[de.crossTileID];pn&&(this.placedOrientations[de.crossTileID]=pn,Ki=pn,this.markUsedOrientation(a,Ki,de))}return Ki},Yr=(Bn,Ki)=>{if(a.allowVerticalPlacement&&de.numVerticalGlyphVertices>0&&fe.verticalTextBox){for(const pn of a.writingModes)if(pn===A.ah.vertical?(fr=Ki(),pi=fr):fr=Bn(),fr&&fr.placeable)break}else fr=Bn()},mo=de.textAnchorOffsetStartIndex,_s=de.textAnchorOffsetEndIndex;if(_s===mo){const Bn=(Ki,pn)=>{const fi=this.collisionIndex.placeCollisionBox(Ki,tt,M,B,S,Qt,Lt,m,G.predicate,we);return fi&&fi.placeable&&(this.markUsedOrientation(a,pn,de),this.placedOrientations[de.crossTileID]=pn),fi};Yr(()=>Bn(Fi,A.ah.horizontal),()=>{const Ki=fe.verticalTextBox;return a.allowVerticalPlacement&&de.numVerticalGlyphVertices>0&&Ki?Bn(Ki,A.ah.vertical):{box:null,offscreen:null}}),ji(fr&&fr.placeable)}else{let Bn=A.aq[(Ue=(pr=this.prevPlacement)===null||pr===void 0?void 0:pr.variableOffsets[de.crossTileID])===null||Ue===void 0?void 0:Ue.anchor];const Ki=(fi,Cn,ss)=>{const yo=fi.x2-fi.x1,Xu=fi.y2-fi.y1,ic=de.textBoxScale,en=ne&&st==="never"?Cn:null;let Ks=null,$a=tt==="never"?1:2,oa="never";Bn&&$a++;for(let qa=0;qa<$a;qa++){for(let Hc=mo;Hc<_s;Hc++){const Vc=a.textAnchorOffsets.get(Hc);if(Bn&&Vc.textAnchor!==Bn)continue;const MA=this.attemptAnchorPlacement(Vc,fi,yo,Xu,ic,Lt,Qt,M,B,S,G,oa,de,a,ss,m,w,en,we);if(MA&&(Ks=MA.placedGlyphBoxes,Ks&&Ks.placeable))return or=!0,Ci=MA.shift,Ks}Bn?Bn=null:oa=tt}return g&&!Ks&&(Ks={box:this.collisionIndex.placeCollisionBox(Fi,"always",M,B,S,Qt,Lt,m,G.predicate,we,new A.P(0,0)).box,offscreen:!1,placeable:!1}),Ks};Yr(()=>Ki(Fi,fe.iconBox,A.ah.horizontal),()=>{const fi=fe.verticalTextBox;return a.allowVerticalPlacement&&(!fr||!fr.placeable)&&de.numVerticalGlyphVertices>0&&fi?Ki(fi,fe.verticalIconBox,A.ah.vertical):{box:null,occluded:!0,offscreen:null}}),fr&&(or=fr.placeable,$r=fr.offscreen);const pn=ji(fr&&fr.placeable);if(!or&&this.prevPlacement){const fi=this.prevPlacement.variableOffsets[de.crossTileID];fi&&(this.variableOffsets[de.crossTileID]=fi,this.markUsedJustification(a,fi.anchor,de,pn))}}}if(Ai=fr,or=Ai&&Ai.placeable,$r=Ai&&Ai.offscreen,de.useRuntimeCollisionCircles){const ji=a.text.placedSymbolArray.get(de.centerJustifiedTextSymbolIndex),Yr=A.ai(a.textSizeData,Z,ji),mo=h.get("text-padding");Gr=this.collisionIndex.placeCollisionCircles(tt,ji,a.lineVertexArray,a.glyphOffsetArray,Yr,B,S,P,L,g,Qt,G.predicate,de.collisionCircleDiameter,mo,m,we),Gr.circles.length&&Gr.collisionDetected&&!g&&A.w("Collisions detected, but collision boxes are not shown"),or=it||Gr.circles.length>0&&!Gr.collisionDetected,$r=$r&&Gr.offscreen}if(fe.iconFeatureIndex&&(jn=fe.iconFeatureIndex),fe.iconBox){const ji=Yr=>this.collisionIndex.placeCollisionBox(Yr,st,M,B,S,Qt,Lt,w,G.predicate,we,ne&&Ci?Ci:void 0);pi&&pi.placeable&&fe.verticalIconBox?(Wr=ji(fe.verticalIconBox),Nr=Wr.placeable):(Wr=ji(fe.iconBox),Nr=Wr.placeable),$r=$r&&Wr.offscreen}const xn=X||de.numHorizontalGlyphVertices===0&&de.numVerticalGlyphVertices===0,go=ut||de.numIconVertices===0;xn||go?go?xn||(Nr=Nr&&or):or=Nr&&or:Nr=or=Nr&&or;const sa=Nr&&Wr.placeable;if(or&&Ai.placeable&&this.collisionIndex.insertCollisionBox(Ai.box,tt,h.get("text-ignore-placement"),a.bucketInstanceId,pi&&pi.placeable&&tn?tn:wi,G.ID),sa&&this.collisionIndex.insertCollisionBox(Wr.box,st,h.get("icon-ignore-placement"),a.bucketInstanceId,jn,G.ID),Gr&&or&&this.collisionIndex.insertCollisionCircles(Gr.circles,tt,h.get("text-ignore-placement"),a.bucketInstanceId,wi,G.ID),g&&this.storeCollisionData(a.bucketInstanceId,Ne,fe,Ai,Wr,Gr),de.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(a.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[de.crossTileID]=new qr(or||ie,Nr||Xt,$r||a.justReloaded),c[de.crossTileID]=!0};if(ee){if(e.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const de=a.getSortedSymbolIndexes(this.transform.angle);for(let fe=de.length-1;fe>=0;--fe){const Ne=de[fe];De(a.symbolInstances.get(Ne),a.collisionArrays[Ne],Ne)}}else for(let de=e.symbolInstanceStart;de<e.symbolInstanceEnd;de++)De(a.symbolInstances.get(de),a.collisionArrays[de],de);if(g&&a.bucketInstanceId in this.collisionCircleArrays){const de=this.collisionCircleArrays[a.bucketInstanceId];A.as(de.invProjMatrix,B),de.viewportMatrix=this.collisionIndex.getViewportMatrix()}a.justReloaded=!1}storeCollisionData(e,c,g,a,h,m){if(g.textBox||g.iconBox){let w,B;this.collisionBoxArrays.has(e)?w=this.collisionBoxArrays.get(e):(w=new Map,this.collisionBoxArrays.set(e,w)),w.has(c)?B=w.get(c):(B={text:null,icon:null},w.set(c,B)),g.textBox&&(B.text=a.box),g.iconBox&&(B.icon=h.box)}if(m){let w=this.collisionCircleArrays[e];w===void 0&&(w=this.collisionCircleArrays[e]=new gr);for(let B=0;B<m.circles.length;B+=4)w.circles.push(m.circles[B+0]),w.circles.push(m.circles[B+1]),w.circles.push(m.circles[B+2]),w.circles.push(m.collisionDetected?1:0)}}markUsedJustification(e,c,g,a){let h;h=a===A.ah.vertical?g.verticalPlacedTextSymbolIndex:{left:g.leftJustifiedTextSymbolIndex,center:g.centerJustifiedTextSymbolIndex,right:g.rightJustifiedTextSymbolIndex}[A.at(c)];const m=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex,g.verticalPlacedTextSymbolIndex];for(const w of m)w>=0&&(e.text.placedSymbolArray.get(w).crossTileID=h>=0&&w!==h?0:g.crossTileID)}markUsedOrientation(e,c,g){const a=c===A.ah.horizontal||c===A.ah.horizontalOnly?c:0,h=c===A.ah.vertical?c:0,m=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex];for(const w of m)e.text.placedSymbolArray.get(w).placedOrientation=a;g.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(g.verticalPlacedTextSymbolIndex).placedOrientation=h)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let g=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const a=c?c.symbolFadeChange(e):1,h=c?c.opacities:{},m=c?c.variableOffsets:{},w=c?c.placedOrientations:{};for(const B in this.placements){const S=this.placements[B],P=h[B];P?(this.opacities[B]=new Kr(P,a,S.text,S.icon),g=g||S.text!==P.text.placed||S.icon!==P.icon.placed):(this.opacities[B]=new Kr(null,a,S.text,S.icon,S.skipFade),g=g||S.text||S.icon)}for(const B in h){const S=h[B];if(!this.opacities[B]){const P=new Kr(S,a,!1,!1);P.isHidden()||(this.opacities[B]=P,g=g||S.text.placed||S.icon.placed)}}for(const B in m)this.variableOffsets[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.variableOffsets[B]=m[B]);for(const B in w)this.placedOrientations[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.placedOrientations[B]=w[B]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");g?this.lastPlacementChangeTime=e:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:e)}updateLayerOpacities(e,c){const g={};for(const a of c){const h=a.getBucket(e);h&&a.latestFeatureIndex&&e.id===h.layerIds[0]&&this.updateBucketOpacities(h,a.tileID,g,a.collisionBoxArray)}}updateBucketOpacities(e,c,g,a){e.hasTextData()&&(e.text.opacityVertexArray.clear(),e.text.hasVisibleVertices=!1),e.hasIconData()&&(e.icon.opacityVertexArray.clear(),e.icon.hasVisibleVertices=!1),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const h=e.layers[0],m=h.layout,w=new Kr(null,0,!1,!1,!0),B=m.get("text-allow-overlap"),S=m.get("icon-allow-overlap"),P=h._unevaluatedLayout.hasValue("text-variable-anchor")||h._unevaluatedLayout.hasValue("text-variable-anchor-offset"),L=m.get("text-rotation-alignment")==="map",M=m.get("text-pitch-alignment")==="map",N=m.get("icon-text-fit")!=="none",H=new Kr(null,0,B&&(S||!e.hasIconData()||m.get("icon-optional")),S&&(B||!e.hasTextData()||m.get("text-optional")),!0);!e.collisionArrays&&a&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(a);const Z=(X,ut,tt)=>{for(let it=0;it<ut/4;it++)X.opacityVertexArray.emplaceBack(tt);X.hasVisibleVertices=X.hasVisibleVertices||tt!==Hi},G=this.collisionBoxArrays.get(e.bucketInstanceId);for(let X=0;X<e.symbolInstances.length;X++){const ut=e.symbolInstances.get(X),{numHorizontalGlyphVertices:tt,numVerticalGlyphVertices:it,crossTileID:st}=ut;let yt=this.opacities[st];g[st]?yt=w:yt||(yt=H,this.opacities[st]=yt),g[st]=!0;const Lt=ut.numIconVertices>0,Qt=this.placedOrientations[ut.crossTileID],ne=Qt===A.ah.vertical,ee=Qt===A.ah.horizontal||Qt===A.ah.horizontalOnly;if(tt>0||it>0){const Xt=Xi(yt.text);Z(e.text,tt,ne?Hi:Xt),Z(e.text,it,ee?Hi:Xt);const we=yt.text.isHidden();[ut.rightJustifiedTextSymbolIndex,ut.centerJustifiedTextSymbolIndex,ut.leftJustifiedTextSymbolIndex].forEach(fe=>{fe>=0&&(e.text.placedSymbolArray.get(fe).hidden=we||ne?1:0)}),ut.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(ut.verticalPlacedTextSymbolIndex).hidden=we||ee?1:0);const De=this.variableOffsets[ut.crossTileID];De&&this.markUsedJustification(e,De.anchor,ut,Qt);const de=this.placedOrientations[ut.crossTileID];de&&(this.markUsedJustification(e,"left",ut,de),this.markUsedOrientation(e,de,ut))}if(Lt){const Xt=Xi(yt.icon),we=!(N&&ut.verticalPlacedIconSymbolIndex&&ne);ut.placedIconSymbolIndex>=0&&(Z(e.icon,ut.numIconVertices,we?Xt:Hi),e.icon.placedSymbolArray.get(ut.placedIconSymbolIndex).hidden=yt.icon.isHidden()),ut.verticalPlacedIconSymbolIndex>=0&&(Z(e.icon,ut.numVerticalIconVertices,we?Hi:Xt),e.icon.placedSymbolArray.get(ut.verticalPlacedIconSymbolIndex).hidden=yt.icon.isHidden())}const ie=G&&G.has(X)?G.get(X):{text:null,icon:null};if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const Xt=e.collisionArrays[X];if(Xt){let we=new A.P(0,0);if(Xt.textBox||Xt.verticalTextBox){let De=!0;if(P){const de=this.variableOffsets[st];de?(we=Ct(de.anchor,de.width,de.height,de.textOffset,de.textBoxScale),L&&we._rotate(M?this.transform.angle:-this.transform.angle)):De=!1}if(Xt.textBox||Xt.verticalTextBox){let de;Xt.textBox&&(de=ne),Xt.verticalTextBox&&(de=ee),ye(e.textCollisionBox.collisionVertexArray,yt.text.placed,!De||de,ie.text,we.x,we.y)}}if(Xt.iconBox||Xt.verticalIconBox){const De=!!(!ee&&Xt.verticalIconBox);let de;Xt.iconBox&&(de=De),Xt.verticalIconBox&&(de=!De),ye(e.iconCollisionBox.collisionVertexArray,yt.icon.placed,de,ie.icon,N?we.x:0,N?we.y:0)}}}}if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${e.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${e.text.layoutVertexArray.length}) / 4`);if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${e.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${e.icon.layoutVertexArray.length}) / 4`);if(e.bucketInstanceId in this.collisionCircleArrays){const X=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=X.invProjMatrix,e.placementViewportMatrix=X.viewportMatrix,e.collisionCircleArray=X.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(e){return this.fadeDuration===0?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,c){const g=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*g>e}setStale(){this.stale=!0}}function ye(_,e,c,g,a,h){g&&g.length!==0||(g=[0,0,0,0]);const m=g[0]-ar,w=g[1]-ar,B=g[2]-ar,S=g[3]-ar;_.emplaceBack(e?1:0,c?1:0,a||0,h||0,m,w),_.emplaceBack(e?1:0,c?1:0,a||0,h||0,B,w),_.emplaceBack(e?1:0,c?1:0,a||0,h||0,B,S),_.emplaceBack(e?1:0,c?1:0,a||0,h||0,m,S)}const Lr=Math.pow(2,25),dr=Math.pow(2,24),zi=Math.pow(2,17),ai=Math.pow(2,16),yi=Math.pow(2,9),di=Math.pow(2,8),Oi=Math.pow(2,1);function Xi(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const e=_.placed?1:0,c=Math.floor(127*_.opacity);return c*Lr+e*dr+c*zi+e*ai+c*yi+e*di+c*Oi+e}const Hi=0;function aA(){return{isOccluded:(_,e,c)=>!1,getPitchedTextCorrection:(_,e,c)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(_,e,c,g){throw new Error("Not implemented.")},translatePosition:(_,e,c,g)=>function(a,h,m,w,B=!1){if(!m[0]&&!m[1])return[0,0];const S=B?w==="map"?a.angle:0:w==="viewport"?-a.angle:0;if(S){const P=Math.sin(S),L=Math.cos(S);m=[m[0]*L-m[1]*P,m[0]*P+m[1]*L]}return[B?m[0]:tr(h,m[0],a.zoom),B?m[1]:tr(h,m[1],a.zoom)]}(_,e,c,g),getCircleRadiusCorrection:_=>1}}class to{constructor(e){this._sortAcrossTiles=e.layout.get("symbol-z-order")!=="viewport-y"&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,c,g,a,h){const m=this._bucketParts;for(;this._currentTileIndex<e.length;)if(c.getBucketParts(m,a,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,h())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,m.sort((w,B)=>w.sortKey-B.sortKey));this._currentPartIndex<m.length;)if(c.placeLayerBucketPart(m[this._currentPartIndex],this._seenCrossTileIDs,g),this._currentPartIndex++,h())return!0;return!1}}class Li{constructor(e,c,g,a,h,m,w,B){this.placement=new Fe(e,aA(),c,m,w,B),this._currentPlacementIndex=g.length-1,this._forceFullPlacement=a,this._showCollisionBoxes=h,this._done=!1}isDone(){return this._done}continuePlacement(e,c,g){const a=E.now(),h=()=>!this._forceFullPlacement&&E.now()-a>2;for(;this._currentPlacementIndex>=0;){const m=c[e[this._currentPlacementIndex]],w=this.placement.collisionIndex.transform.zoom;if(m.type==="symbol"&&(!m.minzoom||m.minzoom<=w)&&(!m.maxzoom||m.maxzoom>w)){if(this._inProgressLayer||(this._inProgressLayer=new to(m)),this._inProgressLayer.continuePlacement(g[m.source],this.placement,this._showCollisionBoxes,m,h))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const si=512/A.X/2;class eo{constructor(e,c,g){this.tileID=e,this.bucketInstanceId=g,this._symbolsByKey={};const a=new Map;for(let h=0;h<c.length;h++){const m=c.get(h),w=m.key,B=a.get(w);B?B.push(m):a.set(w,[m])}for(const[h,m]of a){const w={positions:m.map(B=>({x:Math.floor(B.anchorX*si),y:Math.floor(B.anchorY*si)})),crossTileIDs:m.map(B=>B.crossTileID)};if(w.positions.length>128){const B=new A.av(w.positions.length,16,Uint16Array);for(const{x:S,y:P}of w.positions)B.add(S,P);B.finish(),delete w.positions,w.index=B}this._symbolsByKey[h]=w}}getScaledCoordinates(e,c){const{x:g,y:a,z:h}=this.tileID.canonical,{x:m,y:w,z:B}=c.canonical,S=si/Math.pow(2,B-h),P=(w*A.X+e.anchorY)*S,L=a*A.X*si;return{x:Math.floor((m*A.X+e.anchorX)*S-g*A.X*si),y:Math.floor(P-L)}}findMatches(e,c,g){const a=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let h=0;h<e.length;h++){const m=e.get(h);if(m.crossTileID)continue;const w=this._symbolsByKey[m.key];if(!w)continue;const B=this.getScaledCoordinates(m,c);if(w.index){const S=w.index.range(B.x-a,B.y-a,B.x+a,B.y+a).sort();for(const P of S){const L=w.crossTileIDs[P];if(!g[L]){g[L]=!0,m.crossTileID=L;break}}}else if(w.positions)for(let S=0;S<w.positions.length;S++){const P=w.positions[S],L=w.crossTileIDs[S];if(Math.abs(P.x-B.x)<=a&&Math.abs(P.y-B.y)<=a&&!g[L]){g[L]=!0,m.crossTileID=L;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:e})=>e)}}class Bi{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Sa{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const c=Math.round((e-this.lng)/360);if(c!==0)for(const g in this.indexes){const a=this.indexes[g],h={};for(const m in a){const w=a[m];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+c),h[w.tileID.key]=w}this.indexes[g]=h}this.lng=e}addBucket(e,c,g){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let h=0;h<c.symbolInstances.length;h++)c.symbolInstances.get(h).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const a=this.usedCrossTileIDs[e.overscaledZ];for(const h in this.indexes){const m=this.indexes[h];if(Number(h)>e.overscaledZ)for(const w in m){const B=m[w];B.tileID.isChildOf(e)&&B.findMatches(c.symbolInstances,e,a)}else{const w=m[e.scaledTo(Number(h)).key];w&&w.findMatches(c.symbolInstances,e,a)}}for(let h=0;h<c.symbolInstances.length;h++){const m=c.symbolInstances.get(h);m.crossTileID||(m.crossTileID=g.generate(),a[m.crossTileID]=!0)}return this.indexes[e.overscaledZ]===void 0&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new eo(e,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(e,c){for(const g of c.getCrossTileIDsLists())for(const a of g)delete this.usedCrossTileIDs[e][a]}removeStaleBuckets(e){let c=!1;for(const g in this.indexes){const a=this.indexes[g];for(const h in a)e[a[h].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,a[h]),delete a[h],c=!0)}return c}}class vn{constructor(){this.layerIndexes={},this.crossTileIDs=new Bi,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,c,g){let a=this.layerIndexes[e.id];a===void 0&&(a=this.layerIndexes[e.id]=new Sa);let h=!1;const m={};a.handleWrapJump(g);for(const w of c){const B=w.getBucket(e);B&&e.id===B.layerIds[0]&&(B.bucketInstanceId||(B.bucketInstanceId=++this.maxBucketInstanceId),a.addBucket(w.tileID,B,this.crossTileIDs)&&(h=!0),m[B.bucketInstanceId]=!0)}return a.removeStaleBuckets(m)&&(h=!0),h}pruneUnusedLayers(e){const c={};e.forEach(g=>{c[g]=!0});for(const g in this.layerIndexes)c[g]||delete this.layerIndexes[g]}}const Ia=(_,e)=>A.t(_,e&&e.filter(c=>c.identifier!=="source.canvas")),Zi=A.aw();class jo extends A.E{constructor(e,c={}){super(),this._rtlPluginLoaded=()=>{for(const g in this.sourceCaches){const a=this.sourceCaches[g].getSource().type;a!=="vector"&&a!=="geojson"||this.sourceCaches[g].reload()}},this.map=e,this.dispatcher=new be(re(),e._getMapId()),this.dispatcher.registerMessageHandler("GG",(g,a)=>this.getGlyphs(g,a)),this.dispatcher.registerMessageHandler("GI",(g,a)=>this.getImages(g,a)),this.imageManager=new vt,this.imageManager.setEventedParent(this),this.glyphManager=new Zt(e._requestManager,c.localIdeographFontFamily),this.lineAtlas=new dt(256,512),this.crossTileSymbolIndex=new vn,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new A.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",A.ay()),Ie().on(ce,this._rtlPluginLoaded),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const a=this.sourceCaches[g.sourceId];if(!a)return;const h=a.getSource();if(h&&h.vectorLayerIds)for(const m in this._layers){const w=this._layers[m];w.source===h.id&&this._validateLayer(w)}})}loadURL(e,c={},g){this.fire(new A.k("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const a=this.map._requestManager.transformRequest(e,"Style");this._loadStyleRequest=new AbortController;const h=this._loadStyleRequest;A.h(a,this._loadStyleRequest).then(m=>{this._loadStyleRequest=null,this._load(m.data,c,g)}).catch(m=>{this._loadStyleRequest=null,m&&!h.signal.aborted&&this.fire(new A.j(m))})}loadJSON(e,c={},g){this.fire(new A.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,E.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(e,c,g)}).catch(()=>{})}loadEmpty(){this.fire(new A.k("dataloading",{dataType:"style"})),this._load(Zi,{validate:!1})}_load(e,c,g){var a;const h=c.transformStyle?c.transformStyle(g,e):e;if(!c.validate||!Ia(this,A.u(h))){this._loaded=!0,this.stylesheet=h;for(const m in h.sources)this.addSource(m,h.sources[m],{validate:!1});h.sprite?this._loadSprite(h.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(h.glyphs),this._createLayers(),this.light=new Wt(this.stylesheet.light),this.sky=new et(this.stylesheet.sky),this.map.setTerrain((a=this.stylesheet.terrain)!==null&&a!==void 0?a:null),this.fire(new A.k("data",{dataType:"style"})),this.fire(new A.k("style.load"))}}_createLayers(){const e=A.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",e),this._order=e.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of e){const g=A.aA(c);g.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=g}}_loadSprite(e,c=!1,g=void 0){let a;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(h,m,w,B){return A._(this,void 0,void 0,function*(){const S=Nt(h),P=w>1?"@2x":"",L={},M={};for(const{id:N,url:H}of S){const Z=m.transformRequest(jt(H,P,".json"),"SpriteJSON");L[N]=A.h(Z,B);const G=m.transformRequest(jt(H,P,".png"),"SpriteImage");M[N]=ht.getImage(G,B)}return yield Promise.all([...Object.values(L),...Object.values(M)]),function(N,H){return A._(this,void 0,void 0,function*(){const Z={};for(const G in N){Z[G]={};const X=E.getImageCanvasContext((yield H[G]).data),ut=(yield N[G]).data;for(const tt in ut){const{width:it,height:st,x:yt,y:Lt,sdf:Qt,pixelRatio:ne,stretchX:ee,stretchY:ie,content:Xt,textFitWidth:we,textFitHeight:De}=ut[tt];Z[G][tt]={data:null,pixelRatio:ne,sdf:Qt,stretchX:ee,stretchY:ie,content:Xt,textFitWidth:we,textFitHeight:De,spriteData:{width:it,height:st,x:yt,y:Lt,context:X}}}}return Z})}(L,M)})}(e,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(h=>{if(this._spriteRequest=null,h)for(const m in h){this._spritesImagesIds[m]=[];const w=this._spritesImagesIds[m]?this._spritesImagesIds[m].filter(B=>!(B in h)):[];for(const B of w)this.imageManager.removeImage(B),this._changedImages[B]=!0;for(const B in h[m]){const S=m==="default"?B:`${m}:${B}`;this._spritesImagesIds[m].push(S),S in this.imageManager.images?this.imageManager.updateImage(S,h[m][B],!1):this.imageManager.addImage(S,h[m][B]),c&&(this._changedImages[S]=!0)}}}).catch(h=>{this._spriteRequest=null,a=h,this.fire(new A.j(a))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new A.k("data",{dataType:"style"})),g&&g(a)})}_unloadSprite(){for(const e of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(e),this._changedImages[e]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new A.k("data",{dataType:"style"}))}_validateLayer(e){const c=this.sourceCaches[e.source];if(!c)return;const g=e.sourceLayer;if(!g)return;const a=c.getSource();(a.type==="geojson"||a.vectorLayerIds&&a.vectorLayerIds.indexOf(g)===-1)&&this.fire(new A.j(new Error(`Source layer "${g}" does not exist on source "${a.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(e,c=!1){const g=this._serializedAllLayers();if(!e||e.length===0)return Object.values(c?A.aB(g):g);const a=[];for(const h of e)if(g[h]){const m=c?A.aB(g[h]):g[h];a.push(m)}return a}_serializedAllLayers(){let e=this._serializedLayers;if(e)return e;e=this._serializedLayers={};const c=Object.keys(this._layers);for(const g of c){const a=this._layers[g];a.type!=="custom"&&(e[g]=a.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const c=this._changed;if(c){const a=Object.keys(this._updatedLayers),h=Object.keys(this._removedLayers);(a.length||h.length)&&this._updateWorkerLayers(a,h);for(const m in this._updatedSources){const w=this._updatedSources[m];if(w==="reload")this._reloadSource(m);else{if(w!=="clear")throw new Error(`Invalid action ${w}`);this._clearSource(m)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const m in this._updatedPaintProps)this._layers[m].updateTransitions(e);this.light.updateTransitions(e),this.sky.updateTransitions(e),this._resetUpdates()}const g={};for(const a in this.sourceCaches){const h=this.sourceCaches[a];g[a]=h.used,h.used=!1}for(const a of this._order){const h=this._layers[a];h.recalculate(e,this._availableImages),!h.isHidden(e.zoom)&&h.source&&(this.sourceCaches[h.source].used=!0)}for(const a in g){const h=this.sourceCaches[a];!!g[a]!=!!h.used&&h.fire(new A.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:a}))}this.light.recalculate(e),this.sky.recalculate(e),this.z=e.zoom,c&&this.fire(new A.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(e,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(e,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(e,c={}){var g;this._checkLoaded();const a=this.serialize();if(e=c.transformStyle?c.transformStyle(a,e):e,((g=c.validate)===null||g===void 0||g)&&Ia(this,A.u(e)))return!1;(e=A.aB(e)).layers=A.az(e.layers);const h=A.aC(a,e),m=this._getOperationsToPerform(h);if(m.unimplemented.length>0)throw new Error(`Unimplemented: ${m.unimplemented.join(", ")}.`);if(m.operations.length===0)return!1;for(const w of m.operations)w();return this.stylesheet=e,this._serializedLayers=null,!0}_getOperationsToPerform(e){const c=[],g=[];for(const a of e)switch(a.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":c.push(()=>this.addLayer.apply(this,a.args));break;case"removeLayer":c.push(()=>this.removeLayer.apply(this,a.args));break;case"setPaintProperty":c.push(()=>this.setPaintProperty.apply(this,a.args));break;case"setLayoutProperty":c.push(()=>this.setLayoutProperty.apply(this,a.args));break;case"setFilter":c.push(()=>this.setFilter.apply(this,a.args));break;case"addSource":c.push(()=>this.addSource.apply(this,a.args));break;case"removeSource":c.push(()=>this.removeSource.apply(this,a.args));break;case"setLayerZoomRange":c.push(()=>this.setLayerZoomRange.apply(this,a.args));break;case"setLight":c.push(()=>this.setLight.apply(this,a.args));break;case"setGeoJSONSourceData":c.push(()=>this.setGeoJSONSourceData.apply(this,a.args));break;case"setGlyphs":c.push(()=>this.setGlyphs.apply(this,a.args));break;case"setSprite":c.push(()=>this.setSprite.apply(this,a.args));break;case"setSky":c.push(()=>this.setSky.apply(this,a.args));break;case"setTerrain":c.push(()=>this.map.setTerrain.apply(this,a.args));break;case"setTransition":c.push(()=>{});break;default:g.push(a.command)}return{operations:c,unimplemented:g}}addImage(e,c){if(this.getImage(e))return this.fire(new A.j(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,c),this._afterImageUpdated(e)}updateImage(e,c){this.imageManager.updateImage(e,c)}getImage(e){return this.imageManager.getImage(e)}removeImage(e){if(!this.getImage(e))return this.fire(new A.j(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new A.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,c,g={}){if(this._checkLoaded(),this.sourceCaches[e]!==void 0)throw new Error(`Source "${e}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(A.u.source,`sources.${e}`,c,null,g))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const a=this.sourceCaches[e]=new Ee(e,c,this.dispatcher);a.style=this,a.setEventedParent(this,()=>({isSourceLoaded:a.loaded(),source:a.serialize(),sourceId:e})),a.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error("There is no source with this ID");for(const g in this._layers)if(this._layers[g].source===e)return this.fire(new A.j(new Error(`Source "${e}" cannot be removed while layer "${g}" is using it.`)));const c=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],c.fire(new A.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,c){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error(`There is no source with this ID=${e}`);const g=this.sourceCaches[e].getSource();if(g.type!=="geojson")throw new Error(`geojsonSource.type is ${g.type}, which is !== 'geojson`);g.setData(c),this._changed=!0}getSource(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()}addLayer(e,c,g={}){this._checkLoaded();const a=e.id;if(this.getLayer(a))return void this.fire(new A.j(new Error(`Layer "${a}" already exists on this map.`)));let h;if(e.type==="custom"){if(Ia(this,A.aD(e)))return;h=A.aA(e)}else{if("source"in e&&typeof e.source=="object"&&(this.addSource(a,e.source),e=A.aB(e),e=A.e(e,{source:a})),this._validate(A.u.layer,`layers.${a}`,e,{arrayIndex:-1},g))return;h=A.aA(e),this._validateLayer(h),h.setEventedParent(this,{layer:{id:a}})}const m=c?this._order.indexOf(c):this._order.length;if(c&&m===-1)this.fire(new A.j(new Error(`Cannot add layer "${a}" before non-existing layer "${c}".`)));else{if(this._order.splice(m,0,a),this._layerOrderChanged=!0,this._layers[a]=h,this._removedLayers[a]&&h.source&&h.type!=="custom"){const w=this._removedLayers[a];delete this._removedLayers[a],w.type!==h.type?this._updatedSources[h.source]="clear":(this._updatedSources[h.source]="reload",this.sourceCaches[h.source].pause())}this._updateLayer(h),h.onAdd&&h.onAdd(this.map)}}moveLayer(e,c){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new A.j(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===c)return;const g=this._order.indexOf(e);this._order.splice(g,1);const a=c?this._order.indexOf(c):this._order.length;c&&a===-1?this.fire(new A.j(new Error(`Cannot move layer "${e}" before non-existing layer "${c}".`))):(this._order.splice(a,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const c=this._layers[e];if(!c)return void this.fire(new A.j(new Error(`Cannot remove non-existing layer "${e}".`)));c.setEventedParent(null);const g=this._order.indexOf(e);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=c,delete this._layers[e],this._serializedLayers&&delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],c.onRemove&&c.onRemove(this.map)}getLayer(e){return this._layers[e]}getLayersOrder(){return[...this._order]}hasLayer(e){return e in this._layers}setLayerZoomRange(e,c,g){this._checkLoaded();const a=this.getLayer(e);a?a.minzoom===c&&a.maxzoom===g||(c!=null&&(a.minzoom=c),g!=null&&(a.maxzoom=g),this._updateLayer(a)):this.fire(new A.j(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,c,g={}){this._checkLoaded();const a=this.getLayer(e);if(a){if(!A.aE(a.filter,c))return c==null?(a.filter=void 0,void this._updateLayer(a)):void(this._validate(A.u.filter,`layers.${a.id}.filter`,c,null,g)||(a.filter=A.aB(c),this._updateLayer(a)))}else this.fire(new A.j(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return A.aB(this.getLayer(e).filter)}setLayoutProperty(e,c,g,a={}){this._checkLoaded();const h=this.getLayer(e);h?A.aE(h.getLayoutProperty(c),g)||(h.setLayoutProperty(c,g,a),this._updateLayer(h)):this.fire(new A.j(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,c){const g=this.getLayer(e);if(g)return g.getLayoutProperty(c);this.fire(new A.j(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,c,g,a={}){this._checkLoaded();const h=this.getLayer(e);h?A.aE(h.getPaintProperty(c),g)||(h.setPaintProperty(c,g,a)&&this._updateLayer(h),this._changed=!0,this._updatedPaintProps[e]=!0,this._serializedLayers=null):this.fire(new A.j(new Error(`Cannot style non-existing layer "${e}".`)))}getPaintProperty(e,c){return this.getLayer(e).getPaintProperty(c)}setFeatureState(e,c){this._checkLoaded();const g=e.source,a=e.sourceLayer,h=this.sourceCaches[g];if(h===void 0)return void this.fire(new A.j(new Error(`The source '${g}' does not exist in the map's style.`)));const m=h.getSource().type;m==="geojson"&&a?this.fire(new A.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):m!=="vector"||a?(e.id===void 0&&this.fire(new A.j(new Error("The feature id parameter must be provided."))),h.setFeatureState(a,e.id,c)):this.fire(new A.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,c){this._checkLoaded();const g=e.source,a=this.sourceCaches[g];if(a===void 0)return void this.fire(new A.j(new Error(`The source '${g}' does not exist in the map's style.`)));const h=a.getSource().type,m=h==="vector"?e.sourceLayer:void 0;h!=="vector"||m?c&&typeof e.id!="string"&&typeof e.id!="number"?this.fire(new A.j(new Error("A feature id is required to remove its specific state property."))):a.removeFeatureState(m,e.id,c):this.fire(new A.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const c=e.source,g=e.sourceLayer,a=this.sourceCaches[c];if(a!==void 0)return a.getSource().type!=="vector"||g?(e.id===void 0&&this.fire(new A.j(new Error("The feature id parameter must be provided."))),a.getFeatureState(g,e.id)):void this.fire(new A.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new A.j(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return A.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const e=A.aF(this.sourceCaches,h=>h.serialize()),c=this._serializeByIds(this._order,!0),g=this.map.getTerrain()||void 0,a=this.stylesheet;return A.aG({version:a.version,name:a.name,metadata:a.metadata,light:a.light,sky:a.sky,center:a.center,zoom:a.zoom,bearing:a.bearing,pitch:a.pitch,sprite:a.sprite,glyphs:a.glyphs,transition:a.transition,sources:e,layers:c,terrain:g},h=>h!==void 0)}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&this.sourceCaches[e.source].getSource().type!=="raster"&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(e){const c=m=>this._layers[m].type==="fill-extrusion",g={},a=[];for(let m=this._order.length-1;m>=0;m--){const w=this._order[m];if(c(w)){g[w]=m;for(const B of e){const S=B[w];if(S)for(const P of S)a.push(P)}}}a.sort((m,w)=>w.intersectionZ-m.intersectionZ);const h=[];for(let m=this._order.length-1;m>=0;m--){const w=this._order[m];if(c(w))for(let B=a.length-1;B>=0;B--){const S=a[B].feature;if(g[S.layer.id]<m)break;h.push(S),a.pop()}else for(const B of e){const S=B[w];if(S)for(const P of S)h.push(P.feature)}}return h}queryRenderedFeatures(e,c,g){c&&c.filter&&this._validate(A.u.filter,"queryRenderedFeatures.filter",c.filter,null,c);const a={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new A.j(new Error("parameters.layers must be an Array."))),[];for(const w of c.layers){const B=this._layers[w];if(!B)return this.fire(new A.j(new Error(`The layer '${w}' does not exist in the map's style and cannot be queried for features.`))),[];a[B.source]=!0}}const h=[];c.availableImages=this._availableImages;const m=this._serializedAllLayers();for(const w in this.sourceCaches)c.layers&&!a[w]||h.push(Qe(this.sourceCaches[w],this._layers,m,e,c,g));return this.placement&&h.push(function(w,B,S,P,L,M,N){const H={},Z=M.queryRenderedSymbols(P),G=[];for(const X of Object.keys(Z).map(Number))G.push(N[X]);G.sort(je);for(const X of G){const ut=X.featureIndex.lookupSymbolFeatures(Z[X.bucketInstanceId],B,X.bucketIndex,X.sourceLayerIndex,L.filter,L.layers,L.availableImages,w);for(const tt in ut){const it=H[tt]=H[tt]||[],st=ut[tt];st.sort((yt,Lt)=>{const Qt=X.featureSortOrder;if(Qt){const ne=Qt.indexOf(yt.featureIndex);return Qt.indexOf(Lt.featureIndex)-ne}return Lt.featureIndex-yt.featureIndex});for(const yt of st)it.push(yt)}}for(const X in H)H[X].forEach(ut=>{const tt=ut.feature,it=S[w[X].source].getFeatureState(tt.layer["source-layer"],tt.id);tt.source=tt.layer.source,tt.layer["source-layer"]&&(tt.sourceLayer=tt.layer["source-layer"]),tt.state=it});return H}(this._layers,m,this.sourceCaches,e,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(h)}querySourceFeatures(e,c){c&&c.filter&&this._validate(A.u.filter,"querySourceFeatures.filter",c.filter,null,c);const g=this.sourceCaches[e];return g?function(a,h){const m=a.getRenderableIds().map(S=>a.getTileByID(S)),w=[],B={};for(let S=0;S<m.length;S++){const P=m[S],L=P.tileID.canonical.key;B[L]||(B[L]=!0,P.querySourceFeatures(w,h))}return w}(g,c):[]}getLight(){return this.light.getLight()}setLight(e,c={}){this._checkLoaded();const g=this.light.getLight();let a=!1;for(const m in e)if(!A.aE(e[m],g[m])){a=!0;break}if(!a)return;const h={now:E.now(),transition:A.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,c),this.light.updateTransitions(h)}getSky(){var e;return(e=this.stylesheet)===null||e===void 0?void 0:e.sky}setSky(e,c={}){const g=this.getSky();let a=!1;if(!e&&!g)return;if(e&&!g)a=!0;else if(!e&&g)a=!0;else for(const m in e)if(!A.aE(e[m],g[m])){a=!0;break}if(!a)return;const h={now:E.now(),transition:A.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=e,this.sky.setSky(e,c),this.sky.updateTransitions(h)}_validate(e,c,g,a,h={}){return(!h||h.validate!==!1)&&Ia(this,e.call(A.u,A.e({key:c,style:this.serialize(),value:g,styleSpec:A.v},a)))}_remove(e=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Ie().off(ce,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const g=this.sourceCaches[c];g.setEventedParent(null),g.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),e&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(e)}_clearSource(e){this.sourceCaches[e].clearTiles()}_reloadSource(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()}_updateSources(e){for(const c in this.sourceCaches)this.sourceCaches[c].update(e,this.map.terrain)}_generateCollisionBoxes(){for(const e in this.sourceCaches)this._reloadSource(e)}_updatePlacement(e,c,g,a,h=!1){let m=!1,w=!1;const B={};for(const S of this._order){const P=this._layers[S];if(P.type!=="symbol")continue;if(!B[P.source]){const M=this.sourceCaches[P.source];B[P.source]=M.getRenderableIds(!0).map(N=>M.getTileByID(N)).sort((N,H)=>H.tileID.overscaledZ-N.tileID.overscaledZ||(N.tileID.isLessThan(H.tileID)?-1:1))}const L=this.crossTileSymbolIndex.addLayer(P,B[P.source],e.center.lng);m=m||L}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((h=h||this._layerOrderChanged||g===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(E.now(),e.zoom))&&(this.pauseablePlacement=new Li(e,this.map.terrain,this._order,h,c,g,a,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,B),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(E.now()),w=!0),m&&this.pauseablePlacement.placement.setStale()),w||m)for(const S of this._order){const P=this._layers[S];P.type==="symbol"&&this.placement.updateLayerOpacities(P,B[P.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(E.now())}_releaseSymbolFadeTiles(){for(const e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,c){return A._(this,void 0,void 0,function*(){const g=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const a=this.sourceCaches[c.source];return a&&a.setDependencies(c.tileID.key,c.type,c.icons),g})}getGlyphs(e,c){return A._(this,void 0,void 0,function*(){const g=yield this.glyphManager.getGlyphs(c.stacks),a=this.sourceCaches[c.source];return a&&a.setDependencies(c.tileID.key,c.type,[""]),g})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(e,c={}){this._checkLoaded(),e&&this._validate(A.u.glyphs,"glyphs",e,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=e,this.glyphManager.entries={},this.glyphManager.setURL(e))}addSprite(e,c,g={},a){this._checkLoaded();const h=[{id:e,url:c}],m=[...Nt(this.stylesheet.sprite),...h];this._validate(A.u.sprite,"sprite",m,null,g)||(this.stylesheet.sprite=m,this._loadSprite(h,!0,a))}removeSprite(e){this._checkLoaded();const c=Nt(this.stylesheet.sprite);if(c.find(g=>g.id===e)){if(this._spritesImagesIds[e])for(const g of this._spritesImagesIds[e])this.imageManager.removeImage(g),this._changedImages[g]=!0;c.splice(c.findIndex(g=>g.id===e),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[e],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new A.k("data",{dataType:"style"}))}else this.fire(new A.j(new Error(`Sprite "${e}" doesn't exists on this map.`)))}getSprite(){return Nt(this.stylesheet.sprite)}setSprite(e,c={},g){this._checkLoaded(),e&&this._validate(A.u.sprite,"sprite",e,null,c)||(this.stylesheet.sprite=e,e?this._loadSprite(e,!0,g):(this._unloadSprite(),g&&g(null)))}}var Wi=A.Y([{name:"a_pos",type:"Int16",components:2}]);const fs={prelude:Vr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Vr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Vr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Vr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Vr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Vr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Vr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Vr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Vr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Vr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Vr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Vr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Vr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Vr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Vr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Vr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Vr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Vr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Vr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Vr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Vr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Vr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Vr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Vr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Vr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Vr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Vr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Vr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Vr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:Vr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Vr(_,e){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=e.match(/attribute ([\w]+) ([\w]+)/g),a=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),h=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),m=h?h.concat(a):a,w={};return{fragmentSource:_=_.replace(c,(B,S,P,L,M)=>(w[M]=!0,S==="define"?`
#ifndef HAS_UNIFORM_u_${M}
varying ${P} ${L} ${M};
#else
uniform ${P} ${L} u_${M};
#endif
`:`
#ifdef HAS_UNIFORM_u_${M}
    ${P} ${L} ${M} = u_${M};
#endif
`)),vertexSource:e=e.replace(c,(B,S,P,L,M)=>{const N=L==="float"?"vec2":"vec4",H=M.match(/color/)?"color":N;return w[M]?S==="define"?`
#ifndef HAS_UNIFORM_u_${M}
uniform lowp float u_${M}_t;
attribute ${P} ${N} a_${M};
varying ${P} ${L} ${M};
#else
uniform ${P} ${L} u_${M};
#endif
`:H==="vec4"?`
#ifndef HAS_UNIFORM_u_${M}
    ${M} = a_${M};
#else
    ${P} ${L} ${M} = u_${M};
#endif
`:`
#ifndef HAS_UNIFORM_u_${M}
    ${M} = unpack_mix_${H}(a_${M}, u_${M}_t);
#else
    ${P} ${L} ${M} = u_${M};
#endif
`:S==="define"?`
#ifndef HAS_UNIFORM_u_${M}
uniform lowp float u_${M}_t;
attribute ${P} ${N} a_${M};
#else
uniform ${P} ${L} u_${M};
#endif
`:H==="vec4"?`
#ifndef HAS_UNIFORM_u_${M}
    ${P} ${L} ${M} = a_${M};
#else
    ${P} ${L} ${M} = u_${M};
#endif
`:`
#ifndef HAS_UNIFORM_u_${M}
    ${P} ${L} ${M} = unpack_mix_${H}(a_${M}, u_${M}_t);
#else
    ${P} ${L} ${M} = u_${M};
#endif
`}),staticAttributes:g,staticUniforms:m}}class AA{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,c,g,a,h,m,w,B,S){this.context=e;let P=this.boundPaintVertexBuffers.length!==a.length;for(let L=0;!P&&L<a.length;L++)this.boundPaintVertexBuffers[L]!==a[L]&&(P=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==g||P||this.boundIndexBuffer!==h||this.boundVertexOffset!==m||this.boundDynamicVertexBuffer!==w||this.boundDynamicVertexBuffer2!==B||this.boundDynamicVertexBuffer3!==S?this.freshBind(c,g,a,h,m,w,B,S):(e.bindVertexArray.set(this.vao),w&&w.bind(),h&&h.dynamicDraw&&h.bind(),B&&B.bind(),S&&S.bind())}freshBind(e,c,g,a,h,m,w,B){const S=e.numAttributes,P=this.context,L=P.gl;this.vao&&this.destroy(),this.vao=P.createVertexArray(),P.bindVertexArray.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=a,this.boundVertexOffset=h,this.boundDynamicVertexBuffer=m,this.boundDynamicVertexBuffer2=w,this.boundDynamicVertexBuffer3=B,c.enableAttributes(L,e);for(const M of g)M.enableAttributes(L,e);m&&m.enableAttributes(L,e),w&&w.enableAttributes(L,e),B&&B.enableAttributes(L,e),c.bind(),c.setVertexAttribPointers(L,e,h);for(const M of g)M.bind(),M.setVertexAttribPointers(L,e,h);m&&(m.bind(),m.setVertexAttribPointers(L,e,h)),a&&a.bind(),w&&(w.bind(),w.setVertexAttribPointers(L,e,h)),B&&(B.bind(),B.setVertexAttribPointers(L,e,h)),P.currentNumAttributes=S}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const lA=(_,e,c,g,a)=>({u_matrix:_,u_texture:0,u_ele_delta:e,u_fog_matrix:c,u_fog_color:g?g.properties.get("fog-color"):A.aM.white,u_fog_ground_blend:g?g.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:g?g.calculateFogBlendOpacity(a):0,u_horizon_color:g?g.properties.get("horizon-color"):A.aM.white,u_horizon_fog_blend:g?g.properties.get("horizon-fog-blend"):1});function Ea(_){const e=[];for(let c=0;c<_.length;c++){if(_[c]===null)continue;const g=_[c].split(" ");e.push(g.pop())}return e}class Ta{constructor(e,c,g,a,h,m){const w=e.gl;this.program=w.createProgram();const B=Ea(c.staticAttributes),S=g?g.getBinderAttributes():[],P=B.concat(S),L=fs.prelude.staticUniforms?Ea(fs.prelude.staticUniforms):[],M=c.staticUniforms?Ea(c.staticUniforms):[],N=g?g.getBinderUniforms():[],H=L.concat(M).concat(N),Z=[];for(const yt of H)Z.indexOf(yt)<0&&Z.push(yt);const G=g?g.defines():[];h&&G.push("#define OVERDRAW_INSPECTOR;"),m&&G.push("#define TERRAIN3D;");const X=G.concat(fs.prelude.fragmentSource,c.fragmentSource).join(`
`),ut=G.concat(fs.prelude.vertexSource,c.vertexSource).join(`
`),tt=w.createShader(w.FRAGMENT_SHADER);if(w.isContextLost())return void(this.failedToCreate=!0);if(w.shaderSource(tt,X),w.compileShader(tt),!w.getShaderParameter(tt,w.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${w.getShaderInfoLog(tt)}`);w.attachShader(this.program,tt);const it=w.createShader(w.VERTEX_SHADER);if(w.isContextLost())return void(this.failedToCreate=!0);if(w.shaderSource(it,ut),w.compileShader(it),!w.getShaderParameter(it,w.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${w.getShaderInfoLog(it)}`);w.attachShader(this.program,it),this.attributes={};const st={};this.numAttributes=P.length;for(let yt=0;yt<this.numAttributes;yt++)P[yt]&&(w.bindAttribLocation(this.program,yt,P[yt]),this.attributes[P[yt]]=yt);if(w.linkProgram(this.program),!w.getProgramParameter(this.program,w.LINK_STATUS))throw new Error(`Program failed to link: ${w.getProgramInfoLog(this.program)}`);w.deleteShader(it),w.deleteShader(tt);for(let yt=0;yt<Z.length;yt++){const Lt=Z[yt];if(Lt&&!st[Lt]){const Qt=w.getUniformLocation(this.program,Lt);Qt&&(st[Lt]=Qt)}}this.fixedUniforms=a(e,st),this.terrainUniforms=((yt,Lt)=>({u_depth:new A.aH(yt,Lt.u_depth),u_terrain:new A.aH(yt,Lt.u_terrain),u_terrain_dim:new A.aI(yt,Lt.u_terrain_dim),u_terrain_matrix:new A.aJ(yt,Lt.u_terrain_matrix),u_terrain_unpack:new A.aK(yt,Lt.u_terrain_unpack),u_terrain_exaggeration:new A.aI(yt,Lt.u_terrain_exaggeration)}))(e,st),this.binderUniforms=g?g.getUniforms(e,st):[]}draw(e,c,g,a,h,m,w,B,S,P,L,M,N,H,Z,G,X,ut){const tt=e.gl;if(this.failedToCreate)return;if(e.program.set(this.program),e.setDepthMode(g),e.setStencilMode(a),e.setColorMode(h),e.setCullFace(m),B){e.activeTexture.set(tt.TEXTURE2),tt.bindTexture(tt.TEXTURE_2D,B.depthTexture),e.activeTexture.set(tt.TEXTURE3),tt.bindTexture(tt.TEXTURE_2D,B.texture);for(const st in this.terrainUniforms)this.terrainUniforms[st].set(B[st])}for(const st in this.fixedUniforms)this.fixedUniforms[st].set(w[st]);Z&&Z.setUniforms(e,this.binderUniforms,N,{zoom:H});let it=0;switch(c){case tt.LINES:it=2;break;case tt.TRIANGLES:it=3;break;case tt.LINE_STRIP:it=1}for(const st of M.get()){const yt=st.vaos||(st.vaos={});(yt[S]||(yt[S]=new AA)).bind(e,this,P,Z?Z.getPaintVertexBuffers():[],L,st.vertexOffset,G,X,ut),tt.drawElements(c,st.primitiveLength*it,tt.UNSIGNED_SHORT,st.primitiveOffset*it*2)}}}function cA(_,e,c){const g=1/tr(c,1,e.transform.tileZoom),a=Math.pow(2,c.tileID.overscaledZ),h=c.tileSize*Math.pow(2,e.transform.tileZoom)/a,m=h*(c.tileID.canonical.x+c.tileID.wrap*a),w=h*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[g,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[m>>16,w>>16],u_pixel_coord_lower:[65535&m,65535&w]}}const Ko=(_,e,c,g)=>{const a=e.style.light,h=a.properties.get("position"),m=[h.x,h.y,h.z],w=function(){var S=new A.A(9);return A.A!=Float32Array&&(S[1]=0,S[2]=0,S[3]=0,S[5]=0,S[6]=0,S[7]=0),S[0]=1,S[4]=1,S[8]=1,S}();a.properties.get("anchor")==="viewport"&&function(S,P){var L=Math.sin(P),M=Math.cos(P);S[0]=M,S[1]=L,S[2]=0,S[3]=-L,S[4]=M,S[5]=0,S[6]=0,S[7]=0,S[8]=1}(w,-e.transform.angle),function(S,P,L){var M=P[0],N=P[1],H=P[2];S[0]=M*L[0]+N*L[3]+H*L[6],S[1]=M*L[1]+N*L[4]+H*L[7],S[2]=M*L[2]+N*L[5]+H*L[8]}(m,m,w);const B=a.properties.get("color");return{u_matrix:_,u_lightpos:m,u_lightintensity:a.properties.get("intensity"),u_lightcolor:[B.r,B.g,B.b],u_vertical_gradient:+c,u_opacity:g}},uA=(_,e,c,g,a,h,m)=>A.e(Ko(_,e,c,g),cA(h,e,m),{u_height_factor:-Math.pow(2,a.overscaledZ)/m.tileSize/8}),Ua=_=>({u_matrix:_}),$o=(_,e,c,g)=>A.e(Ua(_),cA(c,e,g)),bo=(_,e)=>({u_matrix:_,u_world:e}),hA=(_,e,c,g,a)=>A.e($o(_,e,c,g),{u_world:a}),Pa=(_,e,c,g)=>{const a=_.transform;let h,m;if(g.paint.get("circle-pitch-alignment")==="map"){const w=tr(c,1,a.zoom);h=!0,m=[w,w]}else h=!1,m=a.pixelsToGLUnits;return{u_camera_to_center_distance:a.cameraToCenterDistance,u_scale_with_map:+(g.paint.get("circle-pitch-scale")==="map"),u_matrix:_.translatePosMatrix(e.posMatrix,c,g.paint.get("circle-translate"),g.paint.get("circle-translate-anchor")),u_pitch_with_map:+h,u_device_pixel_ratio:_.pixelRatio,u_extrude_scale:m}},Gl=(_,e,c)=>({u_matrix:_,u_inv_matrix:e,u_camera_to_center_distance:c.cameraToCenterDistance,u_viewport_size:[c.width,c.height]}),Ei=(_,e,c=1)=>({u_matrix:_,u_color:e,u_overlay:0,u_overlay_scale:c}),La=_=>({u_matrix:_}),wn=(_,e,c,g)=>({u_matrix:_,u_extrude_scale:tr(e,1,c),u_intensity:g});function lr(_,e){const c=Math.pow(2,e.canonical.z),g=e.canonical.y;return[new A.Z(0,g/c).toLngLat().lat,new A.Z(0,(g+1)/c).toLngLat().lat]}const Qa=(_,e,c,g)=>{const a=_.transform;return{u_matrix:ka(_,e,c,g),u_ratio:1/tr(e,1,a.zoom),u_device_pixel_ratio:_.pixelRatio,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}},dA=(_,e,c,g,a)=>A.e(Qa(_,e,c,a),{u_image:0,u_image_height:g}),Qs=(_,e,c,g,a)=>{const h=_.transform,m=ro(e,h);return{u_matrix:ka(_,e,c,a),u_texsize:e.imageAtlasTexture.size,u_ratio:1/tr(e,1,h.zoom),u_device_pixel_ratio:_.pixelRatio,u_image:0,u_scale:[m,g.fromScale,g.toScale],u_fade:g.t,u_units_to_pixels:[1/h.pixelsToGLUnits[0],1/h.pixelsToGLUnits[1]]}},ol=(_,e,c,g,a,h)=>{const m=_.lineAtlas,w=ro(e,_.transform),B=c.layout.get("line-cap")==="round",S=m.getDash(g.from,B),P=m.getDash(g.to,B),L=S.width*a.fromScale,M=P.width*a.toScale;return A.e(Qa(_,e,c,h),{u_patternscale_a:[w/L,-S.height/2],u_patternscale_b:[w/M,-P.height/2],u_sdfgamma:m.width/(256*Math.min(L,M)*_.pixelRatio)/2,u_image:0,u_tex_y_a:S.y,u_tex_y_b:P.y,u_mix:a.t})};function ro(_,e){return 1/tr(_,1,e.tileZoom)}function ka(_,e,c,g){return _.translatePosMatrix(g?g.posMatrix:e.tileID.posMatrix,e,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const al=(_,e,c,g,a)=>{return{u_matrix:_,u_tl_parent:e,u_scale_parent:c,u_buffer_scale:1,u_fade_t:g.mix,u_opacity:g.opacity*a.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:a.paint.get("raster-brightness-min"),u_brightness_high:a.paint.get("raster-brightness-max"),u_saturation_factor:(m=a.paint.get("raster-saturation"),m>0?1-1/(1.001-m):-m),u_contrast_factor:(h=a.paint.get("raster-contrast"),h>0?1/(1-h):1+h),u_spin_weights:Qc(a.paint.get("raster-hue-rotate"))};var h,m};function Qc(_){_*=Math.PI/180;const e=Math.sin(_),c=Math.cos(_);return[(2*c+1)/3,(-Math.sqrt(3)*e-c+1)/3,(Math.sqrt(3)*e-c+1)/3]}const Xl=(_,e,c,g,a,h,m,w,B,S,P,L,M,N)=>{const H=m.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:H.cameraToCenterDistance,u_pitch:H.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:H.width/H.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:B,u_coord_matrix:S,u_is_text:+L,u_pitch_with_map:+g,u_is_along_line:a,u_is_variable_anchor:h,u_texsize:M,u_texture:0,u_translation:P,u_pitched_scale:N}},Zl=(_,e,c,g,a,h,m,w,B,S,P,L,M,N,H)=>{const Z=m.transform;return A.e(Xl(_,e,c,g,a,h,m,w,B,S,P,L,M,H),{u_gamma_scale:g?Math.cos(Z._pitch)*Z.cameraToCenterDistance:1,u_device_pixel_ratio:m.pixelRatio,u_is_halo:+N})},Al=(_,e,c,g,a,h,m,w,B,S,P,L,M,N)=>A.e(Zl(_,e,c,g,a,h,m,w,B,S,P,!0,L,!0,N),{u_texsize_icon:M,u_texture_icon:1}),io=(_,e,c)=>({u_matrix:_,u_opacity:e,u_color:c}),no=(_,e,c,g,a,h)=>A.e(function(m,w,B,S){const P=B.imageManager.getPattern(m.from.toString()),L=B.imageManager.getPattern(m.to.toString()),{width:M,height:N}=B.imageManager.getPixelSize(),H=Math.pow(2,S.tileID.overscaledZ),Z=S.tileSize*Math.pow(2,B.transform.tileZoom)/H,G=Z*(S.tileID.canonical.x+S.tileID.wrap*H),X=Z*S.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:P.tl,u_pattern_br_a:P.br,u_pattern_tl_b:L.tl,u_pattern_br_b:L.br,u_texsize:[M,N],u_mix:w.t,u_pattern_size_a:P.displaySize,u_pattern_size_b:L.displaySize,u_scale_a:w.fromScale,u_scale_b:w.toScale,u_tile_units_to_pixels:1/tr(S,1,B.transform.tileZoom),u_pixel_coord_upper:[G>>16,X>>16],u_pixel_coord_lower:[65535&G,65535&X]}}(g,h,c,a),{u_matrix:_,u_opacity:e}),pA={fillExtrusion:(_,e)=>({u_matrix:new A.aJ(_,e.u_matrix),u_lightpos:new A.aN(_,e.u_lightpos),u_lightintensity:new A.aI(_,e.u_lightintensity),u_lightcolor:new A.aN(_,e.u_lightcolor),u_vertical_gradient:new A.aI(_,e.u_vertical_gradient),u_opacity:new A.aI(_,e.u_opacity)}),fillExtrusionPattern:(_,e)=>({u_matrix:new A.aJ(_,e.u_matrix),u_lightpos:new A.aN(_,e.u_lightpos),u_lightintensity:new A.aI(_,e.u_lightintensity),u_lightcolor:new A.aN(_,e.u_lightcolor),u_vertical_gradient:new A.aI(_,e.u_vertical_gradient),u_height_factor:new A.aI(_,e.u_height_factor),u_image:new A.aH(_,e.u_image),u_texsize:new A.aO(_,e.u_texsize),u_pixel_coord_upper:new A.aO(_,e.u_pixel_coord_upper),u_pixel_coord_lower:new A.aO(_,e.u_pixel_coord_lower),u_scale:new A.aN(_,e.u_scale),u_fade:new A.aI(_,e.u_fade),u_opacity:new A.aI(_,e.u_opacity)}),fill:(_,e)=>({u_matrix:new A.aJ(_,e.u_matrix)}),fillPattern:(_,e)=>({u_matrix:new A.aJ(_,e.u_matrix),u_image:new A.aH(_,e.u_image),u_texsize:new A.aO(_,e.u_texsize),u_pixel_coord_upper:new A.aO(_,e.u_pixel_coord_upper),u_pixel_coord_lower:new A.aO(_,e.u_pixel_coord_lower),u_scale:new A.aN(_,e.u_scale),u_fade:new A.aI(_,e.u_fade)}),fillOutline:(_,e)=>({u_matrix:new A.aJ(_,e.u_matrix),u_world:new A.aO(_,e.u_world)}),fillOutlinePattern:(_,e)=>({u_matrix:new A.aJ(_,e.u_matrix),u_world:new A.aO(_,e.u_world),u_image:new A.aH(_,e.u_image),u_texsize:new A.aO(_,e.u_texsize),u_pixel_coord_upper:new A.aO(_,e.u_pixel_coord_upper),u_pixel_coord_lower:new A.aO(_,e.u_pixel_coord_lower),u_scale:new A.aN(_,e.u_scale),u_fade:new A.aI(_,e.u_fade)}),circle:(_,e)=>({u_camera_to_center_distance:new A.aI(_,e.u_camera_to_center_distance),u_scale_with_map:new A.aH(_,e.u_scale_with_map),u_pitch_with_map:new A.aH(_,e.u_pitch_with_map),u_extrude_scale:new A.aO(_,e.u_extrude_scale),u_device_pixel_ratio:new A.aI(_,e.u_device_pixel_ratio),u_matrix:new A.aJ(_,e.u_matrix)}),collisionBox:(_,e)=>({u_matrix:new A.aJ(_,e.u_matrix),u_pixel_extrude_scale:new A.aO(_,e.u_pixel_extrude_scale)}),collisionCircle:(_,e)=>({u_matrix:new A.aJ(_,e.u_matrix),u_inv_matrix:new A.aJ(_,e.u_inv_matrix),u_camera_to_center_distance:new A.aI(_,e.u_camera_to_center_distance),u_viewport_size:new A.aO(_,e.u_viewport_size)}),debug:(_,e)=>({u_color:new A.aL(_,e.u_color),u_matrix:new A.aJ(_,e.u_matrix),u_overlay:new A.aH(_,e.u_overlay),u_overlay_scale:new A.aI(_,e.u_overlay_scale)}),clippingMask:(_,e)=>({u_matrix:new A.aJ(_,e.u_matrix)}),heatmap:(_,e)=>({u_extrude_scale:new A.aI(_,e.u_extrude_scale),u_intensity:new A.aI(_,e.u_intensity),u_matrix:new A.aJ(_,e.u_matrix)}),heatmapTexture:(_,e)=>({u_matrix:new A.aJ(_,e.u_matrix),u_world:new A.aO(_,e.u_world),u_image:new A.aH(_,e.u_image),u_color_ramp:new A.aH(_,e.u_color_ramp),u_opacity:new A.aI(_,e.u_opacity)}),hillshade:(_,e)=>({u_matrix:new A.aJ(_,e.u_matrix),u_image:new A.aH(_,e.u_image),u_latrange:new A.aO(_,e.u_latrange),u_light:new A.aO(_,e.u_light),u_shadow:new A.aL(_,e.u_shadow),u_highlight:new A.aL(_,e.u_highlight),u_accent:new A.aL(_,e.u_accent)}),hillshadePrepare:(_,e)=>({u_matrix:new A.aJ(_,e.u_matrix),u_image:new A.aH(_,e.u_image),u_dimension:new A.aO(_,e.u_dimension),u_zoom:new A.aI(_,e.u_zoom),u_unpack:new A.aK(_,e.u_unpack)}),line:(_,e)=>({u_matrix:new A.aJ(_,e.u_matrix),u_ratio:new A.aI(_,e.u_ratio),u_device_pixel_ratio:new A.aI(_,e.u_device_pixel_ratio),u_units_to_pixels:new A.aO(_,e.u_units_to_pixels)}),lineGradient:(_,e)=>({u_matrix:new A.aJ(_,e.u_matrix),u_ratio:new A.aI(_,e.u_ratio),u_device_pixel_ratio:new A.aI(_,e.u_device_pixel_ratio),u_units_to_pixels:new A.aO(_,e.u_units_to_pixels),u_image:new A.aH(_,e.u_image),u_image_height:new A.aI(_,e.u_image_height)}),linePattern:(_,e)=>({u_matrix:new A.aJ(_,e.u_matrix),u_texsize:new A.aO(_,e.u_texsize),u_ratio:new A.aI(_,e.u_ratio),u_device_pixel_ratio:new A.aI(_,e.u_device_pixel_ratio),u_image:new A.aH(_,e.u_image),u_units_to_pixels:new A.aO(_,e.u_units_to_pixels),u_scale:new A.aN(_,e.u_scale),u_fade:new A.aI(_,e.u_fade)}),lineSDF:(_,e)=>({u_matrix:new A.aJ(_,e.u_matrix),u_ratio:new A.aI(_,e.u_ratio),u_device_pixel_ratio:new A.aI(_,e.u_device_pixel_ratio),u_units_to_pixels:new A.aO(_,e.u_units_to_pixels),u_patternscale_a:new A.aO(_,e.u_patternscale_a),u_patternscale_b:new A.aO(_,e.u_patternscale_b),u_sdfgamma:new A.aI(_,e.u_sdfgamma),u_image:new A.aH(_,e.u_image),u_tex_y_a:new A.aI(_,e.u_tex_y_a),u_tex_y_b:new A.aI(_,e.u_tex_y_b),u_mix:new A.aI(_,e.u_mix)}),raster:(_,e)=>({u_matrix:new A.aJ(_,e.u_matrix),u_tl_parent:new A.aO(_,e.u_tl_parent),u_scale_parent:new A.aI(_,e.u_scale_parent),u_buffer_scale:new A.aI(_,e.u_buffer_scale),u_fade_t:new A.aI(_,e.u_fade_t),u_opacity:new A.aI(_,e.u_opacity),u_image0:new A.aH(_,e.u_image0),u_image1:new A.aH(_,e.u_image1),u_brightness_low:new A.aI(_,e.u_brightness_low),u_brightness_high:new A.aI(_,e.u_brightness_high),u_saturation_factor:new A.aI(_,e.u_saturation_factor),u_contrast_factor:new A.aI(_,e.u_contrast_factor),u_spin_weights:new A.aN(_,e.u_spin_weights)}),symbolIcon:(_,e)=>({u_is_size_zoom_constant:new A.aH(_,e.u_is_size_zoom_constant),u_is_size_feature_constant:new A.aH(_,e.u_is_size_feature_constant),u_size_t:new A.aI(_,e.u_size_t),u_size:new A.aI(_,e.u_size),u_camera_to_center_distance:new A.aI(_,e.u_camera_to_center_distance),u_pitch:new A.aI(_,e.u_pitch),u_rotate_symbol:new A.aH(_,e.u_rotate_symbol),u_aspect_ratio:new A.aI(_,e.u_aspect_ratio),u_fade_change:new A.aI(_,e.u_fade_change),u_matrix:new A.aJ(_,e.u_matrix),u_label_plane_matrix:new A.aJ(_,e.u_label_plane_matrix),u_coord_matrix:new A.aJ(_,e.u_coord_matrix),u_is_text:new A.aH(_,e.u_is_text),u_pitch_with_map:new A.aH(_,e.u_pitch_with_map),u_is_along_line:new A.aH(_,e.u_is_along_line),u_is_variable_anchor:new A.aH(_,e.u_is_variable_anchor),u_texsize:new A.aO(_,e.u_texsize),u_texture:new A.aH(_,e.u_texture),u_translation:new A.aO(_,e.u_translation),u_pitched_scale:new A.aI(_,e.u_pitched_scale)}),symbolSDF:(_,e)=>({u_is_size_zoom_constant:new A.aH(_,e.u_is_size_zoom_constant),u_is_size_feature_constant:new A.aH(_,e.u_is_size_feature_constant),u_size_t:new A.aI(_,e.u_size_t),u_size:new A.aI(_,e.u_size),u_camera_to_center_distance:new A.aI(_,e.u_camera_to_center_distance),u_pitch:new A.aI(_,e.u_pitch),u_rotate_symbol:new A.aH(_,e.u_rotate_symbol),u_aspect_ratio:new A.aI(_,e.u_aspect_ratio),u_fade_change:new A.aI(_,e.u_fade_change),u_matrix:new A.aJ(_,e.u_matrix),u_label_plane_matrix:new A.aJ(_,e.u_label_plane_matrix),u_coord_matrix:new A.aJ(_,e.u_coord_matrix),u_is_text:new A.aH(_,e.u_is_text),u_pitch_with_map:new A.aH(_,e.u_pitch_with_map),u_is_along_line:new A.aH(_,e.u_is_along_line),u_is_variable_anchor:new A.aH(_,e.u_is_variable_anchor),u_texsize:new A.aO(_,e.u_texsize),u_texture:new A.aH(_,e.u_texture),u_gamma_scale:new A.aI(_,e.u_gamma_scale),u_device_pixel_ratio:new A.aI(_,e.u_device_pixel_ratio),u_is_halo:new A.aH(_,e.u_is_halo),u_translation:new A.aO(_,e.u_translation),u_pitched_scale:new A.aI(_,e.u_pitched_scale)}),symbolTextAndIcon:(_,e)=>({u_is_size_zoom_constant:new A.aH(_,e.u_is_size_zoom_constant),u_is_size_feature_constant:new A.aH(_,e.u_is_size_feature_constant),u_size_t:new A.aI(_,e.u_size_t),u_size:new A.aI(_,e.u_size),u_camera_to_center_distance:new A.aI(_,e.u_camera_to_center_distance),u_pitch:new A.aI(_,e.u_pitch),u_rotate_symbol:new A.aH(_,e.u_rotate_symbol),u_aspect_ratio:new A.aI(_,e.u_aspect_ratio),u_fade_change:new A.aI(_,e.u_fade_change),u_matrix:new A.aJ(_,e.u_matrix),u_label_plane_matrix:new A.aJ(_,e.u_label_plane_matrix),u_coord_matrix:new A.aJ(_,e.u_coord_matrix),u_is_text:new A.aH(_,e.u_is_text),u_pitch_with_map:new A.aH(_,e.u_pitch_with_map),u_is_along_line:new A.aH(_,e.u_is_along_line),u_is_variable_anchor:new A.aH(_,e.u_is_variable_anchor),u_texsize:new A.aO(_,e.u_texsize),u_texsize_icon:new A.aO(_,e.u_texsize_icon),u_texture:new A.aH(_,e.u_texture),u_texture_icon:new A.aH(_,e.u_texture_icon),u_gamma_scale:new A.aI(_,e.u_gamma_scale),u_device_pixel_ratio:new A.aI(_,e.u_device_pixel_ratio),u_is_halo:new A.aH(_,e.u_is_halo),u_translation:new A.aO(_,e.u_translation),u_pitched_scale:new A.aI(_,e.u_pitched_scale)}),background:(_,e)=>({u_matrix:new A.aJ(_,e.u_matrix),u_opacity:new A.aI(_,e.u_opacity),u_color:new A.aL(_,e.u_color)}),backgroundPattern:(_,e)=>({u_matrix:new A.aJ(_,e.u_matrix),u_opacity:new A.aI(_,e.u_opacity),u_image:new A.aH(_,e.u_image),u_pattern_tl_a:new A.aO(_,e.u_pattern_tl_a),u_pattern_br_a:new A.aO(_,e.u_pattern_br_a),u_pattern_tl_b:new A.aO(_,e.u_pattern_tl_b),u_pattern_br_b:new A.aO(_,e.u_pattern_br_b),u_texsize:new A.aO(_,e.u_texsize),u_mix:new A.aI(_,e.u_mix),u_pattern_size_a:new A.aO(_,e.u_pattern_size_a),u_pattern_size_b:new A.aO(_,e.u_pattern_size_b),u_scale_a:new A.aI(_,e.u_scale_a),u_scale_b:new A.aI(_,e.u_scale_b),u_pixel_coord_upper:new A.aO(_,e.u_pixel_coord_upper),u_pixel_coord_lower:new A.aO(_,e.u_pixel_coord_lower),u_tile_units_to_pixels:new A.aI(_,e.u_tile_units_to_pixels)}),terrain:(_,e)=>({u_matrix:new A.aJ(_,e.u_matrix),u_texture:new A.aH(_,e.u_texture),u_ele_delta:new A.aI(_,e.u_ele_delta),u_fog_matrix:new A.aJ(_,e.u_fog_matrix),u_fog_color:new A.aL(_,e.u_fog_color),u_fog_ground_blend:new A.aI(_,e.u_fog_ground_blend),u_fog_ground_blend_opacity:new A.aI(_,e.u_fog_ground_blend_opacity),u_horizon_color:new A.aL(_,e.u_horizon_color),u_horizon_fog_blend:new A.aI(_,e.u_horizon_fog_blend)}),terrainDepth:(_,e)=>({u_matrix:new A.aJ(_,e.u_matrix),u_ele_delta:new A.aI(_,e.u_ele_delta)}),terrainCoords:(_,e)=>({u_matrix:new A.aJ(_,e.u_matrix),u_texture:new A.aH(_,e.u_texture),u_terrain_coords_id:new A.aI(_,e.u_terrain_coords_id),u_ele_delta:new A.aI(_,e.u_ele_delta)}),sky:(_,e)=>({u_sky_color:new A.aL(_,e.u_sky_color),u_horizon_color:new A.aL(_,e.u_horizon_color),u_horizon:new A.aI(_,e.u_horizon),u_sky_horizon_blend:new A.aI(_,e.u_sky_horizon_blend)})};class xo{constructor(e,c,g){this.context=e;const a=e.gl;this.buffer=a.createBuffer(),this.dynamicDraw=!!g,this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?a.DYNAMIC_DRAW:a.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ma={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Tn{constructor(e,c,g,a){this.length=c.length,this.attributes=g,this.itemSize=c.bytesPerElement,this.dynamicDraw=a,this.context=e;const h=e.gl;this.buffer=h.createBuffer(),e.bindVertexBuffer.set(this.buffer),h.bufferData(h.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?h.DYNAMIC_DRAW:h.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){if(e.length!==this.length)throw new Error(`Length of new data is ${e.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,c){for(let g=0;g<this.attributes.length;g++){const a=c.attributes[this.attributes[g].name];a!==void 0&&e.enableVertexAttribArray(a)}}setVertexAttribPointers(e,c,g){for(let a=0;a<this.attributes.length;a++){const h=this.attributes[a],m=c.attributes[h.name];m!==void 0&&e.vertexAttribPointer(m,h.components,e[Ma[h.type]],!1,this.itemSize,h.offset+this.itemSize*(g||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const fA=new WeakMap;function Bo(_){var e;if(fA.has(_))return fA.get(_);{const c=(e=_.getParameter(_.VERSION))===null||e===void 0?void 0:e.startsWith("WebGL 2.0");return fA.set(_,c),c}}class Dr{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class qo extends Dr{getDefault(){return A.aM.transparent}set(e){const c=this.current;(e.r!==c.r||e.g!==c.g||e.b!==c.b||e.a!==c.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Co extends Dr{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class ks extends Dr{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class kc extends Dr{getDefault(){return[!0,!0,!0,!0]}set(e){const c=this.current;(e[0]!==c[0]||e[1]!==c[1]||e[2]!==c[2]||e[3]!==c[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class ts extends Dr{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class Ms extends Dr{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class gA extends Dr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const c=this.current;(e.func!==c.func||e.ref!==c.ref||e.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class Da extends Dr{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const c=this.current;(e[0]!==c[0]||e[1]!==c[1]||e[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class Wl extends Dr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const c=this.gl;e?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=e,this.dirty=!1}}class Go extends Dr{getDefault(){return[0,1]}set(e){const c=this.current;(e[0]!==c[0]||e[1]!==c[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class Yl extends Dr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const c=this.gl;e?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=e,this.dirty=!1}}class mA extends Dr{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class yA extends Dr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const c=this.gl;e?c.enable(c.BLEND):c.disable(c.BLEND),this.current=e,this.dirty=!1}}class ll extends Dr{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const c=this.current;(e[0]!==c[0]||e[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class gs extends Dr{getDefault(){return A.aM.transparent}set(e){const c=this.current;(e.r!==c.r||e.g!==c.g||e.b!==c.b||e.a!==c.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class vA extends Dr{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class cl extends Dr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const c=this.gl;e?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=e,this.dirty=!1}}class ul extends Dr{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class Na extends Dr{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class wA extends Dr{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class so extends Dr{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class hl extends Dr{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const c=this.current;(e[0]!==c[0]||e[1]!==c[1]||e[2]!==c[2]||e[3]!==c[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class Xo extends Dr{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class _A extends Dr{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class k extends Dr{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class J extends Dr{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class bt extends Dr{getDefault(){return null}set(e){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Mt extends Dr{getDefault(){return null}set(e){var c;if(e===this.current&&!this.dirty)return;const g=this.gl;Bo(g)?g.bindVertexArray(e):(c=g.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(e),this.current=e,this.dirty=!1}}class Gt extends Dr{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class ae extends Dr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class xe extends Dr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class ze extends Dr{constructor(e,c){super(e),this.context=e,this.parent=c}getDefault(){return null}}class ur extends ze{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class Ir extends ze{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Tr extends ze{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Qr{constructor(e,c,g,a,h){this.context=e,this.width=c,this.height=g;const m=e.gl,w=this.framebuffer=m.createFramebuffer();if(this.colorAttachment=new ur(e,w),a)this.depthAttachment=h?new Tr(e,w):new Ir(e,w);else if(h)throw new Error("Stencil cannot be set without depth");if(m.checkFramebufferStatus(m.FRAMEBUFFER)!==m.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const e=this.context.gl,c=this.colorAttachment.get();if(c&&e.deleteTexture(c),this.depthAttachment){const g=this.depthAttachment.get();g&&e.deleteRenderbuffer(g)}e.deleteFramebuffer(this.framebuffer)}}class Sr{constructor(e,c,g){this.blendFunction=e,this.blendColor=c,this.mask=g}}Sr.Replace=[1,0],Sr.disabled=new Sr(Sr.Replace,A.aM.transparent,[!1,!1,!1,!1]),Sr.unblended=new Sr(Sr.Replace,A.aM.transparent,[!0,!0,!0,!0]),Sr.alphaBlended=new Sr([1,771],A.aM.transparent,[!0,!0,!0,!0]);class ki{constructor(e){var c,g;if(this.gl=e,this.clearColor=new qo(this),this.clearDepth=new Co(this),this.clearStencil=new ks(this),this.colorMask=new kc(this),this.depthMask=new ts(this),this.stencilMask=new Ms(this),this.stencilFunc=new gA(this),this.stencilOp=new Da(this),this.stencilTest=new Wl(this),this.depthRange=new Go(this),this.depthTest=new Yl(this),this.depthFunc=new mA(this),this.blend=new yA(this),this.blendFunc=new ll(this),this.blendColor=new gs(this),this.blendEquation=new vA(this),this.cullFace=new cl(this),this.cullFaceSide=new ul(this),this.frontFace=new Na(this),this.program=new wA(this),this.activeTexture=new so(this),this.viewport=new hl(this),this.bindFramebuffer=new Xo(this),this.bindRenderbuffer=new _A(this),this.bindTexture=new k(this),this.bindVertexBuffer=new J(this),this.bindElementBuffer=new bt(this),this.bindVertexArray=new Mt(this),this.pixelStoreUnpack=new Gt(this),this.pixelStoreUnpackPremultiplyAlpha=new ae(this),this.pixelStoreUnpackFlipY=new xe(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),Bo(e)){this.HALF_FLOAT=e.HALF_FLOAT;const a=e.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=e.RGBA16F)!==null&&c!==void 0?c:a==null?void 0:a.RGBA16F_EXT,this.RGB16F=(g=e.RGB16F)!==null&&g!==void 0?g:a==null?void 0:a.RGB16F_EXT,e.getExtension("EXT_color_buffer_float")}else{e.getExtension("EXT_color_buffer_half_float"),e.getExtension("OES_texture_half_float_linear");const a=e.getExtension("OES_texture_half_float");this.HALF_FLOAT=a==null?void 0:a.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,c){return new xo(this,e,c)}createVertexBuffer(e,c,g){return new Tn(this,e,c,g)}createRenderbuffer(e,c,g){const a=this.gl,h=a.createRenderbuffer();return this.bindRenderbuffer.set(h),a.renderbufferStorage(a.RENDERBUFFER,e,c,g),this.bindRenderbuffer.set(null),h}createFramebuffer(e,c,g,a){return new Qr(this,e,c,g,a)}clear({color:e,depth:c,stencil:g}){const a=this.gl;let h=0;e&&(h|=a.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(h|=a.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),g!==void 0&&(h|=a.STENCIL_BUFFER_BIT,this.clearStencil.set(g),this.stencilMask.set(255)),a.clear(h)}setCullFace(e){e.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){A.aE(e.blendFunction,Sr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}createVertexArray(){var e;return Bo(this.gl)?this.gl.createVertexArray():(e=this.gl.getExtension("OES_vertex_array_object"))===null||e===void 0?void 0:e.createVertexArrayOES()}deleteVertexArray(e){var c;return Bo(this.gl)?this.gl.deleteVertexArray(e):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(e)}unbindVAO(){this.bindVertexArray.set(null)}}class Ar{constructor(e,c,g){this.func=e,this.mask=c,this.range=g}}Ar.ReadOnly=!1,Ar.ReadWrite=!0,Ar.disabled=new Ar(519,Ar.ReadOnly,[0,1]);const Yi=7680;class Ur{constructor(e,c,g,a,h,m){this.test=e,this.ref=c,this.mask=g,this.fail=a,this.depthFail=h,this.pass=m}}Ur.disabled=new Ur({func:519,mask:0},0,0,Yi,Yi,Yi);class zr{constructor(e,c,g){this.enable=e,this.mode=c,this.frontFace=g}}let Un;function Ds(_,e,c,g,a){const h=_.context,m=h.gl,w=_.useProgram("collisionBox"),B=[];let S=0,P=0;for(let X=0;X<g.length;X++){const ut=g[X],tt=e.getTile(ut).getBucket(c);if(!tt)continue;const it=a?tt.textCollisionBox:tt.iconCollisionBox,st=tt.collisionCircleArray;if(st.length>0){const yt=A.H();A.aQ(yt,tt.placementInvProjMatrix,_.transform.glCoordMatrix),A.aQ(yt,yt,tt.placementViewportMatrix),B.push({circleArray:st,circleOffset:P,transform:ut.posMatrix,invTransform:yt,coord:ut}),S+=st.length/4,P=S}it&&w.draw(h,m.LINES,Ar.disabled,Ur.disabled,_.colorModeForRenderPass(),zr.disabled,{u_matrix:ut.posMatrix,u_pixel_extrude_scale:[1/(L=_.transform).width,1/L.height]},_.style.map.terrain&&_.style.map.terrain.getTerrainData(ut),c.id,it.layoutVertexBuffer,it.indexBuffer,it.segments,null,_.transform.zoom,null,null,it.collisionVertexBuffer)}var L;if(!a||!B.length)return;const M=_.useProgram("collisionCircle"),N=new A.aR;N.resize(4*S),N._trim();let H=0;for(const X of B)for(let ut=0;ut<X.circleArray.length/4;ut++){const tt=4*ut,it=X.circleArray[tt+0],st=X.circleArray[tt+1],yt=X.circleArray[tt+2],Lt=X.circleArray[tt+3];N.emplace(H++,it,st,yt,Lt,0),N.emplace(H++,it,st,yt,Lt,1),N.emplace(H++,it,st,yt,Lt,2),N.emplace(H++,it,st,yt,Lt,3)}(!Un||Un.length<2*S)&&(Un=function(X){const ut=2*X,tt=new A.aT;tt.resize(ut),tt._trim();for(let it=0;it<ut;it++){const st=6*it;tt.uint16[st+0]=4*it+0,tt.uint16[st+1]=4*it+1,tt.uint16[st+2]=4*it+2,tt.uint16[st+3]=4*it+2,tt.uint16[st+4]=4*it+3,tt.uint16[st+5]=4*it+0}return tt}(S));const Z=h.createIndexBuffer(Un,!0),G=h.createVertexBuffer(N,A.aS.members,!0);for(const X of B){const ut=Gl(X.transform,X.invTransform,_.transform);M.draw(h,m.TRIANGLES,Ar.disabled,Ur.disabled,_.colorModeForRenderPass(),zr.disabled,ut,_.style.map.terrain&&_.style.map.terrain.getTerrainData(X.coord),c.id,G,Z,A.a0.simpleSegment(0,2*X.circleOffset,X.circleArray.length,X.circleArray.length/2),null,_.transform.zoom,null,null,null)}G.destroy(),Z.destroy()}zr.disabled=new zr(!1,1029,2305),zr.backCCW=new zr(!0,1029,2305);const Zo=A.an(new Float32Array(16));function Wo(_,e,c,g,a,h){const{horizontalAlign:m,verticalAlign:w}=A.au(_);return new A.P((-(m-.5)*e/a+g[0])*h,(-(w-.5)*c/a+g[1])*h)}function Yo(_,e,c,g,a,h){const m=e.tileAnchorPoint.add(new A.P(e.translation[0],e.translation[1]));if(e.pitchWithMap){let w=g.mult(h);return c||(w=w.rotate(-a)),gt(m.add(w),e.labelPlaneMatrix,e.getElevation).point}if(c){const w=te(e.tileAnchorPoint.x+1,e.tileAnchorPoint.y,e).point.sub(_),B=Math.atan(w.y/w.x)+(w.x<0?Math.PI:0);return _.add(g.rotate(B))}return _.add(g)}function Jo(_,e,c,g,a,h,m,w,B,S,P,L,M,N){const H=_.text.placedSymbolArray,Z=_.text.dynamicLayoutVertexArray,G=_.icon.dynamicLayoutVertexArray,X={};Z.clear();for(let ut=0;ut<H.length;ut++){const tt=H.get(ut),it=tt.hidden||!tt.crossTileID||_.allowVerticalPlacement&&!tt.placedOrientation?null:g[tt.crossTileID];if(it){const st=new A.P(tt.anchorX,tt.anchorY),yt={getElevation:N,width:a.width,height:a.height,labelPlaneMatrix:h,lineVertexArray:null,pitchWithMap:c,projection:P,projectionCache:null,tileAnchorPoint:st,translation:L,unwrappedTileID:M},Lt=c?gt(st,m,N):te(st.x,st.y,yt),Qt=K(a.cameraToCenterDistance,Lt.signedDistanceFromCamera);let ne=A.ai(_.textSizeData,B,tt)*Qt/A.ap;c&&(ne*=_.tilePixelRatio/w);const{width:ee,height:ie,anchor:Xt,textOffset:we,textBoxScale:De}=it,de=Wo(Xt,ee,ie,we,De,ne),fe=P.getPitchedTextCorrection(a,st.add(new A.P(L[0],L[1])),M),Ne=Yo(Lt.point,yt,e,de,a.angle,fe),pr=_.allowVerticalPlacement&&tt.placedOrientation===A.ah.vertical?Math.PI/2:0;for(let Ue=0;Ue<tt.numGlyphs;Ue++)A.aj(Z,Ne,pr);S&&tt.associatedIconIndex>=0&&(X[tt.associatedIconIndex]={shiftedAnchor:Ne,angle:pr})}else Ge(tt.numGlyphs,Z)}if(S){G.clear();const ut=_.icon.placedSymbolArray;for(let tt=0;tt<ut.length;tt++){const it=ut.get(tt);if(it.hidden)Ge(it.numGlyphs,G);else{const st=X[tt];if(st)for(let yt=0;yt<it.numGlyphs;yt++)A.aj(G,st.shiftedAnchor,st.angle);else Ge(it.numGlyphs,G)}}_.icon.dynamicLayoutVertexBuffer.updateData(G)}_.text.dynamicLayoutVertexBuffer.updateData(Z)}function Ns(_,e,c){return c.iconsInText&&e?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function Os(_,e,c,g,a,h,m,w,B,S,P,L){const M=_.context,N=M.gl,H=_.transform,Z=aA(),G=w==="map",X=B==="map",ut=w!=="viewport"&&c.layout.get("symbol-placement")!=="point",tt=G&&!X&&!ut,it=!X&&ut,st=!c.layout.get("symbol-sort-key").isConstant();let yt=!1;const Lt=_.depthModeForSublayer(0,Ar.ReadOnly),Qt=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ne=[],ee=Z.getCircleRadiusCorrection(H);for(const ie of g){const Xt=e.getTile(ie),we=Xt.getBucket(c);if(!we)continue;const De=a?we.text:we.icon;if(!De||!De.segments.get().length||!De.hasVisibleVertices)continue;const de=De.programConfigurations.get(c.id),fe=a||we.sdfIcons,Ne=a?we.textSizeData:we.iconSizeData,pr=X||H.pitch!==0,Ue=_.useProgram(Ns(fe,a,we),de),or=A.ag(Ne,H.zoom),Nr=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ie);let $r,Ci,fr,pi,Ai=[0,0],Gr=null;if(a)Ci=Xt.glyphAtlasTexture,fr=N.LINEAR,$r=Xt.glyphAtlasTexture.size,we.iconsInText&&(Ai=Xt.imageAtlasTexture.size,Gr=Xt.imageAtlasTexture,pi=pr||_.options.rotating||_.options.zooming||Ne.kind==="composite"||Ne.kind==="camera"?N.LINEAR:N.NEAREST);else{const fi=c.layout.get("icon-size").constantOr(0)!==1||we.iconsNeedLinear;Ci=Xt.imageAtlasTexture,fr=fe||_.options.rotating||_.options.zooming||fi||pr?N.LINEAR:N.NEAREST,$r=Xt.imageAtlasTexture.size}const Wr=tr(Xt,1,_.transform.zoom),wi=it?ie.posMatrix:Zo,tn=ri(wi,X,G,_.transform,Wr),jn=jr(wi,X,G,_.transform,Wr),Fi=jr(ie.posMatrix,X,G,_.transform,Wr),xn=Z.translatePosition(_.transform,Xt,h,m),go=Qt&&we.hasTextData(),sa=c.layout.get("icon-text-fit")!=="none"&&go&&we.hasIconData();if(ut){const fi=_.style.map.terrain?(ss,yo)=>_.style.map.terrain.getElevation(ie,ss,yo):null,Cn=c.layout.get("text-rotation-alignment")==="map";At(we,ie.posMatrix,_,a,tn,Fi,X,S,Cn,Z,ie.toUnwrapped(),H.width,H.height,xn,fi)}const ji=ie.posMatrix,Yr=a&&Qt||sa,mo=ut||Yr?Zo:tn,_s=jn,Bn=fe&&c.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ki;Ki=fe?we.iconsInText?Al(Ne.kind,or,tt,X,ut,Yr,_,ji,mo,_s,xn,$r,Ai,ee):Zl(Ne.kind,or,tt,X,ut,Yr,_,ji,mo,_s,xn,a,$r,!0,ee):Xl(Ne.kind,or,tt,X,ut,Yr,_,ji,mo,_s,xn,a,$r,ee);const pn={program:Ue,buffers:De,uniformValues:Ki,atlasTexture:Ci,atlasTextureIcon:Gr,atlasInterpolation:fr,atlasInterpolationIcon:pi,isSDF:fe,hasHalo:Bn};if(st&&we.canOverlap){yt=!0;const fi=De.segments.get();for(const Cn of fi)ne.push({segments:new A.a0([Cn]),sortKey:Cn.sortKey,state:pn,terrainData:Nr})}else ne.push({segments:De.segments,sortKey:0,state:pn,terrainData:Nr})}yt&&ne.sort((ie,Xt)=>ie.sortKey-Xt.sortKey);for(const ie of ne){const Xt=ie.state;if(M.activeTexture.set(N.TEXTURE0),Xt.atlasTexture.bind(Xt.atlasInterpolation,N.CLAMP_TO_EDGE),Xt.atlasTextureIcon&&(M.activeTexture.set(N.TEXTURE1),Xt.atlasTextureIcon&&Xt.atlasTextureIcon.bind(Xt.atlasInterpolationIcon,N.CLAMP_TO_EDGE)),Xt.isSDF){const we=Xt.uniformValues;Xt.hasHalo&&(we.u_is_halo=1,Ji(Xt.buffers,ie.segments,c,_,Xt.program,Lt,P,L,we,ie.terrainData)),we.u_is_halo=0}Ji(Xt.buffers,ie.segments,c,_,Xt.program,Lt,P,L,Xt.uniformValues,ie.terrainData)}}function Ji(_,e,c,g,a,h,m,w,B,S){const P=g.context;a.draw(P,P.gl.TRIANGLES,h,m,w,zr.disabled,B,S,c.id,_.layoutVertexBuffer,_.indexBuffer,e,c.paint,g.transform.zoom,_.programConfigurations.get(c.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function _n(_,e,c,g,a){if(!c||!g||!g.imageAtlas)return;const h=g.imageAtlas.patternPositions;let m=h[c.to.toString()],w=h[c.from.toString()];if(!m&&w&&(m=w),!w&&m&&(w=m),!m||!w){const B=a.getPaintProperty(e);m=h[B],w=h[B]}m&&w&&_.setConstantPatternPositions(m,w)}function ta(_,e,c,g,a,h,m){const w=_.context.gl,B="fill-pattern",S=c.paint.get(B),P=S&&S.constantOr(1),L=c.getCrossfadeParameters();let M,N,H,Z,G;m?(N=P&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",M=w.LINES):(N=P?"fillPattern":"fill",M=w.TRIANGLES);const X=S.constantOr(null);for(const ut of g){const tt=e.getTile(ut);if(P&&!tt.patternsLoaded())continue;const it=tt.getBucket(c);if(!it)continue;const st=it.programConfigurations.get(c.id),yt=_.useProgram(N,st),Lt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ut);P&&(_.context.activeTexture.set(w.TEXTURE0),tt.imageAtlasTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE),st.updatePaintBuffers(L)),_n(st,B,X,tt,c);const Qt=Lt?ut:null,ne=_.translatePosMatrix(Qt?Qt.posMatrix:ut.posMatrix,tt,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(m){Z=it.indexBuffer2,G=it.segments2;const ee=[w.drawingBufferWidth,w.drawingBufferHeight];H=N==="fillOutlinePattern"&&P?hA(ne,_,L,tt,ee):bo(ne,ee)}else Z=it.indexBuffer,G=it.segments,H=P?$o(ne,_,L,tt):Ua(ne);yt.draw(_.context,M,a,_.stencilModeForClipping(ut),h,zr.disabled,H,Lt,c.id,it.layoutVertexBuffer,Z,G,c.paint,_.transform.zoom,st)}}function oo(_,e,c,g,a,h,m){const w=_.context,B=w.gl,S="fill-extrusion-pattern",P=c.paint.get(S),L=P.constantOr(1),M=c.getCrossfadeParameters(),N=c.paint.get("fill-extrusion-opacity"),H=P.constantOr(null);for(const Z of g){const G=e.getTile(Z),X=G.getBucket(c);if(!X)continue;const ut=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Z),tt=X.programConfigurations.get(c.id),it=_.useProgram(L?"fillExtrusionPattern":"fillExtrusion",tt);L&&(_.context.activeTexture.set(B.TEXTURE0),G.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),tt.updatePaintBuffers(M)),_n(tt,S,H,G,c);const st=_.translatePosMatrix(Z.posMatrix,G,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),yt=c.paint.get("fill-extrusion-vertical-gradient"),Lt=L?uA(st,_,yt,N,Z,M,G):Ko(st,_,yt,N);it.draw(w,w.gl.TRIANGLES,a,h,m,zr.backCCW,Lt,ut,c.id,X.layoutVertexBuffer,X.indexBuffer,X.segments,c.paint,_.transform.zoom,tt,_.style.map.terrain&&X.centroidVertexBuffer)}}function ms(_,e,c,g,a,h,m){const w=_.context,B=w.gl,S=c.fbo;if(!S)return;const P=_.useProgram("hillshade"),L=_.style.map.terrain&&_.style.map.terrain.getTerrainData(e);w.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,S.colorAttachment.get()),P.draw(w,B.TRIANGLES,a,h,m,zr.disabled,((M,N,H,Z)=>{const G=H.paint.get("hillshade-shadow-color"),X=H.paint.get("hillshade-highlight-color"),ut=H.paint.get("hillshade-accent-color");let tt=H.paint.get("hillshade-illumination-direction")*(Math.PI/180);H.paint.get("hillshade-illumination-anchor")==="viewport"&&(tt-=M.transform.angle);const it=!M.options.moving;return{u_matrix:Z?Z.posMatrix:M.transform.calculatePosMatrix(N.tileID.toUnwrapped(),it),u_image:0,u_latrange:lr(0,N.tileID),u_light:[H.paint.get("hillshade-exaggeration"),tt],u_shadow:G,u_highlight:X,u_accent:ut}})(_,c,g,L?e:null),L,g.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}function ea(_,e,c,g,a,h){const m=_.context,w=m.gl,B=e.dem;if(B&&B.data){const S=B.dim,P=B.stride,L=B.getPixels();if(m.activeTexture.set(w.TEXTURE1),m.pixelStoreUnpackPremultiplyAlpha.set(!1),e.demTexture=e.demTexture||_.getTileTexture(P),e.demTexture){const N=e.demTexture;N.update(L,{premultiply:!1}),N.bind(w.NEAREST,w.CLAMP_TO_EDGE)}else e.demTexture=new at(m,L,w.RGBA,{premultiply:!1}),e.demTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE);m.activeTexture.set(w.TEXTURE0);let M=e.fbo;if(!M){const N=new at(m,{width:S,height:S,data:null},w.RGBA);N.bind(w.LINEAR,w.CLAMP_TO_EDGE),M=e.fbo=m.createFramebuffer(S,S,!0,!1),M.colorAttachment.set(N.texture)}m.bindFramebuffer.set(M.framebuffer),m.viewport.set([0,0,S,S]),_.useProgram("hillshadePrepare").draw(m,w.TRIANGLES,g,a,h,zr.disabled,((N,H)=>{const Z=H.stride,G=A.H();return A.aP(G,0,A.X,-A.X,0,0,1),A.J(G,G,[0,-A.X,0]),{u_matrix:G,u_image:1,u_dimension:[Z,Z],u_zoom:N.overscaledZ,u_unpack:H.getUnpackVector()}})(e.tileID,B),null,c.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments),e.needsHillshadePrepare=!1}}function hn(_,e,c,g,a,h){const m=g.paint.get("raster-fade-duration");if(!h&&m>0){const w=E.now(),B=(w-_.timeAdded)/m,S=e?(w-e.timeAdded)/m:-1,P=c.getSource(),L=a.coveringZoomLevel({tileSize:P.tileSize,roundZoom:P.roundZoom}),M=!e||Math.abs(e.tileID.overscaledZ-L)>Math.abs(_.tileID.overscaledZ-L),N=M&&_.refreshedUponExpiration?1:A.ac(M?B:1-S,0,1);return _.refreshedUponExpiration&&B>=1&&(_.refreshedUponExpiration=!1),e?{opacity:1,mix:1-N}:{opacity:N,mix:0}}return{opacity:1,mix:0}}const Oa=new A.aM(1,0,0,1),ra=new A.aM(0,1,0,1),dl=new A.aM(0,0,1,1),bn=new A.aM(1,0,1,1),ao=new A.aM(0,1,1,1);function pl(_,e,c,g){Er(_,0,e+c/2,_.transform.width,c,g)}function bA(_,e,c,g){Er(_,e-c/2,0,c,_.transform.height,g)}function Er(_,e,c,g,a,h){const m=_.context,w=m.gl;w.enable(w.SCISSOR_TEST),w.scissor(e*_.pixelRatio,c*_.pixelRatio,g*_.pixelRatio,a*_.pixelRatio),m.clear({color:h}),w.disable(w.SCISSOR_TEST)}function Pn(_,e,c){const g=_.context,a=g.gl,h=c.posMatrix,m=_.useProgram("debug"),w=Ar.disabled,B=Ur.disabled,S=_.colorModeForRenderPass(),P="$debug",L=_.style.map.terrain&&_.style.map.terrain.getTerrainData(c);g.activeTexture.set(a.TEXTURE0);const M=e.getTileByID(c.key).latestRawTileData,N=Math.floor((M&&M.byteLength||0)/1024),H=e.getTile(c).tileSize,Z=512/Math.min(H,512)*(c.overscaledZ/_.transform.zoom)*.5;let G=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(G+=` => ${c.overscaledZ}`),function(X,ut){X.initDebugOverlayCanvas();const tt=X.debugOverlayCanvas,it=X.context.gl,st=X.debugOverlayCanvas.getContext("2d");st.clearRect(0,0,tt.width,tt.height),st.shadowColor="white",st.shadowBlur=2,st.lineWidth=1.5,st.strokeStyle="white",st.textBaseline="top",st.font="bold 36px Open Sans, sans-serif",st.fillText(ut,5,5),st.strokeText(ut,5,5),X.debugOverlayTexture.update(tt),X.debugOverlayTexture.bind(it.LINEAR,it.CLAMP_TO_EDGE)}(_,`${G} ${N}kB`),m.draw(g,a.TRIANGLES,w,B,Sr.alphaBlended,zr.disabled,Ei(h,A.aM.transparent,Z),null,P,_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments),m.draw(g,a.LINE_STRIP,w,B,S,zr.disabled,Ei(h,A.aM.red),L,P,_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments)}function ys(_,e,c){const g=_.context,a=g.gl,h=_.colorModeForRenderPass(),m=new Ar(a.LEQUAL,Ar.ReadWrite,_.depthRangeFor3D),w=_.useProgram("terrain"),B=e.getTerrainMesh();g.bindFramebuffer.set(null),g.viewport.set([0,0,_.width,_.height]);for(const S of c){const P=_.renderToTexture.getTexture(S),L=e.getTerrainData(S.tileID);g.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,P.texture);const M=_.transform.calculatePosMatrix(S.tileID.toUnwrapped()),N=e.getMeshFrameDelta(_.transform.zoom),H=_.transform.calculateFogMatrix(S.tileID.toUnwrapped()),Z=lA(M,N,H,_.style.sky,_.transform.pitch);w.draw(g,a.TRIANGLES,m,Ur.disabled,h,zr.backCCW,Z,L,"terrain",B.vertexBuffer,B.indexBuffer,B.segments)}}class Ao{constructor(e,c,g){this.vertexBuffer=e,this.indexBuffer=c,this.segments=g}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class Rn{constructor(e,c){this.context=new ki(e),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:A.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Ee.maxUnderzooming+Ee.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new vn}resize(e,c,g){if(this.width=Math.floor(e*g),this.height=Math.floor(c*g),this.pixelRatio=g,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const a of this.style._order)this.style._layers[a].resize()}setup(){const e=this.context,c=new A.aW;c.emplaceBack(0,0),c.emplaceBack(A.X,0),c.emplaceBack(0,A.X),c.emplaceBack(A.X,A.X),this.tileExtentBuffer=e.createVertexBuffer(c,Wi.members),this.tileExtentSegments=A.a0.simpleSegment(0,0,4,2);const g=new A.aW;g.emplaceBack(0,0),g.emplaceBack(A.X,0),g.emplaceBack(0,A.X),g.emplaceBack(A.X,A.X),this.debugBuffer=e.createVertexBuffer(g,Wi.members),this.debugSegments=A.a0.simpleSegment(0,0,4,5);const a=new A.$;a.emplaceBack(0,0,0,0),a.emplaceBack(A.X,0,A.X,0),a.emplaceBack(0,A.X,0,A.X),a.emplaceBack(A.X,A.X,A.X,A.X),this.rasterBoundsBuffer=e.createVertexBuffer(a,Ce.members),this.rasterBoundsSegments=A.a0.simpleSegment(0,0,4,2);const h=new A.aW;h.emplaceBack(0,0),h.emplaceBack(1,0),h.emplaceBack(0,1),h.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(h,Wi.members),this.viewportSegments=A.a0.simpleSegment(0,0,4,2);const m=new A.aY;m.emplaceBack(0),m.emplaceBack(1),m.emplaceBack(3),m.emplaceBack(2),m.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(m);const w=new A.aX;w.emplaceBack(0,1,2),w.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(w);const B=this.context.gl;this.stencilClearMode=new Ur({func:B.ALWAYS,mask:0},0,255,B.ZERO,B.ZERO,B.ZERO)}clearStencil(){const e=this.context,c=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const g=A.H();A.aP(g,0,this.width,this.height,0,0,1),A.K(g,g,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,c.TRIANGLES,Ar.disabled,this.stencilClearMode,Sr.disabled,zr.disabled,La(g),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,c){if(this.currentStencilSource===e.source||!e.isTileClipped()||!c||!c.length)return;this.currentStencilSource=e.source;const g=this.context,a=g.gl;this.nextStencilID+c.length>256&&this.clearStencil(),g.setColorMode(Sr.disabled),g.setDepthMode(Ar.disabled);const h=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const m of c){const w=this._tileClippingMaskIDs[m.key]=this.nextStencilID++,B=this.style.map.terrain&&this.style.map.terrain.getTerrainData(m);h.draw(g,a.TRIANGLES,Ar.disabled,new Ur({func:a.ALWAYS,mask:0},w,255,a.KEEP,a.KEEP,a.REPLACE),Sr.disabled,zr.disabled,La(m.posMatrix),B,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,c=this.context.gl;return new Ur({func:c.NOTEQUAL,mask:255},e,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(e){const c=this.context.gl;return new Ur({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(e){const c=this.context.gl,g=e.sort((m,w)=>w.overscaledZ-m.overscaledZ),a=g[g.length-1].overscaledZ,h=g[0].overscaledZ-a+1;if(h>1){this.currentStencilSource=void 0,this.nextStencilID+h>256&&this.clearStencil();const m={};for(let w=0;w<h;w++)m[w+a]=new Ur({func:c.GEQUAL,mask:255},w+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=h,[m,g]}return[{[a]:Ur.disabled},g]}colorModeForRenderPass(){const e=this.context.gl;return this._showOverdrawInspector?new Sr([e.CONSTANT_COLOR,e.ONE],new A.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Sr.unblended:Sr.alphaBlended}depthModeForSublayer(e,c,g){if(!this.opaquePassEnabledForLayer())return Ar.disabled;const a=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new Ar(g||this.context.gl.LEQUAL,c,[a,a])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,c){this.style=e,this.options=c,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(E.now()),this.imageManager.beginFrame();const g=this.style._order,a=this.style.sourceCaches,h={},m={},w={};for(const B in a){const S=a[B];S.used&&S.prepare(this.context),h[B]=S.getVisibleCoordinates(),m[B]=h[B].slice().reverse(),w[B]=S.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let B=0;B<g.length;B++)if(this.style._layers[g[B]].is3D()){this.opaquePassCutoff=B;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const B of g){const S=this.style._layers[B];if(!S.hasOffscreenPass()||S.isHidden(this.transform.zoom))continue;const P=m[S.source];(S.type==="custom"||P.length)&&this.renderLayer(this,a[S.source],S,P)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?A.aM.black:A.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(B,S){const P=B.context,L=P.gl,M=((X,ut,tt)=>({u_sky_color:X.properties.get("sky-color"),u_horizon_color:X.properties.get("horizon-color"),u_horizon:(ut.height/2+ut.getHorizon())*tt,u_sky_horizon_blend:X.properties.get("sky-horizon-blend")*ut.height/2*tt}))(S,B.style.map.transform,B.pixelRatio),N=new Ar(L.LEQUAL,Ar.ReadWrite,[0,1]),H=Ur.disabled,Z=B.colorModeForRenderPass(),G=B.useProgram("sky");if(!S.mesh){const X=new A.aW;X.emplaceBack(-1,-1),X.emplaceBack(1,-1),X.emplaceBack(1,1),X.emplaceBack(-1,1);const ut=new A.aX;ut.emplaceBack(0,1,2),ut.emplaceBack(0,2,3),S.mesh=new Ao(P.createVertexBuffer(X,Wi.members),P.createIndexBuffer(ut),A.a0.simpleSegment(0,0,X.length,ut.length))}G.draw(P,L.TRIANGLES,N,H,Z,zr.disabled,M,void 0,"sky",S.mesh.vertexBuffer,S.mesh.indexBuffer,S.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=g.length-1;this.currentLayer>=0;this.currentLayer--){const B=this.style._layers[g[this.currentLayer]],S=a[B.source],P=h[B.source];this._renderTileClippingMasks(B,P),this.renderLayer(this,S,B,P)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<g.length;this.currentLayer++){const B=this.style._layers[g[this.currentLayer]],S=a[B.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(B))continue;const P=(B.type==="symbol"?w:m)[B.source];this._renderTileClippingMasks(B,h[B.source]),this.renderLayer(this,S,B,P)}if(this.options.showTileBoundaries){const B=function(S,P){let L=null;const M=Object.values(S._layers).flatMap(G=>G.source&&!G.isHidden(P)?[S.sourceCaches[G.source]]:[]),N=M.filter(G=>G.getSource().type==="vector"),H=M.filter(G=>G.getSource().type!=="vector"),Z=G=>{(!L||L.getSource().maxzoom<G.getSource().maxzoom)&&(L=G)};return N.forEach(G=>Z(G)),L||H.forEach(G=>Z(G)),L}(this.style,this.transform.zoom);B&&function(S,P,L){for(let M=0;M<L.length;M++)Pn(S,P,L[M])}(this,B,B.getVisibleCoordinates())}this.options.showPadding&&function(B){const S=B.transform.padding;pl(B,B.transform.height-(S.top||0),3,Oa),pl(B,S.bottom||0,3,ra),bA(B,S.left||0,3,dl),bA(B,B.transform.width-(S.right||0),3,bn);const P=B.transform.centerPoint;(function(L,M,N,H){Er(L,M-1,N-10,2,20,H),Er(L,M-10,N-1,20,2,H)})(B,P.x,B.transform.height-P.y,ao)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(e){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,g=this.transform.modelViewProjectionMatrix;let a=this.terrainFacilitator.dirty;a||(a=e?!A.aZ(c,g):!A.a_(c,g)),a||(a=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),a&&(A.a$(c,g),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(h,m){const w=h.context,B=w.gl,S=Sr.unblended,P=new Ar(B.LEQUAL,Ar.ReadWrite,[0,1]),L=m.getTerrainMesh(),M=m.sourceCache.getRenderableTiles(),N=h.useProgram("terrainDepth");w.bindFramebuffer.set(m.getFramebuffer("depth").framebuffer),w.viewport.set([0,0,h.width/devicePixelRatio,h.height/devicePixelRatio]),w.clear({color:A.aM.transparent,depth:1});for(const H of M){const Z=m.getTerrainData(H.tileID),G={u_matrix:h.transform.calculatePosMatrix(H.tileID.toUnwrapped()),u_ele_delta:m.getMeshFrameDelta(h.transform.zoom)};N.draw(w,B.TRIANGLES,P,Ur.disabled,S,zr.backCCW,G,Z,"terrain",L.vertexBuffer,L.indexBuffer,L.segments)}w.bindFramebuffer.set(null),w.viewport.set([0,0,h.width,h.height])}(this,this.style.map.terrain),function(h,m){const w=h.context,B=w.gl,S=Sr.unblended,P=new Ar(B.LEQUAL,Ar.ReadWrite,[0,1]),L=m.getTerrainMesh(),M=m.getCoordsTexture(),N=m.sourceCache.getRenderableTiles(),H=h.useProgram("terrainCoords");w.bindFramebuffer.set(m.getFramebuffer("coords").framebuffer),w.viewport.set([0,0,h.width/devicePixelRatio,h.height/devicePixelRatio]),w.clear({color:A.aM.transparent,depth:1}),m.coordsIndex=[];for(const Z of N){const G=m.getTerrainData(Z.tileID);w.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,M.texture);const X={u_matrix:h.transform.calculatePosMatrix(Z.tileID.toUnwrapped()),u_terrain_coords_id:(255-m.coordsIndex.length)/255,u_texture:0,u_ele_delta:m.getMeshFrameDelta(h.transform.zoom)};H.draw(w,B.TRIANGLES,P,Ur.disabled,S,zr.backCCW,X,G,"terrain",L.vertexBuffer,L.indexBuffer,L.segments),m.coordsIndex.push(Z.tileID.key)}w.bindFramebuffer.set(null),w.viewport.set([0,0,h.width,h.height])}(this,this.style.map.terrain))}renderLayer(e,c,g,a){if(!g.isHidden(this.transform.zoom)&&(g.type==="background"||g.type==="custom"||(a||[]).length))switch(this.id=g.id,g.type){case"symbol":(function(h,m,w,B,S){if(h.renderPass!=="translucent")return;const P=Ur.disabled,L=h.colorModeForRenderPass();(w._unevaluatedLayout.hasValue("text-variable-anchor")||w._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(M,N,H,Z,G,X,ut,tt,it){const st=N.transform,yt=aA(),Lt=G==="map",Qt=X==="map";for(const ne of M){const ee=Z.getTile(ne),ie=ee.getBucket(H);if(!ie||!ie.text||!ie.text.segments.get().length)continue;const Xt=A.ag(ie.textSizeData,st.zoom),we=tr(ee,1,N.transform.zoom),De=ri(ne.posMatrix,Qt,Lt,N.transform,we),de=H.layout.get("icon-text-fit")!=="none"&&ie.hasIconData();if(Xt){const fe=Math.pow(2,st.zoom-ee.tileID.overscaledZ),Ne=N.style.map.terrain?(Ue,or)=>N.style.map.terrain.getElevation(ne,Ue,or):null,pr=yt.translatePosition(st,ee,ut,tt);Jo(ie,Lt,Qt,it,st,De,ne.posMatrix,fe,Xt,de,yt,pr,ne.toUnwrapped(),Ne)}}}(B,h,w,m,w.layout.get("text-rotation-alignment"),w.layout.get("text-pitch-alignment"),w.paint.get("text-translate"),w.paint.get("text-translate-anchor"),S),w.paint.get("icon-opacity").constantOr(1)!==0&&Os(h,m,w,B,!1,w.paint.get("icon-translate"),w.paint.get("icon-translate-anchor"),w.layout.get("icon-rotation-alignment"),w.layout.get("icon-pitch-alignment"),w.layout.get("icon-keep-upright"),P,L),w.paint.get("text-opacity").constantOr(1)!==0&&Os(h,m,w,B,!0,w.paint.get("text-translate"),w.paint.get("text-translate-anchor"),w.layout.get("text-rotation-alignment"),w.layout.get("text-pitch-alignment"),w.layout.get("text-keep-upright"),P,L),m.map.showCollisionBoxes&&(Ds(h,m,w,B,!0),Ds(h,m,w,B,!1))})(e,c,g,a,this.style.placement.variableOffsets);break;case"circle":(function(h,m,w,B){if(h.renderPass!=="translucent")return;const S=w.paint.get("circle-opacity"),P=w.paint.get("circle-stroke-width"),L=w.paint.get("circle-stroke-opacity"),M=!w.layout.get("circle-sort-key").isConstant();if(S.constantOr(1)===0&&(P.constantOr(1)===0||L.constantOr(1)===0))return;const N=h.context,H=N.gl,Z=h.depthModeForSublayer(0,Ar.ReadOnly),G=Ur.disabled,X=h.colorModeForRenderPass(),ut=[];for(let tt=0;tt<B.length;tt++){const it=B[tt],st=m.getTile(it),yt=st.getBucket(w);if(!yt)continue;const Lt=yt.programConfigurations.get(w.id),Qt=h.useProgram("circle",Lt),ne=yt.layoutVertexBuffer,ee=yt.indexBuffer,ie=h.style.map.terrain&&h.style.map.terrain.getTerrainData(it),Xt={programConfiguration:Lt,program:Qt,layoutVertexBuffer:ne,indexBuffer:ee,uniformValues:Pa(h,it,st,w),terrainData:ie};if(M){const we=yt.segments.get();for(const De of we)ut.push({segments:new A.a0([De]),sortKey:De.sortKey,state:Xt})}else ut.push({segments:yt.segments,sortKey:0,state:Xt})}M&&ut.sort((tt,it)=>tt.sortKey-it.sortKey);for(const tt of ut){const{programConfiguration:it,program:st,layoutVertexBuffer:yt,indexBuffer:Lt,uniformValues:Qt,terrainData:ne}=tt.state;st.draw(N,H.TRIANGLES,Z,G,X,zr.disabled,Qt,ne,w.id,yt,Lt,tt.segments,w.paint,h.transform.zoom,it)}})(e,c,g,a);break;case"heatmap":(function(h,m,w,B){if(w.paint.get("heatmap-opacity")!==0)if(h.renderPass==="offscreen"){const S=h.context,P=S.gl,L=Ur.disabled,M=new Sr([P.ONE,P.ONE],A.aM.transparent,[!0,!0,!0,!0]);(function(N,H,Z){const G=N.gl;N.activeTexture.set(G.TEXTURE1),N.viewport.set([0,0,H.width/4,H.height/4]);let X=Z.heatmapFbo;if(X)G.bindTexture(G.TEXTURE_2D,X.colorAttachment.get()),N.bindFramebuffer.set(X.framebuffer);else{const ut=G.createTexture();G.bindTexture(G.TEXTURE_2D,ut),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_S,G.CLAMP_TO_EDGE),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_T,G.CLAMP_TO_EDGE),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MIN_FILTER,G.LINEAR),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MAG_FILTER,G.LINEAR),X=Z.heatmapFbo=N.createFramebuffer(H.width/4,H.height/4,!1,!1),function(tt,it,st,yt){var Lt,Qt;const ne=tt.gl,ee=(Lt=tt.HALF_FLOAT)!==null&&Lt!==void 0?Lt:ne.UNSIGNED_BYTE,ie=(Qt=tt.RGBA16F)!==null&&Qt!==void 0?Qt:ne.RGBA;ne.texImage2D(ne.TEXTURE_2D,0,ie,it.width/4,it.height/4,0,ne.RGBA,ee,null),yt.colorAttachment.set(st)}(N,H,ut,X)}})(S,h,w),S.clear({color:A.aM.transparent});for(let N=0;N<B.length;N++){const H=B[N];if(m.hasRenderableParent(H))continue;const Z=m.getTile(H),G=Z.getBucket(w);if(!G)continue;const X=G.programConfigurations.get(w.id),ut=h.useProgram("heatmap",X),{zoom:tt}=h.transform;ut.draw(S,P.TRIANGLES,Ar.disabled,L,M,zr.disabled,wn(H.posMatrix,Z,tt,w.paint.get("heatmap-intensity")),null,w.id,G.layoutVertexBuffer,G.indexBuffer,G.segments,w.paint,h.transform.zoom,X)}S.viewport.set([0,0,h.width,h.height])}else h.renderPass==="translucent"&&(h.context.setColorMode(h.colorModeForRenderPass()),function(S,P){const L=S.context,M=L.gl,N=P.heatmapFbo;if(!N)return;L.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,N.colorAttachment.get()),L.activeTexture.set(M.TEXTURE1);let H=P.colorRampTexture;H||(H=P.colorRampTexture=new at(L,P.colorRamp,M.RGBA)),H.bind(M.LINEAR,M.CLAMP_TO_EDGE),S.useProgram("heatmapTexture").draw(L,M.TRIANGLES,Ar.disabled,Ur.disabled,S.colorModeForRenderPass(),zr.disabled,((Z,G,X,ut)=>{const tt=A.H();A.aP(tt,0,Z.width,Z.height,0,0,1);const it=Z.context.gl;return{u_matrix:tt,u_world:[it.drawingBufferWidth,it.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:G.paint.get("heatmap-opacity")}})(S,P),null,P.id,S.viewportBuffer,S.quadTriangleIndexBuffer,S.viewportSegments,P.paint,S.transform.zoom)}(h,w))})(e,c,g,a);break;case"line":(function(h,m,w,B){if(h.renderPass!=="translucent")return;const S=w.paint.get("line-opacity"),P=w.paint.get("line-width");if(S.constantOr(1)===0||P.constantOr(1)===0)return;const L=h.depthModeForSublayer(0,Ar.ReadOnly),M=h.colorModeForRenderPass(),N=w.paint.get("line-dasharray"),H=w.paint.get("line-pattern"),Z=H.constantOr(1),G=w.paint.get("line-gradient"),X=w.getCrossfadeParameters(),ut=Z?"linePattern":N?"lineSDF":G?"lineGradient":"line",tt=h.context,it=tt.gl;let st=!0;for(const yt of B){const Lt=m.getTile(yt);if(Z&&!Lt.patternsLoaded())continue;const Qt=Lt.getBucket(w);if(!Qt)continue;const ne=Qt.programConfigurations.get(w.id),ee=h.context.program.get(),ie=h.useProgram(ut,ne),Xt=st||ie.program!==ee,we=h.style.map.terrain&&h.style.map.terrain.getTerrainData(yt),De=H.constantOr(null);if(De&&Lt.imageAtlas){const Ne=Lt.imageAtlas,pr=Ne.patternPositions[De.to.toString()],Ue=Ne.patternPositions[De.from.toString()];pr&&Ue&&ne.setConstantPatternPositions(pr,Ue)}const de=we?yt:null,fe=Z?Qs(h,Lt,w,X,de):N?ol(h,Lt,w,N,X,de):G?dA(h,Lt,w,Qt.lineClipsArray.length,de):Qa(h,Lt,w,de);if(Z)tt.activeTexture.set(it.TEXTURE0),Lt.imageAtlasTexture.bind(it.LINEAR,it.CLAMP_TO_EDGE),ne.updatePaintBuffers(X);else if(N&&(Xt||h.lineAtlas.dirty))tt.activeTexture.set(it.TEXTURE0),h.lineAtlas.bind(tt);else if(G){const Ne=Qt.gradients[w.id];let pr=Ne.texture;if(w.gradientVersion!==Ne.version){let Ue=256;if(w.stepInterpolant){const or=m.getSource().maxzoom,Nr=yt.canonical.z===or?Math.ceil(1<<h.transform.maxZoom-yt.canonical.z):1;Ue=A.ac(A.aU(Qt.maxLineLength/A.X*1024*Nr),256,tt.maxTextureSize)}Ne.gradient=A.aV({expression:w.gradientExpression(),evaluationKey:"lineProgress",resolution:Ue,image:Ne.gradient||void 0,clips:Qt.lineClipsArray}),Ne.texture?Ne.texture.update(Ne.gradient):Ne.texture=new at(tt,Ne.gradient,it.RGBA),Ne.version=w.gradientVersion,pr=Ne.texture}tt.activeTexture.set(it.TEXTURE0),pr.bind(w.stepInterpolant?it.NEAREST:it.LINEAR,it.CLAMP_TO_EDGE)}ie.draw(tt,it.TRIANGLES,L,h.stencilModeForClipping(yt),M,zr.disabled,fe,we,w.id,Qt.layoutVertexBuffer,Qt.indexBuffer,Qt.segments,w.paint,h.transform.zoom,ne,Qt.layoutVertexBuffer2),st=!1}})(e,c,g,a);break;case"fill":(function(h,m,w,B){const S=w.paint.get("fill-color"),P=w.paint.get("fill-opacity");if(P.constantOr(1)===0)return;const L=h.colorModeForRenderPass(),M=w.paint.get("fill-pattern"),N=h.opaquePassEnabledForLayer()&&!M.constantOr(1)&&S.constantOr(A.aM.transparent).a===1&&P.constantOr(0)===1?"opaque":"translucent";if(h.renderPass===N){const H=h.depthModeForSublayer(1,h.renderPass==="opaque"?Ar.ReadWrite:Ar.ReadOnly);ta(h,m,w,B,H,L,!1)}if(h.renderPass==="translucent"&&w.paint.get("fill-antialias")){const H=h.depthModeForSublayer(w.getPaintProperty("fill-outline-color")?2:0,Ar.ReadOnly);ta(h,m,w,B,H,L,!0)}})(e,c,g,a);break;case"fill-extrusion":(function(h,m,w,B){const S=w.paint.get("fill-extrusion-opacity");if(S!==0&&h.renderPass==="translucent"){const P=new Ar(h.context.gl.LEQUAL,Ar.ReadWrite,h.depthRangeFor3D);if(S!==1||w.paint.get("fill-extrusion-pattern").constantOr(1))oo(h,m,w,B,P,Ur.disabled,Sr.disabled),oo(h,m,w,B,P,h.stencilModeFor3D(),h.colorModeForRenderPass());else{const L=h.colorModeForRenderPass();oo(h,m,w,B,P,Ur.disabled,L)}}})(e,c,g,a);break;case"hillshade":(function(h,m,w,B){if(h.renderPass!=="offscreen"&&h.renderPass!=="translucent")return;const S=h.context,P=h.depthModeForSublayer(0,Ar.ReadOnly),L=h.colorModeForRenderPass(),[M,N]=h.renderPass==="translucent"?h.stencilConfigForOverlap(B):[{},B];for(const H of N){const Z=m.getTile(H);Z.needsHillshadePrepare!==void 0&&Z.needsHillshadePrepare&&h.renderPass==="offscreen"?ea(h,Z,w,P,Ur.disabled,L):h.renderPass==="translucent"&&ms(h,H,Z,w,P,M[H.overscaledZ],L)}S.viewport.set([0,0,h.width,h.height])})(e,c,g,a);break;case"raster":(function(h,m,w,B){if(h.renderPass!=="translucent"||w.paint.get("raster-opacity")===0||!B.length)return;const S=h.context,P=S.gl,L=m.getSource(),M=h.useProgram("raster"),N=h.colorModeForRenderPass(),[H,Z]=L instanceof He?[{},B]:h.stencilConfigForOverlap(B),G=Z[Z.length-1].overscaledZ,X=!h.options.moving;for(const ut of Z){const tt=h.depthModeForSublayer(ut.overscaledZ-G,w.paint.get("raster-opacity")===1?Ar.ReadWrite:Ar.ReadOnly,P.LESS),it=m.getTile(ut);it.registerFadeDuration(w.paint.get("raster-fade-duration"));const st=m.findLoadedParent(ut,0),yt=m.findLoadedSibling(ut),Lt=hn(it,st||yt||null,m,w,h.transform,h.style.map.terrain);let Qt,ne;const ee=w.paint.get("raster-resampling")==="nearest"?P.NEAREST:P.LINEAR;S.activeTexture.set(P.TEXTURE0),it.texture.bind(ee,P.CLAMP_TO_EDGE,P.LINEAR_MIPMAP_NEAREST),S.activeTexture.set(P.TEXTURE1),st?(st.texture.bind(ee,P.CLAMP_TO_EDGE,P.LINEAR_MIPMAP_NEAREST),Qt=Math.pow(2,st.tileID.overscaledZ-it.tileID.overscaledZ),ne=[it.tileID.canonical.x*Qt%1,it.tileID.canonical.y*Qt%1]):it.texture.bind(ee,P.CLAMP_TO_EDGE,P.LINEAR_MIPMAP_NEAREST),it.texture.useMipmap&&S.extTextureFilterAnisotropic&&h.transform.pitch>20&&P.texParameterf(P.TEXTURE_2D,S.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,S.extTextureFilterAnisotropicMax);const ie=h.style.map.terrain&&h.style.map.terrain.getTerrainData(ut),Xt=ie?ut:null,we=Xt?Xt.posMatrix:h.transform.calculatePosMatrix(ut.toUnwrapped(),X),De=al(we,ne||[0,0],Qt||1,Lt,w);L instanceof He?M.draw(S,P.TRIANGLES,tt,Ur.disabled,N,zr.disabled,De,ie,w.id,L.boundsBuffer,h.quadTriangleIndexBuffer,L.boundsSegments):M.draw(S,P.TRIANGLES,tt,H[ut.overscaledZ],N,zr.disabled,De,ie,w.id,h.rasterBoundsBuffer,h.quadTriangleIndexBuffer,h.rasterBoundsSegments)}})(e,c,g,a);break;case"background":(function(h,m,w,B){const S=w.paint.get("background-color"),P=w.paint.get("background-opacity");if(P===0)return;const L=h.context,M=L.gl,N=h.transform,H=N.tileSize,Z=w.paint.get("background-pattern");if(h.isPatternMissing(Z))return;const G=!Z&&S.a===1&&P===1&&h.opaquePassEnabledForLayer()?"opaque":"translucent";if(h.renderPass!==G)return;const X=Ur.disabled,ut=h.depthModeForSublayer(0,G==="opaque"?Ar.ReadWrite:Ar.ReadOnly),tt=h.colorModeForRenderPass(),it=h.useProgram(Z?"backgroundPattern":"background"),st=B||N.coveringTiles({tileSize:H,terrain:h.style.map.terrain});Z&&(L.activeTexture.set(M.TEXTURE0),h.imageManager.bind(h.context));const yt=w.getCrossfadeParameters();for(const Lt of st){const Qt=B?Lt.posMatrix:h.transform.calculatePosMatrix(Lt.toUnwrapped()),ne=Z?no(Qt,P,h,Z,{tileID:Lt,tileSize:H},yt):io(Qt,P,S),ee=h.style.map.terrain&&h.style.map.terrain.getTerrainData(Lt);it.draw(L,M.TRIANGLES,ut,X,tt,zr.disabled,ne,ee,w.id,h.tileExtentBuffer,h.quadTriangleIndexBuffer,h.tileExtentSegments)}})(e,0,g,a);break;case"custom":(function(h,m,w){const B=h.context,S=w.implementation;if(h.renderPass==="offscreen"){const P=S.prerender;P&&(h.setCustomLayerDefaults(),B.setColorMode(h.colorModeForRenderPass()),P.call(S,B.gl,h.transform.customLayerMatrix()),B.setDirty(),h.setBaseState())}else if(h.renderPass==="translucent"){h.setCustomLayerDefaults(),B.setColorMode(h.colorModeForRenderPass()),B.setStencilMode(Ur.disabled);const P=S.renderingMode==="3d"?new Ar(h.context.gl.LEQUAL,Ar.ReadWrite,h.depthRangeFor3D):h.depthModeForSublayer(0,Ar.ReadOnly);B.setDepthMode(P),S.render(B.gl,h.transform.customLayerMatrix(),{farZ:h.transform.farZ,nearZ:h.transform.nearZ,fov:h.transform._fov,modelViewProjectionMatrix:h.transform.modelViewProjectionMatrix,projectionMatrix:h.transform.projectionMatrix}),B.setDirty(),h.setBaseState(),B.bindFramebuffer.set(null)}})(e,0,g)}}translatePosMatrix(e,c,g,a,h){if(!g[0]&&!g[1])return e;const m=h?a==="map"?this.transform.angle:0:a==="viewport"?-this.transform.angle:0;if(m){const S=Math.sin(m),P=Math.cos(m);g=[g[0]*P-g[1]*S,g[0]*S+g[1]*P]}const w=[h?g[0]:tr(c,g[0],this.transform.zoom),h?g[1]:tr(c,g[1],this.transform.zoom),0],B=new Float32Array(16);return A.J(B,e,w),B}saveTileTexture(e){const c=this._tileTextures[e.size[0]];c?c.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const c=this._tileTextures[e];return c&&c.length>0?c.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const c=this.imageManager.getPattern(e.from.toString()),g=this.imageManager.getPattern(e.to.toString());return!c||!g}useProgram(e,c){this.cache=this.cache||{};const g=e+(c?c.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[g]||(this.cache[g]=new Ta(this.context,fs[e],c,pA[e],this._showOverdrawInspector,this.style.map.terrain)),this.cache[g]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new at(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:e,drawingBufferHeight:c}=this.context.gl;return this.width!==e||this.height!==c}}class Rs{constructor(e,c){this.points=e,this.planes=c}static fromInvProjectionMatrix(e,c,g){const a=Math.pow(2,g),h=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(w=>{const B=1/(w=A.af([],w,e))[3]/c*a;return A.b0(w,w,[B,B,1/w[3],B])}),m=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(w=>{const B=function(M,N){var H=N[0],Z=N[1],G=N[2],X=H*H+Z*Z+G*G;return X>0&&(X=1/Math.sqrt(X)),M[0]=N[0]*X,M[1]=N[1]*X,M[2]=N[2]*X,M}([],function(M,N,H){var Z=N[0],G=N[1],X=N[2],ut=H[0],tt=H[1],it=H[2];return M[0]=G*it-X*tt,M[1]=X*ut-Z*it,M[2]=Z*tt-G*ut,M}([],xt([],h[w[0]],h[w[1]]),xt([],h[w[2]],h[w[1]]))),S=-((P=B)[0]*(L=h[w[1]])[0]+P[1]*L[1]+P[2]*L[2]);var P,L;return B.concat(S)});return new Rs(h,m)}}class Fo{constructor(e,c){this.min=e,this.max=c,this.center=function(g,a,h){return g[0]=.5*a[0],g[1]=.5*a[1],g[2]=.5*a[2],g}([],function(g,a,h){return g[0]=a[0]+h[0],g[1]=a[1]+h[1],g[2]=a[2]+h[2],g}([],this.min,this.max))}quadrant(e){const c=[e%2==0,e<2],g=Et(this.min),a=Et(this.max);for(let h=0;h<c.length;h++)g[h]=c[h]?this.min[h]:this.center[h],a[h]=c[h]?this.center[h]:this.max[h];return a[2]=this.max[2],new Fo(g,a)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersects(e){const c=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let g=!0;for(let a=0;a<e.planes.length;a++){const h=e.planes[a];let m=0;for(let w=0;w<c.length;w++)A.b1(h,c[w])>=0&&m++;if(m===0)return 0;m!==c.length&&(g=!1)}if(g)return 2;for(let a=0;a<3;a++){let h=Number.MAX_VALUE,m=-Number.MAX_VALUE;for(let w=0;w<e.points.length;w++){const B=e.points[w][a]-this.min[a];h=Math.min(h,B),m=Math.max(m,B)}if(m<0||h>this.max[a]-this.min[a])return 0}return 1}}class Ln{constructor(e=0,c=0,g=0,a=0){if(isNaN(e)||e<0||isNaN(c)||c<0||isNaN(g)||g<0||isNaN(a)||a<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=c,this.left=g,this.right=a}interpolate(e,c,g){return c.top!=null&&e.top!=null&&(this.top=A.y.number(e.top,c.top,g)),c.bottom!=null&&e.bottom!=null&&(this.bottom=A.y.number(e.bottom,c.bottom,g)),c.left!=null&&e.left!=null&&(this.left=A.y.number(e.left,c.left,g)),c.right!=null&&e.right!=null&&(this.right=A.y.number(e.right,c.right,g)),this}getCenter(e,c){const g=A.ac((this.left+e-this.right)/2,0,e),a=A.ac((this.top+c-this.bottom)/2,0,c);return new A.P(g,a)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new Ln(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Ra=85.051129;class So{constructor(e,c,g,a,h){this.tileSize=512,this._renderWorldCopies=h===void 0||!!h,this._minZoom=e||0,this._maxZoom=c||22,this._minPitch=g??0,this._maxPitch=a??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new A.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ln,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const e=new So(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e.apply(this),e}apply(e){this.tileSize=e.tileSize,this.latRange=e.latRange,this.width=e.width,this.height=e.height,this._center=e._center,this._elevation=e._elevation,this.minElevationForCurrentTile=e.minElevationForCurrentTile,this.zoom=e.zoom,this.angle=e.angle,this._fov=e._fov,this._pitch=e._pitch,this._unmodified=e._unmodified,this._edgeInsets=e._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(e){e===void 0?e=!0:e===null&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new A.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(e){const c=-A.b2(e,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=function(){var g=new A.A(4);return A.A!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g}(),function(g,a,h){var m=a[0],w=a[1],B=a[2],S=a[3],P=Math.sin(h),L=Math.cos(h);g[0]=m*L+B*P,g[1]=w*L+S*P,g[2]=m*-P+B*L,g[3]=w*-P+S*L}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const c=A.ac(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(e){const c=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.tileZoom=Math.max(0,Math.floor(c)),this.scale=this.zoomScale(c),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(e){e!==this._elevation&&(this._elevation=e,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,c,g){this._unmodified=!1,this._edgeInsets.interpolate(e,c,g),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const c=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(e){const c=[new A.b3(0,e)];if(this._renderWorldCopies){const g=this.pointCoordinate(new A.P(0,0)),a=this.pointCoordinate(new A.P(this.width,0)),h=this.pointCoordinate(new A.P(this.width,this.height)),m=this.pointCoordinate(new A.P(0,this.height)),w=Math.floor(Math.min(g.x,a.x,h.x,m.x)),B=Math.floor(Math.max(g.x,a.x,h.x,m.x)),S=1;for(let P=w-S;P<=B+S;P++)P!==0&&c.push(new A.b3(P,e))}return c}coveringTiles(e){var c,g;let a=this.coveringZoomLevel(e);const h=a;if(e.minzoom!==void 0&&a<e.minzoom)return[];e.maxzoom!==void 0&&a>e.maxzoom&&(a=e.maxzoom);const m=this.pointCoordinate(this.getCameraPoint()),w=A.Z.fromLngLat(this.center),B=Math.pow(2,a),S=[B*m.x,B*m.y,0],P=[B*w.x,B*w.y,0],L=Rs.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,a);let M=e.minzoom||0;!e.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(M=a);const N=e.terrain?2/Math.min(this.tileSize,e.tileSize)*this.tileSize:3,H=tt=>({aabb:new Fo([tt*B,0,0],[(tt+1)*B,B,0]),zoom:0,x:0,y:0,wrap:tt,fullyVisible:!1}),Z=[],G=[],X=a,ut=e.reparseOverscaled?h:a;if(this._renderWorldCopies)for(let tt=1;tt<=3;tt++)Z.push(H(-tt)),Z.push(H(tt));for(Z.push(H(0));Z.length>0;){const tt=Z.pop(),it=tt.x,st=tt.y;let yt=tt.fullyVisible;if(!yt){const ie=tt.aabb.intersects(L);if(ie===0)continue;yt=ie===2}const Lt=e.terrain?S:P,Qt=tt.aabb.distanceX(Lt),ne=tt.aabb.distanceY(Lt),ee=Math.max(Math.abs(Qt),Math.abs(ne));if(tt.zoom===X||ee>N+(1<<X-tt.zoom)-2&&tt.zoom>=M){const ie=X-tt.zoom,Xt=S[0]-.5-(it<<ie),we=S[1]-.5-(st<<ie);G.push({tileID:new A.S(tt.zoom===X?ut:tt.zoom,tt.wrap,tt.zoom,it,st),distanceSq:ft([P[0]-.5-it,P[1]-.5-st]),tileDistanceToCamera:Math.sqrt(Xt*Xt+we*we)})}else for(let ie=0;ie<4;ie++){const Xt=(it<<1)+ie%2,we=(st<<1)+(ie>>1),De=tt.zoom+1;let de=tt.aabb.quadrant(ie);if(e.terrain){const fe=new A.S(De,tt.wrap,De,Xt,we),Ne=e.terrain.getMinMaxElevation(fe),pr=(c=Ne.minElevation)!==null&&c!==void 0?c:this.elevation,Ue=(g=Ne.maxElevation)!==null&&g!==void 0?g:this.elevation;de=new Fo([de.min[0],de.min[1],pr],[de.max[0],de.max[1],Ue])}Z.push({aabb:de,zoom:De,x:Xt,y:we,wrap:tt.wrap,fullyVisible:yt})}}return G.sort((tt,it)=>tt.distanceSq-it.distanceSq).map(tt=>tt.tileID)}resize(e,c){this.width=e,this.height=c,this.pixelsToGLUnits=[2/e,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(e){const c=A.ac(e.lat,-85.051129,Ra);return new A.P(A.O(e.lng)*this.worldSize,A.Q(c)*this.worldSize)}unproject(e){return new A.Z(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(e){const c=this.elevation,g=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,a=this.pointLocation(this.centerPoint,e),h=e.getElevationForLngLatZoom(a,this.tileZoom);if(!(this.elevation-h))return;const m=g+c-h,w=Math.cos(this._pitch)*this.cameraToCenterDistance/m/A.b4(1,a.lat),B=this.scaleZoom(w/this.tileSize);this._elevation=h,this._center=a,this.zoom=B}setLocationAtPoint(e,c){const g=this.pointCoordinate(c),a=this.pointCoordinate(this.centerPoint),h=this.locationCoordinate(e),m=new A.Z(h.x-(g.x-a.x),h.y-(g.y-a.y));this.center=this.coordinateLocation(m),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(e,c){return c?this.coordinatePoint(this.locationCoordinate(e),c.getElevationForLngLatZoom(e,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(e))}pointLocation(e,c){return this.coordinateLocation(this.pointCoordinate(e,c))}locationCoordinate(e){return A.Z.fromLngLat(e)}coordinateLocation(e){return e&&e.toLngLat()}pointCoordinate(e,c){if(c){const M=c.pointCoordinate(e);if(M!=null)return M}const g=[e.x,e.y,0,1],a=[e.x,e.y,1,1];A.af(g,g,this.pixelMatrixInverse),A.af(a,a,this.pixelMatrixInverse);const h=g[3],m=a[3],w=g[1]/h,B=a[1]/m,S=g[2]/h,P=a[2]/m,L=S===P?0:(0-S)/(P-S);return new A.Z(A.y.number(g[0]/h,a[0]/m,L)/this.worldSize,A.y.number(w,B,L)/this.worldSize)}coordinatePoint(e,c=0,g=this.pixelMatrix){const a=[e.x*this.worldSize,e.y*this.worldSize,c,1];return A.af(a,a,g),new A.P(a[0]/a[3],a[1]/a[3])}getBounds(){const e=Math.max(0,this.height/2-this.getHorizon());return new nt().extend(this.pointLocation(new A.P(0,e))).extend(this.pointLocation(new A.P(this.width,e))).extend(this.pointLocation(new A.P(this.width,this.height))).extend(this.pointLocation(new A.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new nt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Ra])}calculateTileMatrix(e){const c=e.canonical,g=this.worldSize/this.zoomScale(c.z),a=c.x+Math.pow(2,c.z)*e.wrap,h=A.an(new Float64Array(16));return A.J(h,h,[a*g,c.y*g,0]),A.K(h,h,[g/A.X,g/A.X,1]),h}calculatePosMatrix(e,c=!1){const g=e.key,a=c?this._alignedPosMatrixCache:this._posMatrixCache;if(a[g])return a[g];const h=this.calculateTileMatrix(e);return A.L(h,c?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,h),a[g]=new Float32Array(h),a[g]}calculateFogMatrix(e){const c=e.key,g=this._fogMatrixCache;if(g[c])return g[c];const a=this.calculateTileMatrix(e);return A.L(a,this.fogMatrix,a),g[c]=new Float32Array(a),g[c]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(e,c){c=A.ac(+c,this.minZoom,this.maxZoom);const g={center:new A.N(e.lng,e.lat),zoom:c};let a=this.lngRange;if(!this._renderWorldCopies&&a===null){const tt=179.9999999999;a=[-tt,tt]}const h=this.tileSize*this.zoomScale(g.zoom);let m=0,w=h,B=0,S=h,P=0,L=0;const{x:M,y:N}=this.size;if(this.latRange){const tt=this.latRange;m=A.Q(tt[1])*h,w=A.Q(tt[0])*h,w-m<N&&(P=N/(w-m))}a&&(B=A.b2(A.O(a[0])*h,0,h),S=A.b2(A.O(a[1])*h,0,h),S<B&&(S+=h),S-B<M&&(L=M/(S-B)));const{x:H,y:Z}=this.project.call({worldSize:h},e);let G,X;const ut=Math.max(L||0,P||0);if(ut){const tt=new A.P(L?(S+B)/2:H,P?(w+m)/2:Z);return g.center=this.unproject.call({worldSize:h},tt).wrap(),g.zoom+=this.scaleZoom(ut),g}if(this.latRange){const tt=N/2;Z-tt<m&&(X=m+tt),Z+tt>w&&(X=w-tt)}if(a){const tt=(B+S)/2;let it=H;this._renderWorldCopies&&(it=A.b2(H,tt-h/2,tt+h/2));const st=M/2;it-st<B&&(G=B+st),it+st>S&&(G=S-st)}if(G!==void 0||X!==void 0){const tt=new A.P(G??H,X??Z);g.center=this.unproject.call({worldSize:h},tt).wrap()}return g}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const e=this._unmodified,{center:c,zoom:g}=this.getConstrained(this.center,this.zoom);this.center=c,this.zoom=g,this._unmodified=e,this._constraining=!1}_calcMatrices(){if(!this.height)return;const e=this.centerOffset,c=this.point.x,g=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=A.b4(1,this.center.lat)*this.worldSize;let a=A.an(new Float64Array(16));A.K(a,a,[this.width/2,-this.height/2,1]),A.J(a,a,[1,-1,0]),this.labelPlaneMatrix=a,a=A.an(new Float64Array(16)),A.K(a,a,[1,-1,1]),A.J(a,a,[-1,-1,0]),A.K(a,a,[2/this.width,2/this.height,1]),this.glCoordMatrix=a;const h=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),m=Math.min(this.elevation,this.minElevationForCurrentTile),w=h-m*this._pixelPerMeter/Math.cos(this._pitch),B=m<0?w:h,S=Math.PI/2+this._pitch,P=this._fov*(.5+e.y/this.height),L=Math.sin(P)*B/Math.sin(A.ac(Math.PI-S-P,.01,Math.PI-.01)),M=this.getHorizon(),N=2*Math.atan(M/this.cameraToCenterDistance)*(.5+e.y/(2*M)),H=Math.sin(N)*B/Math.sin(A.ac(Math.PI-S-N,.01,Math.PI-.01)),Z=Math.min(L,H);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*Z+B),this.nearZ=this.height/50,a=new Float64Array(16),A.b5(a,this._fov,this.width/this.height,this.nearZ,this.farZ),a[8]=2*-e.x/this.width,a[9]=2*e.y/this.height,this.projectionMatrix=A.ae(a),A.K(a,a,[1,-1,1]),A.J(a,a,[0,0,-this.cameraToCenterDistance]),A.b6(a,a,this._pitch),A.ad(a,a,this.angle),A.J(a,a,[-c,-g,0]),this.mercatorMatrix=A.K([],a,[this.worldSize,this.worldSize,this.worldSize]),A.K(a,a,[1,1,this._pixelPerMeter]),this.pixelMatrix=A.L(new Float64Array(16),this.labelPlaneMatrix,a),A.J(a,a,[0,0,-this.elevation]),this.modelViewProjectionMatrix=a,this.invModelViewProjectionMatrix=A.as([],a),this.fogMatrix=new Float64Array(16),A.b5(this.fogMatrix,this._fov,this.width/this.height,h,this.farZ),this.fogMatrix[8]=2*-e.x/this.width,this.fogMatrix[9]=2*e.y/this.height,A.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),A.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),A.b6(this.fogMatrix,this.fogMatrix,this._pitch),A.ad(this.fogMatrix,this.fogMatrix,this.angle),A.J(this.fogMatrix,this.fogMatrix,[-c,-g,0]),A.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),A.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=A.L(new Float64Array(16),this.labelPlaneMatrix,a);const G=this.width%2/2,X=this.height%2/2,ut=Math.cos(this.angle),tt=Math.sin(this.angle),it=c-Math.round(c)+ut*G+tt*X,st=g-Math.round(g)+ut*X+tt*G,yt=new Float64Array(a);if(A.J(yt,yt,[it>.5?it-1:it,st>.5?st-1:st,0]),this.alignedModelViewProjectionMatrix=yt,a=A.as(new Float64Array(16),this.pixelMatrix),!a)throw new Error("failed to invert matrix");this.pixelMatrixInverse=a,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const e=this.pointCoordinate(new A.P(0,0)),c=[e.x*this.worldSize,e.y*this.worldSize,0,1];return A.af(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new A.P(0,e))}getCameraQueryGeometry(e){const c=this.getCameraPoint();if(e.length===1)return[e[0],c];{let g=c.x,a=c.y,h=c.x,m=c.y;for(const w of e)g=Math.min(g,w.x),a=Math.min(a,w.y),h=Math.max(h,w.x),m=Math.max(m,w.y);return[new A.P(g,a),new A.P(h,a),new A.P(h,m),new A.P(g,m),new A.P(g,a)]}}lngLatToCameraDepth(e,c){const g=this.locationCoordinate(e),a=[g.x*this.worldSize,g.y*this.worldSize,c,1];return A.af(a,a,this.modelViewProjectionMatrix),a[2]/a[3]}}function vs(_,e){let c,g=!1,a=null,h=null;const m=()=>{a=null,g&&(_.apply(h,c),a=setTimeout(m,e),g=!1)};return(...w)=>(g=!0,h=this,c=w,a||m(),a)}class Qn{constructor(e){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let g;return c.split("&").map(a=>a.split("=")).forEach(a=>{a[0]===this._hashName&&(g=a)}),(g&&g[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(c.length>=3&&!c.some(g=>isNaN(g))){const g=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:g,pitch:+(c[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.+)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{const c=this._getCurrentHash();if(c.length===0)return;const g=c.join("/");let a=g;a.split("&").length>0&&(a=a.split("&")[0]),this._hashName&&(a=`${this._hashName}=${g}`);let h=window.location.hash.replace(a,"");h.startsWith("#&")?h=h.slice(0,1)+h.slice(2):h==="#"&&(h="");let m=window.location.href.replace(/(#.+)?$/,h);m=m.replace("&&","&"),window.history.replaceState(window.history.state,null,m)},this._updateHash=vs(this._updateHashUnthrottled,300),this._hashName=e&&encodeURIComponent(e)}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(e){const c=this._map.getCenter(),g=Math.round(100*this._map.getZoom())/100,a=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),h=Math.pow(10,a),m=Math.round(c.lng*h)/h,w=Math.round(c.lat*h)/h,B=this._map.getBearing(),S=this._map.getPitch();let P="";if(P+=e?`/${m}/${w}/${g}`:`${g}/${w}/${m}`,(B||S)&&(P+="/"+Math.round(10*B)/10),S&&(P+=`/${Math.round(S)}`),this._hashName){const L=this._hashName;let M=!1;const N=window.location.hash.slice(1).split("&").map(H=>{const Z=H.split("=")[0];return Z===L?(M=!0,`${Z}=${P}`):H}).filter(H=>H);return M||N.push(`${L}=${P}`),`#${N.join("&")}`}return`#${P}`}}const zn={linearity:.3,easing:A.b7(0,0,.3,1)},Io=A.e({deceleration:2500,maxSpeed:1400},zn),za=A.e({deceleration:20,maxSpeed:1400},zn),lo=A.e({deceleration:1e3,maxSpeed:360},zn),zs=A.e({deceleration:1e3,maxSpeed:90},zn);class Ha{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:E.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,c=E.now();for(;e.length>0&&c-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new A.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:h}of this._inertiaBuffer)c.zoom+=h.zoomDelta||0,c.bearing+=h.bearingDelta||0,c.pitch+=h.pitchDelta||0,h.panDelta&&c.pan._add(h.panDelta),h.around&&(c.around=h.around),h.pinchAround&&(c.pinchAround=h.pinchAround);const g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,a={};if(c.pan.mag()){const h=Hn(c.pan.mag(),g,A.e({},Io,e||{}));a.offset=c.pan.mult(h.amount/c.pan.mag()),a.center=this._map.transform.center,kn(a,h)}if(c.zoom){const h=Hn(c.zoom,g,za);a.zoom=this._map.transform.zoom+h.amount,kn(a,h)}if(c.bearing){const h=Hn(c.bearing,g,lo);a.bearing=this._map.transform.bearing+A.ac(h.amount,-179,179),kn(a,h)}if(c.pitch){const h=Hn(c.pitch,g,zs);a.pitch=this._map.transform.pitch+h.amount,kn(a,h)}if(a.zoom||a.bearing){const h=c.pinchAround===void 0?c.around:c.pinchAround;a.around=h?this._map.unproject(h):this._map.getCenter()}return this.clear(),A.e(a,{noMoveStart:!0})}}function kn(_,e){(!_.duration||_.duration<e.duration)&&(_.duration=e.duration,_.easing=e.easing)}function Hn(_,e,c){const{maxSpeed:g,linearity:a,deceleration:h}=c,m=A.ac(_*a/(e/1e3),-g,g),w=Math.abs(m)/(h*a);return{easing:c.easing,duration:1e3*w,amount:m*(w/2)}}class Or extends A.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,c,g,a={}){const h=Q.mousePos(c.getCanvas(),g),m=c.unproject(h);super(e,A.e({point:h,lngLat:m,originalEvent:g},a)),this._defaultPrevented=!1,this.target=c}}class ei extends A.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,c,g){const a=e==="touchend"?g.changedTouches:g.touches,h=Q.touchPos(c.getCanvasContainer(),a),m=h.map(B=>c.unproject(B)),w=h.reduce((B,S,P,L)=>B.add(S.div(L.length)),new A.P(0,0));super(e,{points:h,point:w,lngLats:m,lngLat:c.unproject(w),originalEvent:g}),this._defaultPrevented=!1}}class vi extends A.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,c,g){super(e,{originalEvent:g}),this._defaultPrevented=!1}}class Mi{constructor(e,c){this._map=e,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new vi(e.type,this._map,e))}mousedown(e,c){return this._mousedownPos=c,this._firePreventable(new Or(e.type,this._map,e))}mouseup(e){this._map.fire(new Or(e.type,this._map,e))}click(e,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new Or(e.type,this._map,e))}dblclick(e){return this._firePreventable(new Or(e.type,this._map,e))}mouseover(e){this._map.fire(new Or(e.type,this._map,e))}mouseout(e){this._map.fire(new Or(e.type,this._map,e))}touchstart(e){return this._firePreventable(new ei(e.type,this._map,e))}touchmove(e){this._map.fire(new ei(e.type,this._map,e))}touchend(e){this._map.fire(new ei(e.type,this._map,e))}touchcancel(e){this._map.fire(new ei(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class co{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new Or(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Or("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new Or(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class es{constructor(e){this._map=e}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(e){return this.transform.pointLocation(A.P.convert(e),this._map.terrain)}}class uo{constructor(e,c){this._map=e,this._tr=new es(e),this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,c){this.isEnabled()&&e.shiftKey&&e.button===0&&(Q.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(e,c){if(!this._active)return;const g=c;if(this._lastPos.equals(g)||!this._box&&g.dist(this._startPos)<this._clickTolerance)return;const a=this._startPos;this._lastPos=g,this._box||(this._box=Q.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",e));const h=Math.min(a.x,g.x),m=Math.max(a.x,g.x),w=Math.min(a.y,g.y),B=Math.max(a.y,g.y);Q.setTransform(this._box,`translate(${h}px,${w}px)`),this._box.style.width=m-h+"px",this._box.style.height=B-w+"px"}mouseupWindow(e,c){if(!this._active||e.button!==0)return;const g=this._startPos,a=c;if(this.reset(),Q.suppressClick(),g.x!==a.x||g.y!==a.y)return this._map.fire(new A.k("boxzoomend",{originalEvent:e})),{cameraAnimation:h=>h.fitScreenCoordinates(g,a,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(e){this._active&&e.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(Q.remove(this._box),this._box=null),Q.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,c){return this._map.fire(new A.k(e,{originalEvent:c}))}}function ia(_,e){if(_.length!==e.length)throw new Error(`The number of touches and points are not equal - touches ${_.length}, points ${e.length}`);const c={};for(let g=0;g<_.length;g++)c[_[g].identifier]=e[g];return c}class Ou{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,c,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=e.timeStamp),g.length===this.numTouches&&(this.centroid=function(a){const h=new A.P(0,0);for(const m of a)h._add(m);return h.div(a.length)}(c),this.touches=ia(g,c)))}touchmove(e,c,g){if(this.aborted||!this.centroid)return;const a=ia(g,c);for(const h in this.touches){const m=a[h];(!m||m.dist(this.touches[h])>30)&&(this.aborted=!0)}}touchend(e,c,g){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){const a=!this.aborted&&this.centroid;if(this.reset(),a)return a}}}class fl{constructor(e){this.singleTap=new Ou(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,c,g){this.singleTap.touchstart(e,c,g)}touchmove(e,c,g){this.singleTap.touchmove(e,c,g)}touchend(e,c,g){const a=this.singleTap.touchend(e,c,g);if(a){const h=e.timeStamp-this.lastTime<500,m=!this.lastTap||this.lastTap.dist(a)<30;if(h&&m||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=a,this.count===this.numTaps)return this.reset(),a}}}class Ti{constructor(e){this._tr=new es(e),this._zoomIn=new fl({numTouches:1,numTaps:2}),this._zoomOut=new fl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,c,g){this._zoomIn.touchstart(e,c,g),this._zoomOut.touchstart(e,c,g)}touchmove(e,c,g){this._zoomIn.touchmove(e,c,g),this._zoomOut.touchmove(e,c,g)}touchend(e,c,g){const a=this._zoomIn.touchend(e,c,g),h=this._zoomOut.touchend(e,c,g),m=this._tr;return a?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:w=>w.easeTo({duration:300,zoom:m.zoom+1,around:m.unproject(a)},{originalEvent:e})}):h?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:w=>w.easeTo({duration:300,zoom:m.zoom-1,around:m.unproject(h)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ws{constructor(e){this._enabled=!!e.enable,this._moveStateManager=e.moveStateManager,this._clickTolerance=e.clickTolerance||1,this._moveFunction=e.move,this._activateOnStart=!!e.activateOnStart,e.assignEvents(this),this.reset()}reset(e){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(e)}_move(...e){const c=this._moveFunction(...e);if(c.bearingDelta||c.pitchDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(e,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(e)&&(this._moveStateManager.startMove(e),this._lastPoint=c.length?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(e,c){if(!this.isEnabled())return;const g=this._lastPoint;if(!g)return;if(e.preventDefault(),!this._moveStateManager.isValidMoveEvent(e))return void this.reset(e);const a=c.length?c[0]:c;return!this._moved&&a.dist(g)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=a,this._move(g,a))}dragEnd(e){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(e)&&(this._moved&&Q.suppressClick(),this.reset(e))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const rs={0:1,2:2};class xA{constructor(e){this._correctEvent=e.checkCorrectEvent}startMove(e){const c=Q.mouseButton(e);this._eventButton=c}endMove(e){delete this._eventButton}isValidStartEvent(e){return this._correctEvent(e)}isValidMoveEvent(e){return!function(c,g){const a=rs[g];return c.buttons===void 0||(c.buttons&a)!==a}(e,this._eventButton)}isValidEndEvent(e){return Q.mouseButton(e)===this._eventButton}}class BA{constructor(){this._firstTouch=void 0}_isOneFingerTouch(e){return e.targetTouches.length===1}_isSameTouchEvent(e){return e.targetTouches[0].identifier===this._firstTouch}startMove(e){this._firstTouch=e.targetTouches[0].identifier}endMove(e){delete this._firstTouch}isValidStartEvent(e){return this._isOneFingerTouch(e)}isValidMoveEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}isValidEndEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}}const Va=_=>{_.mousedown=_.dragStart,_.mousemoveWindow=_.dragMove,_.mouseup=_.dragEnd,_.contextmenu=e=>{e.preventDefault()}},Vi=({enable:_,clickTolerance:e,bearingDegreesPerPixelMoved:c=.8})=>{const g=new xA({checkCorrectEvent:a=>Q.mouseButton(a)===0&&a.ctrlKey||Q.mouseButton(a)===2});return new ws({clickTolerance:e,move:(a,h)=>({bearingDelta:(h.x-a.x)*c}),moveStateManager:g,enable:_,assignEvents:Va})},dn=({enable:_,clickTolerance:e,pitchDegreesPerPixelMoved:c=-.5})=>{const g=new xA({checkCorrectEvent:a=>Q.mouseButton(a)===0&&a.ctrlKey||Q.mouseButton(a)===2});return new ws({clickTolerance:e,move:(a,h)=>({pitchDelta:(h.y-a.y)*c}),moveStateManager:g,enable:_,assignEvents:Va})};class CA{constructor(e,c){this._clickTolerance=e.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new A.P(0,0)}_shouldBePrevented(e){return e<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(e,c,g){return this._calculateTransform(e,c,g)}touchmove(e,c,g){if(this._active){if(!this._shouldBePrevented(g.length))return e.preventDefault(),this._calculateTransform(e,c,g);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",e)}}touchend(e,c,g){this._calculateTransform(e,c,g),this._active&&this._shouldBePrevented(g.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,c,g){g.length>0&&(this._active=!0);const a=ia(g,c),h=new A.P(0,0),m=new A.P(0,0);let w=0;for(const S in a){const P=a[S],L=this._touches[S];L&&(h._add(P),m._add(P.sub(L)),w++,a[S]=P)}if(this._touches=a,this._shouldBePrevented(w)||!m.mag())return;const B=m.div(w);return this._sum._add(B),this._sum.mag()<this._clickTolerance?void 0:{around:h.div(w),panDelta:B}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ja{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(e,c,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([c[0],c[1]]))}touchmove(e,c,g){if(!this._firstTwoTouches)return;e.preventDefault();const[a,h]=this._firstTwoTouches,m=FA(g,c,a),w=FA(g,c,h);if(!m||!w)return;const B=this._aroundCenter?null:m.add(w).div(2);return this._move([m,w],B,e)}touchend(e,c,g){if(!this._firstTwoTouches)return;const[a,h]=this._firstTwoTouches,m=FA(g,c,a),w=FA(g,c,h);m&&w||(this._active&&Q.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&e.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function FA(_,e,c){for(let g=0;g<_.length;g++)if(_[g].identifier===c)return e[g]}function SA(_,e){return Math.log(_/e)/Math.LN2}class IA extends ja{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,c){const g=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(SA(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:SA(this._distance,g),pinchAround:c}}}function gl(_,e){return 180*_.angleWith(e)/Math.PI}class Eo extends ja{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,c,g){const a=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:gl(this._vector,a),pinchAround:c}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const c=25/(Math.PI*this._minDiameter)*360,g=gl(e,this._startVector);return Math.abs(g)<c}}function EA(_){return Math.abs(_.y)>Math.abs(_.x)}class ml extends ja{constructor(e){super(),this._currentTouchCount=0,this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,c,g){super.touchstart(e,c,g),this._currentTouchCount=g.length}_start(e){this._lastPoints=e,EA(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,c,g){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const a=e[0].sub(this._lastPoints[0]),h=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(a,h,g.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(a.y+h.y)/2*-.5}):void 0}gestureBeginsVertically(e,c,g){if(this._valid!==void 0)return this._valid;const a=e.mag()>=2,h=c.mag()>=2;if(!a&&!h)return;if(!a||!h)return this._firstMove===void 0&&(this._firstMove=g),g-this._firstMove<100&&void 0;const m=e.y>0==c.y>0;return EA(e)&&EA(c)&&m}}const yl={panStep:100,bearingStep:15,pitchStep:10};class vl{constructor(e){this._tr=new es(e);const c=yl;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let c=0,g=0,a=0,h=0,m=0;switch(e.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:e.shiftKey?g=-1:(e.preventDefault(),h=-1);break;case 39:e.shiftKey?g=1:(e.preventDefault(),h=1);break;case 38:e.shiftKey?a=1:(e.preventDefault(),m=-1);break;case 40:e.shiftKey?a=-1:(e.preventDefault(),m=1);break;default:return}return this._rotationDisabled&&(g=0,a=0),{cameraAnimation:w=>{const B=this._tr;w.easeTo({duration:300,easeId:"keyboardHandler",easing:Ru,zoom:c?Math.round(B.zoom)+c*(e.shiftKey?2:1):B.zoom,bearing:B.bearing+g*this._bearingStep,pitch:B.pitch+a*this._pitchStep,offset:[-h*this._panStep,-m*this._panStep],center:B.center},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Ru(_){return _*(2-_)}const Mc=4.000244140625;class Jl{constructor(e,c){this._onTimeout=g=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(g)},this._map=e,this._tr=new es(e),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&e.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(e){return!!this._map.cooperativeGestures.isEnabled()&&!(e.ctrlKey||this._map.cooperativeGestures.isBypassed(e))}wheel(e){if(!this.isEnabled())return;if(this._shouldBePrevented(e))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",e);let c=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const g=E.now(),a=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,c!==0&&c%Mc==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":a>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(a*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),e.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=e,this._delta-=c,this._active||this._start(e)),e.preventDefault()}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=Q.mousePos(this._map.getCanvas(),e),g=this._tr;this._around=c.y>g.transform.height/2-g.transform.getHorizon()?A.N.convert(this._aroundCenter?g.center:g.unproject(c)):A.N.convert(g.center),this._aroundPoint=g.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const e=this._tr.transform;if(this._delta!==0){const B=this._type==="wheel"&&Math.abs(this._delta)>Mc?this._wheelZoomRate:this._defaultZoomRate;let S=2/(1+Math.exp(-Math.abs(this._delta*B)));this._delta<0&&S!==0&&(S=1/S);const P=typeof this._targetZoom=="number"?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(P*S))),this._type==="wheel"&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom=="number"?this._targetZoom:e.zoom,g=this._startZoom,a=this._easing;let h,m=!1;const w=E.now()-this._lastWheelEventTime;if(this._type==="wheel"&&g&&a&&w){const B=Math.min(w/200,1),S=a(B);h=A.y.number(g,c,S),B<1?this._frameId||(this._frameId=!0):m=!0}else h=c,m=!0;return this._active=!0,m&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!m,zoomDelta:h-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let c=A.b8;if(this._prevEase){const g=this._prevEase,a=(E.now()-g.start)/g.duration,h=g.easing(a+.01)-g.easing(a),m=.27/Math.sqrt(h*h+1e-4)*.01,w=Math.sqrt(.0729-m*m);c=A.b7(m,w,.25,1)}return this._prevEase={start:E.now(),duration:e,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class TA{constructor(e,c){this._clickZoom=e,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class zu{constructor(e){this._tr=new es(e),this.reset()}reset(){this._active=!1}dblclick(e,c){return e.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:this._tr.zoom+(e.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hs{constructor(){this._tap=new fl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(e,c,g){if(!this._swipePoint)if(this._tapTime){const a=c[0],h=e.timeStamp-this._tapTime<500,m=this._tapPoint.dist(a)<30;h&&m?g.length>0&&(this._swipePoint=a,this._swipeTouch=g[0].identifier):this.reset()}else this._tap.touchstart(e,c,g)}touchmove(e,c,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;const a=c[0],h=a.y-this._swipePoint.y;return this._swipePoint=a,e.preventDefault(),this._active=!0,{zoomDelta:h/128}}}else this._tap.touchmove(e,c,g)}touchend(e,c,g){if(this._tapTime)this._swipePoint&&g.length===0&&this.reset();else{const a=this._tap.touchend(e,c,g);a&&(this._tapTime=e.timeStamp,this._tapPoint=a)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vs{constructor(e,c,g){this._el=e,this._mousePan=c,this._touchPan=g}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Dc{constructor(e,c,g){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=c,this._mousePitch=g}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class is{constructor(e,c,g,a){this._el=e,this._touchZoom=c,this._touchRotate=g,this._tapDragZoom=a,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class To{constructor(e,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=e,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const e=this._map.getCanvasContainer();e.classList.add("maplibregl-cooperative-gestures"),this._container=Q.create("div","maplibregl-cooperative-gesture-screen",e);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const g=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),a=document.createElement("div");a.className="maplibregl-desktop-message",a.textContent=c,this._container.appendChild(a);const h=document.createElement("div");h.className="maplibregl-mobile-message",h.textContent=g,this._container.appendChild(h),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(Q.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(e){return e[this._bypassKey]}notifyGestureBlocked(e,c){this._enabled&&(this._map.fire(new A.k("cooperativegestureprevented",{gestureType:e,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const na=_=>_.zoom||_.drag||_.pitch||_.rotate;class dd extends A.k{}function Nc(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}class Hu{constructor(e,c){this.handleWindowEvent=a=>{this.handleEvent(a,`${a.type}Window`)},this.handleEvent=(a,h)=>{if(a.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const m=a.type==="renderFrame"?void 0:a,w={needsRenderFrame:!1},B={},S={},P=a.touches,L=P?this._getMapTouches(P):void 0,M=L?Q.touchPos(this._map.getCanvas(),L):Q.mousePos(this._map.getCanvas(),a);for(const{handlerName:Z,handler:G,allowed:X}of this._handlers){if(!G.isEnabled())continue;let ut;this._blockedByActive(S,X,Z)?G.reset():G[h||a.type]&&(ut=G[h||a.type](a,M,L),this.mergeHandlerResult(w,B,ut,Z,m),ut&&ut.needsRenderFrame&&this._triggerRenderFrame()),(ut||G.isActive())&&(S[Z]=G)}const N={};for(const Z in this._previousActiveHandlers)S[Z]||(N[Z]=m);this._previousActiveHandlers=S,(Object.keys(N).length||Nc(w))&&(this._changes.push([w,B,N]),this._triggerRenderFrame()),(Object.keys(S).length||Nc(w))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:H}=w;H&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],H(this._map))},this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ha(e),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[window,"blur",void 0]];for(const[a,h,m]of this._listeners)Q.addEventListener(a,h,a===document?this.handleWindowEvent:this.handleEvent,m)}destroy(){for(const[e,c,g]of this._listeners)Q.removeEventListener(e,c,e===document?this.handleWindowEvent:this.handleEvent,g)}_addDefaultHandlers(e){const c=this._map,g=c.getCanvasContainer();this._add("mapEvent",new Mi(c,e));const a=c.boxZoom=new uo(c,e);this._add("boxZoom",a),e.interactive&&e.boxZoom&&a.enable();const h=c.cooperativeGestures=new To(c,e.cooperativeGestures);this._add("cooperativeGestures",h),e.cooperativeGestures&&h.enable();const m=new Ti(c),w=new zu(c);c.doubleClickZoom=new TA(w,m),this._add("tapZoom",m),this._add("clickZoom",w),e.interactive&&e.doubleClickZoom&&c.doubleClickZoom.enable();const B=new Hs;this._add("tapDragZoom",B);const S=c.touchPitch=new ml(c);this._add("touchPitch",S),e.interactive&&e.touchPitch&&c.touchPitch.enable(e.touchPitch);const P=Vi(e),L=dn(e);c.dragRotate=new Dc(e,P,L),this._add("mouseRotate",P,["mousePitch"]),this._add("mousePitch",L,["mouseRotate"]),e.interactive&&e.dragRotate&&c.dragRotate.enable();const M=(({enable:ut,clickTolerance:tt})=>{const it=new xA({checkCorrectEvent:st=>Q.mouseButton(st)===0&&!st.ctrlKey});return new ws({clickTolerance:tt,move:(st,yt)=>({around:yt,panDelta:yt.sub(st)}),activateOnStart:!0,moveStateManager:it,enable:ut,assignEvents:Va})})(e),N=new CA(e,c);c.dragPan=new Vs(g,M,N),this._add("mousePan",M),this._add("touchPan",N,["touchZoom","touchRotate"]),e.interactive&&e.dragPan&&c.dragPan.enable(e.dragPan);const H=new Eo,Z=new IA;c.touchZoomRotate=new is(g,Z,H,B),this._add("touchRotate",H,["touchPan","touchZoom"]),this._add("touchZoom",Z,["touchPan","touchRotate"]),e.interactive&&e.touchZoomRotate&&c.touchZoomRotate.enable(e.touchZoomRotate);const G=c.scrollZoom=new Jl(c,()=>this._triggerRenderFrame());this._add("scrollZoom",G,["mousePan"]),e.interactive&&e.scrollZoom&&c.scrollZoom.enable(e.scrollZoom);const X=c.keyboard=new vl(c);this._add("keyboard",X),e.interactive&&e.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new co(c))}_add(e,c,g){this._handlers.push({handlerName:e,handler:c,allowed:g}),this._handlersById[e]=c}stop(e){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!na(this._eventsInProgress)||this.isZooming()}_blockedByActive(e,c,g){for(const a in e)if(a!==g&&(!c||c.indexOf(a)<0))return!0;return!1}_getMapTouches(e){const c=[];for(const g of e)this._el.contains(g.target)&&c.push(g);return c}mergeHandlerResult(e,c,g,a,h){if(!g)return;A.e(e,g);const m={handlerName:a,originalEvent:g.originalEvent||h};g.zoomDelta!==void 0&&(c.zoom=m),g.panDelta!==void 0&&(c.drag=m),g.pitchDelta!==void 0&&(c.pitch=m),g.bearingDelta!==void 0&&(c.rotate=m)}_applyChanges(){const e={},c={},g={};for(const[a,h,m]of this._changes)a.panDelta&&(e.panDelta=(e.panDelta||new A.P(0,0))._add(a.panDelta)),a.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+a.zoomDelta),a.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+a.bearingDelta),a.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+a.pitchDelta),a.around!==void 0&&(e.around=a.around),a.pinchAround!==void 0&&(e.pinchAround=a.pinchAround),a.noInertia&&(e.noInertia=a.noInertia),A.e(c,h),A.e(g,m);this._updateMapTransform(e,c,g),this._changes=[]}_updateMapTransform(e,c,g){const a=this._map,h=a._getTransformForUpdate(),m=a.terrain;if(!(Nc(e)||m&&this._terrainMovement))return this._fireEvents(c,g,!0);let{panDelta:w,zoomDelta:B,bearingDelta:S,pitchDelta:P,around:L,pinchAround:M}=e;M!==void 0&&(L=M),a._stop(!0),L=L||a.transform.centerPoint;const N=h.pointLocation(w?L.sub(w):L);S&&(h.bearing+=S),P&&(h.pitch+=P),B&&(h.zoom+=B),m?this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?h.center=h.pointLocation(h.centerPoint.sub(w)):h.setLocationAtPoint(N,L):(this._terrainMovement=!0,this._map._elevationFreeze=!0,h.setLocationAtPoint(N,L)):h.setLocationAtPoint(N,L),a._applyUpdatedTransform(h),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(c,g,!0)}_fireEvents(e,c,g){const a=na(this._eventsInProgress),h=na(e),m={};for(const L in e){const{originalEvent:M}=e[L];this._eventsInProgress[L]||(m[`${L}start`]=M),this._eventsInProgress[L]=e[L]}!a&&h&&this._fireEvent("movestart",h.originalEvent);for(const L in m)this._fireEvent(L,m[L]);h&&this._fireEvent("move",h.originalEvent);for(const L in e){const{originalEvent:M}=e[L];this._fireEvent(L,M)}const w={};let B;for(const L in this._eventsInProgress){const{handlerName:M,originalEvent:N}=this._eventsInProgress[L];this._handlersById[M].isActive()||(delete this._eventsInProgress[L],B=c[M]||N,w[`${L}end`]=B)}for(const L in w)this._fireEvent(L,w[L]);const S=na(this._eventsInProgress),P=(a||h)&&!S;if(P&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const L=this._map._getTransformForUpdate();L.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(L)}if(g&&P){this._updatingCamera=!0;const L=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),M=N=>N!==0&&-this._bearingSnap<N&&N<this._bearingSnap;!L||!L.essential&&E.prefersReducedMotion?(this._map.fire(new A.k("moveend",{originalEvent:B})),M(this._map.getBearing())&&this._map.resetNorth()):(M(L.bearing||this._map.getBearing())&&(L.bearing=0),L.freezeElevation=!0,this._map.easeTo(L,{originalEvent:B})),this._updatingCamera=!1}}_fireEvent(e,c){this._map.fire(new A.k(e,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(e=>{delete this._frameId,this.handleEvent(new dd("renderFrame",{timeStamp:e})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Vu extends A.E{constructor(e,c){super(),this._renderFrameCallback=()=>{const g=Math.min((E.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(g)),g<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=c.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new A.N(this.transform.center.lng,this.transform.center.lat)}setCenter(e,c){return this.jumpTo({center:e},c)}panBy(e,c,g){return e=A.P.convert(e).mult(-1),this.panTo(this.transform.center,A.e({offset:e},c),g)}panTo(e,c,g){return this.easeTo(A.e({center:e},c),g)}getZoom(){return this.transform.zoom}setZoom(e,c){return this.jumpTo({zoom:e},c),this}zoomTo(e,c,g){return this.easeTo(A.e({zoom:e},c),g)}zoomIn(e,c){return this.zoomTo(this.getZoom()+1,e,c),this}zoomOut(e,c){return this.zoomTo(this.getZoom()-1,e,c),this}getBearing(){return this.transform.bearing}setBearing(e,c){return this.jumpTo({bearing:e},c),this}getPadding(){return this.transform.padding}setPadding(e,c){return this.jumpTo({padding:e},c),this}rotateTo(e,c,g){return this.easeTo(A.e({bearing:e},c),g)}resetNorth(e,c){return this.rotateTo(0,A.e({duration:1e3},e),c),this}resetNorthPitch(e,c){return this.easeTo(A.e({bearing:0,pitch:0,duration:1e3},e),c),this}snapToNorth(e,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,c):this}getPitch(){return this.transform.pitch}setPitch(e,c){return this.jumpTo({pitch:e},c),this}cameraForBounds(e,c){e=nt.convert(e);const g=c&&c.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),g,c)}_cameraForBoxAndBearing(e,c,g,a){const h={top:0,bottom:0,right:0,left:0};if(typeof(a=A.e({padding:h,offset:[0,0],maxZoom:this.transform.maxZoom},a)).padding=="number"){const ie=a.padding;a.padding={top:ie,bottom:ie,right:ie,left:ie}}a.padding=A.e(h,a.padding);const m=this.transform,w=m.padding,B=new nt(e,c),S=m.project(B.getNorthWest()),P=m.project(B.getNorthEast()),L=m.project(B.getSouthEast()),M=m.project(B.getSouthWest()),N=A.b9(-g),H=S.rotate(N),Z=P.rotate(N),G=L.rotate(N),X=M.rotate(N),ut=new A.P(Math.max(H.x,Z.x,X.x,G.x),Math.max(H.y,Z.y,X.y,G.y)),tt=new A.P(Math.min(H.x,Z.x,X.x,G.x),Math.min(H.y,Z.y,X.y,G.y)),it=ut.sub(tt),st=(m.width-(w.left+w.right+a.padding.left+a.padding.right))/it.x,yt=(m.height-(w.top+w.bottom+a.padding.top+a.padding.bottom))/it.y;if(yt<0||st<0)return void A.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Lt=Math.min(m.scaleZoom(m.scale*Math.min(st,yt)),a.maxZoom),Qt=A.P.convert(a.offset),ne=new A.P((a.padding.left-a.padding.right)/2,(a.padding.top-a.padding.bottom)/2).rotate(A.b9(g)),ee=Qt.add(ne).mult(m.scale/m.zoomScale(Lt));return{center:m.unproject(S.add(L).div(2).sub(ee)),zoom:Lt,bearing:g}}fitBounds(e,c,g){return this._fitInternal(this.cameraForBounds(e,c),c,g)}fitScreenCoordinates(e,c,g,a,h){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(A.P.convert(e)),this.transform.pointLocation(A.P.convert(c)),g,a),a,h)}_fitInternal(e,c,g){return e?(delete(c=A.e(e,c)).padding,c.linear?this.easeTo(c,g):this.flyTo(c,g)):this}jumpTo(e,c){this.stop();const g=this._getTransformForUpdate();let a=!1,h=!1,m=!1;return"zoom"in e&&g.zoom!==+e.zoom&&(a=!0,g.zoom=+e.zoom),e.center!==void 0&&(g.center=A.N.convert(e.center)),"bearing"in e&&g.bearing!==+e.bearing&&(h=!0,g.bearing=+e.bearing),"pitch"in e&&g.pitch!==+e.pitch&&(m=!0,g.pitch=+e.pitch),e.padding==null||g.isPaddingEqual(e.padding)||(g.padding=e.padding),this._applyUpdatedTransform(g),this.fire(new A.k("movestart",c)).fire(new A.k("move",c)),a&&this.fire(new A.k("zoomstart",c)).fire(new A.k("zoom",c)).fire(new A.k("zoomend",c)),h&&this.fire(new A.k("rotatestart",c)).fire(new A.k("rotate",c)).fire(new A.k("rotateend",c)),m&&this.fire(new A.k("pitchstart",c)).fire(new A.k("pitch",c)).fire(new A.k("pitchend",c)),this.fire(new A.k("moveend",c))}calculateCameraOptionsFromTo(e,c,g,a=0){const h=A.Z.fromLngLat(e,c),m=A.Z.fromLngLat(g,a),w=m.x-h.x,B=m.y-h.y,S=m.z-h.z,P=Math.hypot(w,B,S);if(P===0)throw new Error("Can't calculate camera options with same From and To");const L=Math.hypot(w,B),M=this.transform.scaleZoom(this.transform.cameraToCenterDistance/P/this.transform.tileSize),N=180*Math.atan2(w,-B)/Math.PI;let H=180*Math.acos(L/P)/Math.PI;return H=S<0?90-H:90+H,{center:m.toLngLat(),zoom:M,pitch:H,bearing:N}}easeTo(e,c){var g;this._stop(!1,e.easeId),((e=A.e({offset:[0,0],duration:500,easing:A.b8},e)).animate===!1||!e.essential&&E.prefersReducedMotion)&&(e.duration=0);const a=this._getTransformForUpdate(),h=a.zoom,m=a.bearing,w=a.pitch,B=a.padding,S="bearing"in e?this._normalizeBearing(e.bearing,m):m,P="pitch"in e?+e.pitch:w,L="padding"in e?e.padding:a.padding,M=A.P.convert(e.offset);let N=a.centerPoint.add(M);const H=a.pointLocation(N),{center:Z,zoom:G}=a.getConstrained(A.N.convert(e.center||H),(g=e.zoom)!==null&&g!==void 0?g:h);this._normalizeCenter(Z,a);const X=a.project(H),ut=a.project(Z).sub(X),tt=a.zoomScale(G-h);let it,st;e.around&&(it=A.N.convert(e.around),st=a.locationPoint(it));const yt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||G!==h,this._rotating=this._rotating||m!==S,this._pitching=this._pitching||P!==w,this._padding=!a.isPaddingEqual(L),this._easeId=e.easeId,this._prepareEase(c,e.noMoveStart,yt),this.terrain&&this._prepareElevation(Z),this._ease(Lt=>{if(this._zooming&&(a.zoom=A.y.number(h,G,Lt)),this._rotating&&(a.bearing=A.y.number(m,S,Lt)),this._pitching&&(a.pitch=A.y.number(w,P,Lt)),this._padding&&(a.interpolatePadding(B,L,Lt),N=a.centerPoint.add(M)),this.terrain&&!e.freezeElevation&&this._updateElevation(Lt),it)a.setLocationAtPoint(it,st);else{const Qt=a.zoomScale(a.zoom-h),ne=G>h?Math.min(2,tt):Math.max(.5,tt),ee=Math.pow(ne,1-Lt),ie=a.unproject(X.add(ut.mult(Lt*ee)).mult(Qt));a.setLocationAtPoint(a.renderWorldCopies?ie.wrap():ie,N)}this._applyUpdatedTransform(a),this._fireMoveEvents(c)},Lt=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(c,Lt)},e),this}_prepareEase(e,c,g={}){this._moving=!0,c||g.moving||this.fire(new A.k("movestart",e)),this._zooming&&!g.zooming&&this.fire(new A.k("zoomstart",e)),this._rotating&&!g.rotating&&this.fire(new A.k("rotatestart",e)),this._pitching&&!g.pitching&&this.fire(new A.k("pitchstart",e))}_prepareElevation(e){this._elevationCenter=e,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(e,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(e){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(e<1&&c!==this._elevationTarget){const g=this._elevationTarget-this._elevationStart;this._elevationStart+=e*(g-(c-(g*e+this._elevationStart))/(1-e)),this._elevationTarget=c}this.transform.elevation=A.y.number(this._elevationStart,this._elevationTarget,e)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(e){const c=e.getCameraPosition(),g=this.terrain.getElevationForLngLatZoom(c.lngLat,e.zoom);if(c.altitude<g){const a=this.calculateCameraOptionsFromTo(c.lngLat,g,e.center,e.elevation);return{pitch:a.pitch,zoom:a.zoom}}return{}}_applyUpdatedTransform(e){const c=[];if(this.terrain&&c.push(a=>this._elevateCameraIfInsideTerrain(a)),this.transformCameraUpdate&&c.push(a=>this.transformCameraUpdate(a)),!c.length)return;const g=e.clone();for(const a of c){const h=g.clone(),{center:m,zoom:w,pitch:B,bearing:S,elevation:P}=a(h);m&&(h.center=m),w!==void 0&&(h.zoom=w),B!==void 0&&(h.pitch=B),S!==void 0&&(h.bearing=S),P!==void 0&&(h.elevation=P),g.apply(h)}this.transform.apply(g)}_fireMoveEvents(e){this.fire(new A.k("move",e)),this._zooming&&this.fire(new A.k("zoom",e)),this._rotating&&this.fire(new A.k("rotate",e)),this._pitching&&this.fire(new A.k("pitch",e))}_afterEase(e,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const g=this._zooming,a=this._rotating,h=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new A.k("zoomend",e)),a&&this.fire(new A.k("rotateend",e)),h&&this.fire(new A.k("pitchend",e)),this.fire(new A.k("moveend",e))}flyTo(e,c){var g;if(!e.essential&&E.prefersReducedMotion){const fe=A.M(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(fe,c)}this.stop(),e=A.e({offset:[0,0],speed:1.2,curve:1.42,easing:A.b8},e);const a=this._getTransformForUpdate(),h=a.zoom,m=a.bearing,w=a.pitch,B=a.padding,S="bearing"in e?this._normalizeBearing(e.bearing,m):m,P="pitch"in e?+e.pitch:w,L="padding"in e?e.padding:a.padding,M=A.P.convert(e.offset);let N=a.centerPoint.add(M);const H=a.pointLocation(N),{center:Z,zoom:G}=a.getConstrained(A.N.convert(e.center||H),(g=e.zoom)!==null&&g!==void 0?g:h);this._normalizeCenter(Z,a);const X=a.zoomScale(G-h),ut=a.project(H),tt=a.project(Z).sub(ut);let it=e.curve;const st=Math.max(a.width,a.height),yt=st/X,Lt=tt.mag();if("minZoom"in e){const fe=A.ac(Math.min(e.minZoom,h,G),a.minZoom,a.maxZoom),Ne=st/a.zoomScale(fe-h);it=Math.sqrt(Ne/Lt*2)}const Qt=it*it;function ne(fe){const Ne=(yt*yt-st*st+(fe?-1:1)*Qt*Qt*Lt*Lt)/(2*(fe?yt:st)*Qt*Lt);return Math.log(Math.sqrt(Ne*Ne+1)-Ne)}function ee(fe){return(Math.exp(fe)-Math.exp(-fe))/2}function ie(fe){return(Math.exp(fe)+Math.exp(-fe))/2}const Xt=ne(!1);let we=function(fe){return ie(Xt)/ie(Xt+it*fe)},De=function(fe){return st*((ie(Xt)*(ee(Ne=Xt+it*fe)/ie(Ne))-ee(Xt))/Qt)/Lt;var Ne},de=(ne(!0)-Xt)/it;if(Math.abs(Lt)<1e-6||!isFinite(de)){if(Math.abs(st-yt)<1e-6)return this.easeTo(e,c);const fe=yt<st?-1:1;de=Math.abs(Math.log(yt/st))/it,De=()=>0,we=Ne=>Math.exp(fe*it*Ne)}return e.duration="duration"in e?+e.duration:1e3*de/("screenSpeed"in e?+e.screenSpeed/it:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=m!==S,this._pitching=P!==w,this._padding=!a.isPaddingEqual(L),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(Z),this._ease(fe=>{const Ne=fe*de,pr=1/we(Ne);a.zoom=fe===1?G:h+a.scaleZoom(pr),this._rotating&&(a.bearing=A.y.number(m,S,fe)),this._pitching&&(a.pitch=A.y.number(w,P,fe)),this._padding&&(a.interpolatePadding(B,L,fe),N=a.centerPoint.add(M)),this.terrain&&!e.freezeElevation&&this._updateElevation(fe);const Ue=fe===1?Z:a.unproject(ut.add(tt.mult(De(Ne))).mult(pr));a.setLocationAtPoint(a.renderWorldCopies?Ue.wrap():Ue,N),this._applyUpdatedTransform(a),this._fireMoveEvents(c)},()=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(c)},e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,c){var g;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const a=this._onEaseEnd;delete this._onEaseEnd,a.call(this,c)}return e||(g=this.handlers)===null||g===void 0||g.stop(!1),this}_ease(e,c,g){g.animate===!1||g.duration===0?(e(1),c()):(this._easeStart=E.now(),this._easeOptions=g,this._onEaseFrame=e,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(e,c){e=A.b2(e,-180,180);const g=Math.abs(e-c);return Math.abs(e-360-c)<g&&(e-=360),Math.abs(e+360-c)<g&&(e+=360),e}_normalizeCenter(e,c){if(!c.renderWorldCopies||c.lngRange)return;const g=e.lng-c.center.lng;e.lng+=g>180?-360:g<-180?360:0}queryTerrainElevation(e){return this.terrain?this.terrain.getElevationForLngLatZoom(A.N.convert(e),this.transform.tileZoom)-this.transform.elevation:null}}const UA={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class ho{constructor(e=UA){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=e}getDefaultPosition(){return"bottom-right"}onAdd(e){return this._map=e,this._compact=this.options.compact,this._container=Q.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=Q.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Q.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){Q.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(e,c){const g=this._map._getUIString(`AttributionControl.${c}`);e.title=g,e.setAttribute("aria-label",g)}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map(a=>typeof a!="string"?"":a)):typeof this.options.customAttribution=="string"&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const a=this._map.style.stylesheet;this.styleOwner=a.owner,this.styleId=a.id}const c=this._map.style.sourceCaches;for(const a in c){const h=c[a];if(h.used||h.usedForTerrain){const m=h.getSource();m.attribution&&e.indexOf(m.attribution)<0&&e.push(m.attribution)}}e=e.filter(a=>String(a).trim()),e.sort((a,h)=>a.length-h.length),e=e.filter((a,h)=>{for(let m=h+1;m<e.length;m++)if(e[m].indexOf(a)>=0)return!1;return!0});const g=e.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,e.length?(this._innerContainer.innerHTML=g,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Re{constructor(e={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const g=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&g.classList.add("maplibregl-compact"):g.classList.remove("maplibregl-compact")}},this.options=e}getDefaultPosition(){return"bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=Q.create("div","maplibregl-ctrl");const c=Q.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){Q.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Uo{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const c=++this._id;return this._queue.push({callback:e,id:c,cancelled:!1}),c}remove(e){const c=this._currentlyRunning,g=c?this._queue.concat(c):this._queue;for(const a of g)if(a.id===e)return void(a.cancelled=!0)}run(e=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const g of c)if(!g.cancelled&&(g.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var ns=A.Y([{name:"a_pos3d",type:"Int16",components:3}]);class po extends A.E{constructor(e){super(),this.sourceCache=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,e.usedForTerrain=!0,e.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(e,c){this.sourceCache.update(e,c),this._renderableTilesKeys=[];const g={};for(const a of e.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c}))g[a.key]=!0,this._renderableTilesKeys.push(a.key),this._tiles[a.key]||(a.posMatrix=new Float64Array(16),A.aP(a.posMatrix,0,A.X,0,A.X,0,1),this._tiles[a.key]=new Xr(a,this.tileSize));for(const a in this._tiles)g[a]||delete this._tiles[a]}freeRtt(e){for(const c in this._tiles){const g=this._tiles[c];(!e||g.tileID.equals(e)||g.tileID.isChildOf(e)||e.isChildOf(g.tileID))&&(g.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(e=>this.getTileByID(e))}getTileByID(e){return this._tiles[e]}getTerrainCoords(e){const c={};for(const g of this._renderableTilesKeys){const a=this._tiles[g].tileID;if(a.canonical.equals(e.canonical)){const h=e.clone();h.posMatrix=new Float64Array(16),A.aP(h.posMatrix,0,A.X,0,A.X,0,1),c[g]=h}else if(a.canonical.isChildOf(e.canonical)){const h=e.clone();h.posMatrix=new Float64Array(16);const m=a.canonical.z-e.canonical.z,w=a.canonical.x-(a.canonical.x>>m<<m),B=a.canonical.y-(a.canonical.y>>m<<m),S=A.X>>m;A.aP(h.posMatrix,0,S,0,S,0,1),A.J(h.posMatrix,h.posMatrix,[-w*S,-B*S,0]),c[g]=h}else if(e.canonical.isChildOf(a.canonical)){const h=e.clone();h.posMatrix=new Float64Array(16);const m=e.canonical.z-a.canonical.z,w=e.canonical.x-(e.canonical.x>>m<<m),B=e.canonical.y-(e.canonical.y>>m<<m),S=A.X>>m;A.aP(h.posMatrix,0,A.X,0,A.X,0,1),A.J(h.posMatrix,h.posMatrix,[w*S,B*S,0]),A.K(h.posMatrix,h.posMatrix,[1/2**m,1/2**m,0]),c[g]=h}}return c}getSourceTile(e,c){const g=this.sourceCache._source;let a=e.overscaledZ-this.deltaZoom;if(a>g.maxzoom&&(a=g.maxzoom),a<g.minzoom)return null;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(a).key);let h=this.sourceCache.getTileByID(this._sourceTileCache[e.key]);if((!h||!h.dem)&&c)for(;a>=g.minzoom&&(!h||!h.dem);)h=this.sourceCache.getTileByID(e.scaledTo(a--).key);return h}tilesAfterTime(e=Date.now()){return Object.values(this._tiles).filter(c=>c.timeAdded>=e)}}class wl{constructor(e,c,g){this.painter=e,this.sourceCache=new po(c),this.options=g,this.exaggeration=typeof g.exaggeration=="number"?g.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(e,c,g,a=A.X){var h;if(!(c>=0&&c<a&&g>=0&&g<a))return 0;const m=this.getTerrainData(e),w=(h=m.tile)===null||h===void 0?void 0:h.dem;if(!w)return 0;const B=function(H,Z,G){var X=Z[0],ut=Z[1];return H[0]=G[0]*X+G[4]*ut+G[12],H[1]=G[1]*X+G[5]*ut+G[13],H}([],[c/a*A.X,g/a*A.X],m.u_terrain_matrix),S=[B[0]*w.dim,B[1]*w.dim],P=Math.floor(S[0]),L=Math.floor(S[1]),M=S[0]-P,N=S[1]-L;return w.get(P,L)*(1-M)*(1-N)+w.get(P+1,L)*M*(1-N)+w.get(P,L+1)*(1-M)*N+w.get(P+1,L+1)*M*N}getElevationForLngLatZoom(e,c){if(!A.ba(c,e.wrap()))return 0;const{tileID:g,mercatorX:a,mercatorY:h}=this._getOverscaledTileIDFromLngLatZoom(e,c);return this.getElevation(g,a%A.X,h%A.X,A.X)}getElevation(e,c,g,a=A.X){return this.getDEMElevation(e,c,g,a)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){const a=this.painter.context,h=new A.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new at(a,h,a.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new at(a,new A.R({width:1,height:1}),a.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(a.gl.NEAREST,a.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=A.an([])}const c=this.sourceCache.getSourceTile(e,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const a=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new at(a,c.dem.getPixels(),a.gl.RGBA,{premultiply:!1}),c.demTexture.bind(a.gl.NEAREST,a.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const g=c&&c+c.tileID.key+e.key;if(g&&!this._demMatrixCache[g]){const a=this.sourceCache.sourceCache._source.maxzoom;let h=e.canonical.z-c.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=a?h=e.canonical.z-a:A.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const m=e.canonical.x-(e.canonical.x>>h<<h),w=e.canonical.y-(e.canonical.y>>h<<h),B=A.bb(new Float64Array(16),[1/(A.X<<h),1/(A.X<<h),0]);A.J(B,B,[m*A.X,w*A.X,0]),this._demMatrixCache[e.key]={matrix:B,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:g?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(e){const c=this.painter,g=c.width/devicePixelRatio,a=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===g&&this._fbo.height===a||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new at(c.context,{width:g,height:a,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new at(c.context,{width:g,height:a,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(g,a,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,g,a))),this._fbo.colorAttachment.set(e==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const e=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let h=0,m=0;h<this._coordsTextureSize;h++)for(let w=0;w<this._coordsTextureSize;w++,m+=4)c[m+0]=255&w,c[m+1]=255&h,c[m+2]=w>>8<<4|h>>8,c[m+3]=0;const g=new A.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),a=new at(e,g,e.gl.RGBA,{premultiply:!1});return a.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=a,a}pointCoordinate(e){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),g=this.painter.context,a=g.gl,h=Math.round(e.x*this.painter.pixelRatio/devicePixelRatio),m=Math.round(e.y*this.painter.pixelRatio/devicePixelRatio),w=Math.round(this.painter.height/devicePixelRatio);g.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),a.readPixels(h,w-m-1,1,1,a.RGBA,a.UNSIGNED_BYTE,c),g.bindFramebuffer.set(null);const B=c[0]+(c[2]>>4<<8),S=c[1]+((15&c[2])<<8),P=this.coordsIndex[255-c[3]],L=P&&this.sourceCache.getTileByID(P);if(!L)return null;const M=this._coordsTextureSize,N=(1<<L.tileID.canonical.z)*M;return new A.Z((L.tileID.canonical.x*M+B)/N+L.tileID.wrap,(L.tileID.canonical.y*M+S)/N,this.getElevation(L.tileID,B,S,M))}depthAtPoint(e){const c=new Uint8Array(4),g=this.painter.context,a=g.gl;return g.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),a.readPixels(e.x,this.painter.height/devicePixelRatio-e.y-1,1,1,a.RGBA,a.UNSIGNED_BYTE,c),g.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const e=this.painter.context,c=new A.bc,g=new A.aX,a=this.meshSize,h=A.X/a,m=a*a;for(let L=0;L<=a;L++)for(let M=0;M<=a;M++)c.emplaceBack(M*h,L*h,0);for(let L=0;L<m;L+=a+1)for(let M=0;M<a;M++)g.emplaceBack(M+L,a+M+L+1,a+M+L+2),g.emplaceBack(M+L,a+M+L+2,M+L+1);const w=c.length,B=w+2*(a+1);for(const L of[0,1])for(let M=0;M<=a;M++)for(const N of[0,1])c.emplaceBack(M*h,L*A.X,N);for(let L=0;L<2*a;L+=2)g.emplaceBack(B+L,B+L+1,B+L+3),g.emplaceBack(B+L,B+L+3,B+L+2),g.emplaceBack(w+L,w+L+3,w+L+1),g.emplaceBack(w+L,w+L+2,w+L+3);const S=c.length,P=S+2*(a+1);for(const L of[0,1])for(let M=0;M<=a;M++)for(const N of[0,1])c.emplaceBack(L*A.X,M*h,N);for(let L=0;L<2*a;L+=2)g.emplaceBack(S+L,S+L+1,S+L+3),g.emplaceBack(S+L,S+L+3,S+L+2),g.emplaceBack(P+L,P+L+3,P+L+1),g.emplaceBack(P+L,P+L+2,P+L+3);return this._mesh=new Ao(e.createVertexBuffer(c,ns.members),e.createIndexBuffer(g),A.a0.simpleSegment(0,0,c.length,g.length)),this._mesh}getMeshFrameDelta(e){return 2*Math.PI*A.bd/Math.pow(2,e)/5}getMinTileElevationForLngLatZoom(e,c){var g;const{tileID:a}=this._getOverscaledTileIDFromLngLatZoom(e,c);return(g=this.getMinMaxElevation(a).minElevation)!==null&&g!==void 0?g:0}getMinMaxElevation(e){const c=this.getTerrainData(e).tile,g={minElevation:null,maxElevation:null};return c&&c.dem&&(g.minElevation=c.dem.min*this.exaggeration,g.maxElevation=c.dem.max*this.exaggeration),g}_getOverscaledTileIDFromLngLatZoom(e,c){const g=A.Z.fromLngLat(e.wrap()),a=(1<<c)*A.X,h=g.x*a,m=g.y*a,w=Math.floor(h/A.X),B=Math.floor(m/A.X);return{tileID:new A.S(c,0,c,w,B),mercatorX:h,mercatorY:m}}}class PA{constructor(e,c,g){this._context=e,this._size=c,this._tileSize=g,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const e of this._objects)e.texture.destroy(),e.fbo.destroy()}_createObject(e){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),g=new at(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return g.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(g.texture),{id:e,fbo:c,texture:g,stamp:-1,inUse:!1}}getObjectForId(e){return this._objects[e]}useObject(e){e.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>e.id!==c),this._recentlyUsed.push(e.id)}stampObject(e){e.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const e=this._createObject(this._objects.length);return this._objects.push(e),e}freeObject(e){e.inUse=!1}freeAllObjects(){for(const e of this._objects)this.freeObject(e)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(e=>!e.inUse)===!1}}const Vn={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class _r{constructor(e,c){this.painter=e,this.terrain=c,this.pool=new PA(e.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(e){return this.pool.getObjectForId(e.rtt[this._stacks.length-1].id).texture}prepareForRender(e,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=e._order.filter(g=>!e._layers[g].isHidden(c)),this._coordsDescendingInv={};for(const g in e.sourceCaches){this._coordsDescendingInv[g]={};const a=e.sourceCaches[g].getVisibleCoordinates();for(const h of a){const m=this.terrain.sourceCache.getTerrainCoords(h);for(const w in m)this._coordsDescendingInv[g][w]||(this._coordsDescendingInv[g][w]=[]),this._coordsDescendingInv[g][w].push(m[w])}}this._coordsDescendingInvStr={};for(const g of e._order){const a=e._layers[g],h=a.source;if(Vn[a.type]&&!this._coordsDescendingInvStr[h]){this._coordsDescendingInvStr[h]={};for(const m in this._coordsDescendingInv[h])this._coordsDescendingInvStr[h][m]=this._coordsDescendingInv[h][m].map(w=>w.key).sort().join()}}for(const g of this._renderableTiles)for(const a in this._coordsDescendingInvStr){const h=this._coordsDescendingInvStr[a][g.tileID.key];h&&h!==g.rttCoords[a]&&(g.rtt=[])}}renderLayer(e){if(e.isHidden(this.painter.transform.zoom))return!1;const c=e.type,g=this.painter,a=this._renderableLayerIds[this._renderableLayerIds.length-1]===e.id;if(Vn[c]&&(this._prevType&&Vn[this._prevType]||this._stacks.push([]),this._prevType=c,this._stacks[this._stacks.length-1].push(e.id),!a))return!0;if(Vn[this._prevType]||Vn[c]&&a){this._prevType=c;const h=this._stacks.length-1,m=this._stacks[h]||[];for(const w of this._renderableTiles){if(this.pool.isFull()&&(ys(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(w),w.rtt[h]){const S=this.pool.getObjectForId(w.rtt[h].id);if(S.stamp===w.rtt[h].stamp){this.pool.useObject(S);continue}}const B=this.pool.getOrCreateFreeObject();this.pool.useObject(B),this.pool.stampObject(B),w.rtt[h]={id:B.id,stamp:B.stamp},g.context.bindFramebuffer.set(B.fbo.framebuffer),g.context.clear({color:A.aM.transparent,stencil:0}),g.currentStencilSource=void 0;for(let S=0;S<m.length;S++){const P=g.style._layers[m[S]],L=P.source?this._coordsDescendingInv[P.source][w.tileID.key]:[w.tileID];g.context.viewport.set([0,0,B.fbo.width,B.fbo.height]),g._renderTileClippingMasks(P,L),g.renderLayer(g,g.style.sourceCaches[P.source],P,L),P.source&&(w.rttCoords[P.source]=this._coordsDescendingInvStr[P.source][w.tileID.key])}}return ys(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Vn[c]}return!1}}const Oc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},pd=v,tc={hash:!1,interactive:!0,bearingSnap:7,attributionControl:UA,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:A.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Rc=_=>{_.touchstart=_.dragStart,_.touchmoveWindow=_.dragMove,_.touchend=_.dragEnd},ju={showCompass:!0,showZoom:!0,visualizePitch:!1};class zc{constructor(e,c,g=!1){this.mousedown=m=>{this.startMouse(A.e({},m,{ctrlKey:!0,preventDefault:()=>m.preventDefault()}),Q.mousePos(this.element,m)),Q.addEventListener(window,"mousemove",this.mousemove),Q.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=m=>{this.moveMouse(m,Q.mousePos(this.element,m))},this.mouseup=m=>{this.mouseRotate.dragEnd(m),this.mousePitch&&this.mousePitch.dragEnd(m),this.offTemp()},this.touchstart=m=>{m.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Q.touchPos(this.element,m.targetTouches)[0],this.startTouch(m,this._startPos),Q.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),Q.addEventListener(window,"touchend",this.touchend))},this.touchmove=m=>{m.targetTouches.length!==1?this.reset():(this._lastPos=Q.touchPos(this.element,m.targetTouches)[0],this.moveTouch(m,this._lastPos))},this.touchend=m=>{m.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const a=e.dragRotate._mouseRotate.getClickTolerance(),h=e.dragRotate._mousePitch.getClickTolerance();this.element=c,this.mouseRotate=Vi({clickTolerance:a,enable:!0}),this.touchRotate=(({enable:m,clickTolerance:w,bearingDegreesPerPixelMoved:B=.8})=>{const S=new BA;return new ws({clickTolerance:w,move:(P,L)=>({bearingDelta:(L.x-P.x)*B}),moveStateManager:S,enable:m,assignEvents:Rc})})({clickTolerance:a,enable:!0}),this.map=e,g&&(this.mousePitch=dn({clickTolerance:h,enable:!0}),this.touchPitch=(({enable:m,clickTolerance:w,pitchDegreesPerPixelMoved:B=-.5})=>{const S=new BA;return new ws({clickTolerance:w,move:(P,L)=>({pitchDelta:(L.y-P.y)*B}),moveStateManager:S,enable:m,assignEvents:Rc})})({clickTolerance:h,enable:!0})),Q.addEventListener(c,"mousedown",this.mousedown),Q.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),Q.addEventListener(c,"touchcancel",this.reset)}startMouse(e,c){this.mouseRotate.dragStart(e,c),this.mousePitch&&this.mousePitch.dragStart(e,c),Q.disableDrag()}startTouch(e,c){this.touchRotate.dragStart(e,c),this.touchPitch&&this.touchPitch.dragStart(e,c),Q.disableDrag()}moveMouse(e,c){const g=this.map,{bearingDelta:a}=this.mouseRotate.dragMove(e,c)||{};if(a&&g.setBearing(g.getBearing()+a),this.mousePitch){const{pitchDelta:h}=this.mousePitch.dragMove(e,c)||{};h&&g.setPitch(g.getPitch()+h)}}moveTouch(e,c){const g=this.map,{bearingDelta:a}=this.touchRotate.dragMove(e,c)||{};if(a&&g.setBearing(g.getBearing()+a),this.touchPitch){const{pitchDelta:h}=this.touchPitch.dragMove(e,c)||{};h&&g.setPitch(g.getPitch()+h)}}off(){const e=this.element;Q.removeEventListener(e,"mousedown",this.mousedown),Q.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),Q.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),Q.removeEventListener(window,"touchend",this.touchend),Q.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){Q.enableDrag(),Q.removeEventListener(window,"mousemove",this.mousemove),Q.removeEventListener(window,"mouseup",this.mouseup),Q.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),Q.removeEventListener(window,"touchend",this.touchend)}}let Po;function LA(_,e,c){const g=new A.N(_.lng,_.lat);if(_=new A.N(_.lng,_.lat),e){const a=new A.N(_.lng-360,_.lat),h=new A.N(_.lng+360,_.lat),m=c.locationPoint(_).distSqr(e);c.locationPoint(a).distSqr(e)<m?_=a:c.locationPoint(h).distSqr(e)<m&&(_=h)}for(;Math.abs(_.lng-c.center.lng)>180;){const a=c.locationPoint(_);if(a.x>=0&&a.y>=0&&a.x<=c.width&&a.y<=c.height)break;_.lng>c.center.lng?_.lng-=360:_.lng+=360}return _.lng!==g.lng&&c.locationPoint(_).y>c.height/2-c.getHorizon()?_:g}const QA={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ka(_,e,c){const g=_.classList;for(const a in QA)g.remove(`maplibregl-${c}-anchor-${a}`);g.add(`maplibregl-${c}-anchor-${e}`)}class _l extends A.E{constructor(e){if(super(),this._onKeyPress=c=>{const g=c.code,a=c.charCode||c.keyCode;g!=="Space"&&g!=="Enter"&&a!==32&&a!==13||this.togglePopup()},this._onMapClick=c=>{const g=c.originalEvent.target,a=this._element;this._popup&&(g===a||a.contains(g))&&this.togglePopup()},this._update=c=>{var g;if(!this._map)return;const a=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!a)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?LA(this._lngLat,this._flatPos,this._map.transform):(g=this._lngLat)===null||g===void 0?void 0:g.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let h="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?h=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(h=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let m="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?m="rotateX(0deg)":this._pitchAlignment==="map"&&(m=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),Q.setTransform(this._element,`${QA[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${m} ${h}`),E.frameAsync(new AbortController).then(()=>{this._updateOpacity(c&&c.type==="moveend")}).catch(()=>{})},this._onMove=c=>{if(!this._isDragging){const g=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=g}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new A.k("dragstart"))),this.fire(new A.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new A.k("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._subpixelPositioning=e&&e.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&e.pitchAlignment!=="auto"?e.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(e==null?void 0:e.opacity,e==null?void 0:e.opacityWhenCovered),e&&e.element)this._element=e.element,this._offset=A.P.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=Q.create("div");const c=Q.createNS("http://www.w3.org/2000/svg","svg"),g=41,a=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${g}px`),c.setAttributeNS(null,"width",`${a}px`),c.setAttributeNS(null,"viewBox",`0 0 ${a} ${g}`);const h=Q.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"stroke","none"),h.setAttributeNS(null,"stroke-width","1"),h.setAttributeNS(null,"fill","none"),h.setAttributeNS(null,"fill-rule","evenodd");const m=Q.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"fill-rule","nonzero");const w=Q.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"transform","translate(3.0, 29.0)"),w.setAttributeNS(null,"fill","#000000");const B=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const X of B){const ut=Q.createNS("http://www.w3.org/2000/svg","ellipse");ut.setAttributeNS(null,"opacity","0.04"),ut.setAttributeNS(null,"cx","10.5"),ut.setAttributeNS(null,"cy","5.80029008"),ut.setAttributeNS(null,"rx",X.rx),ut.setAttributeNS(null,"ry",X.ry),w.appendChild(ut)}const S=Q.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"fill",this._color);const P=Q.createNS("http://www.w3.org/2000/svg","path");P.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),S.appendChild(P);const L=Q.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"opacity","0.25"),L.setAttributeNS(null,"fill","#000000");const M=Q.createNS("http://www.w3.org/2000/svg","path");M.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),L.appendChild(M);const N=Q.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"transform","translate(6.0, 7.0)"),N.setAttributeNS(null,"fill","#FFFFFF");const H=Q.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Z=Q.createNS("http://www.w3.org/2000/svg","circle");Z.setAttributeNS(null,"fill","#000000"),Z.setAttributeNS(null,"opacity","0.25"),Z.setAttributeNS(null,"cx","5.5"),Z.setAttributeNS(null,"cy","5.5"),Z.setAttributeNS(null,"r","5.4999962");const G=Q.createNS("http://www.w3.org/2000/svg","circle");G.setAttributeNS(null,"fill","#FFFFFF"),G.setAttributeNS(null,"cx","5.5"),G.setAttributeNS(null,"cy","5.5"),G.setAttributeNS(null,"r","5.4999962"),H.appendChild(Z),H.appendChild(G),m.appendChild(w),m.appendChild(S),m.appendChild(L),m.appendChild(N),m.appendChild(H),c.appendChild(m),c.setAttributeNS(null,"height",g*this._scale+"px"),c.setAttributeNS(null,"width",a*this._scale+"px"),this._element.appendChild(c),this._offset=A.P.convert(e&&e.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),Ka(this._element,this._anchor,"marker"),e&&e.className)for(const c of e.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(e){return this.remove(),this._map=e,this._element.setAttribute("aria-label",e._getUIString("Marker.Title")),e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),e.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),Q.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=A.N.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const a=Math.abs(13.5)/Math.SQRT2;e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[a,-1*(38.1-13.5+a)],"bottom-right":[-a,-1*(38.1-13.5+a)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=e,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(e){return this._subpixelPositioning=e,this}getPopup(){return this._popup}togglePopup(){const e=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:e?(e.isOpen()?e.remove():(e.setLngLat(this._lngLat),e.addTo(this._map)),this):this}_updateOpacity(e=!1){var c,g;if(!(!((c=this._map)===null||c===void 0)&&c.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(e)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const a=this._map,h=a.terrain.depthAtPoint(this._pos),m=a.terrain.getElevationForLngLatZoom(this._lngLat,a.transform.tileZoom);if(a.transform.lngLatToCameraDepth(this._lngLat,m)-h<.006)return void(this._element.style.opacity=this._opacity);const w=-this._offset.y/a.transform._pixelPerMeter,B=Math.sin(a.getPitch()*Math.PI/180)*w,S=a.terrain.depthAtPoint(new A.P(this._pos.x,this._pos.y-this._offset.y)),P=a.transform.lngLatToCameraDepth(this._lngLat,m+B)-S>.006;!((g=this._popup)===null||g===void 0)&&g.isOpen()&&P&&this._popup.remove(),this._element.style.opacity=P?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(e){return this._offset=A.P.convert(e),this._update(),this}addClassName(e){this._element.classList.add(e)}removeClassName(e){this._element.classList.remove(e)}toggleClassName(e){return this._element.classList.toggle(e)}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&e!=="auto"?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(e,c){return e===void 0&&c===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),e!==void 0&&(this._opacity=e),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const Ku={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let fo=0,ii=!1;const ec={maxWidth:100,unit:"metric"};function rc(_,e,c){const g=c&&c.maxWidth||100,a=_._container.clientHeight/2,h=_.unproject([0,a]),m=_.unproject([g,a]),w=h.distanceTo(m);if(c&&c.unit==="imperial"){const B=3.2808*w;B>5280?kA(e,g,B/5280,_._getUIString("ScaleControl.Miles")):kA(e,g,B,_._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?kA(e,g,w/1852,_._getUIString("ScaleControl.NauticalMiles")):w>=1e3?kA(e,g,w/1e3,_._getUIString("ScaleControl.Kilometers")):kA(e,g,w,_._getUIString("ScaleControl.Meters"))}function kA(_,e,c,g){const a=function(h){const m=Math.pow(10,`${Math.floor(h)}`.length-1);let w=h/m;return w=w>=10?10:w>=5?5:w>=3?3:w>=2?2:w>=1?1:function(B){const S=Math.pow(10,Math.ceil(-Math.log(B)/Math.LN10));return Math.round(B*S)/S}(w),m*w}(c);_.style.width=e*(a/c)+"px",_.innerHTML=`${a}&nbsp;${g}`}const $u={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},qu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Gu(_){if(_){if(typeof _=="number"){const e=Math.round(Math.abs(_)/Math.SQRT2);return{center:new A.P(0,0),top:new A.P(0,_),"top-left":new A.P(e,e),"top-right":new A.P(-e,e),bottom:new A.P(0,-_),"bottom-left":new A.P(e,-e),"bottom-right":new A.P(-e,-e),left:new A.P(_,0),right:new A.P(-_,0)}}if(_ instanceof A.P||Array.isArray(_)){const e=A.P.convert(_);return{center:e,top:e,"top-left":e,"top-right":e,bottom:e,"bottom-left":e,"bottom-right":e,left:e,right:e}}return{center:A.P.convert(_.center||[0,0]),top:A.P.convert(_.top||[0,0]),"top-left":A.P.convert(_["top-left"]||[0,0]),"top-right":A.P.convert(_["top-right"]||[0,0]),bottom:A.P.convert(_.bottom||[0,0]),"bottom-left":A.P.convert(_["bottom-left"]||[0,0]),"bottom-right":A.P.convert(_["bottom-right"]||[0,0]),left:A.P.convert(_.left||[0,0]),right:A.P.convert(_.right||[0,0])}}return Gu(new A.P(0,0))}const js=v;p.AJAXError=A.bg,p.Evented=A.E,p.LngLat=A.N,p.MercatorCoordinate=A.Z,p.Point=A.P,p.addProtocol=A.bh,p.config=A.a,p.removeProtocol=A.bi,p.AttributionControl=ho,p.BoxZoomHandler=uo,p.CanvasSource=nr,p.CooperativeGesturesHandler=To,p.DoubleClickZoomHandler=TA,p.DragPanHandler=Vs,p.DragRotateHandler=Dc,p.EdgeInsets=Ln,p.FullscreenControl=class extends A.E{constructor(_={}){super(),this._onFullscreenChange=()=>{var e;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((e=c==null?void 0:c.shadowRoot)===null||e===void 0)&&e.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:A.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=Q.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){Q.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const _=this._fullscreenButton=Q.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);Q.create("span","maplibregl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new A.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new A.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},p.GeoJSONSource=Se,p.GeolocateControl=class extends A.E{constructor(_){super(),this._onSuccess=e=>{if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new A.k("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(e),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new A.k("geolocate",e)),this._finish()}},this._updateCamera=e=>{const c=new A.N(e.coords.longitude,e.coords.latitude),g=e.coords.accuracy,a=this._map.getBearing(),h=A.e({bearing:a},this.options.fitBoundsOptions),m=nt.fromLngLat(c,g);this._map.fitBounds(m,h,{geolocateSource:!0})},this._updateMarker=e=>{if(e){const c=new A.N(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=e=>{if(this._map){if(this.options.trackUserLocation)if(e.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(e.code===3&&ii)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new A.k("error",e)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",e=>e.preventDefault()),this._geolocateButton=Q.create("button","maplibregl-ctrl-geolocate",this._container),Q.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=e=>{if(this._map){if(e===!1){A.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Q.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new _l({element:this._dotElement}),this._circleElement=Q.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new _l({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new A.k("trackuserlocationend")),this.fire(new A.k("userlocationlostfocus")))})}},this.options=A.e({},Ku,_)}onAdd(_){return this._map=_,this._container=Q.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return A._(this,arguments,void 0,function*(e=!1){if(Po!==void 0&&!e)return Po;if(window.navigator.permissions===void 0)return Po=!!window.navigator.geolocation,Po;try{Po=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Po=!!window.navigator.geolocation}return Po})}().then(e=>this._finishSetupUI(e)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),Q.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,fo=0,ii=!1}_isOutOfMapMaxBounds(_){const e=this._map.getMaxBounds(),c=_.coords;return e&&(c.longitude<e.getWest()||c.longitude>e.getEast()||c.latitude<e.getSouth()||c.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const _=this._map.getBounds(),e=_.getSouthEast(),c=_.getNorthEast(),g=e.distanceTo(c),a=Math.ceil(this._accuracy/(g/this._map._container.clientHeight)*2);this._circleElement.style.width=`${a}px`,this._circleElement.style.height=`${a}px`}trigger(){if(!this._setup)return A.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new A.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":fo--,ii=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new A.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new A.k("trackuserlocationstart")),this.fire(new A.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),fo++,fo>1?(_={maximumAge:6e5,timeout:0},ii=!0):(_=this.options.positionOptions,ii=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},p.Hash=Qn,p.ImageSource=He,p.KeyboardHandler=vl,p.LngLatBounds=nt,p.LogoControl=Re,p.Map=class extends Vu{constructor(_){A.be.mark(A.bf.create);const e=Object.assign(Object.assign({},tc),_);if(e.minZoom!=null&&e.maxZoom!=null&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(e.minPitch!=null&&e.maxPitch!=null&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(e.minPitch!=null&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(e.maxPitch!=null&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new So(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),{bearingSnap:e.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Uo,this._controls=[],this._mapId=A.a4(),this._contextLost=c=>{c.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new A.k("webglcontextlost",{originalEvent:c}))},this._contextRestored=c=>{this._setupPainter(),this.resize(),this._update(),this.fire(new A.k("webglcontextrestored",{originalEvent:c}))},this._onMapScroll=c=>{if(c.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._maxTileCacheZoomLevels=e.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=e.preserveDrawingBuffer===!0,this._antialias=e.antialias===!0,this._trackResize=e.trackResize===!0,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles===!0,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions===!0,this._collectResourceTiming=e.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Oc),e.locale),this._clickTolerance=e.clickTolerance,this._overridePixelRatio=e.pixelRatio,this._maxCanvasSize=e.maxCanvasSize,this.transformCameraUpdate=e.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=e.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ht.addThrottleControl(()=>this.isMoving()),this._requestManager=new Bt(e.transformRequest),typeof e.container=="string"){if(this._container=document.getElementById(e.container),!this._container)throw new Error(`Container '${e.container}' not found.`)}else{if(!(e.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let c=!1;const g=vs(a=>{this._trackResize&&!this._removed&&this.resize(a)._update()},50);this._resizeObserver=new ResizeObserver(a=>{c?g(a):c=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Hu(this,e),this._hash=e.hash&&new Qn(typeof e.hash=="string"&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,A.e({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,this._validateStyle=e.validateStyle,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new ho(typeof e.attributionControl=="boolean"?void 0:e.attributionControl)),e.maplibreLogo&&this.addControl(new Re,e.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",c=>{this._update(c.dataType==="style"),this.fire(new A.k(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new A.k(`${c.dataType}dataloading`,c))}),this.on("dataabort",c=>{this.fire(new A.k("sourcedataabort",c))})}_getMapId(){return this._mapId}addControl(_,e){if(e===void 0&&(e=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new A.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=_.onAdd(this);this._controls.push(_);const g=this._controlPositions[e];return e.indexOf("bottom")!==-1?g.insertBefore(c,g.firstChild):g.appendChild(c),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new A.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const e=this._controls.indexOf(_);return e>-1&&this._controls.splice(e,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}calculateCameraOptionsFromTo(_,e,c,g){return g==null&&this.terrain&&(g=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(_,e,c,g)}resize(_){var e;const c=this._containerDimensions(),g=c[0],a=c[1],h=this._getClampedPixelRatio(g,a);if(this._resizeCanvas(g,a,h),this.painter.resize(g,a,h),this.painter.overLimit()){const w=this.painter.context.gl;this._maxCanvasSize=[w.drawingBufferWidth,w.drawingBufferHeight];const B=this._getClampedPixelRatio(g,a);this._resizeCanvas(g,a,B),this.painter.resize(g,a,B)}this.transform.resize(g,a),(e=this._requestedCameraState)===null||e===void 0||e.resize(g,a);const m=!this._moving;return m&&(this.stop(),this.fire(new A.k("movestart",_)).fire(new A.k("move",_))),this.fire(new A.k("resize",_)),m&&this.fire(new A.k("moveend",_)),this}_getClampedPixelRatio(_,e){const{0:c,1:g}=this._maxCanvasSize,a=this.getPixelRatio(),h=_*a,m=e*a;return Math.min(h>c?c/h:1,m>g?g/m:1)*a}getPixelRatio(){var _;return(_=this._overridePixelRatio)!==null&&_!==void 0?_:devicePixelRatio}setPixelRatio(_){this._overridePixelRatio=_,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(nt.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.minZoom=_,this._update(),this.getZoom()<_&&this.setZoom(_),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.maxZoom=_,this._update(),this.getZoom()>_&&this.setZoom(_),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.minPitch=_,this._update(),this.getPitch()<_&&this.setPitch(_),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(_>=this.transform.minPitch)return this.transform.maxPitch=_,this._update(),this.getPitch()>_&&this.setPitch(_),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.renderWorldCopies=_,this._update()}project(_){return this.transform.locationPoint(A.N.convert(_),this.style&&this.terrain)}unproject(_){return this.transform.pointLocation(A.P.convert(_),this.terrain)}isMoving(){var _;return this._moving||((_=this.handlers)===null||_===void 0?void 0:_.isMoving())}isZooming(){var _;return this._zooming||((_=this.handlers)===null||_===void 0?void 0:_.isZooming())}isRotating(){var _;return this._rotating||((_=this.handlers)===null||_===void 0?void 0:_.isRotating())}_createDelegatedListener(_,e,c){if(_==="mouseenter"||_==="mouseover"){let g=!1;return{layer:e,listener:c,delegates:{mousemove:h=>{const m=this.getLayer(e)?this.queryRenderedFeatures(h.point,{layers:[e]}):[];m.length?g||(g=!0,c.call(this,new Or(_,this,h.originalEvent,{features:m}))):g=!1},mouseout:()=>{g=!1}}}}if(_==="mouseleave"||_==="mouseout"){let g=!1;return{layer:e,listener:c,delegates:{mousemove:m=>{(this.getLayer(e)?this.queryRenderedFeatures(m.point,{layers:[e]}):[]).length?g=!0:g&&(g=!1,c.call(this,new Or(_,this,m.originalEvent)))},mouseout:m=>{g&&(g=!1,c.call(this,new Or(_,this,m.originalEvent)))}}}}{const g=a=>{const h=this.getLayer(e)?this.queryRenderedFeatures(a.point,{layers:[e]}):[];h.length&&(a.features=h,c.call(this,a),delete a.features)};return{layer:e,listener:c,delegates:{[_]:g}}}}on(_,e,c){if(c===void 0)return super.on(_,e);const g=this._createDelegatedListener(_,e,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(g);for(const a in g.delegates)this.on(a,g.delegates[a]);return this}once(_,e,c){if(c===void 0)return super.once(_,e);const g=this._createDelegatedListener(_,e,c);for(const a in g.delegates)this.once(a,g.delegates[a]);return this}off(_,e,c){return c===void 0?super.off(_,e):(this._delegatedListeners&&this._delegatedListeners[_]&&(g=>{const a=this._delegatedListeners[_];for(let h=0;h<a.length;h++){const m=a[h];if(m.layer===e&&m.listener===c){for(const w in m.delegates)this.off(w,m.delegates[w]);return a.splice(h,1),this}}})(),this)}queryRenderedFeatures(_,e){if(!this.style)return[];let c;const g=_ instanceof A.P||Array.isArray(_),a=g?_:[[0,0],[this.transform.width,this.transform.height]];if(e=e||(g?{}:_)||{},a instanceof A.P||typeof a[0]=="number")c=[A.P.convert(a)];else{const h=A.P.convert(a[0]),m=A.P.convert(a[1]);c=[h,new A.P(m.x,h.y),m,new A.P(h.x,m.y),h]}return this.style.queryRenderedFeatures(c,e,this.transform)}querySourceFeatures(_,e){return this.style.querySourceFeatures(_,e)}setStyle(_,e){return(e=A.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},e)).diff!==!1&&e.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&_?(this._diffStyle(_,e),this):(this._localIdeographFontFamily=e.localIdeographFontFamily,this._updateStyle(_,e))}setTransformRequest(_){return this._requestManager.setTransformRequest(_),this}_getUIString(_){const e=this._locale[_];if(e==null)throw new Error(`Missing UI string '${_}'`);return e}_updateStyle(_,e){if(e.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(_,e));const c=this.style&&e.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!_)),_?(this.style=new jo(this,e||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_,e,c):this.style.loadJSON(_,e,c),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new jo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,e){if(typeof _=="string"){const c=this._requestManager.transformRequest(_,"Style");A.h(c,new AbortController).then(g=>{this._updateDiff(g.data,e)}).catch(g=>{g&&this.fire(new A.j(g))})}else typeof _=="object"&&this._updateDiff(_,e)}_updateDiff(_,e){try{this.style.setState(_,e)&&this._update(!0)}catch(c){A.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(_,e)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():A.w("There is no style added to the map.")}addSource(_,e){return this._lazyInitEmptyStyle(),this.style.addSource(_,e),this._update(!0)}isSourceLoaded(_){const e=this.style&&this.style.sourceCaches[_];if(e!==void 0)return e.loaded();this.fire(new A.j(new Error(`There is no source with ID '${_}'`)))}setTerrain(_){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),_){const e=this.style.sourceCaches[_.source];if(!e)throw new Error(`cannot load terrain, because there exists no source with ID: ${_.source}`);this.terrain===null&&e.reload();for(const c in this.style._layers){const g=this.style._layers[c];g.type==="hillshade"&&g.source===_.source&&A.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new wl(this.painter,e,_),this.painter.renderToTexture=new _r(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==_.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new A.k("terrain",{terrain:_})),this}getTerrain(){var _,e;return(e=(_=this.terrain)===null||_===void 0?void 0:_.options)!==null&&e!==void 0?e:null}areTilesLoaded(){const _=this.style&&this.style.sourceCaches;for(const e in _){const c=_[e]._tiles;for(const g in c){const a=c[g];if(a.state!=="loaded"&&a.state!=="errored")return!1}}return!0}removeSource(_){return this.style.removeSource(_),this._update(!0)}getSource(_){return this.style.getSource(_)}addImage(_,e,c={}){const{pixelRatio:g=1,sdf:a=!1,stretchX:h,stretchY:m,content:w,textFitWidth:B,textFitHeight:S}=c;if(this._lazyInitEmptyStyle(),!(e instanceof HTMLImageElement||A.b(e))){if(e.width===void 0||e.height===void 0)return this.fire(new A.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:P,height:L,data:M}=e,N=e;return this.style.addImage(_,{data:new A.R({width:P,height:L},new Uint8Array(M)),pixelRatio:g,stretchX:h,stretchY:m,content:w,textFitWidth:B,textFitHeight:S,sdf:a,version:0,userImage:N}),N.onAdd&&N.onAdd(this,_),this}}{const{width:P,height:L,data:M}=E.getImageData(e);this.style.addImage(_,{data:new A.R({width:P,height:L},M),pixelRatio:g,stretchX:h,stretchY:m,content:w,textFitWidth:B,textFitHeight:S,sdf:a,version:0})}}updateImage(_,e){const c=this.style.getImage(_);if(!c)return this.fire(new A.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const g=e instanceof HTMLImageElement||A.b(e)?E.getImageData(e):e,{width:a,height:h,data:m}=g;if(a===void 0||h===void 0)return this.fire(new A.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(a!==c.data.width||h!==c.data.height)return this.fire(new A.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const w=!(e instanceof HTMLImageElement||A.b(e));return c.data.replace(m,w),this.style.updateImage(_,c),this}getImage(_){return this.style.getImage(_)}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new A.j(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_){return ht.getImage(this._requestManager.transformRequest(_,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(_,e){return this._lazyInitEmptyStyle(),this.style.addLayer(_,e),this._update(!0)}moveLayer(_,e){return this.style.moveLayer(_,e),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(_,e,c){return this.style.setLayerZoomRange(_,e,c),this._update(!0)}setFilter(_,e,c={}){return this.style.setFilter(_,e,c),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,e,c,g={}){return this.style.setPaintProperty(_,e,c,g),this._update(!0)}getPaintProperty(_,e){return this.style.getPaintProperty(_,e)}setLayoutProperty(_,e,c,g={}){return this.style.setLayoutProperty(_,e,c,g),this._update(!0)}getLayoutProperty(_,e){return this.style.getLayoutProperty(_,e)}setGlyphs(_,e={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(_,e),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(_,e,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(_,e,c,g=>{g||this._update(!0)}),this}removeSprite(_){return this._lazyInitEmptyStyle(),this.style.removeSprite(_),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(_,e={}){return this._lazyInitEmptyStyle(),this.style.setSprite(_,e,c=>{c||this._update(!0)}),this}setLight(_,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,e),this._update(!0)}getLight(){return this.style.getLight()}setSky(_){return this._lazyInitEmptyStyle(),this.style.setSky(_),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(_,e){return this.style.setFeatureState(_,e),this._update()}removeFeatureState(_,e){return this.style.removeFeatureState(_,e),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,e=0;return this._container&&(_=this._container.clientWidth||400,e=this._container.clientHeight||300),[_,e]}_setupContainer(){const _=this._container;_.classList.add("maplibregl-map");const e=this._canvasContainer=Q.create("div","maplibregl-canvas-container",_);this._interactive&&e.classList.add("maplibregl-interactive"),this._canvas=Q.create("canvas","maplibregl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),g=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],g);const a=this._controlContainer=Q.create("div","maplibregl-control-container",_),h=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(m=>{h[m]=Q.create("div",`maplibregl-ctrl-${m} `,a)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,e,c){this._canvas.width=Math.floor(c*_),this._canvas.height=Math.floor(c*e),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${e}px`}_setupPainter(){const _={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let e=null;this._canvas.addEventListener("webglcontextcreationerror",g=>{e={requestedAttributes:_},g&&(e.statusMessage=g.statusMessage,e.type=g.type)},{once:!0});const c=this._canvas.getContext("webgl2",_)||this._canvas.getContext("webgl",_);if(!c){const g="Failed to initialize WebGL";throw e?(e.message=g,new Error(JSON.stringify(e))):new Error(g)}this.painter=new Rn(c,this.transform),T.testSupport(c)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_render(_){const e=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._removed)return;let c=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const a=this.transform.zoom,h=E.now();this.style.zoomHistory.update(a,h);const m=new A.z(a,{now:h,fadeDuration:e,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),w=m.crossFadingFactor();w===1&&w===this._crossFadingFactor||(c=!0,this._crossFadingFactor=w),this.style.update(m)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,e,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:e,showPadding:this.showPadding}),this.fire(new A.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,A.be.mark(A.bf.load),this.fire(new A.k("load"))),this.style&&(this.style.hasTransitions()||c)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const g=this._sourcesDirty||this._styleDirty||this._placementDirty;return g||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new A.k("idle")),!this._loaded||this._fullyLoaded||g||(this._fullyLoaded=!0,A.be.mark(A.bf.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var _;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ht.removeThrottleControl(this._imageQueueHandle),(_=this._resizeObserver)===null||_===void 0||_.disconnect();const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e!=null&&e.loseContext&&e.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),Q.remove(this._canvasContainer),Q.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),A.be.clearMetrics(),this._removed=!0,this.fire(new A.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,E.frameAsync(this._frameRequest).then(_=>{A.be.frame(_),this._frameRequest=null,this._render(_)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get version(){return pd}getCameraTargetElevation(){return this.transform.elevation}},p.MapMouseEvent=Or,p.MapTouchEvent=ei,p.MapWheelEvent=vi,p.Marker=_l,p.NavigationControl=class{constructor(_){this._updateZoomButtons=()=>{const e=this._map.getZoom(),c=e===this._map.getMaxZoom(),g=e===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())},this._rotateCompassArrow=()=>{const e=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=e},this._setButtonTitle=(e,c)=>{const g=this._map._getUIString(`NavigationControl.${c}`);e.title=g,e.setAttribute("aria-label",g)},this.options=A.e({},ju,_),this._container=Q.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",e=>e.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",e=>this._map.zoomIn({},{originalEvent:e})),Q.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",e=>this._map.zoomOut({},{originalEvent:e})),Q.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})}),this._compassIcon=Q.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new zc(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){Q.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,e){const c=Q.create("button",_,this._container);return c.type="button",c.addEventListener("click",e),c}},p.Popup=class extends A.E{constructor(_){super(),this.remove=()=>(this._content&&Q.remove(this._content),this._container&&(Q.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new A.k("close"))),this),this._onMouseUp=e=>{this._update(e.point)},this._onMouseMove=e=>{this._update(e.point)},this._onDrag=e=>{this._update(e.point)},this._update=e=>{var c;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=Q.create("div","maplibregl-popup",this._map.getContainer()),this._tip=Q.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const w of this.options.className.split(" "))this._container.classList.add(w);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?LA(this._lngLat,this._flatPos,this._map.transform):(c=this._lngLat)===null||c===void 0?void 0:c.wrap(),this._trackPointer&&!e)return;const g=this._flatPos=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&e?e:this._map.transform.locationPoint(this._lngLat));let a=this.options.anchor;const h=Gu(this.options.offset);if(!a){const w=this._container.offsetWidth,B=this._container.offsetHeight;let S;S=g.y+h.bottom.y<B?["top"]:g.y>this._map.transform.height-B?["bottom"]:[],g.x<w/2?S.push("left"):g.x>this._map.transform.width-w/2&&S.push("right"),a=S.length===0?"bottom":S.join("-")}let m=g.add(h[a]);this.options.subpixelPositioning||(m=m.round()),Q.setTransform(this._container,`${QA[a]} translate(${m.x}px,${m.y}px)`),Ka(this._container,a,"popup")},this._onClose=()=>{this.remove()},this.options=A.e(Object.create($u),_)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new A.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=A.N.convert(_),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){const e=document.createDocumentFragment(),c=document.createElement("body");let g;for(c.innerHTML=_;g=c.firstChild,g;)e.appendChild(g);return this.setDOMContent(e)}getMaxWidth(){var _;return(_=this._container)===null||_===void 0?void 0:_.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=Q.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){return this._container&&this._container.classList.add(_),this}removeClassName(_){return this._container&&this._container.classList.remove(_),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}setSubpixelPositioning(_){this.options.subpixelPositioning=_}_createCloseButton(){this.options.closeButton&&(this._closeButton=Q.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(qu);_&&_.focus()}},p.RasterDEMTileSource=ge,p.RasterTileSource=Ae,p.ScaleControl=class{constructor(_){this._onMove=()=>{rc(this._map,this._container,this.options)},this.setUnit=e=>{this.options.unit=e,rc(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},ec),_)}getDefaultPosition(){return"bottom-left"}onAdd(_){return this._map=_,this._container=Q.create("div","maplibregl-ctrl maplibregl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){Q.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},p.ScrollZoomHandler=Jl,p.Style=jo,p.TerrainControl=class{constructor(_){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=_}onAdd(_){return this._map=_,this._container=Q.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=Q.create("button","maplibregl-ctrl-terrain",this._container),Q.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){Q.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},p.TwoFingersTouchPitchHandler=ml,p.TwoFingersTouchRotateHandler=Eo,p.TwoFingersTouchZoomHandler=IA,p.TwoFingersTouchZoomRotateHandler=is,p.VectorTileSource=Ke,p.VideoSource=Xe,p.addSourceType=(_,e)=>A._(void 0,void 0,void 0,function*(){if(br(_))throw new Error(`A source type called "${_}" already exists.`);((c,g)=>{yr[c]=g})(_,e)}),p.clearPrewarmedResources=function(){const _=Rt;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(_t),Rt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},p.getMaxParallelImageRequests=function(){return A.a.MAX_PARALLEL_IMAGE_REQUESTS},p.getRTLTextPluginStatus=function(){return Ie().getRTLTextPluginStatus()},p.getVersion=function(){return js},p.getWorkerCount=function(){return St.workerCount},p.getWorkerUrl=function(){return A.a.WORKER_URL},p.importScriptInWorkers=function(_){return _e().broadcast("IS",_)},p.prewarm=function(){re().acquire(_t)},p.setMaxParallelImageRequests=function(_){A.a.MAX_PARALLEL_IMAGE_REQUESTS=_},p.setRTLTextPlugin=function(_,e){return Ie().setRTLTextPlugin(_,e)},p.setWorkerCount=function(_){St.workerCount=_},p.setWorkerUrl=function(_){A.a.WORKER_URL=_}});var d=i;return d})})(qy);var WC=qy.exports,YC=Object.defineProperty,JC=(n,t,i)=>t in n?YC(n,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[t]=i,ni=(n,t,i)=>JC(n,typeof t!="symbol"?t+"":t,i);let t4=class{constructor(t){ni(this,"map"),ni(this,"width"),ni(this,"height"),ni(this,"svgCanvas"),ni(this,"xLine"),ni(this,"yLine"),ni(this,"color","#535353"),this.map=t,this.mapResize=this.mapResize.bind(this)}create(){this.updateValues(),this.map!==void 0?(this.map.on("resize",this.mapResize),this.createCanvas(this.map.getCanvasContainer())):console.error("map object is null")}updateValues(){var t,i;this.width=(t=this.map)==null?void 0:t.getCanvas().clientWidth,this.height=(i=this.map)==null?void 0:i.getCanvas().clientHeight}mapResize(){this.updateValues(),this.updateCanvas()}updateCanvas(){if(this.svgCanvas!==void 0&&this.yLine!==void 0&&this.xLine!==void 0&&this.width!==void 0&&this.height!==void 0){this.svgCanvas.setAttribute("width",`${this.width}px`),this.svgCanvas.setAttribute("height",`${this.height}px`);const t=this.width/2,i=this.height/2;this.yLine.setAttribute("x1",`${t}px`),this.yLine.setAttribute("y1","0px"),this.yLine.setAttribute("x2",`${t}px`),this.yLine.setAttribute("y2",`${this.height}px`),this.xLine.setAttribute("x1","0px"),this.xLine.setAttribute("y1",`${i}px`),this.xLine.setAttribute("x2",`${this.width}px`),this.xLine.setAttribute("y2",`${i}px`)}else console.error("element value is null")}createCanvas(t){if(this.width!==void 0&&this.height!==void 0){const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.style.position="relative",i.setAttribute("width",`${this.width}px`),i.setAttribute("height",`${this.height}px`);const s=this.width/2,u=this.height/2;this.yLine=i.appendChild(this.createLine(s,0,s,this.height,this.color,"2px")),this.xLine=i.appendChild(this.createLine(0,u,this.width,u,this.color,"2px")),t==null||t.appendChild(i),this.svgCanvas=i}}createLine(t,i,s,u,d,p){const A=document.createElementNS("http://www.w3.org/2000/svg","line");return A.setAttribute("x1",t),A.setAttribute("y1",i),A.setAttribute("x2",s),A.setAttribute("y2",u),A.setAttribute("stroke-dasharray","5,5"),A.setAttribute("stroke",d),A.setAttribute("stroke-width",p),A}destroy(){this.xLine!==void 0&&(this.xLine.remove(),this.xLine=void 0),this.yLine!==void 0&&(this.yLine.remove(),this.yLine=void 0),this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0),this.map!==void 0&&(this.map.off("resize",this.mapResize),this.map=void 0)}};const dg={72:72,96:96,200:200,300:300,400:400},Wa={JPEG:"jpg",PNG:"png",PDF:"pdf",SVG:"svg"},ph={Landscape:"landscape",Portrait:"portrait"},Il={LARGE:[474,406.2],LANDSCAPE:[609.4,304.65],EXTRA:[507.75,406.2],A_FORMAT:[440,14,406.2],A_FORMAT_LANDSCAPE:[574.55,175.07],A4:[297,210]},cc={in:"in",mm:"mm"};let e4=class{constructor(t){ni(this,"map"),ni(this,"width"),ni(this,"height"),ni(this,"unit"),ni(this,"svgCanvas"),ni(this,"svgPath");var i,s,u;if(this.map=t,this.map===void 0)return;this.mapResize=this.mapResize.bind(this),this.map.on("resize",this.mapResize);const d=(i=this.map)==null?void 0:i.getCanvas().clientWidth,p=(s=this.map)==null?void 0:s.getCanvas().clientHeight,A=document.createElementNS("http://www.w3.org/2000/svg","svg");A.style.position="absolute",A.style.top="0px",A.style.left="0px",A.setAttribute("width",`${d}px`),A.setAttribute("height",`${p}px`);const v=document.createElementNS("http://www.w3.org/2000/svg","path");v.setAttribute("style","fill:#888888;stroke-width:0"),v.setAttribute("fill-opacity","0.5"),A.append(v),(u=this.map)==null||u.getCanvasContainer().appendChild(A),this.svgCanvas=A,this.svgPath=v}mapResize(){this.generateCutOut()}updateArea(t,i){this.width=t,this.height=i,this.unit=cc.mm,this.generateCutOut()}generateCutOut(){var t,i;if(this.map===void 0||this.svgCanvas===void 0||this.svgPath===void 0)return;const s=this.toPixels(this.width),u=this.toPixels(this.height),d=(t=this.map)==null?void 0:t.getCanvas().clientWidth,p=(i=this.map)==null?void 0:i.getCanvas().clientHeight,A=d/2-s/2,v=A+s,C=p/2-u/2,F=C+u;this.svgCanvas.setAttribute("width",`${d}px`),this.svgCanvas.setAttribute("height",`${p}px`),this.svgPath.setAttribute("d",`M 0 0 L ${d} 0 L ${d} ${p} L 0 ${p} M ${A} ${C} L ${A} ${F} L ${v} ${F} L ${v} ${C}`)}destroy(){this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0),this.map!==void 0&&(this.map=void 0)}toPixels(t,i=96){return this.unit===cc.mm&&(i/=25.4),i*t}};const Gy={PageSize:"Page Size",PageOrientation:"Page Orientation",Format:"Format",DPI:"DPI",Generate:"Generate",LanguageName:"English",LanguageCode:"en"},r4={PageSize:"Taille de page",PageOrientation:"Orientation de la page",Format:"Format",DPI:"DPI",Generate:"Gnrer",LanguageName:"Franais",LanguageCode:"fr"},i4={PageSize:"Sivukoko",PageOrientation:"Sivun suunta",Format:"Muoto",DPI:"DPI",Generate:"Generoi",LanguageName:"Suomalainen",LanguageCode:"fi"},n4={PageSize:"Papierformat",PageOrientation:"Papierausrichtung",Format:"Dateiformat",DPI:"Druckauflsung",Generate:"Erstellen",LanguageName:"Deutsch",LanguageCode:"de"},s4={PageSize:"Sidstorlek",PageOrientation:"Sidorientering",Format:"Format",DPI:"DPI",Generate:"Generera",LanguageName:"Svenska",LanguageCode:"sv"},o4={PageSize:"Tamao de pgina",PageOrientation:"Orientacin de pgina",Format:"Formato",DPI:"DPI",Generate:"Generar",LanguageName:"Espaola",LanguageCode:"es"},a4={PageSize:"Mida",PageOrientation:"Orientaci",Format:"Format",DPI:"DPI",Generate:"Genera",LanguageName:"Catalan",LanguageCode:"ca"},A4={PageSize:"Kch thc trang",PageOrientation:"Loi trang",Format:"nh dng",DPI:"Mt  im nh (DPI)",Generate:"To",LanguageName:"Ting Vit",LanguageCode:"vi"},l4={PageSize:" ",PageOrientation:" ",Format:"",DPI:"DPI",Generate:"",LanguageName:"",LanguageCode:"uk"},c4={PageSize:"",PageOrientation:"",Format:"",DPI:"",Generate:"",LanguageName:"",LanguageCode:"zhHans"},u4={PageSize:"",PageOrientation:"",Format:"",DPI:"",Generate:"",LanguageName:"",LanguageCode:"zhHant"},h4={PageSize:"",PageOrientation:"",Format:"",DPI:"DPI",Generate:"",LanguageName:"",LanguageCode:"ja"},d4={PageSize:"Tamanho da pgina",PageOrientation:"Orientao da pgina",Format:"Formato",DPI:"DPI",Generate:"Gerar",LanguageName:"Portugus",LanguageCode:"pt"},p4=[Gy,r4,i4,n4,s4,o4,a4,A4,l4,c4,u4,h4,d4],f4=n=>p4.find(t=>t.LanguageCode===n)??Gy;(function(n){var t={};function i(s){if(t[s])return t[s].exports;var u=t[s]={i:s,l:!1,exports:{}};return n[s].call(u.exports,u,u.exports,i),u.l=!0,u.exports}i.m=n,i.c=t,i.d=function(s,u,d){i.o(s,u)||Object.defineProperty(s,u,{enumerable:!0,get:d})},i.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,u){if(1&u&&(s=i(s)),8&u||4&u&&typeof s=="object"&&s&&s.__esModule)return s;var d=Object.create(null);if(i.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:s}),2&u&&typeof s!="string")for(var p in s)i.d(d,p,(function(A){return s[A]}).bind(null,p));return d},i.n=function(s){var u=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(u,"a",u),u},i.o=function(s,u){return Object.prototype.hasOwnProperty.call(s,u)},i.p="",i(i.s=0)})([function(n,t,i){n.exports=i(1)},function(n,t){function i(u,d){for(var p=0;p<d.length;p++){var A=d[p];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(u,A.key,A)}}var s=function(){function u(){(function(A,v){if(!(A instanceof v))throw new TypeError("Cannot call a class as a function")})(this,u),this.options={overlayBackgroundColor:"#666666",overlayOpacity:.6,spinnerIcon:"ball-circus",spinnerColor:"#000",spinnerSize:"3x",overlayIDName:"overlay",spinnerIDName:"spinner",offsetY:0,offsetX:0,lockScroll:!1,containerID:null,spinnerZIndex:99999,overlayZIndex:99998},this.stylesheetBaseURL="https://cdn.jsdelivr.net/npm/load-awesome@1.1.0/css/",this.spinner=null,this.spinnerStylesheetURL=null,this.numberOfEmptyDivForSpinner={"ball-8bits":16,"ball-atom":4,"ball-beat":3,"ball-circus":5,"ball-climbing-dot":1,"ball-clip-rotate":1,"ball-clip-rotate-multiple":2,"ball-clip-rotate-pulse":2,"ball-elastic-dots":5,"ball-fall":3,"ball-fussion":4,"ball-grid-beat":9,"ball-grid-pulse":9,"ball-newton-cradle":4,"ball-pulse":3,"ball-pulse-rise":5,"ball-pulse-sync":3,"ball-rotate":1,"ball-running-dots":5,"ball-scale":1,"ball-scale-multiple":3,"ball-scale-pulse":2,"ball-scale-ripple":1,"ball-scale-ripple-multiple":3,"ball-spin":8,"ball-spin-clockwise":8,"ball-spin-clockwise-fade":8,"ball-spin-clockwise-fade-rotating":8,"ball-spin-fade":8,"ball-spin-fade-rotating":8,"ball-spin-rotate":2,"ball-square-clockwise-spin":8,"ball-square-spin":8,"ball-triangle-path":3,"ball-zig-zag":2,"ball-zig-zag-deflect":2,cog:1,"cube-transition":2,fire:3,"line-scale":5,"line-scale-party":5,"line-scale-pulse-out":5,"line-scale-pulse-out-rapid":5,"line-spin-clockwise-fade":8,"line-spin-clockwise-fade-rotating":8,"line-spin-fade":8,"line-spin-fade-rotating":8,pacman:6,"square-jelly-box":2,"square-loader":1,"square-spin":1,timer:1,"triangle-skew-spin":1}}var d,p;return d=u,(p=[{key:"show",value:function(A){this.setOptions(A),this.addSpinnerStylesheet(),this.generateSpinnerElement(),this.options.lockScroll&&(document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden"),this.generateAndAddOverlayElement()}},{key:"hide",value:function(){this.options.lockScroll&&(document.body.style.overflow="",document.documentElement.style.overflow="");var A=document.getElementById("loading-overlay-stylesheet");A&&(A.disabled=!0,A.parentNode.removeChild(A),document.getElementById(this.options.overlayIDName).remove(),document.getElementById(this.options.spinnerIDName).remove())}},{key:"setOptions",value:function(A){if(A!==void 0)for(var v in A)this.options[v]=A[v]}},{key:"generateAndAddOverlayElement",value:function(){var A="50%";this.options.offsetX!==0&&(A="calc(50% + "+this.options.offsetX+")");var v="50%";if(this.options.offsetY!==0&&(v="calc(50% + "+this.options.offsetY+")"),this.options.containerID&&document.body.contains(document.getElementById(this.options.containerID))){var C='<div id="'.concat(this.options.overlayIDName,'" style="display: block !important; position: absolute; top: 0; left: 0; overflow: auto; opacity: ').concat(this.options.overlayOpacity,"; background: ").concat(this.options.overlayBackgroundColor,'; z-index: 50; width: 100%; height: 100%;"></div><div id="').concat(this.options.spinnerIDName,'" style="display: block !important; position: absolute; top: ').concat(v,"; left: ").concat(A,'; -webkit-transform: translate(-50%); -ms-transform: translate(-50%); transform: translate(-50%); z-index: 9999;">').concat(this.spinner,"</div>"),F=document.getElementById(this.options.containerID);return F.style.position="relative",void F.insertAdjacentHTML("beforeend",C)}var E='<div id="'.concat(this.options.overlayIDName,'" style="display: block !important; position: fixed; top: 0; left: 0; overflow: auto; opacity: ').concat(this.options.overlayOpacity,"; background: ").concat(this.options.overlayBackgroundColor,"; z-index: ").concat(this.options.overlayZIndex,'; width: 100%; height: 100%;"></div><div id="').concat(this.options.spinnerIDName,'" style="display: block !important; position: fixed; top: ').concat(v,"; left: ").concat(A,"; -webkit-transform: translate(-50%); -ms-transform: translate(-50%); transform: translate(-50%); z-index: ").concat(this.options.spinnerZIndex,';">').concat(this.spinner,"</div>");document.body.insertAdjacentHTML("beforeend",E)}},{key:"generateSpinnerElement",value:function(){var A=this,v=Object.keys(this.numberOfEmptyDivForSpinner).find(function(F){return F===A.options.spinnerIcon}),C=this.generateEmptyDivElement(this.numberOfEmptyDivForSpinner[v]);this.spinner='<div style="color: '.concat(this.options.spinnerColor,'" class="la-').concat(this.options.spinnerIcon," la-").concat(this.options.spinnerSize,'">').concat(C,"</div>")}},{key:"addSpinnerStylesheet",value:function(){this.setSpinnerStylesheetURL();var A=document.createElement("link");A.setAttribute("id","loading-overlay-stylesheet"),A.setAttribute("rel","stylesheet"),A.setAttribute("type","text/css"),A.setAttribute("href",this.spinnerStylesheetURL),document.getElementsByTagName("head")[0].appendChild(A)}},{key:"setSpinnerStylesheetURL",value:function(){this.spinnerStylesheetURL=this.stylesheetBaseURL+this.options.spinnerIcon+".min.css"}},{key:"generateEmptyDivElement",value:function(A){for(var v="",C=1;C<=A;C++)v+="<div></div>";return v}}])&&i(d.prototype,p),u}();window.JsLoadingOverlay=new s,n.exports=JsLoadingOverlay}]);function oi(n){"@babel/helpers - typeof";return oi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oi(n)}var Zs=Uint8Array,Ss=Uint16Array,fh=Uint32Array,Od=new Zs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Rd=new Zs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),pg=new Zs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Xy=function(n,t){for(var i=new Ss(31),s=0;s<31;++s)i[s]=t+=1<<n[s-1];for(var u=new fh(i[30]),s=1;s<30;++s)for(var d=i[s];d<i[s+1];++d)u[d]=d-i[s]<<5|s;return[i,u]},Zy=Xy(Od,2),Wy=Zy[0],fg=Zy[1];Wy[28]=258,fg[258]=28;for(var Yy=Xy(Rd,0),g4=Yy[0],Jy=Yy[1],gg=new Ss(32768),Qi=0;Qi<32768;++Qi){var El=(Qi&43690)>>>1|(Qi&21845)<<1;El=(El&52428)>>>2|(El&13107)<<2,El=(El&61680)>>>4|(El&3855)<<4,gg[Qi]=((El&65280)>>>8|(El&255)<<8)>>>1}for(var Ya=function(n,t,i){for(var s=n.length,u=0,d=new Ss(t);u<s;++u)++d[n[u]-1];var p=new Ss(t);for(u=0;u<t;++u)p[u]=p[u-1]+d[u-1]<<1;var A;if(i){A=new Ss(1<<t);var v=15-t;for(u=0;u<s;++u)if(n[u])for(var C=u<<4|n[u],F=t-n[u],E=p[n[u]-1]++<<F,Q=E|(1<<F)-1;E<=Q;++E)A[gg[E]>>>v]=C}else for(A=new Ss(s),u=0;u<s;++u)A[u]=gg[p[n[u]-1]++]>>>15-n[u];return A},Tl=new Zs(288),Qi=0;Qi<144;++Qi)Tl[Qi]=8;for(var Qi=144;Qi<256;++Qi)Tl[Qi]=9;for(var Qi=256;Qi<280;++Qi)Tl[Qi]=7;for(var Qi=280;Qi<288;++Qi)Tl[Qi]=8;for(var gh=new Zs(32),Qi=0;Qi<32;++Qi)gh[Qi]=5;var m4=Ya(Tl,9,0),y4=Ya(Tl,9,1),v4=Ya(gh,5,0),w4=Ya(gh,5,1),mg=function(n){for(var t=n[0],i=1;i<n.length;++i)n[i]>t&&(t=n[i]);return t},ha=function(n,t,i){var s=t/8>>0;return(n[s]|n[s+1]<<8)>>>(t&7)&i},yg=function(n,t){var i=t/8>>0;return(n[i]|n[i+1]<<8|n[i+2]<<16)>>>(t&7)},vg=function(n){return(n/8>>0)+(n&7&&1)},tv=function(n,t,i){(i==null||i>n.length)&&(i=n.length);var s=new(n instanceof Ss?Ss:n instanceof fh?fh:Zs)(i-t);return s.set(n.subarray(t,i)),s},_4=function(n,t,i){var s=n.length,u=!t||i,d=!i||i.i;i||(i={}),t||(t=new Zs(s*3));var p=function(Ot){var Rt=t.length;if(Ot>Rt){var Jt=new Zs(Math.max(Rt*2,Ot));Jt.set(t),t=Jt}},A=i.f||0,v=i.p||0,C=i.b||0,F=i.l,E=i.d,Q=i.m,T=i.n,V=s*8;do{if(!F){i.f=A=ha(n,v,1);var R=ha(n,v+1,3);if(v+=3,R)if(R==1)F=y4,E=w4,Q=9,T=5;else if(R==2){var W=ha(n,v,31)+257,j=ha(n,v+10,15)+4,rt=W+ha(n,v+5,31)+1;v+=14;for(var ht=new Zs(rt),Bt=new Zs(19),Et=0;Et<j;++Et)Bt[pg[Et]]=ha(n,v+Et*3,7);v+=j*3;var Tt=mg(Bt),xt=(1<<Tt)-1;if(!d&&v+rt*(Tt+7)>V)break;for(var ft=Ya(Bt,Tt,1),Et=0;Et<rt;){var Nt=ft[ha(n,v,xt)];v+=Nt&15;var jt=Nt>>>4;if(jt<16)ht[Et++]=jt;else{var at=0,ct=0;for(jt==16?(ct=3+ha(n,v,3),v+=2,at=ht[Et-1]):jt==17?(ct=3+ha(n,v,7),v+=3):jt==18&&(ct=11+ha(n,v,127),v+=7);ct--;)ht[Et++]=at}}var vt=ht.subarray(0,W),mt=ht.subarray(W);Q=mg(vt),T=mg(mt),F=Ya(vt,Q,1),E=Ya(mt,T,1)}else throw"invalid block type";else{var jt=vg(v)+4,$t=n[jt-4]|n[jt-3]<<8,Vt=jt+$t;if(Vt>s){if(d)throw"unexpected EOF";break}u&&p(C+$t),t.set(n.subarray(jt,Vt),C),i.b=C+=$t,i.p=v=Vt*8;continue}if(v>V)throw"unexpected EOF"}u&&p(C+131072);for(var Zt=(1<<Q)-1,Ht=(1<<T)-1,Yt=Q+T+18;d||v+Yt<V;){var at=F[yg(n,v)&Zt],Wt=at>>>4;if(v+=at&15,v>V)throw"unexpected EOF";if(!at)throw"invalid length/literal";if(Wt<256)t[C++]=Wt;else if(Wt==256){F=null;break}else{var me=Wt-254;if(Wt>264){var Et=Wt-257,et=Od[Et];me=ha(n,v,(1<<et)-1)+Wy[Et],v+=et}var dt=E[yg(n,v)&Ht],_t=dt>>>4;if(!dt)throw"invalid distance";v+=dt&15;var mt=g4[_t];if(_t>3){var et=Rd[_t];mt+=yg(n,v)&(1<<et)-1,v+=et}if(v>V)throw"unexpected EOF";u&&p(C+131072);for(var St=C+me;C<St;C+=4)t[C]=t[C-mt],t[C+1]=t[C+1-mt],t[C+2]=t[C+2-mt],t[C+3]=t[C+3-mt];C=St}}i.l=F,i.p=v,i.b=C,F&&(A=1,i.m=Q,i.d=E,i.n=T)}while(!A);return C==t.length?t:tv(t,0,C)},qA=function(n,t,i){i<<=t&7;var s=t/8>>0;n[s]|=i,n[s+1]|=i>>>8},mh=function(n,t,i){i<<=t&7;var s=t/8>>0;n[s]|=i,n[s+1]|=i>>>8,n[s+2]|=i>>>16},wg=function(n,t){for(var i=[],s=0;s<n.length;++s)n[s]&&i.push({s,f:n[s]});var u=i.length,d=i.slice();if(!u)return[new Zs(0),0];if(u==1){var p=new Zs(i[0].s+1);return p[i[0].s]=1,[p,1]}i.sort(function(Et,Tt){return Et.f-Tt.f}),i.push({s:-1,f:25001});var A=i[0],v=i[1],C=0,F=1,E=2;for(i[0]={s:-1,f:A.f+v.f,l:A,r:v};F!=u-1;)A=i[i[C].f<i[E].f?C++:E++],v=i[C!=F&&i[C].f<i[E].f?C++:E++],i[F++]={s:-1,f:A.f+v.f,l:A,r:v};for(var Q=d[0].s,s=1;s<u;++s)d[s].s>Q&&(Q=d[s].s);var T=new Ss(Q+1),V=_g(i[F-1],T,0);if(V>t){var s=0,R=0,W=V-t,j=1<<W;for(d.sort(function(Tt,xt){return T[xt.s]-T[Tt.s]||Tt.f-xt.f});s<u;++s){var rt=d[s].s;if(T[rt]>t)R+=j-(1<<V-T[rt]),T[rt]=t;else break}for(R>>>=W;R>0;){var ht=d[s].s;T[ht]<t?R-=1<<t-T[ht]++-1:++s}for(;s>=0&&R;--s){var Bt=d[s].s;T[Bt]==t&&(--T[Bt],++R)}V=t}return[new Zs(T),V]},_g=function(n,t,i){return n.s==-1?Math.max(_g(n.l,t,i+1),_g(n.r,t,i+1)):t[n.s]=i},ev=function(n){for(var t=n.length;t&&!n[--t];);for(var i=new Ss(++t),s=0,u=n[0],d=1,p=function(v){i[s++]=v},A=1;A<=t;++A)if(n[A]==u&&A!=t)++d;else{if(!u&&d>2){for(;d>138;d-=138)p(32754);d>2&&(p(d>10?d-11<<5|28690:d-3<<5|12305),d=0)}else if(d>3){for(p(u),--d;d>6;d-=6)p(8304);d>2&&(p(d-3<<5|8208),d=0)}for(;d--;)p(u);d=1,u=n[A]}return[i.subarray(0,s),t]},yh=function(n,t){for(var i=0,s=0;s<t.length;++s)i+=n[s]*t[s];return i},bg=function(n,t,i){var s=i.length,u=vg(t+2);n[u]=s&255,n[u+1]=s>>>8,n[u+2]=n[u]^255,n[u+3]=n[u+1]^255;for(var d=0;d<s;++d)n[u+d+4]=i[d];return(u+4+s)*8},rv=function(n,t,i,s,u,d,p,A,v,C,F){qA(t,F++,i),++u[256];for(var E=wg(u,15),Q=E[0],T=E[1],V=wg(d,15),R=V[0],W=V[1],j=ev(Q),rt=j[0],ht=j[1],Bt=ev(R),Et=Bt[0],Tt=Bt[1],xt=new Ss(19),ft=0;ft<rt.length;++ft)xt[rt[ft]&31]++;for(var ft=0;ft<Et.length;++ft)xt[Et[ft]&31]++;for(var Nt=wg(xt,7),jt=Nt[0],at=Nt[1],ct=19;ct>4&&!jt[pg[ct-1]];--ct);var vt=C+5<<3,mt=yh(u,Tl)+yh(d,gh)+p,$t=yh(u,Q)+yh(d,R)+p+14+3*ct+yh(xt,jt)+(2*xt[16]+3*xt[17]+7*xt[18]);if(vt<=mt&&vt<=$t)return bg(t,F,n.subarray(v,v+C));var Vt,Zt,Ht,Yt;if(qA(t,F,1+($t<mt)),F+=2,$t<mt){Vt=Ya(Q,T,0),Zt=Q,Ht=Ya(R,W,0),Yt=R;var Wt=Ya(jt,at,0);qA(t,F,ht-257),qA(t,F+5,Tt-1),qA(t,F+10,ct-4),F+=14;for(var ft=0;ft<ct;++ft)qA(t,F+3*ft,jt[pg[ft]]);F+=3*ct;for(var me=[rt,Et],et=0;et<2;++et)for(var dt=me[et],ft=0;ft<dt.length;++ft){var _t=dt[ft]&31;qA(t,F,Wt[_t]),F+=jt[_t],_t>15&&(qA(t,F,dt[ft]>>>5&127),F+=dt[ft]>>>12)}}else Vt=m4,Zt=Tl,Ht=v4,Yt=gh;for(var ft=0;ft<A;++ft)if(s[ft]>255){var _t=s[ft]>>>18&31;mh(t,F,Vt[_t+257]),F+=Zt[_t+257],_t>7&&(qA(t,F,s[ft]>>>23&31),F+=Od[_t]);var St=s[ft]&31;mh(t,F,Ht[St]),F+=Yt[St],St>3&&(mh(t,F,s[ft]>>>5&8191),F+=Rd[St])}else mh(t,F,Vt[s[ft]]),F+=Zt[s[ft]];return mh(t,F,Vt[256]),F+Zt[256]},b4=new fh([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),x4=function(n,t,i,s,u,d){var p=n.length,A=new Zs(s+p+5*(1+Math.floor(p/7e3))+u),v=A.subarray(s,A.length-u),C=0;if(!t||p<8)for(var F=0;F<=p;F+=65535){var E=F+65535;E<p?C=bg(v,C,n.subarray(F,E)):(v[F]=d,C=bg(v,C,n.subarray(F,p)))}else{for(var Q=b4[t-1],T=Q>>>13,V=Q&8191,R=(1<<i)-1,W=new Ss(32768),j=new Ss(R+1),rt=Math.ceil(i/3),ht=2*rt,Bt=function(je){return(n[je]^n[je+1]<<rt^n[je+2]<<ht)&R},Et=new fh(25e3),Tt=new Ss(288),xt=new Ss(32),ft=0,Nt=0,F=0,jt=0,at=0,ct=0;F<p;++F){var vt=Bt(F),mt=F&32767,$t=j[vt];if(W[mt]=$t,j[vt]=mt,at<=F){var Vt=p-F;if((ft>7e3||jt>24576)&&Vt>423){C=rv(n,v,0,Et,Tt,xt,Nt,jt,ct,F-ct,C),jt=ft=Nt=0,ct=F;for(var Zt=0;Zt<286;++Zt)Tt[Zt]=0;for(var Zt=0;Zt<30;++Zt)xt[Zt]=0}var Ht=2,Yt=0,Wt=V,me=mt-$t&32767;if(Vt>2&&vt==Bt(F-me))for(var et=Math.min(T,Vt)-1,dt=Math.min(32767,F),_t=Math.min(258,Vt);me<=dt&&--Wt&&mt!=$t;){if(n[F+Ht]==n[F+Ht-me]){for(var St=0;St<_t&&n[F+St]==n[F+St-me];++St);if(St>Ht){if(Ht=St,Yt=me,St>et)break;for(var Ot=Math.min(me,St-2),Rt=0,Zt=0;Zt<Ot;++Zt){var Jt=F-me+Zt+32768&32767,re=W[Jt],be=Jt-re+32768&32767;be>Rt&&(Rt=be,$t=Jt)}}}mt=$t,$t=W[mt],me+=mt-$t+32768&32767}if(Yt){Et[jt++]=268435456|fg[Ht]<<18|Jy[Yt];var _e=fg[Ht]&31,Te=Jy[Yt]&31;Nt+=Od[_e]+Rd[Te],++Tt[257+_e],++xt[Te],at=F+Ht,++ft}else Et[jt++]=n[F],++Tt[n[F]]}}C=rv(n,v,d,Et,Tt,xt,Nt,jt,ct,F-ct,C)}return tv(A,0,s+vg(C)+u)},B4=function(){var n=1,t=0;return{p:function(i){for(var s=n,u=t,d=i.length,p=0;p!=d;){for(var A=Math.min(p+5552,d);p<A;++p)s+=i[p],u+=s;s%=65521,u%=65521}n=s,t=u},d:function(){return(n>>>8<<16|(t&255)<<8|t>>>8)+((n&255)<<23)*2}}},C4=function(n,t,i,s,u){return x4(n,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):12+t.mem,i,s,!u)},F4=function(n,t,i){for(;i;++t)n[t]=i,i>>>=8},S4=function(n,t){var i=t.level,s=i==0?0:i<6?1:i==9?3:2;n[0]=120,n[1]=s<<6|(s?32-2*s:1)},I4=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function xg(n,t){t===void 0&&(t={});var i=B4();i.p(n);var s=C4(n,t,2,4);return S4(s,t),F4(s,s.length-4,i.d()),s}function E4(n,t){return _4((I4(n),n.subarray(2,-4)),t)}/** @license
 *
 * jsPDF - PDF Document creation from JavaScript
 * Version 2.5.1 Built on 2022-01-28T15:37:57.791Z
 *                      CommitID 00000000
 *
 * Copyright (c) 2010-2021 James Hall <james@parall.ax>, https://github.com/MrRio/jsPDF
 *               2015-2021 yWorks GmbH, http://www.yworks.com
 *               2015-2021 Lukas Hollnder <lukas.hollaender@yworks.com>, https://github.com/HackbrettXXX
 *               2016-2018 Aras Abbasi <aras.abbasi@gmail.com>
 *               2010 Aaron Spike, https://github.com/acspike
 *               2012 Willow Systems Corporation, https://github.com/willowsystems
 *               2012 Pablo Hess, https://github.com/pablohess
 *               2012 Florian Jenett, https://github.com/fjenett
 *               2013 Warren Weckesser, https://github.com/warrenweckesser
 *               2013 Youssef Beddad, https://github.com/lifof
 *               2013 Lee Driscoll, https://github.com/lsdriscoll
 *               2013 Stefan Slonevskiy, https://github.com/stefslon
 *               2013 Jeremy Morel, https://github.com/jmorel
 *               2013 Christoph Hartmann, https://github.com/chris-rock
 *               2014 Juan Pablo Gaviria, https://github.com/juanpgaviria
 *               2014 James Makes, https://github.com/dollaruw
 *               2014 Diego Casorran, https://github.com/diegocr
 *               2014 Steven Spungin, https://github.com/Flamenco
 *               2014 Kenneth Glassey, https://github.com/Gavvers
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * Contributor(s):
 *    siefkenj, ahwolf, rickygu, Midnith, saintclair, eaparango,
 *    kim3er, mfo, alnorth, Flamenco
 */var Cr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Bg(){Cr.console&&typeof Cr.console.log=="function"&&Cr.console.log.apply(Cr.console,arguments)}var Ii={log:Bg,warn:function(n){Cr.console&&(typeof Cr.console.warn=="function"?Cr.console.warn.apply(Cr.console,arguments):Bg.call(null,arguments))},error:function(n){Cr.console&&(typeof Cr.console.error=="function"?Cr.console.error.apply(Cr.console,arguments):Bg(n))}};function Cg(n,t,i){var s=new XMLHttpRequest;s.open("GET",n),s.responseType="blob",s.onload=function(){uc(s.response,t,i)},s.onerror=function(){Ii.error("could not download file")},s.send()}function iv(n){var t=new XMLHttpRequest;t.open("HEAD",n,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function zd(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(t)}}var vh,Fg,uc=Cr.saveAs||((typeof window>"u"?"undefined":oi(window))!=="object"||window!==Cr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,t,i){var s=Cr.URL||Cr.webkitURL,u=document.createElement("a");t=t||n.name||"download",u.download=t,u.rel="noopener",typeof n=="string"?(u.href=n,u.origin!==location.origin?iv(u.href)?Cg(n,t,i):zd(u,u.target="_blank"):zd(u)):(u.href=s.createObjectURL(n),setTimeout(function(){s.revokeObjectURL(u.href)},4e4),setTimeout(function(){zd(u)},0))}:"msSaveOrOpenBlob"in navigator?function(n,t,i){if(t=t||n.name||"download",typeof n=="string")if(iv(n))Cg(n,t,i);else{var s=document.createElement("a");s.href=n,s.target="_blank",setTimeout(function(){zd(s)})}else navigator.msSaveOrOpenBlob(function(u,d){return d===void 0?d={autoBom:!1}:oi(d)!=="object"&&(Ii.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}(n,i),t)}:function(n,t,i,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof n=="string")return Cg(n,t,i);var u=n.type==="application/octet-stream",d=/constructor/i.test(Cr.HTMLElement)||Cr.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||u&&d)&&(typeof FileReader>"u"?"undefined":oi(FileReader))==="object"){var A=new FileReader;A.onloadend=function(){var F=A.result;F=p?F:F.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=F:location=F,s=null},A.readAsDataURL(n)}else{var v=Cr.URL||Cr.webkitURL,C=v.createObjectURL(n);s?s.location=C:location.href=C,s=null,setTimeout(function(){v.revokeObjectURL(C)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function nv(n){var t;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var i=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(A){return[parseInt(A[1]),parseInt(A[2]),parseInt(A[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(A){return[parseInt(A[1],16),parseInt(A[2],16),parseInt(A[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(A){return[parseInt(A[1]+A[1],16),parseInt(A[2]+A[2],16),parseInt(A[3]+A[3],16)]}}],s=0;s<i.length;s++){var u=i[s].re,d=i[s].process,p=u.exec(n);p&&(t=d(p),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var A=this.r.toString(16),v=this.g.toString(16),C=this.b.toString(16);return A.length==1&&(A="0"+A),v.length==1&&(v="0"+v),C.length==1&&(C="0"+C),"#"+A+v+C}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Sg(n,t){var i=n[0],s=n[1],u=n[2],d=n[3];i=ls(i,s,u,d,t[0],7,-680876936),d=ls(d,i,s,u,t[1],12,-389564586),u=ls(u,d,i,s,t[2],17,606105819),s=ls(s,u,d,i,t[3],22,-1044525330),i=ls(i,s,u,d,t[4],7,-176418897),d=ls(d,i,s,u,t[5],12,1200080426),u=ls(u,d,i,s,t[6],17,-1473231341),s=ls(s,u,d,i,t[7],22,-45705983),i=ls(i,s,u,d,t[8],7,1770035416),d=ls(d,i,s,u,t[9],12,-1958414417),u=ls(u,d,i,s,t[10],17,-42063),s=ls(s,u,d,i,t[11],22,-1990404162),i=ls(i,s,u,d,t[12],7,1804603682),d=ls(d,i,s,u,t[13],12,-40341101),u=ls(u,d,i,s,t[14],17,-1502002290),i=cs(i,s=ls(s,u,d,i,t[15],22,1236535329),u,d,t[1],5,-165796510),d=cs(d,i,s,u,t[6],9,-1069501632),u=cs(u,d,i,s,t[11],14,643717713),s=cs(s,u,d,i,t[0],20,-373897302),i=cs(i,s,u,d,t[5],5,-701558691),d=cs(d,i,s,u,t[10],9,38016083),u=cs(u,d,i,s,t[15],14,-660478335),s=cs(s,u,d,i,t[4],20,-405537848),i=cs(i,s,u,d,t[9],5,568446438),d=cs(d,i,s,u,t[14],9,-1019803690),u=cs(u,d,i,s,t[3],14,-187363961),s=cs(s,u,d,i,t[8],20,1163531501),i=cs(i,s,u,d,t[13],5,-1444681467),d=cs(d,i,s,u,t[2],9,-51403784),u=cs(u,d,i,s,t[7],14,1735328473),i=us(i,s=cs(s,u,d,i,t[12],20,-1926607734),u,d,t[5],4,-378558),d=us(d,i,s,u,t[8],11,-2022574463),u=us(u,d,i,s,t[11],16,1839030562),s=us(s,u,d,i,t[14],23,-35309556),i=us(i,s,u,d,t[1],4,-1530992060),d=us(d,i,s,u,t[4],11,1272893353),u=us(u,d,i,s,t[7],16,-155497632),s=us(s,u,d,i,t[10],23,-1094730640),i=us(i,s,u,d,t[13],4,681279174),d=us(d,i,s,u,t[0],11,-358537222),u=us(u,d,i,s,t[3],16,-722521979),s=us(s,u,d,i,t[6],23,76029189),i=us(i,s,u,d,t[9],4,-640364487),d=us(d,i,s,u,t[12],11,-421815835),u=us(u,d,i,s,t[15],16,530742520),i=hs(i,s=us(s,u,d,i,t[2],23,-995338651),u,d,t[0],6,-198630844),d=hs(d,i,s,u,t[7],10,1126891415),u=hs(u,d,i,s,t[14],15,-1416354905),s=hs(s,u,d,i,t[5],21,-57434055),i=hs(i,s,u,d,t[12],6,1700485571),d=hs(d,i,s,u,t[3],10,-1894986606),u=hs(u,d,i,s,t[10],15,-1051523),s=hs(s,u,d,i,t[1],21,-2054922799),i=hs(i,s,u,d,t[8],6,1873313359),d=hs(d,i,s,u,t[15],10,-30611744),u=hs(u,d,i,s,t[6],15,-1560198380),s=hs(s,u,d,i,t[13],21,1309151649),i=hs(i,s,u,d,t[4],6,-145523070),d=hs(d,i,s,u,t[11],10,-1120210379),u=hs(u,d,i,s,t[2],15,718787259),s=hs(s,u,d,i,t[9],21,-343485551),n[0]=Ul(i,n[0]),n[1]=Ul(s,n[1]),n[2]=Ul(u,n[2]),n[3]=Ul(d,n[3])}function Hd(n,t,i,s,u,d){return t=Ul(Ul(t,n),Ul(s,d)),Ul(t<<u|t>>>32-u,i)}function ls(n,t,i,s,u,d,p){return Hd(t&i|~t&s,n,t,u,d,p)}function cs(n,t,i,s,u,d,p){return Hd(t&s|i&~s,n,t,u,d,p)}function us(n,t,i,s,u,d,p){return Hd(t^i^s,n,t,u,d,p)}function hs(n,t,i,s,u,d,p){return Hd(i^(t|~s),n,t,u,d,p)}function sv(n){var t,i=n.length,s=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=n.length;t+=64)Sg(s,T4(n.substring(t-64,t)));n=n.substring(t-64);var u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<n.length;t++)u[t>>2]|=n.charCodeAt(t)<<(t%4<<3);if(u[t>>2]|=128<<(t%4<<3),t>55)for(Sg(s,u),t=0;t<16;t++)u[t]=0;return u[14]=8*i,Sg(s,u),s}function T4(n){var t,i=[];for(t=0;t<64;t+=4)i[t>>2]=n.charCodeAt(t)+(n.charCodeAt(t+1)<<8)+(n.charCodeAt(t+2)<<16)+(n.charCodeAt(t+3)<<24);return i}vh=Cr.atob.bind(Cr),Fg=Cr.btoa.bind(Cr);var ov="0123456789abcdef".split("");function U4(n){for(var t="",i=0;i<4;i++)t+=ov[n>>8*i+4&15]+ov[n>>8*i&15];return t}function P4(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Ig(n){return sv(n).map(P4).join("")}var L4=function(n){for(var t=0;t<n.length;t++)n[t]=U4(n[t]);return n.join("")}(sv("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ul(n,t){if(L4){var i=(65535&n)+(65535&t);return(n>>16)+(t>>16)+(i>>16)<<16|65535&i}return n+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Eg(n,t){var i,s,u,d;if(n!==i){for(var p=(u=n,d=1+(256/n.length>>0),new Array(d+1).join(u)),A=[],v=0;v<256;v++)A[v]=v;var C=0;for(v=0;v<256;v++){var F=A[v];C=(C+F+p.charCodeAt(v))%256,A[v]=A[C],A[C]=F}i=n,s=A}else A=s;var E=t.length,Q=0,T=0,V="";for(v=0;v<E;v++)T=(T+(F=A[Q=(Q+1)%256]))%256,A[Q]=A[T],A[T]=F,p=A[(A[Q]+A[T])%256],V+=String.fromCharCode(t.charCodeAt(v)^p);return V}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var av={print:4,modify:8,copy:16,"annot-forms":32};function Jc(n,t,i,s){this.v=1,this.r=2;var u=192;n.forEach(function(A){if(av.perm!==void 0)throw new Error("Invalid permission: "+A);u+=av[A]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var d=(t+this.padding).substr(0,32),p=(i+this.padding).substr(0,32);this.O=this.processOwnerPassword(d,p),this.P=-(1+(255^u)),this.encryptionKey=Ig(d+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=Eg(this.encryptionKey,this.padding)}function tu(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var t="",i=n.length,s=0;s<i;s++){var u=n.charCodeAt(s);u<33||u===35||u===37||u===40||u===41||u===47||u===60||u===62||u===91||u===93||u===123||u===125||u>126?t+="#"+("0"+u.toString(16)).slice(-2):t+=n[s]}return t}function Av(n){if(oi(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(i,s,u){if(u=u||!1,typeof i!="string"||typeof s!="function"||typeof u!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(i)||(t[i]={});var d=Math.random().toString(35);return t[i][d]=[s,!!u],d},this.unsubscribe=function(i){for(var s in t)if(t[s][i])return delete t[s][i],Object.keys(t[s]).length===0&&delete t[s],!0;return!1},this.publish=function(i){if(t.hasOwnProperty(i)){var s=Array.prototype.slice.call(arguments,1),u=[];for(var d in t[i]){var p=t[i][d];try{p[0].apply(n,s)}catch(A){Cr.console&&Ii.error("jsPDF PubSub Error",A.message,A)}p[1]&&u.push(d)}u.length&&u.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Vd(n){if(!(this instanceof Vd))return new Vd(n);var t="opacity,stroke-opacity".split(",");for(var i in n)n.hasOwnProperty(i)&&t.indexOf(i)>=0&&(this[i]=n[i]);this.id="",this.objectNumber=-1}function lv(n,t){this.gState=n,this.matrix=t,this.id="",this.objectNumber=-1}function hc(n,t,i,s,u){if(!(this instanceof hc))return new hc(n,t,i,s,u);this.type=n==="axial"?2:3,this.coords=t,this.colors=i,lv.call(this,s,u)}function eu(n,t,i,s,u){if(!(this instanceof eu))return new eu(n,t,i,s,u);this.boundingBox=n,this.xStep=t,this.yStep=i,this.stream="",this.cloneIndex=0,lv.call(this,s,u)}function Fr(n){var t,i=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],u=arguments[2],d=arguments[3],p=[],A=1,v=16,C="S",F=null;oi(n=n||{})==="object"&&(i=n.orientation,s=n.unit||s,u=n.format||u,d=n.compress||n.compressPdf||d,(F=n.encryption||null)!==null&&(F.userPassword=F.userPassword||"",F.ownerPassword=F.ownerPassword||"",F.userPermissions=F.userPermissions||[]),A=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(t=n.precision),n.floatPrecision!==void 0&&(v=n.floatPrecision),C=n.defaultPathOperation||"S"),p=n.filters||(d===!0?["FlateEncode"]:p),s=s||"mm",i=(""+(i||"P")).toLowerCase();var E=n.putOnlyUsedFonts||!1,Q={},T={internal:{},__private__:{}};T.__private__.PubSub=Av;var V="1.3",R=T.__private__.getPdfVersion=function(){return V};T.__private__.setPdfVersion=function(k){V=k};var W={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};T.__private__.getPageFormats=function(){return W};var j=T.__private__.getPageFormat=function(k){return W[k]};u=u||"a4";var rt={COMPAT:"compat",ADVANCED:"advanced"},ht=rt.COMPAT;function Bt(){this.saveGraphicsState(),nt(new Ut(Ie,0,0,-Ie,0,Xo()*Ie).toString()+" cm"),this.setFontSize(this.getFontSize()/Ie),C="n",ht=rt.ADVANCED}function Et(){this.restoreGraphicsState(),C="S",ht=rt.COMPAT}var Tt=T.__private__.combineFontStyleAndFontWeight=function(k,J){if(k=="bold"&&J=="normal"||k=="bold"&&J==400||k=="normal"&&J=="italic"||k=="bold"&&J=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return J&&(k=J==400||J==="normal"?k==="italic"?"italic":"normal":J!=700&&J!=="bold"||k!=="normal"?(J==700?"bold":J)+""+k:"bold"),k};T.advancedAPI=function(k){var J=ht===rt.COMPAT;return J&&Bt.call(this),typeof k!="function"||(k(this),J&&Et.call(this)),this},T.compatAPI=function(k){var J=ht===rt.ADVANCED;return J&&Et.call(this),typeof k!="function"||(k(this),J&&Bt.call(this)),this},T.isAdvancedAPI=function(){return ht===rt.ADVANCED};var xt,ft=function(k){if(ht!==rt.ADVANCED)throw new Error(k+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Nt=T.roundToPrecision=T.__private__.roundToPrecision=function(k,J){var bt=t||J;if(isNaN(k)||isNaN(bt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return k.toFixed(bt).replace(/0+$/,"")};xt=T.hpf=T.__private__.hpf=typeof v=="number"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return Nt(k,v)}:v==="smart"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return Nt(k,k>-1&&k<1?16:5)}:function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return Nt(k,16)};var jt=T.f2=T.__private__.f2=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f2");return Nt(k,2)},at=T.__private__.f3=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f3");return Nt(k,3)},ct=T.scale=T.__private__.scale=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.scale");return ht===rt.COMPAT?k*Ie:ht===rt.ADVANCED?k:void 0},vt=function(k){return ht===rt.COMPAT?Xo()-k:ht===rt.ADVANCED?k:void 0},mt=function(k){return ct(vt(k))};T.__private__.setPrecision=T.setPrecision=function(k){typeof parseInt(k,10)=="number"&&(t=parseInt(k,10))};var $t,Vt="00000000000000000000000000000000",Zt=T.__private__.getFileId=function(){return Vt},Ht=T.__private__.setFileId=function(k){return Vt=k!==void 0&&/^[a-fA-F0-9]{32}$/.test(k)?k.toUpperCase():Vt.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),F!==null&&(Ei=new Jc(F.userPermissions,F.userPassword,F.ownerPassword,Vt)),Vt};T.setFileId=function(k){return Ht(k),this},T.getFileId=function(){return Zt()};var Yt=T.__private__.convertDateToPDFDate=function(k){var J=k.getTimezoneOffset(),bt=J<0?"+":"-",Mt=Math.floor(Math.abs(J/60)),Gt=Math.abs(J%60),ae=[bt,_t(Mt),"'",_t(Gt),"'"].join("");return["D:",k.getFullYear(),_t(k.getMonth()+1),_t(k.getDate()),_t(k.getHours()),_t(k.getMinutes()),_t(k.getSeconds()),ae].join("")},Wt=T.__private__.convertPDFDateToDate=function(k){var J=parseInt(k.substr(2,4),10),bt=parseInt(k.substr(6,2),10)-1,Mt=parseInt(k.substr(8,2),10),Gt=parseInt(k.substr(10,2),10),ae=parseInt(k.substr(12,2),10),xe=parseInt(k.substr(14,2),10);return new Date(J,bt,Mt,Gt,ae,xe,0)},me=T.__private__.setCreationDate=function(k){var J;if(k===void 0&&(k=new Date),k instanceof Date)J=Yt(k);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(k))throw new Error("Invalid argument passed to jsPDF.setCreationDate");J=k}return $t=J},et=T.__private__.getCreationDate=function(k){var J=$t;return k==="jsDate"&&(J=Wt($t)),J};T.setCreationDate=function(k){return me(k),this},T.getCreationDate=function(k){return et(k)};var dt,_t=T.__private__.padd2=function(k){return("0"+parseInt(k)).slice(-2)},St=T.__private__.padd2Hex=function(k){return("00"+(k=k.toString())).substr(k.length)},Ot=0,Rt=[],Jt=[],re=0,be=[],_e=[],Te=!1,Qe=Jt,je=function(){Ot=0,re=0,Jt=[],Rt=[],be=[],ar=pe(),xr=pe()};T.__private__.setCustomOutputDestination=function(k){Te=!0,Qe=k};var oe=function(k){Te||(Qe=k)};T.__private__.resetCustomOutputDestination=function(){Te=!1,Qe=Jt};var nt=T.__private__.out=function(k){return k=k.toString(),re+=k.length+1,Qe.push(k),Qe},cr=T.__private__.write=function(k){return nt(arguments.length===1?k.toString():Array.prototype.join.call(arguments," "))},Ke=T.__private__.getArrayBuffer=function(k){for(var J=k.length,bt=new ArrayBuffer(J),Mt=new Uint8Array(bt);J--;)Mt[J]=k.charCodeAt(J);return bt},Ae=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];T.__private__.getStandardFonts=function(){return Ae};var ge=n.fontSize||16;T.__private__.setFontSize=T.setFontSize=function(k){return ge=ht===rt.ADVANCED?k/Ie:k,this};var Se,Ce=T.__private__.getFontSize=T.getFontSize=function(){return ht===rt.COMPAT?ge:ge*Ie},He=n.R2L||!1;T.__private__.setR2L=T.setR2L=function(k){return He=k,this},T.__private__.getR2L=T.getR2L=function(){return He};var Xe,nr=T.__private__.setZoomMode=function(k){var J=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(k))Se=k;else if(isNaN(k)){if(J.indexOf(k)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+k+'" is not recognized.');Se=k}else Se=parseInt(k,10)};T.__private__.getZoomMode=function(){return Se};var yr,br=T.__private__.setPageMode=function(k){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(k)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+k+'" is not recognized.');Xe=k};T.__private__.getPageMode=function(){return Xe};var ce=T.__private__.setLayoutMode=function(k){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(k)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+k+'" is not recognized.');yr=k};T.__private__.getLayoutMode=function(){return yr},T.__private__.setDisplayMode=T.setDisplayMode=function(k,J,bt){return nr(k),ce(J),br(bt),this};var Je={title:"",subject:"",author:"",keywords:"",creator:""};T.__private__.getDocumentProperty=function(k){if(Object.keys(Je).indexOf(k)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Je[k]},T.__private__.getDocumentProperties=function(){return Je},T.__private__.setDocumentProperties=T.setProperties=T.setDocumentProperties=function(k){for(var J in Je)Je.hasOwnProperty(J)&&k[J]&&(Je[J]=k[J]);return this},T.__private__.setDocumentProperty=function(k,J){if(Object.keys(Je).indexOf(k)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Je[k]=J};var sr,Ie,Xr,he,rr,Ee={},vr={},ti=[],Pe={},mi={},Rr={},ri={},jr=null,gt=0,K=[],q=new Av(T),At=n.hotfixes||[],pt={},Pt={},Dt=[],Ut=function k(J,bt,Mt,Gt,ae,xe){if(!(this instanceof k))return new k(J,bt,Mt,Gt,ae,xe);isNaN(J)&&(J=1),isNaN(bt)&&(bt=0),isNaN(Mt)&&(Mt=0),isNaN(Gt)&&(Gt=1),isNaN(ae)&&(ae=0),isNaN(xe)&&(xe=0),this._matrix=[J,bt,Mt,Gt,ae,xe]};Object.defineProperty(Ut.prototype,"sx",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(Ut.prototype,"shy",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(Ut.prototype,"shx",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(Ut.prototype,"sy",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(Ut.prototype,"tx",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(Ut.prototype,"ty",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(Ut.prototype,"a",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(Ut.prototype,"b",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(Ut.prototype,"c",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(Ut.prototype,"d",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(Ut.prototype,"e",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(Ut.prototype,"f",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(Ut.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ut.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ut.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ut.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ut.prototype.join=function(k){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(xt).join(k)},Ut.prototype.multiply=function(k){var J=k.sx*this.sx+k.shy*this.shx,bt=k.sx*this.shy+k.shy*this.sy,Mt=k.shx*this.sx+k.sy*this.shx,Gt=k.shx*this.shy+k.sy*this.sy,ae=k.tx*this.sx+k.ty*this.shx+this.tx,xe=k.tx*this.shy+k.ty*this.sy+this.ty;return new Ut(J,bt,Mt,Gt,ae,xe)},Ut.prototype.decompose=function(){var k=this.sx,J=this.shy,bt=this.shx,Mt=this.sy,Gt=this.tx,ae=this.ty,xe=Math.sqrt(k*k+J*J),ze=(k/=xe)*bt+(J/=xe)*Mt;bt-=k*ze,Mt-=J*ze;var ur=Math.sqrt(bt*bt+Mt*Mt);return ze/=ur,k*(Mt/=ur)<J*(bt/=ur)&&(k=-k,J=-J,ze=-ze,xe=-xe),{scale:new Ut(xe,0,0,ur,0,0),translate:new Ut(1,0,0,1,Gt,ae),rotate:new Ut(k,J,-J,k,0,0),skew:new Ut(1,0,ze,1,0,0)}},Ut.prototype.toString=function(k){return this.join(" ")},Ut.prototype.inversed=function(){var k=this.sx,J=this.shy,bt=this.shx,Mt=this.sy,Gt=this.tx,ae=this.ty,xe=1/(k*Mt-J*bt),ze=Mt*xe,ur=-J*xe,Ir=-bt*xe,Tr=k*xe;return new Ut(ze,ur,Ir,Tr,-ze*Gt-Ir*ae,-ur*Gt-Tr*ae)},Ut.prototype.applyToPoint=function(k){var J=k.x*this.sx+k.y*this.shx+this.tx,bt=k.x*this.shy+k.y*this.sy+this.ty;return new gs(J,bt)},Ut.prototype.applyToRectangle=function(k){var J=this.applyToPoint(k),bt=this.applyToPoint(new gs(k.x+k.w,k.y+k.h));return new vA(J.x,J.y,bt.x-J.x,bt.y-J.y)},Ut.prototype.clone=function(){var k=this.sx,J=this.shy,bt=this.shx,Mt=this.sy,Gt=this.tx,ae=this.ty;return new Ut(k,J,bt,Mt,Gt,ae)},T.Matrix=Ut;var It=T.matrixMult=function(k,J){return J.multiply(k)},te=new Ut(1,0,0,1,0,0);T.unitMatrix=T.identityMatrix=te;var le=function(k,J){if(!mi[k]){var bt=(J instanceof hc?"Sh":"P")+(Object.keys(Pe).length+1).toString(10);J.id=bt,mi[k]=bt,Pe[bt]=J,q.publish("addPattern",J)}};T.ShadingPattern=hc,T.TilingPattern=eu,T.addShadingPattern=function(k,J){return ft("addShadingPattern()"),le(k,J),this},T.beginTilingPattern=function(k){ft("beginTilingPattern()"),ul(k.boundingBox[0],k.boundingBox[1],k.boundingBox[2]-k.boundingBox[0],k.boundingBox[3]-k.boundingBox[1],k.matrix)},T.endTilingPattern=function(k,J){ft("endTilingPattern()"),J.stream=_e[dt].join(`
`),le(k,J),q.publish("endTilingPattern",J),Dt.pop().restore()};var qt=T.__private__.newObject=function(){var k=pe();return ke(k,!0),k},pe=T.__private__.newObjectDeferred=function(){return Ot++,Rt[Ot]=function(){return re},Ot},ke=function(k,J){return J=typeof J=="boolean"&&J,Rt[k]=re,J&&nt(k+" 0 obj"),k},Ge=T.__private__.newAdditionalObject=function(){var k={objId:pe(),content:""};return be.push(k),k},ar=pe(),xr=pe(),tr=T.__private__.decodeColorString=function(k){var J=k.split(" ");if(J.length!==2||J[1]!=="g"&&J[1]!=="G")J.length===5&&(J[4]==="k"||J[4]==="K")&&(J=[(1-J[0])*(1-J[3]),(1-J[1])*(1-J[3]),(1-J[2])*(1-J[3]),"r"]);else{var bt=parseFloat(J[0]);J=[bt,bt,bt,"r"]}for(var Mt="#",Gt=0;Gt<3;Gt++)Mt+=("0"+Math.floor(255*parseFloat(J[Gt])).toString(16)).slice(-2);return Mt},Br=T.__private__.encodeColorString=function(k){var J;typeof k=="string"&&(k={ch1:k});var bt=k.ch1,Mt=k.ch2,Gt=k.ch3,ae=k.ch4,xe=k.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof bt=="string"&&bt.charAt(0)!=="#"){var ze=new nv(bt);if(ze.ok)bt=ze.toHex();else if(!/^\d*\.?\d*$/.test(bt))throw new Error('Invalid color "'+bt+'" passed to jsPDF.encodeColorString.')}if(typeof bt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(bt)&&(bt="#"+bt[1]+bt[1]+bt[2]+bt[2]+bt[3]+bt[3]),typeof bt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(bt)){var ur=parseInt(bt.substr(1),16);bt=ur>>16&255,Mt=ur>>8&255,Gt=255&ur}if(Mt===void 0||ae===void 0&&bt===Mt&&Mt===Gt)if(typeof bt=="string")J=bt+" "+xe[0];else switch(k.precision){case 2:J=jt(bt/255)+" "+xe[0];break;case 3:default:J=at(bt/255)+" "+xe[0]}else if(ae===void 0||oi(ae)==="object"){if(ae&&!isNaN(ae.a)&&ae.a===0)return J=["1.","1.","1.",xe[1]].join(" ");if(typeof bt=="string")J=[bt,Mt,Gt,xe[1]].join(" ");else switch(k.precision){case 2:J=[jt(bt/255),jt(Mt/255),jt(Gt/255),xe[1]].join(" ");break;default:case 3:J=[at(bt/255),at(Mt/255),at(Gt/255),xe[1]].join(" ")}}else if(typeof bt=="string")J=[bt,Mt,Gt,ae,xe[2]].join(" ");else switch(k.precision){case 2:J=[jt(bt),jt(Mt),jt(Gt),jt(ae),xe[2]].join(" ");break;case 3:default:J=[at(bt),at(Mt),at(Gt),at(ae),xe[2]].join(" ")}return J},Kr=T.__private__.getFilters=function(){return p},qr=T.__private__.putStream=function(k){var J=(k=k||{}).data||"",bt=k.filters||Kr(),Mt=k.alreadyAppliedFilters||[],Gt=k.addLength1||!1,ae=J.length,xe=k.objectId,ze=function(Yi){return Yi};if(F!==null&&xe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");F!==null&&(ze=Ei.encryptor(xe,0));var ur={};bt===!0&&(bt=["FlateEncode"]);var Ir=k.additionalKeyValues||[],Tr=(ur=Fr.API.processDataByFilters!==void 0?Fr.API.processDataByFilters(J,bt):{data:J,reverseChain:[]}).reverseChain+(Array.isArray(Mt)?Mt.join(" "):Mt.toString());if(ur.data.length!==0&&(Ir.push({key:"Length",value:ur.data.length}),Gt===!0&&Ir.push({key:"Length1",value:ae})),Tr.length!=0)if(Tr.split("/").length-1==1)Ir.push({key:"Filter",value:Tr});else{Ir.push({key:"Filter",value:"["+Tr+"]"});for(var Qr=0;Qr<Ir.length;Qr+=1)if(Ir[Qr].key==="DecodeParms"){for(var Sr=[],ki=0;ki<ur.reverseChain.split("/").length-1;ki+=1)Sr.push("null");Sr.push(Ir[Qr].value),Ir[Qr].value="["+Sr.join(" ")+"]"}}nt("<<");for(var Ar=0;Ar<Ir.length;Ar++)nt("/"+Ir[Ar].key+" "+Ir[Ar].value);nt(">>"),ur.data.length!==0&&(nt("stream"),nt(ze(ur.data)),nt("endstream"))},gr=T.__private__.putPage=function(k){var J=k.number,bt=k.data,Mt=k.objId,Gt=k.contentsObjId;ke(Mt,!0),nt("<</Type /Page"),nt("/Parent "+k.rootDictionaryObjId+" 0 R"),nt("/Resources "+k.resourceDictionaryObjId+" 0 R"),nt("/MediaBox ["+parseFloat(xt(k.mediaBox.bottomLeftX))+" "+parseFloat(xt(k.mediaBox.bottomLeftY))+" "+xt(k.mediaBox.topRightX)+" "+xt(k.mediaBox.topRightY)+"]"),k.cropBox!==null&&nt("/CropBox ["+xt(k.cropBox.bottomLeftX)+" "+xt(k.cropBox.bottomLeftY)+" "+xt(k.cropBox.topRightX)+" "+xt(k.cropBox.topRightY)+"]"),k.bleedBox!==null&&nt("/BleedBox ["+xt(k.bleedBox.bottomLeftX)+" "+xt(k.bleedBox.bottomLeftY)+" "+xt(k.bleedBox.topRightX)+" "+xt(k.bleedBox.topRightY)+"]"),k.trimBox!==null&&nt("/TrimBox ["+xt(k.trimBox.bottomLeftX)+" "+xt(k.trimBox.bottomLeftY)+" "+xt(k.trimBox.topRightX)+" "+xt(k.trimBox.topRightY)+"]"),k.artBox!==null&&nt("/ArtBox ["+xt(k.artBox.bottomLeftX)+" "+xt(k.artBox.bottomLeftY)+" "+xt(k.artBox.topRightX)+" "+xt(k.artBox.topRightY)+"]"),typeof k.userUnit=="number"&&k.userUnit!==1&&nt("/UserUnit "+k.userUnit),q.publish("putPage",{objId:Mt,pageContext:K[J],pageNumber:J,page:bt}),nt("/Contents "+Gt+" 0 R"),nt(">>"),nt("endobj");var ae=bt.join(`
`);return ht===rt.ADVANCED&&(ae+=`
Q`),ke(Gt,!0),qr({data:ae,filters:Kr(),objectId:Gt}),nt("endobj"),Mt},Mr=T.__private__.putPages=function(){var k,J,bt=[];for(k=1;k<=gt;k++)K[k].objId=pe(),K[k].contentsObjId=pe();for(k=1;k<=gt;k++)bt.push(gr({number:k,data:_e[k],objId:K[k].objId,contentsObjId:K[k].contentsObjId,mediaBox:K[k].mediaBox,cropBox:K[k].cropBox,bleedBox:K[k].bleedBox,trimBox:K[k].trimBox,artBox:K[k].artBox,userUnit:K[k].userUnit,rootDictionaryObjId:ar,resourceDictionaryObjId:xr}));ke(ar,!0),nt("<</Type /Pages");var Mt="/Kids [";for(J=0;J<gt;J++)Mt+=bt[J]+" 0 R ";nt(Mt+"]"),nt("/Count "+gt),nt(">>"),nt("endobj"),q.publish("postPutPages")},Zr=function(k){q.publish("putFont",{font:k,out:nt,newObject:qt,putStream:qr}),k.isAlreadyPutted!==!0&&(k.objectNumber=qt(),nt("<<"),nt("/Type /Font"),nt("/BaseFont /"+tu(k.postScriptName)),nt("/Subtype /Type1"),typeof k.encoding=="string"&&nt("/Encoding /"+k.encoding),nt("/FirstChar 32"),nt("/LastChar 255"),nt(">>"),nt("endobj"))},Ct=function(){for(var k in Ee)Ee.hasOwnProperty(k)&&(E===!1||E===!0&&Q.hasOwnProperty(k))&&Zr(Ee[k])},Fe=function(k){k.objectNumber=qt();var J=[];J.push({key:"Type",value:"/XObject"}),J.push({key:"Subtype",value:"/Form"}),J.push({key:"BBox",value:"["+[xt(k.x),xt(k.y),xt(k.x+k.width),xt(k.y+k.height)].join(" ")+"]"}),J.push({key:"Matrix",value:"["+k.matrix.toString()+"]"});var bt=k.pages[1].join(`
`);qr({data:bt,additionalKeyValues:J,objectId:k.objectNumber}),nt("endobj")},ye=function(){for(var k in pt)pt.hasOwnProperty(k)&&Fe(pt[k])},Lr=function(k,J){var bt,Mt=[],Gt=1/(J-1);for(bt=0;bt<1;bt+=Gt)Mt.push(bt);if(Mt.push(1),k[0].offset!=0){var ae={offset:0,color:k[0].color};k.unshift(ae)}if(k[k.length-1].offset!=1){var xe={offset:1,color:k[k.length-1].color};k.push(xe)}for(var ze="",ur=0,Ir=0;Ir<Mt.length;Ir++){for(bt=Mt[Ir];bt>k[ur+1].offset;)ur++;var Tr=k[ur].offset,Qr=(bt-Tr)/(k[ur+1].offset-Tr),Sr=k[ur].color,ki=k[ur+1].color;ze+=St(Math.round((1-Qr)*Sr[0]+Qr*ki[0]).toString(16))+St(Math.round((1-Qr)*Sr[1]+Qr*ki[1]).toString(16))+St(Math.round((1-Qr)*Sr[2]+Qr*ki[2]).toString(16))}return ze.trim()},dr=function(k,J){J||(J=21);var bt=qt(),Mt=Lr(k.colors,J),Gt=[];Gt.push({key:"FunctionType",value:"0"}),Gt.push({key:"Domain",value:"[0.0 1.0]"}),Gt.push({key:"Size",value:"["+J+"]"}),Gt.push({key:"BitsPerSample",value:"8"}),Gt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Gt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),qr({data:Mt,additionalKeyValues:Gt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:bt}),nt("endobj"),k.objectNumber=qt(),nt("<< /ShadingType "+k.type),nt("/ColorSpace /DeviceRGB");var ae="/Coords ["+xt(parseFloat(k.coords[0]))+" "+xt(parseFloat(k.coords[1]))+" ";k.type===2?ae+=xt(parseFloat(k.coords[2]))+" "+xt(parseFloat(k.coords[3])):ae+=xt(parseFloat(k.coords[2]))+" "+xt(parseFloat(k.coords[3]))+" "+xt(parseFloat(k.coords[4]))+" "+xt(parseFloat(k.coords[5])),nt(ae+="]"),k.matrix&&nt("/Matrix ["+k.matrix.toString()+"]"),nt("/Function "+bt+" 0 R"),nt("/Extend [true true]"),nt(">>"),nt("endobj")},zi=function(k,J){var bt=pe(),Mt=qt();J.push({resourcesOid:bt,objectOid:Mt}),k.objectNumber=Mt;var Gt=[];Gt.push({key:"Type",value:"/Pattern"}),Gt.push({key:"PatternType",value:"1"}),Gt.push({key:"PaintType",value:"1"}),Gt.push({key:"TilingType",value:"1"}),Gt.push({key:"BBox",value:"["+k.boundingBox.map(xt).join(" ")+"]"}),Gt.push({key:"XStep",value:xt(k.xStep)}),Gt.push({key:"YStep",value:xt(k.yStep)}),Gt.push({key:"Resources",value:bt+" 0 R"}),k.matrix&&Gt.push({key:"Matrix",value:"["+k.matrix.toString()+"]"}),qr({data:k.stream,additionalKeyValues:Gt,objectId:k.objectNumber}),nt("endobj")},ai=function(k){var J;for(J in Pe)Pe.hasOwnProperty(J)&&(Pe[J]instanceof hc?dr(Pe[J]):Pe[J]instanceof eu&&zi(Pe[J],k))},yi=function(k){for(var J in k.objectNumber=qt(),nt("<<"),k)switch(J){case"opacity":nt("/ca "+jt(k[J]));break;case"stroke-opacity":nt("/CA "+jt(k[J]))}nt(">>"),nt("endobj")},di=function(){var k;for(k in Rr)Rr.hasOwnProperty(k)&&yi(Rr[k])},Oi=function(){for(var k in nt("/XObject <<"),pt)pt.hasOwnProperty(k)&&pt[k].objectNumber>=0&&nt("/"+k+" "+pt[k].objectNumber+" 0 R");q.publish("putXobjectDict"),nt(">>")},Xi=function(){Ei.oid=qt(),nt("<<"),nt("/Filter /Standard"),nt("/V "+Ei.v),nt("/R "+Ei.r),nt("/U <"+Ei.toHexString(Ei.U)+">"),nt("/O <"+Ei.toHexString(Ei.O)+">"),nt("/P "+Ei.P),nt(">>"),nt("endobj")},Hi=function(){for(var k in nt("/Font <<"),Ee)Ee.hasOwnProperty(k)&&(E===!1||E===!0&&Q.hasOwnProperty(k))&&nt("/"+k+" "+Ee[k].objectNumber+" 0 R");nt(">>")},aA=function(){if(Object.keys(Pe).length>0){for(var k in nt("/Shading <<"),Pe)Pe.hasOwnProperty(k)&&Pe[k]instanceof hc&&Pe[k].objectNumber>=0&&nt("/"+k+" "+Pe[k].objectNumber+" 0 R");q.publish("putShadingPatternDict"),nt(">>")}},to=function(k){if(Object.keys(Pe).length>0){for(var J in nt("/Pattern <<"),Pe)Pe.hasOwnProperty(J)&&Pe[J]instanceof T.TilingPattern&&Pe[J].objectNumber>=0&&Pe[J].objectNumber<k&&nt("/"+J+" "+Pe[J].objectNumber+" 0 R");q.publish("putTilingPatternDict"),nt(">>")}},Li=function(){if(Object.keys(Rr).length>0){var k;for(k in nt("/ExtGState <<"),Rr)Rr.hasOwnProperty(k)&&Rr[k].objectNumber>=0&&nt("/"+k+" "+Rr[k].objectNumber+" 0 R");q.publish("putGStateDict"),nt(">>")}},si=function(k){ke(k.resourcesOid,!0),nt("<<"),nt("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Hi(),aA(),to(k.objectOid),Li(),Oi(),nt(">>"),nt("endobj")},eo=function(){var k=[];Ct(),di(),ye(),ai(k),q.publish("putResources"),k.forEach(si),si({resourcesOid:xr,objectOid:Number.MAX_SAFE_INTEGER}),q.publish("postPutResources")},Bi=function(){q.publish("putAdditionalObjects");for(var k=0;k<be.length;k++){var J=be[k];ke(J.objId,!0),nt(J.content),nt("endobj")}q.publish("postPutAdditionalObjects")},Sa=function(k){vr[k.fontName]=vr[k.fontName]||{},vr[k.fontName][k.fontStyle]=k.id},vn=function(k,J,bt,Mt,Gt){var ae={id:"F"+(Object.keys(Ee).length+1).toString(10),postScriptName:k,fontName:J,fontStyle:bt,encoding:Mt,isStandardFont:Gt||!1,metadata:{}};return q.publish("addFont",{font:ae,instance:this}),Ee[ae.id]=ae,Sa(ae),ae.id},Ia=function(k){for(var J=0,bt=Ae.length;J<bt;J++){var Mt=vn.call(this,k[J][0],k[J][1],k[J][2],Ae[J][3],!0);E===!1&&(Q[Mt]=!0);var Gt=k[J][0].split("-");Sa({id:Mt,fontName:Gt[0],fontStyle:Gt[1]||""})}q.publish("addFonts",{fonts:Ee,dictionary:vr})},Zi=function(k){return k.foo=function(){try{return k.apply(this,arguments)}catch(Mt){var J=Mt.stack||"";~J.indexOf(" at ")&&(J=J.split(" at ")[1]);var bt="Error in function "+J.split(`
`)[0].split("<")[0]+": "+Mt.message;if(!Cr.console)throw new Error(bt);Cr.console.error(bt,Mt),Cr.alert&&alert(bt)}},k.foo.bar=k,k.foo},jo=function(k,J){var bt,Mt,Gt,ae,xe,ze,ur,Ir,Tr;if(Gt=(J=J||{}).sourceEncoding||"Unicode",xe=J.outputEncoding,(J.autoencode||xe)&&Ee[sr].metadata&&Ee[sr].metadata[Gt]&&Ee[sr].metadata[Gt].encoding&&(ae=Ee[sr].metadata[Gt].encoding,!xe&&Ee[sr].encoding&&(xe=Ee[sr].encoding),!xe&&ae.codePages&&(xe=ae.codePages[0]),typeof xe=="string"&&(xe=ae[xe]),xe)){for(ur=!1,ze=[],bt=0,Mt=k.length;bt<Mt;bt++)(Ir=xe[k.charCodeAt(bt)])?ze.push(String.fromCharCode(Ir)):ze.push(k[bt]),ze[bt].charCodeAt(0)>>8&&(ur=!0);k=ze.join("")}for(bt=k.length;ur===void 0&&bt!==0;)k.charCodeAt(bt-1)>>8&&(ur=!0),bt--;if(!ur)return k;for(ze=J.noBOM?[]:[254,255],bt=0,Mt=k.length;bt<Mt;bt++){if((Tr=(Ir=k.charCodeAt(bt))>>8)>>8)throw new Error("Character at position "+bt+" of string '"+k+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ze.push(Tr),ze.push(Ir-(Tr<<8))}return String.fromCharCode.apply(void 0,ze)},Wi=T.__private__.pdfEscape=T.pdfEscape=function(k,J){return jo(k,J).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},fs=T.__private__.beginPage=function(k){_e[++gt]=[],K[gt]={objId:0,contentsObjId:0,userUnit:Number(A),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(k[0]),topRightY:Number(k[1])}},lA(gt),oe(_e[dt])},Vr=function(k,J){var bt,Mt,Gt;switch(i=J||i,typeof k=="string"&&(bt=j(k.toLowerCase()),Array.isArray(bt)&&(Mt=bt[0],Gt=bt[1])),Array.isArray(k)&&(Mt=k[0]*Ie,Gt=k[1]*Ie),isNaN(Mt)&&(Mt=u[0],Gt=u[1]),(Mt>14400||Gt>14400)&&(Ii.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Mt=Math.min(14400,Mt),Gt=Math.min(14400,Gt)),u=[Mt,Gt],i.substr(0,1)){case"l":Gt>Mt&&(u=[Gt,Mt]);break;case"p":Mt>Gt&&(u=[Gt,Mt])}fs(u),fA(Ma),nt(Ms),mA!==0&&nt(mA+" J"),yA!==0&&nt(yA+" j"),q.publish("addPage",{pageNumber:gt})},AA=function(k){k>0&&k<=gt&&(_e.splice(k,1),K.splice(k,1),gt--,dt>gt&&(dt=gt),this.setPage(dt))},lA=function(k){k>0&&k<=gt&&(dt=k)},Ea=T.__private__.getNumberOfPages=T.getNumberOfPages=function(){return _e.length-1},Ta=function(k,J,bt){var Mt,Gt=void 0;return bt=bt||{},k=k!==void 0?k:Ee[sr].fontName,J=J!==void 0?J:Ee[sr].fontStyle,Mt=k.toLowerCase(),vr[Mt]!==void 0&&vr[Mt][J]!==void 0?Gt=vr[Mt][J]:vr[k]!==void 0&&vr[k][J]!==void 0?Gt=vr[k][J]:bt.disableWarning===!1&&Ii.warn("Unable to look up font label for font '"+k+"', '"+J+"'. Refer to getFontList() for available fonts."),Gt||bt.noFallback||(Gt=vr.times[J])==null&&(Gt=vr.times.normal),Gt},cA=T.__private__.putInfo=function(){var k=qt(),J=function(Mt){return Mt};for(var bt in F!==null&&(J=Ei.encryptor(k,0)),nt("<<"),nt("/Producer ("+Wi(J("jsPDF "+Fr.version))+")"),Je)Je.hasOwnProperty(bt)&&Je[bt]&&nt("/"+bt.substr(0,1).toUpperCase()+bt.substr(1)+" ("+Wi(J(Je[bt]))+")");nt("/CreationDate ("+Wi(J($t))+")"),nt(">>"),nt("endobj")},Ko=T.__private__.putCatalog=function(k){var J=(k=k||{}).rootDictionaryObjId||ar;switch(qt(),nt("<<"),nt("/Type /Catalog"),nt("/Pages "+J+" 0 R"),Se||(Se="fullwidth"),Se){case"fullwidth":nt("/OpenAction [3 0 R /FitH null]");break;case"fullheight":nt("/OpenAction [3 0 R /FitV null]");break;case"fullpage":nt("/OpenAction [3 0 R /Fit]");break;case"original":nt("/OpenAction [3 0 R /XYZ null null 1]");break;default:var bt=""+Se;bt.substr(bt.length-1)==="%"&&(Se=parseInt(Se)/100),typeof Se=="number"&&nt("/OpenAction [3 0 R /XYZ null null "+jt(Se)+"]")}switch(yr||(yr="continuous"),yr){case"continuous":nt("/PageLayout /OneColumn");break;case"single":nt("/PageLayout /SinglePage");break;case"two":case"twoleft":nt("/PageLayout /TwoColumnLeft");break;case"tworight":nt("/PageLayout /TwoColumnRight")}Xe&&nt("/PageMode /"+Xe),q.publish("putCatalog"),nt(">>"),nt("endobj")},uA=T.__private__.putTrailer=function(){nt("trailer"),nt("<<"),nt("/Size "+(Ot+1)),nt("/Root "+Ot+" 0 R"),nt("/Info "+(Ot-1)+" 0 R"),F!==null&&nt("/Encrypt "+Ei.oid+" 0 R"),nt("/ID [ <"+Vt+"> <"+Vt+"> ]"),nt(">>")},Ua=T.__private__.putHeader=function(){nt("%PDF-"+V),nt("%")},$o=T.__private__.putXRef=function(){var k="0000000000";nt("xref"),nt("0 "+(Ot+1)),nt("0000000000 65535 f ");for(var J=1;J<=Ot;J++)typeof Rt[J]=="function"?nt((k+Rt[J]()).slice(-10)+" 00000 n "):Rt[J]!==void 0?nt((k+Rt[J]).slice(-10)+" 00000 n "):nt("0000000000 00000 n ")},bo=T.__private__.buildDocument=function(){je(),oe(Jt),q.publish("buildDocument"),Ua(),Mr(),Bi(),eo(),F!==null&&Xi(),cA(),Ko();var k=re;return $o(),uA(),nt("startxref"),nt(""+k),nt("%%EOF"),oe(_e[dt]),Jt.join(`
`)},hA=T.__private__.getBlob=function(k){return new Blob([Ke(k)],{type:"application/pdf"})},Pa=T.output=T.__private__.output=Zi(function(k,J){switch(typeof(J=J||{})=="string"?J={filename:J}:J.filename=J.filename||"generated.pdf",k){case void 0:return bo();case"save":T.save(J.filename);break;case"arraybuffer":return Ke(bo());case"blob":return hA(bo());case"bloburi":case"bloburl":if(Cr.URL!==void 0&&typeof Cr.URL.createObjectURL=="function")return Cr.URL&&Cr.URL.createObjectURL(hA(bo()))||void 0;Ii.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var bt="",Mt=bo();try{bt=Fg(Mt)}catch{bt=Fg(unescape(encodeURIComponent(Mt)))}return"data:application/pdf;filename="+J.filename+";base64,"+bt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Cr)==="[object Window]"){var Gt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ae=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';J.pdfObjectUrl&&(Gt=J.pdfObjectUrl,ae="");var xe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Gt+'"'+ae+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(J)+");<\/script></body></html>",ze=Cr.open();return ze!==null&&ze.document.write(xe),ze}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Cr)==="[object Window]"){var ur='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(J.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+J.filename+'" width="500px" height="400px" /></body></html>',Ir=Cr.open();if(Ir!==null){Ir.document.write(ur);var Tr=this;Ir.document.documentElement.querySelector("#pdfViewer").onload=function(){Ir.document.title=J.filename,Ir.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Tr.output("bloburl"))}}return Ir}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Cr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Qr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",J)+'"></iframe></body></html>',Sr=Cr.open();if(Sr!==null&&(Sr.document.write(Qr),Sr.document.title=J.filename),Sr||typeof safari>"u")return Sr;break;case"datauri":case"dataurl":return Cr.document.location.href=this.output("datauristring",J);default:return null}}),Gl=function(k){return Array.isArray(At)===!0&&At.indexOf(k)>-1};switch(s){case"pt":Ie=1;break;case"mm":Ie=72/25.4;break;case"cm":Ie=72/2.54;break;case"in":Ie=72;break;case"px":Ie=Gl("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ie=12;break;case"ex":Ie=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);Ie=s}var Ei=null;me(),Ht();var La=function(k){return F!==null?Ei.encryptor(k,0):function(J){return J}},wn=T.__private__.getPageInfo=T.getPageInfo=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:K[k].objId,pageNumber:k,pageContext:K[k]}},lr=T.__private__.getPageInfoByObjId=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var J in K)if(K[J].objId===k)break;return wn(J)},Qa=T.__private__.getCurrentPageInfo=T.getCurrentPageInfo=function(){return{objId:K[dt].objId,pageNumber:dt,pageContext:K[dt]}};T.addPage=function(){return Vr.apply(this,arguments),this},T.setPage=function(){return lA.apply(this,arguments),oe.call(this,_e[dt]),this},T.insertPage=function(k){return this.addPage(),this.movePage(dt,k),this},T.movePage=function(k,J){var bt,Mt;if(k>J){bt=_e[k],Mt=K[k];for(var Gt=k;Gt>J;Gt--)_e[Gt]=_e[Gt-1],K[Gt]=K[Gt-1];_e[J]=bt,K[J]=Mt,this.setPage(J)}else if(k<J){bt=_e[k],Mt=K[k];for(var ae=k;ae<J;ae++)_e[ae]=_e[ae+1],K[ae]=K[ae+1];_e[J]=bt,K[J]=Mt,this.setPage(J)}return this},T.deletePage=function(){return AA.apply(this,arguments),this},T.__private__.text=T.text=function(k,J,bt,Mt,Gt){var ae,xe,ze,ur,Ir,Tr,Qr,Sr,ki,Ar=(Mt=Mt||{}).scope||this;if(typeof k=="number"&&typeof J=="number"&&(typeof bt=="string"||Array.isArray(bt))){var Yi=bt;bt=J,J=k,k=Yi}if(arguments[3]instanceof Ut?(ft("The transform parameter of text() with a Matrix value"),ki=Gt):(ze=arguments[4],ur=arguments[5],oi(Qr=arguments[3])==="object"&&Qr!==null||(typeof ze=="string"&&(ur=ze,ze=null),typeof Qr=="string"&&(ur=Qr,Qr=null),typeof Qr=="number"&&(ze=Qr,Qr=null),Mt={flags:Qr,angle:ze,align:ur})),isNaN(J)||isNaN(bt)||k==null)throw new Error("Invalid arguments passed to jsPDF.text");if(k.length===0)return Ar;var Ur="",zr=!1,Un=typeof Mt.lineHeightFactor=="number"?Mt.lineHeightFactor:xo,Ds=Ar.internal.scaleFactor;function Zo(Or){return Or=Or.split("	").join(Array(Mt.TabLen||9).join(" ")),Wi(Or,Qr)}function Wo(Or){for(var ei,vi=Or.concat(),Mi=[],co=vi.length;co--;)typeof(ei=vi.shift())=="string"?Mi.push(ei):Array.isArray(Or)&&(ei.length===1||ei[1]===void 0&&ei[2]===void 0)?Mi.push(ei[0]):Mi.push([ei[0],ei[1],ei[2]]);return Mi}function Yo(Or,ei){var vi;if(typeof Or=="string")vi=ei(Or)[0];else if(Array.isArray(Or)){for(var Mi,co,es=Or.concat(),uo=[],ia=es.length;ia--;)typeof(Mi=es.shift())=="string"?uo.push(ei(Mi)[0]):Array.isArray(Mi)&&typeof Mi[0]=="string"&&(co=ei(Mi[0],Mi[1],Mi[2]),uo.push([co[0],co[1],co[2]]));vi=uo}return vi}var Jo=!1,Ns=!0;if(typeof k=="string")Jo=!0;else if(Array.isArray(k)){var Os=k.concat();xe=[];for(var Ji,_n=Os.length;_n--;)(typeof(Ji=Os.shift())!="string"||Array.isArray(Ji)&&typeof Ji[0]!="string")&&(Ns=!1);Jo=Ns}if(Jo===!1)throw new Error('Type of text must be string or Array. "'+k+'" is not recognized.');typeof k=="string"&&(k=k.match(/[\r?\n]/)?k.split(/\r\n|\r|\n/g):[k]);var ta=ge/Ar.internal.scaleFactor,oo=ta*(Un-1);switch(Mt.baseline){case"bottom":bt-=oo;break;case"top":bt+=ta-oo;break;case"hanging":bt+=ta-2*oo;break;case"middle":bt+=ta/2-oo}if((Tr=Mt.maxWidth||0)>0&&(typeof k=="string"?k=Ar.splitTextToSize(k,Tr):Object.prototype.toString.call(k)==="[object Array]"&&(k=k.reduce(function(Or,ei){return Or.concat(Ar.splitTextToSize(ei,Tr))},[]))),ae={text:k,x:J,y:bt,options:Mt,mutex:{pdfEscape:Wi,activeFontKey:sr,fonts:Ee,activeFontSize:ge}},q.publish("preProcessText",ae),k=ae.text,ze=(Mt=ae.options).angle,!(ki instanceof Ut)&&ze&&typeof ze=="number"){ze*=Math.PI/180,Mt.rotationDirection===0&&(ze=-ze),ht===rt.ADVANCED&&(ze=-ze);var ms=Math.cos(ze),ea=Math.sin(ze);ki=new Ut(ms,ea,-ea,ms,0,0)}else ze&&ze instanceof Ut&&(ki=ze);ht!==rt.ADVANCED||ki||(ki=te),(Ir=Mt.charSpace||Go)!==void 0&&(Ur+=xt(ct(Ir))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Sr=Mt.horizontalScale)!==void 0&&(Ur+=xt(100*Sr)+` Tz
`),Mt.lang;var hn=-1,Oa=Mt.renderingMode!==void 0?Mt.renderingMode:Mt.stroke,ra=Ar.internal.getCurrentPageInfo().pageContext;switch(Oa){case 0:case!1:case"fill":hn=0;break;case 1:case!0:case"stroke":hn=1;break;case 2:case"fillThenStroke":hn=2;break;case 3:case"invisible":hn=3;break;case 4:case"fillAndAddForClipping":hn=4;break;case 5:case"strokeAndAddPathForClipping":hn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":hn=6;break;case 7:case"addToPathForClipping":hn=7}var dl=ra.usedRenderingMode!==void 0?ra.usedRenderingMode:-1;hn!==-1?Ur+=hn+` Tr
`:dl!==-1&&(Ur+=`0 Tr
`),hn!==-1&&(ra.usedRenderingMode=hn),ur=Mt.align||"left";var bn,ao=ge*Un,pl=Ar.internal.pageSize.getWidth(),bA=Ee[sr];Ir=Mt.charSpace||Go,Tr=Mt.maxWidth||0,Qr=Object.assign({autoencode:!0,noBOM:!0},Mt.flags);var Er=[];if(Object.prototype.toString.call(k)==="[object Array]"){var Pn;xe=Wo(k),ur!=="left"&&(bn=xe.map(function(Or){return Ar.getStringUnitWidth(Or,{font:bA,charSpace:Ir,fontSize:ge,doKerning:!1})*ge/Ds}));var ys,Ao=0;if(ur==="right"){J-=bn[0],k=[],_n=xe.length;for(var Rn=0;Rn<_n;Rn++)Rn===0?(ys=Co(J),Pn=ks(bt)):(ys=ct(Ao-bn[Rn]),Pn=-ao),k.push([xe[Rn],ys,Pn]),Ao=bn[Rn]}else if(ur==="center"){J-=bn[0]/2,k=[],_n=xe.length;for(var Rs=0;Rs<_n;Rs++)Rs===0?(ys=Co(J),Pn=ks(bt)):(ys=ct((Ao-bn[Rs])/2),Pn=-ao),k.push([xe[Rs],ys,Pn]),Ao=bn[Rs]}else if(ur==="left"){k=[],_n=xe.length;for(var Fo=0;Fo<_n;Fo++)k.push(xe[Fo])}else{if(ur!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');k=[],_n=xe.length,Tr=Tr!==0?Tr:pl;for(var Ln=0;Ln<_n;Ln++)Pn=Ln===0?ks(bt):-ao,ys=Ln===0?Co(J):0,Ln<_n-1?Er.push(xt(ct((Tr-bn[Ln])/(xe[Ln].split(" ").length-1)))):Er.push(0),k.push([xe[Ln],ys,Pn])}}var Ra=typeof Mt.R2L=="boolean"?Mt.R2L:He;Ra===!0&&(k=Yo(k,function(Or,ei,vi){return[Or.split("").reverse().join(""),ei,vi]})),ae={text:k,x:J,y:bt,options:Mt,mutex:{pdfEscape:Wi,activeFontKey:sr,fonts:Ee,activeFontSize:ge}},q.publish("postProcessText",ae),k=ae.text,zr=ae.mutex.isHex||!1;var So=Ee[sr].encoding;So!=="WinAnsiEncoding"&&So!=="StandardEncoding"||(k=Yo(k,function(Or,ei,vi){return[Zo(Or),ei,vi]})),xe=Wo(k),k=[];for(var vs,Qn,zn,Io=0,za=1,lo=Array.isArray(xe[0])?za:Io,zs="",Ha=function(Or,ei,vi){var Mi="";return vi instanceof Ut?(vi=typeof Mt.angle=="number"?It(vi,new Ut(1,0,0,1,Or,ei)):It(new Ut(1,0,0,1,Or,ei),vi),ht===rt.ADVANCED&&(vi=It(new Ut(1,0,0,-1,0,0),vi)),Mi=vi.join(" ")+` Tm
`):Mi=xt(Or)+" "+xt(ei)+` Td
`,Mi},kn=0;kn<xe.length;kn++){switch(zs="",lo){case za:zn=(zr?"<":"(")+xe[kn][0]+(zr?">":")"),vs=parseFloat(xe[kn][1]),Qn=parseFloat(xe[kn][2]);break;case Io:zn=(zr?"<":"(")+xe[kn]+(zr?">":")"),vs=Co(J),Qn=ks(bt)}Er!==void 0&&Er[kn]!==void 0&&(zs=Er[kn]+` Tw
`),kn===0?k.push(zs+Ha(vs,Qn,ki)+zn):lo===Io?k.push(zs+zn):lo===za&&k.push(zs+Ha(vs,Qn,ki)+zn)}k=lo===Io?k.join(` Tj
T* `):k.join(` Tj
`),k+=` Tj
`;var Hn=`BT
/`;return Hn+=sr+" "+ge+` Tf
`,Hn+=xt(ge*Un)+` TL
`,Hn+=Da+`
`,Hn+=Ur,Hn+=k,nt(Hn+="ET"),Q[sr]=!0,Ar};var dA=T.__private__.clip=T.clip=function(k){return nt(k==="evenodd"?"W*":"W"),this};T.clipEvenOdd=function(){return dA("evenodd")},T.__private__.discardPath=T.discardPath=function(){return nt("n"),this};var Qs=T.__private__.isValidStyle=function(k){var J=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(k)!==-1&&(J=!0),J};T.__private__.setDefaultPathOperation=T.setDefaultPathOperation=function(k){return Qs(k)&&(C=k),this};var ol=T.__private__.getStyle=T.getStyle=function(k){var J=C;switch(k){case"D":case"S":J="S";break;case"F":J="f";break;case"FD":case"DF":J="B";break;case"f":case"f*":case"B":case"B*":J=k}return J},ro=T.close=function(){return nt("h"),this};T.stroke=function(){return nt("S"),this},T.fill=function(k){return ka("f",k),this},T.fillEvenOdd=function(k){return ka("f*",k),this},T.fillStroke=function(k){return ka("B",k),this},T.fillStrokeEvenOdd=function(k){return ka("B*",k),this};var ka=function(k,J){oi(J)==="object"?Xl(J,k):nt(k)},al=function(k){k===null||ht===rt.ADVANCED&&k===void 0||(k=ol(k),nt(k))};function Qc(k,J,bt,Mt,Gt){var ae=new eu(J||this.boundingBox,bt||this.xStep,Mt||this.yStep,this.gState,Gt||this.matrix);ae.stream=this.stream;var xe=k+"$$"+this.cloneIndex+++"$$";return le(xe,ae),ae}var Xl=function(k,J){var bt=mi[k.key],Mt=Pe[bt];if(Mt instanceof hc)nt("q"),nt(Zl(J)),Mt.gState&&T.setGState(Mt.gState),nt(k.matrix.toString()+" cm"),nt("/"+bt+" sh"),nt("Q");else if(Mt instanceof eu){var Gt=new Ut(1,0,0,-1,0,Xo());k.matrix&&(Gt=Gt.multiply(k.matrix||te),bt=Qc.call(Mt,k.key,k.boundingBox,k.xStep,k.yStep,Gt).id),nt("q"),nt("/Pattern cs"),nt("/"+bt+" scn"),Mt.gState&&T.setGState(Mt.gState),nt(J),nt("Q")}},Zl=function(k){switch(k){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Al=T.moveTo=function(k,J){return nt(xt(ct(k))+" "+xt(mt(J))+" m"),this},io=T.lineTo=function(k,J){return nt(xt(ct(k))+" "+xt(mt(J))+" l"),this},no=T.curveTo=function(k,J,bt,Mt,Gt,ae){return nt([xt(ct(k)),xt(mt(J)),xt(ct(bt)),xt(mt(Mt)),xt(ct(Gt)),xt(mt(ae)),"c"].join(" ")),this};T.__private__.line=T.line=function(k,J,bt,Mt,Gt){if(isNaN(k)||isNaN(J)||isNaN(bt)||isNaN(Mt)||!Qs(Gt))throw new Error("Invalid arguments passed to jsPDF.line");return ht===rt.COMPAT?this.lines([[bt-k,Mt-J]],k,J,[1,1],Gt||"S"):this.lines([[bt-k,Mt-J]],k,J,[1,1]).stroke()},T.__private__.lines=T.lines=function(k,J,bt,Mt,Gt,ae){var xe,ze,ur,Ir,Tr,Qr,Sr,ki,Ar,Yi,Ur,zr;if(typeof k=="number"&&(zr=bt,bt=J,J=k,k=zr),Mt=Mt||[1,1],ae=ae||!1,isNaN(J)||isNaN(bt)||!Array.isArray(k)||!Array.isArray(Mt)||!Qs(Gt)||typeof ae!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Al(J,bt),xe=Mt[0],ze=Mt[1],Ir=k.length,Yi=J,Ur=bt,ur=0;ur<Ir;ur++)(Tr=k[ur]).length===2?(Yi=Tr[0]*xe+Yi,Ur=Tr[1]*ze+Ur,io(Yi,Ur)):(Qr=Tr[0]*xe+Yi,Sr=Tr[1]*ze+Ur,ki=Tr[2]*xe+Yi,Ar=Tr[3]*ze+Ur,Yi=Tr[4]*xe+Yi,Ur=Tr[5]*ze+Ur,no(Qr,Sr,ki,Ar,Yi,Ur));return ae&&ro(),al(Gt),this},T.path=function(k){for(var J=0;J<k.length;J++){var bt=k[J],Mt=bt.c;switch(bt.op){case"m":Al(Mt[0],Mt[1]);break;case"l":io(Mt[0],Mt[1]);break;case"c":no.apply(this,Mt);break;case"h":ro()}}return this},T.__private__.rect=T.rect=function(k,J,bt,Mt,Gt){if(isNaN(k)||isNaN(J)||isNaN(bt)||isNaN(Mt)||!Qs(Gt))throw new Error("Invalid arguments passed to jsPDF.rect");return ht===rt.COMPAT&&(Mt=-Mt),nt([xt(ct(k)),xt(mt(J)),xt(ct(bt)),xt(ct(Mt)),"re"].join(" ")),al(Gt),this},T.__private__.triangle=T.triangle=function(k,J,bt,Mt,Gt,ae,xe){if(isNaN(k)||isNaN(J)||isNaN(bt)||isNaN(Mt)||isNaN(Gt)||isNaN(ae)||!Qs(xe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[bt-k,Mt-J],[Gt-bt,ae-Mt],[k-Gt,J-ae]],k,J,[1,1],xe,!0),this},T.__private__.roundedRect=T.roundedRect=function(k,J,bt,Mt,Gt,ae,xe){if(isNaN(k)||isNaN(J)||isNaN(bt)||isNaN(Mt)||isNaN(Gt)||isNaN(ae)||!Qs(xe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ze=4/3*(Math.SQRT2-1);return Gt=Math.min(Gt,.5*bt),ae=Math.min(ae,.5*Mt),this.lines([[bt-2*Gt,0],[Gt*ze,0,Gt,ae-ae*ze,Gt,ae],[0,Mt-2*ae],[0,ae*ze,-Gt*ze,ae,-Gt,ae],[2*Gt-bt,0],[-Gt*ze,0,-Gt,-ae*ze,-Gt,-ae],[0,2*ae-Mt],[0,-ae*ze,Gt*ze,-ae,Gt,-ae]],k+Gt,J,[1,1],xe,!0),this},T.__private__.ellipse=T.ellipse=function(k,J,bt,Mt,Gt){if(isNaN(k)||isNaN(J)||isNaN(bt)||isNaN(Mt)||!Qs(Gt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ae=4/3*(Math.SQRT2-1)*bt,xe=4/3*(Math.SQRT2-1)*Mt;return Al(k+bt,J),no(k+bt,J-xe,k+ae,J-Mt,k,J-Mt),no(k-ae,J-Mt,k-bt,J-xe,k-bt,J),no(k-bt,J+xe,k-ae,J+Mt,k,J+Mt),no(k+ae,J+Mt,k+bt,J+xe,k+bt,J),al(Gt),this},T.__private__.circle=T.circle=function(k,J,bt,Mt){if(isNaN(k)||isNaN(J)||isNaN(bt)||!Qs(Mt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(k,J,bt,bt,Mt)},T.setFont=function(k,J,bt){return bt&&(J=Tt(J,bt)),sr=Ta(k,J,{disableWarning:!1}),this};var pA=T.__private__.getFont=T.getFont=function(){return Ee[Ta.apply(T,arguments)]};T.__private__.getFontList=T.getFontList=function(){var k,J,bt={};for(k in vr)if(vr.hasOwnProperty(k))for(J in bt[k]=[],vr[k])vr[k].hasOwnProperty(J)&&bt[k].push(J);return bt},T.addFont=function(k,J,bt,Mt,Gt){var ae=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ae.indexOf(arguments[3])!==-1?Gt=arguments[3]:arguments[3]&&ae.indexOf(arguments[3])==-1&&(bt=Tt(bt,Mt)),Gt=Gt||"Identity-H",vn.call(this,k,J,bt,Gt)};var xo,Ma=n.lineWidth||.200025,Tn=T.__private__.getLineWidth=T.getLineWidth=function(){return Ma},fA=T.__private__.setLineWidth=T.setLineWidth=function(k){return Ma=k,nt(xt(ct(k))+" w"),this};T.__private__.setLineDash=Fr.API.setLineDash=Fr.API.setLineDashPattern=function(k,J){if(k=k||[],J=J||0,isNaN(J)||!Array.isArray(k))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return k=k.map(function(bt){return xt(ct(bt))}).join(" "),J=xt(ct(J)),nt("["+k+"] "+J+" d"),this};var Bo=T.__private__.getLineHeight=T.getLineHeight=function(){return ge*xo};T.__private__.getLineHeight=T.getLineHeight=function(){return ge*xo};var Dr=T.__private__.setLineHeightFactor=T.setLineHeightFactor=function(k){return typeof(k=k||1.15)=="number"&&(xo=k),this},qo=T.__private__.getLineHeightFactor=T.getLineHeightFactor=function(){return xo};Dr(n.lineHeight);var Co=T.__private__.getHorizontalCoordinate=function(k){return ct(k)},ks=T.__private__.getVerticalCoordinate=function(k){return ht===rt.ADVANCED?k:K[dt].mediaBox.topRightY-K[dt].mediaBox.bottomLeftY-ct(k)},kc=T.__private__.getHorizontalCoordinateString=T.getHorizontalCoordinateString=function(k){return xt(Co(k))},ts=T.__private__.getVerticalCoordinateString=T.getVerticalCoordinateString=function(k){return xt(ks(k))},Ms=n.strokeColor||"0 G";T.__private__.getStrokeColor=T.getDrawColor=function(){return tr(Ms)},T.__private__.setStrokeColor=T.setDrawColor=function(k,J,bt,Mt){return Ms=Br({ch1:k,ch2:J,ch3:bt,ch4:Mt,pdfColorType:"draw",precision:2}),nt(Ms),this};var gA=n.fillColor||"0 g";T.__private__.getFillColor=T.getFillColor=function(){return tr(gA)},T.__private__.setFillColor=T.setFillColor=function(k,J,bt,Mt){return gA=Br({ch1:k,ch2:J,ch3:bt,ch4:Mt,pdfColorType:"fill",precision:2}),nt(gA),this};var Da=n.textColor||"0 g",Wl=T.__private__.getTextColor=T.getTextColor=function(){return tr(Da)};T.__private__.setTextColor=T.setTextColor=function(k,J,bt,Mt){return Da=Br({ch1:k,ch2:J,ch3:bt,ch4:Mt,pdfColorType:"text",precision:3}),this};var Go=n.charSpace,Yl=T.__private__.getCharSpace=T.getCharSpace=function(){return parseFloat(Go||0)};T.__private__.setCharSpace=T.setCharSpace=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Go=k,this};var mA=0;T.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},T.__private__.setLineCap=T.setLineCap=function(k){var J=T.CapJoinStyles[k];if(J===void 0)throw new Error("Line cap style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return mA=J,nt(J+" J"),this};var yA=0;T.__private__.setLineJoin=T.setLineJoin=function(k){var J=T.CapJoinStyles[k];if(J===void 0)throw new Error("Line join style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return yA=J,nt(J+" j"),this},T.__private__.setLineMiterLimit=T.__private__.setMiterLimit=T.setLineMiterLimit=T.setMiterLimit=function(k){if(k=k||0,isNaN(k))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return nt(xt(ct(k))+" M"),this},T.GState=Vd,T.setGState=function(k){(k=typeof k=="string"?Rr[ri[k]]:ll(null,k)).equals(jr)||(nt("/"+k.id+" gs"),jr=k)};var ll=function(k,J){if(!k||!ri[k]){var bt=!1;for(var Mt in Rr)if(Rr.hasOwnProperty(Mt)&&Rr[Mt].equals(J)){bt=!0;break}if(bt)J=Rr[Mt];else{var Gt="GS"+(Object.keys(Rr).length+1).toString(10);Rr[Gt]=J,J.id=Gt}return k&&(ri[k]=J.id),q.publish("addGState",J),J}};T.addGState=function(k,J){return ll(k,J),this},T.saveGraphicsState=function(){return nt("q"),ti.push({key:sr,size:ge,color:Da}),this},T.restoreGraphicsState=function(){nt("Q");var k=ti.pop();return sr=k.key,ge=k.size,Da=k.color,jr=null,this},T.setCurrentTransformationMatrix=function(k){return nt(k.toString()+" cm"),this},T.comment=function(k){return nt("#"+k),this};var gs=function(k,J){var bt=k||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return bt},set:function(ae){isNaN(ae)||(bt=parseFloat(ae))}});var Mt=J||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Mt},set:function(ae){isNaN(ae)||(Mt=parseFloat(ae))}});var Gt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Gt},set:function(ae){Gt=ae.toString()}}),this},vA=function(k,J,bt,Mt){gs.call(this,k,J),this.type="rect";var Gt=bt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Gt},set:function(xe){isNaN(xe)||(Gt=parseFloat(xe))}});var ae=Mt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ae},set:function(xe){isNaN(xe)||(ae=parseFloat(xe))}}),this},cl=function(){this.page=gt,this.currentPage=dt,this.pages=_e.slice(0),this.pagesContext=K.slice(0),this.x=Xr,this.y=he,this.matrix=rr,this.width=so(dt),this.height=Xo(dt),this.outputDestination=Qe,this.id="",this.objectNumber=-1};cl.prototype.restore=function(){gt=this.page,dt=this.currentPage,K=this.pagesContext,_e=this.pages,Xr=this.x,he=this.y,rr=this.matrix,hl(dt,this.width),_A(dt,this.height),Qe=this.outputDestination};var ul=function(k,J,bt,Mt,Gt){Dt.push(new cl),gt=dt=0,_e=[],Xr=k,he=J,rr=Gt,fs([bt,Mt])},Na=function(k){if(Pt[k])Dt.pop().restore();else{var J=new cl,bt="Xo"+(Object.keys(pt).length+1).toString(10);J.id=bt,Pt[k]=bt,pt[bt]=J,q.publish("addFormObject",J),Dt.pop().restore()}};for(var wA in T.beginFormObject=function(k,J,bt,Mt,Gt){return ul(k,J,bt,Mt,Gt),this},T.endFormObject=function(k){return Na(k),this},T.doFormObject=function(k,J){var bt=pt[Pt[k]];return nt("q"),nt(J.toString()+" cm"),nt("/"+bt.id+" Do"),nt("Q"),this},T.getFormObject=function(k){var J=pt[Pt[k]];return{x:J.x,y:J.y,width:J.width,height:J.height,matrix:J.matrix}},T.save=function(k,J){return k=k||"generated.pdf",(J=J||{}).returnPromise=J.returnPromise||!1,J.returnPromise===!1?(uc(hA(bo()),k),typeof uc.unload=="function"&&Cr.setTimeout&&setTimeout(uc.unload,911),this):new Promise(function(bt,Mt){try{var Gt=uc(hA(bo()),k);typeof uc.unload=="function"&&Cr.setTimeout&&setTimeout(uc.unload,911),bt(Gt)}catch(ae){Mt(ae.message)}})},Fr.API)Fr.API.hasOwnProperty(wA)&&(wA==="events"&&Fr.API.events.length?function(k,J){var bt,Mt,Gt;for(Gt=J.length-1;Gt!==-1;Gt--)bt=J[Gt][0],Mt=J[Gt][1],k.subscribe.apply(k,[bt].concat(typeof Mt=="function"?[Mt]:Mt))}(q,Fr.API.events):T[wA]=Fr.API[wA]);var so=T.getPageWidth=function(k){return(K[k=k||dt].mediaBox.topRightX-K[k].mediaBox.bottomLeftX)/Ie},hl=T.setPageWidth=function(k,J){K[k].mediaBox.topRightX=J*Ie+K[k].mediaBox.bottomLeftX},Xo=T.getPageHeight=function(k){return(K[k=k||dt].mediaBox.topRightY-K[k].mediaBox.bottomLeftY)/Ie},_A=T.setPageHeight=function(k,J){K[k].mediaBox.topRightY=J*Ie+K[k].mediaBox.bottomLeftY};return T.internal={pdfEscape:Wi,getStyle:ol,getFont:pA,getFontSize:Ce,getCharSpace:Yl,getTextColor:Wl,getLineHeight:Bo,getLineHeightFactor:qo,getLineWidth:Tn,write:cr,getHorizontalCoordinate:Co,getVerticalCoordinate:ks,getCoordinateString:kc,getVerticalCoordinateString:ts,collections:{},newObject:qt,newAdditionalObject:Ge,newObjectDeferred:pe,newObjectDeferredBegin:ke,getFilters:Kr,putStream:qr,events:q,scaleFactor:Ie,pageSize:{getWidth:function(){return so(dt)},setWidth:function(k){hl(dt,k)},getHeight:function(){return Xo(dt)},setHeight:function(k){_A(dt,k)}},encryptionOptions:F,encryption:Ei,getEncryptor:La,output:Pa,getNumberOfPages:Ea,pages:_e,out:nt,f2:jt,f3:at,getPageInfo:wn,getPageInfoByObjId:lr,getCurrentPageInfo:Qa,getPDFVersion:R,Point:gs,Rectangle:vA,Matrix:Ut,hasHotfix:Gl},Object.defineProperty(T.internal.pageSize,"width",{get:function(){return so(dt)},set:function(k){hl(dt,k)},enumerable:!0,configurable:!0}),Object.defineProperty(T.internal.pageSize,"height",{get:function(){return Xo(dt)},set:function(k){_A(dt,k)},enumerable:!0,configurable:!0}),Ia.call(T,Ae),sr="F1",Vr(u,i),q.publish("initialized"),T}Jc.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},Jc.prototype.toHexString=function(n){return n.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Jc.prototype.hexToBytes=function(n){for(var t=[],i=0;i<n.length;i+=2)t.push(String.fromCharCode(parseInt(n.substr(i,2),16)));return t.join("")},Jc.prototype.processOwnerPassword=function(n,t){return Eg(Ig(t).substr(0,5),n)},Jc.prototype.encryptor=function(n,t){var i=Ig(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&t,t>>8&255)).substr(0,10);return function(s){return Eg(i,s)}},Vd.prototype.equals=function(n){var t,i="id,objectNumber,equals";if(!n||oi(n)!==oi(this))return!1;var s=0;for(t in this)if(!(i.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!n.hasOwnProperty(t)||this[t]!==n[t])return!1;s++}for(t in n)n.hasOwnProperty(t)&&i.indexOf(t)<0&&s--;return s===0},Fr.API={events:[]},Fr.version="2.5.1";var qi=Fr.API,Tg=1,dc=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ru=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Pr=function(n){return n.toFixed(2)},Pl=function(n){return n.toFixed(5)};qi.__acroform__={};var Ws=function(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n},cv=function(n){return n*Tg},Ja=function(n){var t=new hv,i=ir.internal.getHeight(n)||0,s=ir.internal.getWidth(n)||0;return t.BBox=[0,0,Number(Pr(s)),Number(Pr(i))],t},Q4=qi.__acroform__.setBit=function(n,t){if(n=n||0,t=t||0,isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<t},k4=qi.__acroform__.clearBit=function(n,t){if(n=n||0,t=t||0,isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<t)},M4=qi.__acroform__.getBit=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<t?1:0},rn=qi.__acroform__.getBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return M4(n,t-1)},nn=qi.__acroform__.setBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Q4(n,t-1)},sn=qi.__acroform__.clearBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return k4(n,t-1)},D4=qi.__acroform__.calculateCoordinates=function(n,t){var i=t.internal.getHorizontalCoordinate,s=t.internal.getVerticalCoordinate,u=n[0],d=n[1],p=n[2],A=n[3],v={};return v.lowerLeft_X=i(u)||0,v.lowerLeft_Y=s(d+A)||0,v.upperRight_X=i(u+p)||0,v.upperRight_Y=s(d)||0,[Number(Pr(v.lowerLeft_X)),Number(Pr(v.lowerLeft_Y)),Number(Pr(v.upperRight_X)),Number(Pr(v.upperRight_Y))]},N4=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var t=[],i=n._V||n.DV,s=Ug(n,i),u=n.scope.internal.getFont(n.fontName,n.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(n.scope.__private__.encodeColorString(n.color)),t.push("/"+u+" "+Pr(s.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC");var d=Ja(n);return d.scope=n.scope,d.stream=t.join(`
`),d}},Ug=function(n,t){var i=n.fontSize===0?n.maxFontSize:n.fontSize,s={text:"",fontSize:""},u=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");u=n.multiline?u.map(function(at){return at.split(`
`)}):u.map(function(at){return[at]});var d=i,p=ir.internal.getHeight(n)||0;p=p<0?-p:p;var A=ir.internal.getWidth(n)||0;A=A<0?-A:A;var v=function(at,ct,vt){if(at+1<u.length){var mt=ct+" "+u[at+1][0];return jd(mt,n,vt).width<=A-4}return!1};d++;t:for(;d>0;){t="",d--;var C,F,E=jd("3",n,d).height,Q=n.multiline?p-d:(p-E)/2,T=Q+=2,V=0,R=0,W=0;if(d<=0){t=`(...) Tj
`,t+="% Width of Text: "+jd(t,n,d=12).width+", FieldWidth:"+A+`
`;break}for(var j="",rt=0,ht=0;ht<u.length;ht++)if(u.hasOwnProperty(ht)){var Bt=!1;if(u[ht].length!==1&&W!==u[ht].length-1){if((E+2)*(rt+2)+2>p)continue t;j+=u[ht][W],Bt=!0,R=ht,ht--}else{j=(j+=u[ht][W]+" ").substr(j.length-1)==" "?j.substr(0,j.length-1):j;var Et=parseInt(ht),Tt=v(Et,j,d),xt=ht>=u.length-1;if(Tt&&!xt){j+=" ",W=0;continue}if(Tt||xt){if(xt)R=Et;else if(n.multiline&&(E+2)*(rt+2)+2>p)continue t}else{if(!n.multiline||(E+2)*(rt+2)+2>p)continue t;R=Et}}for(var ft="",Nt=V;Nt<=R;Nt++){var jt=u[Nt];if(n.multiline){if(Nt===R){ft+=jt[W]+" ",W=(W+1)%jt.length;continue}if(Nt===V){ft+=jt[jt.length-1]+" ";continue}}ft+=jt[0]+" "}switch(ft=ft.substr(ft.length-1)==" "?ft.substr(0,ft.length-1):ft,F=jd(ft,n,d).width,n.textAlign){case"right":C=A-F-2;break;case"center":C=(A-F)/2;break;case"left":default:C=2}t+=Pr(C)+" "+Pr(T)+` Td
`,t+="("+dc(ft)+`) Tj
`,t+=-Pr(C)+` 0 Td
`,T=-(d+2),F=0,V=Bt?R:R+1,rt++,j=""}break}return s.text=t,s.fontSize=d,s},jd=function(n,t,i){var s=t.scope.internal.getFont(t.fontName,t.fontStyle),u=t.scope.getStringUnitWidth(n,{font:s,fontSize:parseFloat(i),charSpace:0})*parseFloat(i);return{height:t.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(i),charSpace:0})*parseFloat(i)*1.5,width:u}},O4={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},R4=function(n,t){var i={type:"reference",object:n};t.internal.getPageInfo(n.page).pageContext.annotations.find(function(s){return s.type===i.type&&s.object===i.object})===void 0&&t.internal.getPageInfo(n.page).pageContext.annotations.push(i)},z4=function(n,t){for(var i in n)if(n.hasOwnProperty(i)){var s=i,u=n[i];t.internal.newObjectDeferredBegin(u.objId,!0),oi(u)==="object"&&typeof u.putStream=="function"&&u.putStream(),delete n[s]}},H4=function(n,t){if(t.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(da.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(O4)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Tg=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new dv,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(i){i.internal.events.unsubscribe(i.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete i.internal.acroformPlugin.acroFormDictionaryRoot._eventID,i.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(i){i.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=i.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var u in s)if(s.hasOwnProperty(u)){var d=s[u];d.objId=void 0,d.hasAnnotation&&R4(d,i)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(i){if(i.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");i.internal.write("/AcroForm "+i.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(i){(function(s,u){var d=!s;for(var p in s||(u.internal.newObjectDeferredBegin(u.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),u.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||u.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(p)){var A=s[p],v=[],C=A.Rect;if(A.Rect&&(A.Rect=D4(A.Rect,u)),u.internal.newObjectDeferredBegin(A.objId,!0),A.DA=ir.createDefaultAppearanceStream(A),oi(A)==="object"&&typeof A.getKeyValueListForStream=="function"&&(v=A.getKeyValueListForStream()),A.Rect=C,A.hasAppearanceStream&&!A.appearanceStreamContent){var F=N4(A);v.push({key:"AP",value:"<</N "+F+">>"}),u.internal.acroformPlugin.xForms.push(F)}if(A.appearanceStreamContent){var E="";for(var Q in A.appearanceStreamContent)if(A.appearanceStreamContent.hasOwnProperty(Q)){var T=A.appearanceStreamContent[Q];if(E+="/"+Q+" ",E+="<<",Object.keys(T).length>=1||Array.isArray(T)){for(var p in T)if(T.hasOwnProperty(p)){var V=T[p];typeof V=="function"&&(V=V.call(u,A)),E+="/"+p+" "+V+" ",u.internal.acroformPlugin.xForms.indexOf(V)>=0||u.internal.acroformPlugin.xForms.push(V)}}else typeof(V=T)=="function"&&(V=V.call(u,A)),E+="/"+p+" "+V,u.internal.acroformPlugin.xForms.indexOf(V)>=0||u.internal.acroformPlugin.xForms.push(V);E+=">>"}v.push({key:"AP",value:`<<
`+E+">>"})}u.internal.putStream({additionalKeyValues:v,objectId:A.objId}),u.internal.out("endobj")}d&&z4(u.internal.acroformPlugin.xForms,u)})(i,n)}),n.internal.acroformPlugin.isInitialized=!0}},uv=qi.__acroform__.arrayToPdfArray=function(n,t,i){var s=function(p){return p};if(Array.isArray(n)){for(var u="[",d=0;d<n.length;d++)switch(d!==0&&(u+=" "),oi(n[d])){case"boolean":case"number":case"object":u+=n[d].toString();break;case"string":n[d].substr(0,1)!=="/"?(t!==void 0&&i&&(s=i.internal.getEncryptor(t)),u+="("+dc(s(n[d].toString()))+")"):u+=n[d].toString()}return u+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Pg=function(n,t,i){var s=function(u){return u};return t!==void 0&&i&&(s=i.internal.getEncryptor(t)),(n=n||"").toString(),n="("+dc(s(n))+")"},tA=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};tA.prototype.toString=function(){return this.objId+" 0 R"},tA.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},tA.prototype.getKeyValueListForStream=function(){var n=[],t=Object.getOwnPropertyNames(this).filter(function(d){return d!="content"&&d!="appearanceStreamContent"&&d!="scope"&&d!="objId"&&d.substring(0,1)!="_"});for(var i in t)if(Object.getOwnPropertyDescriptor(this,t[i]).configurable===!1){var s=t[i],u=this[s];u&&(Array.isArray(u)?n.push({key:s,value:uv(u,this.objId,this.scope)}):u instanceof tA?(u.scope=this.scope,n.push({key:s,value:u.objId+" 0 R"})):typeof u!="function"&&n.push({key:s,value:u}))}return n};var hv=function(){tA.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(i){n=i.trim()},get:function(){return n||null}})};Ws(hv,tA);var dv=function(){tA.call(this);var n,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var i=function(s){return s};return this.scope&&(i=this.scope.internal.getEncryptor(this.objId)),"("+dc(i(n))+")"}},set:function(i){n=i}})};Ws(dv,tA);var da=function n(){tA.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute F supplied.');t=j}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!rn(t,3)},set:function(j){j?this.F=nn(t,3):this.F=sn(t,3)}});var i=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return i},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute Ff supplied.');i=j}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(j){s=j!==void 0?j:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(j){s[0]=j}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(j){s[1]=j}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(j){s[2]=j}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(j){s[3]=j}});var u="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return u},set:function(j){switch(j){case"/Btn":case"/Tx":case"/Ch":case"/Sig":u=j;break;default:throw new Error('Invalid value "'+j+'" for attribute FT supplied.')}}});var d=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!d||d.length<1){if(this instanceof qd)return;d="FieldObject"+n.FieldNum++}var j=function(rt){return rt};return this.scope&&(j=this.scope.internal.getEncryptor(this.objId)),"("+dc(j(d))+")"},set:function(j){d=j.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return d},set:function(j){d=j}});var p="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return p},set:function(j){p=j}});var A="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return A},set:function(j){A=j}});var v=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return v},set:function(j){v=j}});var C=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return C===void 0?50/Tg:C},set:function(j){C=j}});var F="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return F},set:function(j){F=j}});var E="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!E||this instanceof qd||this instanceof pc))return Pg(E,this.objId,this.scope)},set:function(j){j=j.toString(),E=j}});var Q=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(Q)return this instanceof Dn?Q:Pg(Q,this.objId,this.scope)},set:function(j){j=j.toString(),Q=this instanceof Dn?j:j.substr(0,1)==="("?ru(j.substr(1,j.length-2)):ru(j)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Dn?ru(Q.substr(1,Q.length-1)):Q},set:function(j){j=j.toString(),Q=this instanceof Dn?"/"+j:j}});var T=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(T)return T},set:function(j){this.V=j}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(T)return this instanceof Dn?T:Pg(T,this.objId,this.scope)},set:function(j){j=j.toString(),T=this instanceof Dn?j:j.substr(0,1)==="("?ru(j.substr(1,j.length-2)):ru(j)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Dn?ru(T.substr(1,T.length-1)):T},set:function(j){j=j.toString(),T=this instanceof Dn?"/"+j:j}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var V,R=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return R},set:function(j){j=!!j,R=j}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(V)return V},set:function(j){V=j}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!rn(this.Ff,1)},set:function(j){j?this.Ff=nn(this.Ff,1):this.Ff=sn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!rn(this.Ff,2)},set:function(j){j?this.Ff=nn(this.Ff,2):this.Ff=sn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!rn(this.Ff,3)},set:function(j){j?this.Ff=nn(this.Ff,3):this.Ff=sn(this.Ff,3)}});var W=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(W!==null)return W},set:function(j){if([0,1,2].indexOf(j)===-1)throw new Error('Invalid value "'+j+'" for attribute Q supplied.');W=j}}),Object.defineProperty(this,"textAlign",{get:function(){var j;switch(W){case 0:default:j="left";break;case 1:j="center";break;case 2:j="right"}return j},configurable:!0,enumerable:!0,set:function(j){switch(j){case"right":case 2:W=2;break;case"center":case 1:W=1;break;case"left":case 0:default:W=0}}})};Ws(da,tA);var iu=function(){da.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(i){n=i}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return uv(t,this.objId,this.scope)},set:function(i){var s,u;u=[],typeof(s=i)=="string"&&(u=function(d,p,A){A||(A=1);for(var v,C=[];v=p.exec(d);)C.push(v[A]);return C}(s,/\((.*?)\)/g)),t=u}}),this.getOptions=function(){return t},this.setOptions=function(i){t=i,this.sort&&t.sort()},this.addOption=function(i){i=(i=i||"").toString(),t.push(i),this.sort&&t.sort()},this.removeOption=function(i,s){for(s=s||!1,i=(i=i||"").toString();t.indexOf(i)!==-1&&(t.splice(t.indexOf(i),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!rn(this.Ff,18)},set:function(i){i?this.Ff=nn(this.Ff,18):this.Ff=sn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!rn(this.Ff,19)},set:function(i){this.combo===!0&&(i?this.Ff=nn(this.Ff,19):this.Ff=sn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!rn(this.Ff,20)},set:function(i){i?(this.Ff=nn(this.Ff,20),t.sort()):this.Ff=sn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!rn(this.Ff,22)},set:function(i){i?this.Ff=nn(this.Ff,22):this.Ff=sn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!rn(this.Ff,23)},set:function(i){i?this.Ff=nn(this.Ff,23):this.Ff=sn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!rn(this.Ff,27)},set:function(i){i?this.Ff=nn(this.Ff,27):this.Ff=sn(this.Ff,27)}}),this.hasAppearanceStream=!1};Ws(iu,da);var nu=function(){iu.call(this),this.fontName="helvetica",this.combo=!1};Ws(nu,iu);var su=function(){nu.call(this),this.combo=!0};Ws(su,nu);var Kd=function(){su.call(this),this.edit=!0};Ws(Kd,su);var Dn=function(){da.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!rn(this.Ff,15)},set:function(i){i?this.Ff=nn(this.Ff,15):this.Ff=sn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!rn(this.Ff,16)},set:function(i){i?this.Ff=nn(this.Ff,16):this.Ff=sn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!rn(this.Ff,17)},set:function(i){i?this.Ff=nn(this.Ff,17):this.Ff=sn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!rn(this.Ff,26)},set:function(i){i?this.Ff=nn(this.Ff,26):this.Ff=sn(this.Ff,26)}});var n,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(d){return d};if(this.scope&&(i=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var s,u=[];for(s in u.push("<<"),t)u.push("/"+s+" ("+dc(i(t[s]))+")");return u.push(">>"),u.join(`
`)}},set:function(i){oi(i)==="object"&&(t=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(i){typeof i=="string"&&(t.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}})};Ws(Dn,da);var $d=function(){Dn.call(this),this.pushButton=!0};Ws($d,Dn);var ou=function(){Dn.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t!==void 0?t:[]}})};Ws(ou,Dn);var qd=function(){var n,t;da.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(u){n=u}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(u){t=u}});var i,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var u=function(A){return A};this.scope&&(u=this.scope.internal.getEncryptor(this.objId));var d,p=[];for(d in p.push("<<"),s)p.push("/"+d+" ("+dc(u(s[d]))+")");return p.push(">>"),p.join(`
`)},set:function(u){oi(u)==="object"&&(s=u)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(u){typeof u=="string"&&(s.CA=u)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return i},set:function(u){i=u}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return i.substr(1,i.length-1)},set:function(u){i="/"+u}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ir.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ws(qd,da),ou.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var i=this.Kids[t];i.appearanceStreamContent=n.createAppearanceStream(i.optionName),i.caption=n.getCA()}},ou.prototype.createOption=function(n){var t=new qd;return t.Parent=this,t.optionName=n,this.Kids.push(t),V4.call(this.scope,t),t};var Gd=function(){Dn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ir.CheckBox.createAppearanceStream()};Ws(Gd,Dn);var pc=function(){da.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!rn(this.Ff,13)},set:function(t){t?this.Ff=nn(this.Ff,13):this.Ff=sn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!rn(this.Ff,21)},set:function(t){t?this.Ff=nn(this.Ff,21):this.Ff=sn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!rn(this.Ff,23)},set:function(t){t?this.Ff=nn(this.Ff,23):this.Ff=sn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!rn(this.Ff,24)},set:function(t){t?this.Ff=nn(this.Ff,24):this.Ff=sn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!rn(this.Ff,25)},set:function(t){t?this.Ff=nn(this.Ff,25):this.Ff=sn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!rn(this.Ff,26)},set:function(t){t?this.Ff=nn(this.Ff,26):this.Ff=sn(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){Number.isInteger(t)&&(n=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ws(pc,da);var Xd=function(){pc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!rn(this.Ff,14)},set:function(n){n?this.Ff=nn(this.Ff,14):this.Ff=sn(this.Ff,14)}}),this.password=!0};Ws(Xd,pc);var ir={CheckBox:{createAppearanceStream:function(){return{N:{On:ir.CheckBox.YesNormal},D:{On:ir.CheckBox.YesPushDown,Off:ir.CheckBox.OffPushDown}}},YesPushDown:function(n){var t=Ja(n);t.scope=n.scope;var i=[],s=n.scope.internal.getFont(n.fontName,n.fontStyle).id,u=n.scope.__private__.encodeColorString(n.color),d=Ug(n,n.caption);return i.push("0.749023 g"),i.push("0 0 "+Pr(ir.internal.getWidth(n))+" "+Pr(ir.internal.getHeight(n))+" re"),i.push("f"),i.push("BMC"),i.push("q"),i.push("0 0 1 rg"),i.push("/"+s+" "+Pr(d.fontSize)+" Tf "+u),i.push("BT"),i.push(d.text),i.push("ET"),i.push("Q"),i.push("EMC"),t.stream=i.join(`
`),t},YesNormal:function(n){var t=Ja(n);t.scope=n.scope;var i=n.scope.internal.getFont(n.fontName,n.fontStyle).id,s=n.scope.__private__.encodeColorString(n.color),u=[],d=ir.internal.getHeight(n),p=ir.internal.getWidth(n),A=Ug(n,n.caption);return u.push("1 g"),u.push("0 0 "+Pr(p)+" "+Pr(d)+" re"),u.push("f"),u.push("q"),u.push("0 0 1 rg"),u.push("0 0 "+Pr(p-1)+" "+Pr(d-1)+" re"),u.push("W"),u.push("n"),u.push("0 g"),u.push("BT"),u.push("/"+i+" "+Pr(A.fontSize)+" Tf "+s),u.push(A.text),u.push("ET"),u.push("Q"),t.stream=u.join(`
`),t},OffPushDown:function(n){var t=Ja(n);t.scope=n.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+Pr(ir.internal.getWidth(n))+" "+Pr(ir.internal.getHeight(n))+" re"),i.push("f"),t.stream=i.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(n){var t={D:{Off:ir.RadioButton.Circle.OffPushDown},N:{}};return t.N[n]=ir.RadioButton.Circle.YesNormal,t.D[n]=ir.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(n){var t=Ja(n);t.scope=n.scope;var i=[],s=ir.internal.getWidth(n)<=ir.internal.getHeight(n)?ir.internal.getWidth(n)/4:ir.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var u=ir.internal.Bezier_C,d=Number((s*u).toFixed(5));return i.push("q"),i.push("1 0 0 1 "+Pl(ir.internal.getWidth(n)/2)+" "+Pl(ir.internal.getHeight(n)/2)+" cm"),i.push(s+" 0 m"),i.push(s+" "+d+" "+d+" "+s+" 0 "+s+" c"),i.push("-"+d+" "+s+" -"+s+" "+d+" -"+s+" 0 c"),i.push("-"+s+" -"+d+" -"+d+" -"+s+" 0 -"+s+" c"),i.push(d+" -"+s+" "+s+" -"+d+" "+s+" 0 c"),i.push("f"),i.push("Q"),t.stream=i.join(`
`),t},YesPushDown:function(n){var t=Ja(n);t.scope=n.scope;var i=[],s=ir.internal.getWidth(n)<=ir.internal.getHeight(n)?ir.internal.getWidth(n)/4:ir.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var u=Number((2*s).toFixed(5)),d=Number((u*ir.internal.Bezier_C).toFixed(5)),p=Number((s*ir.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+Pl(ir.internal.getWidth(n)/2)+" "+Pl(ir.internal.getHeight(n)/2)+" cm"),i.push(u+" 0 m"),i.push(u+" "+d+" "+d+" "+u+" 0 "+u+" c"),i.push("-"+d+" "+u+" -"+u+" "+d+" -"+u+" 0 c"),i.push("-"+u+" -"+d+" -"+d+" -"+u+" 0 -"+u+" c"),i.push(d+" -"+u+" "+u+" -"+d+" "+u+" 0 c"),i.push("f"),i.push("Q"),i.push("0 g"),i.push("q"),i.push("1 0 0 1 "+Pl(ir.internal.getWidth(n)/2)+" "+Pl(ir.internal.getHeight(n)/2)+" cm"),i.push(s+" 0 m"),i.push(s+" "+p+" "+p+" "+s+" 0 "+s+" c"),i.push("-"+p+" "+s+" -"+s+" "+p+" -"+s+" 0 c"),i.push("-"+s+" -"+p+" -"+p+" -"+s+" 0 -"+s+" c"),i.push(p+" -"+s+" "+s+" -"+p+" "+s+" 0 c"),i.push("f"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(n){var t=Ja(n);t.scope=n.scope;var i=[],s=ir.internal.getWidth(n)<=ir.internal.getHeight(n)?ir.internal.getWidth(n)/4:ir.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var u=Number((2*s).toFixed(5)),d=Number((u*ir.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+Pl(ir.internal.getWidth(n)/2)+" "+Pl(ir.internal.getHeight(n)/2)+" cm"),i.push(u+" 0 m"),i.push(u+" "+d+" "+d+" "+u+" 0 "+u+" c"),i.push("-"+d+" "+u+" -"+u+" "+d+" -"+u+" 0 c"),i.push("-"+u+" -"+d+" -"+d+" -"+u+" 0 -"+u+" c"),i.push(d+" -"+u+" "+u+" -"+d+" "+u+" 0 c"),i.push("f"),i.push("Q"),t.stream=i.join(`
`),t}},Cross:{createAppearanceStream:function(n){var t={D:{Off:ir.RadioButton.Cross.OffPushDown},N:{}};return t.N[n]=ir.RadioButton.Cross.YesNormal,t.D[n]=ir.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(n){var t=Ja(n);t.scope=n.scope;var i=[],s=ir.internal.calculateCross(n);return i.push("q"),i.push("1 1 "+Pr(ir.internal.getWidth(n)-2)+" "+Pr(ir.internal.getHeight(n)-2)+" re"),i.push("W"),i.push("n"),i.push(Pr(s.x1.x)+" "+Pr(s.x1.y)+" m"),i.push(Pr(s.x2.x)+" "+Pr(s.x2.y)+" l"),i.push(Pr(s.x4.x)+" "+Pr(s.x4.y)+" m"),i.push(Pr(s.x3.x)+" "+Pr(s.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join(`
`),t},YesPushDown:function(n){var t=Ja(n);t.scope=n.scope;var i=ir.internal.calculateCross(n),s=[];return s.push("0.749023 g"),s.push("0 0 "+Pr(ir.internal.getWidth(n))+" "+Pr(ir.internal.getHeight(n))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+Pr(ir.internal.getWidth(n)-2)+" "+Pr(ir.internal.getHeight(n)-2)+" re"),s.push("W"),s.push("n"),s.push(Pr(i.x1.x)+" "+Pr(i.x1.y)+" m"),s.push(Pr(i.x2.x)+" "+Pr(i.x2.y)+" l"),s.push(Pr(i.x4.x)+" "+Pr(i.x4.y)+" m"),s.push(Pr(i.x3.x)+" "+Pr(i.x3.y)+" l"),s.push("s"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(n){var t=Ja(n);t.scope=n.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+Pr(ir.internal.getWidth(n))+" "+Pr(ir.internal.getHeight(n))+" re"),i.push("f"),t.stream=i.join(`
`),t}}},createDefaultAppearanceStream:function(n){var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color);return"/"+t+" "+n.fontSize+" Tf "+i}};ir.internal={Bezier_C:.551915024494,calculateCross:function(n){var t=ir.internal.getWidth(n),i=ir.internal.getHeight(n),s=Math.min(t,i);return{x1:{x:(t-s)/2,y:(i-s)/2+s},x2:{x:(t-s)/2+s,y:(i-s)/2},x3:{x:(t-s)/2,y:(i-s)/2},x4:{x:(t-s)/2+s,y:(i-s)/2+s}}}},ir.internal.getWidth=function(n){var t=0;return oi(n)==="object"&&(t=cv(n.Rect[2])),t},ir.internal.getHeight=function(n){var t=0;return oi(n)==="object"&&(t=cv(n.Rect[3])),t};var V4=qi.addField=function(n){if(H4(this,n),!(n instanceof da))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=n).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};qi.AcroFormChoiceField=iu,qi.AcroFormListBox=nu,qi.AcroFormComboBox=su,qi.AcroFormEditBox=Kd,qi.AcroFormButton=Dn,qi.AcroFormPushButton=$d,qi.AcroFormRadioButton=ou,qi.AcroFormCheckBox=Gd,qi.AcroFormTextField=pc,qi.AcroFormPasswordField=Xd,qi.AcroFormAppearance=ir,qi.AcroForm={ChoiceField:iu,ListBox:nu,ComboBox:su,EditBox:Kd,Button:Dn,PushButton:$d,RadioButton:ou,CheckBox:Gd,TextField:pc,PasswordField:Xd,Appearance:ir},Fr.AcroForm={ChoiceField:iu,ListBox:nu,ComboBox:su,EditBox:Kd,Button:Dn,PushButton:$d,RadioButton:ou,CheckBox:Gd,TextField:pc,PasswordField:Xd,Appearance:ir};function pv(n){return n.reduce(function(t,i,s){return t[i]=s,t},{})}(function(n){n.__addimage__={};var t="UNKNOWN",i={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=n.__addimage__.getImageFileTypeByImageData=function(at,ct){var vt,mt,$t,Vt,Zt,Ht=t;if((ct=ct||t)==="RGBA"||at.data!==void 0&&at.data instanceof Uint8ClampedArray&&"height"in at&&"width"in at)return"RGBA";if(Tt(at))for(Zt in i)for($t=i[Zt],vt=0;vt<$t.length;vt+=1){for(Vt=!0,mt=0;mt<$t[vt].length;mt+=1)if($t[vt][mt]!==void 0&&$t[vt][mt]!==at[mt]){Vt=!1;break}if(Vt===!0){Ht=Zt;break}}else for(Zt in i)for($t=i[Zt],vt=0;vt<$t.length;vt+=1){for(Vt=!0,mt=0;mt<$t[vt].length;mt+=1)if($t[vt][mt]!==void 0&&$t[vt][mt]!==at.charCodeAt(mt)){Vt=!1;break}if(Vt===!0){Ht=Zt;break}}return Ht===t&&ct!==t&&(Ht=ct),Ht},u=function at(ct){for(var vt=this.internal.write,mt=this.internal.putStream,$t=(0,this.internal.getFilters)();$t.indexOf("FlateEncode")!==-1;)$t.splice($t.indexOf("FlateEncode"),1);ct.objectId=this.internal.newObject();var Vt=[];if(Vt.push({key:"Type",value:"/XObject"}),Vt.push({key:"Subtype",value:"/Image"}),Vt.push({key:"Width",value:ct.width}),Vt.push({key:"Height",value:ct.height}),ct.colorSpace===W.INDEXED?Vt.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(ct.palette.length/3-1)+" "+("sMask"in ct&&ct.sMask!==void 0?ct.objectId+2:ct.objectId+1)+" 0 R]"}):(Vt.push({key:"ColorSpace",value:"/"+ct.colorSpace}),ct.colorSpace===W.DEVICE_CMYK&&Vt.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Vt.push({key:"BitsPerComponent",value:ct.bitsPerComponent}),"decodeParameters"in ct&&ct.decodeParameters!==void 0&&Vt.push({key:"DecodeParms",value:"<<"+ct.decodeParameters+">>"}),"transparency"in ct&&Array.isArray(ct.transparency)){for(var Zt="",Ht=0,Yt=ct.transparency.length;Ht<Yt;Ht++)Zt+=ct.transparency[Ht]+" "+ct.transparency[Ht]+" ";Vt.push({key:"Mask",value:"["+Zt+"]"})}ct.sMask!==void 0&&Vt.push({key:"SMask",value:ct.objectId+1+" 0 R"});var Wt=ct.filter!==void 0?["/"+ct.filter]:void 0;if(mt({data:ct.data,additionalKeyValues:Vt,alreadyAppliedFilters:Wt,objectId:ct.objectId}),vt("endobj"),"sMask"in ct&&ct.sMask!==void 0){var me="/Predictor "+ct.predictor+" /Colors 1 /BitsPerComponent "+ct.bitsPerComponent+" /Columns "+ct.width,et={width:ct.width,height:ct.height,colorSpace:"DeviceGray",bitsPerComponent:ct.bitsPerComponent,decodeParameters:me,data:ct.sMask};"filter"in ct&&(et.filter=ct.filter),at.call(this,et)}if(ct.colorSpace===W.INDEXED){var dt=this.internal.newObject();mt({data:ft(new Uint8Array(ct.palette)),objectId:dt}),vt("endobj")}},d=function(){var at=this.internal.collections.addImage_images;for(var ct in at)u.call(this,at[ct])},p=function(){var at,ct=this.internal.collections.addImage_images,vt=this.internal.write;for(var mt in ct)vt("/I"+(at=ct[mt]).index,at.objectId,"0","R")},A=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",d),this.internal.events.subscribe("putXobjectDict",p))},v=function(){var at=this.internal.collections.addImage_images;return A.call(this),at},C=function(){return Object.keys(this.internal.collections.addImage_images).length},F=function(at){return typeof n["process"+at.toUpperCase()]=="function"},E=function(at){return oi(at)==="object"&&at.nodeType===1},Q=function(at,ct){if(at.nodeName==="IMG"&&at.hasAttribute("src")){var vt=""+at.getAttribute("src");if(vt.indexOf("data:image/")===0)return vh(unescape(vt).split("base64,").pop());var mt=n.loadFile(vt,!0);if(mt!==void 0)return mt}if(at.nodeName==="CANVAS"){if(at.width===0||at.height===0)throw new Error("Given canvas must have data. Canvas width: "+at.width+", height: "+at.height);var $t;switch(ct){case"PNG":$t="image/png";break;case"WEBP":$t="image/webp";break;case"JPEG":case"JPG":default:$t="image/jpeg"}return vh(at.toDataURL($t,1).split("base64,").pop())}},T=function(at){var ct=this.internal.collections.addImage_images;if(ct){for(var vt in ct)if(at===ct[vt].alias)return ct[vt]}},V=function(at,ct,vt){return at||ct||(at=-96,ct=-96),at<0&&(at=-1*vt.width*72/at/this.internal.scaleFactor),ct<0&&(ct=-1*vt.height*72/ct/this.internal.scaleFactor),at===0&&(at=ct*vt.width/vt.height),ct===0&&(ct=at*vt.height/vt.width),[at,ct]},R=function(at,ct,vt,mt,$t,Vt){var Zt=V.call(this,vt,mt,$t),Ht=this.internal.getCoordinateString,Yt=this.internal.getVerticalCoordinateString,Wt=v.call(this);if(vt=Zt[0],mt=Zt[1],Wt[$t.index]=$t,Vt){Vt*=Math.PI/180;var me=Math.cos(Vt),et=Math.sin(Vt),dt=function(St){return St.toFixed(4)},_t=[dt(me),dt(et),dt(-1*et),dt(me),0,0,"cm"]}this.internal.write("q"),Vt?(this.internal.write([1,"0","0",1,Ht(at),Yt(ct+mt),"cm"].join(" ")),this.internal.write(_t.join(" ")),this.internal.write([Ht(vt),"0","0",Ht(mt),"0","0","cm"].join(" "))):this.internal.write([Ht(vt),"0","0",Ht(mt),Ht(at),Yt(ct+mt),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+$t.index+" Do"),this.internal.write("Q")},W=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var j=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},rt=n.__addimage__.sHashCode=function(at){var ct,vt,mt=0;if(typeof at=="string")for(vt=at.length,ct=0;ct<vt;ct++)mt=(mt<<5)-mt+at.charCodeAt(ct),mt|=0;else if(Tt(at))for(vt=at.byteLength/2,ct=0;ct<vt;ct++)mt=(mt<<5)-mt+at[ct],mt|=0;return mt},ht=n.__addimage__.validateStringAsBase64=function(at){(at=at||"").toString().trim();var ct=!0;return at.length===0&&(ct=!1),at.length%4!=0&&(ct=!1),/^[A-Za-z0-9+/]+$/.test(at.substr(0,at.length-2))===!1&&(ct=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(at.substr(-2))===!1&&(ct=!1),ct},Bt=n.__addimage__.extractImageFromDataUrl=function(at){var ct=(at=at||"").split("base64,"),vt=null;if(ct.length===2){var mt=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(ct[0]);Array.isArray(mt)&&(vt={mimeType:mt[1],charset:mt[2],data:ct[1]})}return vt},Et=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(at){return Et()&&at instanceof ArrayBuffer};var Tt=n.__addimage__.isArrayBufferView=function(at){return Et()&&typeof Uint32Array<"u"&&(at instanceof Int8Array||at instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&at instanceof Uint8ClampedArray||at instanceof Int16Array||at instanceof Uint16Array||at instanceof Int32Array||at instanceof Uint32Array||at instanceof Float32Array||at instanceof Float64Array)},xt=n.__addimage__.binaryStringToUint8Array=function(at){for(var ct=at.length,vt=new Uint8Array(ct),mt=0;mt<ct;mt++)vt[mt]=at.charCodeAt(mt);return vt},ft=n.__addimage__.arrayBufferToBinaryString=function(at){for(var ct="",vt=Tt(at)?at:new Uint8Array(at),mt=0;mt<vt.length;mt+=8192)ct+=String.fromCharCode.apply(null,vt.subarray(mt,mt+8192));return ct};n.addImage=function(){var at,ct,vt,mt,$t,Vt,Zt,Ht,Yt;if(typeof arguments[1]=="number"?(ct=t,vt=arguments[1],mt=arguments[2],$t=arguments[3],Vt=arguments[4],Zt=arguments[5],Ht=arguments[6],Yt=arguments[7]):(ct=arguments[1],vt=arguments[2],mt=arguments[3],$t=arguments[4],Vt=arguments[5],Zt=arguments[6],Ht=arguments[7],Yt=arguments[8]),oi(at=arguments[0])==="object"&&!E(at)&&"imageData"in at){var Wt=at;at=Wt.imageData,ct=Wt.format||ct||t,vt=Wt.x||vt||0,mt=Wt.y||mt||0,$t=Wt.w||Wt.width||$t,Vt=Wt.h||Wt.height||Vt,Zt=Wt.alias||Zt,Ht=Wt.compression||Ht,Yt=Wt.rotation||Wt.angle||Yt}var me=this.internal.getFilters();if(Ht===void 0&&me.indexOf("FlateEncode")!==-1&&(Ht="SLOW"),isNaN(vt)||isNaN(mt))throw new Error("Invalid coordinates passed to jsPDF.addImage");A.call(this);var et=Nt.call(this,at,ct,Zt,Ht);return R.call(this,vt,mt,$t,Vt,et,Yt),this};var Nt=function(at,ct,vt,mt){var $t,Vt,Zt;if(typeof at=="string"&&s(at)===t){at=unescape(at);var Ht=jt(at,!1);(Ht!==""||(Ht=n.loadFile(at,!0))!==void 0)&&(at=Ht)}if(E(at)&&(at=Q(at,ct)),ct=s(at,ct),!F(ct))throw new Error("addImage does not support files of type '"+ct+"', please ensure that a plugin for '"+ct+"' support is added.");if(((Zt=vt)==null||Zt.length===0)&&(vt=function(Yt){return typeof Yt=="string"||Tt(Yt)?rt(Yt):Tt(Yt.data)?rt(Yt.data):null}(at)),($t=T.call(this,vt))||(Et()&&(at instanceof Uint8Array||ct==="RGBA"||(Vt=at,at=xt(at))),$t=this["process"+ct.toUpperCase()](at,C.call(this),vt,function(Yt){return Yt&&typeof Yt=="string"&&(Yt=Yt.toUpperCase()),Yt in n.image_compression?Yt:j.NONE}(mt),Vt)),!$t)throw new Error("An unknown error occurred whilst processing the image.");return $t},jt=n.__addimage__.convertBase64ToBinaryString=function(at,ct){var vt;ct=typeof ct!="boolean"||ct;var mt,$t="";if(typeof at=="string"){mt=(vt=Bt(at))!==null?vt.data:at;try{$t=vh(mt)}catch(Vt){if(ct)throw ht(mt)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Vt.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return $t};n.getImageProperties=function(at){var ct,vt,mt="";if(E(at)&&(at=Q(at)),typeof at=="string"&&s(at)===t&&((mt=jt(at,!1))===""&&(mt=n.loadFile(at)||""),at=mt),vt=s(at),!F(vt))throw new Error("addImage does not support files of type '"+vt+"', please ensure that a plugin for '"+vt+"' support is added.");if(!Et()||at instanceof Uint8Array||(at=xt(at)),!(ct=this["process"+vt.toUpperCase()](at)))throw new Error("An unknown error occurred whilst processing the image");return ct.fileType=vt,ct}})(Fr.API),function(n){var t=function(i){if(i!==void 0&&i!="")return!0};Fr.API.events.push(["addPage",function(i){this.internal.getPageInfo(i.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(i){for(var s,u,d,p=this.internal.getCoordinateString,A=this.internal.getVerticalCoordinateString,v=this.internal.getPageInfoByObjId(i.objId),C=i.pageContext.annotations,F=!1,E=0;E<C.length&&!F;E++)switch((s=C[E]).type){case"link":(t(s.options.url)||t(s.options.pageNumber))&&(F=!0);break;case"reference":case"text":case"freetext":F=!0}if(F!=0){this.internal.write("/Annots [");for(var Q=0;Q<C.length;Q++){s=C[Q];var T=this.internal.pdfEscape,V=this.internal.getEncryptor(i.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var R=this.internal.newAdditionalObject(),W=this.internal.newAdditionalObject(),j=this.internal.getEncryptor(R.objId),rt=s.title||"Note";d="<</Type /Annot /Subtype /Text "+(u="/Rect ["+p(s.bounds.x)+" "+A(s.bounds.y+s.bounds.h)+" "+p(s.bounds.x+s.bounds.w)+" "+A(s.bounds.y)+"] ")+"/Contents ("+T(j(s.contents))+")",d+=" /Popup "+W.objId+" 0 R",d+=" /P "+v.objId+" 0 R",d+=" /T ("+T(j(rt))+") >>",R.content=d;var ht=R.objId+" 0 R";d="<</Type /Annot /Subtype /Popup "+(u="/Rect ["+p(s.bounds.x+30)+" "+A(s.bounds.y+s.bounds.h)+" "+p(s.bounds.x+s.bounds.w+30)+" "+A(s.bounds.y)+"] ")+" /Parent "+ht,s.open&&(d+=" /Open true"),d+=" >>",W.content=d,this.internal.write(R.objId,"0 R",W.objId,"0 R");break;case"freetext":u="/Rect ["+p(s.bounds.x)+" "+A(s.bounds.y)+" "+p(s.bounds.x+s.bounds.w)+" "+A(s.bounds.y+s.bounds.h)+"] ";var Bt=s.color||"#000000";d="<</Type /Annot /Subtype /FreeText "+u+"/Contents ("+T(V(s.contents))+")",d+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Bt+")",d+=" /Border [0 0 0]",d+=" >>",this.internal.write(d);break;case"link":if(s.options.name){var Et=this.annotations._nameMap[s.options.name];s.options.pageNumber=Et.page,s.options.top=Et.y}else s.options.top||(s.options.top=0);if(u="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",d="",s.options.url)d="<</Type /Annot /Subtype /Link "+u+"/Border [0 0 0] /A <</S /URI /URI ("+T(V(s.options.url))+") >>";else if(s.options.pageNumber)switch(d="<</Type /Annot /Subtype /Link "+u+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":d+=" /Fit]";break;case"FitH":d+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,d+=" /FitV "+s.options.left+"]";break;case"XYZ":default:var Tt=A(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),d+=" /XYZ "+s.options.left+" "+Tt+" "+s.options.zoom+"]"}d!=""&&(d+=" >>",this.internal.write(d))}}this.internal.write("]")}}]),n.createAnnotation=function(i){var s=this.internal.getCurrentPageInfo();switch(i.type){case"link":this.link(i.bounds.x,i.bounds.y,i.bounds.w,i.bounds.h,i);break;case"text":case"freetext":s.pageContext.annotations.push(i)}},n.link=function(i,s,u,d,p){var A=this.internal.getCurrentPageInfo(),v=this.internal.getCoordinateString,C=this.internal.getVerticalCoordinateString;A.pageContext.annotations.push({finalBounds:{x:v(i),y:C(s),w:v(i+u),h:C(s+d)},options:p,type:"link"})},n.textWithLink=function(i,s,u,d){var p,A,v=this.getTextWidth(i),C=this.internal.getLineHeight()/this.internal.scaleFactor;if(d.maxWidth!==void 0){A=d.maxWidth;var F=this.splitTextToSize(i,A).length;p=Math.ceil(C*F)}else A=v,p=C;return this.text(i,s,u,d),u+=.2*C,d.align==="center"&&(s-=v/2),d.align==="right"&&(s-=v),this.link(s,u-C,A,p,d),v},n.getTextWidth=function(i){var s=this.internal.getFontSize();return this.getStringUnitWidth(i)*s/this.internal.scaleFactor}}(Fr.API),function(n){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},i={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},u=[1570,1571,1573,1575];n.__arabicParser__={};var d=n.__arabicParser__.isInArabicSubstitutionA=function(R){return t[R.charCodeAt(0)]!==void 0},p=n.__arabicParser__.isArabicLetter=function(R){return typeof R=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(R)},A=n.__arabicParser__.isArabicEndLetter=function(R){return p(R)&&d(R)&&t[R.charCodeAt(0)].length<=2},v=n.__arabicParser__.isArabicAlfLetter=function(R){return p(R)&&u.indexOf(R.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(R){return p(R)&&d(R)&&t[R.charCodeAt(0)].length>=1};var C=n.__arabicParser__.arabicLetterHasFinalForm=function(R){return p(R)&&d(R)&&t[R.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(R){return p(R)&&d(R)&&t[R.charCodeAt(0)].length>=3};var F=n.__arabicParser__.arabicLetterHasMedialForm=function(R){return p(R)&&d(R)&&t[R.charCodeAt(0)].length==4},E=n.__arabicParser__.resolveLigatures=function(R){var W=0,j=i,rt="",ht=0;for(W=0;W<R.length;W+=1)j[R.charCodeAt(W)]!==void 0?(ht++,typeof(j=j[R.charCodeAt(W)])=="number"&&(rt+=String.fromCharCode(j),j=i,ht=0),W===R.length-1&&(j=i,rt+=R.charAt(W-(ht-1)),W-=ht-1,ht=0)):(j=i,rt+=R.charAt(W-ht),W-=ht,ht=0);return rt};n.__arabicParser__.isArabicDiacritic=function(R){return R!==void 0&&s[R.charCodeAt(0)]!==void 0};var Q=n.__arabicParser__.getCorrectForm=function(R,W,j){return p(R)?d(R)===!1?-1:!C(R)||!p(W)&&!p(j)||!p(j)&&A(W)||A(R)&&!p(W)||A(R)&&v(W)||A(R)&&A(W)?0:F(R)&&p(W)&&!A(W)&&p(j)&&C(j)?3:A(R)||!p(j)?1:2:-1},T=function(R){var W=0,j=0,rt=0,ht="",Bt="",Et="",Tt=(R=R||"").split("\\s+"),xt=[];for(W=0;W<Tt.length;W+=1){for(xt.push(""),j=0;j<Tt[W].length;j+=1)ht=Tt[W][j],Bt=Tt[W][j-1],Et=Tt[W][j+1],p(ht)?(rt=Q(ht,Bt,Et),xt[W]+=rt!==-1?String.fromCharCode(t[ht.charCodeAt(0)][rt]):ht):xt[W]+=ht;xt[W]=E(xt[W])}return xt.join(" ")},V=n.__arabicParser__.processArabic=n.processArabic=function(){var R,W=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,j=[];if(Array.isArray(W)){var rt=0;for(j=[],rt=0;rt<W.length;rt+=1)Array.isArray(W[rt])?j.push([T(W[rt][0]),W[rt][1],W[rt][2]]):j.push([T(W[rt])]);R=j}else R=T(W);return typeof arguments[0]=="string"?R:(arguments[0].text=R,arguments[0])};n.events.push(["preProcessText",V])}(Fr.API),Fr.API.autoPrint=function(n){var t;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(n){var t=function(){var i=void 0;Object.defineProperty(this,"pdf",{get:function(){return i},set:function(A){i=A}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(A){s=isNaN(A)||Number.isInteger(A)===!1||A<0?150:A,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var u=300;Object.defineProperty(this,"height",{get:function(){return u},set:function(A){u=isNaN(A)||Number.isInteger(A)===!1||A<0?300:A,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=u+1)}});var d=[];Object.defineProperty(this,"childNodes",{get:function(){return d},set:function(A){d=A}});var p={};Object.defineProperty(this,"style",{get:function(){return p},set:function(A){p=A}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(i,s){var u;if((i=i||"2d")!=="2d")return null;for(u in s)this.pdf.context2d.hasOwnProperty(u)&&(this.pdf.context2d[u]=s[u]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Fr.API),function(n){var t={left:0,top:0,bottom:0,right:0},i=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),u.call(this))},u=function(){this.internal.__cell__.lastCell=new d,this.internal.__cell__.pages=1},d=function(){var v=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return v},set:function(R){v=R}});var C=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return C},set:function(R){C=R}});var F=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return F},set:function(R){F=R}});var E=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return E},set:function(R){E=R}});var Q=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return Q},set:function(R){Q=R}});var T=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return T},set:function(R){T=R}});var V=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return V},set:function(R){V=R}}),this};d.prototype.clone=function(){return new d(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},d.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(v){return s.call(this),this.internal.__cell__.headerFunction=typeof v=="function"?v:void 0,this},n.getTextDimensions=function(v,C){s.call(this);var F=(C=C||{}).fontSize||this.getFontSize(),E=C.font||this.getFont(),Q=C.scaleFactor||this.internal.scaleFactor,T=0,V=0,R=0,W=this;if(!Array.isArray(v)&&typeof v!="string"){if(typeof v!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");v=String(v)}var j=C.maxWidth;j>0?typeof v=="string"?v=this.splitTextToSize(v,j):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(ht,Bt){return ht.concat(W.splitTextToSize(Bt,j))},[])):v=Array.isArray(v)?v:[v];for(var rt=0;rt<v.length;rt++)T<(R=this.getStringUnitWidth(v[rt],{font:E})*F)&&(T=R);return T!==0&&(V=v.length),{w:T/=Q,h:Math.max((V*F*this.getLineHeightFactor()-F*(this.getLineHeightFactor()-1))/Q,0)}},n.cellAddPage=function(){s.call(this),this.addPage();var v=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new d(v.left,v.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var p=n.cell=function(){var v;v=arguments[0]instanceof d?arguments[0]:new d(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),s.call(this);var C=this.internal.__cell__.lastCell,F=this.internal.__cell__.padding,E=this.internal.__cell__.margins||t,Q=this.internal.__cell__.tableHeaderRow,T=this.internal.__cell__.printHeaders;return C.lineNumber!==void 0&&(C.lineNumber===v.lineNumber?(v.x=(C.x||0)+(C.width||0),v.y=C.y||0):C.y+C.height+v.height+E.bottom>this.getPageHeight()?(this.cellAddPage(),v.y=E.top,T&&Q&&(this.printHeaderRow(v.lineNumber,!0),v.y+=Q[0].height)):v.y=C.y+C.height||v.y),v.text[0]!==void 0&&(this.rect(v.x,v.y,v.width,v.height,i===!0?"FD":void 0),v.align==="right"?this.text(v.text,v.x+v.width-F,v.y+F,{align:"right",baseline:"top"}):v.align==="center"?this.text(v.text,v.x+v.width/2,v.y+F,{align:"center",baseline:"top",maxWidth:v.width-F-F}):this.text(v.text,v.x+F,v.y+F,{align:"left",baseline:"top",maxWidth:v.width-F-F})),this.internal.__cell__.lastCell=v,this};n.table=function(v,C,F,E,Q){if(s.call(this),!F)throw new Error("No data for PDF table.");var T,V,R,W,j=[],rt=[],ht=[],Bt={},Et={},Tt=[],xt=[],ft=(Q=Q||{}).autoSize||!1,Nt=Q.printHeaders!==!1,jt=Q.css&&Q.css["font-size"]!==void 0?16*Q.css["font-size"]:Q.fontSize||12,at=Q.margins||Object.assign({width:this.getPageWidth()},t),ct=typeof Q.padding=="number"?Q.padding:3,vt=Q.headerBackgroundColor||"#c8c8c8",mt=Q.headerTextColor||"#000";if(u.call(this),this.internal.__cell__.printHeaders=Nt,this.internal.__cell__.margins=at,this.internal.__cell__.table_font_size=jt,this.internal.__cell__.padding=ct,this.internal.__cell__.headerBackgroundColor=vt,this.internal.__cell__.headerTextColor=mt,this.setFontSize(jt),E==null)rt=j=Object.keys(F[0]),ht=j.map(function(){return"left"});else if(Array.isArray(E)&&oi(E[0])==="object")for(j=E.map(function(Wt){return Wt.name}),rt=E.map(function(Wt){return Wt.prompt||Wt.name||""}),ht=E.map(function(Wt){return Wt.align||"left"}),T=0;T<E.length;T+=1)Et[E[T].name]=E[T].width*(19.049976/25.4);else Array.isArray(E)&&typeof E[0]=="string"&&(rt=j=E,ht=j.map(function(){return"left"}));if(ft||Array.isArray(E)&&typeof E[0]=="string")for(T=0;T<j.length;T+=1){for(Bt[W=j[T]]=F.map(function(Wt){return Wt[W]}),this.setFont(void 0,"bold"),Tt.push(this.getTextDimensions(rt[T],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),V=Bt[W],this.setFont(void 0,"normal"),R=0;R<V.length;R+=1)Tt.push(this.getTextDimensions(V[R],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Et[W]=Math.max.apply(null,Tt)+ct+ct,Tt=[]}if(Nt){var $t={};for(T=0;T<j.length;T+=1)$t[j[T]]={},$t[j[T]].text=rt[T],$t[j[T]].align=ht[T];var Vt=A.call(this,$t,Et);xt=j.map(function(Wt){return new d(v,C,Et[Wt],Vt,$t[Wt].text,void 0,$t[Wt].align)}),this.setTableHeaderRow(xt),this.printHeaderRow(1,!1)}var Zt=E.reduce(function(Wt,me){return Wt[me.name]=me.align,Wt},{});for(T=0;T<F.length;T+=1){"rowStart"in Q&&Q.rowStart instanceof Function&&Q.rowStart({row:T,data:F[T]},this);var Ht=A.call(this,F[T],Et);for(R=0;R<j.length;R+=1){var Yt=F[T][j[R]];"cellStart"in Q&&Q.cellStart instanceof Function&&Q.cellStart({row:T,col:R,data:Yt},this),p.call(this,new d(v,C,Et[j[R]],Ht,Yt,T+2,Zt[j[R]]))}}return this.internal.__cell__.table_x=v,this.internal.__cell__.table_y=C,this};var A=function(v,C){var F=this.internal.__cell__.padding,E=this.internal.__cell__.table_font_size,Q=this.internal.scaleFactor;return Object.keys(v).map(function(T){var V=v[T];return this.splitTextToSize(V.hasOwnProperty("text")?V.text:V,C[T]-F-F)},this).map(function(T){return this.getLineHeightFactor()*T.length*E/Q+F+F},this).reduce(function(T,V){return Math.max(T,V)},0)};n.setTableHeaderRow=function(v){s.call(this),this.internal.__cell__.tableHeaderRow=v},n.printHeaderRow=function(v,C){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var F;if(i=!0,typeof this.internal.__cell__.headerFunction=="function"){var E=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new d(E[0],E[1],E[2],E[3],void 0,-1)}this.setFont(void 0,"bold");for(var Q=[],T=0;T<this.internal.__cell__.tableHeaderRow.length;T+=1){F=this.internal.__cell__.tableHeaderRow[T].clone(),C&&(F.y=this.internal.__cell__.margins.top||0,Q.push(F)),F.lineNumber=v;var V=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),p.call(this,F),this.setTextColor(V)}Q.length>0&&this.setTableHeaderRow(Q),this.setFont(void 0,"normal"),i=!1}}(Fr.API);var fv={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},gv=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Lg=pv(gv),mv=[100,200,300,400,500,600,700,800,900],j4=pv(mv);function Qg(n){var t=n.family.replace(/"|'/g,"").toLowerCase(),i=function(d){return fv[d=d||"normal"]?d:"normal"}(n.style),s=function(d){if(!d)return 400;if(typeof d=="number")return d>=100&&d<=900&&d%100==0?d:400;if(/^\d00$/.test(d))return parseInt(d);switch(d){case"bold":return 700;case"normal":default:return 400}}(n.weight),u=function(d){return typeof Lg[d=d||"normal"]=="number"?d:"normal"}(n.stretch);return{family:t,style:i,weight:s,stretch:u,src:n.src||[],ref:n.ref||{name:t,style:[u,i,s].join(" ")}}}function yv(n,t,i,s){var u;for(u=i;u>=0&&u<t.length;u+=s)if(n[t[u]])return n[t[u]];for(u=i;u>=0&&u<t.length;u-=s)if(n[t[u]])return n[t[u]]}var K4={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},vv={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function wv(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function $4(n,t,i){for(var s=(i=i||{}).defaultFontFamily||"times",u=Object.assign({},K4,i.genericFontFamilies||{}),d=null,p=null,A=0;A<t.length;++A)if(u[(d=Qg(t[A])).family]&&(d.family=u[d.family]),n.hasOwnProperty(d.family)){p=n[d.family];break}if(!(p=p||n[s]))throw new Error("Could not find a font-family for the rule '"+wv(d)+"' and default family '"+s+"'.");if(p=function(v,C){if(C[v])return C[v];var F=Lg[v],E=F<=Lg.normal?-1:1,Q=yv(C,gv,F,E);if(!Q)throw new Error("Could not find a matching font-stretch value for "+v);return Q}(d.stretch,p),p=function(v,C){if(C[v])return C[v];for(var F=fv[v],E=0;E<F.length;++E)if(C[F[E]])return C[F[E]];throw new Error("Could not find a matching font-style for "+v)}(d.style,p),!(p=function(v,C){if(C[v])return C[v];if(v===400&&C[500])return C[500];if(v===500&&C[400])return C[400];var F=j4[v],E=yv(C,mv,F,v<400?-1:1);if(!E)throw new Error("Could not find a matching font-weight for value "+v);return E}(d.weight,p)))throw new Error("Failed to resolve a font for the rule '"+wv(d)+"'.");return p}function _v(n){return n.trimLeft()}function q4(n,t){for(var i=0;i<n.length;){if(n.charAt(i)===t)return[n.substring(0,i),n.substring(i+1)];i+=1}return null}function G4(n){var t=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],n.substring(t[0].length)]}var Zd,bv,xv,Bv=["times"];(function(n){var t,i,s,u,d,p,A,v,C,F=function(et){return et=et||{},this.isStrokeTransparent=et.isStrokeTransparent||!1,this.strokeOpacity=et.strokeOpacity||1,this.strokeStyle=et.strokeStyle||"#000000",this.fillStyle=et.fillStyle||"#000000",this.isFillTransparent=et.isFillTransparent||!1,this.fillOpacity=et.fillOpacity||1,this.font=et.font||"10px sans-serif",this.textBaseline=et.textBaseline||"alphabetic",this.textAlign=et.textAlign||"left",this.lineWidth=et.lineWidth||1,this.lineJoin=et.lineJoin||"miter",this.lineCap=et.lineCap||"butt",this.path=et.path||[],this.transform=et.transform!==void 0?et.transform.clone():new v,this.globalCompositeOperation=et.globalCompositeOperation||"normal",this.globalAlpha=et.globalAlpha||1,this.clip_path=et.clip_path||[],this.currentPoint=et.currentPoint||new p,this.miterLimit=et.miterLimit||10,this.lastPoint=et.lastPoint||new p,this.lineDashOffset=et.lineDashOffset||0,this.lineDash=et.lineDash||[],this.margin=et.margin||[0,0,0,0],this.prevPageLastElemOffset=et.prevPageLastElemOffset||0,this.ignoreClearRect=typeof et.ignoreClearRect!="boolean"||et.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new E(this),t=this.internal.f2,i=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,u=this.internal.getHorizontalCoordinate,d=this.internal.getVerticalCoordinate,p=this.internal.Point,A=this.internal.Rectangle,v=this.internal.Matrix,C=new F}]);var E=function(et){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var dt=et;Object.defineProperty(this,"pdf",{get:function(){return dt}});var _t=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return _t},set:function(oe){_t=!!oe}});var St=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return St},set:function(oe){St=!!oe}});var Ot=0;Object.defineProperty(this,"posX",{get:function(){return Ot},set:function(oe){isNaN(oe)||(Ot=oe)}});var Rt=0;Object.defineProperty(this,"posY",{get:function(){return Rt},set:function(oe){isNaN(oe)||(Rt=oe)}}),Object.defineProperty(this,"margin",{get:function(){return C.margin},set:function(oe){var nt;typeof oe=="number"?nt=[oe,oe,oe,oe]:((nt=new Array(4))[0]=oe[0],nt[1]=oe.length>=2?oe[1]:nt[0],nt[2]=oe.length>=3?oe[2]:nt[0],nt[3]=oe.length>=4?oe[3]:nt[1]),C.margin=nt}});var Jt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Jt},set:function(oe){Jt=oe}});var re=0;Object.defineProperty(this,"lastBreak",{get:function(){return re},set:function(oe){re=oe}});var be=[];Object.defineProperty(this,"pageBreaks",{get:function(){return be},set:function(oe){be=oe}}),Object.defineProperty(this,"ctx",{get:function(){return C},set:function(oe){oe instanceof F&&(C=oe)}}),Object.defineProperty(this,"path",{get:function(){return C.path},set:function(oe){C.path=oe}});var _e=[];Object.defineProperty(this,"ctxStack",{get:function(){return _e},set:function(oe){_e=oe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(oe){var nt;nt=Q(oe),this.ctx.fillStyle=nt.style,this.ctx.isFillTransparent=nt.a===0,this.ctx.fillOpacity=nt.a,this.pdf.setFillColor(nt.r,nt.g,nt.b,{a:nt.a}),this.pdf.setTextColor(nt.r,nt.g,nt.b,{a:nt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(oe){var nt=Q(oe);this.ctx.strokeStyle=nt.style,this.ctx.isStrokeTransparent=nt.a===0,this.ctx.strokeOpacity=nt.a,nt.a===0?this.pdf.setDrawColor(255,255,255):(nt.a,this.pdf.setDrawColor(nt.r,nt.g,nt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(oe){["butt","round","square"].indexOf(oe)!==-1&&(this.ctx.lineCap=oe,this.pdf.setLineCap(oe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(oe){isNaN(oe)||(this.ctx.lineWidth=oe,this.pdf.setLineWidth(oe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(oe){["bevel","round","miter"].indexOf(oe)!==-1&&(this.ctx.lineJoin=oe,this.pdf.setLineJoin(oe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(oe){isNaN(oe)||(this.ctx.miterLimit=oe,this.pdf.setMiterLimit(oe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(oe){this.ctx.textBaseline=oe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(oe){["right","end","center","left","start"].indexOf(oe)!==-1&&(this.ctx.textAlign=oe)}});var Te=null;function Qe(oe,nt){if(Te===null){var cr=function(Ke){var Ae=[];return Object.keys(Ke).forEach(function(ge){Ke[ge].forEach(function(Se){var Ce=null;switch(Se){case"bold":Ce={family:ge,weight:"bold"};break;case"italic":Ce={family:ge,style:"italic"};break;case"bolditalic":Ce={family:ge,weight:"bold",style:"italic"};break;case"":case"normal":Ce={family:ge}}Ce!==null&&(Ce.ref={name:ge,style:Se},Ae.push(Ce))})}),Ae}(oe.getFontList());Te=function(Ke){for(var Ae={},ge=0;ge<Ke.length;++ge){var Se=Qg(Ke[ge]),Ce=Se.family,He=Se.stretch,Xe=Se.style,nr=Se.weight;Ae[Ce]=Ae[Ce]||{},Ae[Ce][He]=Ae[Ce][He]||{},Ae[Ce][He][Xe]=Ae[Ce][He][Xe]||{},Ae[Ce][He][Xe][nr]=Se}return Ae}(cr.concat(nt))}return Te}var je=null;Object.defineProperty(this,"fontFaces",{get:function(){return je},set:function(oe){Te=null,je=oe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(oe){var nt;if(this.ctx.font=oe,(nt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(oe))!==null){var cr=nt[1],Ke=(nt[2],nt[3]),Ae=nt[4],ge=(nt[5],nt[6]),Se=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ae)[2];Ae=Math.floor(Se==="px"?parseFloat(Ae)*this.pdf.internal.scaleFactor:Se==="em"?parseFloat(Ae)*this.pdf.getFontSize():parseFloat(Ae)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ae);var Ce=function(Je){var sr,Ie,Xr=[],he=Je.trim();if(he==="")return Bv;if(he in vv)return[vv[he]];for(;he!=="";){switch(Ie=null,sr=(he=_v(he)).charAt(0)){case'"':case"'":Ie=q4(he.substring(1),sr);break;default:Ie=G4(he)}if(Ie===null||(Xr.push(Ie[0]),(he=_v(Ie[1]))!==""&&he.charAt(0)!==","))return Bv;he=he.replace(/^,/,"")}return Xr}(ge);if(this.fontFaces){var He=$4(Qe(this.pdf,this.fontFaces),Ce.map(function(Je){return{family:Je,stretch:"normal",weight:Ke,style:cr}}));this.pdf.setFont(He.ref.name,He.ref.style)}else{var Xe="";(Ke==="bold"||parseInt(Ke,10)>=700||cr==="bold")&&(Xe="bold"),cr==="italic"&&(Xe+="italic"),Xe.length===0&&(Xe="normal");for(var nr="",yr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},br=0;br<Ce.length;br++){if(this.pdf.internal.getFont(Ce[br],Xe,{noFallback:!0,disableWarning:!0})!==void 0){nr=Ce[br];break}if(Xe==="bolditalic"&&this.pdf.internal.getFont(Ce[br],"bold",{noFallback:!0,disableWarning:!0})!==void 0)nr=Ce[br],Xe="bold";else if(this.pdf.internal.getFont(Ce[br],"normal",{noFallback:!0,disableWarning:!0})!==void 0){nr=Ce[br],Xe="normal";break}}if(nr===""){for(var ce=0;ce<Ce.length;ce++)if(yr[Ce[ce]]){nr=yr[Ce[ce]];break}}nr=nr===""?"Times":nr,this.pdf.setFont(nr,Xe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(oe){this.ctx.globalCompositeOperation=oe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(oe){this.ctx.globalAlpha=oe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(oe){this.ctx.lineDashOffset=oe,me.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(oe){this.ctx.lineDash=oe,me.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(oe){this.ctx.ignoreClearRect=!!oe}})};E.prototype.setLineDash=function(et){this.lineDash=et},E.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},E.prototype.fill=function(){Bt.call(this,"fill",!1)},E.prototype.stroke=function(){Bt.call(this,"stroke",!1)},E.prototype.beginPath=function(){this.path=[{type:"begin"}]},E.prototype.moveTo=function(et,dt){if(isNaN(et)||isNaN(dt))throw Ii.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var _t=this.ctx.transform.applyToPoint(new p(et,dt));this.path.push({type:"mt",x:_t.x,y:_t.y}),this.ctx.lastPoint=new p(et,dt)},E.prototype.closePath=function(){var et=new p(0,0),dt=0;for(dt=this.path.length-1;dt!==-1;dt--)if(this.path[dt].type==="begin"&&oi(this.path[dt+1])==="object"&&typeof this.path[dt+1].x=="number"){et=new p(this.path[dt+1].x,this.path[dt+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new p(et.x,et.y)},E.prototype.lineTo=function(et,dt){if(isNaN(et)||isNaN(dt))throw Ii.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var _t=this.ctx.transform.applyToPoint(new p(et,dt));this.path.push({type:"lt",x:_t.x,y:_t.y}),this.ctx.lastPoint=new p(_t.x,_t.y)},E.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Bt.call(this,null,!0)},E.prototype.quadraticCurveTo=function(et,dt,_t,St){if(isNaN(_t)||isNaN(St)||isNaN(et)||isNaN(dt))throw Ii.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Ot=this.ctx.transform.applyToPoint(new p(_t,St)),Rt=this.ctx.transform.applyToPoint(new p(et,dt));this.path.push({type:"qct",x1:Rt.x,y1:Rt.y,x:Ot.x,y:Ot.y}),this.ctx.lastPoint=new p(Ot.x,Ot.y)},E.prototype.bezierCurveTo=function(et,dt,_t,St,Ot,Rt){if(isNaN(Ot)||isNaN(Rt)||isNaN(et)||isNaN(dt)||isNaN(_t)||isNaN(St))throw Ii.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Jt=this.ctx.transform.applyToPoint(new p(Ot,Rt)),re=this.ctx.transform.applyToPoint(new p(et,dt)),be=this.ctx.transform.applyToPoint(new p(_t,St));this.path.push({type:"bct",x1:re.x,y1:re.y,x2:be.x,y2:be.y,x:Jt.x,y:Jt.y}),this.ctx.lastPoint=new p(Jt.x,Jt.y)},E.prototype.arc=function(et,dt,_t,St,Ot,Rt){if(isNaN(et)||isNaN(dt)||isNaN(_t)||isNaN(St)||isNaN(Ot))throw Ii.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Rt=!!Rt,!this.ctx.transform.isIdentity){var Jt=this.ctx.transform.applyToPoint(new p(et,dt));et=Jt.x,dt=Jt.y;var re=this.ctx.transform.applyToPoint(new p(0,_t)),be=this.ctx.transform.applyToPoint(new p(0,0));_t=Math.sqrt(Math.pow(re.x-be.x,2)+Math.pow(re.y-be.y,2))}Math.abs(Ot-St)>=2*Math.PI&&(St=0,Ot=2*Math.PI),this.path.push({type:"arc",x:et,y:dt,radius:_t,startAngle:St,endAngle:Ot,counterclockwise:Rt})},E.prototype.arcTo=function(et,dt,_t,St,Ot){throw new Error("arcTo not implemented.")},E.prototype.rect=function(et,dt,_t,St){if(isNaN(et)||isNaN(dt)||isNaN(_t)||isNaN(St))throw Ii.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(et,dt),this.lineTo(et+_t,dt),this.lineTo(et+_t,dt+St),this.lineTo(et,dt+St),this.lineTo(et,dt),this.lineTo(et+_t,dt),this.lineTo(et,dt)},E.prototype.fillRect=function(et,dt,_t,St){if(isNaN(et)||isNaN(dt)||isNaN(_t)||isNaN(St))throw Ii.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!T.call(this)){var Ot={};this.lineCap!=="butt"&&(Ot.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Ot.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(et,dt,_t,St),this.fill(),Ot.hasOwnProperty("lineCap")&&(this.lineCap=Ot.lineCap),Ot.hasOwnProperty("lineJoin")&&(this.lineJoin=Ot.lineJoin)}},E.prototype.strokeRect=function(et,dt,_t,St){if(isNaN(et)||isNaN(dt)||isNaN(_t)||isNaN(St))throw Ii.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");V.call(this)||(this.beginPath(),this.rect(et,dt,_t,St),this.stroke())},E.prototype.clearRect=function(et,dt,_t,St){if(isNaN(et)||isNaN(dt)||isNaN(_t)||isNaN(St))throw Ii.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(et,dt,_t,St))},E.prototype.save=function(et){et=typeof et!="boolean"||et;for(var dt=this.pdf.internal.getCurrentPageInfo().pageNumber,_t=0;_t<this.pdf.internal.getNumberOfPages();_t++)this.pdf.setPage(_t+1),this.pdf.internal.out("q");if(this.pdf.setPage(dt),et){this.ctx.fontSize=this.pdf.internal.getFontSize();var St=new F(this.ctx);this.ctxStack.push(this.ctx),this.ctx=St}},E.prototype.restore=function(et){et=typeof et!="boolean"||et;for(var dt=this.pdf.internal.getCurrentPageInfo().pageNumber,_t=0;_t<this.pdf.internal.getNumberOfPages();_t++)this.pdf.setPage(_t+1),this.pdf.internal.out("Q");this.pdf.setPage(dt),et&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},E.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var Q=function(et){var dt,_t,St,Ot;if(et.isCanvasGradient===!0&&(et=et.getColor()),!et)return{r:0,g:0,b:0,a:0,style:et};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(et))dt=0,_t=0,St=0,Ot=0;else{var Rt=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(et);if(Rt!==null)dt=parseInt(Rt[1]),_t=parseInt(Rt[2]),St=parseInt(Rt[3]),Ot=1;else if((Rt=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(et))!==null)dt=parseInt(Rt[1]),_t=parseInt(Rt[2]),St=parseInt(Rt[3]),Ot=parseFloat(Rt[4]);else{if(Ot=1,typeof et=="string"&&et.charAt(0)!=="#"){var Jt=new nv(et);et=Jt.ok?Jt.toHex():"#000000"}et.length===4?(dt=et.substring(1,2),dt+=dt,_t=et.substring(2,3),_t+=_t,St=et.substring(3,4),St+=St):(dt=et.substring(1,3),_t=et.substring(3,5),St=et.substring(5,7)),dt=parseInt(dt,16),_t=parseInt(_t,16),St=parseInt(St,16)}}return{r:dt,g:_t,b:St,a:Ot,style:et}},T=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},V=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};E.prototype.fillText=function(et,dt,_t,St){if(isNaN(dt)||isNaN(_t)||typeof et!="string")throw Ii.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(St=isNaN(St)?void 0:St,!T.call(this)){var Ot=Ht(this.ctx.transform.rotation),Rt=this.ctx.transform.scaleX;ct.call(this,{text:et,x:dt,y:_t,scale:Rt,angle:Ot,align:this.textAlign,maxWidth:St})}},E.prototype.strokeText=function(et,dt,_t,St){if(isNaN(dt)||isNaN(_t)||typeof et!="string")throw Ii.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!V.call(this)){St=isNaN(St)?void 0:St;var Ot=Ht(this.ctx.transform.rotation),Rt=this.ctx.transform.scaleX;ct.call(this,{text:et,x:dt,y:_t,scale:Rt,renderingMode:"stroke",angle:Ot,align:this.textAlign,maxWidth:St})}},E.prototype.measureText=function(et){if(typeof et!="string")throw Ii.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var dt=this.pdf,_t=this.pdf.internal.scaleFactor,St=dt.internal.getFontSize(),Ot=dt.getStringUnitWidth(et)*St/dt.internal.scaleFactor,Rt=function(Jt){var re=(Jt=Jt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return re}}),this};return new Rt({width:Ot*=Math.round(96*_t/72*1e4)/1e4})},E.prototype.scale=function(et,dt){if(isNaN(et)||isNaN(dt))throw Ii.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var _t=new v(et,0,0,dt,0,0);this.ctx.transform=this.ctx.transform.multiply(_t)},E.prototype.rotate=function(et){if(isNaN(et))throw Ii.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var dt=new v(Math.cos(et),Math.sin(et),-Math.sin(et),Math.cos(et),0,0);this.ctx.transform=this.ctx.transform.multiply(dt)},E.prototype.translate=function(et,dt){if(isNaN(et)||isNaN(dt))throw Ii.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var _t=new v(1,0,0,1,et,dt);this.ctx.transform=this.ctx.transform.multiply(_t)},E.prototype.transform=function(et,dt,_t,St,Ot,Rt){if(isNaN(et)||isNaN(dt)||isNaN(_t)||isNaN(St)||isNaN(Ot)||isNaN(Rt))throw Ii.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Jt=new v(et,dt,_t,St,Ot,Rt);this.ctx.transform=this.ctx.transform.multiply(Jt)},E.prototype.setTransform=function(et,dt,_t,St,Ot,Rt){et=isNaN(et)?1:et,dt=isNaN(dt)?0:dt,_t=isNaN(_t)?0:_t,St=isNaN(St)?1:St,Ot=isNaN(Ot)?0:Ot,Rt=isNaN(Rt)?0:Rt,this.ctx.transform=new v(et,dt,_t,St,Ot,Rt)};var R=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};E.prototype.drawImage=function(et,dt,_t,St,Ot,Rt,Jt,re,be){var _e=this.pdf.getImageProperties(et),Te=1,Qe=1,je=1,oe=1;St!==void 0&&re!==void 0&&(je=re/St,oe=be/Ot,Te=_e.width/St*re/St,Qe=_e.height/Ot*be/Ot),Rt===void 0&&(Rt=dt,Jt=_t,dt=0,_t=0),St!==void 0&&re===void 0&&(re=St,be=Ot),St===void 0&&re===void 0&&(re=_e.width,be=_e.height);for(var nt,cr=this.ctx.transform.decompose(),Ke=Ht(cr.rotate.shx),Ae=new v,ge=(Ae=(Ae=(Ae=Ae.multiply(cr.translate)).multiply(cr.skew)).multiply(cr.scale)).applyToRectangle(new A(Rt-dt*je,Jt-_t*oe,St*Te,Ot*Qe)),Se=W.call(this,ge),Ce=[],He=0;He<Se.length;He+=1)Ce.indexOf(Se[He])===-1&&Ce.push(Se[He]);if(ht(Ce),this.autoPaging)for(var Xe=Ce[0],nr=Ce[Ce.length-1],yr=Xe;yr<nr+1;yr++){this.pdf.setPage(yr);var br=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ce=yr===1?this.posY+this.margin[0]:this.margin[0],Je=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],sr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ie=yr===1?0:Je+(yr-2)*sr;if(this.ctx.clip_path.length!==0){var Xr=this.path;nt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=rt(nt,this.posX+this.margin[3],-Ie+ce+this.ctx.prevPageLastElemOffset),Et.call(this,"fill",!0),this.path=Xr}var he=JSON.parse(JSON.stringify(ge));he=rt([he],this.posX+this.margin[3],-Ie+ce+this.ctx.prevPageLastElemOffset)[0];var rr=(yr>Xe||yr<nr)&&R.call(this);rr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],br,sr,null).clip().discardPath()),this.pdf.addImage(et,"JPEG",he.x,he.y,he.w,he.h,null,null,Ke),rr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(et,"JPEG",ge.x,ge.y,ge.w,ge.h,null,null,Ke)};var W=function(et,dt,_t){var St=[];dt=dt||this.pdf.internal.pageSize.width,_t=_t||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Ot=this.posY+this.ctx.prevPageLastElemOffset;switch(et.type){default:case"mt":case"lt":St.push(Math.floor((et.y+Ot)/_t)+1);break;case"arc":St.push(Math.floor((et.y+Ot-et.radius)/_t)+1),St.push(Math.floor((et.y+Ot+et.radius)/_t)+1);break;case"qct":var Rt=Yt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,et.x1,et.y1,et.x,et.y);St.push(Math.floor((Rt.y+Ot)/_t)+1),St.push(Math.floor((Rt.y+Rt.h+Ot)/_t)+1);break;case"bct":var Jt=Wt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,et.x1,et.y1,et.x2,et.y2,et.x,et.y);St.push(Math.floor((Jt.y+Ot)/_t)+1),St.push(Math.floor((Jt.y+Jt.h+Ot)/_t)+1);break;case"rect":St.push(Math.floor((et.y+Ot)/_t)+1),St.push(Math.floor((et.y+et.h+Ot)/_t)+1)}for(var re=0;re<St.length;re+=1)for(;this.pdf.internal.getNumberOfPages()<St[re];)j.call(this);return St},j=function(){var et=this.fillStyle,dt=this.strokeStyle,_t=this.font,St=this.lineCap,Ot=this.lineWidth,Rt=this.lineJoin;this.pdf.addPage(),this.fillStyle=et,this.strokeStyle=dt,this.font=_t,this.lineCap=St,this.lineWidth=Ot,this.lineJoin=Rt},rt=function(et,dt,_t){for(var St=0;St<et.length;St++)switch(et[St].type){case"bct":et[St].x2+=dt,et[St].y2+=_t;case"qct":et[St].x1+=dt,et[St].y1+=_t;case"mt":case"lt":case"arc":default:et[St].x+=dt,et[St].y+=_t}return et},ht=function(et){return et.sort(function(dt,_t){return dt-_t})},Bt=function(et,dt){for(var _t,St,Ot=this.fillStyle,Rt=this.strokeStyle,Jt=this.lineCap,re=this.lineWidth,be=Math.abs(re*this.ctx.transform.scaleX),_e=this.lineJoin,Te=JSON.parse(JSON.stringify(this.path)),Qe=JSON.parse(JSON.stringify(this.path)),je=[],oe=0;oe<Qe.length;oe++)if(Qe[oe].x!==void 0)for(var nt=W.call(this,Qe[oe]),cr=0;cr<nt.length;cr+=1)je.indexOf(nt[cr])===-1&&je.push(nt[cr]);for(var Ke=0;Ke<je.length;Ke++)for(;this.pdf.internal.getNumberOfPages()<je[Ke];)j.call(this);if(ht(je),this.autoPaging)for(var Ae=je[0],ge=je[je.length-1],Se=Ae;Se<ge+1;Se++){this.pdf.setPage(Se),this.fillStyle=Ot,this.strokeStyle=Rt,this.lineCap=Jt,this.lineWidth=be,this.lineJoin=_e;var Ce=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],He=Se===1?this.posY+this.margin[0]:this.margin[0],Xe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],nr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],yr=Se===1?0:Xe+(Se-2)*nr;if(this.ctx.clip_path.length!==0){var br=this.path;_t=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=rt(_t,this.posX+this.margin[3],-yr+He+this.ctx.prevPageLastElemOffset),Et.call(this,et,!0),this.path=br}if(St=JSON.parse(JSON.stringify(Te)),this.path=rt(St,this.posX+this.margin[3],-yr+He+this.ctx.prevPageLastElemOffset),dt===!1||Se===0){var ce=(Se>Ae||Se<ge)&&R.call(this);ce&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ce,nr,null).clip().discardPath()),Et.call(this,et,dt),ce&&this.pdf.restoreGraphicsState()}this.lineWidth=re}else this.lineWidth=be,Et.call(this,et,dt),this.lineWidth=re;this.path=Te},Et=function(et,dt){if((et!=="stroke"||dt||!V.call(this))&&(et==="stroke"||dt||!T.call(this))){for(var _t,St,Ot=[],Rt=this.path,Jt=0;Jt<Rt.length;Jt++){var re=Rt[Jt];switch(re.type){case"begin":Ot.push({begin:!0});break;case"close":Ot.push({close:!0});break;case"mt":Ot.push({start:re,deltas:[],abs:[]});break;case"lt":var be=Ot.length;if(Rt[Jt-1]&&!isNaN(Rt[Jt-1].x)&&(_t=[re.x-Rt[Jt-1].x,re.y-Rt[Jt-1].y],be>0)){for(;be>=0;be--)if(Ot[be-1].close!==!0&&Ot[be-1].begin!==!0){Ot[be-1].deltas.push(_t),Ot[be-1].abs.push(re);break}}break;case"bct":_t=[re.x1-Rt[Jt-1].x,re.y1-Rt[Jt-1].y,re.x2-Rt[Jt-1].x,re.y2-Rt[Jt-1].y,re.x-Rt[Jt-1].x,re.y-Rt[Jt-1].y],Ot[Ot.length-1].deltas.push(_t);break;case"qct":var _e=Rt[Jt-1].x+2/3*(re.x1-Rt[Jt-1].x),Te=Rt[Jt-1].y+2/3*(re.y1-Rt[Jt-1].y),Qe=re.x+2/3*(re.x1-re.x),je=re.y+2/3*(re.y1-re.y),oe=re.x,nt=re.y;_t=[_e-Rt[Jt-1].x,Te-Rt[Jt-1].y,Qe-Rt[Jt-1].x,je-Rt[Jt-1].y,oe-Rt[Jt-1].x,nt-Rt[Jt-1].y],Ot[Ot.length-1].deltas.push(_t);break;case"arc":Ot.push({deltas:[],abs:[],arc:!0}),Array.isArray(Ot[Ot.length-1].abs)&&Ot[Ot.length-1].abs.push(re)}}St=dt?null:et==="stroke"?"stroke":"fill";for(var cr=!1,Ke=0;Ke<Ot.length;Ke++)if(Ot[Ke].arc)for(var Ae=Ot[Ke].abs,ge=0;ge<Ae.length;ge++){var Se=Ae[ge];Se.type==="arc"?ft.call(this,Se.x,Se.y,Se.radius,Se.startAngle,Se.endAngle,Se.counterclockwise,void 0,dt,!cr):vt.call(this,Se.x,Se.y),cr=!0}else if(Ot[Ke].close===!0)this.pdf.internal.out("h"),cr=!1;else if(Ot[Ke].begin!==!0){var Ce=Ot[Ke].start.x,He=Ot[Ke].start.y;mt.call(this,Ot[Ke].deltas,Ce,He),cr=!0}St&&Nt.call(this,St),dt&&jt.call(this)}},Tt=function(et){var dt=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,_t=dt*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return et-_t;case"top":return et+dt-_t;case"hanging":return et+dt-2*_t;case"middle":return et+dt/2-_t;case"ideographic":return et;case"alphabetic":default:return et}},xt=function(et){return et+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};E.prototype.createLinearGradient=function(){var et=function(){};return et.colorStops=[],et.addColorStop=function(dt,_t){this.colorStops.push([dt,_t])},et.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},et.isCanvasGradient=!0,et},E.prototype.createPattern=function(){return this.createLinearGradient()},E.prototype.createRadialGradient=function(){return this.createLinearGradient()};var ft=function(et,dt,_t,St,Ot,Rt,Jt,re,be){for(var _e=Vt.call(this,_t,St,Ot,Rt),Te=0;Te<_e.length;Te++){var Qe=_e[Te];Te===0&&(be?at.call(this,Qe.x1+et,Qe.y1+dt):vt.call(this,Qe.x1+et,Qe.y1+dt)),$t.call(this,et,dt,Qe.x2,Qe.y2,Qe.x3,Qe.y3,Qe.x4,Qe.y4)}re?jt.call(this):Nt.call(this,Jt)},Nt=function(et){switch(et){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},jt=function(){this.pdf.clip(),this.pdf.discardPath()},at=function(et,dt){this.pdf.internal.out(i(et)+" "+s(dt)+" m")},ct=function(et){var dt;switch(et.align){case"right":case"end":dt="right";break;case"center":dt="center";break;case"left":case"start":default:dt="left"}var _t=this.pdf.getTextDimensions(et.text),St=Tt.call(this,et.y),Ot=xt.call(this,St)-_t.h,Rt=this.ctx.transform.applyToPoint(new p(et.x,St)),Jt=this.ctx.transform.decompose(),re=new v;re=(re=(re=re.multiply(Jt.translate)).multiply(Jt.skew)).multiply(Jt.scale);for(var be,_e,Te,Qe=this.ctx.transform.applyToRectangle(new A(et.x,St,_t.w,_t.h)),je=re.applyToRectangle(new A(et.x,Ot,_t.w,_t.h)),oe=W.call(this,je),nt=[],cr=0;cr<oe.length;cr+=1)nt.indexOf(oe[cr])===-1&&nt.push(oe[cr]);if(ht(nt),this.autoPaging)for(var Ke=nt[0],Ae=nt[nt.length-1],ge=Ke;ge<Ae+1;ge++){this.pdf.setPage(ge);var Se=ge===1?this.posY+this.margin[0]:this.margin[0],Ce=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],He=this.pdf.internal.pageSize.height-this.margin[2],Xe=He-this.margin[0],nr=this.pdf.internal.pageSize.width-this.margin[1],yr=nr-this.margin[3],br=ge===1?0:Ce+(ge-2)*Xe;if(this.ctx.clip_path.length!==0){var ce=this.path;be=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=rt(be,this.posX+this.margin[3],-1*br+Se),Et.call(this,"fill",!0),this.path=ce}var Je=rt([JSON.parse(JSON.stringify(je))],this.posX+this.margin[3],-br+Se+this.ctx.prevPageLastElemOffset)[0];et.scale>=.01&&(_e=this.pdf.internal.getFontSize(),this.pdf.setFontSize(_e*et.scale),Te=this.lineWidth,this.lineWidth=Te*et.scale);var sr=this.autoPaging!=="text";if(sr||Je.y+Je.h<=He){if(sr||Je.y>=Se&&Je.x<=nr){var Ie=sr?et.text:this.pdf.splitTextToSize(et.text,et.maxWidth||nr-Je.x)[0],Xr=rt([JSON.parse(JSON.stringify(Qe))],this.posX+this.margin[3],-br+Se+this.ctx.prevPageLastElemOffset)[0],he=sr&&(ge>Ke||ge<Ae)&&R.call(this);he&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],yr,Xe,null).clip().discardPath()),this.pdf.text(Ie,Xr.x,Xr.y,{angle:et.angle,align:dt,renderingMode:et.renderingMode}),he&&this.pdf.restoreGraphicsState()}}else Je.y<He&&(this.ctx.prevPageLastElemOffset+=He-Je.y);et.scale>=.01&&(this.pdf.setFontSize(_e),this.lineWidth=Te)}else et.scale>=.01&&(_e=this.pdf.internal.getFontSize(),this.pdf.setFontSize(_e*et.scale),Te=this.lineWidth,this.lineWidth=Te*et.scale),this.pdf.text(et.text,Rt.x+this.posX,Rt.y+this.posY,{angle:et.angle,align:dt,renderingMode:et.renderingMode,maxWidth:et.maxWidth}),et.scale>=.01&&(this.pdf.setFontSize(_e),this.lineWidth=Te)},vt=function(et,dt,_t,St){_t=_t||0,St=St||0,this.pdf.internal.out(i(et+_t)+" "+s(dt+St)+" l")},mt=function(et,dt,_t){return this.pdf.lines(et,dt,_t,null,null)},$t=function(et,dt,_t,St,Ot,Rt,Jt,re){this.pdf.internal.out([t(u(_t+et)),t(d(St+dt)),t(u(Ot+et)),t(d(Rt+dt)),t(u(Jt+et)),t(d(re+dt)),"c"].join(" "))},Vt=function(et,dt,_t,St){for(var Ot=2*Math.PI,Rt=Math.PI/2;dt>_t;)dt-=Ot;var Jt=Math.abs(_t-dt);Jt<Ot&&St&&(Jt=Ot-Jt);for(var re=[],be=St?-1:1,_e=dt;Jt>1e-5;){var Te=_e+be*Math.min(Jt,Rt);re.push(Zt.call(this,et,_e,Te)),Jt-=Math.abs(Te-_e),_e=Te}return re},Zt=function(et,dt,_t){var St=(_t-dt)/2,Ot=et*Math.cos(St),Rt=et*Math.sin(St),Jt=Ot,re=-Rt,be=Jt*Jt+re*re,_e=be+Jt*Ot+re*Rt,Te=4/3*(Math.sqrt(2*be*_e)-_e)/(Jt*Rt-re*Ot),Qe=Jt-Te*re,je=re+Te*Jt,oe=Qe,nt=-je,cr=St+dt,Ke=Math.cos(cr),Ae=Math.sin(cr);return{x1:et*Math.cos(dt),y1:et*Math.sin(dt),x2:Qe*Ke-je*Ae,y2:Qe*Ae+je*Ke,x3:oe*Ke-nt*Ae,y3:oe*Ae+nt*Ke,x4:et*Math.cos(_t),y4:et*Math.sin(_t)}},Ht=function(et){return 180*et/Math.PI},Yt=function(et,dt,_t,St,Ot,Rt){var Jt=et+.5*(_t-et),re=dt+.5*(St-dt),be=Ot+.5*(_t-Ot),_e=Rt+.5*(St-Rt),Te=Math.min(et,Ot,Jt,be),Qe=Math.max(et,Ot,Jt,be),je=Math.min(dt,Rt,re,_e),oe=Math.max(dt,Rt,re,_e);return new A(Te,je,Qe-Te,oe-je)},Wt=function(et,dt,_t,St,Ot,Rt,Jt,re){var be,_e,Te,Qe,je,oe,nt,cr,Ke,Ae,ge,Se,Ce,He,Xe=_t-et,nr=St-dt,yr=Ot-_t,br=Rt-St,ce=Jt-Ot,Je=re-Rt;for(_e=0;_e<41;_e++)Ke=(nt=(Te=et+(be=_e/40)*Xe)+be*((je=_t+be*yr)-Te))+be*(je+be*(Ot+be*ce-je)-nt),Ae=(cr=(Qe=dt+be*nr)+be*((oe=St+be*br)-Qe))+be*(oe+be*(Rt+be*Je-oe)-cr),_e==0?(ge=Ke,Se=Ae,Ce=Ke,He=Ae):(ge=Math.min(ge,Ke),Se=Math.min(Se,Ae),Ce=Math.max(Ce,Ke),He=Math.max(He,Ae));return new A(Math.round(ge),Math.round(Se),Math.round(Ce-ge),Math.round(He-Se))},me=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var et,dt,_t=(et=this.ctx.lineDash,dt=this.ctx.lineDashOffset,JSON.stringify({lineDash:et,lineDashOffset:dt}));this.prevLineDash!==_t&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=_t)}}})(Fr.API),function(n){var t=function(d){var p,A,v,C,F,E,Q,T,V,R;for(A=[],v=0,C=(d+=p="\0\0\0\0".slice(d.length%4||4)).length;C>v;v+=4)(F=(d.charCodeAt(v)<<24)+(d.charCodeAt(v+1)<<16)+(d.charCodeAt(v+2)<<8)+d.charCodeAt(v+3))!==0?(E=(F=((F=((F=((F=(F-(R=F%85))/85)-(V=F%85))/85)-(T=F%85))/85)-(Q=F%85))/85)%85,A.push(E+33,Q+33,T+33,V+33,R+33)):A.push(122);return function(W,j){for(var rt=j;rt>0;rt--)W.pop()}(A,p.length),String.fromCharCode.apply(String,A)+"~>"},i=function(d){var p,A,v,C,F,E=String,Q="length",T=255,V="charCodeAt",R="slice",W="replace";for(d[R](-2),d=d[R](0,-2)[W](/\s/g,"")[W]("z","!!!!!"),v=[],C=0,F=(d+=p="uuuuu"[R](d[Q]%5||5))[Q];F>C;C+=5)A=52200625*(d[V](C)-33)+614125*(d[V](C+1)-33)+7225*(d[V](C+2)-33)+85*(d[V](C+3)-33)+(d[V](C+4)-33),v.push(T&A>>24,T&A>>16,T&A>>8,T&A);return function(j,rt){for(var ht=rt;ht>0;ht--)j.pop()}(v,p[Q]),E.fromCharCode.apply(E,v)},s=function(d){var p=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((d=d.replace(/\s/g,"")).indexOf(">")!==-1&&(d=d.substr(0,d.indexOf(">"))),d.length%2&&(d+="0"),p.test(d)===!1)return"";for(var A="",v=0;v<d.length;v+=2)A+=String.fromCharCode("0x"+(d[v]+d[v+1]));return A},u=function(d){for(var p=new Uint8Array(d.length),A=d.length;A--;)p[A]=d.charCodeAt(A);return d=(p=xg(p)).reduce(function(v,C){return v+String.fromCharCode(C)},"")};n.processDataByFilters=function(d,p){var A=0,v=d||"",C=[];for(typeof(p=p||[])=="string"&&(p=[p]),A=0;A<p.length;A+=1)switch(p[A]){case"ASCII85Decode":case"/ASCII85Decode":v=i(v),C.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":v=t(v),C.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":v=s(v),C.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":v=v.split("").map(function(F){return("0"+F.charCodeAt().toString(16)).slice(-2)}).join("")+">",C.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":v=u(v),C.push("/FlateDecode");break;default:throw new Error('The filter: "'+p[A]+'" is not implemented')}return{data:v,reverseChain:C.reverse().join(" ")}}}(Fr.API),function(n){n.loadFile=function(t,i,s){return function(u,d,p){d=d!==!1,p=typeof p=="function"?p:function(){};var A=void 0;try{A=function(v,C,F){var E=new XMLHttpRequest,Q=0,T=function(V){var R=V.length,W=[],j=String.fromCharCode;for(Q=0;Q<R;Q+=1)W.push(j(255&V.charCodeAt(Q)));return W.join("")};if(E.open("GET",v,!C),E.overrideMimeType("text/plain; charset=x-user-defined"),C===!1&&(E.onload=function(){E.status===200?F(T(this.responseText)):F(void 0)}),E.send(null),C&&E.status===200)return T(E.responseText)}(u,d,p)}catch{}return A}(t,i,s)},n.loadImageFile=n.loadFile}(Fr.API),function(n){function t(){return(Cr.html2canvas?Promise.resolve(Cr.html2canvas):Promise.resolve().then(()=>zT)).catch(function(p){return Promise.reject(new Error("Could not load html2canvas: "+p))}).then(function(p){return p.default?p.default:p})}function i(){return(Cr.DOMPurify?Promise.resolve(Cr.DOMPurify):Promise.resolve().then(()=>mU)).catch(function(p){return Promise.reject(new Error("Could not load dompurify: "+p))}).then(function(p){return p.default?p.default:p})}var s=function(p){var A=oi(p);return A==="undefined"?"undefined":A==="string"||p instanceof String?"string":A==="number"||p instanceof Number?"number":A==="function"||p instanceof Function?"function":p&&p.constructor===Array?"array":p&&p.nodeType===1?"element":A==="object"?"object":"unknown"},u=function(p,A){var v=document.createElement(p);for(var C in A.className&&(v.className=A.className),A.innerHTML&&A.dompurify&&(v.innerHTML=A.dompurify.sanitize(A.innerHTML)),A.style)v.style[C]=A.style[C];return v},d=function p(A){var v=Object.assign(p.convert(Promise.resolve()),JSON.parse(JSON.stringify(p.template))),C=p.convert(Promise.resolve(),v);return C=(C=C.setProgress(1,p,1,[p])).set(A)};(d.prototype=Object.create(Promise.prototype)).constructor=d,d.convert=function(p,A){return p.__proto__=A||d.prototype,p},d.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},d.prototype.from=function(p,A){return this.then(function(){switch(A=A||function(v){switch(s(v)){case"string":return"string";case"element":return v.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(p)){case"string":return this.then(i).then(function(v){return this.set({src:u("div",{innerHTML:p,dompurify:v})})});case"element":return this.set({src:p});case"canvas":return this.set({canvas:p});case"img":return this.set({img:p});default:return this.error("Unknown source type.")}})},d.prototype.to=function(p){switch(p){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},d.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var p={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},A=function v(C,F){for(var E=C.nodeType===3?document.createTextNode(C.nodeValue):C.cloneNode(!1),Q=C.firstChild;Q;Q=Q.nextSibling)F!==!0&&Q.nodeType===1&&Q.nodeName==="SCRIPT"||E.appendChild(v(Q,F));return C.nodeType===1&&(C.nodeName==="CANVAS"?(E.width=C.width,E.height=C.height,E.getContext("2d").drawImage(C,0,0)):C.nodeName!=="TEXTAREA"&&C.nodeName!=="SELECT"||(E.value=C.value),E.addEventListener("load",function(){E.scrollTop=C.scrollTop,E.scrollLeft=C.scrollLeft},!0)),E}(this.prop.src,this.opt.html2canvas.javascriptEnabled);A.tagName==="BODY"&&(p.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=u("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=u("div",{className:"html2pdf__container",style:p}),this.prop.container.appendChild(A),this.prop.container.firstChild.appendChild(u("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},d.prototype.toCanvas=function(){var p=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(p).then(t).then(function(A){var v=Object.assign({},this.opt.html2canvas);return delete v.onrendered,A(this.prop.container,v)}).then(function(A){(this.opt.html2canvas.onrendered||function(){})(A),this.prop.canvas=A,document.body.removeChild(this.prop.overlay)})},d.prototype.toContext2d=function(){var p=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(p).then(t).then(function(A){var v=this.opt.jsPDF,C=this.opt.fontFaces,F=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,E=Object.assign({async:!0,allowTaint:!0,scale:F,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete E.onrendered,v.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,v.context2d.posX=this.opt.x,v.context2d.posY=this.opt.y,v.context2d.margin=this.opt.margin,v.context2d.fontFaces=C,C)for(var Q=0;Q<C.length;++Q){var T=C[Q],V=T.src.find(function(R){return R.format==="truetype"});V&&v.addFont(V.url,T.ref.name,T.ref.style)}return E.windowHeight=E.windowHeight||0,E.windowHeight=E.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):E.windowHeight,v.context2d.save(!0),A(this.prop.container,E)}).then(function(A){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(A),this.prop.canvas=A,document.body.removeChild(this.prop.overlay)})},d.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var p=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=p})},d.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},d.prototype.output=function(p,A,v){return(v=v||"pdf").toLowerCase()==="img"||v.toLowerCase()==="image"?this.outputImg(p,A):this.outputPdf(p,A)},d.prototype.outputPdf=function(p,A){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(p,A)})},d.prototype.outputImg=function(p){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(p){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+p+'" is not supported.'}})},d.prototype.save=function(p){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(p?{filename:p}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},d.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},d.prototype.set=function(p){if(s(p)!=="object")return this;var A=Object.keys(p||{}).map(function(v){if(v in d.template.prop)return function(){this.prop[v]=p[v]};switch(v){case"margin":return this.setMargin.bind(this,p.margin);case"jsPDF":return function(){return this.opt.jsPDF=p.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,p.pageSize);default:return function(){this.opt[v]=p[v]}}},this);return this.then(function(){return this.thenList(A)})},d.prototype.get=function(p,A){return this.then(function(){var v=p in d.template.prop?this.prop[p]:this.opt[p];return A?A(v):v})},d.prototype.setMargin=function(p){return this.then(function(){switch(s(p)){case"number":p=[p,p,p,p];case"array":if(p.length===2&&(p=[p[0],p[1],p[0],p[1]]),p.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=p}).then(this.setPageSize)},d.prototype.setPageSize=function(p){function A(v,C){return Math.floor(v*C/72*96)}return this.then(function(){(p=p||Fr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(p.inner={width:p.width-this.opt.margin[1]-this.opt.margin[3],height:p.height-this.opt.margin[0]-this.opt.margin[2]},p.inner.px={width:A(p.inner.width,p.k),height:A(p.inner.height,p.k)},p.inner.ratio=p.inner.height/p.inner.width),this.prop.pageSize=p})},d.prototype.setProgress=function(p,A,v,C){return p!=null&&(this.progress.val=p),A!=null&&(this.progress.state=A),v!=null&&(this.progress.n=v),C!=null&&(this.progress.stack=C),this.progress.ratio=this.progress.val/this.progress.state,this},d.prototype.updateProgress=function(p,A,v,C){return this.setProgress(p?this.progress.val+p:null,A||null,v?this.progress.n+v:null,C?this.progress.stack.concat(C):null)},d.prototype.then=function(p,A){var v=this;return this.thenCore(p,A,function(C,F){return v.updateProgress(null,null,1,[C]),Promise.prototype.then.call(this,function(E){return v.updateProgress(null,C),E}).then(C,F).then(function(E){return v.updateProgress(1),E})})},d.prototype.thenCore=function(p,A,v){v=v||Promise.prototype.then,p&&(p=p.bind(this)),A&&(A=A.bind(this));var C=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:d.convert(Object.assign({},this),Promise.prototype),F=v.call(C,p,A);return d.convert(F,this.__proto__)},d.prototype.thenExternal=function(p,A){return Promise.prototype.then.call(this,p,A)},d.prototype.thenList=function(p){var A=this;return p.forEach(function(v){A=A.thenCore(v)}),A},d.prototype.catch=function(p){p&&(p=p.bind(this));var A=Promise.prototype.catch.call(this,p);return d.convert(A,this)},d.prototype.catchExternal=function(p){return Promise.prototype.catch.call(this,p)},d.prototype.error=function(p){return this.then(function(){throw new Error(p)})},d.prototype.using=d.prototype.set,d.prototype.saveAs=d.prototype.save,d.prototype.export=d.prototype.output,d.prototype.run=d.prototype.then,Fr.getPageSize=function(p,A,v){if(oi(p)==="object"){var C=p;p=C.orientation,A=C.unit||A,v=C.format||v}A=A||"mm",v=v||"a4",p=(""+(p||"P")).toLowerCase();var F,E=(""+v).toLowerCase(),Q={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(A){case"pt":F=1;break;case"mm":F=72/25.4;break;case"cm":F=72/2.54;break;case"in":F=72;break;case"px":F=.75;break;case"pc":case"em":F=12;break;case"ex":F=6;break;default:throw"Invalid unit: "+A}var T,V=0,R=0;if(Q.hasOwnProperty(E))V=Q[E][1]/F,R=Q[E][0]/F;else try{V=v[1],R=v[0]}catch{throw new Error("Invalid format: "+v)}if(p==="p"||p==="portrait")p="p",R>V&&(T=R,R=V,V=T);else{if(p!=="l"&&p!=="landscape")throw"Invalid orientation: "+p;p="l",V>R&&(T=R,R=V,V=T)}return{width:R,height:V,unit:A,k:F,orientation:p}},n.html=function(p,A){(A=A||{}).callback=A.callback||function(){},A.html2canvas=A.html2canvas||{},A.html2canvas.canvas=A.html2canvas.canvas||this.canvas,A.jsPDF=A.jsPDF||this,A.fontFaces=A.fontFaces?A.fontFaces.map(Qg):null;var v=new d(A);return A.worker?v:v.from(p).doCallback()}}(Fr.API),Fr.API.addJS=function(n){return xv=n,this.internal.events.subscribe("postPutResources",function(){Zd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Zd+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),bv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+xv+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Zd!==void 0&&bv!==void 0&&this.internal.out("/Names <</JavaScript "+Zd+" 0 R>>")}),this},function(n){var t;n.events.push(["postPutResources",function(){var i=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var u=i.outline.render().split(/\r\n/),d=0;d<u.length;d++){var p=u[d],A=s.exec(p);if(A!=null){var v=A[1];i.internal.newObjectDeferredBegin(v,!1)}i.internal.write(p)}if(this.outline.createNamedDestinations){var C=this.internal.pages.length,F=[];for(d=0;d<C;d++){var E=i.internal.newObject();F.push(E);var Q=i.internal.getPageInfo(d+1);i.internal.write("<< /D["+Q.objId+" 0 R /XYZ null null null]>> endobj")}var T=i.internal.newObject();for(i.internal.write("<< /Names [ "),d=0;d<F.length;d++)i.internal.write("(page_"+(d+1)+")"+F[d]+" 0 R");i.internal.write(" ] >>","endobj"),t=i.internal.newObject(),i.internal.write("<< /Dests "+T+" 0 R"),i.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),n.events.push(["initialized",function(){var i=this;i.outline={createNamedDestinations:!1,root:{children:[]}},i.outline.add=function(s,u,d){var p={title:u,options:d,children:[]};return s==null&&(s=this.root),s.children.push(p),p},i.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=i,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},i.outline.genIds_r=function(s){s.id=i.internal.newObjectDeferred();for(var u=0;u<s.children.length;u++)this.genIds_r(s.children[u])},i.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},i.outline.renderItems=function(s){for(var u=this.ctx.pdf.internal.getVerticalCoordinateString,d=0;d<s.children.length;d++){var p=s.children[d];this.objStart(p),this.line("/Title "+this.makeString(p.title)),this.line("/Parent "+this.makeRef(s)),d>0&&this.line("/Prev "+this.makeRef(s.children[d-1])),d<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[d+1])),p.children.length>0&&(this.line("/First "+this.makeRef(p.children[0])),this.line("/Last "+this.makeRef(p.children[p.children.length-1])));var A=this.count=this.count_r({count:0},p);if(A>0&&this.line("/Count "+A),p.options&&p.options.pageNumber){var v=i.internal.getPageInfo(p.options.pageNumber);this.line("/Dest ["+v.objId+" 0 R /XYZ 0 "+u(0)+" 0]")}this.objEnd()}for(var C=0;C<s.children.length;C++)this.renderItems(s.children[C])},i.outline.line=function(s){this.ctx.val+=s+`\r
`},i.outline.makeRef=function(s){return s.id+" 0 R"},i.outline.makeString=function(s){return"("+i.internal.pdfEscape(s)+")"},i.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},i.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},i.outline.count_r=function(s,u){for(var d=0;d<u.children.length;d++)s.count++,this.count_r(s,u.children[d]);return s.count}}])}(Fr.API),function(n){var t=[192,193,194,195,196,197,198,199];n.processJPEG=function(i,s,u,d,p,A){var v,C=this.decode.DCT_DECODE,F=null;if(typeof i=="string"||this.__addimage__.isArrayBuffer(i)||this.__addimage__.isArrayBufferView(i)){switch(i=p||i,i=this.__addimage__.isArrayBuffer(i)?new Uint8Array(i):i,(v=function(E){for(var Q,T=256*E.charCodeAt(4)+E.charCodeAt(5),V=E.length,R={width:0,height:0,numcomponents:1},W=4;W<V;W+=2){if(W+=T,t.indexOf(E.charCodeAt(W+1))!==-1){Q=256*E.charCodeAt(W+5)+E.charCodeAt(W+6),R={width:256*E.charCodeAt(W+7)+E.charCodeAt(W+8),height:Q,numcomponents:E.charCodeAt(W+9)};break}T=256*E.charCodeAt(W+2)+E.charCodeAt(W+3)}return R}(i=this.__addimage__.isArrayBufferView(i)?this.__addimage__.arrayBufferToBinaryString(i):i)).numcomponents){case 1:A=this.color_spaces.DEVICE_GRAY;break;case 4:A=this.color_spaces.DEVICE_CMYK;break;case 3:A=this.color_spaces.DEVICE_RGB}F={data:i,width:v.width,height:v.height,colorSpace:A,bitsPerComponent:8,filter:C,index:s,alias:u}}return F}}(Fr.API);var au,Wd,Cv,Fv,Sv,X4=function(){var n,t,i;function s(d){var p,A,v,C,F,E,Q,T,V,R,W,j,rt,ht;for(this.data=d,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},E=null;;){switch(p=this.readUInt32(),V=(function(){var Bt,Et;for(Et=[],Bt=0;Bt<4;++Bt)Et.push(String.fromCharCode(this.data[this.pos++]));return Et}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(p);break;case"fcTL":E&&this.animation.frames.push(E),this.pos+=4,E={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},F=this.readUInt16(),C=this.readUInt16()||100,E.delay=1e3*F/C,E.disposeOp=this.data[this.pos++],E.blendOp=this.data[this.pos++],E.data=[];break;case"IDAT":case"fdAT":for(V==="fdAT"&&(this.pos+=4,p-=4),d=(E!=null?E.data:void 0)||this.imgData,j=0;0<=p?j<p:j>p;0<=p?++j:--j)d.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(v=this.palette.length/3,this.transparency.indexed=this.read(p),this.transparency.indexed.length>v)throw new Error("More transparent colors than palette size");if((R=v-this.transparency.indexed.length)>0)for(rt=0;0<=R?rt<R:rt>R;0<=R?++rt:--rt)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(p)[0];break;case 2:this.transparency.rgb=this.read(p)}break;case"tEXt":Q=(W=this.read(p)).indexOf(0),T=String.fromCharCode.apply(String,W.slice(0,Q)),this.text[T]=String.fromCharCode.apply(String,W.slice(Q+1));break;case"IEND":return E&&this.animation.frames.push(E),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(ht=this.colorType)===4||ht===6,A=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*A,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=p}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}s.prototype.read=function(d){var p,A;for(A=[],p=0;0<=d?p<d:p>d;0<=d?++p:--p)A.push(this.data[this.pos++]);return A},s.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.decodePixels=function(d){var p=this.pixelBitlength/8,A=new Uint8Array(this.width*this.height*p),v=0,C=this;if(d==null&&(d=this.imgData),d.length===0)return new Uint8Array(0);function F(E,Q,T,V){var R,W,j,rt,ht,Bt,Et,Tt,xt,ft,Nt,jt,at,ct,vt,mt,$t,Vt,Zt,Ht,Yt,Wt=Math.ceil((C.width-E)/T),me=Math.ceil((C.height-Q)/V),et=C.width==Wt&&C.height==me;for(ct=p*Wt,jt=et?A:new Uint8Array(ct*me),Bt=d.length,at=0,W=0;at<me&&v<Bt;){switch(d[v++]){case 0:for(rt=$t=0;$t<ct;rt=$t+=1)jt[W++]=d[v++];break;case 1:for(rt=Vt=0;Vt<ct;rt=Vt+=1)R=d[v++],ht=rt<p?0:jt[W-p],jt[W++]=(R+ht)%256;break;case 2:for(rt=Zt=0;Zt<ct;rt=Zt+=1)R=d[v++],j=(rt-rt%p)/p,vt=at&&jt[(at-1)*ct+j*p+rt%p],jt[W++]=(vt+R)%256;break;case 3:for(rt=Ht=0;Ht<ct;rt=Ht+=1)R=d[v++],j=(rt-rt%p)/p,ht=rt<p?0:jt[W-p],vt=at&&jt[(at-1)*ct+j*p+rt%p],jt[W++]=(R+Math.floor((ht+vt)/2))%256;break;case 4:for(rt=Yt=0;Yt<ct;rt=Yt+=1)R=d[v++],j=(rt-rt%p)/p,ht=rt<p?0:jt[W-p],at===0?vt=mt=0:(vt=jt[(at-1)*ct+j*p+rt%p],mt=j&&jt[(at-1)*ct+(j-1)*p+rt%p]),Et=ht+vt-mt,Tt=Math.abs(Et-ht),ft=Math.abs(Et-vt),Nt=Math.abs(Et-mt),xt=Tt<=ft&&Tt<=Nt?ht:ft<=Nt?vt:mt,jt[W++]=(R+xt)%256;break;default:throw new Error("Invalid filter algorithm: "+d[v-1])}if(!et){var dt=((Q+at*V)*C.width+E)*p,_t=at*ct;for(rt=0;rt<Wt;rt+=1){for(var St=0;St<p;St+=1)A[dt++]=jt[_t++];dt+=(T-1)*p}}at++}}return d=E4(d),C.interlaceMethod==1?(F(0,0,8,8),F(4,0,8,8),F(0,4,4,8),F(2,0,4,4),F(0,2,2,4),F(1,0,2,2),F(0,1,1,2)):F(0,0,1,1),A},s.prototype.decodePalette=function(){var d,p,A,v,C,F,E,Q,T;for(A=this.palette,F=this.transparency.indexed||[],C=new Uint8Array((F.length||0)+A.length),v=0,d=0,p=E=0,Q=A.length;E<Q;p=E+=3)C[v++]=A[p],C[v++]=A[p+1],C[v++]=A[p+2],C[v++]=(T=F[d++])!=null?T:255;return C},s.prototype.copyToImageData=function(d,p){var A,v,C,F,E,Q,T,V,R,W,j;if(v=this.colors,R=null,A=this.hasAlphaChannel,this.palette.length&&(R=(j=this._decodedPalette)!=null?j:this._decodedPalette=this.decodePalette(),v=4,A=!0),V=(C=d.data||d).length,E=R||p,F=Q=0,v===1)for(;F<V;)T=R?4*p[F/4]:Q,W=E[T++],C[F++]=W,C[F++]=W,C[F++]=W,C[F++]=A?E[T++]:255,Q=T;else for(;F<V;)T=R?4*p[F/4]:Q,C[F++]=E[T++],C[F++]=E[T++],C[F++]=E[T++],C[F++]=A?E[T++]:255,Q=T},s.prototype.decode=function(){var d;return d=new Uint8Array(this.width*this.height*4),this.copyToImageData(d,this.decodePixels()),d};var u=function(){if(Object.prototype.toString.call(Cr)==="[object Window]"){try{t=Cr.document.createElement("canvas"),i=t.getContext("2d")}catch{return!1}return!0}return!1};return u(),n=function(d){var p;if(u()===!0)return i.width=d.width,i.height=d.height,i.clearRect(0,0,d.width,d.height),i.putImageData(d,0,0),(p=new Image).src=t.toDataURL(),p;throw new Error("This method requires a Browser with Canvas-capability.")},s.prototype.decodeFrames=function(d){var p,A,v,C,F,E,Q,T;if(this.animation){for(T=[],A=F=0,E=(Q=this.animation.frames).length;F<E;A=++F)p=Q[A],v=d.createImageData(p.width,p.height),C=this.decodePixels(new Uint8Array(p.data)),this.copyToImageData(v,C),p.imageData=v,T.push(p.image=n(v));return T}},s.prototype.renderFrame=function(d,p){var A,v,C;return A=(v=this.animation.frames)[p],C=v[p-1],p===0&&d.clearRect(0,0,this.width,this.height),(C!=null?C.disposeOp:void 0)===1?d.clearRect(C.xOffset,C.yOffset,C.width,C.height):(C!=null?C.disposeOp:void 0)===2&&d.putImageData(C.imageData,C.xOffset,C.yOffset),A.blendOp===0&&d.clearRect(A.xOffset,A.yOffset,A.width,A.height),d.drawImage(A.image,A.xOffset,A.yOffset)},s.prototype.animate=function(d){var p,A,v,C,F,E,Q=this;return A=0,E=this.animation,C=E.numFrames,v=E.frames,F=E.numPlays,(p=function(){var T,V;if(T=A++%C,V=v[T],Q.renderFrame(d,T),C>1&&A/C<F)return Q.animation._timeout=setTimeout(p,V.delay)})()},s.prototype.stopAnimation=function(){var d;return clearTimeout((d=this.animation)!=null?d._timeout:void 0)},s.prototype.render=function(d){var p,A;return d._png&&d._png.stopAnimation(),d._png=this,d.width=this.width,d.height=this.height,p=d.getContext("2d"),this.animation?(this.decodeFrames(p),this.animate(p)):(A=p.createImageData(this.width,this.height),this.copyToImageData(A,this.decodePixels()),p.putImageData(A,0,0))},s}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Z4(n){var t=0;if(n[t++]!==71||n[t++]!==73||n[t++]!==70||n[t++]!==56||(n[t++]+1&253)!=56||n[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var i=n[t++]|n[t++]<<8,s=n[t++]|n[t++]<<8,u=n[t++],d=u>>7,p=1<<(7&u)+1;n[t++],n[t++];var A=null,v=null;d&&(A=t,v=p,t+=3*p);var C=!0,F=[],E=0,Q=null,T=0,V=null;for(this.width=i,this.height=s;C&&t<n.length;)switch(n[t++]){case 33:switch(n[t++]){case 255:if(n[t]!==11||n[t+1]==78&&n[t+2]==69&&n[t+3]==84&&n[t+4]==83&&n[t+5]==67&&n[t+6]==65&&n[t+7]==80&&n[t+8]==69&&n[t+9]==50&&n[t+10]==46&&n[t+11]==48&&n[t+12]==3&&n[t+13]==1&&n[t+16]==0)t+=14,V=n[t++]|n[t++]<<8,t++;else for(t+=12;;){if(!((at=n[t++])>=0))throw Error("Invalid block size");if(at===0)break;t+=at}break;case 249:if(n[t++]!==4||n[t+4]!==0)throw new Error("Invalid graphics extension block.");var R=n[t++];E=n[t++]|n[t++]<<8,Q=n[t++],!(1&R)&&(Q=null),T=R>>2&7,t++;break;case 254:for(;;){if(!((at=n[t++])>=0))throw Error("Invalid block size");if(at===0)break;t+=at}break;default:throw new Error("Unknown graphic control label: 0x"+n[t-1].toString(16))}break;case 44:var W=n[t++]|n[t++]<<8,j=n[t++]|n[t++]<<8,rt=n[t++]|n[t++]<<8,ht=n[t++]|n[t++]<<8,Bt=n[t++],Et=Bt>>6&1,Tt=1<<(7&Bt)+1,xt=A,ft=v,Nt=!1;Bt>>7&&(Nt=!0,xt=t,ft=Tt,t+=3*Tt);var jt=t;for(t++;;){var at;if(!((at=n[t++])>=0))throw Error("Invalid block size");if(at===0)break;t+=at}F.push({x:W,y:j,width:rt,height:ht,has_local_palette:Nt,palette_offset:xt,palette_size:ft,data_offset:jt,data_length:t-jt,transparent_index:Q,interlaced:!!Et,delay:E,disposal:T});break;case 59:C=!1;break;default:throw new Error("Unknown gif block: 0x"+n[t-1].toString(16))}this.numFrames=function(){return F.length},this.loopCount=function(){return V},this.frameInfo=function(ct){if(ct<0||ct>=F.length)throw new Error("Frame index out of range.");return F[ct]},this.decodeAndBlitFrameBGRA=function(ct,vt){var mt=this.frameInfo(ct),$t=mt.width*mt.height,Vt=new Uint8Array($t);Iv(n,mt.data_offset,Vt,$t);var Zt=mt.palette_offset,Ht=mt.transparent_index;Ht===null&&(Ht=256);var Yt=mt.width,Wt=i-Yt,me=Yt,et=4*(mt.y*i+mt.x),dt=4*((mt.y+mt.height)*i+mt.x),_t=et,St=4*Wt;mt.interlaced===!0&&(St+=4*i*7);for(var Ot=8,Rt=0,Jt=Vt.length;Rt<Jt;++Rt){var re=Vt[Rt];if(me===0&&(me=Yt,(_t+=St)>=dt&&(St=4*Wt+4*i*(Ot-1),_t=et+(Yt+Wt)*(Ot<<1),Ot>>=1)),re===Ht)_t+=4;else{var be=n[Zt+3*re],_e=n[Zt+3*re+1],Te=n[Zt+3*re+2];vt[_t++]=Te,vt[_t++]=_e,vt[_t++]=be,vt[_t++]=255}--me}},this.decodeAndBlitFrameRGBA=function(ct,vt){var mt=this.frameInfo(ct),$t=mt.width*mt.height,Vt=new Uint8Array($t);Iv(n,mt.data_offset,Vt,$t);var Zt=mt.palette_offset,Ht=mt.transparent_index;Ht===null&&(Ht=256);var Yt=mt.width,Wt=i-Yt,me=Yt,et=4*(mt.y*i+mt.x),dt=4*((mt.y+mt.height)*i+mt.x),_t=et,St=4*Wt;mt.interlaced===!0&&(St+=4*i*7);for(var Ot=8,Rt=0,Jt=Vt.length;Rt<Jt;++Rt){var re=Vt[Rt];if(me===0&&(me=Yt,(_t+=St)>=dt&&(St=4*Wt+4*i*(Ot-1),_t=et+(Yt+Wt)*(Ot<<1),Ot>>=1)),re===Ht)_t+=4;else{var be=n[Zt+3*re],_e=n[Zt+3*re+1],Te=n[Zt+3*re+2];vt[_t++]=be,vt[_t++]=_e,vt[_t++]=Te,vt[_t++]=255}--me}}}function Iv(n,t,i,s){for(var u=n[t++],d=1<<u,p=d+1,A=p+1,v=u+1,C=(1<<v)-1,F=0,E=0,Q=0,T=n[t++],V=new Int32Array(4096),R=null;;){for(;F<16&&T!==0;)E|=n[t++]<<F,F+=8,T===1?T=n[t++]:--T;if(F<v)break;var W=E&C;if(E>>=v,F-=v,W!==d){if(W===p)break;for(var j=W<A?W:R,rt=0,ht=j;ht>d;)ht=V[ht]>>8,++rt;var Bt=ht;if(Q+rt+(j!==W?1:0)>s)return void Ii.log("Warning, gif stream longer than expected.");i[Q++]=Bt;var Et=Q+=rt;for(j!==W&&(i[Q++]=Bt),ht=j;rt--;)ht=V[ht],i[--Et]=255&ht,ht>>=8;R!==null&&A<4096&&(V[A++]=R<<8|Bt,A>=C+1&&v<12&&(++v,C=C<<1|1)),R=W}else A=p+1,C=(1<<(v=u+1))-1,R=null}return Q!==s&&Ii.log("Warning, gif stream shorter than expected."),i}/**
	 * @license
	  Copyright (c) 2008, Adobe Systems Incorporated
	  All rights reserved.

	  Redistribution and use in source and binary forms, with or without 
	  modification, are permitted provided that the following conditions are
	  met:

	  * Redistributions of source code must retain the above copyright notice, 
	    this list of conditions and the following disclaimer.
	  
	  * Redistributions in binary form must reproduce the above copyright
	    notice, this list of conditions and the following disclaimer in the 
	    documentation and/or other materials provided with the distribution.
	  
	  * Neither the name of Adobe Systems Incorporated nor the names of its 
	    contributors may be used to endorse or promote products derived from 
	    this software without specific prior written permission.

	  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
	  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
	  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
	  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
	  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
	  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
	  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
	  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
	  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
	  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
	  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/function kg(n){var t,i,s,u,d,p=Math.floor,A=new Array(64),v=new Array(64),C=new Array(64),F=new Array(64),E=new Array(65535),Q=new Array(65535),T=new Array(64),V=new Array(64),R=[],W=0,j=7,rt=new Array(64),ht=new Array(64),Bt=new Array(64),Et=new Array(256),Tt=new Array(2048),xt=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ft=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Nt=[0,1,2,3,4,5,6,7,8,9,10,11],jt=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],at=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],ct=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],vt=[0,1,2,3,4,5,6,7,8,9,10,11],mt=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],$t=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Vt(et,dt){for(var _t=0,St=0,Ot=new Array,Rt=1;Rt<=16;Rt++){for(var Jt=1;Jt<=et[Rt];Jt++)Ot[dt[St]]=[],Ot[dt[St]][0]=_t,Ot[dt[St]][1]=Rt,St++,_t++;_t*=2}return Ot}function Zt(et){for(var dt=et[0],_t=et[1]-1;_t>=0;)dt&1<<_t&&(W|=1<<j),_t--,--j<0&&(W==255?(Ht(255),Ht(0)):Ht(W),j=7,W=0)}function Ht(et){R.push(et)}function Yt(et){Ht(et>>8&255),Ht(255&et)}function Wt(et,dt,_t,St,Ot){for(var Rt,Jt=Ot[0],re=Ot[240],be=function(Ae,ge){var Se,Ce,He,Xe,nr,yr,br,ce,Je,sr,Ie=0;for(Je=0;Je<8;++Je){Se=Ae[Ie],Ce=Ae[Ie+1],He=Ae[Ie+2],Xe=Ae[Ie+3],nr=Ae[Ie+4],yr=Ae[Ie+5],br=Ae[Ie+6];var Xr=Se+(ce=Ae[Ie+7]),he=Se-ce,rr=Ce+br,Ee=Ce-br,vr=He+yr,ti=He-yr,Pe=Xe+nr,mi=Xe-nr,Rr=Xr+Pe,ri=Xr-Pe,jr=rr+vr,gt=rr-vr;Ae[Ie]=Rr+jr,Ae[Ie+4]=Rr-jr;var K=.707106781*(gt+ri);Ae[Ie+2]=ri+K,Ae[Ie+6]=ri-K;var q=.382683433*((Rr=mi+ti)-(gt=Ee+he)),At=.5411961*Rr+q,pt=1.306562965*gt+q,Pt=.707106781*(jr=ti+Ee),Dt=he+Pt,Ut=he-Pt;Ae[Ie+5]=Ut+At,Ae[Ie+3]=Ut-At,Ae[Ie+1]=Dt+pt,Ae[Ie+7]=Dt-pt,Ie+=8}for(Ie=0,Je=0;Je<8;++Je){Se=Ae[Ie],Ce=Ae[Ie+8],He=Ae[Ie+16],Xe=Ae[Ie+24],nr=Ae[Ie+32],yr=Ae[Ie+40],br=Ae[Ie+48];var It=Se+(ce=Ae[Ie+56]),te=Se-ce,le=Ce+br,qt=Ce-br,pe=He+yr,ke=He-yr,Ge=Xe+nr,ar=Xe-nr,xr=It+Ge,tr=It-Ge,Br=le+pe,Kr=le-pe;Ae[Ie]=xr+Br,Ae[Ie+32]=xr-Br;var qr=.707106781*(Kr+tr);Ae[Ie+16]=tr+qr,Ae[Ie+48]=tr-qr;var gr=.382683433*((xr=ar+ke)-(Kr=qt+te)),Mr=.5411961*xr+gr,Zr=1.306562965*Kr+gr,Ct=.707106781*(Br=ke+qt),Fe=te+Ct,ye=te-Ct;Ae[Ie+40]=ye+Mr,Ae[Ie+24]=ye-Mr,Ae[Ie+8]=Fe+Zr,Ae[Ie+56]=Fe-Zr,Ie++}for(Je=0;Je<64;++Je)sr=Ae[Je]*ge[Je],T[Je]=sr>0?sr+.5|0:sr-.5|0;return T}(et,dt),_e=0;_e<64;++_e)V[xt[_e]]=be[_e];var Te=V[0]-_t;_t=V[0],Te==0?Zt(St[0]):(Zt(St[Q[Rt=32767+Te]]),Zt(E[Rt]));for(var Qe=63;Qe>0&&V[Qe]==0;)Qe--;if(Qe==0)return Zt(Jt),_t;for(var je,oe=1;oe<=Qe;){for(var nt=oe;V[oe]==0&&oe<=Qe;)++oe;var cr=oe-nt;if(cr>=16){je=cr>>4;for(var Ke=1;Ke<=je;++Ke)Zt(re);cr&=15}Rt=32767+V[oe],Zt(Ot[(cr<<4)+Q[Rt]]),Zt(E[Rt]),oe++}return Qe!=63&&Zt(Jt),_t}function me(et){et=Math.min(Math.max(et,1),100),d!=et&&(function(dt){for(var _t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],St=0;St<64;St++){var Ot=p((_t[St]*dt+50)/100);Ot=Math.min(Math.max(Ot,1),255),A[xt[St]]=Ot}for(var Rt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Jt=0;Jt<64;Jt++){var re=p((Rt[Jt]*dt+50)/100);re=Math.min(Math.max(re,1),255),v[xt[Jt]]=re}for(var be=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],_e=0,Te=0;Te<8;Te++)for(var Qe=0;Qe<8;Qe++)C[_e]=1/(A[xt[_e]]*be[Te]*be[Qe]*8),F[_e]=1/(v[xt[_e]]*be[Te]*be[Qe]*8),_e++}(et<50?Math.floor(5e3/et):Math.floor(200-2*et)),d=et)}this.encode=function(et,dt){dt&&me(dt),R=new Array,W=0,j=7,Yt(65496),Yt(65504),Yt(16),Ht(74),Ht(70),Ht(73),Ht(70),Ht(0),Ht(1),Ht(1),Ht(0),Yt(1),Yt(1),Ht(0),Ht(0),function(){Yt(65499),Yt(132),Ht(0);for(var Ce=0;Ce<64;Ce++)Ht(A[Ce]);Ht(1);for(var He=0;He<64;He++)Ht(v[He])}(),function(Ce,He){Yt(65472),Yt(17),Ht(8),Yt(He),Yt(Ce),Ht(3),Ht(1),Ht(17),Ht(0),Ht(2),Ht(17),Ht(1),Ht(3),Ht(17),Ht(1)}(et.width,et.height),function(){Yt(65476),Yt(418),Ht(0);for(var Ce=0;Ce<16;Ce++)Ht(ft[Ce+1]);for(var He=0;He<=11;He++)Ht(Nt[He]);Ht(16);for(var Xe=0;Xe<16;Xe++)Ht(jt[Xe+1]);for(var nr=0;nr<=161;nr++)Ht(at[nr]);Ht(1);for(var yr=0;yr<16;yr++)Ht(ct[yr+1]);for(var br=0;br<=11;br++)Ht(vt[br]);Ht(17);for(var ce=0;ce<16;ce++)Ht(mt[ce+1]);for(var Je=0;Je<=161;Je++)Ht($t[Je])}(),Yt(65498),Yt(12),Ht(3),Ht(1),Ht(0),Ht(2),Ht(17),Ht(3),Ht(17),Ht(0),Ht(63),Ht(0);var _t=0,St=0,Ot=0;W=0,j=7,this.encode.displayName="_encode_";for(var Rt,Jt,re,be,_e,Te,Qe,je,oe,nt=et.data,cr=et.width,Ke=et.height,Ae=4*cr,ge=0;ge<Ke;){for(Rt=0;Rt<Ae;){for(_e=Ae*ge+Rt,Qe=-1,je=0,oe=0;oe<64;oe++)Te=_e+(je=oe>>3)*Ae+(Qe=4*(7&oe)),ge+je>=Ke&&(Te-=Ae*(ge+1+je-Ke)),Rt+Qe>=Ae&&(Te-=Rt+Qe-Ae+4),Jt=nt[Te++],re=nt[Te++],be=nt[Te++],rt[oe]=(Tt[Jt]+Tt[re+256>>0]+Tt[be+512>>0]>>16)-128,ht[oe]=(Tt[Jt+768>>0]+Tt[re+1024>>0]+Tt[be+1280>>0]>>16)-128,Bt[oe]=(Tt[Jt+1280>>0]+Tt[re+1536>>0]+Tt[be+1792>>0]>>16)-128;_t=Wt(rt,C,_t,t,s),St=Wt(ht,F,St,i,u),Ot=Wt(Bt,F,Ot,i,u),Rt+=32}ge+=8}if(j>=0){var Se=[];Se[1]=j+1,Se[0]=(1<<j+1)-1,Zt(Se)}return Yt(65497),new Uint8Array(R)},n=n||50,function(){for(var et=String.fromCharCode,dt=0;dt<256;dt++)Et[dt]=et(dt)}(),t=Vt(ft,Nt),i=Vt(ct,vt),s=Vt(jt,at),u=Vt(mt,$t),function(){for(var et=1,dt=2,_t=1;_t<=15;_t++){for(var St=et;St<dt;St++)Q[32767+St]=_t,E[32767+St]=[],E[32767+St][1]=_t,E[32767+St][0]=St;for(var Ot=-(dt-1);Ot<=-et;Ot++)Q[32767+Ot]=_t,E[32767+Ot]=[],E[32767+Ot][1]=_t,E[32767+Ot][0]=dt-1+Ot;et<<=1,dt<<=1}}(),function(){for(var et=0;et<256;et++)Tt[et]=19595*et,Tt[et+256>>0]=38470*et,Tt[et+512>>0]=7471*et+32768,Tt[et+768>>0]=-11059*et,Tt[et+1024>>0]=-21709*et,Tt[et+1280>>0]=32768*et+8421375,Tt[et+1536>>0]=-27439*et,Tt[et+1792>>0]=-5329*et}(),me(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function pa(n,t){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Ev(n){function t(ft){if(!ft)throw Error("assert :P")}function i(ft,Nt,jt){for(var at=0;4>at;at++)if(ft[Nt+at]!=jt.charCodeAt(at))return!0;return!1}function s(ft,Nt,jt,at,ct){for(var vt=0;vt<ct;vt++)ft[Nt+vt]=jt[at+vt]}function u(ft,Nt,jt,at){for(var ct=0;ct<at;ct++)ft[Nt+ct]=jt}function d(ft){return new Int32Array(ft)}function p(ft,Nt){for(var jt=[],at=0;at<ft;at++)jt.push(new Nt);return jt}function A(ft,Nt){var jt=[];return function at(ct,vt,mt){for(var $t=mt[vt],Vt=0;Vt<$t&&(ct.push(mt.length>vt+1?[]:new Nt),!(mt.length<vt+1));Vt++)at(ct[Vt],vt+1,mt)}(jt,0,ft),jt}var v=function(){var ft=this;function Nt(a,h){for(var m=1<<h-1>>>0;a&m;)m>>>=1;return m?(a&m-1)+m:a}function jt(a,h,m,w,B){t(!(w%m));do a[h+(w-=m)]=B;while(0<w)}function at(a,h,m,w,B){if(t(2328>=B),512>=B)var S=d(512);else if((S=d(B))==null)return 0;return function(P,L,M,N,H,Z){var G,X,ut=L,tt=1<<M,it=d(16),st=d(16);for(t(H!=0),t(N!=null),t(P!=null),t(0<M),X=0;X<H;++X){if(15<N[X])return 0;++it[N[X]]}if(it[0]==H)return 0;for(st[1]=0,G=1;15>G;++G){if(it[G]>1<<G)return 0;st[G+1]=st[G]+it[G]}for(X=0;X<H;++X)G=N[X],0<N[X]&&(Z[st[G]++]=X);if(st[15]==1)return(N=new ct).g=0,N.value=Z[0],jt(P,ut,1,tt,N),tt;var yt,Lt=-1,Qt=tt-1,ne=0,ee=1,ie=1,Xt=1<<M;for(X=0,G=1,H=2;G<=M;++G,H<<=1){if(ee+=ie<<=1,0>(ie-=it[G]))return 0;for(;0<it[G];--it[G])(N=new ct).g=G,N.value=Z[X++],jt(P,ut+ne,H,Xt,N),ne=Nt(ne,G)}for(G=M+1,H=2;15>=G;++G,H<<=1){if(ee+=ie<<=1,0>(ie-=it[G]))return 0;for(;0<it[G];--it[G]){if(N=new ct,(ne&Qt)!=Lt){for(ut+=Xt,yt=1<<(Lt=G)-M;15>Lt&&!(0>=(yt-=it[Lt]));)++Lt,yt<<=1;tt+=Xt=1<<(yt=Lt-M),P[L+(Lt=ne&Qt)].g=yt+M,P[L+Lt].value=ut-L-Lt}N.g=G-M,N.value=Z[X++],jt(P,ut+(ne>>M),H,Xt,N),ne=Nt(ne,G)}}return ee!=2*st[15]-1?0:tt}(a,h,m,w,B,S)}function ct(){this.value=this.g=0}function vt(){this.value=this.g=0}function mt(){this.G=p(5,ct),this.H=d(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=p(_n,vt)}function $t(a,h,m,w){t(a!=null),t(h!=null),t(2147483648>w),a.Ca=254,a.I=0,a.b=-8,a.Ka=0,a.oa=h,a.pa=m,a.Jd=h,a.Yc=m+w,a.Zc=4<=w?m+w-4+1:m,Rt(a)}function Vt(a,h){for(var m=0;0<h--;)m|=re(a,128)<<h;return m}function Zt(a,h){var m=Vt(a,h);return Jt(a)?-m:m}function Ht(a,h,m,w){var B,S=0;for(t(a!=null),t(h!=null),t(4294967288>w),a.Sb=w,a.Ra=0,a.u=0,a.h=0,4<w&&(w=4),B=0;B<w;++B)S+=h[m+B]<<8*B;a.Ra=S,a.bb=w,a.oa=h,a.pa=m}function Yt(a){for(;8<=a.u&&a.bb<a.Sb;)a.Ra>>>=8,a.Ra+=a.oa[a.pa+a.bb]<<ms-8>>>0,++a.bb,a.u-=8;_t(a)&&(a.h=1,a.u=0)}function Wt(a,h){if(t(0<=h),!a.h&&h<=oo){var m=dt(a)&ta[h];return a.u+=h,Yt(a),m}return a.h=1,a.u=0}function me(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function et(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function dt(a){return a.Ra>>>(a.u&ms-1)>>>0}function _t(a){return t(a.bb<=a.Sb),a.h||a.bb==a.Sb&&a.u>ms}function St(a,h){a.u=h,a.h=_t(a)}function Ot(a){a.u>=ea&&(t(a.u>=ea),Yt(a))}function Rt(a){t(a!=null&&a.oa!=null),a.pa<a.Zc?(a.I=(a.oa[a.pa++]|a.I<<8)>>>0,a.b+=8):(t(a!=null&&a.oa!=null),a.pa<a.Yc?(a.b+=8,a.I=a.oa[a.pa++]|a.I<<8):a.Ka?a.b=0:(a.I<<=8,a.b+=8,a.Ka=1))}function Jt(a){return Vt(a,1)}function re(a,h){var m=a.Ca;0>a.b&&Rt(a);var w=a.b,B=m*h>>>8,S=(a.I>>>w>B)+0;for(S?(m-=B,a.I-=B+1<<w>>>0):m=B+1,w=m,B=0;256<=w;)B+=8,w>>=8;return w=7^B+hn[w],a.b-=w,a.Ca=(m<<w)-1,S}function be(a,h,m){a[h+0]=m>>24&255,a[h+1]=m>>16&255,a[h+2]=m>>8&255,a[h+3]=m>>0&255}function _e(a,h){return a[h+0]<<0|a[h+1]<<8}function Te(a,h){return _e(a,h)|a[h+2]<<16}function Qe(a,h){return _e(a,h)|_e(a,h+2)<<16}function je(a,h){var m=1<<h;return t(a!=null),t(0<h),a.X=d(m),a.X==null?0:(a.Mb=32-h,a.Xa=h,1)}function oe(a,h){t(a!=null),t(h!=null),t(a.Xa==h.Xa),s(h.X,0,a.X,0,1<<h.Xa)}function nt(){this.X=[],this.Xa=this.Mb=0}function cr(a,h,m,w){t(m!=null),t(w!=null);var B=m[0],S=w[0];return B==0&&(B=(a*S+h/2)/h),S==0&&(S=(h*B+a/2)/a),0>=B||0>=S?0:(m[0]=B,w[0]=S,1)}function Ke(a,h){return a+(1<<h)-1>>>h}function Ae(a,h){return((4278255360&a)+(4278255360&h)>>>0&4278255360)+((16711935&a)+(16711935&h)>>>0&16711935)>>>0}function ge(a,h){ft[h]=function(m,w,B,S,P,L,M){var N;for(N=0;N<P;++N){var H=ft[a](L[M+N-1],B,S+N);L[M+N]=Ae(m[w+N],H)}}}function Se(){this.ud=this.hd=this.jd=0}function Ce(a,h){return((4278124286&(a^h))>>>1)+(a&h)>>>0}function He(a){return 0<=a&&256>a?a:0>a?0:255<a?255:void 0}function Xe(a,h){return He(a+(a-h+.5>>1))}function nr(a,h,m){return Math.abs(h-m)-Math.abs(a-m)}function yr(a,h,m,w,B,S,P){for(w=S[P-1],m=0;m<B;++m)S[P+m]=w=Ae(a[h+m],w)}function br(a,h,m,w,B){var S;for(S=0;S<m;++S){var P=a[h+S],L=P>>8&255,M=16711935&(M=(M=16711935&P)+((L<<16)+L));w[B+S]=(4278255360&P)+M>>>0}}function ce(a,h){h.jd=a>>0&255,h.hd=a>>8&255,h.ud=a>>16&255}function Je(a,h,m,w,B,S){var P;for(P=0;P<w;++P){var L=h[m+P],M=L>>>8,N=L,H=255&(H=(H=L>>>16)+((a.jd<<24>>24)*(M<<24>>24)>>>5));N=255&(N=(N=N+((a.hd<<24>>24)*(M<<24>>24)>>>5))+((a.ud<<24>>24)*(H<<24>>24)>>>5)),B[S+P]=(4278255360&L)+(H<<16)+N}}function sr(a,h,m,w,B){ft[h]=function(S,P,L,M,N,H,Z,G,X){for(M=Z;M<G;++M)for(Z=0;Z<X;++Z)N[H++]=B(L[w(S[P++])])},ft[a]=function(S,P,L,M,N,H,Z){var G=8>>S.b,X=S.Ea,ut=S.K[0],tt=S.w;if(8>G)for(S=(1<<S.b)-1,tt=(1<<G)-1;P<L;++P){var it,st=0;for(it=0;it<X;++it)it&S||(st=w(M[N++])),H[Z++]=B(ut[st&tt]),st>>=G}else ft["VP8LMapColor"+m](M,N,ut,tt,H,Z,P,L,X)}}function Ie(a,h,m,w,B){for(m=h+m;h<m;){var S=a[h++];w[B++]=S>>16&255,w[B++]=S>>8&255,w[B++]=S>>0&255}}function Xr(a,h,m,w,B){for(m=h+m;h<m;){var S=a[h++];w[B++]=S>>16&255,w[B++]=S>>8&255,w[B++]=S>>0&255,w[B++]=S>>24&255}}function he(a,h,m,w,B){for(m=h+m;h<m;){var S=(P=a[h++])>>16&240|P>>12&15,P=P>>0&240|P>>28&15;w[B++]=S,w[B++]=P}}function rr(a,h,m,w,B){for(m=h+m;h<m;){var S=(P=a[h++])>>16&248|P>>13&7,P=P>>5&224|P>>3&31;w[B++]=S,w[B++]=P}}function Ee(a,h,m,w,B){for(m=h+m;h<m;){var S=a[h++];w[B++]=S>>0&255,w[B++]=S>>8&255,w[B++]=S>>16&255}}function vr(a,h,m,w,B,S){if(S==0)for(m=h+m;h<m;)be(w,((S=a[h++])[0]>>24|S[1]>>8&65280|S[2]<<8&16711680|S[3]<<24)>>>0),B+=32;else s(w,B,a,h,m)}function ti(a,h){ft[h][0]=ft[a+"0"],ft[h][1]=ft[a+"1"],ft[h][2]=ft[a+"2"],ft[h][3]=ft[a+"3"],ft[h][4]=ft[a+"4"],ft[h][5]=ft[a+"5"],ft[h][6]=ft[a+"6"],ft[h][7]=ft[a+"7"],ft[h][8]=ft[a+"8"],ft[h][9]=ft[a+"9"],ft[h][10]=ft[a+"10"],ft[h][11]=ft[a+"11"],ft[h][12]=ft[a+"12"],ft[h][13]=ft[a+"13"],ft[h][14]=ft[a+"0"],ft[h][15]=ft[a+"0"]}function Pe(a){return a==EA||a==ml||a==yl||a==vl}function mi(){this.eb=[],this.size=this.A=this.fb=0}function Rr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ri(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new mi,this.f.kb=new Rr,this.sd=null}function jr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function gt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function K(a){return alert("todo:WebPSamplerProcessPlane"),a.T}function q(a,h){var m=a.T,w=h.ba.f.RGBA,B=w.eb,S=w.fb+a.ka*w.A,P=_r[h.ba.S],L=a.y,M=a.O,N=a.f,H=a.N,Z=a.ea,G=a.W,X=h.cc,ut=h.dc,tt=h.Mc,it=h.Nc,st=a.ka,yt=a.ka+a.T,Lt=a.U,Qt=Lt+1>>1;for(st==0?P(L,M,null,null,N,H,Z,G,N,H,Z,G,B,S,null,null,Lt):(P(h.ec,h.fc,L,M,X,ut,tt,it,N,H,Z,G,B,S-w.A,B,S,Lt),++m);st+2<yt;st+=2)X=N,ut=H,tt=Z,it=G,H+=a.Rc,G+=a.Rc,S+=2*w.A,P(L,(M+=2*a.fa)-a.fa,L,M,X,ut,tt,it,N,H,Z,G,B,S-w.A,B,S,Lt);return M+=a.fa,a.j+yt<a.o?(s(h.ec,h.fc,L,M,Lt),s(h.cc,h.dc,N,H,Qt),s(h.Mc,h.Nc,Z,G,Qt),m--):1&yt||P(L,M,null,null,N,H,Z,G,N,H,Z,G,B,S+w.A,null,null,Lt),m}function At(a,h,m){var w=a.F,B=[a.J];if(w!=null){var S=a.U,P=h.ba.S,L=P==IA||P==yl;h=h.ba.f.RGBA;var M=[0],N=a.ka;M[0]=a.T,a.Kb&&(N==0?--M[0]:(--N,B[0]-=a.width),a.j+a.ka+a.T==a.o&&(M[0]=a.o-a.j-N));var H=h.eb;N=h.fb+N*h.A,a=ia(w,B[0],a.width,S,M,H,N+(L?0:3),h.A),t(m==M),a&&Pe(P)&&es(H,N,L,S,M,h.A)}return 0}function pt(a){var h=a.ma,m=h.ba.S,w=11>m,B=m==ja||m==SA||m==IA||m==gl||m==12||Pe(m);if(h.memory=null,h.Ib=null,h.Jb=null,h.Nd=null,!Ns(h.Oa,a,B?11:12))return 0;if(B&&Pe(m)&&xe(),a.da)alert("todo:use_scaling");else{if(w){if(h.Ib=K,a.Kb){if(m=a.U+1>>1,h.memory=d(a.U+2*m),h.memory==null)return 0;h.ec=h.memory,h.fc=0,h.cc=h.ec,h.dc=h.fc+a.U,h.Mc=h.cc,h.Nc=h.dc+m,h.Ib=q,xe()}}else alert("todo:EmitYUV");B&&(h.Jb=At,w&&Gt())}if(w&&!ii){for(a=0;256>a;++a)ec[a]=89858*(a-128)+QA>>LA,$u[a]=-22014*(a-128)+QA,kA[a]=-45773*(a-128),rc[a]=113618*(a-128)+QA>>LA;for(a=Ka;a<_l;++a)h=76283*(a-16)+QA>>LA,qu[a-Ka]=Un(h,255),Gu[a-Ka]=Un(h+8>>4,15);ii=1}return 1}function Pt(a){var h=a.ma,m=a.U,w=a.T;return t(!(1&a.ka)),0>=m||0>=w?0:(m=h.Ib(a,h),h.Jb!=null&&h.Jb(a,h,m),h.Dc+=m,1)}function Dt(a){a.ma.memory=null}function Ut(a,h,m,w){return Wt(a,8)!=47?0:(h[0]=Wt(a,14)+1,m[0]=Wt(a,14)+1,w[0]=Wt(a,1),Wt(a,3)!=0?0:!a.h)}function It(a,h){if(4>a)return a+1;var m=a-2>>1;return(2+(1&a)<<m)+Wt(h,m)+1}function te(a,h){return 120<h?h-120:1<=(m=((m=Hs[h-1])>>4)*a+(8-(15&m)))?m:1;var m}function le(a,h,m){var w=dt(m),B=a[h+=255&w].g-8;return 0<B&&(St(m,m.u+8),w=dt(m),h+=a[h].value,h+=w&(1<<B)-1),St(m,m.u+a[h].g),a[h].value}function qt(a,h,m){return m.g+=a.g,m.value+=a.value<<h>>>0,t(8>=m.g),a.g}function pe(a,h,m){var w=a.xc;return t((h=w==0?0:a.vc[a.md*(m>>w)+(h>>w)])<a.Wb),a.Ya[h]}function ke(a,h,m,w){var B=a.ab,S=a.c*h,P=a.C;h=P+h;var L=m,M=w;for(w=a.Ta,m=a.Ua;0<B--;){var N=a.gc[B],H=P,Z=h,G=L,X=M,ut=(M=w,L=m,N.Ea);switch(t(H<Z),t(Z<=N.nc),N.hc){case 2:dl(G,X,(Z-H)*ut,M,L);break;case 0:var tt=H,it=Z,st=M,yt=L,Lt=(Xt=N).Ea;tt==0&&(Oa(G,X,null,null,1,st,yt),yr(G,X+1,0,0,Lt-1,st,yt+1),X+=Lt,yt+=Lt,++tt);for(var Qt=1<<Xt.b,ne=Qt-1,ee=Ke(Lt,Xt.b),ie=Xt.K,Xt=Xt.w+(tt>>Xt.b)*ee;tt<it;){var we=ie,De=Xt,de=1;for(ra(G,X,st,yt-Lt,1,st,yt);de<Lt;){var fe=(de&~ne)+Qt;fe>Lt&&(fe=Lt),(0,Er[we[De++]>>8&15])(G,X+ +de,st,yt+de-Lt,fe-de,st,yt+de),de=fe}X+=Lt,yt+=Lt,++tt&ne||(Xt+=ee)}Z!=N.nc&&s(M,L-ut,M,L+(Z-H-1)*ut,ut);break;case 1:for(ut=G,it=X,Lt=(G=N.Ea)-(yt=G&~(st=(X=1<<N.b)-1)),tt=Ke(G,N.b),Qt=N.K,N=N.w+(H>>N.b)*tt;H<Z;){for(ne=Qt,ee=N,ie=new Se,Xt=it+yt,we=it+G;it<Xt;)ce(ne[ee++],ie),Pn(ie,ut,it,X,M,L),it+=X,L+=X;it<we&&(ce(ne[ee++],ie),Pn(ie,ut,it,Lt,M,L),it+=Lt,L+=Lt),++H&st||(N+=tt)}break;case 3:if(G==M&&X==L&&0<N.b){for(it=M,G=ut=L+(Z-H)*ut-(yt=(Z-H)*Ke(N.Ea,N.b)),X=M,st=L,tt=[],yt=(Lt=yt)-1;0<=yt;--yt)tt[yt]=X[st+yt];for(yt=Lt-1;0<=yt;--yt)it[G+yt]=tt[yt];bn(N,H,Z,M,ut,M,L)}else bn(N,H,Z,G,X,M,L)}L=w,M=m}M!=m&&s(w,m,L,M,S)}function Ge(a,h){var m=a.V,w=a.Ba+a.c*a.C,B=h-a.C;if(t(h<=a.l.o),t(16>=B),0<B){var S=a.l,P=a.Ta,L=a.Ua,M=S.width;if(ke(a,B,m,w),B=L=[L],t((m=a.C)<(w=h)),t(S.v<S.va),w>S.o&&(w=S.o),m<S.j){var N=S.j-m;m=S.j,B[0]+=N*M}if(m>=w?m=0:(B[0]+=4*S.v,S.ka=m-S.j,S.U=S.va-S.v,S.T=w-m,m=1),m){if(L=L[0],11>(m=a.ca).S){var H=m.f.RGBA,Z=(w=m.S,B=S.U,S=S.T,N=H.eb,H.A),G=S;for(H=H.fb+a.Ma*H.A;0<G--;){var X=P,ut=L,tt=B,it=N,st=H;switch(w){case CA:ys(X,ut,tt,it,st);break;case ja:Ao(X,ut,tt,it,st);break;case EA:Ao(X,ut,tt,it,st),es(it,st,0,tt,1,0);break;case FA:Fo(X,ut,tt,it,st);break;case SA:vr(X,ut,tt,it,st,1);break;case ml:vr(X,ut,tt,it,st,1),es(it,st,0,tt,1,0);break;case IA:vr(X,ut,tt,it,st,0);break;case yl:vr(X,ut,tt,it,st,0),es(it,st,1,tt,1,0);break;case gl:Rn(X,ut,tt,it,st);break;case vl:Rn(X,ut,tt,it,st),uo(it,st,tt,1,0);break;case Eo:Rs(X,ut,tt,it,st);break;default:t(0)}L+=M,H+=Z}a.Ma+=S}else alert("todo:EmitRescaledRowsYUVA");t(a.Ma<=m.height)}}a.C=h,t(a.C<=a.i)}function ar(a){var h;if(0<a.ua)return 0;for(h=0;h<a.Wb;++h){var m=a.Ya[h].G,w=a.Ya[h].H;if(0<m[1][w[1]+0].g||0<m[2][w[2]+0].g||0<m[3][w[3]+0].g)return 0}return 1}function xr(a,h,m,w,B,S){if(a.Z!=0){var P=a.qd,L=a.rd;for(t(Vn[a.Z]!=null);h<m;++h)Vn[a.Z](P,L,w,B,w,B,S),P=w,L=B,B+=S;a.qd=P,a.rd=L}}function tr(a,h){var m=a.l.ma,w=m.Z==0||m.Z==1?a.l.j:a.C;if(w=a.C<w?w:a.C,t(h<=a.l.o),h>w){var B=a.l.width,S=m.ca,P=m.tb+B*w,L=a.V,M=a.Ba+a.c*w,N=a.gc;t(a.ab==1),t(N[0].hc==3),pl(N[0],w,h,L,M,S,P),xr(m,w,h,S,P,B)}a.C=a.Ma=h}function Br(a,h,m,w,B,S,P){var L=a.$/w,M=a.$%w,N=a.m,H=a.s,Z=m+a.$,G=Z;B=m+w*B;var X=m+w*S,ut=280+H.ua,tt=a.Pb?L:16777216,it=0<H.ua?H.Wa:null,st=H.wc,yt=Z<X?pe(H,M,L):null;t(a.C<S),t(X<=B);var Lt=!1;t:for(;;){for(;Lt||Z<X;){var Qt=0;if(L>=tt){var ne=Z-m;t((tt=a).Pb),tt.wd=tt.m,tt.xd=ne,0<tt.s.ua&&oe(tt.s.Wa,tt.s.vb),tt=L+Dc}if(M&st||(yt=pe(H,M,L)),t(yt!=null),yt.Qb&&(h[Z]=yt.qb,Lt=!0),!Lt)if(Ot(N),yt.jc){Qt=N,ne=h;var ee=Z,ie=yt.pd[dt(Qt)&_n-1];t(yt.jc),256>ie.g?(St(Qt,Qt.u+ie.g),ne[ee]=ie.value,Qt=0):(St(Qt,Qt.u+ie.g-256),t(256<=ie.value),Qt=ie.value),Qt==0&&(Lt=!0)}else Qt=le(yt.G[0],yt.H[0],N);if(N.h)break;if(Lt||256>Qt){if(!Lt)if(yt.nd)h[Z]=(yt.qb|Qt<<8)>>>0;else{if(Ot(N),Lt=le(yt.G[1],yt.H[1],N),Ot(N),ne=le(yt.G[2],yt.H[2],N),ee=le(yt.G[3],yt.H[3],N),N.h)break;h[Z]=(ee<<24|Lt<<16|Qt<<8|ne)>>>0}if(Lt=!1,++Z,++M>=w&&(M=0,++L,P!=null&&L<=S&&!(L%16)&&P(a,L),it!=null))for(;G<Z;)Qt=h[G++],it.X[(506832829*Qt&4294967295)>>>it.Mb]=Qt}else if(280>Qt){if(Qt=It(Qt-256,N),ne=le(yt.G[4],yt.H[4],N),Ot(N),ne=te(w,ne=It(ne,N)),N.h)break;if(Z-m<ne||B-Z<Qt)break t;for(ee=0;ee<Qt;++ee)h[Z+ee]=h[Z+ee-ne];for(Z+=Qt,M+=Qt;M>=w;)M-=w,++L,P!=null&&L<=S&&!(L%16)&&P(a,L);if(t(Z<=B),M&st&&(yt=pe(H,M,L)),it!=null)for(;G<Z;)Qt=h[G++],it.X[(506832829*Qt&4294967295)>>>it.Mb]=Qt}else{if(!(Qt<ut))break t;for(Lt=Qt-280,t(it!=null);G<Z;)Qt=h[G++],it.X[(506832829*Qt&4294967295)>>>it.Mb]=Qt;Qt=Z,t(!(Lt>>>(ne=it).Xa)),h[Qt]=ne.X[Lt],Lt=!0}Lt||t(N.h==_t(N))}if(a.Pb&&N.h&&Z<B)t(a.m.h),a.a=5,a.m=a.wd,a.$=a.xd,0<a.s.ua&&oe(a.s.vb,a.s.Wa);else{if(N.h)break t;P!=null&&P(a,L>S?S:L),a.a=0,a.$=Z-m}return 1}return a.a=3,0}function Kr(a){t(a!=null),a.vc=null,a.yc=null,a.Ya=null;var h=a.Wa;h!=null&&(h.X=null),a.vb=null,t(a!=null)}function qr(){var a=new Na;return a==null?null:(a.a=0,a.xb=PA,ti("Predictor","VP8LPredictors"),ti("Predictor","VP8LPredictors_C"),ti("PredictorAdd","VP8LPredictorsAdd"),ti("PredictorAdd","VP8LPredictorsAdd_C"),dl=br,Pn=Je,ys=Ie,Ao=Xr,Rn=he,Rs=rr,Fo=Ee,ft.VP8LMapColor32b=ao,ft.VP8LMapColor8b=bA,a)}function gr(a,h,m,w,B){var S=1,P=[a],L=[h],M=w.m,N=w.s,H=null,Z=0;t:for(;;){if(m)for(;S&&Wt(M,1);){var G=P,X=L,ut=w,tt=1,it=ut.m,st=ut.gc[ut.ab],yt=Wt(it,2);if(ut.Oc&1<<yt)S=0;else{switch(ut.Oc|=1<<yt,st.hc=yt,st.Ea=G[0],st.nc=X[0],st.K=[null],++ut.ab,t(4>=ut.ab),yt){case 0:case 1:st.b=Wt(it,3)+2,tt=gr(Ke(st.Ea,st.b),Ke(st.nc,st.b),0,ut,st.K),st.K=st.K[0];break;case 3:var Lt,Qt=Wt(it,8)+1,ne=16<Qt?0:4<Qt?1:2<Qt?2:3;if(G[0]=Ke(st.Ea,ne),st.b=ne,Lt=tt=gr(Qt,1,0,ut,st.K)){var ee,ie=Qt,Xt=st,we=1<<(8>>Xt.b),De=d(we);if(De==null)Lt=0;else{var de=Xt.K[0],fe=Xt.w;for(De[0]=Xt.K[0][0],ee=1;ee<1*ie;++ee)De[ee]=Ae(de[fe+ee],De[ee-1]);for(;ee<4*we;++ee)De[ee]=0;Xt.K[0]=null,Xt.K[0]=De,Lt=1}}tt=Lt;break;case 2:break;default:t(0)}S=tt}}if(P=P[0],L=L[0],S&&Wt(M,1)&&!(S=1<=(Z=Wt(M,4))&&11>=Z)){w.a=3;break t}var Ne;if(Ne=S)e:{var pr,Ue,or,Nr=w,$r=P,Ci=L,fr=Z,pi=m,Ai=Nr.m,Gr=Nr.s,Wr=[null],wi=1,tn=0,jn=Vs[fr];r:for(;;){if(pi&&Wt(Ai,1)){var Fi=Wt(Ai,3)+2,xn=Ke($r,Fi),go=Ke(Ci,Fi),sa=xn*go;if(!gr(xn,go,0,Nr,Wr))break r;for(Wr=Wr[0],Gr.xc=Fi,pr=0;pr<sa;++pr){var ji=Wr[pr]>>8&65535;Wr[pr]=ji,ji>=wi&&(wi=ji+1)}}if(Ai.h)break r;for(Ue=0;5>Ue;++Ue){var Yr=Jl[Ue];!Ue&&0<fr&&(Yr+=1<<fr),tn<Yr&&(tn=Yr)}var mo=p(wi*jn,ct),_s=wi,Bn=p(_s,mt);if(Bn==null)var Ki=null;else t(65536>=_s),Ki=Bn;var pn=d(tn);if(Ki==null||pn==null||mo==null){Nr.a=1;break r}var fi=mo;for(pr=or=0;pr<wi;++pr){var Cn=Ki[pr],ss=Cn.G,yo=Cn.H,Xu=0,ic=1,en=0;for(Ue=0;5>Ue;++Ue){Yr=Jl[Ue],ss[Ue]=fi,yo[Ue]=or,!Ue&&0<fr&&(Yr+=1<<fr);n:{var Ks,$a=Yr,oa=Nr,qa=pn,Hc=fi,Vc=or,MA=0,DA=oa.m,fd=Wt(DA,1);if(u(qa,0,0,$a),fd){var Zu=Wt(DA,1)+1,qf=Wt(DA,1),Wu=Wt(DA,qf==0?1:8);qa[Wu]=1,Zu==2&&(qa[Wu=Wt(DA,8)]=1);var bl=1}else{var NA=d(19),jc=Wt(DA,4)+4;if(19<jc){oa.a=3;var Kc=0;break n}for(Ks=0;Ks<jc;++Ks)NA[zu[Ks]]=Wt(DA,3);var Yu=void 0,$c=void 0,Ju=oa,qc=NA,Ga=$a,aa=qa,$s=0,os=Ju.m,gd=8,OA=p(128,ct);i:for(;at(OA,0,7,qc,19);){if(Wt(os,1)){var ly=2+2*Wt(os,3);if((Yu=2+Wt(os,ly))>Ga)break i}else Yu=Ga;for($c=0;$c<Ga&&Yu--;){Ot(os);var md=OA[0+(127&dt(os))];St(os,os.u+md.g);var _i=md.value;if(16>_i)aa[$c++]=_i,_i!=0&&(gd=_i);else{var yd=_i==16,vd=_i-16,xl=Mc[vd],RA=Wt(os,Ru[vd])+xl;if($c+RA>Ga)break i;for(var th=yd?gd:0;0<RA--;)aa[$c++]=th}}$s=1;break i}$s||(Ju.a=3),bl=$s}(bl=bl&&!DA.h)&&(MA=at(Hc,Vc,8,qa,$a)),bl&&MA!=0?Kc=MA:(oa.a=3,Kc=0)}if(Kc==0)break r;if(ic&&TA[Ue]==1&&(ic=fi[or].g==0),Xu+=fi[or].g,or+=Kc,3>=Ue){var Bl,eh=pn[0];for(Bl=1;Bl<Yr;++Bl)pn[Bl]>eh&&(eh=pn[Bl]);en+=eh}}if(Cn.nd=ic,Cn.Qb=0,ic&&(Cn.qb=(ss[3][yo[3]+0].value<<24|ss[1][yo[1]+0].value<<16|ss[2][yo[2]+0].value)>>>0,Xu==0&&256>ss[0][yo[0]+0].value&&(Cn.Qb=1,Cn.qb+=ss[0][yo[0]+0].value<<8)),Cn.jc=!Cn.Qb&&6>en,Cn.jc){var rh,Aa=Cn;for(rh=0;rh<_n;++rh){var zA=rh,la=Aa.pd[zA],ih=Aa.G[0][Aa.H[0]+zA];256<=ih.value?(la.g=ih.g+256,la.value=ih.value):(la.g=0,la.value=0,zA>>=qt(ih,8,la),zA>>=qt(Aa.G[1][Aa.H[1]+zA],16,la),zA>>=qt(Aa.G[2][Aa.H[2]+zA],0,la),qt(Aa.G[3][Aa.H[3]+zA],24,la))}}}Gr.vc=Wr,Gr.Wb=wi,Gr.Ya=Ki,Gr.yc=mo,Ne=1;break e}Ne=0}if(!(S=Ne)){w.a=3;break t}if(0<Z){if(N.ua=1<<Z,!je(N.Wa,Z)){w.a=1,S=0;break t}}else N.ua=0;var Gc=w,wd=P,Gf=L,HA=Gc.s,_d=HA.xc;if(Gc.c=wd,Gc.i=Gf,HA.md=Ke(wd,_d),HA.wc=_d==0?-1:(1<<_d)-1,m){w.xb=wl;break t}if((H=d(P*L))==null){w.a=1,S=0;break t}S=(S=Br(w,H,0,P,L,L,null))&&!M.h;break t}return S?(B!=null?B[0]=H:(t(H==null),t(m)),w.$=0,m||Kr(N)):Kr(N),S}function Mr(a,h){var m=a.c*a.i,w=m+h+16*h;return t(a.c<=h),a.V=d(w),a.V==null?(a.Ta=null,a.Ua=0,a.a=1,0):(a.Ta=a.V,a.Ua=a.Ba+m+h,1)}function Zr(a,h){var m=a.C,w=h-m,B=a.V,S=a.Ba+a.c*m;for(t(h<=a.l.o);0<w;){var P=16<w?16:w,L=a.l.ma,M=a.l.width,N=M*P,H=L.ca,Z=L.tb+M*m,G=a.Ta,X=a.Ua;ke(a,P,B,S),Ou(G,X,H,Z,N),xr(L,m,m+P,H,Z,M),w-=P,B+=P*a.c,m+=P}t(m==h),a.C=a.Ma=h}function Ct(){this.ub=this.yd=this.td=this.Rb=0}function Fe(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ye(){this.Fb=this.Bb=this.Cb=0,this.Zb=d(4),this.Lb=d(4)}function Lr(){this.Yb=function(){var a=[];return function h(m,w,B){for(var S=B[w],P=0;P<S&&(m.push(B.length>w+1?[]:0),!(B.length<w+1));P++)h(m[P],w+1,B)}(a,0,[3,11]),a}()}function dr(){this.jb=d(3),this.Wc=A([4,8],Lr),this.Xc=A([4,17],Lr)}function zi(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new d(4),this.od=new d(4)}function ai(){this.ld=this.La=this.dd=this.tc=0}function yi(){this.Na=this.la=0}function di(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Oi(){this.ad=d(384),this.Za=0,this.Ob=d(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Xi(){this.uc=this.M=this.Nb=0,this.wa=Array(new ai),this.Y=0,this.ya=Array(new Oi),this.aa=0,this.l=new to}function Hi(){this.y=d(16),this.f=d(8),this.ea=d(8)}function aA(){this.cb=this.a=0,this.sc="",this.m=new me,this.Od=new Ct,this.Kc=new Fe,this.ed=new zi,this.Qa=new ye,this.Ic=this.$c=this.Aa=0,this.D=new Xi,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=p(8,me),this.ia=0,this.pb=p(4,di),this.Pa=new dr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Hi),this.Hd=0,this.rb=Array(new yi),this.sb=0,this.wa=Array(new ai),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Oi),this.L=this.aa=0,this.gd=A([4,2],ai),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function to(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Li(){var a=new aA;return a!=null&&(a.a=0,a.sc="OK",a.cb=0,a.Xb=0,na||(na=Sa)),a}function si(a,h,m){return a.a==0&&(a.a=h,a.sc=m,a.cb=0),0}function eo(a,h,m){return 3<=m&&a[h+0]==157&&a[h+1]==1&&a[h+2]==42}function Bi(a,h){if(a==null)return 0;if(a.a=0,a.sc="OK",h==null)return si(a,2,"null VP8Io passed to VP8GetHeaders()");var m=h.data,w=h.w,B=h.ha;if(4>B)return si(a,7,"Truncated header.");var S=m[w+0]|m[w+1]<<8|m[w+2]<<16,P=a.Od;if(P.Rb=!(1&S),P.td=S>>1&7,P.yd=S>>4&1,P.ub=S>>5,3<P.td)return si(a,3,"Incorrect keyframe parameters.");if(!P.yd)return si(a,4,"Frame not displayable.");w+=3,B-=3;var L=a.Kc;if(P.Rb){if(7>B)return si(a,7,"cannot parse picture header");if(!eo(m,w,B))return si(a,3,"Bad code word");L.c=16383&(m[w+4]<<8|m[w+3]),L.Td=m[w+4]>>6,L.i=16383&(m[w+6]<<8|m[w+5]),L.Ud=m[w+6]>>6,w+=7,B-=7,a.za=L.c+15>>4,a.Ub=L.i+15>>4,h.width=L.c,h.height=L.i,h.Da=0,h.j=0,h.v=0,h.va=h.width,h.o=h.height,h.da=0,h.ib=h.width,h.hb=h.height,h.U=h.width,h.T=h.height,u((S=a.Pa).jb,0,255,S.jb.length),t((S=a.Qa)!=null),S.Cb=0,S.Bb=0,S.Fb=1,u(S.Zb,0,0,S.Zb.length),u(S.Lb,0,0,S.Lb)}if(P.ub>B)return si(a,7,"bad partition length");$t(S=a.m,m,w,P.ub),w+=P.ub,B-=P.ub,P.Rb&&(L.Ld=Jt(S),L.Kd=Jt(S)),L=a.Qa;var M,N=a.Pa;if(t(S!=null),t(L!=null),L.Cb=Jt(S),L.Cb){if(L.Bb=Jt(S),Jt(S)){for(L.Fb=Jt(S),M=0;4>M;++M)L.Zb[M]=Jt(S)?Zt(S,7):0;for(M=0;4>M;++M)L.Lb[M]=Jt(S)?Zt(S,6):0}if(L.Bb)for(M=0;3>M;++M)N.jb[M]=Jt(S)?Vt(S,8):255}else L.Bb=0;if(S.Ka)return si(a,3,"cannot parse segment header");if((L=a.ed).zd=Jt(S),L.Tb=Vt(S,6),L.wb=Vt(S,3),L.Pc=Jt(S),L.Pc&&Jt(S)){for(N=0;4>N;++N)Jt(S)&&(L.vd[N]=Zt(S,6));for(N=0;4>N;++N)Jt(S)&&(L.od[N]=Zt(S,6))}if(a.L=L.Tb==0?0:L.zd?1:2,S.Ka)return si(a,3,"cannot parse filter header");var H=B;if(B=M=w,w=M+H,L=H,a.Xb=(1<<Vt(a.m,2))-1,H<3*(N=a.Xb))m=7;else{for(M+=3*N,L-=3*N,H=0;H<N;++H){var Z=m[B+0]|m[B+1]<<8|m[B+2]<<16;Z>L&&(Z=L),$t(a.Jc[+H],m,M,Z),M+=Z,L-=Z,B+=3}$t(a.Jc[+N],m,M,L),m=M<w?0:5}if(m!=0)return si(a,m,"cannot parse partitions");for(m=Vt(M=a.m,7),B=Jt(M)?Zt(M,4):0,w=Jt(M)?Zt(M,4):0,L=Jt(M)?Zt(M,4):0,N=Jt(M)?Zt(M,4):0,M=Jt(M)?Zt(M,4):0,H=a.Qa,Z=0;4>Z;++Z){if(H.Cb){var G=H.Zb[Z];H.Fb||(G+=m)}else{if(0<Z){a.pb[Z]=a.pb[0];continue}G=m}var X=a.pb[Z];X.Sc[0]=is[Un(G+B,127)],X.Sc[1]=To[Un(G+0,127)],X.Eb[0]=2*is[Un(G+w,127)],X.Eb[1]=101581*To[Un(G+L,127)]>>16,8>X.Eb[1]&&(X.Eb[1]=8),X.Qc[0]=is[Un(G+N,117)],X.Qc[1]=To[Un(G+M,127)],X.lc=G+M}if(!P.Rb)return si(a,4,"Not a key frame.");for(Jt(S),P=a.Pa,m=0;4>m;++m){for(B=0;8>B;++B)for(w=0;3>w;++w)for(L=0;11>L;++L)N=re(S,ho[m][B][w][L])?Vt(S,8):Vu[m][B][w][L],P.Wc[m][B].Yb[w][L]=N;for(B=0;17>B;++B)P.Xc[m][B]=P.Wc[m][Re[B]]}return a.kc=Jt(S),a.kc&&(a.Bd=Vt(S,8)),a.cb=1}function Sa(a,h,m,w,B,S,P){var L=h[B].Yb[m];for(m=0;16>B;++B){if(!re(a,L[m+0]))return B;for(;!re(a,L[m+1]);)if(L=h[++B].Yb[0],m=0,B==16)return 16;var M=h[B+1].Yb;if(re(a,L[m+2])){var N=a,H=0;if(re(N,(G=L)[(Z=m)+3]))if(re(N,G[Z+6])){for(L=0,Z=2*(H=re(N,G[Z+8]))+(G=re(N,G[Z+9+H])),H=0,G=dd[Z];G[L];++L)H+=H+re(N,G[L]);H+=3+(8<<Z)}else re(N,G[Z+7])?(H=7+2*re(N,165),H+=re(N,145)):H=5+re(N,159);else H=re(N,G[Z+4])?3+re(N,G[Z+5]):2;L=M[2]}else H=1,L=M[1];M=P+Nc[B],0>(N=a).b&&Rt(N);var Z,G=N.b,X=(Z=N.Ca>>1)-(N.I>>G)>>31;--N.b,N.Ca+=X,N.Ca|=1,N.I-=(Z+1&X)<<G,S[M]=((H^X)-X)*w[(0<B)+0]}return 16}function vn(a){var h=a.rb[a.sb-1];h.la=0,h.Na=0,u(a.zc,0,0,a.zc.length),a.ja=0}function Ia(a,h){if(a==null)return 0;if(h==null)return si(a,2,"NULL VP8Io parameter in VP8Decode().");if(!a.cb&&!Bi(a,h))return 0;if(t(a.cb),h.ac==null||h.ac(h)){h.ob&&(a.L=0);var m=_[a.L];if(a.L==2?(a.yb=0,a.zb=0):(a.yb=h.v-m>>4,a.zb=h.j-m>>4,0>a.yb&&(a.yb=0),0>a.zb&&(a.zb=0)),a.Va=h.o+15+m>>4,a.Hb=h.va+15+m>>4,a.Hb>a.za&&(a.Hb=a.za),a.Va>a.Ub&&(a.Va=a.Ub),0<a.L){var w=a.ed;for(m=0;4>m;++m){var B;if(a.Qa.Cb){var S=a.Qa.Lb[m];a.Qa.Fb||(S+=w.Tb)}else S=w.Tb;for(B=0;1>=B;++B){var P=a.gd[m][B],L=S;if(w.Pc&&(L+=w.vd[0],B&&(L+=w.od[0])),0<(L=0>L?0:63<L?63:L)){var M=L;0<w.wb&&(M=4<w.wb?M>>2:M>>1)>9-w.wb&&(M=9-w.wb),1>M&&(M=1),P.dd=M,P.tc=2*L+M,P.ld=40<=L?2:15<=L?1:0}else P.tc=0;P.La=B}}}m=0}else si(a,6,"Frame setup failed"),m=a.a;if(m=m==0){if(m){a.$c=0,0<a.Aa||(a.Ic=c);t:{m=a.Ic,w=4*(M=a.za);var N=32*M,H=M+1,Z=0<a.L?M*(0<a.Aa?2:1):0,G=(a.Aa==2?2:1)*M;if((P=w+832+(B=3*(16*m+_[a.L])/2*N)+(S=a.Fa!=null&&0<a.Fa.length?a.Kc.c*a.Kc.i:0))!=P)m=0;else{if(P>a.Vb){if(a.Vb=0,a.Ec=d(P),a.Fc=0,a.Ec==null){m=si(a,1,"no memory during frame initialization.");break t}a.Vb=P}P=a.Ec,L=a.Fc,a.Ac=P,a.Bc=L,L+=w,a.Gd=p(N,Hi),a.Hd=0,a.rb=p(H+1,yi),a.sb=1,a.wa=Z?p(Z,ai):null,a.Y=0,a.D.Nb=0,a.D.wa=a.wa,a.D.Y=a.Y,0<a.Aa&&(a.D.Y+=M),t(!0),a.oc=P,a.pc=L,L+=832,a.ya=p(G,Oi),a.aa=0,a.D.ya=a.ya,a.D.aa=a.aa,a.Aa==2&&(a.D.aa+=M),a.R=16*M,a.B=8*M,M=(N=_[a.L])*a.R,N=N/2*a.B,a.sa=P,a.ta=L+M,a.qa=a.sa,a.ra=a.ta+16*m*a.R+N,a.Ha=a.qa,a.Ia=a.ra+8*m*a.B+N,a.$c=0,L+=B,a.mb=S?P:null,a.nb=S?L:null,t(L+S<=a.Fc+a.Vb),vn(a),u(a.Ac,a.Bc,0,w),m=1}}if(m){if(h.ka=0,h.y=a.sa,h.O=a.ta,h.f=a.qa,h.N=a.ra,h.ea=a.Ha,h.Vd=a.Ia,h.fa=a.R,h.Rc=a.B,h.F=null,h.J=0,!xA){for(m=-255;255>=m;++m)fl[255+m]=0>m?-m:m;for(m=-1020;1020>=m;++m)Ti[1020+m]=-128>m?-128:127<m?127:m;for(m=-112;112>=m;++m)ws[112+m]=-16>m?-16:15<m?15:m;for(m=-255;510>=m;++m)rs[255+m]=0>m?0:255<m?255:m;xA=1}Ln=cA,Ra=AA,vs=lA,Qn=Ea,zn=Ta,So=Vr,Io=gA,za=Da,lo=Yl,zs=mA,Ha=Wl,kn=Go,Hn=yA,Or=ll,ei=qo,vi=Co,Mi=ks,co=kc,ns[0]=Qs,ns[1]=uA,ns[2]=Qa,ns[3]=dA,ns[4]=ol,ns[5]=ka,ns[6]=ro,ns[7]=al,ns[8]=Xl,ns[9]=Qc,Uo[0]=Gl,Uo[1]=$o,Uo[2]=bo,Uo[3]=hA,Uo[4]=Ei,Uo[5]=La,Uo[6]=wn,po[0]=no,po[1]=Ua,po[2]=Zl,po[3]=Al,po[4]=xo,po[5]=pA,po[6]=Ma,m=1}else m=0}m&&(m=function(X,ut){for(X.M=0;X.M<X.Va;++X.M){var tt,it=X.Jc[X.M&X.Xb],st=X.m,yt=X;for(tt=0;tt<yt.za;++tt){var Lt=st,Qt=yt,ne=Qt.Ac,ee=Qt.Bc+4*tt,ie=Qt.zc,Xt=Qt.ya[Qt.aa+tt];if(Qt.Qa.Bb?Xt.$b=re(Lt,Qt.Pa.jb[0])?2+re(Lt,Qt.Pa.jb[2]):re(Lt,Qt.Pa.jb[1]):Xt.$b=0,Qt.kc&&(Xt.Ad=re(Lt,Qt.Bd)),Xt.Za=!re(Lt,145)+0,Xt.Za){var we=Xt.Ob,De=0;for(Qt=0;4>Qt;++Qt){var de,fe=ie[0+Qt];for(de=0;4>de;++de){fe=UA[ne[ee+de]][fe];for(var Ne=Hu[re(Lt,fe[0])];0<Ne;)Ne=Hu[2*Ne+re(Lt,fe[Ne])];fe=-Ne,ne[ee+de]=fe}s(we,De,ne,ee,4),De+=4,ie[0+Qt]=fe}}else fe=re(Lt,156)?re(Lt,128)?1:3:re(Lt,163)?2:0,Xt.Ob[0]=fe,u(ne,ee,fe,4),u(ie,0,fe,4);Xt.Dd=re(Lt,142)?re(Lt,114)?re(Lt,183)?1:3:2:0}if(yt.m.Ka)return si(X,7,"Premature end-of-partition0 encountered.");for(;X.ja<X.za;++X.ja){if(yt=it,Lt=(st=X).rb[st.sb-1],ne=st.rb[st.sb+st.ja],tt=st.ya[st.aa+st.ja],ee=st.kc?tt.Ad:0)Lt.la=ne.la=0,tt.Za||(Lt.Na=ne.Na=0),tt.Hc=0,tt.Gc=0,tt.ia=0;else{var pr,Ue;if(Lt=ne,ne=yt,ee=st.Pa.Xc,ie=st.ya[st.aa+st.ja],Xt=st.pb[ie.$b],Qt=ie.ad,we=0,De=st.rb[st.sb-1],fe=de=0,u(Qt,we,0,384),ie.Za)var or=0,Nr=ee[3];else{Ne=d(16);var $r=Lt.Na+De.Na;if($r=na(ne,ee[1],$r,Xt.Eb,0,Ne,0),Lt.Na=De.Na=(0<$r)+0,1<$r)Ln(Ne,0,Qt,we);else{var Ci=Ne[0]+3>>3;for(Ne=0;256>Ne;Ne+=16)Qt[we+Ne]=Ci}or=1,Nr=ee[0]}var fr=15&Lt.la,pi=15&De.la;for(Ne=0;4>Ne;++Ne){var Ai=1&pi;for(Ci=Ue=0;4>Ci;++Ci)fr=fr>>1|(Ai=($r=na(ne,Nr,$r=Ai+(1&fr),Xt.Sc,or,Qt,we))>or)<<7,Ue=Ue<<2|(3<$r?3:1<$r?2:Qt[we+0]!=0),we+=16;fr>>=4,pi=pi>>1|Ai<<7,de=(de<<8|Ue)>>>0}for(Nr=fr,or=pi>>4,pr=0;4>pr;pr+=2){for(Ue=0,fr=Lt.la>>4+pr,pi=De.la>>4+pr,Ne=0;2>Ne;++Ne){for(Ai=1&pi,Ci=0;2>Ci;++Ci)$r=Ai+(1&fr),fr=fr>>1|(Ai=0<($r=na(ne,ee[2],$r,Xt.Qc,0,Qt,we)))<<3,Ue=Ue<<2|(3<$r?3:1<$r?2:Qt[we+0]!=0),we+=16;fr>>=2,pi=pi>>1|Ai<<5}fe|=Ue<<4*pr,Nr|=fr<<4<<pr,or|=(240&pi)<<pr}Lt.la=Nr,De.la=or,ie.Hc=de,ie.Gc=fe,ie.ia=43690&fe?0:Xt.ia,ee=!(de|fe)}if(0<st.L&&(st.wa[st.Y+st.ja]=st.gd[tt.$b][tt.Za],st.wa[st.Y+st.ja].La|=!ee),yt.Ka)return si(X,7,"Premature end-of-file encountered.")}if(vn(X),st=ut,yt=1,tt=(it=X).D,Lt=0<it.L&&it.M>=it.zb&&it.M<=it.Va,it.Aa==0)t:{if(tt.M=it.M,tt.uc=Lt,Yo(it,tt),yt=1,tt=(Ue=it.D).Nb,Lt=(fe=_[it.L])*it.R,ne=fe/2*it.B,Ne=16*tt*it.R,Ci=8*tt*it.B,ee=it.sa,ie=it.ta-Lt+Ne,Xt=it.qa,Qt=it.ra-ne+Ci,we=it.Ha,De=it.Ia-ne+Ci,pi=(fr=Ue.M)==0,de=fr>=it.Va-1,it.Aa==2&&Yo(it,Ue),Ue.uc)for(Ai=($r=it).D.M,t($r.D.uc),Ue=$r.yb;Ue<$r.Hb;++Ue){or=Ue,Nr=Ai;var Gr=(Wr=(Yr=$r).D).Nb;pr=Yr.R;var Wr=Wr.wa[Wr.Y+or],wi=Yr.sa,tn=Yr.ta+16*Gr*pr+16*or,jn=Wr.dd,Fi=Wr.tc;if(Fi!=0)if(t(3<=Fi),Yr.L==1)0<or&&vi(wi,tn,pr,Fi+4),Wr.La&&co(wi,tn,pr,Fi),0<Nr&&ei(wi,tn,pr,Fi+4),Wr.La&&Mi(wi,tn,pr,Fi);else{var xn=Yr.B,go=Yr.qa,sa=Yr.ra+8*Gr*xn+8*or,ji=Yr.Ha,Yr=Yr.Ia+8*Gr*xn+8*or;Gr=Wr.ld,0<or&&(za(wi,tn,pr,Fi+4,jn,Gr),zs(go,sa,ji,Yr,xn,Fi+4,jn,Gr)),Wr.La&&(kn(wi,tn,pr,Fi,jn,Gr),Or(go,sa,ji,Yr,xn,Fi,jn,Gr)),0<Nr&&(Io(wi,tn,pr,Fi+4,jn,Gr),lo(go,sa,ji,Yr,xn,Fi+4,jn,Gr)),Wr.La&&(Ha(wi,tn,pr,Fi,jn,Gr),Hn(go,sa,ji,Yr,xn,Fi,jn,Gr))}}if(it.ia&&alert("todo:DitherRow"),st.put!=null){if(Ue=16*fr,fr=16*(fr+1),pi?(st.y=it.sa,st.O=it.ta+Ne,st.f=it.qa,st.N=it.ra+Ci,st.ea=it.Ha,st.W=it.Ia+Ci):(Ue-=fe,st.y=ee,st.O=ie,st.f=Xt,st.N=Qt,st.ea=we,st.W=De),de||(fr-=fe),fr>st.o&&(fr=st.o),st.F=null,st.J=null,it.Fa!=null&&0<it.Fa.length&&Ue<fr&&(st.J=_A(it,st,Ue,fr-Ue),st.F=it.mb,st.F==null&&st.F.length==0)){yt=si(it,3,"Could not decode alpha data.");break t}Ue<st.j&&(fe=st.j-Ue,Ue=st.j,t(!(1&fe)),st.O+=it.R*fe,st.N+=it.B*(fe>>1),st.W+=it.B*(fe>>1),st.F!=null&&(st.J+=st.width*fe)),Ue<fr&&(st.O+=st.v,st.N+=st.v>>1,st.W+=st.v>>1,st.F!=null&&(st.J+=st.v),st.ka=Ue-st.j,st.U=st.va-st.v,st.T=fr-Ue,yt=st.put(st))}tt+1!=it.Ic||de||(s(it.sa,it.ta-Lt,ee,ie+16*it.R,Lt),s(it.qa,it.ra-ne,Xt,Qt+8*it.B,ne),s(it.Ha,it.Ia-ne,we,De+8*it.B,ne))}if(!yt)return si(X,6,"Output aborted.")}return 1}(a,h)),h.bc!=null&&h.bc(h),m&=1}return m?(a.cb=0,m):0}function Zi(a,h,m,w,B){B=a[h+m+32*w]+(B>>3),a[h+m+32*w]=-256&B?0>B?0:255:B}function jo(a,h,m,w,B,S){Zi(a,h,0,m,w+B),Zi(a,h,1,m,w+S),Zi(a,h,2,m,w-S),Zi(a,h,3,m,w-B)}function Wi(a){return(20091*a>>16)+a}function fs(a,h,m,w){var B,S=0,P=d(16);for(B=0;4>B;++B){var L=a[h+0]+a[h+8],M=a[h+0]-a[h+8],N=(35468*a[h+4]>>16)-Wi(a[h+12]),H=Wi(a[h+4])+(35468*a[h+12]>>16);P[S+0]=L+H,P[S+1]=M+N,P[S+2]=M-N,P[S+3]=L-H,S+=4,h++}for(B=S=0;4>B;++B)L=(a=P[S+0]+4)+P[S+8],M=a-P[S+8],N=(35468*P[S+4]>>16)-Wi(P[S+12]),Zi(m,w,0,0,L+(H=Wi(P[S+4])+(35468*P[S+12]>>16))),Zi(m,w,1,0,M+N),Zi(m,w,2,0,M-N),Zi(m,w,3,0,L-H),S++,w+=32}function Vr(a,h,m,w){var B=a[h+0]+4,S=35468*a[h+4]>>16,P=Wi(a[h+4]),L=35468*a[h+1]>>16;jo(m,w,0,B+P,a=Wi(a[h+1]),L),jo(m,w,1,B+S,a,L),jo(m,w,2,B-S,a,L),jo(m,w,3,B-P,a,L)}function AA(a,h,m,w,B){fs(a,h,m,w),B&&fs(a,h+16,m,w+4)}function lA(a,h,m,w){Ra(a,h+0,m,w,1),Ra(a,h+32,m,w+128,1)}function Ea(a,h,m,w){var B;for(a=a[h+0]+4,B=0;4>B;++B)for(h=0;4>h;++h)Zi(m,w,h,B,a)}function Ta(a,h,m,w){a[h+0]&&Qn(a,h+0,m,w),a[h+16]&&Qn(a,h+16,m,w+4),a[h+32]&&Qn(a,h+32,m,w+128),a[h+48]&&Qn(a,h+48,m,w+128+4)}function cA(a,h,m,w){var B,S=d(16);for(B=0;4>B;++B){var P=a[h+0+B]+a[h+12+B],L=a[h+4+B]+a[h+8+B],M=a[h+4+B]-a[h+8+B],N=a[h+0+B]-a[h+12+B];S[0+B]=P+L,S[8+B]=P-L,S[4+B]=N+M,S[12+B]=N-M}for(B=0;4>B;++B)P=(a=S[0+4*B]+3)+S[3+4*B],L=S[1+4*B]+S[2+4*B],M=S[1+4*B]-S[2+4*B],N=a-S[3+4*B],m[w+0]=P+L>>3,m[w+16]=N+M>>3,m[w+32]=P-L>>3,m[w+48]=N-M>>3,w+=64}function Ko(a,h,m){var w,B=h-32,S=Vi,P=255-a[B-1];for(w=0;w<m;++w){var L,M=S,N=P+a[h-1];for(L=0;L<m;++L)a[h+L]=M[N+a[B+L]];h+=32}}function uA(a,h){Ko(a,h,4)}function Ua(a,h){Ko(a,h,8)}function $o(a,h){Ko(a,h,16)}function bo(a,h){var m;for(m=0;16>m;++m)s(a,h+32*m,a,h-32,16)}function hA(a,h){var m;for(m=16;0<m;--m)u(a,h,a[h-1],16),h+=32}function Pa(a,h,m){var w;for(w=0;16>w;++w)u(h,m+32*w,a,16)}function Gl(a,h){var m,w=16;for(m=0;16>m;++m)w+=a[h-1+32*m]+a[h+m-32];Pa(w>>5,a,h)}function Ei(a,h){var m,w=8;for(m=0;16>m;++m)w+=a[h-1+32*m];Pa(w>>4,a,h)}function La(a,h){var m,w=8;for(m=0;16>m;++m)w+=a[h+m-32];Pa(w>>4,a,h)}function wn(a,h){Pa(128,a,h)}function lr(a,h,m){return a+2*h+m+2>>2}function Qa(a,h){var m,w=h-32;for(w=new Uint8Array([lr(a[w-1],a[w+0],a[w+1]),lr(a[w+0],a[w+1],a[w+2]),lr(a[w+1],a[w+2],a[w+3]),lr(a[w+2],a[w+3],a[w+4])]),m=0;4>m;++m)s(a,h+32*m,w,0,w.length)}function dA(a,h){var m=a[h-1],w=a[h-1+32],B=a[h-1+64],S=a[h-1+96];be(a,h+0,16843009*lr(a[h-1-32],m,w)),be(a,h+32,16843009*lr(m,w,B)),be(a,h+64,16843009*lr(w,B,S)),be(a,h+96,16843009*lr(B,S,S))}function Qs(a,h){var m,w=4;for(m=0;4>m;++m)w+=a[h+m-32]+a[h-1+32*m];for(w>>=3,m=0;4>m;++m)u(a,h+32*m,w,4)}function ol(a,h){var m=a[h-1+0],w=a[h-1+32],B=a[h-1+64],S=a[h-1-32],P=a[h+0-32],L=a[h+1-32],M=a[h+2-32],N=a[h+3-32];a[h+0+96]=lr(w,B,a[h-1+96]),a[h+1+96]=a[h+0+64]=lr(m,w,B),a[h+2+96]=a[h+1+64]=a[h+0+32]=lr(S,m,w),a[h+3+96]=a[h+2+64]=a[h+1+32]=a[h+0+0]=lr(P,S,m),a[h+3+64]=a[h+2+32]=a[h+1+0]=lr(L,P,S),a[h+3+32]=a[h+2+0]=lr(M,L,P),a[h+3+0]=lr(N,M,L)}function ro(a,h){var m=a[h+1-32],w=a[h+2-32],B=a[h+3-32],S=a[h+4-32],P=a[h+5-32],L=a[h+6-32],M=a[h+7-32];a[h+0+0]=lr(a[h+0-32],m,w),a[h+1+0]=a[h+0+32]=lr(m,w,B),a[h+2+0]=a[h+1+32]=a[h+0+64]=lr(w,B,S),a[h+3+0]=a[h+2+32]=a[h+1+64]=a[h+0+96]=lr(B,S,P),a[h+3+32]=a[h+2+64]=a[h+1+96]=lr(S,P,L),a[h+3+64]=a[h+2+96]=lr(P,L,M),a[h+3+96]=lr(L,M,M)}function ka(a,h){var m=a[h-1+0],w=a[h-1+32],B=a[h-1+64],S=a[h-1-32],P=a[h+0-32],L=a[h+1-32],M=a[h+2-32],N=a[h+3-32];a[h+0+0]=a[h+1+64]=S+P+1>>1,a[h+1+0]=a[h+2+64]=P+L+1>>1,a[h+2+0]=a[h+3+64]=L+M+1>>1,a[h+3+0]=M+N+1>>1,a[h+0+96]=lr(B,w,m),a[h+0+64]=lr(w,m,S),a[h+0+32]=a[h+1+96]=lr(m,S,P),a[h+1+32]=a[h+2+96]=lr(S,P,L),a[h+2+32]=a[h+3+96]=lr(P,L,M),a[h+3+32]=lr(L,M,N)}function al(a,h){var m=a[h+0-32],w=a[h+1-32],B=a[h+2-32],S=a[h+3-32],P=a[h+4-32],L=a[h+5-32],M=a[h+6-32],N=a[h+7-32];a[h+0+0]=m+w+1>>1,a[h+1+0]=a[h+0+64]=w+B+1>>1,a[h+2+0]=a[h+1+64]=B+S+1>>1,a[h+3+0]=a[h+2+64]=S+P+1>>1,a[h+0+32]=lr(m,w,B),a[h+1+32]=a[h+0+96]=lr(w,B,S),a[h+2+32]=a[h+1+96]=lr(B,S,P),a[h+3+32]=a[h+2+96]=lr(S,P,L),a[h+3+64]=lr(P,L,M),a[h+3+96]=lr(L,M,N)}function Qc(a,h){var m=a[h-1+0],w=a[h-1+32],B=a[h-1+64],S=a[h-1+96];a[h+0+0]=m+w+1>>1,a[h+2+0]=a[h+0+32]=w+B+1>>1,a[h+2+32]=a[h+0+64]=B+S+1>>1,a[h+1+0]=lr(m,w,B),a[h+3+0]=a[h+1+32]=lr(w,B,S),a[h+3+32]=a[h+1+64]=lr(B,S,S),a[h+3+64]=a[h+2+64]=a[h+0+96]=a[h+1+96]=a[h+2+96]=a[h+3+96]=S}function Xl(a,h){var m=a[h-1+0],w=a[h-1+32],B=a[h-1+64],S=a[h-1+96],P=a[h-1-32],L=a[h+0-32],M=a[h+1-32],N=a[h+2-32];a[h+0+0]=a[h+2+32]=m+P+1>>1,a[h+0+32]=a[h+2+64]=w+m+1>>1,a[h+0+64]=a[h+2+96]=B+w+1>>1,a[h+0+96]=S+B+1>>1,a[h+3+0]=lr(L,M,N),a[h+2+0]=lr(P,L,M),a[h+1+0]=a[h+3+32]=lr(m,P,L),a[h+1+32]=a[h+3+64]=lr(w,m,P),a[h+1+64]=a[h+3+96]=lr(B,w,m),a[h+1+96]=lr(S,B,w)}function Zl(a,h){var m;for(m=0;8>m;++m)s(a,h+32*m,a,h-32,8)}function Al(a,h){var m;for(m=0;8>m;++m)u(a,h,a[h-1],8),h+=32}function io(a,h,m){var w;for(w=0;8>w;++w)u(h,m+32*w,a,8)}function no(a,h){var m,w=8;for(m=0;8>m;++m)w+=a[h+m-32]+a[h-1+32*m];io(w>>4,a,h)}function pA(a,h){var m,w=4;for(m=0;8>m;++m)w+=a[h+m-32];io(w>>3,a,h)}function xo(a,h){var m,w=4;for(m=0;8>m;++m)w+=a[h-1+32*m];io(w>>3,a,h)}function Ma(a,h){io(128,a,h)}function Tn(a,h,m){var w=a[h-m],B=a[h+0],S=3*(B-w)+BA[1020+a[h-2*m]-a[h+m]],P=Va[112+(S+4>>3)];a[h-m]=Vi[255+w+Va[112+(S+3>>3)]],a[h+0]=Vi[255+B-P]}function fA(a,h,m,w){var B=a[h+0],S=a[h+m];return dn[255+a[h-2*m]-a[h-m]]>w||dn[255+S-B]>w}function Bo(a,h,m,w){return 4*dn[255+a[h-m]-a[h+0]]+dn[255+a[h-2*m]-a[h+m]]<=w}function Dr(a,h,m,w,B){var S=a[h-3*m],P=a[h-2*m],L=a[h-m],M=a[h+0],N=a[h+m],H=a[h+2*m],Z=a[h+3*m];return 4*dn[255+L-M]+dn[255+P-N]>w?0:dn[255+a[h-4*m]-S]<=B&&dn[255+S-P]<=B&&dn[255+P-L]<=B&&dn[255+Z-H]<=B&&dn[255+H-N]<=B&&dn[255+N-M]<=B}function qo(a,h,m,w){var B=2*w+1;for(w=0;16>w;++w)Bo(a,h+w,m,B)&&Tn(a,h+w,m)}function Co(a,h,m,w){var B=2*w+1;for(w=0;16>w;++w)Bo(a,h+w*m,1,B)&&Tn(a,h+w*m,1)}function ks(a,h,m,w){var B;for(B=3;0<B;--B)qo(a,h+=4*m,m,w)}function kc(a,h,m,w){var B;for(B=3;0<B;--B)Co(a,h+=4,m,w)}function ts(a,h,m,w,B,S,P,L){for(S=2*S+1;0<B--;){if(Dr(a,h,m,S,P))if(fA(a,h,m,L))Tn(a,h,m);else{var M=a,N=h,H=m,Z=M[N-2*H],G=M[N-H],X=M[N+0],ut=M[N+H],tt=M[N+2*H],it=27*(yt=BA[1020+3*(X-G)+BA[1020+Z-ut]])+63>>7,st=18*yt+63>>7,yt=9*yt+63>>7;M[N-3*H]=Vi[255+M[N-3*H]+yt],M[N-2*H]=Vi[255+Z+st],M[N-H]=Vi[255+G+it],M[N+0]=Vi[255+X-it],M[N+H]=Vi[255+ut-st],M[N+2*H]=Vi[255+tt-yt]}h+=w}}function Ms(a,h,m,w,B,S,P,L){for(S=2*S+1;0<B--;){if(Dr(a,h,m,S,P))if(fA(a,h,m,L))Tn(a,h,m);else{var M=a,N=h,H=m,Z=M[N-H],G=M[N+0],X=M[N+H],ut=Va[112+((tt=3*(G-Z))+4>>3)],tt=Va[112+(tt+3>>3)],it=ut+1>>1;M[N-2*H]=Vi[255+M[N-2*H]+it],M[N-H]=Vi[255+Z+tt],M[N+0]=Vi[255+G-ut],M[N+H]=Vi[255+X-it]}h+=w}}function gA(a,h,m,w,B,S){ts(a,h,m,1,16,w,B,S)}function Da(a,h,m,w,B,S){ts(a,h,1,m,16,w,B,S)}function Wl(a,h,m,w,B,S){var P;for(P=3;0<P;--P)Ms(a,h+=4*m,m,1,16,w,B,S)}function Go(a,h,m,w,B,S){var P;for(P=3;0<P;--P)Ms(a,h+=4,1,m,16,w,B,S)}function Yl(a,h,m,w,B,S,P,L){ts(a,h,B,1,8,S,P,L),ts(m,w,B,1,8,S,P,L)}function mA(a,h,m,w,B,S,P,L){ts(a,h,1,B,8,S,P,L),ts(m,w,1,B,8,S,P,L)}function yA(a,h,m,w,B,S,P,L){Ms(a,h+4*B,B,1,8,S,P,L),Ms(m,w+4*B,B,1,8,S,P,L)}function ll(a,h,m,w,B,S,P,L){Ms(a,h+4,1,B,8,S,P,L),Ms(m,w+4,1,B,8,S,P,L)}function gs(){this.ba=new ri,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new gt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function vA(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function cl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ul(){this.ua=0,this.Wa=new nt,this.vb=new nt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new mt,this.yc=new ct}function Na(){this.xb=this.a=0,this.l=new to,this.ca=new ri,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new et,this.Pb=0,this.wd=new et,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ul,this.ab=0,this.gc=p(4,cl),this.Oc=0}function wA(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new to,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function so(a,h,m,w,B,S,P){for(a=a==null?0:a[h+0],h=0;h<P;++h)B[S+h]=a+m[w+h]&255,a=B[S+h]}function hl(a,h,m,w,B,S,P){var L;if(a==null)so(null,null,m,w,B,S,P);else for(L=0;L<P;++L)B[S+L]=a[h+L]+m[w+L]&255}function Xo(a,h,m,w,B,S,P){if(a==null)so(null,null,m,w,B,S,P);else{var L,M=a[h+0],N=M,H=M;for(L=0;L<P;++L)N=H+(M=a[h+L])-N,H=m[w+L]+(-256&N?0>N?0:255:N)&255,N=M,B[S+L]=H}}function _A(a,h,m,w){var B=h.width,S=h.o;if(t(a!=null&&h!=null),0>m||0>=w||m+w>S)return null;if(!a.Cc){if(a.ga==null){var P;if(a.ga=new wA,(P=a.ga==null)||(P=h.width*h.o,t(a.Gb.length==0),a.Gb=d(P),a.Uc=0,a.Gb==null?P=0:(a.mb=a.Gb,a.nb=a.Uc,a.rc=null,P=1),P=!P),!P){P=a.ga;var L=a.Fa,M=a.P,N=a.qc,H=a.mb,Z=a.nb,G=M+1,X=N-1,ut=P.l;if(t(L!=null&&H!=null&&h!=null),Vn[0]=null,Vn[1]=so,Vn[2]=hl,Vn[3]=Xo,P.ca=H,P.tb=Z,P.c=h.width,P.i=h.height,t(0<P.c&&0<P.i),1>=N)h=0;else if(P.$a=L[M+0]>>0&3,P.Z=L[M+0]>>2&3,P.Lc=L[M+0]>>4&3,M=L[M+0]>>6&3,0>P.$a||1<P.$a||4<=P.Z||1<P.Lc||M)h=0;else if(ut.put=Pt,ut.ac=pt,ut.bc=Dt,ut.ma=P,ut.width=h.width,ut.height=h.height,ut.Da=h.Da,ut.v=h.v,ut.va=h.va,ut.j=h.j,ut.o=h.o,P.$a)t:{t(P.$a==1),h=qr();e:for(;;){if(h==null){h=0;break t}if(t(P!=null),P.mc=h,h.c=P.c,h.i=P.i,h.l=P.l,h.l.ma=P,h.l.width=P.c,h.l.height=P.i,h.a=0,Ht(h.m,L,G,X),!gr(P.c,P.i,1,h,null)||(h.ab==1&&h.gc[0].hc==3&&ar(h.s)?(P.ic=1,L=h.c*h.i,h.Ta=null,h.Ua=0,h.V=d(L),h.Ba=0,h.V==null?(h.a=1,h=0):h=1):(P.ic=0,h=Mr(h,P.c)),!h))break e;h=1;break t}P.mc=null,h=0}else h=X>=P.c*P.i;P=!h}if(P)return null;a.ga.Lc!=1?a.Ga=0:w=S-m}t(a.ga!=null),t(m+w<=S);t:{if(h=(L=a.ga).c,S=L.l.o,L.$a==0){if(G=a.rc,X=a.Vc,ut=a.Fa,M=a.P+1+m*h,N=a.mb,H=a.nb+m*h,t(M<=a.P+a.qc),L.Z!=0)for(t(Vn[L.Z]!=null),P=0;P<w;++P)Vn[L.Z](G,X,ut,M,N,H,h),G=N,X=H,H+=h,M+=h;else for(P=0;P<w;++P)s(N,H,ut,M,h),G=N,X=H,H+=h,M+=h;a.rc=G,a.Vc=X}else{if(t(L.mc!=null),h=m+w,t((P=L.mc)!=null),t(h<=P.i),P.C>=h)h=1;else if(L.ic||Gt(),L.ic){L=P.V,G=P.Ba,X=P.c;var tt=P.i,it=(ut=1,M=P.$/X,N=P.$%X,H=P.m,Z=P.s,P.$),st=X*tt,yt=X*h,Lt=Z.wc,Qt=it<yt?pe(Z,N,M):null;t(it<=st),t(h<=tt),t(ar(Z));e:for(;;){for(;!H.h&&it<yt;){if(N&Lt||(Qt=pe(Z,N,M)),t(Qt!=null),Ot(H),256>(tt=le(Qt.G[0],Qt.H[0],H)))L[G+it]=tt,++it,++N>=X&&(N=0,++M<=h&&!(M%16)&&tr(P,M));else{if(!(280>tt)){ut=0;break e}tt=It(tt-256,H);var ne,ee=le(Qt.G[4],Qt.H[4],H);if(Ot(H),!(it>=(ee=te(X,ee=It(ee,H)))&&st-it>=tt)){ut=0;break e}for(ne=0;ne<tt;++ne)L[G+it+ne]=L[G+it+ne-ee];for(it+=tt,N+=tt;N>=X;)N-=X,++M<=h&&!(M%16)&&tr(P,M);it<yt&&N&Lt&&(Qt=pe(Z,N,M))}t(H.h==_t(H))}tr(P,M>h?h:M);break e}!ut||H.h&&it<st?(ut=0,P.a=H.h?5:3):P.$=it,h=ut}else h=Br(P,P.V,P.Ba,P.c,P.i,h,Zr);if(!h){w=0;break t}}m+w>=S&&(a.Cc=1),w=1}if(!w)return null;if(a.Cc&&((w=a.ga)!=null&&(w.mc=null),a.ga=null,0<a.Ga))return alert("todo:WebPDequantizeLevels"),null}return a.nb+m*B}function k(a,h,m,w,B,S){for(;0<B--;){var P,L=a,M=h+(m?1:0),N=a,H=h+(m?0:3);for(P=0;P<w;++P){var Z=N[H+4*P];Z!=255&&(Z*=32897,L[M+4*P+0]=L[M+4*P+0]*Z>>23,L[M+4*P+1]=L[M+4*P+1]*Z>>23,L[M+4*P+2]=L[M+4*P+2]*Z>>23)}h+=S}}function J(a,h,m,w,B){for(;0<w--;){var S;for(S=0;S<m;++S){var P=a[h+2*S+0],L=15&(N=a[h+2*S+1]),M=4369*L,N=(240&N|N>>4)*M>>16;a[h+2*S+0]=(240&P|P>>4)*M>>16&240|(15&P|P<<4)*M>>16>>4&15,a[h+2*S+1]=240&N|L}h+=B}}function bt(a,h,m,w,B,S,P,L){var M,N,H=255;for(N=0;N<B;++N){for(M=0;M<w;++M){var Z=a[h+M];S[P+4*M]=Z,H&=Z}h+=m,P+=L}return H!=255}function Mt(a,h,m,w,B){var S;for(S=0;S<B;++S)m[w+S]=a[h+S]>>8}function Gt(){es=k,uo=J,ia=bt,Ou=Mt}function ae(a,h,m){ft[a]=function(w,B,S,P,L,M,N,H,Z,G,X,ut,tt,it,st,yt,Lt){var Qt,ne=Lt-1>>1,ee=L[M+0]|N[H+0]<<16,ie=Z[G+0]|X[ut+0]<<16;t(w!=null);var Xt=3*ee+ie+131074>>2;for(h(w[B+0],255&Xt,Xt>>16,tt,it),S!=null&&(Xt=3*ie+ee+131074>>2,h(S[P+0],255&Xt,Xt>>16,st,yt)),Qt=1;Qt<=ne;++Qt){var we=L[M+Qt]|N[H+Qt]<<16,De=Z[G+Qt]|X[ut+Qt]<<16,de=ee+we+ie+De+524296,fe=de+2*(we+ie)>>3;Xt=fe+ee>>1,ee=(de=de+2*(ee+De)>>3)+we>>1,h(w[B+2*Qt-1],255&Xt,Xt>>16,tt,it+(2*Qt-1)*m),h(w[B+2*Qt-0],255&ee,ee>>16,tt,it+(2*Qt-0)*m),S!=null&&(Xt=de+ie>>1,ee=fe+De>>1,h(S[P+2*Qt-1],255&Xt,Xt>>16,st,yt+(2*Qt-1)*m),h(S[P+2*Qt+0],255&ee,ee>>16,st,yt+(2*Qt+0)*m)),ee=we,ie=De}1&Lt||(Xt=3*ee+ie+131074>>2,h(w[B+Lt-1],255&Xt,Xt>>16,tt,it+(Lt-1)*m),S!=null&&(Xt=3*ie+ee+131074>>2,h(S[P+Lt-1],255&Xt,Xt>>16,st,yt+(Lt-1)*m)))}}function xe(){_r[CA]=Oc,_r[ja]=tc,_r[FA]=pd,_r[SA]=Rc,_r[IA]=ju,_r[gl]=zc,_r[Eo]=Po,_r[EA]=tc,_r[ml]=Rc,_r[yl]=ju,_r[vl]=zc}function ze(a){return a&~fo?0>a?0:255:a>>Ku}function ur(a,h){return ze((19077*a>>8)+(26149*h>>8)-14234)}function Ir(a,h,m){return ze((19077*a>>8)-(6419*h>>8)-(13320*m>>8)+8708)}function Tr(a,h){return ze((19077*a>>8)+(33050*h>>8)-17685)}function Qr(a,h,m,w,B){w[B+0]=ur(a,m),w[B+1]=Ir(a,h,m),w[B+2]=Tr(a,h)}function Sr(a,h,m,w,B){w[B+0]=Tr(a,h),w[B+1]=Ir(a,h,m),w[B+2]=ur(a,m)}function ki(a,h,m,w,B){var S=Ir(a,h,m);h=S<<3&224|Tr(a,h)>>3,w[B+0]=248&ur(a,m)|S>>5,w[B+1]=h}function Ar(a,h,m,w,B){var S=240&Tr(a,h)|15;w[B+0]=240&ur(a,m)|Ir(a,h,m)>>4,w[B+1]=S}function Yi(a,h,m,w,B){w[B+0]=255,Qr(a,h,m,w,B+1)}function Ur(a,h,m,w,B){Sr(a,h,m,w,B),w[B+3]=255}function zr(a,h,m,w,B){Qr(a,h,m,w,B),w[B+3]=255}function Un(a,h){return 0>a?0:a>h?h:a}function Ds(a,h,m){ft[a]=function(w,B,S,P,L,M,N,H,Z){for(var G=H+(-2&Z)*m;H!=G;)h(w[B+0],S[P+0],L[M+0],N,H),h(w[B+1],S[P+0],L[M+0],N,H+m),B+=2,++P,++M,H+=2*m;1&Z&&h(w[B+0],S[P+0],L[M+0],N,H)}}function Zo(a,h,m){return m==0?a==0?h==0?6:5:h==0?4:0:m}function Wo(a,h,m,w,B){switch(a>>>30){case 3:Ra(h,m,w,B,0);break;case 2:So(h,m,w,B);break;case 1:Qn(h,m,w,B)}}function Yo(a,h){var m,w,B=h.M,S=h.Nb,P=a.oc,L=a.pc+40,M=a.oc,N=a.pc+584,H=a.oc,Z=a.pc+600;for(m=0;16>m;++m)P[L+32*m-1]=129;for(m=0;8>m;++m)M[N+32*m-1]=129,H[Z+32*m-1]=129;for(0<B?P[L-1-32]=M[N-1-32]=H[Z-1-32]=129:(u(P,L-32-1,127,21),u(M,N-32-1,127,9),u(H,Z-32-1,127,9)),w=0;w<a.za;++w){var G=h.ya[h.aa+w];if(0<w){for(m=-1;16>m;++m)s(P,L+32*m-4,P,L+32*m+12,4);for(m=-1;8>m;++m)s(M,N+32*m-4,M,N+32*m+4,4),s(H,Z+32*m-4,H,Z+32*m+4,4)}var X=a.Gd,ut=a.Hd+w,tt=G.ad,it=G.Hc;if(0<B&&(s(P,L-32,X[ut].y,0,16),s(M,N-32,X[ut].f,0,8),s(H,Z-32,X[ut].ea,0,8)),G.Za){var st=P,yt=L-32+16;for(0<B&&(w>=a.za-1?u(st,yt,X[ut].y[15],4):s(st,yt,X[ut+1].y,0,4)),m=0;4>m;m++)st[yt+128+m]=st[yt+256+m]=st[yt+384+m]=st[yt+0+m];for(m=0;16>m;++m,it<<=2)st=P,yt=L+js[m],ns[G.Ob[m]](st,yt),Wo(it,tt,16*+m,st,yt)}else if(st=Zo(w,B,G.Ob[0]),Uo[st](P,L),it!=0)for(m=0;16>m;++m,it<<=2)Wo(it,tt,16*+m,P,L+js[m]);for(m=G.Gc,st=Zo(w,B,G.Dd),po[st](M,N),po[st](H,Z),it=tt,st=M,yt=N,255&(G=m>>0)&&(170&G?vs(it,256,st,yt):zn(it,256,st,yt)),G=H,it=Z,255&(m>>=8)&&(170&m?vs(tt,320,G,it):zn(tt,320,G,it)),B<a.Ub-1&&(s(X[ut].y,0,P,L+480,16),s(X[ut].f,0,M,N+224,8),s(X[ut].ea,0,H,Z+224,8)),m=8*S*a.B,X=a.sa,ut=a.ta+16*w+16*S*a.R,tt=a.qa,G=a.ra+8*w+m,it=a.Ha,st=a.Ia+8*w+m,m=0;16>m;++m)s(X,ut+m*a.R,P,L+32*m,16);for(m=0;8>m;++m)s(tt,G+m*a.B,M,N+32*m,8),s(it,st+m*a.B,H,Z+32*m,8)}}function Jo(a,h,m,w,B,S,P,L,M){var N=[0],H=[0],Z=0,G=M!=null?M.kd:0,X=M??new vA;if(a==null||12>m)return 7;X.data=a,X.w=h,X.ha=m,h=[h],m=[m],X.gb=[X.gb];t:{var ut=h,tt=m,it=X.gb;if(t(a!=null),t(tt!=null),t(it!=null),it[0]=0,12<=tt[0]&&!i(a,ut[0],"RIFF")){if(i(a,ut[0]+8,"WEBP")){it=3;break t}var st=Qe(a,ut[0]+4);if(12>st||4294967286<st){it=3;break t}if(G&&st>tt[0]-8){it=7;break t}it[0]=st,ut[0]+=12,tt[0]-=12}it=0}if(it!=0)return it;for(st=0<X.gb[0],m=m[0];;){t:{var yt=a;tt=h,it=m;var Lt=N,Qt=H,ne=ut=[0];if((Xt=Z=[Z])[0]=0,8>it[0])it=7;else{if(!i(yt,tt[0],"VP8X")){if(Qe(yt,tt[0]+4)!=10){it=3;break t}if(18>it[0]){it=7;break t}var ee=Qe(yt,tt[0]+8),ie=1+Te(yt,tt[0]+12);if(2147483648<=ie*(yt=1+Te(yt,tt[0]+15))){it=3;break t}ne!=null&&(ne[0]=ee),Lt!=null&&(Lt[0]=ie),Qt!=null&&(Qt[0]=yt),tt[0]+=18,it[0]-=18,Xt[0]=1}it=0}}if(Z=Z[0],ut=ut[0],it!=0)return it;if(tt=!!(2&ut),!st&&Z)return 3;if(S!=null&&(S[0]=!!(16&ut)),P!=null&&(P[0]=tt),L!=null&&(L[0]=0),P=N[0],ut=H[0],Z&&tt&&M==null){it=0;break}if(4>m){it=7;break}if(st&&Z||!st&&!Z&&!i(a,h[0],"ALPH")){m=[m],X.na=[X.na],X.P=[X.P],X.Sa=[X.Sa];t:{ee=a,it=h,st=m;var Xt=X.gb;Lt=X.na,Qt=X.P,ne=X.Sa,ie=22,t(ee!=null),t(st!=null),yt=it[0];var we=st[0];for(t(Lt!=null),t(ne!=null),Lt[0]=null,Qt[0]=null,ne[0]=0;;){if(it[0]=yt,st[0]=we,8>we){it=7;break t}var De=Qe(ee,yt+4);if(4294967286<De){it=3;break t}var de=8+De+1&-2;if(ie+=de,0<Xt&&ie>Xt){it=3;break t}if(!i(ee,yt,"VP8 ")||!i(ee,yt,"VP8L")){it=0;break t}if(we[0]<de){it=7;break t}i(ee,yt,"ALPH")||(Lt[0]=ee,Qt[0]=yt+8,ne[0]=De),yt+=de,we-=de}}if(m=m[0],X.na=X.na[0],X.P=X.P[0],X.Sa=X.Sa[0],it!=0)break}m=[m],X.Ja=[X.Ja],X.xa=[X.xa];t:if(Xt=a,it=h,st=m,Lt=X.gb[0],Qt=X.Ja,ne=X.xa,ee=it[0],yt=!i(Xt,ee,"VP8 "),ie=!i(Xt,ee,"VP8L"),t(Xt!=null),t(st!=null),t(Qt!=null),t(ne!=null),8>st[0])it=7;else{if(yt||ie){if(Xt=Qe(Xt,ee+4),12<=Lt&&Xt>Lt-12){it=3;break t}if(G&&Xt>st[0]-8){it=7;break t}Qt[0]=Xt,it[0]+=8,st[0]-=8,ne[0]=ie}else ne[0]=5<=st[0]&&Xt[ee+0]==47&&!(Xt[ee+4]>>5),Qt[0]=st[0];it=0}if(m=m[0],X.Ja=X.Ja[0],X.xa=X.xa[0],h=h[0],it!=0)break;if(4294967286<X.Ja)return 3;if(L==null||tt||(L[0]=X.xa?2:1),P=[P],ut=[ut],X.xa){if(5>m){it=7;break}L=P,G=ut,tt=S,a==null||5>m?a=0:5<=m&&a[h+0]==47&&!(a[h+4]>>5)?(st=[0],Xt=[0],Lt=[0],Ht(Qt=new et,a,h,m),Ut(Qt,st,Xt,Lt)?(L!=null&&(L[0]=st[0]),G!=null&&(G[0]=Xt[0]),tt!=null&&(tt[0]=Lt[0]),a=1):a=0):a=0}else{if(10>m){it=7;break}L=ut,a==null||10>m||!eo(a,h+3,m-3)?a=0:(G=a[h+0]|a[h+1]<<8|a[h+2]<<16,tt=16383&(a[h+7]<<8|a[h+6]),a=16383&(a[h+9]<<8|a[h+8]),1&G||3<(G>>1&7)||!(G>>4&1)||G>>5>=X.Ja||!tt||!a?a=0:(P&&(P[0]=tt),L&&(L[0]=a),a=1))}if(!a||(P=P[0],ut=ut[0],Z&&(N[0]!=P||H[0]!=ut)))return 3;M!=null&&(M[0]=X,M.offset=h-M.w,t(4294967286>h-M.w),t(M.offset==M.ha-m));break}return it==0||it==7&&Z&&M==null?(S!=null&&(S[0]|=X.na!=null&&0<X.na.length),w!=null&&(w[0]=P),B!=null&&(B[0]=ut),0):it}function Ns(a,h,m){var w=h.width,B=h.height,S=0,P=0,L=w,M=B;if(h.Da=a!=null&&0<a.Da,h.Da&&(L=a.cd,M=a.bd,S=a.v,P=a.j,11>m||(S&=-2,P&=-2),0>S||0>P||0>=L||0>=M||S+L>w||P+M>B))return 0;if(h.v=S,h.j=P,h.va=S+L,h.o=P+M,h.U=L,h.T=M,h.da=a!=null&&0<a.da,h.da){if(!cr(L,M,m=[a.ib],S=[a.hb]))return 0;h.ib=m[0],h.hb=S[0]}return h.ob=a!=null&&a.ob,h.Kb=a==null||!a.Sd,h.da&&(h.ob=h.ib<3*w/4&&h.hb<3*B/4,h.Kb=0),1}function Os(a){if(a==null)return 2;if(11>a.S){var h=a.f.RGBA;h.fb+=(a.height-1)*h.A,h.A=-h.A}else h=a.f.kb,a=a.height,h.O+=(a-1)*h.fa,h.fa=-h.fa,h.N+=(a-1>>1)*h.Ab,h.Ab=-h.Ab,h.W+=(a-1>>1)*h.Db,h.Db=-h.Db,h.F!=null&&(h.J+=(a-1)*h.lb,h.lb=-h.lb);return 0}function Ji(a,h,m,w){if(w==null||0>=a||0>=h)return 2;if(m!=null){if(m.Da){var B=m.cd,S=m.bd,P=-2&m.v,L=-2&m.j;if(0>P||0>L||0>=B||0>=S||P+B>a||L+S>h)return 2;a=B,h=S}if(m.da){if(!cr(a,h,B=[m.ib],S=[m.hb]))return 2;a=B[0],h=S[0]}}w.width=a,w.height=h;t:{var M=w.width,N=w.height;if(a=w.S,0>=M||0>=N||!(a>=CA&&13>a))a=2;else{if(0>=w.Rd&&w.sd==null){P=S=B=h=0;var H=(L=M*g[a])*N;if(11>a||(S=(N+1)/2*(h=(M+1)/2),a==12&&(P=(B=M)*N)),(N=d(H+2*S+P))==null){a=1;break t}w.sd=N,11>a?((M=w.f.RGBA).eb=N,M.fb=0,M.A=L,M.size=H):((M=w.f.kb).y=N,M.O=0,M.fa=L,M.Fd=H,M.f=N,M.N=0+H,M.Ab=h,M.Cd=S,M.ea=N,M.W=0+H+S,M.Db=h,M.Ed=S,a==12&&(M.F=N,M.J=0+H+2*S),M.Tc=P,M.lb=B)}if(h=1,B=w.S,S=w.width,P=w.height,B>=CA&&13>B)if(11>B)a=w.f.RGBA,h&=(L=Math.abs(a.A))*(P-1)+S<=a.size,h&=L>=S*g[B],h&=a.eb!=null;else{a=w.f.kb,L=(S+1)/2,H=(P+1)/2,M=Math.abs(a.fa),N=Math.abs(a.Ab);var Z=Math.abs(a.Db),G=Math.abs(a.lb),X=G*(P-1)+S;h&=M*(P-1)+S<=a.Fd,h&=N*(H-1)+L<=a.Cd,h=(h&=Z*(H-1)+L<=a.Ed)&M>=S&N>=L&Z>=L,h&=a.y!=null,h&=a.f!=null,h&=a.ea!=null,B==12&&(h&=G>=S,h&=X<=a.Tc,h&=a.F!=null)}else h=0;a=h?0:2}}return a!=0||m!=null&&m.fd&&(a=Os(w)),a}var _n=64,ta=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],oo=24,ms=32,ea=8,hn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ge("Predictor0","PredictorAdd0"),ft.Predictor0=function(){return 4278190080},ft.Predictor1=function(a){return a},ft.Predictor2=function(a,h,m){return h[m+0]},ft.Predictor3=function(a,h,m){return h[m+1]},ft.Predictor4=function(a,h,m){return h[m-1]},ft.Predictor5=function(a,h,m){return Ce(Ce(a,h[m+1]),h[m+0])},ft.Predictor6=function(a,h,m){return Ce(a,h[m-1])},ft.Predictor7=function(a,h,m){return Ce(a,h[m+0])},ft.Predictor8=function(a,h,m){return Ce(h[m-1],h[m+0])},ft.Predictor9=function(a,h,m){return Ce(h[m+0],h[m+1])},ft.Predictor10=function(a,h,m){return Ce(Ce(a,h[m-1]),Ce(h[m+0],h[m+1]))},ft.Predictor11=function(a,h,m){var w=h[m+0];return 0>=nr(w>>24&255,a>>24&255,(h=h[m-1])>>24&255)+nr(w>>16&255,a>>16&255,h>>16&255)+nr(w>>8&255,a>>8&255,h>>8&255)+nr(255&w,255&a,255&h)?w:a},ft.Predictor12=function(a,h,m){var w=h[m+0];return(He((a>>24&255)+(w>>24&255)-((h=h[m-1])>>24&255))<<24|He((a>>16&255)+(w>>16&255)-(h>>16&255))<<16|He((a>>8&255)+(w>>8&255)-(h>>8&255))<<8|He((255&a)+(255&w)-(255&h)))>>>0},ft.Predictor13=function(a,h,m){var w=h[m-1];return(Xe((a=Ce(a,h[m+0]))>>24&255,w>>24&255)<<24|Xe(a>>16&255,w>>16&255)<<16|Xe(a>>8&255,w>>8&255)<<8|Xe(a>>0&255,w>>0&255))>>>0};var Oa=ft.PredictorAdd0;ft.PredictorAdd1=yr,ge("Predictor2","PredictorAdd2"),ge("Predictor3","PredictorAdd3"),ge("Predictor4","PredictorAdd4"),ge("Predictor5","PredictorAdd5"),ge("Predictor6","PredictorAdd6"),ge("Predictor7","PredictorAdd7"),ge("Predictor8","PredictorAdd8"),ge("Predictor9","PredictorAdd9"),ge("Predictor10","PredictorAdd10"),ge("Predictor11","PredictorAdd11"),ge("Predictor12","PredictorAdd12"),ge("Predictor13","PredictorAdd13");var ra=ft.PredictorAdd2;sr("ColorIndexInverseTransform","MapARGB","32b",function(a){return a>>8&255},function(a){return a}),sr("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(a){return a},function(a){return a>>8&255});var dl,bn=ft.ColorIndexInverseTransform,ao=ft.MapARGB,pl=ft.VP8LColorIndexInverseTransformAlpha,bA=ft.MapAlpha,Er=ft.VP8LPredictorsAdd=[];Er.length=16,(ft.VP8LPredictors=[]).length=16,(ft.VP8LPredictorsAdd_C=[]).length=16,(ft.VP8LPredictors_C=[]).length=16;var Pn,ys,Ao,Rn,Rs,Fo,Ln,Ra,So,vs,Qn,zn,Io,za,lo,zs,Ha,kn,Hn,Or,ei,vi,Mi,co,es,uo,ia,Ou,fl=d(511),Ti=d(2041),ws=d(225),rs=d(767),xA=0,BA=Ti,Va=ws,Vi=rs,dn=fl,CA=0,ja=1,FA=2,SA=3,IA=4,gl=5,Eo=6,EA=7,ml=8,yl=9,vl=10,Ru=[2,3,7],Mc=[3,3,11],Jl=[280,256,256,256,40],TA=[0,1,1,1,0],zu=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Hs=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Vs=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Dc=8,is=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],To=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],na=null,dd=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Nc=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Hu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Vu=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],UA=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ho=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Re=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Uo=[],ns=[],po=[],wl=1,PA=2,Vn=[],_r=[];ae("UpsampleRgbLinePair",Qr,3),ae("UpsampleBgrLinePair",Sr,3),ae("UpsampleRgbaLinePair",zr,4),ae("UpsampleBgraLinePair",Ur,4),ae("UpsampleArgbLinePair",Yi,4),ae("UpsampleRgba4444LinePair",Ar,2),ae("UpsampleRgb565LinePair",ki,2);var Oc=ft.UpsampleRgbLinePair,pd=ft.UpsampleBgrLinePair,tc=ft.UpsampleRgbaLinePair,Rc=ft.UpsampleBgraLinePair,ju=ft.UpsampleArgbLinePair,zc=ft.UpsampleRgba4444LinePair,Po=ft.UpsampleRgb565LinePair,LA=16,QA=1<<LA-1,Ka=-227,_l=482,Ku=6,fo=(256<<Ku)-1,ii=0,ec=d(256),rc=d(256),kA=d(256),$u=d(256),qu=d(_l-Ka),Gu=d(_l-Ka);Ds("YuvToRgbRow",Qr,3),Ds("YuvToBgrRow",Sr,3),Ds("YuvToRgbaRow",zr,4),Ds("YuvToBgraRow",Ur,4),Ds("YuvToArgbRow",Yi,4),Ds("YuvToRgba4444Row",Ar,2),Ds("YuvToRgb565Row",ki,2);var js=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],_=[0,2,8],e=[8,7,6,4,4,2,2,2,1,1,1,1],c=1;this.WebPDecodeRGBA=function(a,h,m,w,B){var S=ja,P=new gs,L=new ri;P.ba=L,L.S=S,L.width=[L.width],L.height=[L.height];var M=L.width,N=L.height,H=new jr;if(H==null||a==null)var Z=2;else t(H!=null),Z=Jo(a,h,m,H.width,H.height,H.Pd,H.Qd,H.format,null);if(Z!=0?M=0:(M!=null&&(M[0]=H.width[0]),N!=null&&(N[0]=H.height[0]),M=1),M){L.width=L.width[0],L.height=L.height[0],w!=null&&(w[0]=L.width),B!=null&&(B[0]=L.height);t:{if(w=new to,(B=new vA).data=a,B.w=h,B.ha=m,B.kd=1,h=[0],t(B!=null),((a=Jo(B.data,B.w,B.ha,null,null,null,h,null,B))==0||a==7)&&h[0]&&(a=4),(h=a)==0){if(t(P!=null),w.data=B.data,w.w=B.w+B.offset,w.ha=B.ha-B.offset,w.put=Pt,w.ac=pt,w.bc=Dt,w.ma=P,B.xa){if((a=qr())==null){P=1;break t}if(function(G,X){var ut=[0],tt=[0],it=[0];e:for(;;){if(G==null)return 0;if(X==null)return G.a=2,0;if(G.l=X,G.a=0,Ht(G.m,X.data,X.w,X.ha),!Ut(G.m,ut,tt,it)){G.a=3;break e}if(G.xb=PA,X.width=ut[0],X.height=tt[0],!gr(ut[0],tt[0],1,G,null))break e;return 1}return t(G.a!=0),0}(a,w)){if(w=(h=Ji(w.width,w.height,P.Oa,P.ba))==0){e:{w=a;r:for(;;){if(w==null){w=0;break e}if(t(w.s.yc!=null),t(w.s.Ya!=null),t(0<w.s.Wb),t((m=w.l)!=null),t((B=m.ma)!=null),w.xb!=0){if(w.ca=B.ba,w.tb=B.tb,t(w.ca!=null),!Ns(B.Oa,m,SA)){w.a=2;break r}if(!Mr(w,m.width)||m.da)break r;if((m.da||Pe(w.ca.S))&&Gt(),11>w.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),w.ca.f.kb.F!=null&&Gt()),w.Pb&&0<w.s.ua&&w.s.vb.X==null&&!je(w.s.vb,w.s.Wa.Xa)){w.a=1;break r}w.xb=0}if(!Br(w,w.V,w.Ba,w.c,w.i,m.o,Ge))break r;B.Dc=w.Ma,w=1;break e}t(w.a!=0),w=0}w=!w}w&&(h=a.a)}else h=a.a}else{if((a=new Li)==null){P=1;break t}if(a.Fa=B.na,a.P=B.P,a.qc=B.Sa,Bi(a,w)){if((h=Ji(w.width,w.height,P.Oa,P.ba))==0){if(a.Aa=0,m=P.Oa,t((B=a)!=null),m!=null){if(0<(M=0>(M=m.Md)?0:100<M?255:255*M/100)){for(N=H=0;4>N;++N)12>(Z=B.pb[N]).lc&&(Z.ia=M*e[0>Z.lc?0:Z.lc]>>3),H|=Z.ia;H&&(alert("todo:VP8InitRandom"),B.ia=1)}B.Ga=m.Id,100<B.Ga?B.Ga=100:0>B.Ga&&(B.Ga=0)}Ia(a,w)||(h=a.a)}}else h=a.a}h==0&&P.Oa!=null&&P.Oa.fd&&(h=Os(P.ba))}P=h}S=P!=0?null:11>S?L.f.RGBA.eb:L.f.kb.y}else S=null;return S};var g=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function C(ft,Nt){for(var jt="",at=0;at<4;at++)jt+=String.fromCharCode(ft[Nt++]);return jt}function F(ft,Nt){return(ft[Nt+0]<<0|ft[Nt+1]<<8|ft[Nt+2]<<16)>>>0}function E(ft,Nt){return(ft[Nt+0]<<0|ft[Nt+1]<<8|ft[Nt+2]<<16|ft[Nt+3]<<24)>>>0}new v;var Q=[0],T=[0],V=[],R=new v,W=n,j=function(ft,Nt){var jt={},at=0,ct=!1,vt=0,mt=0;if(jt.frames=[],!function(dt,_t,St,Ot){for(var Rt=0;Rt<Ot;Rt++)if(dt[_t+Rt]!=St.charCodeAt(Rt))return!0;return!1}(ft,Nt,"RIFF",4)){var $t,Vt;for(E(ft,Nt+=4),Nt+=8;Nt<ft.length;){var Zt=C(ft,Nt),Ht=E(ft,Nt+=4);Nt+=4;var Yt=Ht+(1&Ht);switch(Zt){case"VP8 ":case"VP8L":jt.frames[at]===void 0&&(jt.frames[at]={}),(et=jt.frames[at]).src_off=ct?mt:Nt-8,et.src_size=vt+Ht+8,at++,ct&&(ct=!1,vt=0,mt=0);break;case"VP8X":(et=jt.header={}).feature_flags=ft[Nt];var Wt=Nt+4;et.canvas_width=1+F(ft,Wt),Wt+=3,et.canvas_height=1+F(ft,Wt),Wt+=3;break;case"ALPH":ct=!0,vt=Yt+8,mt=Nt-8;break;case"ANIM":(et=jt.header).bgcolor=E(ft,Nt),Wt=Nt+4,et.loop_count=($t=ft)[(Vt=Wt)+0]<<0|$t[Vt+1]<<8,Wt+=2;break;case"ANMF":var me,et;(et=jt.frames[at]={}).offset_x=2*F(ft,Nt),Nt+=3,et.offset_y=2*F(ft,Nt),Nt+=3,et.width=1+F(ft,Nt),Nt+=3,et.height=1+F(ft,Nt),Nt+=3,et.duration=F(ft,Nt),Nt+=3,me=ft[Nt++],et.dispose=1&me,et.blend=me>>1&1}Zt!="ANMF"&&(Nt+=Yt)}return jt}}(W,0);j.response=W,j.rgbaoutput=!0,j.dataurl=!1;var rt=j.header?j.header:null,ht=j.frames?j.frames:null;if(rt){rt.loop_counter=rt.loop_count,Q=[rt.canvas_height],T=[rt.canvas_width];for(var Bt=0;Bt<ht.length&&ht[Bt].blend!=0;Bt++);}var Et=ht[0],Tt=R.WebPDecodeRGBA(W,Et.src_off,Et.src_size,T,Q);Et.rgba=Tt,Et.imgwidth=T[0],Et.imgheight=Q[0];for(var xt=0;xt<T[0]*Q[0]*4;xt++)V[xt]=Tt[xt];return this.width=T,this.height=Q,this.data=V,this}(function(n){var t=function(){return typeof xg=="function"},i=function(Q,T,V,R){var W=4,j=p;switch(R){case n.image_compression.FAST:W=1,j=d;break;case n.image_compression.MEDIUM:W=6,j=A;break;case n.image_compression.SLOW:W=9,j=v}Q=s(Q,T,V,j);var rt=xg(Q,{level:W});return n.__addimage__.arrayBufferToBinaryString(rt)},s=function(Q,T,V,R){for(var W,j,rt,ht=Q.length/T,Bt=new Uint8Array(Q.length+ht),Et=F(),Tt=0;Tt<ht;Tt+=1){if(rt=Tt*T,W=Q.subarray(rt,rt+T),R)Bt.set(R(W,V,j),rt+Tt);else{for(var xt,ft=Et.length,Nt=[];xt<ft;xt+=1)Nt[xt]=Et[xt](W,V,j);var jt=E(Nt.concat());Bt.set(Nt[jt],rt+Tt)}j=W}return Bt},u=function(Q){var T=Array.apply([],Q);return T.unshift(0),T},d=function(Q,T){var V,R=[],W=Q.length;R[0]=1;for(var j=0;j<W;j+=1)V=Q[j-T]||0,R[j+1]=Q[j]-V+256&255;return R},p=function(Q,T,V){var R,W=[],j=Q.length;W[0]=2;for(var rt=0;rt<j;rt+=1)R=V&&V[rt]||0,W[rt+1]=Q[rt]-R+256&255;return W},A=function(Q,T,V){var R,W,j=[],rt=Q.length;j[0]=3;for(var ht=0;ht<rt;ht+=1)R=Q[ht-T]||0,W=V&&V[ht]||0,j[ht+1]=Q[ht]+256-(R+W>>>1)&255;return j},v=function(Q,T,V){var R,W,j,rt,ht=[],Bt=Q.length;ht[0]=4;for(var Et=0;Et<Bt;Et+=1)R=Q[Et-T]||0,W=V&&V[Et]||0,j=V&&V[Et-T]||0,rt=C(R,W,j),ht[Et+1]=Q[Et]-rt+256&255;return ht},C=function(Q,T,V){if(Q===T&&T===V)return Q;var R=Math.abs(T-V),W=Math.abs(Q-V),j=Math.abs(Q+T-V-V);return R<=W&&R<=j?Q:W<=j?T:V},F=function(){return[u,d,p,A,v]},E=function(Q){var T=Q.map(function(V){return V.reduce(function(R,W){return R+Math.abs(W)},0)});return T.indexOf(Math.min.apply(null,T))};n.processPNG=function(Q,T,V,R){var W,j,rt,ht,Bt,Et,Tt,xt,ft,Nt,jt,at,ct,vt,mt,$t=this.decode.FLATE_DECODE,Vt="";if(this.__addimage__.isArrayBuffer(Q)&&(Q=new Uint8Array(Q)),this.__addimage__.isArrayBufferView(Q)){if(Q=(rt=new X4(Q)).imgData,j=rt.bits,W=rt.colorSpace,Bt=rt.colors,[4,6].indexOf(rt.colorType)!==-1){if(rt.bits===8){ft=(xt=rt.pixelBitlength==32?new Uint32Array(rt.decodePixels().buffer):rt.pixelBitlength==16?new Uint16Array(rt.decodePixels().buffer):new Uint8Array(rt.decodePixels().buffer)).length,jt=new Uint8Array(ft*rt.colors),Nt=new Uint8Array(ft);var Zt,Ht=rt.pixelBitlength-rt.bits;for(vt=0,mt=0;vt<ft;vt++){for(ct=xt[vt],Zt=0;Zt<Ht;)jt[mt++]=ct>>>Zt&255,Zt+=rt.bits;Nt[vt]=ct>>>Zt&255}}if(rt.bits===16){ft=(xt=new Uint32Array(rt.decodePixels().buffer)).length,jt=new Uint8Array(ft*(32/rt.pixelBitlength)*rt.colors),Nt=new Uint8Array(ft*(32/rt.pixelBitlength)),at=rt.colors>1,vt=0,mt=0;for(var Yt=0;vt<ft;)ct=xt[vt++],jt[mt++]=ct>>>0&255,at&&(jt[mt++]=ct>>>16&255,ct=xt[vt++],jt[mt++]=ct>>>0&255),Nt[Yt++]=ct>>>16&255;j=8}R!==n.image_compression.NONE&&t()?(Q=i(jt,rt.width*rt.colors,rt.colors,R),Tt=i(Nt,rt.width,1,R)):(Q=jt,Tt=Nt,$t=void 0)}if(rt.colorType===3&&(W=this.color_spaces.INDEXED,Et=rt.palette,rt.transparency.indexed)){var Wt=rt.transparency.indexed,me=0;for(vt=0,ft=Wt.length;vt<ft;++vt)me+=Wt[vt];if((me/=255)===ft-1&&Wt.indexOf(0)!==-1)ht=[Wt.indexOf(0)];else if(me!==ft){for(xt=rt.decodePixels(),Nt=new Uint8Array(xt.length),vt=0,ft=xt.length;vt<ft;vt++)Nt[vt]=Wt[xt[vt]];Tt=i(Nt,rt.width,1)}}var et=function(dt){var _t;switch(dt){case n.image_compression.FAST:_t=11;break;case n.image_compression.MEDIUM:_t=13;break;case n.image_compression.SLOW:_t=14;break;default:_t=12}return _t}(R);return $t===this.decode.FLATE_DECODE&&(Vt="/Predictor "+et+" "),Vt+="/Colors "+Bt+" /BitsPerComponent "+j+" /Columns "+rt.width,(this.__addimage__.isArrayBuffer(Q)||this.__addimage__.isArrayBufferView(Q))&&(Q=this.__addimage__.arrayBufferToBinaryString(Q)),(Tt&&this.__addimage__.isArrayBuffer(Tt)||this.__addimage__.isArrayBufferView(Tt))&&(Tt=this.__addimage__.arrayBufferToBinaryString(Tt)),{alias:V,data:Q,index:T,filter:$t,decodeParameters:Vt,transparency:ht,palette:Et,sMask:Tt,predictor:et,width:rt.width,height:rt.height,bitsPerComponent:j,colorSpace:W}}}})(Fr.API),function(n){n.processGIF89A=function(t,i,s,u){var d=new Z4(t),p=d.width,A=d.height,v=[];d.decodeAndBlitFrameRGBA(0,v);var C={data:v,width:p,height:A},F=new kg(100).encode(C,100);return n.processJPEG.call(this,F,i,s,u)},n.processGIF87A=n.processGIF89A}(Fr.API),pa.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var t=0;t<n;t++){var i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:u,green:s,blue:i,quad:d}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},pa.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[n]()}catch(i){Ii.log("bit decode error:"+i)}},pa.prototype.bit1=function(){var n,t=Math.ceil(this.width/8),i=t%4;for(n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,u=0;u<t;u++)for(var d=this.datav.getUint8(this.pos++,!0),p=s*this.width*4+8*u*4,A=0;A<8&&8*u+A<this.width;A++){var v=this.palette[d>>7-A&1];this.data[p+4*A]=v.blue,this.data[p+4*A+1]=v.green,this.data[p+4*A+2]=v.red,this.data[p+4*A+3]=255}i!==0&&(this.pos+=4-i)}},pa.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),t=n%4,i=this.height-1;i>=0;i--){for(var s=this.bottom_up?i:this.height-1-i,u=0;u<n;u++){var d=this.datav.getUint8(this.pos++,!0),p=s*this.width*4+2*u*4,A=d>>4,v=15&d,C=this.palette[A];if(this.data[p]=C.blue,this.data[p+1]=C.green,this.data[p+2]=C.red,this.data[p+3]=255,2*u+1>=this.width)break;C=this.palette[v],this.data[p+4]=C.blue,this.data[p+4+1]=C.green,this.data[p+4+2]=C.red,this.data[p+4+3]=255}t!==0&&(this.pos+=4-t)}},pa.prototype.bit8=function(){for(var n=this.width%4,t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var u=this.datav.getUint8(this.pos++,!0),d=i*this.width*4+4*s;if(u<this.palette.length){var p=this.palette[u];this.data[d]=p.red,this.data[d+1]=p.green,this.data[d+2]=p.blue,this.data[d+3]=255}else this.data[d]=255,this.data[d+1]=255,this.data[d+2]=255,this.data[d+3]=255}n!==0&&(this.pos+=4-n)}},pa.prototype.bit15=function(){for(var n=this.width%3,t=parseInt("11111",2),i=this.height-1;i>=0;i--){for(var s=this.bottom_up?i:this.height-1-i,u=0;u<this.width;u++){var d=this.datav.getUint16(this.pos,!0);this.pos+=2;var p=(d&t)/t*255|0,A=(d>>5&t)/t*255|0,v=(d>>10&t)/t*255|0,C=d>>15?255:0,F=s*this.width*4+4*u;this.data[F]=v,this.data[F+1]=A,this.data[F+2]=p,this.data[F+3]=C}this.pos+=n}},pa.prototype.bit16=function(){for(var n=this.width%3,t=parseInt("11111",2),i=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var u=this.bottom_up?s:this.height-1-s,d=0;d<this.width;d++){var p=this.datav.getUint16(this.pos,!0);this.pos+=2;var A=(p&t)/t*255|0,v=(p>>5&i)/i*255|0,C=(p>>11)/t*255|0,F=u*this.width*4+4*d;this.data[F]=C,this.data[F+1]=v,this.data[F+2]=A,this.data[F+3]=255}this.pos+=n}},pa.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var t=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0),p=t*this.width*4+4*i;this.data[p]=d,this.data[p+1]=u,this.data[p+2]=s,this.data[p+3]=255}this.pos+=this.width%4}},pa.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var t=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0),p=this.datav.getUint8(this.pos++,!0),A=t*this.width*4+4*i;this.data[A]=d,this.data[A+1]=u,this.data[A+2]=s,this.data[A+3]=p}},pa.prototype.getData=function(){return this.data},function(n){n.processBMP=function(t,i,s,u){var d=new pa(t,!1),p=d.width,A=d.height,v={data:d.getData(),width:p,height:A},C=new kg(100).encode(v,100);return n.processJPEG.call(this,C,i,s,u)}}(Fr.API),Ev.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(t,i,s,u){var d=new Ev(t),p=d.width,A=d.height,v={data:d.getData(),width:p,height:A},C=new kg(100).encode(v,100);return n.processJPEG.call(this,C,i,s,u)}}(Fr.API),Fr.API.processRGBA=function(n,t,i){for(var s=n.data,u=s.length,d=new Uint8Array(u/4*3),p=new Uint8Array(u/4),A=0,v=0,C=0;C<u;C+=4){var F=s[C],E=s[C+1],Q=s[C+2],T=s[C+3];d[A++]=F,d[A++]=E,d[A++]=Q,p[v++]=T}var V=this.__addimage__.arrayBufferToBinaryString(d);return{alpha:this.__addimage__.arrayBufferToBinaryString(p),data:V,index:t,alias:i,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Fr.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},au=Fr.API,Wd=au.getCharWidthsArray=function(n,t){var i,s,u=(t=t||{}).font||this.internal.getFont(),d=t.fontSize||this.internal.getFontSize(),p=t.charSpace||this.internal.getCharSpace(),A=t.widths?t.widths:u.metadata.Unicode.widths,v=A.fof?A.fof:1,C=t.kerning?t.kerning:u.metadata.Unicode.kerning,F=C.fof?C.fof:1,E=t.doKerning!==!1,Q=0,T=n.length,V=0,R=A[0]||v,W=[];for(i=0;i<T;i++)s=n.charCodeAt(i),typeof u.metadata.widthOfString=="function"?W.push((u.metadata.widthOfGlyph(u.metadata.characterToGlyph(s))+p*(1e3/d)||0)/1e3):(Q=E&&oi(C[s])==="object"&&!isNaN(parseInt(C[s][V],10))?C[s][V]/F:0,W.push((A[s]||R)/v+Q)),V=s;return W},Cv=au.getStringUnitWidth=function(n,t){var i=(t=t||{}).fontSize||this.internal.getFontSize(),s=t.font||this.internal.getFont(),u=t.charSpace||this.internal.getCharSpace();return au.processArabic&&(n=au.processArabic(n)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(n,i,u)/i:Wd.apply(this,arguments).reduce(function(d,p){return d+p},0)},Fv=function(n,t,i,s){for(var u=[],d=0,p=n.length,A=0;d!==p&&A+t[d]<i;)A+=t[d],d++;u.push(n.slice(0,d));var v=d;for(A=0;d!==p;)A+t[d]>s&&(u.push(n.slice(v,d)),A=0,v=d),A+=t[d],d++;return v!==d&&u.push(n.slice(v,d)),u},Sv=function(n,t,i){i||(i={});var s,u,d,p,A,v,C,F=[],E=[F],Q=i.textIndent||0,T=0,V=0,R=n.split(" "),W=Wd.apply(this,[" ",i])[0];if(v=i.lineIndent===-1?R[0].length+2:i.lineIndent||0){var j=Array(v).join(" "),rt=[];R.map(function(Bt){(Bt=Bt.split(/\s*\n/)).length>1?rt=rt.concat(Bt.map(function(Et,Tt){return(Tt&&Et.length?`
`:"")+Et})):rt.push(Bt[0])}),R=rt,v=Cv.apply(this,[j,i])}for(d=0,p=R.length;d<p;d++){var ht=0;if(s=R[d],v&&s[0]==`
`&&(s=s.substr(1),ht=1),Q+T+(V=(u=Wd.apply(this,[s,i])).reduce(function(Bt,Et){return Bt+Et},0))>t||ht){if(V>t){for(A=Fv.apply(this,[s,u,t-(Q+T),t]),F.push(A.shift()),F=[A.pop()];A.length;)E.push([A.shift()]);V=u.slice(s.length-(F[0]?F[0].length:0)).reduce(function(Bt,Et){return Bt+Et},0)}else F=[s];E.push(F),Q=V+v,T=W}else F.push(s),Q+=T+V,T=W}return C=v?function(Bt,Et){return(Et?j:"")+Bt.join(" ")}:function(Bt){return Bt.join(" ")},E.map(C)},au.splitTextToSize=function(n,t,i){var s,u=(i=i||{}).fontSize||this.internal.getFontSize(),d=(function(F){if(F.widths&&F.kerning)return{widths:F.widths,kerning:F.kerning};var E=this.internal.getFont(F.fontName,F.fontStyle);return E.metadata.Unicode?{widths:E.metadata.Unicode.widths||{0:1},kerning:E.metadata.Unicode.kerning||{}}:{font:E.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,i);s=Array.isArray(n)?n:String(n).split(/\r?\n/);var p=1*this.internal.scaleFactor*t/u;d.textIndent=i.textIndent?1*i.textIndent*this.internal.scaleFactor/u:0,d.lineIndent=i.lineIndent;var A,v,C=[];for(A=0,v=s.length;A<v;A++)C=C.concat(Sv.apply(this,[s[A],p,d]));return C},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",i={},s={},u=0;u<t.length;u++)i[t[u]]="0123456789abcdef"[u],s["0123456789abcdef"[u]]=t[u];var d=function(E){return"0x"+parseInt(E,10).toString(16)},p=n.__fontmetrics__.compress=function(E){var Q,T,V,R,W=["{"];for(var j in E){if(Q=E[j],isNaN(parseInt(j,10))?T="'"+j+"'":(j=parseInt(j,10),T=(T=d(j).slice(2)).slice(0,-1)+s[T.slice(-1)]),typeof Q=="number")Q<0?(V=d(Q).slice(3),R="-"):(V=d(Q).slice(2),R=""),V=R+V.slice(0,-1)+s[V.slice(-1)];else{if(oi(Q)!=="object")throw new Error("Don't know what to do with value type "+oi(Q)+".");V=p(Q)}W.push(T+V)}return W.push("}"),W.join("")},A=n.__fontmetrics__.uncompress=function(E){if(typeof E!="string")throw new Error("Invalid argument passed to uncompress.");for(var Q,T,V,R,W={},j=1,rt=W,ht=[],Bt="",Et="",Tt=E.length-1,xt=1;xt<Tt;xt+=1)(R=E[xt])=="'"?Q?(V=Q.join(""),Q=void 0):Q=[]:Q?Q.push(R):R=="{"?(ht.push([rt,V]),rt={},V=void 0):R=="}"?((T=ht.pop())[0][T[1]]=rt,V=void 0,rt=T[0]):R=="-"?j=-1:V===void 0?i.hasOwnProperty(R)?(Bt+=i[R],V=parseInt(Bt,16)*j,j=1,Bt=""):Bt+=R:i.hasOwnProperty(R)?(Et+=i[R],rt[V]=parseInt(Et,16)*j,j=1,V=void 0,Et=""):Et+=R;return W},v={codePages:["WinAnsiEncoding"],WinAnsiEncoding:A("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},C={Unicode:{Courier:v,"Courier-Bold":v,"Courier-BoldOblique":v,"Courier-Oblique":v,Helvetica:v,"Helvetica-Bold":v,"Helvetica-BoldOblique":v,"Helvetica-Oblique":v,"Times-Roman":v,"Times-Bold":v,"Times-BoldItalic":v,"Times-Italic":v}},F={Unicode:{"Courier-Oblique":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":A("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":A("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":A("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:A("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:A("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":A("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:A("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":A("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":A("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":A("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(E){var Q=E.font,T=F.Unicode[Q.postScriptName];T&&(Q.metadata.Unicode={},Q.metadata.Unicode.widths=T.widths,Q.metadata.Unicode.kerning=T.kerning);var V=C.Unicode[Q.postScriptName];V&&(Q.metadata.Unicode.encoding=V,Q.encoding=V.codePages[0])}])}(Fr.API),function(n){var t=function(i){for(var s=i.length,u=new Uint8Array(s),d=0;d<s;d++)u[d]=i.charCodeAt(d);return u};n.API.events.push(["addFont",function(i){var s=void 0,u=i.font,d=i.instance;if(!u.isStandardFont){if(d===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+u.postScriptName+"').");if(typeof(s=d.existsFileInVFS(u.postScriptName)===!1?d.loadFile(u.postScriptName):d.getFileFromVFS(u.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+u.postScriptName+"').");(function(p,A){A=/^\x00\x01\x00\x00/.test(A)?t(A):t(vh(A)),p.metadata=n.API.TTFFont.open(A),p.metadata.Unicode=p.metadata.Unicode||{encoding:{},kerning:{},widths:[]},p.metadata.glyIdsUsed=[0]})(u,s)}}])}(Fr),function(n){function t(){return(Cr.canvg?Promise.resolve(Cr.canvg):Promise.resolve().then(()=>u7)).catch(function(i){return Promise.reject(new Error("Could not load canvg: "+i))}).then(function(i){return i.default?i.default:i})}Fr.API.addSvgAsImage=function(i,s,u,d,p,A,v,C){if(isNaN(s)||isNaN(u))throw Ii.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(d)||isNaN(p))throw Ii.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var F=document.createElement("canvas");F.width=d,F.height=p;var E=F.getContext("2d");E.fillStyle="#fff",E.fillRect(0,0,F.width,F.height);var Q={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},T=this;return t().then(function(V){return V.fromString(E,i,Q)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(V){return V.render(Q)}).then(function(){T.addImage(F.toDataURL("image/jpeg",1),s,u,d,p,v,C)})}}(),Fr.API.putTotalPages=function(n){var t,i=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(n,"g"),i=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),i=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var u=0;u<this.internal.pages[s].length;u++)this.internal.pages[s][u]=this.internal.pages[s][u].replace(t,i);return this},Fr.API.viewerPreferences=function(n,t){var i;n=n||{},t=t||!1;var s,u,d,p={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},A=Object.keys(p),v=[],C=0,F=0,E=0;function Q(V,R){var W,j=!1;for(W=0;W<V.length;W+=1)V[W]===R&&(j=!0);return j}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(p)),this.internal.viewerpreferences.isSubscribed=!1),i=this.internal.viewerpreferences.configuration,n==="reset"||t===!0){var T=A.length;for(E=0;E<T;E+=1)i[A[E]].value=i[A[E]].defaultValue,i[A[E]].explicitSet=!1}if(oi(n)==="object"){for(u in n)if(d=n[u],Q(A,u)&&d!==void 0){if(i[u].type==="boolean"&&typeof d=="boolean")i[u].value=d;else if(i[u].type==="name"&&Q(i[u].valueSet,d))i[u].value=d;else if(i[u].type==="integer"&&Number.isInteger(d))i[u].value=d;else if(i[u].type==="array"){for(C=0;C<d.length;C+=1)if(s=!0,d[C].length===1&&typeof d[C][0]=="number")v.push(String(d[C]-1));else if(d[C].length>1){for(F=0;F<d[C].length;F+=1)typeof d[C][F]!="number"&&(s=!1);s===!0&&v.push([d[C][0]-1,d[C][1]-1].join(" "))}i[u].value="["+v.join(" ")+"]"}else i[u].value=i[u].defaultValue;i[u].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var V,R=[];for(V in i)i[V].explicitSet===!0&&(i[V].type==="name"?R.push("/"+V+" /"+i[V].value):R.push("/"+V+" "+i[V].value));R.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+R.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=i,this},function(n){var t=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',u=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),d=unescape(encodeURIComponent(s)),p=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),A=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),v=unescape(encodeURIComponent("</x:xmpmeta>")),C=d.length+p.length+A.length+u.length+v.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+C+" >>"),this.internal.write("stream"),this.internal.write(u+d+p+A+v),this.internal.write("endstream"),this.internal.write("endobj")},i=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(s,u){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:u||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",i),this.internal.events.subscribe("postPutResources",t)),this}}(Fr.API),function(n){var t=n.API,i=t.pdfEscape16=function(d,p){for(var A,v=p.metadata.Unicode.widths,C=["","0","00","000","0000"],F=[""],E=0,Q=d.length;E<Q;++E){if(A=p.metadata.characterToGlyph(d.charCodeAt(E)),p.metadata.glyIdsUsed.push(A),p.metadata.toUnicode[A]=d.charCodeAt(E),v.indexOf(A)==-1&&(v.push(A),v.push([parseInt(p.metadata.widthOfGlyph(A),10)])),A=="0")return F.join("");A=A.toString(16),F.push(C[4-A.length],A)}return F.join("")},s=function(d){var p,A,v,C,F,E,Q;for(F=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,v=[],E=0,Q=(A=Object.keys(d).sort(function(T,V){return T-V})).length;E<Q;E++)p=A[E],v.length>=100&&(F+=`
`+v.length+` beginbfchar
`+v.join(`
`)+`
endbfchar`,v=[]),d[p]!==void 0&&d[p]!==null&&typeof d[p].toString=="function"&&(C=("0000"+d[p].toString(16)).slice(-4),p=("0000"+(+p).toString(16)).slice(-4),v.push("<"+p+"><"+C+">"));return v.length&&(F+=`
`+v.length+` beginbfchar
`+v.join(`
`)+`
endbfchar
`),F+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(d){(function(p){var A=p.font,v=p.out,C=p.newObject,F=p.putStream;if(A.metadata instanceof n.API.TTFFont&&A.encoding==="Identity-H"){for(var E=A.metadata.Unicode.widths,Q=A.metadata.subset.encode(A.metadata.glyIdsUsed,1),T="",V=0;V<Q.length;V++)T+=String.fromCharCode(Q[V]);var R=C();F({data:T,addLength1:!0,objectId:R}),v("endobj");var W=C();F({data:s(A.metadata.toUnicode),addLength1:!0,objectId:W}),v("endobj");var j=C();v("<<"),v("/Type /FontDescriptor"),v("/FontName /"+tu(A.fontName)),v("/FontFile2 "+R+" 0 R"),v("/FontBBox "+n.API.PDFObject.convert(A.metadata.bbox)),v("/Flags "+A.metadata.flags),v("/StemV "+A.metadata.stemV),v("/ItalicAngle "+A.metadata.italicAngle),v("/Ascent "+A.metadata.ascender),v("/Descent "+A.metadata.decender),v("/CapHeight "+A.metadata.capHeight),v(">>"),v("endobj");var rt=C();v("<<"),v("/Type /Font"),v("/BaseFont /"+tu(A.fontName)),v("/FontDescriptor "+j+" 0 R"),v("/W "+n.API.PDFObject.convert(E)),v("/CIDToGIDMap /Identity"),v("/DW 1000"),v("/Subtype /CIDFontType2"),v("/CIDSystemInfo"),v("<<"),v("/Supplement 0"),v("/Registry (Adobe)"),v("/Ordering ("+A.encoding+")"),v(">>"),v(">>"),v("endobj"),A.objectNumber=C(),v("<<"),v("/Type /Font"),v("/Subtype /Type0"),v("/ToUnicode "+W+" 0 R"),v("/BaseFont /"+tu(A.fontName)),v("/Encoding /"+A.encoding),v("/DescendantFonts ["+rt+" 0 R]"),v(">>"),v("endobj"),A.isAlreadyPutted=!0}})(d)}]),t.events.push(["putFont",function(d){(function(p){var A=p.font,v=p.out,C=p.newObject,F=p.putStream;if(A.metadata instanceof n.API.TTFFont&&A.encoding==="WinAnsiEncoding"){for(var E=A.metadata.rawData,Q="",T=0;T<E.length;T++)Q+=String.fromCharCode(E[T]);var V=C();F({data:Q,addLength1:!0,objectId:V}),v("endobj");var R=C();F({data:s(A.metadata.toUnicode),addLength1:!0,objectId:R}),v("endobj");var W=C();v("<<"),v("/Descent "+A.metadata.decender),v("/CapHeight "+A.metadata.capHeight),v("/StemV "+A.metadata.stemV),v("/Type /FontDescriptor"),v("/FontFile2 "+V+" 0 R"),v("/Flags 96"),v("/FontBBox "+n.API.PDFObject.convert(A.metadata.bbox)),v("/FontName /"+tu(A.fontName)),v("/ItalicAngle "+A.metadata.italicAngle),v("/Ascent "+A.metadata.ascender),v(">>"),v("endobj"),A.objectNumber=C();for(var j=0;j<A.metadata.hmtx.widths.length;j++)A.metadata.hmtx.widths[j]=parseInt(A.metadata.hmtx.widths[j]*(1e3/A.metadata.head.unitsPerEm));v("<</Subtype/TrueType/Type/Font/ToUnicode "+R+" 0 R/BaseFont/"+tu(A.fontName)+"/FontDescriptor "+W+" 0 R/Encoding/"+A.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(A.metadata.hmtx.widths)+">>"),v("endobj"),A.isAlreadyPutted=!0}})(d)}]);var u=function(d){var p,A=d.text||"",v=d.x,C=d.y,F=d.options||{},E=d.mutex||{},Q=E.pdfEscape,T=E.activeFontKey,V=E.fonts,R=T,W="",j=0,rt="",ht=V[R].encoding;if(V[R].encoding!=="Identity-H")return{text:A,x:v,y:C,options:F,mutex:E};for(rt=A,R=T,Array.isArray(A)&&(rt=A[0]),j=0;j<rt.length;j+=1)V[R].metadata.hasOwnProperty("cmap")&&(p=V[R].metadata.cmap.unicode.codeMap[rt[j].charCodeAt(0)]),p||rt[j].charCodeAt(0)<256&&V[R].metadata.hasOwnProperty("Unicode")?W+=rt[j]:W+="";var Bt="";return parseInt(R.slice(1))<14||ht==="WinAnsiEncoding"?Bt=Q(W,R).split("").map(function(Et){return Et.charCodeAt(0).toString(16)}).join(""):ht==="Identity-H"&&(Bt=i(W,V[R])),E.isHex=!0,{text:Bt,x:v,y:C,options:F,mutex:E}};t.events.push(["postProcessText",function(d){var p=d.text||"",A=[],v={text:p,x:d.x,y:d.y,options:d.options,mutex:d.mutex};if(Array.isArray(p)){var C=0;for(C=0;C<p.length;C+=1)Array.isArray(p[C])&&p[C].length===3?A.push([u(Object.assign({},v,{text:p[C][0]})).text,p[C][1],p[C][2]]):A.push(u(Object.assign({},v,{text:p[C]})).text);d.text=A}else d.text=u(Object.assign({},v,{text:p})).text}])}(Fr),function(n){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(i){return t.call(this),this.internal.vFS[i]!==void 0},n.addFileToVFS=function(i,s){return t.call(this),this.internal.vFS[i]=s,this},n.getFileFromVFS=function(i){return t.call(this),this.internal.vFS[i]!==void 0?this.internal.vFS[i]:null}}(Fr.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(s){var u,d,p,A,v,C,F,E=t,Q=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],T=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],V={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},R={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},W=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],j=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),rt=!1,ht=0;this.__bidiEngine__={};var Bt=function(at){var ct=at.charCodeAt(),vt=ct>>8,mt=R[vt];return mt!==void 0?E[256*mt+(255&ct)]:vt===252||vt===253?"AL":j.test(vt)?"L":vt===8?"R":"N"},Et=function(at){for(var ct,vt=0;vt<at.length;vt++){if((ct=Bt(at.charAt(vt)))==="L")return!1;if(ct==="R")return!0}return!1},Tt=function(at,ct,vt,mt){var $t,Vt,Zt,Ht,Yt=ct[mt];switch(Yt){case"L":case"R":rt=!1;break;case"N":case"AN":break;case"EN":rt&&(Yt="AN");break;case"AL":rt=!0,Yt="R";break;case"WS":Yt="N";break;case"CS":mt<1||mt+1>=ct.length||($t=vt[mt-1])!=="EN"&&$t!=="AN"||(Vt=ct[mt+1])!=="EN"&&Vt!=="AN"?Yt="N":rt&&(Vt="AN"),Yt=Vt===$t?Vt:"N";break;case"ES":Yt=($t=mt>0?vt[mt-1]:"B")==="EN"&&mt+1<ct.length&&ct[mt+1]==="EN"?"EN":"N";break;case"ET":if(mt>0&&vt[mt-1]==="EN"){Yt="EN";break}if(rt){Yt="N";break}for(Zt=mt+1,Ht=ct.length;Zt<Ht&&ct[Zt]==="ET";)Zt++;Yt=Zt<Ht&&ct[Zt]==="EN"?"EN":"N";break;case"NSM":if(p&&!A){for(Ht=ct.length,Zt=mt+1;Zt<Ht&&ct[Zt]==="NSM";)Zt++;if(Zt<Ht){var Wt=at[mt],me=Wt>=1425&&Wt<=2303||Wt===64286;if($t=ct[Zt],me&&($t==="R"||$t==="AL")){Yt="R";break}}}Yt=mt<1||($t=ct[mt-1])==="B"?"N":vt[mt-1];break;case"B":rt=!1,u=!0,Yt=ht;break;case"S":d=!0,Yt="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":rt=!1;break;case"BN":Yt="N"}return Yt},xt=function(at,ct,vt){var mt=at.split("");return vt&&ft(mt,vt,{hiLevel:ht}),mt.reverse(),ct&&ct.reverse(),mt.join("")},ft=function(at,ct,vt){var mt,$t,Vt,Zt,Ht,Yt=-1,Wt=at.length,me=0,et=[],dt=ht?T:Q,_t=[];for(rt=!1,u=!1,d=!1,$t=0;$t<Wt;$t++)_t[$t]=Bt(at[$t]);for(Vt=0;Vt<Wt;Vt++){if(Ht=me,et[Vt]=Tt(at,_t,et,Vt),mt=240&(me=dt[Ht][V[et[Vt]]]),me&=15,ct[Vt]=Zt=dt[me][5],mt>0)if(mt===16){for($t=Yt;$t<Vt;$t++)ct[$t]=1;Yt=-1}else Yt=-1;if(dt[me][6])Yt===-1&&(Yt=Vt);else if(Yt>-1){for($t=Yt;$t<Vt;$t++)ct[$t]=Zt;Yt=-1}_t[Vt]==="B"&&(ct[Vt]=0),vt.hiLevel|=Zt}d&&function(St,Ot,Rt){for(var Jt=0;Jt<Rt;Jt++)if(St[Jt]==="S"){Ot[Jt]=ht;for(var re=Jt-1;re>=0&&St[re]==="WS";re--)Ot[re]=ht}}(_t,ct,Wt)},Nt=function(at,ct,vt,mt,$t){if(!($t.hiLevel<at)){if(at===1&&ht===1&&!u)return ct.reverse(),void(vt&&vt.reverse());for(var Vt,Zt,Ht,Yt,Wt=ct.length,me=0;me<Wt;){if(mt[me]>=at){for(Ht=me+1;Ht<Wt&&mt[Ht]>=at;)Ht++;for(Yt=me,Zt=Ht-1;Yt<Zt;Yt++,Zt--)Vt=ct[Yt],ct[Yt]=ct[Zt],ct[Zt]=Vt,vt&&(Vt=vt[Yt],vt[Yt]=vt[Zt],vt[Zt]=Vt);me=Ht}me++}}},jt=function(at,ct,vt){var mt=at.split(""),$t={hiLevel:ht};return vt||(vt=[]),ft(mt,vt,$t),function(Vt,Zt,Ht){if(Ht.hiLevel!==0&&F)for(var Yt,Wt=0;Wt<Vt.length;Wt++)Zt[Wt]===1&&(Yt=W.indexOf(Vt[Wt]))>=0&&(Vt[Wt]=W[Yt+1])}(mt,vt,$t),Nt(2,mt,ct,vt,$t),Nt(1,mt,ct,vt,$t),mt.join("")};return this.__bidiEngine__.doBidiReorder=function(at,ct,vt){if(function($t,Vt){if(Vt)for(var Zt=0;Zt<$t.length;Zt++)Vt[Zt]=Zt;A===void 0&&(A=Et($t)),C===void 0&&(C=Et($t))}(at,ct),p||!v||C)if(p&&v&&A^C)ht=A?1:0,at=xt(at,ct,vt);else if(!p&&v&&C)ht=A?1:0,at=jt(at,ct,vt),at=xt(at,ct);else if(!p||A||v||C){if(p&&!v&&A^C)at=xt(at,ct),A?(ht=0,at=jt(at,ct,vt)):(ht=1,at=jt(at,ct,vt),at=xt(at,ct));else if(p&&A&&!v&&C)ht=1,at=jt(at,ct,vt),at=xt(at,ct);else if(!p&&!v&&A^C){var mt=F;A?(ht=1,at=jt(at,ct,vt),ht=0,F=!1,at=jt(at,ct,vt),F=mt):(ht=0,at=jt(at,ct,vt),at=xt(at,ct),ht=1,F=!1,at=jt(at,ct,vt),F=mt,at=xt(at,ct))}}else ht=0,at=jt(at,ct,vt);else ht=A?1:0,at=jt(at,ct,vt);return at},this.__bidiEngine__.setOptions=function(at){at&&(p=at.isInputVisual,v=at.isOutputVisual,A=at.isInputRtl,C=at.isOutputRtl,F=at.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],i=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(s){var u=s.text,d=(s.x,s.y,s.options||{}),p=(s.mutex,d.lang,[]);if(d.isInputVisual=typeof d.isInputVisual!="boolean"||d.isInputVisual,i.setOptions(d),Object.prototype.toString.call(u)==="[object Array]"){var A=0;for(p=[],A=0;A<u.length;A+=1)Object.prototype.toString.call(u[A])==="[object Array]"?p.push([i.doBidiReorder(u[A][0]),u[A][1],u[A][2]]):p.push([i.doBidiReorder(u[A])]);s.text=p}else s.text=i.doBidiReorder(u);i.setOptions({isInputVisual:!0})}])}(Fr),Fr.API.TTFFont=function(){function n(t){var i;if(this.rawData=t,i=this.contents=new Ll(t),this.contents.pos=4,i.readString(4)==="ttcf")throw new Error("TTCF not supported.");i.pos=0,this.parse(),this.subset=new u3(this),this.registerTTF()}return n.open=function(t){return new n(t)},n.prototype.parse=function(){return this.directory=new W4(this.contents),this.head=new J4(this),this.name=new n3(this),this.cmap=new Uv(this),this.toUnicode={},this.hhea=new t3(this),this.maxp=new s3(this),this.hmtx=new o3(this),this.post=new r3(this),this.os2=new e3(this),this.loca=new c3(this),this.glyf=new a3(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var t,i,s,u,d;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var p,A,v,C;for(C=[],p=0,A=(v=this.bbox).length;p<A;p++)t=v[p],C.push(Math.round(t*this.scaleFactor));return C}).call(this),this.stemV=0,this.post.exists?(s=255&(u=this.post.italic_angle),32768&(i=u>>16)&&(i=-(1+(65535^i))),this.italicAngle=+(i+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(d=this.familyClass)===1||d===2||d===3||d===4||d===5||d===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(t){var i;return((i=this.cmap.unicode)!=null?i.codeMap[t]:void 0)||0},n.prototype.widthOfGlyph=function(t){var i;return i=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*i},n.prototype.widthOfString=function(t,i,s){var u,d,p,A;for(p=0,d=0,A=(t=""+t).length;0<=A?d<A:d>A;d=0<=A?++d:--d)u=t.charCodeAt(d),p+=this.widthOfGlyph(this.characterToGlyph(u))+s*(1e3/i)||0;return p*(i/1e3)},n.prototype.lineHeight=function(t,i){var s;return i==null&&(i=!1),s=i?this.lineGap:0,(this.ascender+s-this.decender)/1e3*t},n}();var fa,Ll=function(){function n(t){this.data=t??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(t){return this.data[this.pos++]=t},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},n.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},n.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},n.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},n.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},n.prototype.readString=function(t){var i,s;for(s=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)s[i]=String.fromCharCode(this.readByte());return s.join("")},n.prototype.writeString=function(t){var i,s,u;for(u=[],i=0,s=t.length;0<=s?i<s:i>s;i=0<=s?++i:--i)u.push(this.writeByte(t.charCodeAt(i)));return u},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(t){return this.writeInt16(t)},n.prototype.readLongLong=function(){var t,i,s,u,d,p,A,v;return t=this.readByte(),i=this.readByte(),s=this.readByte(),u=this.readByte(),d=this.readByte(),p=this.readByte(),A=this.readByte(),v=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^i)+1099511627776*(255^s)+4294967296*(255^u)+16777216*(255^d)+65536*(255^p)+256*(255^A)+(255^v)+1):72057594037927940*t+281474976710656*i+1099511627776*s+4294967296*u+16777216*d+65536*p+256*A+v},n.prototype.writeLongLong=function(t){var i,s;return i=Math.floor(t/4294967296),s=4294967295&t,this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(t){return this.writeInt32(t)},n.prototype.read=function(t){var i,s;for(i=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)i.push(this.readByte());return i},n.prototype.write=function(t){var i,s,u,d;for(d=[],s=0,u=t.length;s<u;s++)i=t[s],d.push(this.writeByte(i));return d},n}(),W4=function(){var n;function t(i){var s,u,d;for(this.scalarType=i.readInt(),this.tableCount=i.readShort(),this.searchRange=i.readShort(),this.entrySelector=i.readShort(),this.rangeShift=i.readShort(),this.tables={},u=0,d=this.tableCount;0<=d?u<d:u>d;u=0<=d?++u:--u)s={tag:i.readString(4),checksum:i.readInt(),offset:i.readInt(),length:i.readInt()},this.tables[s.tag]=s}return t.prototype.encode=function(i){var s,u,d,p,A,v,C,F,E,Q,T,V,R;for(R in T=Object.keys(i).length,v=Math.log(2),E=16*Math.floor(Math.log(T)/v),p=Math.floor(E/v),F=16*T-E,(u=new Ll).writeInt(this.scalarType),u.writeShort(T),u.writeShort(E),u.writeShort(p),u.writeShort(F),d=16*T,C=u.pos+d,A=null,V=[],i)for(Q=i[R],u.writeString(R),u.writeInt(n(Q)),u.writeInt(C),u.writeInt(Q.length),V=V.concat(Q),R==="head"&&(A=C),C+=Q.length;C%4;)V.push(0),C++;return u.write(V),s=2981146554-n(u.data),u.pos=A+8,u.writeUInt32(s),u.data},n=function(i){var s,u,d,p;for(i=Pv.call(i);i.length%4;)i.push(0);for(d=new Ll(i),u=0,s=0,p=i.length;s<p;s=s+=4)u+=d.readUInt32();return 4294967295&u},t}(),Y4={}.hasOwnProperty,eA=function(n,t){for(var i in t)Y4.call(t,i)&&(n[i]=t[i]);function s(){this.constructor=n}return s.prototype=t.prototype,n.prototype=new s,n.__super__=t.prototype,n};fa=function(){function n(t){var i;this.file=t,i=this.file.directory.tables[this.tag],this.exists=!!i,i&&(this.offset=i.offset,this.length=i.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var J4=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return eA(t,fa),t.prototype.tag="head",t.prototype.parse=function(i){return i.pos=this.offset,this.version=i.readInt(),this.revision=i.readInt(),this.checkSumAdjustment=i.readInt(),this.magicNumber=i.readInt(),this.flags=i.readShort(),this.unitsPerEm=i.readShort(),this.created=i.readLongLong(),this.modified=i.readLongLong(),this.xMin=i.readShort(),this.yMin=i.readShort(),this.xMax=i.readShort(),this.yMax=i.readShort(),this.macStyle=i.readShort(),this.lowestRecPPEM=i.readShort(),this.fontDirectionHint=i.readShort(),this.indexToLocFormat=i.readShort(),this.glyphDataFormat=i.readShort()},t.prototype.encode=function(i){var s;return(s=new Ll).writeInt(this.version),s.writeInt(this.revision),s.writeInt(this.checkSumAdjustment),s.writeInt(this.magicNumber),s.writeShort(this.flags),s.writeShort(this.unitsPerEm),s.writeLongLong(this.created),s.writeLongLong(this.modified),s.writeShort(this.xMin),s.writeShort(this.yMin),s.writeShort(this.xMax),s.writeShort(this.yMax),s.writeShort(this.macStyle),s.writeShort(this.lowestRecPPEM),s.writeShort(this.fontDirectionHint),s.writeShort(i),s.writeShort(this.glyphDataFormat),s.data},t}(),Tv=function(){function n(t,i){var s,u,d,p,A,v,C,F,E,Q,T,V,R,W,j,rt,ht;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=i+t.readInt(),E=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(v=0;v<256;++v)this.codeMap[v]=t.readByte();break;case 4:for(T=t.readUInt16(),Q=T/2,t.pos+=6,d=function(){var Bt,Et;for(Et=[],v=Bt=0;0<=Q?Bt<Q:Bt>Q;v=0<=Q?++Bt:--Bt)Et.push(t.readUInt16());return Et}(),t.pos+=2,R=function(){var Bt,Et;for(Et=[],v=Bt=0;0<=Q?Bt<Q:Bt>Q;v=0<=Q?++Bt:--Bt)Et.push(t.readUInt16());return Et}(),C=function(){var Bt,Et;for(Et=[],v=Bt=0;0<=Q?Bt<Q:Bt>Q;v=0<=Q?++Bt:--Bt)Et.push(t.readUInt16());return Et}(),F=function(){var Bt,Et;for(Et=[],v=Bt=0;0<=Q?Bt<Q:Bt>Q;v=0<=Q?++Bt:--Bt)Et.push(t.readUInt16());return Et}(),u=(this.length-t.pos+this.offset)/2,A=function(){var Bt,Et;for(Et=[],v=Bt=0;0<=u?Bt<u:Bt>u;v=0<=u?++Bt:--Bt)Et.push(t.readUInt16());return Et}(),v=j=0,ht=d.length;j<ht;v=++j)for(W=d[v],s=rt=V=R[v];V<=W?rt<=W:rt>=W;s=V<=W?++rt:--rt)F[v]===0?p=s+C[v]:(p=A[F[v]/2+(s-V)-(Q-v)]||0)!==0&&(p+=C[v]),this.codeMap[s]=65535&p}t.pos=E}return n.encode=function(t,i){var s,u,d,p,A,v,C,F,E,Q,T,V,R,W,j,rt,ht,Bt,Et,Tt,xt,ft,Nt,jt,at,ct,vt,mt,$t,Vt,Zt,Ht,Yt,Wt,me,et,dt,_t,St,Ot,Rt,Jt,re,be,_e,Te;switch(mt=new Ll,p=Object.keys(t).sort(function(Qe,je){return Qe-je}),i){case"macroman":for(R=0,W=function(){var Qe=[];for(V=0;V<256;++V)Qe.push(0);return Qe}(),rt={0:0},d={},$t=0,Yt=p.length;$t<Yt;$t++)rt[re=t[u=p[$t]]]==null&&(rt[re]=++R),d[u]={old:t[u],new:rt[t[u]]},W[u]=rt[t[u]];return mt.writeUInt16(1),mt.writeUInt16(0),mt.writeUInt32(12),mt.writeUInt16(0),mt.writeUInt16(262),mt.writeUInt16(0),mt.write(W),{charMap:d,subtable:mt.data,maxGlyphID:R+1};case"unicode":for(ct=[],E=[],ht=0,rt={},s={},j=C=null,Vt=0,Wt=p.length;Vt<Wt;Vt++)rt[Et=t[u=p[Vt]]]==null&&(rt[Et]=++ht),s[u]={old:Et,new:rt[Et]},A=rt[Et]-u,j!=null&&A===C||(j&&E.push(j),ct.push(u),C=A),j=u;for(j&&E.push(j),E.push(65535),ct.push(65535),jt=2*(Nt=ct.length),ft=2*Math.pow(Math.log(Nt)/Math.LN2,2),Q=Math.log(ft/2)/Math.LN2,xt=2*Nt-ft,v=[],Tt=[],T=[],V=Zt=0,me=ct.length;Zt<me;V=++Zt){if(at=ct[V],F=E[V],at===65535){v.push(0),Tt.push(0);break}if(at-(vt=s[at].new)>=32768)for(v.push(0),Tt.push(2*(T.length+Nt-V)),u=Ht=at;at<=F?Ht<=F:Ht>=F;u=at<=F?++Ht:--Ht)T.push(s[u].new);else v.push(vt-at),Tt.push(0)}for(mt.writeUInt16(3),mt.writeUInt16(1),mt.writeUInt32(12),mt.writeUInt16(4),mt.writeUInt16(16+8*Nt+2*T.length),mt.writeUInt16(0),mt.writeUInt16(jt),mt.writeUInt16(ft),mt.writeUInt16(Q),mt.writeUInt16(xt),Rt=0,et=E.length;Rt<et;Rt++)u=E[Rt],mt.writeUInt16(u);for(mt.writeUInt16(0),Jt=0,dt=ct.length;Jt<dt;Jt++)u=ct[Jt],mt.writeUInt16(u);for(be=0,_t=v.length;be<_t;be++)A=v[be],mt.writeUInt16(A);for(_e=0,St=Tt.length;_e<St;_e++)Bt=Tt[_e],mt.writeUInt16(Bt);for(Te=0,Ot=T.length;Te<Ot;Te++)R=T[Te],mt.writeUInt16(R);return{charMap:s,subtable:mt.data,maxGlyphID:ht+1}}},n}(),Uv=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return eA(t,fa),t.prototype.tag="cmap",t.prototype.parse=function(i){var s,u,d;for(i.pos=this.offset,this.version=i.readUInt16(),d=i.readUInt16(),this.tables=[],this.unicode=null,u=0;0<=d?u<d:u>d;u=0<=d?++u:--u)s=new Tv(i,this.offset),this.tables.push(s),s.isUnicode&&this.unicode==null&&(this.unicode=s);return!0},t.encode=function(i,s){var u,d;return s==null&&(s="macroman"),u=Tv.encode(i,s),(d=new Ll).writeUInt16(0),d.writeUInt16(1),u.table=d.data.concat(u.subtable),u},t}(),t3=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return eA(t,fa),t.prototype.tag="hhea",t.prototype.parse=function(i){return i.pos=this.offset,this.version=i.readInt(),this.ascender=i.readShort(),this.decender=i.readShort(),this.lineGap=i.readShort(),this.advanceWidthMax=i.readShort(),this.minLeftSideBearing=i.readShort(),this.minRightSideBearing=i.readShort(),this.xMaxExtent=i.readShort(),this.caretSlopeRise=i.readShort(),this.caretSlopeRun=i.readShort(),this.caretOffset=i.readShort(),i.pos+=8,this.metricDataFormat=i.readShort(),this.numberOfMetrics=i.readUInt16()},t}(),e3=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return eA(t,fa),t.prototype.tag="OS/2",t.prototype.parse=function(i){if(i.pos=this.offset,this.version=i.readUInt16(),this.averageCharWidth=i.readShort(),this.weightClass=i.readUInt16(),this.widthClass=i.readUInt16(),this.type=i.readShort(),this.ySubscriptXSize=i.readShort(),this.ySubscriptYSize=i.readShort(),this.ySubscriptXOffset=i.readShort(),this.ySubscriptYOffset=i.readShort(),this.ySuperscriptXSize=i.readShort(),this.ySuperscriptYSize=i.readShort(),this.ySuperscriptXOffset=i.readShort(),this.ySuperscriptYOffset=i.readShort(),this.yStrikeoutSize=i.readShort(),this.yStrikeoutPosition=i.readShort(),this.familyClass=i.readShort(),this.panose=function(){var s,u;for(u=[],s=0;s<10;++s)u.push(i.readByte());return u}(),this.charRange=function(){var s,u;for(u=[],s=0;s<4;++s)u.push(i.readInt());return u}(),this.vendorID=i.readString(4),this.selection=i.readShort(),this.firstCharIndex=i.readShort(),this.lastCharIndex=i.readShort(),this.version>0&&(this.ascent=i.readShort(),this.descent=i.readShort(),this.lineGap=i.readShort(),this.winAscent=i.readShort(),this.winDescent=i.readShort(),this.codePageRange=function(){var s,u;for(u=[],s=0;s<2;s=++s)u.push(i.readInt());return u}(),this.version>1))return this.xHeight=i.readShort(),this.capHeight=i.readShort(),this.defaultChar=i.readShort(),this.breakChar=i.readShort(),this.maxContext=i.readShort()},t}(),r3=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return eA(t,fa),t.prototype.tag="post",t.prototype.parse=function(i){var s,u,d;switch(i.pos=this.offset,this.format=i.readInt(),this.italicAngle=i.readInt(),this.underlinePosition=i.readShort(),this.underlineThickness=i.readShort(),this.isFixedPitch=i.readInt(),this.minMemType42=i.readInt(),this.maxMemType42=i.readInt(),this.minMemType1=i.readInt(),this.maxMemType1=i.readInt(),this.format){case 65536:break;case 131072:var p;for(u=i.readUInt16(),this.glyphNameIndex=[],p=0;0<=u?p<u:p>u;p=0<=u?++p:--p)this.glyphNameIndex.push(i.readUInt16());for(this.names=[],d=[];i.pos<this.offset+this.length;)s=i.readByte(),d.push(this.names.push(i.readString(s)));return d;case 151552:return u=i.readUInt16(),this.offsets=i.read(u);case 196608:break;case 262144:return this.map=(function(){var A,v,C;for(C=[],p=A=0,v=this.file.maxp.numGlyphs;0<=v?A<v:A>v;p=0<=v?++A:--A)C.push(i.readUInt32());return C}).call(this)}},t}(),i3=function(n,t){this.raw=n,this.length=n.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},n3=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return eA(t,fa),t.prototype.tag="name",t.prototype.parse=function(i){var s,u,d,p,A,v,C,F,E,Q,T;for(i.pos=this.offset,i.readShort(),s=i.readShort(),v=i.readShort(),u=[],p=0;0<=s?p<s:p>s;p=0<=s?++p:--p)u.push({platformID:i.readShort(),encodingID:i.readShort(),languageID:i.readShort(),nameID:i.readShort(),length:i.readShort(),offset:this.offset+v+i.readShort()});for(C={},p=E=0,Q=u.length;E<Q;p=++E)d=u[p],i.pos=d.offset,F=i.readString(d.length),A=new i3(F,d),C[T=d.nameID]==null&&(C[T]=[]),C[d.nameID].push(A);this.strings=C,this.copyright=C[0],this.fontFamily=C[1],this.fontSubfamily=C[2],this.uniqueSubfamily=C[3],this.fontName=C[4],this.version=C[5];try{this.postscriptName=C[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=C[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=C[7],this.manufacturer=C[8],this.designer=C[9],this.description=C[10],this.vendorUrl=C[11],this.designerUrl=C[12],this.license=C[13],this.licenseUrl=C[14],this.preferredFamily=C[15],this.preferredSubfamily=C[17],this.compatibleFull=C[18],this.sampleText=C[19]},t}(),s3=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return eA(t,fa),t.prototype.tag="maxp",t.prototype.parse=function(i){return i.pos=this.offset,this.version=i.readInt(),this.numGlyphs=i.readUInt16(),this.maxPoints=i.readUInt16(),this.maxContours=i.readUInt16(),this.maxCompositePoints=i.readUInt16(),this.maxComponentContours=i.readUInt16(),this.maxZones=i.readUInt16(),this.maxTwilightPoints=i.readUInt16(),this.maxStorage=i.readUInt16(),this.maxFunctionDefs=i.readUInt16(),this.maxInstructionDefs=i.readUInt16(),this.maxStackElements=i.readUInt16(),this.maxSizeOfInstructions=i.readUInt16(),this.maxComponentElements=i.readUInt16(),this.maxComponentDepth=i.readUInt16()},t}(),o3=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return eA(t,fa),t.prototype.tag="hmtx",t.prototype.parse=function(i){var s,u,d,p,A,v,C;for(i.pos=this.offset,this.metrics=[],s=0,v=this.file.hhea.numberOfMetrics;0<=v?s<v:s>v;s=0<=v?++s:--s)this.metrics.push({advance:i.readUInt16(),lsb:i.readInt16()});for(d=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var F,E;for(E=[],s=F=0;0<=d?F<d:F>d;s=0<=d?++F:--F)E.push(i.readInt16());return E}(),this.widths=(function(){var F,E,Q,T;for(T=[],F=0,E=(Q=this.metrics).length;F<E;F++)p=Q[F],T.push(p.advance);return T}).call(this),u=this.widths[this.widths.length-1],C=[],s=A=0;0<=d?A<d:A>d;s=0<=d?++A:--A)C.push(this.widths.push(u));return C},t.prototype.forGlyph=function(i){return i in this.metrics?this.metrics[i]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[i-this.metrics.length]}},t}(),Pv=[].slice,a3=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return eA(t,fa),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(i){var s,u,d,p,A,v,C,F,E,Q;return i in this.cache?this.cache[i]:(p=this.file.loca,s=this.file.contents,u=p.indexOf(i),(d=p.lengthOf(i))===0?this.cache[i]=null:(s.pos=this.offset+u,A=(v=new Ll(s.read(d))).readShort(),F=v.readShort(),Q=v.readShort(),C=v.readShort(),E=v.readShort(),this.cache[i]=A===-1?new l3(v,F,Q,C,E):new A3(v,A,F,Q,C,E),this.cache[i]))},t.prototype.encode=function(i,s,u){var d,p,A,v,C;for(A=[],p=[],v=0,C=s.length;v<C;v++)d=i[s[v]],p.push(A.length),d&&(A=A.concat(d.encode(u)));return p.push(A.length),{table:A,offsets:p}},t}(),A3=function(){function n(t,i,s,u,d,p){this.raw=t,this.numberOfContours=i,this.xMin=s,this.yMin=u,this.xMax=d,this.yMax=p,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),l3=function(){function n(t,i,s,u,d){var p,A;for(this.raw=t,this.xMin=i,this.yMin=s,this.xMax=u,this.yMax=d,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],p=this.raw;A=p.readShort(),this.glyphOffsets.push(p.pos),this.glyphIDs.push(p.readUInt16()),32&A;)p.pos+=1&A?4:2,128&A?p.pos+=8:64&A?p.pos+=4:8&A&&(p.pos+=2)}return n.prototype.encode=function(){var t,i,s;for(i=new Ll(Pv.call(this.raw.data)),t=0,s=this.glyphIDs.length;t<s;++t)i.pos=this.glyphOffsets[t];return i.data},n}(),c3=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return eA(t,fa),t.prototype.tag="loca",t.prototype.parse=function(i){var s,u;return i.pos=this.offset,s=this.file.head.indexToLocFormat,this.offsets=s===0?(function(){var d,p;for(p=[],u=0,d=this.length;u<d;u+=2)p.push(2*i.readUInt16());return p}).call(this):(function(){var d,p;for(p=[],u=0,d=this.length;u<d;u+=4)p.push(i.readUInt32());return p}).call(this)},t.prototype.indexOf=function(i){return this.offsets[i]},t.prototype.lengthOf=function(i){return this.offsets[i+1]-this.offsets[i]},t.prototype.encode=function(i,s){for(var u=new Uint32Array(this.offsets.length),d=0,p=0,A=0;A<u.length;++A)if(u[A]=d,p<s.length&&s[p]==A){++p,u[A]=d;var v=this.offsets[A],C=this.offsets[A+1]-v;C>0&&(d+=C)}for(var F=new Array(4*u.length),E=0;E<u.length;++E)F[4*E+3]=255&u[E],F[4*E+2]=(65280&u[E])>>8,F[4*E+1]=(16711680&u[E])>>16,F[4*E]=(4278190080&u[E])>>24;return F},t}(),u3=function(){function n(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var t,i,s,u,d;for(i in u=this.font.cmap.tables[0].codeMap,t={},d=this.subset)s=d[i],t[i]=u[s];return t},n.prototype.glyphsFor=function(t){var i,s,u,d,p,A,v;for(u={},p=0,A=t.length;p<A;p++)u[d=t[p]]=this.font.glyf.glyphFor(d);for(d in i=[],u)(s=u[d])!=null&&s.compound&&i.push.apply(i,s.glyphIDs);if(i.length>0)for(d in v=this.glyphsFor(i))s=v[d],u[d]=s;return u},n.prototype.encode=function(t,i){var s,u,d,p,A,v,C,F,E,Q,T,V,R,W,j;for(u in s=Uv.encode(this.generateCmap(),"unicode"),p=this.glyphsFor(t),T={0:0},j=s.charMap)T[(v=j[u]).old]=v.new;for(V in Q=s.maxGlyphID,p)V in T||(T[V]=Q++);return F=function(rt){var ht,Bt;for(ht in Bt={},rt)Bt[rt[ht]]=ht;return Bt}(T),E=Object.keys(F).sort(function(rt,ht){return rt-ht}),R=function(){var rt,ht,Bt;for(Bt=[],rt=0,ht=E.length;rt<ht;rt++)A=E[rt],Bt.push(F[A]);return Bt}(),d=this.font.glyf.encode(p,R,T),C=this.font.loca.encode(d.offsets,R),W={cmap:this.font.cmap.raw(),glyf:d.table,loca:C,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(i)},this.font.os2.exists&&(W["OS/2"]=this.font.os2.raw()),this.font.directory.encode(W)},n}();Fr.API.PDFObject=function(){var n;function t(){}return n=function(i,s){return(Array(s+1).join("0")+i).slice(-s)},t.convert=function(i){var s,u,d,p;if(Array.isArray(i))return"["+function(){var A,v,C;for(C=[],A=0,v=i.length;A<v;A++)s=i[A],C.push(t.convert(s));return C}().join(" ")+"]";if(typeof i=="string")return"/"+i;if(i!=null&&i.isString)return"("+i+")";if(i instanceof Date)return"(D:"+n(i.getUTCFullYear(),4)+n(i.getUTCMonth(),2)+n(i.getUTCDate(),2)+n(i.getUTCHours(),2)+n(i.getUTCMinutes(),2)+n(i.getUTCSeconds(),2)+"Z)";if({}.toString.call(i)==="[object Object]"){for(u in d=["<<"],i)p=i[u],d.push("/"+u+" "+t.convert(p));return d.push(">>"),d.join(`
`)}return""+i},t}();const Yd={"circle-radius":8,"circle-color":"red","circle-stroke-width":1,"circle-stroke-color":"black"},wh={style:{textSize:16,textHaloColor:"#FFFFFF",textHaloWidth:.8,textColor:"#000000",fallbackTextFont:["Open Sans Regular"]},visibility:"visible",position:"bottom-right"},_h={image:'<svg width="800px" height="800px" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--gis" preserveAspectRatio="xMidYMid meet"><path d="M47.655 1.634l-35 95c-.828 2.24 1.659 4.255 3.68 2.98l33.667-21.228l33.666 21.228c2.02 1.271 4.503-.74 3.678-2.98l-35-95C51.907.514 51.163.006 50 .008c-1.163.001-1.99.65-2.345 1.626zm-.155 14.88v57.54L19.89 91.461z" fill="none" stroke="white" stroke-width="1.5"/><path d="M47.655 1.634l-35 95c-.828 2.24 1.659 4.255 3.68 2.98l33.667-21.228l33.666 21.228c2.02 1.271 4.503-.74 3.678-2.98l-35-95C51.907.514 51.163.006 50 .008c-1.163.001-1.99.65-2.345 1.626zm-.155 14.88v57.54L19.89 91.461z" fill="#000000" fill-rule="evenodd"></path></svg>',imageName:"gl-export-north-icon",imageSizeFraction:.05,visibility:"visible",position:"top-right"};let Lv=class{constructor(t,i=Il.A4,s=300,u=Wa.PNG,d=cc.mm,p="map",A="maplibregl-marker",v=Yd,C="maplibregl-ctrl-attrib-inner",F=wh,E=_h){ni(this,"map"),ni(this,"width"),ni(this,"height"),ni(this,"dpi"),ni(this,"format"),ni(this,"unit"),ni(this,"fileName"),ni(this,"markerClassName"),ni(this,"markerCirclePaint"),ni(this,"attributionClassName"),ni(this,"attributionOptions"),ni(this,"northIconOptions"),this.map=t,this.width=i[0],this.height=i[1],this.dpi=s,this.format=u,this.unit=d,this.fileName=p,this.markerClassName=A,this.markerCirclePaint=v,this.attributionClassName=C,this.attributionOptions=F,this.northIconOptions=E}renderMapPost(t){return t}getMarkers(){return this.map.getCanvasContainer().getElementsByClassName(this.markerClassName)}renderMarkers(t){const i=this.getMarkers();for(let s=0;s<i.length;s++){const u=i.item(s);if(!u)continue;const d=u.getAttribute("style");if(!d)continue;const p=/translate\(([^,]+)px,\s*([^,]+)px\)/,A=d.match(p);if(!A)continue;const v=parseInt(A[1]),C=parseInt(A[2]),F=this.map.unproject([v,C]),E=`point${s}`;t.addSource(E,{type:"geojson",data:{type:"Point",coordinates:[F.lng,F.lat]}}),t.addLayer({id:E,source:E,type:"circle",paint:this.markerCirclePaint})}return t}generate(){const t=this;JsLoadingOverlay.show({overlayBackgroundColor:"#5D5959",overlayOpacity:"0.6",spinnerIcon:"ball-spin",spinnerColor:"#2400FD",spinnerSize:"2x",overlayIDName:"overlay",spinnerIDName:"spinner",offsetX:0,offsetY:0,containerID:null,lockScroll:!1,overlayZIndex:9998,spinnerZIndex:9999});const i=window.devicePixelRatio;Object.defineProperty(window,"devicePixelRatio",{get(){return t.dpi/96}});const s=document.createElement("div");s.className="hidden-map",document.body.appendChild(s);const u=document.createElement("div");u.style.width=this.toPixels(this.width),u.style.height=this.toPixels(this.height),s.appendChild(u);const d=this.map.getStyle();if(d&&d.sources){const A=d.sources;Object.keys(A).forEach(v=>{const C=A[v];Object.keys(C).forEach(F=>{C[F]||delete C[F]})})}let p=this.getRenderedMap(u,d);this.addNorthIconToMap(p).then(()=>{p.once("idle",()=>{this.addAttributions(p)?p.once("idle",()=>{p=this.renderMapPost(p),this.getMarkers().length===0?this.exportImage(p,s,i):(p=this.renderMarkers(p),p.once("idle",()=>{this.exportImage(p,s,i)}))}):(p=this.renderMapPost(p),this.getMarkers().length===0?this.exportImage(p,s,i):(p=this.renderMarkers(p),p.once("idle",()=>{this.exportImage(p,s,i)})))})})}stripHtml(t){const i=document.createElement("div");return i.innerHTML=t,i.textContent||i.innerText||""}getIconWidth(t,i){const s=t.getContainer(),u=parseInt(s.style.width.replace("px",""));return parseInt(`${u*i}`)}getElementPosition(t,i,s=0){const u=t.getContainer();let d=0,p=0;switch(i){case"top-left":d=0+s,p=0+s;break;case"top-right":d=parseInt(u.style.width.replace("px",""))-s,p=0+s;break;case"bottom-left":d=0+s,p=parseInt(u.style.height.replace("px",""))-s;break;case"bottom-right":d=parseInt(u.style.width.replace("px",""))-s,p=parseInt(u.style.height.replace("px",""))-s;break}return[d,p]}addNorthIconImage(t){const i=this.getIconWidth(t,this.northIconOptions.imageSizeFraction??.08);return new Promise(s=>{const u=new Image(i,i);u.onload=()=>{this.northIconOptions.imageName&&t.addImage(this.northIconOptions.imageName,u),s()};function d(p){return"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(p)}this.northIconOptions.image&&(u.src=d(this.northIconOptions.image))})}addNorthIconToMap(t){let i=this.northIconOptions.visibility??"visible";return t.getZoom()<2&&this.width>this.height&&(i="none"),new Promise(s=>{this.addNorthIconImage(t).then(()=>{const u=this.getIconWidth(t,this.northIconOptions.imageSizeFraction??.08)*.8,d=this.getElementPosition(t,this.northIconOptions.position??"top-right",u),p=t.unproject(d),A=this.northIconOptions.imageName??"gl-export-north-icon";t.addSource(A,{type:"geojson",data:{type:"Feature",geometry:{type:"Point",coordinates:[p.lng,p.lat]},properties:{}}}),t.addLayer({id:A,source:A,type:"symbol",layout:{"icon-image":A,"icon-size":1,"icon-rotate":t.getBearing()*-1,"icon-allow-overlap":!0,"icon-ignore-placement":!0,visibility:i},paint:{}}),s()})})}addAttributions(t){var i;if(!this.map.getStyle().glyphs)return!1;const s=t.getContainer(),u=this.attributionOptions.position??"bottom-right",d=this.getElementPosition(t,u,5),p=d[0],A=t.unproject(d),v=s.getElementsByClassName(this.attributionClassName),C=[];if((v==null?void 0:v.length)>0){const W=v.item(0);if(W)for(let j=0;j<W.children.length;j++){const rt=W.children.item(j);rt&&C.push(this.stripHtml(rt.outerHTML))}}else{const W=this.map.getStyle().sources;Object.keys(W).forEach(j=>{const rt=W[j];if("attribution"in rt){const ht=rt.attribution;C.push(this.stripHtml(ht))}})}if(C.length===0)return!1;const F=C.join(" | "),E="attribution";t.addSource(E,{type:"geojson",data:{type:"Feature",geometry:{type:"Point",coordinates:[A.lng,A.lat]},properties:{attribution:F}}});const Q=this.map.getStyle().layers.filter(W=>W.type==="symbol"&&W.layout&&"text-font"in W.layout),T=Q.length>0&&Q[0].layout?Q[0].layout["text-font"]:(i=this.attributionOptions.style)==null?void 0:i.fallbackTextFont;let V=this.attributionOptions.visibility??"visible";t.getZoom()<2&&this.width>this.height&&(V="none");const R=this.attributionOptions.style;return t.addLayer({id:E,source:E,type:"symbol",layout:{"text-field":["get","attribution"],"text-font":T,"text-max-width":parseInt(`${p/R.textSize}`),"text-anchor":u,"text-justify":["top-right","bottom-right"].includes(u)?"right":"left","text-size":R.textSize,"text-allow-overlap":!0,visibility:V},paint:{"text-halo-color":R.textHaloColor,"text-halo-width":R.textHaloWidth,"text-color":R.textColor}}),!0}exportImage(t,i,s){var u;const d=t.getCanvas(),p=`${this.fileName}.${this.format}`;switch(this.format){case Wa.PNG:this.toPNG(d,p);break;case Wa.JPEG:this.toJPEG(d,p);break;case Wa.PDF:this.toPDF(t,p);break;case Wa.SVG:this.toSVG(d,p);break;default:console.error(`Invalid file format: ${this.format}`);break}t.remove(),(u=i.parentNode)==null||u.removeChild(i),Object.defineProperty(window,"devicePixelRatio",{get(){return s}}),i.remove(),JsLoadingOverlay.hide()}toPNG(t,i){const s=document.createElement("a");s.href=t.toDataURL(),s.download=i,s.click(),s.remove()}toJPEG(t,i){const s=t.toDataURL("image/jpeg",.85),u=document.createElement("a");u.href=s,u.download=i,u.click(),u.remove()}toPDF(t,i){const s=t.getCanvas(),u=new Fr({orientation:this.width>this.height?"l":"p",unit:this.unit,compress:!0,format:[this.width,this.height]});u.addImage(s.toDataURL("image/png"),"png",0,0,this.width,this.height,void 0,"FAST");const{lng:d,lat:p}=t.getCenter();u.setProperties({title:t.getStyle().name,subject:`center: [${d}, ${p}], zoom: ${t.getZoom()}`,creator:"Mapbox GL Export Plugin",author:"(c)Mapbox, (c)OpenStreetMap"}),u.save(i)}toSVG(t,i){const s=t.toDataURL("image/png"),u=Number(this.toPixels(this.width,this.dpi).replace("px","")),d=Number(this.toPixels(this.height,this.dpi).replace("px","")),p=`
    <svg xmlns="http://www.w3.org/2000/svg" 
      xmlns:xlink="http://www.w3.org/1999/xlink" 
      version="1.1" 
      width="${u}" 
      height="${d}" 
      viewBox="0 0 ${u} ${d}" 
      xml:space="preserve">
        <image style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;"  
      xlink:href="${s}" width="${u}" height="${d}"></image>
    </svg>`,A=document.createElement("a");A.href=`data:application/xml,${encodeURIComponent(p)}`,A.download=i,A.click(),A.remove()}toPixels(t,i=96){return this.unit===cc.mm&&(i/=25.4),`${i*t}px`}},h3=class extends Lv{constructor(t,i=Il.A4,s=300,u=Wa.PNG,d=cc.mm,p="map",A=Yd,v=wh,C=_h){super(t,i,s,u,d,p,"maplibregl-marker",A,"maplibregl-ctrl-attrib-inner",v,C)}getRenderedMap(t,i){const s=new WC.Map({container:t,style:i,center:this.map.getCenter(),zoom:this.map.getZoom(),bearing:this.map.getBearing(),pitch:this.map.getPitch(),interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,transformRequest:this.map._requestManager._transformRequestFn});this.map.getTerrain()&&(s.setMaxPitch(85),s.setPitch(this.map.getPitch()));const u=(this.map.style.imageManager||{}).images||[];return Object.keys(u).forEach(d=>{u[d].data&&s.addImage(d,u[d].data)}),s}renderMapPost(t){const i=this.map.getTerrain();return i&&t.setTerrain({source:i.source,exaggeration:i.exaggeration}),t}},d3=class{constructor(t){ni(this,"controlContainer"),ni(this,"exportContainer"),ni(this,"crosshair"),ni(this,"printableArea"),ni(this,"map"),ni(this,"exportButton"),ni(this,"options",{PageSize:Il.A4,PageOrientation:ph.Landscape,Format:Wa.PDF,DPI:dg[300],Crosshair:!1,PrintableArea:!1,Local:"en",AllowedSizes:Object.keys(Il),Filename:"map",markerCirclePaint:Yd,attributionOptions:wh,northIconOptions:_h}),ni(this,"MAPLIB_CSS_PREFIX","maplibregl"),t&&(t.attributionOptions=Object.assign(wh,t.attributionOptions),t.northIconOptions=Object.assign(_h,t.northIconOptions),this.options=Object.assign(this.options,t)),this.onDocumentClick=this.onDocumentClick.bind(this)}getDefaultPosition(){return"top-right"}getTranslation(){const t=this.options.Local??"en";return f4(t)}onAdd(t){var i;this.map=t,this.controlContainer=document.createElement("div"),this.controlContainer.classList.add(`${this.MAPLIB_CSS_PREFIX}-ctrl`),this.controlContainer.classList.add(`${this.MAPLIB_CSS_PREFIX}-ctrl-group`),this.exportContainer=document.createElement("div"),this.exportContainer.classList.add(`${this.MAPLIB_CSS_PREFIX}-export-list`),this.exportButton=document.createElement("button"),this.exportButton.classList.add(`${this.MAPLIB_CSS_PREFIX}-ctrl-icon`),this.exportButton.classList.add(`${this.MAPLIB_CSS_PREFIX}-export-control`),this.exportButton.type="button",this.exportButton.addEventListener("click",()=>{this.exportButton.style.display="none",this.exportContainer.style.display="block",this.toggleCrosshair(!0),this.togglePrintableArea(!0)}),document.addEventListener("click",this.onDocumentClick),this.controlContainer.appendChild(this.exportButton),this.controlContainer.appendChild(this.exportContainer);const s=document.createElement("TABLE");s.className="print-table";const u={};(i=this.options.AllowedSizes)==null||i.forEach(F=>{Il[F]&&(u[F]=Il[F])});const d=this.createSelection(u,this.getTranslation().PageSize,"page-size",this.options.PageSize,(F,E)=>JSON.stringify(F[E]));s.appendChild(d);const p=this.createSelection(ph,this.getTranslation().PageOrientation,"page-orientation",this.options.PageOrientation,(F,E)=>F[E]);s.appendChild(p);const A=this.createSelection(Wa,this.getTranslation().Format,"format-type",this.options.Format,(F,E)=>F[E]);s.appendChild(A);const v=this.createSelection(dg,this.getTranslation().DPI,"dpi-type",this.options.DPI,(F,E)=>F[E]);s.appendChild(v),this.exportContainer.appendChild(s);const C=document.createElement("button");return C.type="button",C.textContent=this.getTranslation().Generate,C.classList.add("generate-button"),C.addEventListener("click",()=>{const F=document.getElementById("mapbox-gl-export-page-size"),E=document.getElementById("mapbox-gl-export-page-orientation"),Q=document.getElementById("mapbox-gl-export-format-type"),T=document.getElementById("mapbox-gl-export-dpi-type"),V=E.value;let R=JSON.parse(F.value);V===ph.Portrait&&(R=R.reverse()),this.generateMap(t,R,Number(T.value),Q.value,cc.mm,this.options.Filename)}),this.exportContainer.appendChild(C),this.controlContainer}generateMap(t,i,s,u,d,p){new h3(t,i,s,u,d,p,this.options.markerCirclePaint,this.options.attributionOptions,this.options.northIconOptions).generate()}createSelection(t,i,s,u,d){const p=document.createElement("label");p.textContent=i;const A=document.createElement("select");A.setAttribute("id",`mapbox-gl-export-${s}`),A.style.width="100%",Object.keys(t).forEach(E=>{const Q=document.createElement("option");Q.setAttribute("value",d(t,E)),Q.appendChild(document.createTextNode(E)),Q.setAttribute("name",s),u===t[E]&&(Q.selected=!0),A.appendChild(Q)}),A.addEventListener("change",()=>{this.updatePrintableArea()});const v=document.createElement("TR"),C=document.createElement("TD"),F=document.createElement("TD");return C.appendChild(p),F.appendChild(A),v.appendChild(C),v.appendChild(F),v}onRemove(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.exportButton||(this.exportButton.removeEventListener("click",this.onDocumentClick),this.controlContainer.parentNode.removeChild(this.controlContainer),document.removeEventListener("click",this.onDocumentClick),this.crosshair!==void 0&&(this.crosshair.destroy(),this.crosshair=void 0),this.printableArea!==void 0&&(this.printableArea.destroy(),this.printableArea=void 0),this.map=void 0)}onDocumentClick(t){this.controlContainer&&!this.controlContainer.contains(t.target)&&this.exportContainer&&this.exportButton&&(this.exportContainer.style.display="none",this.exportButton.style.display="block",this.toggleCrosshair(!1),this.togglePrintableArea(!1))}toggleCrosshair(t){this.options.Crosshair===!0&&(t===!1?this.crosshair!==void 0&&(this.crosshair.destroy(),this.crosshair=void 0):(this.crosshair=new t4(this.map),this.crosshair.create()))}togglePrintableArea(t){this.options.PrintableArea===!0&&(t===!1?this.printableArea!==void 0&&(this.printableArea.destroy(),this.printableArea=void 0):(this.printableArea=new e4(this.map),this.updatePrintableArea()))}updatePrintableArea(){if(this.printableArea===void 0)return;const t=document.getElementById("mapbox-gl-export-page-size"),i=document.getElementById("mapbox-gl-export-page-orientation").value;let s=JSON.parse(t.value);i===ph.Portrait&&(s=s.reverse()),this.printableArea.updateArea(s[0],s[1])}};(function(n){var t={};function i(s){if(t[s])return t[s].exports;var u=t[s]={i:s,l:!1,exports:{}};return n[s].call(u.exports,u,u.exports,i),u.l=!0,u.exports}i.m=n,i.c=t,i.d=function(s,u,d){i.o(s,u)||Object.defineProperty(s,u,{enumerable:!0,get:d})},i.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,u){if(1&u&&(s=i(s)),8&u||4&u&&typeof s=="object"&&s&&s.__esModule)return s;var d=Object.create(null);if(i.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:s}),2&u&&typeof s!="string")for(var p in s)i.d(d,p,(function(A){return s[A]}).bind(null,p));return d},i.n=function(s){var u=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(u,"a",u),u},i.o=function(s,u){return Object.prototype.hasOwnProperty.call(s,u)},i.p="",i(i.s=0)})([function(n,t,i){n.exports=i(1)},function(n,t){function i(u,d){for(var p=0;p<d.length;p++){var A=d[p];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(u,A.key,A)}}var s=function(){function u(){(function(A,v){if(!(A instanceof v))throw new TypeError("Cannot call a class as a function")})(this,u),this.options={overlayBackgroundColor:"#666666",overlayOpacity:.6,spinnerIcon:"ball-circus",spinnerColor:"#000",spinnerSize:"3x",overlayIDName:"overlay",spinnerIDName:"spinner",offsetY:0,offsetX:0,lockScroll:!1,containerID:null,spinnerZIndex:99999,overlayZIndex:99998},this.stylesheetBaseURL="https://cdn.jsdelivr.net/npm/load-awesome@1.1.0/css/",this.spinner=null,this.spinnerStylesheetURL=null,this.numberOfEmptyDivForSpinner={"ball-8bits":16,"ball-atom":4,"ball-beat":3,"ball-circus":5,"ball-climbing-dot":1,"ball-clip-rotate":1,"ball-clip-rotate-multiple":2,"ball-clip-rotate-pulse":2,"ball-elastic-dots":5,"ball-fall":3,"ball-fussion":4,"ball-grid-beat":9,"ball-grid-pulse":9,"ball-newton-cradle":4,"ball-pulse":3,"ball-pulse-rise":5,"ball-pulse-sync":3,"ball-rotate":1,"ball-running-dots":5,"ball-scale":1,"ball-scale-multiple":3,"ball-scale-pulse":2,"ball-scale-ripple":1,"ball-scale-ripple-multiple":3,"ball-spin":8,"ball-spin-clockwise":8,"ball-spin-clockwise-fade":8,"ball-spin-clockwise-fade-rotating":8,"ball-spin-fade":8,"ball-spin-fade-rotating":8,"ball-spin-rotate":2,"ball-square-clockwise-spin":8,"ball-square-spin":8,"ball-triangle-path":3,"ball-zig-zag":2,"ball-zig-zag-deflect":2,cog:1,"cube-transition":2,fire:3,"line-scale":5,"line-scale-party":5,"line-scale-pulse-out":5,"line-scale-pulse-out-rapid":5,"line-spin-clockwise-fade":8,"line-spin-clockwise-fade-rotating":8,"line-spin-fade":8,"line-spin-fade-rotating":8,pacman:6,"square-jelly-box":2,"square-loader":1,"square-spin":1,timer:1,"triangle-skew-spin":1}}var d,p;return d=u,(p=[{key:"show",value:function(A){this.setOptions(A),this.addSpinnerStylesheet(),this.generateSpinnerElement(),this.options.lockScroll&&(document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden"),this.generateAndAddOverlayElement()}},{key:"hide",value:function(){this.options.lockScroll&&(document.body.style.overflow="",document.documentElement.style.overflow="");var A=document.getElementById("loading-overlay-stylesheet");A&&(A.disabled=!0,A.parentNode.removeChild(A),document.getElementById(this.options.overlayIDName).remove(),document.getElementById(this.options.spinnerIDName).remove())}},{key:"setOptions",value:function(A){if(A!==void 0)for(var v in A)this.options[v]=A[v]}},{key:"generateAndAddOverlayElement",value:function(){var A="50%";this.options.offsetX!==0&&(A="calc(50% + "+this.options.offsetX+")");var v="50%";if(this.options.offsetY!==0&&(v="calc(50% + "+this.options.offsetY+")"),this.options.containerID&&document.body.contains(document.getElementById(this.options.containerID))){var C='<div id="'.concat(this.options.overlayIDName,'" style="display: block !important; position: absolute; top: 0; left: 0; overflow: auto; opacity: ').concat(this.options.overlayOpacity,"; background: ").concat(this.options.overlayBackgroundColor,'; z-index: 50; width: 100%; height: 100%;"></div><div id="').concat(this.options.spinnerIDName,'" style="display: block !important; position: absolute; top: ').concat(v,"; left: ").concat(A,'; -webkit-transform: translate(-50%); -ms-transform: translate(-50%); transform: translate(-50%); z-index: 9999;">').concat(this.spinner,"</div>"),F=document.getElementById(this.options.containerID);return F.style.position="relative",void F.insertAdjacentHTML("beforeend",C)}var E='<div id="'.concat(this.options.overlayIDName,'" style="display: block !important; position: fixed; top: 0; left: 0; overflow: auto; opacity: ').concat(this.options.overlayOpacity,"; background: ").concat(this.options.overlayBackgroundColor,"; z-index: ").concat(this.options.overlayZIndex,'; width: 100%; height: 100%;"></div><div id="').concat(this.options.spinnerIDName,'" style="display: block !important; position: fixed; top: ').concat(v,"; left: ").concat(A,"; -webkit-transform: translate(-50%); -ms-transform: translate(-50%); transform: translate(-50%); z-index: ").concat(this.options.spinnerZIndex,';">').concat(this.spinner,"</div>");document.body.insertAdjacentHTML("beforeend",E)}},{key:"generateSpinnerElement",value:function(){var A=this,v=Object.keys(this.numberOfEmptyDivForSpinner).find(function(F){return F===A.options.spinnerIcon}),C=this.generateEmptyDivElement(this.numberOfEmptyDivForSpinner[v]);this.spinner='<div style="color: '.concat(this.options.spinnerColor,'" class="la-').concat(this.options.spinnerIcon," la-").concat(this.options.spinnerSize,'">').concat(C,"</div>")}},{key:"addSpinnerStylesheet",value:function(){this.setSpinnerStylesheetURL();var A=document.createElement("link");A.setAttribute("id","loading-overlay-stylesheet"),A.setAttribute("rel","stylesheet"),A.setAttribute("type","text/css"),A.setAttribute("href",this.spinnerStylesheetURL),document.getElementsByTagName("head")[0].appendChild(A)}},{key:"setSpinnerStylesheetURL",value:function(){this.spinnerStylesheetURL=this.stylesheetBaseURL+this.options.spinnerIcon+".min.css"}},{key:"generateEmptyDivElement",value:function(A){for(var v="",C=1;C<=A;C++)v+="<div></div>";return v}}])&&i(d.prototype,p),u}();window.JsLoadingOverlay=new s,n.exports=JsLoadingOverlay}]);class p3 extends Lv{constructor(i,s=Il.A4,u=300,d=Wa.PNG,p=cc.mm,A="map",v=Yd,C=wh,F=_h,E){super(i,s,u,d,p,A,"mapboxgl-marker",v,"mapboxgl-ctrl-attrib-inner",C,F);$y(this,"accesstoken");this.accesstoken=E}getRenderedMap(i,s){var p;const u=new Xs.Map({accessToken:this.accesstoken||Xs.accessToken,container:i,style:s,center:this.map.getCenter(),zoom:this.map.getZoom(),bearing:this.map.getBearing(),pitch:this.map.getPitch(),interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,transformRequest:this.map._requestManager._transformRequestFn}),d=(this.map.style.imageManager||{}).images||[];return console.log(" ~ file: map-generator.ts:80 ~ MapGenerator ~ getRenderedMap ~ images:",d),d&&((p=Object.keys(d))==null?void 0:p.length)>0&&Object.keys(d).forEach(A=>{A&&d[A].data&&u.addImage(A,d[A].data)}),u}}class f3 extends d3{constructor(i){super(i);$y(this,"accessToken");this.MAPLIB_CSS_PREFIX="mapboxgl",this.accessToken=i.accessToken}generateMap(i,s,u,d,p,A){new p3(i,s,u,d,p,A,this.options.markerCirclePaint,this.options.attributionOptions,this.options.northIconOptions,this.accessToken).generate()}}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var Mg=function(n,t){return Mg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(i[u]=s[u])},Mg(n,t)};function ga(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Mg(n,t);function i(){this.constructor=n}n.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}var Dg=function(){return Dg=Object.assign||function(n){for(var t,i=1,s=arguments.length;i<s;i++){t=arguments[i];for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(n[u]=t[u])}return n},Dg.apply(this,arguments)};function Is(n,t,i,s){function u(d){return d instanceof i?d:new i(function(p){p(d)})}return new(i||(i=Promise))(function(d,p){function A(F){try{C(s.next(F))}catch(E){p(E)}}function v(F){try{C(s.throw(F))}catch(E){p(E)}}function C(F){F.done?d(F.value):u(F.value).then(A,v)}C((s=s.apply(n,[])).next())})}function ds(n,t){var i={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},s,u,d,p;return p={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function A(C){return function(F){return v([C,F])}}function v(C){if(s)throw new TypeError("Generator is already executing.");for(;i;)try{if(s=1,u&&(d=C[0]&2?u.return:C[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,C[1])).done)return d;switch(u=0,d&&(C=[C[0]&2,d.value]),C[0]){case 0:case 1:d=C;break;case 4:return i.label++,{value:C[1],done:!1};case 5:i.label++,u=C[1],C=[0];continue;case 7:C=i.ops.pop(),i.trys.pop();continue;default:if(d=i.trys,!(d=d.length>0&&d[d.length-1])&&(C[0]===6||C[0]===2)){i=0;continue}if(C[0]===3&&(!d||C[1]>d[0]&&C[1]<d[3])){i.label=C[1];break}if(C[0]===6&&i.label<d[1]){i.label=d[1],d=C;break}if(d&&i.label<d[2]){i.label=d[2],i.ops.push(C);break}d[2]&&i.ops.pop(),i.trys.pop();continue}C=t.call(n,i)}catch(F){C=[6,F],u=0}finally{s=d=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}}function Jd(n,t,i){if(arguments.length===2)for(var s=0,u=t.length,d;s<u;s++)(d||!(s in t))&&(d||(d=Array.prototype.slice.call(t,0,s)),d[s]=t[s]);return n.concat(d||t)}for(var GA=function(){function n(t,i,s,u){this.left=t,this.top=i,this.width=s,this.height=u}return n.prototype.add=function(t,i,s,u){return new n(this.left+t,this.top+i,this.width+s,this.height+u)},n.fromClientRect=function(t,i){return new n(i.left+t.windowBounds.left,i.top+t.windowBounds.top,i.width,i.height)},n.fromDOMRectList=function(t,i){var s=Array.from(i).find(function(u){return u.width!==0});return s?new n(s.left+t.windowBounds.left,s.top+t.windowBounds.top,s.width,s.height):n.EMPTY},n.EMPTY=new n(0,0,0,0),n}(),tp=function(n,t){return GA.fromClientRect(n,t.getBoundingClientRect())},g3=function(n){var t=n.body,i=n.documentElement;if(!t||!i)throw new Error("Unable to get document size");var s=Math.max(Math.max(t.scrollWidth,i.scrollWidth),Math.max(t.offsetWidth,i.offsetWidth),Math.max(t.clientWidth,i.clientWidth)),u=Math.max(Math.max(t.scrollHeight,i.scrollHeight),Math.max(t.offsetHeight,i.offsetHeight),Math.max(t.clientHeight,i.clientHeight));return new GA(0,0,s,u)},ep=function(n){for(var t=[],i=0,s=n.length;i<s;){var u=n.charCodeAt(i++);if(u>=55296&&u<=56319&&i<s){var d=n.charCodeAt(i++);(d&64512)===56320?t.push(((u&1023)<<10)+(d&1023)+65536):(t.push(u),i--)}else t.push(u)}return t},on=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var i=n.length;if(!i)return"";for(var s=[],u=-1,d="";++u<i;){var p=n[u];p<=65535?s.push(p):(p-=65536,s.push((p>>10)+55296,p%1024+56320)),(u+1===i||s.length>16384)&&(d+=String.fromCharCode.apply(String,s),s.length=0)}return d},Qv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m3=typeof Uint8Array>"u"?[]:new Uint8Array(256),rp=0;rp<Qv.length;rp++)m3[Qv.charCodeAt(rp)]=rp;for(var kv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bh=typeof Uint8Array>"u"?[]:new Uint8Array(256),ip=0;ip<kv.length;ip++)bh[kv.charCodeAt(ip)]=ip;for(var y3=function(n){var t=n.length*.75,i=n.length,s,u=0,d,p,A,v;n[n.length-1]==="="&&(t--,n[n.length-2]==="="&&t--);var C=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),F=Array.isArray(C)?C:new Uint8Array(C);for(s=0;s<i;s+=4)d=bh[n.charCodeAt(s)],p=bh[n.charCodeAt(s+1)],A=bh[n.charCodeAt(s+2)],v=bh[n.charCodeAt(s+3)],F[u++]=d<<2|p>>4,F[u++]=(p&15)<<4|A>>2,F[u++]=(A&3)<<6|v&63;return C},v3=function(n){for(var t=n.length,i=[],s=0;s<t;s+=2)i.push(n[s+1]<<8|n[s]);return i},w3=function(n){for(var t=n.length,i=[],s=0;s<t;s+=4)i.push(n[s+3]<<24|n[s+2]<<16|n[s+1]<<8|n[s]);return i},fc=5,Ng=11,Og=2,_3=Ng-fc,Mv=65536>>fc,b3=1<<fc,Rg=b3-1,x3=1024>>fc,B3=Mv+x3,C3=B3,F3=32,S3=C3+F3,I3=65536>>Ng,E3=1<<_3,T3=E3-1,Dv=function(n,t,i){return n.slice?n.slice(t,i):new Uint16Array(Array.prototype.slice.call(n,t,i))},U3=function(n,t,i){return n.slice?n.slice(t,i):new Uint32Array(Array.prototype.slice.call(n,t,i))},P3=function(n,t){var i=y3(n),s=Array.isArray(i)?w3(i):new Uint32Array(i),u=Array.isArray(i)?v3(i):new Uint16Array(i),d=24,p=Dv(u,d/2,s[4]/2),A=s[5]===2?Dv(u,(d+s[4])/2):U3(s,Math.ceil((d+s[4])/4));return new L3(s[0],s[1],s[2],s[3],p,A)},L3=function(){function n(t,i,s,u,d,p){this.initialValue=t,this.errorValue=i,this.highStart=s,this.highValueIndex=u,this.index=d,this.data=p}return n.prototype.get=function(t){var i;if(t>=0){if(t<55296||t>56319&&t<=65535)return i=this.index[t>>fc],i=(i<<Og)+(t&Rg),this.data[i];if(t<=65535)return i=this.index[Mv+(t-55296>>fc)],i=(i<<Og)+(t&Rg),this.data[i];if(t<this.highStart)return i=S3-I3+(t>>Ng),i=this.index[i],i+=t>>fc&T3,i=this.index[i],i=(i<<Og)+(t&Rg),this.data[i];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),Nv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Q3=typeof Uint8Array>"u"?[]:new Uint8Array(256),np=0;np<Nv.length;np++)Q3[Nv.charCodeAt(np)]=np;var k3="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Ov=50,M3=1,Rv=2,zv=3,D3=4,N3=5,Hv=7,Vv=8,jv=9,Ql=10,zg=11,Kv=12,Hg=13,O3=14,xh=15,Vg=16,sp=17,Bh=18,R3=19,$v=20,jg=21,Ch=22,Kg=23,Au=24,wo=25,Fh=26,Sh=27,lu=28,z3=29,cu=30,H3=31,op=32,ap=33,$g=34,qg=35,Gg=36,Ih=37,Xg=38,Ap=39,lp=40,Zg=41,qv=42,V3=43,j3=[9001,65288],Gv="!",Es="",cp="",Wg=P3(k3),XA=[cu,Gg],Yg=[M3,Rv,zv,N3],Xv=[Ql,Vv],Zv=[Sh,Fh],K3=Yg.concat(Xv),Wv=[Xg,Ap,lp,$g,qg],$3=[xh,Hg],q3=function(n,t){t===void 0&&(t="strict");var i=[],s=[],u=[];return n.forEach(function(d,p){var A=Wg.get(d);if(A>Ov?(u.push(!0),A-=Ov):u.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(d)!==-1)return s.push(p),i.push(Vg);if(A===D3||A===zg){if(p===0)return s.push(p),i.push(cu);var v=i[p-1];return K3.indexOf(v)===-1?(s.push(s[p-1]),i.push(v)):(s.push(p),i.push(cu))}if(s.push(p),A===H3)return i.push(t==="strict"?jg:Ih);if(A===qv||A===z3)return i.push(cu);if(A===V3)return d>=131072&&d<=196605||d>=196608&&d<=262141?i.push(Ih):i.push(cu);i.push(A)}),[s,i,u]},Jg=function(n,t,i,s){var u=s[i];if(Array.isArray(n)?n.indexOf(u)!==-1:n===u)for(var d=i;d<=s.length;){d++;var p=s[d];if(p===t)return!0;if(p!==Ql)break}if(u===Ql)for(var d=i;d>0;){d--;var A=s[d];if(Array.isArray(n)?n.indexOf(A)!==-1:n===A)for(var v=i;v<=s.length;){v++;var p=s[v];if(p===t)return!0;if(p!==Ql)break}if(A!==Ql)break}return!1},Yv=function(n,t){for(var i=n;i>=0;){var s=t[i];if(s===Ql)i--;else return s}return 0},G3=function(n,t,i,s,u){if(i[s]===0)return Es;var d=s-1;if(Array.isArray(u)&&u[d]===!0)return Es;var p=d-1,A=d+1,v=t[d],C=p>=0?t[p]:0,F=t[A];if(v===Rv&&F===zv)return Es;if(Yg.indexOf(v)!==-1)return Gv;if(Yg.indexOf(F)!==-1||Xv.indexOf(F)!==-1)return Es;if(Yv(d,t)===Vv)return cp;if(Wg.get(n[d])===zg||(v===op||v===ap)&&Wg.get(n[A])===zg||v===Hv||F===Hv||v===jv||[Ql,Hg,xh].indexOf(v)===-1&&F===jv||[sp,Bh,R3,Au,lu].indexOf(F)!==-1||Yv(d,t)===Ch||Jg(Kg,Ch,d,t)||Jg([sp,Bh],jg,d,t)||Jg(Kv,Kv,d,t))return Es;if(v===Ql)return cp;if(v===Kg||F===Kg)return Es;if(F===Vg||v===Vg)return cp;if([Hg,xh,jg].indexOf(F)!==-1||v===O3||C===Gg&&$3.indexOf(v)!==-1||v===lu&&F===Gg||F===$v||XA.indexOf(F)!==-1&&v===wo||XA.indexOf(v)!==-1&&F===wo||v===Sh&&[Ih,op,ap].indexOf(F)!==-1||[Ih,op,ap].indexOf(v)!==-1&&F===Fh||XA.indexOf(v)!==-1&&Zv.indexOf(F)!==-1||Zv.indexOf(v)!==-1&&XA.indexOf(F)!==-1||[Sh,Fh].indexOf(v)!==-1&&(F===wo||[Ch,xh].indexOf(F)!==-1&&t[A+1]===wo)||[Ch,xh].indexOf(v)!==-1&&F===wo||v===wo&&[wo,lu,Au].indexOf(F)!==-1)return Es;if([wo,lu,Au,sp,Bh].indexOf(F)!==-1)for(var E=d;E>=0;){var Q=t[E];if(Q===wo)return Es;if([lu,Au].indexOf(Q)!==-1)E--;else break}if([Sh,Fh].indexOf(F)!==-1)for(var E=[sp,Bh].indexOf(v)!==-1?p:d;E>=0;){var Q=t[E];if(Q===wo)return Es;if([lu,Au].indexOf(Q)!==-1)E--;else break}if(Xg===v&&[Xg,Ap,$g,qg].indexOf(F)!==-1||[Ap,$g].indexOf(v)!==-1&&[Ap,lp].indexOf(F)!==-1||[lp,qg].indexOf(v)!==-1&&F===lp||Wv.indexOf(v)!==-1&&[$v,Fh].indexOf(F)!==-1||Wv.indexOf(F)!==-1&&v===Sh||XA.indexOf(v)!==-1&&XA.indexOf(F)!==-1||v===Au&&XA.indexOf(F)!==-1||XA.concat(wo).indexOf(v)!==-1&&F===Ch&&j3.indexOf(n[A])===-1||XA.concat(wo).indexOf(F)!==-1&&v===Bh)return Es;if(v===Zg&&F===Zg){for(var T=i[d],V=1;T>0&&(T--,t[T]===Zg);)V++;if(V%2!==0)return Es}return v===op&&F===ap?Es:cp},X3=function(n,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var i=q3(n,t.lineBreak),s=i[0],u=i[1],d=i[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(u=u.map(function(A){return[wo,cu,qv].indexOf(A)!==-1?Ih:A}));var p=t.wordBreak==="keep-all"?d.map(function(A,v){return A&&n[v]>=19968&&n[v]<=40959}):void 0;return[s,u,p]},Z3=function(){function n(t,i,s,u){this.codePoints=t,this.required=i===Gv,this.start=s,this.end=u}return n.prototype.slice=function(){return on.apply(void 0,this.codePoints.slice(this.start,this.end))},n}(),W3=function(n,t){var i=ep(n),s=X3(i,t),u=s[0],d=s[1],p=s[2],A=i.length,v=0,C=0;return{next:function(){if(C>=A)return{done:!0,value:null};for(var F=Es;C<A&&(F=G3(i,d,u,++C,p))===Es;);if(F!==Es||C===A){var E=new Z3(i,F,v,C);return v=C,{value:E,done:!1}}return{done:!0,value:null}}}},Y3=1,J3=2,Eh=4,Jv=8,up=10,tw=47,Th=92,tF=9,eF=32,hp=34,Uh=61,rF=35,iF=36,nF=37,dp=39,pp=40,Ph=41,sF=95,Ys=45,oF=33,aF=60,AF=62,lF=64,cF=91,uF=93,hF=61,dF=123,fp=63,pF=125,ew=124,fF=126,gF=128,rw=65533,tm=42,gc=43,mF=44,yF=58,vF=59,Lh=46,wF=0,_F=8,bF=11,xF=14,BF=31,CF=127,rA=-1,iw=48,nw=97,sw=101,FF=102,SF=117,IF=122,ow=65,aw=69,Aw=70,EF=85,TF=90,Ts=function(n){return n>=iw&&n<=57},UF=function(n){return n>=55296&&n<=57343},uu=function(n){return Ts(n)||n>=ow&&n<=Aw||n>=nw&&n<=FF},PF=function(n){return n>=nw&&n<=IF},LF=function(n){return n>=ow&&n<=TF},QF=function(n){return PF(n)||LF(n)},kF=function(n){return n>=gF},gp=function(n){return n===up||n===tF||n===eF},mp=function(n){return QF(n)||kF(n)||n===sF},lw=function(n){return mp(n)||Ts(n)||n===Ys},MF=function(n){return n>=wF&&n<=_F||n===bF||n>=xF&&n<=BF||n===CF},kl=function(n,t){return n!==Th?!1:t!==up},yp=function(n,t,i){return n===Ys?mp(t)||kl(t,i):mp(n)?!0:!!(n===Th&&kl(n,t))},em=function(n,t,i){return n===gc||n===Ys?Ts(t)?!0:t===Lh&&Ts(i):Ts(n===Lh?t:n)},DF=function(n){var t=0,i=1;(n[t]===gc||n[t]===Ys)&&(n[t]===Ys&&(i=-1),t++);for(var s=[];Ts(n[t]);)s.push(n[t++]);var u=s.length?parseInt(on.apply(void 0,s),10):0;n[t]===Lh&&t++;for(var d=[];Ts(n[t]);)d.push(n[t++]);var p=d.length,A=p?parseInt(on.apply(void 0,d),10):0;(n[t]===aw||n[t]===sw)&&t++;var v=1;(n[t]===gc||n[t]===Ys)&&(n[t]===Ys&&(v=-1),t++);for(var C=[];Ts(n[t]);)C.push(n[t++]);var F=C.length?parseInt(on.apply(void 0,C),10):0;return i*(u+A*Math.pow(10,-p))*Math.pow(10,v*F)},NF={type:2},OF={type:3},RF={type:4},zF={type:13},HF={type:8},VF={type:21},jF={type:9},KF={type:10},$F={type:11},qF={type:12},GF={type:14},vp={type:23},XF={type:1},ZF={type:25},WF={type:24},YF={type:26},JF={type:27},tS={type:28},eS={type:29},rS={type:31},rm={type:32},cw=function(){function n(){this._value=[]}return n.prototype.write=function(t){this._value=this._value.concat(ep(t))},n.prototype.read=function(){for(var t=[],i=this.consumeToken();i!==rm;)t.push(i),i=this.consumeToken();return t},n.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case hp:return this.consumeStringToken(hp);case rF:var i=this.peekCodePoint(0),s=this.peekCodePoint(1),u=this.peekCodePoint(2);if(lw(i)||kl(s,u)){var d=yp(i,s,u)?J3:Y3,p=this.consumeName();return{type:5,value:p,flags:d}}break;case iF:if(this.peekCodePoint(0)===Uh)return this.consumeCodePoint(),zF;break;case dp:return this.consumeStringToken(dp);case pp:return NF;case Ph:return OF;case tm:if(this.peekCodePoint(0)===Uh)return this.consumeCodePoint(),GF;break;case gc:if(em(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case mF:return RF;case Ys:var A=t,v=this.peekCodePoint(0),C=this.peekCodePoint(1);if(em(A,v,C))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(yp(A,v,C))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(v===Ys&&C===AF)return this.consumeCodePoint(),this.consumeCodePoint(),WF;break;case Lh:if(em(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case tw:if(this.peekCodePoint(0)===tm)for(this.consumeCodePoint();;){var F=this.consumeCodePoint();if(F===tm&&(F=this.consumeCodePoint(),F===tw))return this.consumeToken();if(F===rA)return this.consumeToken()}break;case yF:return YF;case vF:return JF;case aF:if(this.peekCodePoint(0)===oF&&this.peekCodePoint(1)===Ys&&this.peekCodePoint(2)===Ys)return this.consumeCodePoint(),this.consumeCodePoint(),ZF;break;case lF:var E=this.peekCodePoint(0),Q=this.peekCodePoint(1),T=this.peekCodePoint(2);if(yp(E,Q,T)){var p=this.consumeName();return{type:7,value:p}}break;case cF:return tS;case Th:if(kl(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case uF:return eS;case hF:if(this.peekCodePoint(0)===Uh)return this.consumeCodePoint(),HF;break;case dF:return $F;case pF:return qF;case SF:case EF:var V=this.peekCodePoint(0),R=this.peekCodePoint(1);return V===gc&&(uu(R)||R===fp)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case ew:if(this.peekCodePoint(0)===Uh)return this.consumeCodePoint(),jF;if(this.peekCodePoint(0)===ew)return this.consumeCodePoint(),VF;break;case fF:if(this.peekCodePoint(0)===Uh)return this.consumeCodePoint(),KF;break;case rA:return rm}return gp(t)?(this.consumeWhiteSpace(),rS):Ts(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):mp(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:on(t)}},n.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},n.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},n.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},n.prototype.consumeUnicodeRangeToken=function(){for(var t=[],i=this.consumeCodePoint();uu(i)&&t.length<6;)t.push(i),i=this.consumeCodePoint();for(var s=!1;i===fp&&t.length<6;)t.push(i),i=this.consumeCodePoint(),s=!0;if(s){var u=parseInt(on.apply(void 0,t.map(function(v){return v===fp?iw:v})),16),d=parseInt(on.apply(void 0,t.map(function(v){return v===fp?Aw:v})),16);return{type:30,start:u,end:d}}var p=parseInt(on.apply(void 0,t),16);if(this.peekCodePoint(0)===Ys&&uu(this.peekCodePoint(1))){this.consumeCodePoint(),i=this.consumeCodePoint();for(var A=[];uu(i)&&A.length<6;)A.push(i),i=this.consumeCodePoint();var d=parseInt(on.apply(void 0,A),16);return{type:30,start:p,end:d}}else return{type:30,start:p,end:p}},n.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===pp?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===pp?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},n.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===rA)return{type:22,value:""};var i=this.peekCodePoint(0);if(i===dp||i===hp){var s=this.consumeStringToken(this.consumeCodePoint());return s.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===rA||this.peekCodePoint(0)===Ph)?(this.consumeCodePoint(),{type:22,value:s.value}):(this.consumeBadUrlRemnants(),vp)}for(;;){var u=this.consumeCodePoint();if(u===rA||u===Ph)return{type:22,value:on.apply(void 0,t)};if(gp(u))return this.consumeWhiteSpace(),this.peekCodePoint(0)===rA||this.peekCodePoint(0)===Ph?(this.consumeCodePoint(),{type:22,value:on.apply(void 0,t)}):(this.consumeBadUrlRemnants(),vp);if(u===hp||u===dp||u===pp||MF(u))return this.consumeBadUrlRemnants(),vp;if(u===Th)if(kl(u,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),vp;else t.push(u)}},n.prototype.consumeWhiteSpace=function(){for(;gp(this.peekCodePoint(0));)this.consumeCodePoint()},n.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===Ph||t===rA)return;kl(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},n.prototype.consumeStringSlice=function(t){for(var i=5e4,s="";t>0;){var u=Math.min(i,t);s+=on.apply(void 0,this._value.splice(0,u)),t-=u}return this._value.shift(),s},n.prototype.consumeStringToken=function(t){var i="",s=0;do{var u=this._value[s];if(u===rA||u===void 0||u===t)return i+=this.consumeStringSlice(s),{type:0,value:i};if(u===up)return this._value.splice(0,s),XF;if(u===Th){var d=this._value[s+1];d!==rA&&d!==void 0&&(d===up?(i+=this.consumeStringSlice(s),s=-1,this._value.shift()):kl(u,d)&&(i+=this.consumeStringSlice(s),i+=on(this.consumeEscapedCodePoint()),s=-1))}s++}while(!0)},n.prototype.consumeNumber=function(){var t=[],i=Eh,s=this.peekCodePoint(0);for((s===gc||s===Ys)&&t.push(this.consumeCodePoint());Ts(this.peekCodePoint(0));)t.push(this.consumeCodePoint());s=this.peekCodePoint(0);var u=this.peekCodePoint(1);if(s===Lh&&Ts(u))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),i=Jv;Ts(this.peekCodePoint(0));)t.push(this.consumeCodePoint());s=this.peekCodePoint(0),u=this.peekCodePoint(1);var d=this.peekCodePoint(2);if((s===aw||s===sw)&&((u===gc||u===Ys)&&Ts(d)||Ts(u)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),i=Jv;Ts(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[DF(t),i]},n.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),i=t[0],s=t[1],u=this.peekCodePoint(0),d=this.peekCodePoint(1),p=this.peekCodePoint(2);if(yp(u,d,p)){var A=this.consumeName();return{type:15,number:i,flags:s,unit:A}}return u===nF?(this.consumeCodePoint(),{type:16,number:i,flags:s}):{type:17,number:i,flags:s}},n.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(uu(t)){for(var i=on(t);uu(this.peekCodePoint(0))&&i.length<6;)i+=on(this.consumeCodePoint());gp(this.peekCodePoint(0))&&this.consumeCodePoint();var s=parseInt(i,16);return s===0||UF(s)||s>1114111?rw:s}return t===rA?rw:t},n.prototype.consumeName=function(){for(var t="";;){var i=this.consumeCodePoint();if(lw(i))t+=on(i);else if(kl(i,this.peekCodePoint(0)))t+=on(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(i),t}},n}(),uw=function(){function n(t){this._tokens=t}return n.create=function(t){var i=new cw;return i.write(t),new n(i.read())},n.parseValue=function(t){return n.create(t).parseComponentValue()},n.parseValues=function(t){return n.create(t).parseComponentValues()},n.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var i=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return i;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},n.prototype.parseComponentValues=function(){for(var t=[];;){var i=this.consumeComponentValue();if(i.type===32)return t;t.push(i),t.push()}},n.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},n.prototype.consumeSimpleBlock=function(t){for(var i={type:t,values:[]},s=this.consumeToken();;){if(s.type===32||nS(s,t))return i;this.reconsumeToken(s),i.values.push(this.consumeComponentValue()),s=this.consumeToken()}},n.prototype.consumeFunction=function(t){for(var i={name:t.value,values:[],type:18};;){var s=this.consumeToken();if(s.type===32||s.type===3)return i;this.reconsumeToken(s),i.values.push(this.consumeComponentValue())}},n.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?rm:t},n.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},n}(),Qh=function(n){return n.type===15},hu=function(n){return n.type===17},xi=function(n){return n.type===20},iS=function(n){return n.type===0},im=function(n,t){return xi(n)&&n.value===t},hw=function(n){return n.type!==31},du=function(n){return n.type!==31&&n.type!==4},iA=function(n){var t=[],i=[];return n.forEach(function(s){if(s.type===4){if(i.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(i),i=[];return}s.type!==31&&i.push(s)}),i.length&&t.push(i),t},nS=function(n,t){return t===11&&n.type===12||t===28&&n.type===29?!0:t===2&&n.type===3},Ml=function(n){return n.type===17||n.type===15},gn=function(n){return n.type===16||Ml(n)},dw=function(n){return n.length>1?[n[0],n[1]]:[n[0]]},Zn={type:17,number:0,flags:Eh},nm={type:16,number:50,flags:Eh},Dl={type:16,number:100,flags:Eh},kh=function(n,t,i){var s=n[0],u=n[1];return[Ui(s,t),Ui(typeof u<"u"?u:s,i)]},Ui=function(n,t){if(n.type===16)return n.number/100*t;if(Qh(n))switch(n.unit){case"rem":case"em":return 16*n.number;case"px":default:return n.number}return n.number},pw="deg",fw="grad",gw="rad",mw="turn",wp={name:"angle",parse:function(n,t){if(t.type===15)switch(t.unit){case pw:return Math.PI*t.number/180;case fw:return Math.PI/200*t.number;case gw:return t.number;case mw:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},yw=function(n){return n.type===15&&(n.unit===pw||n.unit===fw||n.unit===gw||n.unit===mw)},vw=function(n){var t=n.filter(xi).map(function(i){return i.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Zn,Zn];case"to top":case"bottom":return No(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Zn,Dl];case"to right":case"left":return No(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Dl,Dl];case"to bottom":case"top":return No(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Dl,Zn];case"to left":case"right":return No(270)}return 0},No=function(n){return Math.PI*n/180},Nl={name:"color",parse:function(n,t){if(t.type===18){var i=sS[t.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return i(n,t.values)}if(t.type===5){if(t.value.length===3){var s=t.value.substring(0,1),u=t.value.substring(1,2),d=t.value.substring(2,3);return Rl(parseInt(s+s,16),parseInt(u+u,16),parseInt(d+d,16),1)}if(t.value.length===4){var s=t.value.substring(0,1),u=t.value.substring(1,2),d=t.value.substring(2,3),p=t.value.substring(3,4);return Rl(parseInt(s+s,16),parseInt(u+u,16),parseInt(d+d,16),parseInt(p+p,16)/255)}if(t.value.length===6){var s=t.value.substring(0,2),u=t.value.substring(2,4),d=t.value.substring(4,6);return Rl(parseInt(s,16),parseInt(u,16),parseInt(d,16),1)}if(t.value.length===8){var s=t.value.substring(0,2),u=t.value.substring(2,4),d=t.value.substring(4,6),p=t.value.substring(6,8);return Rl(parseInt(s,16),parseInt(u,16),parseInt(d,16),parseInt(p,16)/255)}}if(t.type===20){var A=ZA[t.value.toUpperCase()];if(typeof A<"u")return A}return ZA.TRANSPARENT}},Ol=function(n){return(255&n)===0},Nn=function(n){var t=255&n,i=255&n>>8,s=255&n>>16,u=255&n>>24;return t<255?"rgba("+u+","+s+","+i+","+t/255+")":"rgb("+u+","+s+","+i+")"},Rl=function(n,t,i,s){return(n<<24|t<<16|i<<8|Math.round(s*255)<<0)>>>0},ww=function(n,t){if(n.type===17)return n.number;if(n.type===16){var i=t===3?1:255;return t===3?n.number/100*i:Math.round(n.number/100*i)}return 0},_w=function(n,t){var i=t.filter(du);if(i.length===3){var s=i.map(ww),u=s[0],d=s[1],p=s[2];return Rl(u,d,p,1)}if(i.length===4){var A=i.map(ww),u=A[0],d=A[1],p=A[2],v=A[3];return Rl(u,d,p,v)}return 0};function sm(n,t,i){return i<0&&(i+=1),i>=1&&(i-=1),i<1/6?(t-n)*i*6+n:i<1/2?t:i<2/3?(t-n)*6*(2/3-i)+n:n}var bw=function(n,t){var i=t.filter(du),s=i[0],u=i[1],d=i[2],p=i[3],A=(s.type===17?No(s.number):wp.parse(n,s))/(Math.PI*2),v=gn(u)?u.number/100:0,C=gn(d)?d.number/100:0,F=typeof p<"u"&&gn(p)?Ui(p,1):1;if(v===0)return Rl(C*255,C*255,C*255,1);var E=C<=.5?C*(v+1):C+v-C*v,Q=C*2-E,T=sm(Q,E,A+1/3),V=sm(Q,E,A),R=sm(Q,E,A-1/3);return Rl(T*255,V*255,R*255,F)},sS={hsl:bw,hsla:bw,rgb:_w,rgba:_w},Mh=function(n,t){return Nl.parse(n,uw.create(t).parseComponentValue())},ZA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},oS={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(n,t){return t.map(function(i){if(xi(i))switch(i.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},aS={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},_p=function(n,t){var i=Nl.parse(n,t[0]),s=t[1];return s&&gn(s)?{color:i,stop:s}:{color:i,stop:null}},xw=function(n,t){var i=n[0],s=n[n.length-1];i.stop===null&&(i.stop=Zn),s.stop===null&&(s.stop=Dl);for(var u=[],d=0,p=0;p<n.length;p++){var A=n[p].stop;if(A!==null){var v=Ui(A,t);v>d?u.push(v):u.push(d),d=v}else u.push(null)}for(var C=null,p=0;p<u.length;p++){var F=u[p];if(F===null)C===null&&(C=p);else if(C!==null){for(var E=p-C,Q=u[C-1],T=(F-Q)/(E+1),V=1;V<=E;V++)u[C+V-1]=T*V;C=null}}return n.map(function(R,W){var j=R.color;return{color:j,stop:Math.max(Math.min(1,u[W]/t),0)}})},AS=function(n,t,i){var s=t/2,u=i/2,d=Ui(n[0],t)-s,p=u-Ui(n[1],i);return(Math.atan2(p,d)+Math.PI*2)%(Math.PI*2)},lS=function(n,t,i){var s=typeof n=="number"?n:AS(n,t,i),u=Math.abs(t*Math.sin(s))+Math.abs(i*Math.cos(s)),d=t/2,p=i/2,A=u/2,v=Math.sin(s-Math.PI/2)*A,C=Math.cos(s-Math.PI/2)*A;return[u,d-C,d+C,p-v,p+v]},ma=function(n,t){return Math.sqrt(n*n+t*t)},Bw=function(n,t,i,s,u){var d=[[0,0],[0,t],[n,0],[n,t]];return d.reduce(function(p,A){var v=A[0],C=A[1],F=ma(i-v,s-C);return(u?F<p.optimumDistance:F>p.optimumDistance)?{optimumCorner:A,optimumDistance:F}:p},{optimumDistance:u?1/0:-1/0,optimumCorner:null}).optimumCorner},cS=function(n,t,i,s,u){var d=0,p=0;switch(n.size){case 0:n.shape===0?d=p=Math.min(Math.abs(t),Math.abs(t-s),Math.abs(i),Math.abs(i-u)):n.shape===1&&(d=Math.min(Math.abs(t),Math.abs(t-s)),p=Math.min(Math.abs(i),Math.abs(i-u)));break;case 2:if(n.shape===0)d=p=Math.min(ma(t,i),ma(t,i-u),ma(t-s,i),ma(t-s,i-u));else if(n.shape===1){var A=Math.min(Math.abs(i),Math.abs(i-u))/Math.min(Math.abs(t),Math.abs(t-s)),v=Bw(s,u,t,i,!0),C=v[0],F=v[1];d=ma(C-t,(F-i)/A),p=A*d}break;case 1:n.shape===0?d=p=Math.max(Math.abs(t),Math.abs(t-s),Math.abs(i),Math.abs(i-u)):n.shape===1&&(d=Math.max(Math.abs(t),Math.abs(t-s)),p=Math.max(Math.abs(i),Math.abs(i-u)));break;case 3:if(n.shape===0)d=p=Math.max(ma(t,i),ma(t,i-u),ma(t-s,i),ma(t-s,i-u));else if(n.shape===1){var A=Math.max(Math.abs(i),Math.abs(i-u))/Math.max(Math.abs(t),Math.abs(t-s)),E=Bw(s,u,t,i,!1),C=E[0],F=E[1];d=ma(C-t,(F-i)/A),p=A*d}break}return Array.isArray(n.size)&&(d=Ui(n.size[0],s),p=n.size.length===2?Ui(n.size[1],u):d),[d,p]},uS=function(n,t){var i=No(180),s=[];return iA(t).forEach(function(u,d){if(d===0){var p=u[0];if(p.type===20&&p.value==="to"){i=vw(u);return}else if(yw(p)){i=wp.parse(n,p);return}}var A=_p(n,u);s.push(A)}),{angle:i,stops:s,type:1}},bp=function(n,t){var i=No(180),s=[];return iA(t).forEach(function(u,d){if(d===0){var p=u[0];if(p.type===20&&["top","left","right","bottom"].indexOf(p.value)!==-1){i=vw(u);return}else if(yw(p)){i=(wp.parse(n,p)+No(270))%No(360);return}}var A=_p(n,u);s.push(A)}),{angle:i,stops:s,type:1}},hS=function(n,t){var i=No(180),s=[],u=1,d=0,p=3,A=[];return iA(t).forEach(function(v,C){var F=v[0];if(C===0){if(xi(F)&&F.value==="linear"){u=1;return}else if(xi(F)&&F.value==="radial"){u=2;return}}if(F.type===18){if(F.name==="from"){var E=Nl.parse(n,F.values[0]);s.push({stop:Zn,color:E})}else if(F.name==="to"){var E=Nl.parse(n,F.values[0]);s.push({stop:Dl,color:E})}else if(F.name==="color-stop"){var Q=F.values.filter(du);if(Q.length===2){var E=Nl.parse(n,Q[1]),T=Q[0];hu(T)&&s.push({stop:{type:16,number:T.number*100,flags:T.flags},color:E})}}}}),u===1?{angle:(i+No(180))%No(360),stops:s,type:u}:{size:p,shape:d,stops:s,position:A,type:u}},Cw="closest-side",Fw="farthest-side",Sw="closest-corner",Iw="farthest-corner",Ew="circle",Tw="ellipse",Uw="cover",Pw="contain",dS=function(n,t){var i=0,s=3,u=[],d=[];return iA(t).forEach(function(p,A){var v=!0;if(A===0){var C=!1;v=p.reduce(function(E,Q){if(C)if(xi(Q))switch(Q.value){case"center":return d.push(nm),E;case"top":case"left":return d.push(Zn),E;case"right":case"bottom":return d.push(Dl),E}else(gn(Q)||Ml(Q))&&d.push(Q);else if(xi(Q))switch(Q.value){case Ew:return i=0,!1;case Tw:return i=1,!1;case"at":return C=!0,!1;case Cw:return s=0,!1;case Uw:case Fw:return s=1,!1;case Pw:case Sw:return s=2,!1;case Iw:return s=3,!1}else if(Ml(Q)||gn(Q))return Array.isArray(s)||(s=[]),s.push(Q),!1;return E},v)}if(v){var F=_p(n,p);u.push(F)}}),{size:s,shape:i,stops:u,position:d,type:2}},xp=function(n,t){var i=0,s=3,u=[],d=[];return iA(t).forEach(function(p,A){var v=!0;if(A===0?v=p.reduce(function(F,E){if(xi(E))switch(E.value){case"center":return d.push(nm),!1;case"top":case"left":return d.push(Zn),!1;case"right":case"bottom":return d.push(Dl),!1}else if(gn(E)||Ml(E))return d.push(E),!1;return F},v):A===1&&(v=p.reduce(function(F,E){if(xi(E))switch(E.value){case Ew:return i=0,!1;case Tw:return i=1,!1;case Pw:case Cw:return s=0,!1;case Fw:return s=1,!1;case Sw:return s=2,!1;case Uw:case Iw:return s=3,!1}else if(Ml(E)||gn(E))return Array.isArray(s)||(s=[]),s.push(E),!1;return F},v)),v){var C=_p(n,p);u.push(C)}}),{size:s,shape:i,stops:u,position:d,type:2}},pS=function(n){return n.type===1},fS=function(n){return n.type===2},om={name:"image",parse:function(n,t){if(t.type===22){var i={url:t.value,type:0};return n.cache.addImage(t.value),i}if(t.type===18){var s=Lw[t.name];if(typeof s>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return s(n,t.values)}throw new Error("Unsupported image type "+t.type)}};function gS(n){return!(n.type===20&&n.value==="none")&&(n.type!==18||!!Lw[n.name])}var Lw={"linear-gradient":uS,"-moz-linear-gradient":bp,"-ms-linear-gradient":bp,"-o-linear-gradient":bp,"-webkit-linear-gradient":bp,"radial-gradient":dS,"-moz-radial-gradient":xp,"-ms-radial-gradient":xp,"-o-radial-gradient":xp,"-webkit-radial-gradient":xp,"-webkit-gradient":hS},mS={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(n,t){if(t.length===0)return[];var i=t[0];return i.type===20&&i.value==="none"?[]:t.filter(function(s){return du(s)&&gS(s)}).map(function(s){return om.parse(n,s)})}},yS={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(n,t){return t.map(function(i){if(xi(i))switch(i.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},vS={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(n,t){return iA(t).map(function(i){return i.filter(gn)}).map(dw)}},wS={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(n,t){return iA(t).map(function(i){return i.filter(xi).map(function(s){return s.value}).join(" ")}).map(_S)}},_S=function(n){switch(n){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},pu;(function(n){n.AUTO="auto",n.CONTAIN="contain",n.COVER="cover"})(pu||(pu={}));var bS={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(n,t){return iA(t).map(function(i){return i.filter(xS)})}},xS=function(n){return xi(n)||gn(n)},Bp=function(n){return{name:"border-"+n+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},BS=Bp("top"),CS=Bp("right"),FS=Bp("bottom"),SS=Bp("left"),Cp=function(n){return{name:"border-radius-"+n,initialValue:"0 0",prefix:!1,type:1,parse:function(t,i){return dw(i.filter(gn))}}},IS=Cp("top-left"),ES=Cp("top-right"),TS=Cp("bottom-right"),US=Cp("bottom-left"),Fp=function(n){return{name:"border-"+n+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,i){switch(i){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},PS=Fp("top"),LS=Fp("right"),QS=Fp("bottom"),kS=Fp("left"),Sp=function(n){return{name:"border-"+n+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,i){return Qh(i)?i.number:0}}},MS=Sp("top"),DS=Sp("right"),NS=Sp("bottom"),OS=Sp("left"),RS={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},zS={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(n,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},HS={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(n,t){return t.filter(xi).reduce(function(i,s){return i|VS(s.value)},0)}},VS=function(n){switch(n){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},jS={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(n,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},KS={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(n,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},Ip;(function(n){n.NORMAL="normal",n.STRICT="strict"})(Ip||(Ip={}));var $S={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,t){switch(t){case"strict":return Ip.STRICT;case"normal":default:return Ip.NORMAL}}},qS={name:"line-height",initialValue:"normal",prefix:!1,type:4},Qw=function(n,t){return xi(n)&&n.value==="normal"?1.2*t:n.type===17?t*n.number:gn(n)?Ui(n,t):t},GS={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(n,t){return t.type===20&&t.value==="none"?null:om.parse(n,t)}},XS={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(n,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},am={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(n,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Ep=function(n){return{name:"margin-"+n,initialValue:"0",prefix:!1,type:4}},ZS=Ep("top"),WS=Ep("right"),YS=Ep("bottom"),JS=Ep("left"),tI={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(n,t){return t.filter(xi).map(function(i){switch(i.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},eI={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(n,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},Tp=function(n){return{name:"padding-"+n,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},rI=Tp("top"),iI=Tp("right"),nI=Tp("bottom"),sI=Tp("left"),oI={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(n,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},aI={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(n,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},AI={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,t){return t.length===1&&im(t[0],"none")?[]:iA(t).map(function(i){for(var s={color:ZA.TRANSPARENT,offsetX:Zn,offsetY:Zn,blur:Zn},u=0,d=0;d<i.length;d++){var p=i[d];Ml(p)?(u===0?s.offsetX=p:u===1?s.offsetY=p:s.blur=p,u++):s.color=Nl.parse(n,p)}return s})}},lI={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(n,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},cI={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(n,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var i=dI[t.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return i(t.values)}return null}},uI=function(n){var t=n.filter(function(i){return i.type===17}).map(function(i){return i.number});return t.length===6?t:null},hI=function(n){var t=n.filter(function(v){return v.type===17}).map(function(v){return v.number}),i=t[0],s=t[1];t[2],t[3];var u=t[4],d=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var p=t[12],A=t[13];return t[14],t[15],t.length===16?[i,s,u,d,p,A]:null},dI={matrix:uI,matrix3d:hI},kw={type:16,number:50,flags:Eh},pI=[kw,kw],fI={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(n,t){var i=t.filter(gn);return i.length!==2?pI:[i[0],i[1]]}},gI={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(n,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Dh;(function(n){n.NORMAL="normal",n.BREAK_ALL="break-all",n.KEEP_ALL="keep-all"})(Dh||(Dh={}));for(var mI={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,t){switch(t){case"break-all":return Dh.BREAK_ALL;case"keep-all":return Dh.KEEP_ALL;case"normal":default:return Dh.NORMAL}}},yI={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(n,t){if(t.type===20)return{auto:!0,order:0};if(hu(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},Mw={name:"time",parse:function(n,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},vI={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(n,t){return hu(t)?t.number:1}},wI={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},_I={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(n,t){return t.filter(xi).map(function(i){switch(i.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(i){return i!==0})}},bI={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(n,t){var i=[],s=[];return t.forEach(function(u){switch(u.type){case 20:case 0:i.push(u.value);break;case 17:i.push(u.number.toString());break;case 4:s.push(i.join(" ")),i.length=0;break}}),i.length&&s.push(i.join(" ")),s.map(function(u){return u.indexOf(" ")===-1?u:"'"+u+"'"})}},xI={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},BI={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(n,t){if(hu(t))return t.number;if(xi(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},CI={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(n,t){return t.filter(xi).map(function(i){return i.value})}},FI={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(n,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},En=function(n,t){return(n&t)!==0},SI={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(n,t){if(t.length===0)return[];var i=t[0];return i.type===20&&i.value==="none"?[]:t}},II={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(n,t){if(t.length===0)return null;var i=t[0];if(i.type===20&&i.value==="none")return null;for(var s=[],u=t.filter(hw),d=0;d<u.length;d++){var p=u[d],A=u[d+1];if(p.type===20){var v=A&&hu(A)?A.number:1;s.push({counter:p.value,increment:v})}}return s}},EI={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(n,t){if(t.length===0)return[];for(var i=[],s=t.filter(hw),u=0;u<s.length;u++){var d=s[u],p=s[u+1];if(xi(d)&&d.value!=="none"){var A=p&&hu(p)?p.number:0;i.push({counter:d.value,reset:A})}}return i}},TI={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(n,t){return t.filter(Qh).map(function(i){return Mw.parse(n,i)})}},UI={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(n,t){if(t.length===0)return null;var i=t[0];if(i.type===20&&i.value==="none")return null;var s=[],u=t.filter(iS);if(u.length%2!==0)return null;for(var d=0;d<u.length;d+=2){var p=u[d].value,A=u[d+1].value;s.push({open:p,close:A})}return s}},Dw=function(n,t,i){if(!n)return"";var s=n[Math.min(t,n.length-1)];return s?i?s.open:s.close:""},PI={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,t){return t.length===1&&im(t[0],"none")?[]:iA(t).map(function(i){for(var s={color:255,offsetX:Zn,offsetY:Zn,blur:Zn,spread:Zn,inset:!1},u=0,d=0;d<i.length;d++){var p=i[d];im(p,"inset")?s.inset=!0:Ml(p)?(u===0?s.offsetX=p:u===1?s.offsetY=p:u===2?s.blur=p:s.spread=p,u++):s.color=Nl.parse(n,p)}return s})}},LI={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(n,t){var i=[0,1,2],s=[];return t.filter(xi).forEach(function(u){switch(u.value){case"stroke":s.push(1);break;case"fill":s.push(0);break;case"markers":s.push(2);break}}),i.forEach(function(u){s.indexOf(u)===-1&&s.push(u)}),s}},QI={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},kI={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(n,t){return Qh(t)?t.number:0}},MI=function(){function n(t,i){var s,u;this.animationDuration=We(t,TI,i.animationDuration),this.backgroundClip=We(t,oS,i.backgroundClip),this.backgroundColor=We(t,aS,i.backgroundColor),this.backgroundImage=We(t,mS,i.backgroundImage),this.backgroundOrigin=We(t,yS,i.backgroundOrigin),this.backgroundPosition=We(t,vS,i.backgroundPosition),this.backgroundRepeat=We(t,wS,i.backgroundRepeat),this.backgroundSize=We(t,bS,i.backgroundSize),this.borderTopColor=We(t,BS,i.borderTopColor),this.borderRightColor=We(t,CS,i.borderRightColor),this.borderBottomColor=We(t,FS,i.borderBottomColor),this.borderLeftColor=We(t,SS,i.borderLeftColor),this.borderTopLeftRadius=We(t,IS,i.borderTopLeftRadius),this.borderTopRightRadius=We(t,ES,i.borderTopRightRadius),this.borderBottomRightRadius=We(t,TS,i.borderBottomRightRadius),this.borderBottomLeftRadius=We(t,US,i.borderBottomLeftRadius),this.borderTopStyle=We(t,PS,i.borderTopStyle),this.borderRightStyle=We(t,LS,i.borderRightStyle),this.borderBottomStyle=We(t,QS,i.borderBottomStyle),this.borderLeftStyle=We(t,kS,i.borderLeftStyle),this.borderTopWidth=We(t,MS,i.borderTopWidth),this.borderRightWidth=We(t,DS,i.borderRightWidth),this.borderBottomWidth=We(t,NS,i.borderBottomWidth),this.borderLeftWidth=We(t,OS,i.borderLeftWidth),this.boxShadow=We(t,PI,i.boxShadow),this.color=We(t,RS,i.color),this.direction=We(t,zS,i.direction),this.display=We(t,HS,i.display),this.float=We(t,jS,i.cssFloat),this.fontFamily=We(t,bI,i.fontFamily),this.fontSize=We(t,xI,i.fontSize),this.fontStyle=We(t,FI,i.fontStyle),this.fontVariant=We(t,CI,i.fontVariant),this.fontWeight=We(t,BI,i.fontWeight),this.letterSpacing=We(t,KS,i.letterSpacing),this.lineBreak=We(t,$S,i.lineBreak),this.lineHeight=We(t,qS,i.lineHeight),this.listStyleImage=We(t,GS,i.listStyleImage),this.listStylePosition=We(t,XS,i.listStylePosition),this.listStyleType=We(t,am,i.listStyleType),this.marginTop=We(t,ZS,i.marginTop),this.marginRight=We(t,WS,i.marginRight),this.marginBottom=We(t,YS,i.marginBottom),this.marginLeft=We(t,JS,i.marginLeft),this.opacity=We(t,vI,i.opacity);var d=We(t,tI,i.overflow);this.overflowX=d[0],this.overflowY=d[d.length>1?1:0],this.overflowWrap=We(t,eI,i.overflowWrap),this.paddingTop=We(t,rI,i.paddingTop),this.paddingRight=We(t,iI,i.paddingRight),this.paddingBottom=We(t,nI,i.paddingBottom),this.paddingLeft=We(t,sI,i.paddingLeft),this.paintOrder=We(t,LI,i.paintOrder),this.position=We(t,aI,i.position),this.textAlign=We(t,oI,i.textAlign),this.textDecorationColor=We(t,wI,(s=i.textDecorationColor)!==null&&s!==void 0?s:i.color),this.textDecorationLine=We(t,_I,(u=i.textDecorationLine)!==null&&u!==void 0?u:i.textDecoration),this.textShadow=We(t,AI,i.textShadow),this.textTransform=We(t,lI,i.textTransform),this.transform=We(t,cI,i.transform),this.transformOrigin=We(t,fI,i.transformOrigin),this.visibility=We(t,gI,i.visibility),this.webkitTextStrokeColor=We(t,QI,i.webkitTextStrokeColor),this.webkitTextStrokeWidth=We(t,kI,i.webkitTextStrokeWidth),this.wordBreak=We(t,mI,i.wordBreak),this.zIndex=We(t,yI,i.zIndex)}return n.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},n.prototype.isTransparent=function(){return Ol(this.backgroundColor)},n.prototype.isTransformed=function(){return this.transform!==null},n.prototype.isPositioned=function(){return this.position!==0},n.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},n.prototype.isFloating=function(){return this.float!==0},n.prototype.isInlineLevel=function(){return En(this.display,4)||En(this.display,33554432)||En(this.display,268435456)||En(this.display,536870912)||En(this.display,67108864)||En(this.display,134217728)},n}(),DI=function(){function n(t,i){this.content=We(t,SI,i.content),this.quotes=We(t,UI,i.quotes)}return n}(),Nw=function(){function n(t,i){this.counterIncrement=We(t,II,i.counterIncrement),this.counterReset=We(t,EI,i.counterReset)}return n}(),We=function(n,t,i){var s=new cw,u=i!==null&&typeof i<"u"?i.toString():t.initialValue;s.write(u);var d=new uw(s.read());switch(t.type){case 2:var p=d.parseComponentValue();return t.parse(n,xi(p)?p.value:t.initialValue);case 0:return t.parse(n,d.parseComponentValue());case 1:return t.parse(n,d.parseComponentValues());case 4:return d.parseComponentValue();case 3:switch(t.format){case"angle":return wp.parse(n,d.parseComponentValue());case"color":return Nl.parse(n,d.parseComponentValue());case"image":return om.parse(n,d.parseComponentValue());case"length":var A=d.parseComponentValue();return Ml(A)?A:Zn;case"length-percentage":var v=d.parseComponentValue();return gn(v)?v:Zn;case"time":return Mw.parse(n,d.parseComponentValue())}break}},NI="data-html2canvas-debug",OI=function(n){var t=n.getAttribute(NI);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Am=function(n,t){var i=OI(n);return i===1||t===i},nA=function(){function n(t,i){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,Am(i,3))debugger;this.styles=new MI(t,window.getComputedStyle(i,null)),_m(i)&&(this.styles.animationDuration.some(function(s){return s>0})&&(i.style.animationDuration="0s"),this.styles.transform!==null&&(i.style.transform="none")),this.bounds=tp(this.context,i),Am(i,4)&&(this.flags|=16)}return n}(),RI="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Ow="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Nh=typeof Uint8Array>"u"?[]:new Uint8Array(256),Up=0;Up<Ow.length;Up++)Nh[Ow.charCodeAt(Up)]=Up;for(var zI=function(n){var t=n.length*.75,i=n.length,s,u=0,d,p,A,v;n[n.length-1]==="="&&(t--,n[n.length-2]==="="&&t--);var C=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),F=Array.isArray(C)?C:new Uint8Array(C);for(s=0;s<i;s+=4)d=Nh[n.charCodeAt(s)],p=Nh[n.charCodeAt(s+1)],A=Nh[n.charCodeAt(s+2)],v=Nh[n.charCodeAt(s+3)],F[u++]=d<<2|p>>4,F[u++]=(p&15)<<4|A>>2,F[u++]=(A&3)<<6|v&63;return C},HI=function(n){for(var t=n.length,i=[],s=0;s<t;s+=2)i.push(n[s+1]<<8|n[s]);return i},VI=function(n){for(var t=n.length,i=[],s=0;s<t;s+=4)i.push(n[s+3]<<24|n[s+2]<<16|n[s+1]<<8|n[s]);return i},mc=5,lm=11,cm=2,jI=lm-mc,Rw=65536>>mc,KI=1<<mc,um=KI-1,$I=1024>>mc,qI=Rw+$I,GI=qI,XI=32,ZI=GI+XI,WI=65536>>lm,YI=1<<jI,JI=YI-1,zw=function(n,t,i){return n.slice?n.slice(t,i):new Uint16Array(Array.prototype.slice.call(n,t,i))},tE=function(n,t,i){return n.slice?n.slice(t,i):new Uint32Array(Array.prototype.slice.call(n,t,i))},eE=function(n,t){var i=zI(n),s=Array.isArray(i)?VI(i):new Uint32Array(i),u=Array.isArray(i)?HI(i):new Uint16Array(i),d=24,p=zw(u,d/2,s[4]/2),A=s[5]===2?zw(u,(d+s[4])/2):tE(s,Math.ceil((d+s[4])/4));return new rE(s[0],s[1],s[2],s[3],p,A)},rE=function(){function n(t,i,s,u,d,p){this.initialValue=t,this.errorValue=i,this.highStart=s,this.highValueIndex=u,this.index=d,this.data=p}return n.prototype.get=function(t){var i;if(t>=0){if(t<55296||t>56319&&t<=65535)return i=this.index[t>>mc],i=(i<<cm)+(t&um),this.data[i];if(t<=65535)return i=this.index[Rw+(t-55296>>mc)],i=(i<<cm)+(t&um),this.data[i];if(t<this.highStart)return i=ZI-WI+(t>>lm),i=this.index[i],i+=t>>mc&JI,i=this.index[i],i=(i<<cm)+(t&um),this.data[i];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),Hw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",iE=typeof Uint8Array>"u"?[]:new Uint8Array(256),Pp=0;Pp<Hw.length;Pp++)iE[Hw.charCodeAt(Pp)]=Pp;var nE=1,hm=2,dm=3,Vw=4,jw=5,sE=7,Kw=8,pm=9,fm=10,$w=11,qw=12,Gw=13,Xw=14,gm=15,oE=function(n){for(var t=[],i=0,s=n.length;i<s;){var u=n.charCodeAt(i++);if(u>=55296&&u<=56319&&i<s){var d=n.charCodeAt(i++);(d&64512)===56320?t.push(((u&1023)<<10)+(d&1023)+65536):(t.push(u),i--)}else t.push(u)}return t},aE=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var i=n.length;if(!i)return"";for(var s=[],u=-1,d="";++u<i;){var p=n[u];p<=65535?s.push(p):(p-=65536,s.push((p>>10)+55296,p%1024+56320)),(u+1===i||s.length>16384)&&(d+=String.fromCharCode.apply(String,s),s.length=0)}return d},AE=eE(RI),yc="",Zw="",lE=function(n){return AE.get(n)},cE=function(n,t,i){var s=i-2,u=t[s],d=t[i-1],p=t[i];if(d===hm&&p===dm)return yc;if(d===hm||d===dm||d===Vw||p===hm||p===dm||p===Vw)return Zw;if(d===Kw&&[Kw,pm,$w,qw].indexOf(p)!==-1||(d===$w||d===pm)&&(p===pm||p===fm)||(d===qw||d===fm)&&p===fm||p===Gw||p===jw||p===sE||d===nE)return yc;if(d===Gw&&p===Xw){for(;u===jw;)u=t[--s];if(u===Xw)return yc}if(d===gm&&p===gm){for(var A=0;u===gm;)A++,u=t[--s];if(A%2===0)return yc}return Zw},uE=function(n){var t=oE(n),i=t.length,s=0,u=0,d=t.map(lE);return{next:function(){if(s>=i)return{done:!0,value:null};for(var p=yc;s<i&&(p=cE(t,d,++s))===yc;);if(p!==yc||s===i){var A=aE.apply(null,t.slice(u,s));return u=s,{value:A,done:!1}}return{done:!0,value:null}}}},hE=function(n){for(var t=uE(n),i=[],s;!(s=t.next()).done;)s.value&&i.push(s.value.slice());return i},dE=function(n){var t=123;if(n.createRange){var i=n.createRange();if(i.getBoundingClientRect){var s=n.createElement("boundtest");s.style.height=t+"px",s.style.display="block",n.body.appendChild(s),i.selectNode(s);var u=i.getBoundingClientRect(),d=Math.round(u.height);if(n.body.removeChild(s),d===t)return!0}}return!1},pE=function(n){var t=n.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",n.body.appendChild(t);var i=n.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var s=t.firstChild,u=ep(s.data).map(function(v){return on(v)}),d=0,p={},A=u.every(function(v,C){i.setStart(s,d),i.setEnd(s,d+v.length);var F=i.getBoundingClientRect();d+=v.length;var E=F.x>p.x||F.y>p.y;return p=F,C===0?!0:E});return n.body.removeChild(t),A},fE=function(){return typeof new Image().crossOrigin<"u"},gE=function(){return typeof new XMLHttpRequest().responseType=="string"},mE=function(n){var t=new Image,i=n.createElement("canvas"),s=i.getContext("2d");if(!s)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{s.drawImage(t,0,0),i.toDataURL()}catch{return!1}return!0},Ww=function(n){return n[0]===0&&n[1]===255&&n[2]===0&&n[3]===255},yE=function(n){var t=n.createElement("canvas"),i=100;t.width=i,t.height=i;var s=t.getContext("2d");if(!s)return Promise.reject(!1);s.fillStyle="rgb(0, 255, 0)",s.fillRect(0,0,i,i);var u=new Image,d=t.toDataURL();u.src=d;var p=mm(i,i,0,0,u);return s.fillStyle="red",s.fillRect(0,0,i,i),Yw(p).then(function(A){s.drawImage(A,0,0);var v=s.getImageData(0,0,i,i).data;s.fillStyle="red",s.fillRect(0,0,i,i);var C=n.createElement("div");return C.style.backgroundImage="url("+d+")",C.style.height=i+"px",Ww(v)?Yw(mm(i,i,0,0,C)):Promise.reject(!1)}).then(function(A){return s.drawImage(A,0,0),Ww(s.getImageData(0,0,i,i).data)}).catch(function(){return!1})},mm=function(n,t,i,s,u){var d="http://www.w3.org/2000/svg",p=document.createElementNS(d,"svg"),A=document.createElementNS(d,"foreignObject");return p.setAttributeNS(null,"width",n.toString()),p.setAttributeNS(null,"height",t.toString()),A.setAttributeNS(null,"width","100%"),A.setAttributeNS(null,"height","100%"),A.setAttributeNS(null,"x",i.toString()),A.setAttributeNS(null,"y",s.toString()),A.setAttributeNS(null,"externalResourcesRequired","true"),p.appendChild(A),A.appendChild(u),p},Yw=function(n){return new Promise(function(t,i){var s=new Image;s.onload=function(){return t(s)},s.onerror=i,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(n))})},Wn={get SUPPORT_RANGE_BOUNDS(){var n=dE(document);return Object.defineProperty(Wn,"SUPPORT_RANGE_BOUNDS",{value:n}),n},get SUPPORT_WORD_BREAKING(){var n=Wn.SUPPORT_RANGE_BOUNDS&&pE(document);return Object.defineProperty(Wn,"SUPPORT_WORD_BREAKING",{value:n}),n},get SUPPORT_SVG_DRAWING(){var n=mE(document);return Object.defineProperty(Wn,"SUPPORT_SVG_DRAWING",{value:n}),n},get SUPPORT_FOREIGNOBJECT_DRAWING(){var n=typeof Array.from=="function"&&typeof window.fetch=="function"?yE(document):Promise.resolve(!1);return Object.defineProperty(Wn,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:n}),n},get SUPPORT_CORS_IMAGES(){var n=fE();return Object.defineProperty(Wn,"SUPPORT_CORS_IMAGES",{value:n}),n},get SUPPORT_RESPONSE_TYPE(){var n=gE();return Object.defineProperty(Wn,"SUPPORT_RESPONSE_TYPE",{value:n}),n},get SUPPORT_CORS_XHR(){var n="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Wn,"SUPPORT_CORS_XHR",{value:n}),n},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var n=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Wn,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:n}),n}},Oh=function(){function n(t,i){this.text=t,this.bounds=i}return n}(),vE=function(n,t,i,s){var u=bE(t,i),d=[],p=0;return u.forEach(function(A){if(i.textDecorationLine.length||A.trim().length>0)if(Wn.SUPPORT_RANGE_BOUNDS){var v=Jw(s,p,A.length).getClientRects();if(v.length>1){var C=ym(A),F=0;C.forEach(function(Q){d.push(new Oh(Q,GA.fromDOMRectList(n,Jw(s,F+p,Q.length).getClientRects()))),F+=Q.length})}else d.push(new Oh(A,GA.fromDOMRectList(n,v)))}else{var E=s.splitText(A.length);d.push(new Oh(A,wE(n,s))),s=E}else Wn.SUPPORT_RANGE_BOUNDS||(s=s.splitText(A.length));p+=A.length}),d},wE=function(n,t){var i=t.ownerDocument;if(i){var s=i.createElement("html2canvaswrapper");s.appendChild(t.cloneNode(!0));var u=t.parentNode;if(u){u.replaceChild(s,t);var d=tp(n,s);return s.firstChild&&u.replaceChild(s.firstChild,s),d}}return GA.EMPTY},Jw=function(n,t,i){var s=n.ownerDocument;if(!s)throw new Error("Node has no owner document");var u=s.createRange();return u.setStart(n,t),u.setEnd(n,t+i),u},ym=function(n){if(Wn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(n)).map(function(i){return i.segment})}return hE(n)},_E=function(n,t){if(Wn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var i=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(i.segment(n)).map(function(s){return s.segment})}return BE(n,t)},bE=function(n,t){return t.letterSpacing!==0?ym(n):_E(n,t)},xE=[32,160,4961,65792,65793,4153,4241],BE=function(n,t){for(var i=W3(n,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),s=[],u,d=function(){if(u.value){var p=u.value.slice(),A=ep(p),v="";A.forEach(function(C){xE.indexOf(C)===-1?v+=on(C):(v.length&&s.push(v),s.push(on(C)),v="")}),v.length&&s.push(v)}};!(u=i.next()).done;)d();return s},CE=function(){function n(t,i,s){this.text=FE(i.data,s.textTransform),this.textBounds=vE(t,this.text,s,i)}return n}(),FE=function(n,t){switch(t){case 1:return n.toLowerCase();case 3:return n.replace(SE,IE);case 2:return n.toUpperCase();default:return n}},SE=/(^|\s|:|-|\(|\))([a-z])/g,IE=function(n,t,i){return n.length>0?t+i.toUpperCase():n},t_=function(n){ga(t,n);function t(i,s){var u=n.call(this,i,s)||this;return u.src=s.currentSrc||s.src,u.intrinsicWidth=s.naturalWidth,u.intrinsicHeight=s.naturalHeight,u.context.cache.addImage(u.src),u}return t}(nA),e_=function(n){ga(t,n);function t(i,s){var u=n.call(this,i,s)||this;return u.canvas=s,u.intrinsicWidth=s.width,u.intrinsicHeight=s.height,u}return t}(nA),r_=function(n){ga(t,n);function t(i,s){var u=n.call(this,i,s)||this,d=new XMLSerializer,p=tp(i,s);return s.setAttribute("width",p.width+"px"),s.setAttribute("height",p.height+"px"),u.svg="data:image/svg+xml,"+encodeURIComponent(d.serializeToString(s)),u.intrinsicWidth=s.width.baseVal.value,u.intrinsicHeight=s.height.baseVal.value,u.context.cache.addImage(u.svg),u}return t}(nA),i_=function(n){ga(t,n);function t(i,s){var u=n.call(this,i,s)||this;return u.value=s.value,u}return t}(nA),vm=function(n){ga(t,n);function t(i,s){var u=n.call(this,i,s)||this;return u.start=s.start,u.reversed=typeof s.reversed=="boolean"&&s.reversed===!0,u}return t}(nA),EE=[{type:15,flags:0,unit:"px",number:3}],TE=[{type:16,flags:0,number:50}],UE=function(n){return n.width>n.height?new GA(n.left+(n.width-n.height)/2,n.top,n.height,n.height):n.width<n.height?new GA(n.left,n.top+(n.height-n.width)/2,n.width,n.width):n},PE=function(n){var t=n.type===LE?new Array(n.value.length+1).join(""):n.value;return t.length===0?n.placeholder||"":t},Lp="checkbox",Qp="radio",LE="password",n_=707406591,wm=function(n){ga(t,n);function t(i,s){var u=n.call(this,i,s)||this;switch(u.type=s.type.toLowerCase(),u.checked=s.checked,u.value=PE(s),(u.type===Lp||u.type===Qp)&&(u.styles.backgroundColor=3739148031,u.styles.borderTopColor=u.styles.borderRightColor=u.styles.borderBottomColor=u.styles.borderLeftColor=2779096575,u.styles.borderTopWidth=u.styles.borderRightWidth=u.styles.borderBottomWidth=u.styles.borderLeftWidth=1,u.styles.borderTopStyle=u.styles.borderRightStyle=u.styles.borderBottomStyle=u.styles.borderLeftStyle=1,u.styles.backgroundClip=[0],u.styles.backgroundOrigin=[0],u.bounds=UE(u.bounds)),u.type){case Lp:u.styles.borderTopRightRadius=u.styles.borderTopLeftRadius=u.styles.borderBottomRightRadius=u.styles.borderBottomLeftRadius=EE;break;case Qp:u.styles.borderTopRightRadius=u.styles.borderTopLeftRadius=u.styles.borderBottomRightRadius=u.styles.borderBottomLeftRadius=TE;break}return u}return t}(nA),s_=function(n){ga(t,n);function t(i,s){var u=n.call(this,i,s)||this,d=s.options[s.selectedIndex||0];return u.value=d&&d.text||"",u}return t}(nA),o_=function(n){ga(t,n);function t(i,s){var u=n.call(this,i,s)||this;return u.value=s.value,u}return t}(nA),a_=function(n){ga(t,n);function t(i,s){var u=n.call(this,i,s)||this;u.src=s.src,u.width=parseInt(s.width,10)||0,u.height=parseInt(s.height,10)||0,u.backgroundColor=u.styles.backgroundColor;try{if(s.contentWindow&&s.contentWindow.document&&s.contentWindow.document.documentElement){u.tree=l_(i,s.contentWindow.document.documentElement);var d=s.contentWindow.document.documentElement?Mh(i,getComputedStyle(s.contentWindow.document.documentElement).backgroundColor):ZA.TRANSPARENT,p=s.contentWindow.document.body?Mh(i,getComputedStyle(s.contentWindow.document.body).backgroundColor):ZA.TRANSPARENT;u.backgroundColor=Ol(d)?Ol(p)?u.styles.backgroundColor:p:d}}catch{}return u}return t}(nA),QE=["OL","UL","MENU"],kp=function(n,t,i,s){for(var u=t.firstChild,d=void 0;u;u=d)if(d=u.nextSibling,c_(u)&&u.data.trim().length>0)i.textNodes.push(new CE(n,u,i.styles));else if(fu(u))if(g_(u)&&u.assignedNodes)u.assignedNodes().forEach(function(A){return kp(n,A,i,s)});else{var p=A_(n,u);p.styles.isVisible()&&(kE(u,p,s)?p.flags|=4:ME(p.styles)&&(p.flags|=2),QE.indexOf(u.tagName)!==-1&&(p.flags|=8),i.elements.push(p),u.slot,u.shadowRoot?kp(n,u.shadowRoot,p,s):!Dp(u)&&!u_(u)&&!Np(u)&&kp(n,u,p,s))}},A_=function(n,t){return xm(t)?new t_(n,t):h_(t)?new e_(n,t):u_(t)?new r_(n,t):DE(t)?new i_(n,t):NE(t)?new vm(n,t):OE(t)?new wm(n,t):Np(t)?new s_(n,t):Dp(t)?new o_(n,t):p_(t)?new a_(n,t):new nA(n,t)},l_=function(n,t){var i=A_(n,t);return i.flags|=4,kp(n,t,i,i),i},kE=function(n,t,i){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||bm(n)&&i.styles.isTransparent()},ME=function(n){return n.isPositioned()||n.isFloating()},c_=function(n){return n.nodeType===Node.TEXT_NODE},fu=function(n){return n.nodeType===Node.ELEMENT_NODE},_m=function(n){return fu(n)&&typeof n.style<"u"&&!Mp(n)},Mp=function(n){return typeof n.className=="object"},DE=function(n){return n.tagName==="LI"},NE=function(n){return n.tagName==="OL"},OE=function(n){return n.tagName==="INPUT"},RE=function(n){return n.tagName==="HTML"},u_=function(n){return n.tagName==="svg"},bm=function(n){return n.tagName==="BODY"},h_=function(n){return n.tagName==="CANVAS"},d_=function(n){return n.tagName==="VIDEO"},xm=function(n){return n.tagName==="IMG"},p_=function(n){return n.tagName==="IFRAME"},f_=function(n){return n.tagName==="STYLE"},zE=function(n){return n.tagName==="SCRIPT"},Dp=function(n){return n.tagName==="TEXTAREA"},Np=function(n){return n.tagName==="SELECT"},g_=function(n){return n.tagName==="SLOT"},m_=function(n){return n.tagName.indexOf("-")>0},HE=function(){function n(){this.counters={}}return n.prototype.getCounterValue=function(t){var i=this.counters[t];return i&&i.length?i[i.length-1]:1},n.prototype.getCounterValues=function(t){var i=this.counters[t];return i||[]},n.prototype.pop=function(t){var i=this;t.forEach(function(s){return i.counters[s].pop()})},n.prototype.parse=function(t){var i=this,s=t.counterIncrement,u=t.counterReset,d=!0;s!==null&&s.forEach(function(A){var v=i.counters[A.counter];v&&A.increment!==0&&(d=!1,v.length||v.push(1),v[Math.max(0,v.length-1)]+=A.increment)});var p=[];return d&&u.forEach(function(A){var v=i.counters[A.counter];p.push(A.counter),v||(v=i.counters[A.counter]=[]),v.push(A.reset)}),p},n}(),y_={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},v_={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},VE={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},jE={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},gu=function(n,t,i,s,u,d){return n<t||n>i?zh(n,u,d.length>0):s.integers.reduce(function(p,A,v){for(;n>=A;)n-=A,p+=s.values[v];return p},"")+d},w_=function(n,t,i,s){var u="";do i||n--,u=s(n)+u,n/=t;while(n*t>=t);return u},an=function(n,t,i,s,u){var d=i-t+1;return(n<0?"-":"")+(w_(Math.abs(n),d,s,function(p){return on(Math.floor(p%d)+t)})+u)},vc=function(n,t,i){i===void 0&&(i=". ");var s=t.length;return w_(Math.abs(n),s,!1,function(u){return t[Math.floor(u%s)]})+i},mu=1,zl=2,Hl=4,Rh=8,WA=function(n,t,i,s,u,d){if(n<-9999||n>9999)return zh(n,4,u.length>0);var p=Math.abs(n),A=u;if(p===0)return t[0]+A;for(var v=0;p>0&&v<=4;v++){var C=p%10;C===0&&En(d,mu)&&A!==""?A=t[C]+A:C>1||C===1&&v===0||C===1&&v===1&&En(d,zl)||C===1&&v===1&&En(d,Hl)&&n>100||C===1&&v>1&&En(d,Rh)?A=t[C]+(v>0?i[v-1]:"")+A:C===1&&v>0&&(A=i[v-1]+A),p=Math.floor(p/10)}return(n<0?s:"")+A},__="",b_="",x_="",Bm="",zh=function(n,t,i){var s=i?". ":"",u=i?"":"",d=i?", ":"",p=i?" ":"";switch(t){case 0:return""+p;case 1:return""+p;case 2:return""+p;case 5:var A=an(n,48,57,!0,s);return A.length<4?"0"+A:A;case 4:return vc(n,"",u);case 6:return gu(n,1,3999,y_,3,s).toLowerCase();case 7:return gu(n,1,3999,y_,3,s);case 8:return an(n,945,969,!1,s);case 9:return an(n,97,122,!1,s);case 10:return an(n,65,90,!1,s);case 11:return an(n,1632,1641,!0,s);case 12:case 49:return gu(n,1,9999,v_,3,s);case 35:return gu(n,1,9999,v_,3,s).toLowerCase();case 13:return an(n,2534,2543,!0,s);case 14:case 30:return an(n,6112,6121,!0,s);case 15:return vc(n,"",u);case 16:return vc(n,"",u);case 17:case 48:return WA(n,"",__,"",u,zl|Hl|Rh);case 47:return WA(n,"",b_,"",u,mu|zl|Hl|Rh);case 42:return WA(n,"",__,"",u,zl|Hl|Rh);case 41:return WA(n,"",b_,"",u,mu|zl|Hl|Rh);case 26:return WA(n,"","",x_,u,0);case 25:return WA(n,"","",x_,u,mu|zl|Hl);case 31:return WA(n,"","",Bm,d,mu|zl|Hl);case 33:return WA(n,"","",Bm,d,0);case 32:return WA(n,"","",Bm,d,mu|zl|Hl);case 18:return an(n,2406,2415,!0,s);case 20:return gu(n,1,19999,jE,3,s);case 21:return an(n,2790,2799,!0,s);case 22:return an(n,2662,2671,!0,s);case 22:return gu(n,1,10999,VE,3,s);case 23:return vc(n,"");case 24:return vc(n,"");case 27:return an(n,3302,3311,!0,s);case 28:return vc(n,"",u);case 29:return vc(n,"",u);case 34:return an(n,3792,3801,!0,s);case 37:return an(n,6160,6169,!0,s);case 38:return an(n,4160,4169,!0,s);case 39:return an(n,2918,2927,!0,s);case 40:return an(n,1776,1785,!0,s);case 43:return an(n,3046,3055,!0,s);case 44:return an(n,3174,3183,!0,s);case 45:return an(n,3664,3673,!0,s);case 46:return an(n,3872,3881,!0,s);case 3:default:return an(n,48,57,!0,s)}},B_="data-html2canvas-ignore",C_=function(){function n(t,i,s){if(this.context=t,this.options=s,this.scrolledElements=[],this.referenceElement=i,this.counters=new HE,this.quoteDepth=0,!i.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(i.ownerDocument.documentElement,!1)}return n.prototype.toIFrame=function(t,i){var s=this,u=KE(t,i);if(!u.contentWindow)return Promise.reject("Unable to find iframe window");var d=t.defaultView.pageXOffset,p=t.defaultView.pageYOffset,A=u.contentWindow,v=A.document,C=GE(u).then(function(){return Is(s,void 0,void 0,function(){var F,E;return ds(this,function(Q){switch(Q.label){case 0:return this.scrolledElements.forEach(YE),A&&(A.scrollTo(i.left,i.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(A.scrollY!==i.top||A.scrollX!==i.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(A.scrollX-i.left,A.scrollY-i.top,0,0))),F=this.options.onclone,E=this.clonedReferenceElement,typeof E>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:v.fonts&&v.fonts.ready?[4,v.fonts.ready]:[3,2];case 1:Q.sent(),Q.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,qE(v)]:[3,4];case 3:Q.sent(),Q.label=4;case 4:return typeof F=="function"?[2,Promise.resolve().then(function(){return F(v,E)}).then(function(){return u})]:[2,u]}})})});return v.open(),v.write(ZE(document.doctype)+"<html></html>"),WE(this.referenceElement.ownerDocument,d,p),v.replaceChild(v.adoptNode(this.documentElement),v.documentElement),v.close(),C},n.prototype.createElementClone=function(t){if(Am(t,2))debugger;if(h_(t))return this.createCanvasClone(t);if(d_(t))return this.createVideoClone(t);if(f_(t))return this.createStyleClone(t);var i=t.cloneNode(!1);return xm(i)&&(xm(t)&&t.currentSrc&&t.currentSrc!==t.src&&(i.src=t.currentSrc,i.srcset=""),i.loading==="lazy"&&(i.loading="eager")),m_(i)?this.createCustomElementClone(i):i},n.prototype.createCustomElementClone=function(t){var i=document.createElement("html2canvascustomelement");return Cm(t.style,i),i},n.prototype.createStyleClone=function(t){try{var i=t.sheet;if(i&&i.cssRules){var s=[].slice.call(i.cssRules,0).reduce(function(d,p){return p&&typeof p.cssText=="string"?d+p.cssText:d},""),u=t.cloneNode(!1);return u.textContent=s,u}}catch(d){if(this.context.logger.error("Unable to access cssRules property",d),d.name!=="SecurityError")throw d}return t.cloneNode(!1)},n.prototype.createCanvasClone=function(t){var i;if(this.options.inlineImages&&t.ownerDocument){var s=t.ownerDocument.createElement("img");try{return s.src=t.toDataURL(),s}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var u=t.cloneNode(!1);try{u.width=t.width,u.height=t.height;var d=t.getContext("2d"),p=u.getContext("2d");if(p)if(!this.options.allowTaint&&d)p.putImageData(d.getImageData(0,0,t.width,t.height),0,0);else{var A=(i=t.getContext("webgl2"))!==null&&i!==void 0?i:t.getContext("webgl");if(A){var v=A.getContextAttributes();(v==null?void 0:v.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}p.drawImage(t,0,0)}return u}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return u},n.prototype.createVideoClone=function(t){var i=t.ownerDocument.createElement("canvas");i.width=t.offsetWidth,i.height=t.offsetHeight;var s=i.getContext("2d");try{return s&&(s.drawImage(t,0,0,i.width,i.height),this.options.allowTaint||s.getImageData(0,0,i.width,i.height)),i}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var u=t.ownerDocument.createElement("canvas");return u.width=t.offsetWidth,u.height=t.offsetHeight,u},n.prototype.appendChildNode=function(t,i,s){(!fu(i)||!zE(i)&&!i.hasAttribute(B_)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(i)))&&(!this.options.copyStyles||!fu(i)||!f_(i))&&t.appendChild(this.cloneNode(i,s))},n.prototype.cloneChildNodes=function(t,i,s){for(var u=this,d=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;d;d=d.nextSibling)if(fu(d)&&g_(d)&&typeof d.assignedNodes=="function"){var p=d.assignedNodes();p.length&&p.forEach(function(A){return u.appendChildNode(i,A,s)})}else this.appendChildNode(i,d,s)},n.prototype.cloneNode=function(t,i){if(c_(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var s=t.ownerDocument.defaultView;if(s&&fu(t)&&(_m(t)||Mp(t))){var u=this.createElementClone(t);u.style.transitionProperty="none";var d=s.getComputedStyle(t),p=s.getComputedStyle(t,":before"),A=s.getComputedStyle(t,":after");this.referenceElement===t&&_m(u)&&(this.clonedReferenceElement=u),bm(u)&&eT(u);var v=this.counters.parse(new Nw(this.context,d)),C=this.resolvePseudoContent(t,u,p,Hh.BEFORE);m_(t)&&(i=!0),d_(t)||this.cloneChildNodes(t,u,i),C&&u.insertBefore(C,u.firstChild);var F=this.resolvePseudoContent(t,u,A,Hh.AFTER);return F&&u.appendChild(F),this.counters.pop(v),(d&&(this.options.copyStyles||Mp(t))&&!p_(t)||i)&&Cm(d,u),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([u,t.scrollLeft,t.scrollTop]),(Dp(t)||Np(t))&&(Dp(u)||Np(u))&&(u.value=t.value),u}return t.cloneNode(!1)},n.prototype.resolvePseudoContent=function(t,i,s,u){var d=this;if(s){var p=s.content,A=i.ownerDocument;if(!(!A||!p||p==="none"||p==="-moz-alt-content"||s.display==="none")){this.counters.parse(new Nw(this.context,s));var v=new DI(this.context,s),C=A.createElement("html2canvaspseudoelement");Cm(s,C),v.content.forEach(function(E){if(E.type===0)C.appendChild(A.createTextNode(E.value));else if(E.type===22){var Q=A.createElement("img");Q.src=E.value,Q.style.opacity="1",C.appendChild(Q)}else if(E.type===18){if(E.name==="attr"){var T=E.values.filter(xi);T.length&&C.appendChild(A.createTextNode(t.getAttribute(T[0].value)||""))}else if(E.name==="counter"){var V=E.values.filter(du),R=V[0],W=V[1];if(R&&xi(R)){var j=d.counters.getCounterValue(R.value),rt=W&&xi(W)?am.parse(d.context,W.value):3;C.appendChild(A.createTextNode(zh(j,rt,!1)))}}else if(E.name==="counters"){var ht=E.values.filter(du),R=ht[0],Bt=ht[1],W=ht[2];if(R&&xi(R)){var Et=d.counters.getCounterValues(R.value),Tt=W&&xi(W)?am.parse(d.context,W.value):3,xt=Bt&&Bt.type===0?Bt.value:"",ft=Et.map(function(at){return zh(at,Tt,!1)}).join(xt);C.appendChild(A.createTextNode(ft))}}}else if(E.type===20)switch(E.value){case"open-quote":C.appendChild(A.createTextNode(Dw(v.quotes,d.quoteDepth++,!0)));break;case"close-quote":C.appendChild(A.createTextNode(Dw(v.quotes,--d.quoteDepth,!1)));break;default:C.appendChild(A.createTextNode(E.value))}}),C.className=Fm+" "+Sm;var F=u===Hh.BEFORE?" "+Fm:" "+Sm;return Mp(i)?i.className.baseValue+=F:i.className+=F,C}}},n.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},n}(),Hh;(function(n){n[n.BEFORE=0]="BEFORE",n[n.AFTER=1]="AFTER"})(Hh||(Hh={}));var KE=function(n,t){var i=n.createElement("iframe");return i.className="html2canvas-container",i.style.visibility="hidden",i.style.position="fixed",i.style.left="-10000px",i.style.top="0px",i.style.border="0",i.width=t.width.toString(),i.height=t.height.toString(),i.scrolling="no",i.setAttribute(B_,"true"),n.body.appendChild(i),i},$E=function(n){return new Promise(function(t){if(n.complete){t();return}if(!n.src){t();return}n.onload=t,n.onerror=t})},qE=function(n){return Promise.all([].slice.call(n.images,0).map($E))},GE=function(n){return new Promise(function(t,i){var s=n.contentWindow;if(!s)return i("No window assigned for iframe");var u=s.document;s.onload=n.onload=function(){s.onload=n.onload=null;var d=setInterval(function(){u.body.childNodes.length>0&&u.readyState==="complete"&&(clearInterval(d),t(n))},50)}})},XE=["all","d","content"],Cm=function(n,t){for(var i=n.length-1;i>=0;i--){var s=n.item(i);XE.indexOf(s)===-1&&t.style.setProperty(s,n.getPropertyValue(s))}return t},ZE=function(n){var t="";return n&&(t+="<!DOCTYPE ",n.name&&(t+=n.name),n.internalSubset&&(t+=n.internalSubset),n.publicId&&(t+='"'+n.publicId+'"'),n.systemId&&(t+='"'+n.systemId+'"'),t+=">"),t},WE=function(n,t,i){n&&n.defaultView&&(t!==n.defaultView.pageXOffset||i!==n.defaultView.pageYOffset)&&n.defaultView.scrollTo(t,i)},YE=function(n){var t=n[0],i=n[1],s=n[2];t.scrollLeft=i,t.scrollTop=s},JE=":before",tT=":after",Fm="___html2canvas___pseudoelement_before",Sm="___html2canvas___pseudoelement_after",F_=`{
    content: "" !important;
    display: none !important;
}`,eT=function(n){rT(n,"."+Fm+JE+F_+`
         .`+Sm+tT+F_)},rT=function(n,t){var i=n.ownerDocument;if(i){var s=i.createElement("style");s.textContent=t,n.appendChild(s)}},S_=function(){function n(){}return n.getOrigin=function(t){var i=n._link;return i?(i.href=t,i.href=i.href,i.protocol+i.hostname+i.port):"about:blank"},n.isSameOrigin=function(t){return n.getOrigin(t)===n._origin},n.setContext=function(t){n._link=t.document.createElement("a"),n._origin=n.getOrigin(t.location.href)},n._origin="about:blank",n}(),iT=function(){function n(t,i){this.context=t,this._options=i,this._cache={}}return n.prototype.addImage=function(t){var i=Promise.resolve();return this.has(t)||(Em(t)||aT(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),i},n.prototype.match=function(t){return this._cache[t]},n.prototype.loadImage=function(t){return Is(this,void 0,void 0,function(){var i,s,u,d,p=this;return ds(this,function(A){switch(A.label){case 0:return i=S_.isSameOrigin(t),s=!Im(t)&&this._options.useCORS===!0&&Wn.SUPPORT_CORS_IMAGES&&!i,u=!Im(t)&&!i&&!Em(t)&&typeof this._options.proxy=="string"&&Wn.SUPPORT_CORS_XHR&&!s,!i&&this._options.allowTaint===!1&&!Im(t)&&!Em(t)&&!u&&!s?[2]:(d=t,u?[4,this.proxy(d)]:[3,2]);case 1:d=A.sent(),A.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(v,C){var F=new Image;F.onload=function(){return v(F)},F.onerror=C,(AT(d)||s)&&(F.crossOrigin="anonymous"),F.src=d,F.complete===!0&&setTimeout(function(){return v(F)},500),p._options.imageTimeout>0&&setTimeout(function(){return C("Timed out ("+p._options.imageTimeout+"ms) loading image")},p._options.imageTimeout)})];case 3:return[2,A.sent()]}})})},n.prototype.has=function(t){return typeof this._cache[t]<"u"},n.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},n.prototype.proxy=function(t){var i=this,s=this._options.proxy;if(!s)throw new Error("No proxy defined");var u=t.substring(0,256);return new Promise(function(d,p){var A=Wn.SUPPORT_RESPONSE_TYPE?"blob":"text",v=new XMLHttpRequest;v.onload=function(){if(v.status===200)if(A==="text")d(v.response);else{var E=new FileReader;E.addEventListener("load",function(){return d(E.result)},!1),E.addEventListener("error",function(Q){return p(Q)},!1),E.readAsDataURL(v.response)}else p("Failed to proxy resource "+u+" with status code "+v.status)},v.onerror=p;var C=s.indexOf("?")>-1?"&":"?";if(v.open("GET",""+s+C+"url="+encodeURIComponent(t)+"&responseType="+A),A!=="text"&&v instanceof XMLHttpRequest&&(v.responseType=A),i._options.imageTimeout){var F=i._options.imageTimeout;v.timeout=F,v.ontimeout=function(){return p("Timed out ("+F+"ms) proxying "+u)}}v.send()})},n}(),nT=/^data:image\/svg\+xml/i,sT=/^data:image\/.*;base64,/i,oT=/^data:image\/.*/i,aT=function(n){return Wn.SUPPORT_SVG_DRAWING||!lT(n)},Im=function(n){return oT.test(n)},AT=function(n){return sT.test(n)},Em=function(n){return n.substr(0,4)==="blob"},lT=function(n){return n.substr(-3).toLowerCase()==="svg"||nT.test(n)},qe=function(){function n(t,i){this.type=0,this.x=t,this.y=i}return n.prototype.add=function(t,i){return new n(this.x+t,this.y+i)},n}(),yu=function(n,t,i){return new qe(n.x+(t.x-n.x)*i,n.y+(t.y-n.y)*i)},Op=function(){function n(t,i,s,u){this.type=1,this.start=t,this.startControl=i,this.endControl=s,this.end=u}return n.prototype.subdivide=function(t,i){var s=yu(this.start,this.startControl,t),u=yu(this.startControl,this.endControl,t),d=yu(this.endControl,this.end,t),p=yu(s,u,t),A=yu(u,d,t),v=yu(p,A,t);return i?new n(this.start,s,p,v):new n(v,A,d,this.end)},n.prototype.add=function(t,i){return new n(this.start.add(t,i),this.startControl.add(t,i),this.endControl.add(t,i),this.end.add(t,i))},n.prototype.reverse=function(){return new n(this.end,this.endControl,this.startControl,this.start)},n}(),Oo=function(n){return n.type===1},cT=function(){function n(t){var i=t.styles,s=t.bounds,u=kh(i.borderTopLeftRadius,s.width,s.height),d=u[0],p=u[1],A=kh(i.borderTopRightRadius,s.width,s.height),v=A[0],C=A[1],F=kh(i.borderBottomRightRadius,s.width,s.height),E=F[0],Q=F[1],T=kh(i.borderBottomLeftRadius,s.width,s.height),V=T[0],R=T[1],W=[];W.push((d+v)/s.width),W.push((V+E)/s.width),W.push((p+R)/s.height),W.push((C+Q)/s.height);var j=Math.max.apply(Math,W);j>1&&(d/=j,p/=j,v/=j,C/=j,E/=j,Q/=j,V/=j,R/=j);var rt=s.width-v,ht=s.height-Q,Bt=s.width-E,Et=s.height-R,Tt=i.borderTopWidth,xt=i.borderRightWidth,ft=i.borderBottomWidth,Nt=i.borderLeftWidth,jt=Ui(i.paddingTop,t.bounds.width),at=Ui(i.paddingRight,t.bounds.width),ct=Ui(i.paddingBottom,t.bounds.width),vt=Ui(i.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=d>0||p>0?Ni(s.left+Nt/3,s.top+Tt/3,d-Nt/3,p-Tt/3,ui.TOP_LEFT):new qe(s.left+Nt/3,s.top+Tt/3),this.topRightBorderDoubleOuterBox=d>0||p>0?Ni(s.left+rt,s.top+Tt/3,v-xt/3,C-Tt/3,ui.TOP_RIGHT):new qe(s.left+s.width-xt/3,s.top+Tt/3),this.bottomRightBorderDoubleOuterBox=E>0||Q>0?Ni(s.left+Bt,s.top+ht,E-xt/3,Q-ft/3,ui.BOTTOM_RIGHT):new qe(s.left+s.width-xt/3,s.top+s.height-ft/3),this.bottomLeftBorderDoubleOuterBox=V>0||R>0?Ni(s.left+Nt/3,s.top+Et,V-Nt/3,R-ft/3,ui.BOTTOM_LEFT):new qe(s.left+Nt/3,s.top+s.height-ft/3),this.topLeftBorderDoubleInnerBox=d>0||p>0?Ni(s.left+Nt*2/3,s.top+Tt*2/3,d-Nt*2/3,p-Tt*2/3,ui.TOP_LEFT):new qe(s.left+Nt*2/3,s.top+Tt*2/3),this.topRightBorderDoubleInnerBox=d>0||p>0?Ni(s.left+rt,s.top+Tt*2/3,v-xt*2/3,C-Tt*2/3,ui.TOP_RIGHT):new qe(s.left+s.width-xt*2/3,s.top+Tt*2/3),this.bottomRightBorderDoubleInnerBox=E>0||Q>0?Ni(s.left+Bt,s.top+ht,E-xt*2/3,Q-ft*2/3,ui.BOTTOM_RIGHT):new qe(s.left+s.width-xt*2/3,s.top+s.height-ft*2/3),this.bottomLeftBorderDoubleInnerBox=V>0||R>0?Ni(s.left+Nt*2/3,s.top+Et,V-Nt*2/3,R-ft*2/3,ui.BOTTOM_LEFT):new qe(s.left+Nt*2/3,s.top+s.height-ft*2/3),this.topLeftBorderStroke=d>0||p>0?Ni(s.left+Nt/2,s.top+Tt/2,d-Nt/2,p-Tt/2,ui.TOP_LEFT):new qe(s.left+Nt/2,s.top+Tt/2),this.topRightBorderStroke=d>0||p>0?Ni(s.left+rt,s.top+Tt/2,v-xt/2,C-Tt/2,ui.TOP_RIGHT):new qe(s.left+s.width-xt/2,s.top+Tt/2),this.bottomRightBorderStroke=E>0||Q>0?Ni(s.left+Bt,s.top+ht,E-xt/2,Q-ft/2,ui.BOTTOM_RIGHT):new qe(s.left+s.width-xt/2,s.top+s.height-ft/2),this.bottomLeftBorderStroke=V>0||R>0?Ni(s.left+Nt/2,s.top+Et,V-Nt/2,R-ft/2,ui.BOTTOM_LEFT):new qe(s.left+Nt/2,s.top+s.height-ft/2),this.topLeftBorderBox=d>0||p>0?Ni(s.left,s.top,d,p,ui.TOP_LEFT):new qe(s.left,s.top),this.topRightBorderBox=v>0||C>0?Ni(s.left+rt,s.top,v,C,ui.TOP_RIGHT):new qe(s.left+s.width,s.top),this.bottomRightBorderBox=E>0||Q>0?Ni(s.left+Bt,s.top+ht,E,Q,ui.BOTTOM_RIGHT):new qe(s.left+s.width,s.top+s.height),this.bottomLeftBorderBox=V>0||R>0?Ni(s.left,s.top+Et,V,R,ui.BOTTOM_LEFT):new qe(s.left,s.top+s.height),this.topLeftPaddingBox=d>0||p>0?Ni(s.left+Nt,s.top+Tt,Math.max(0,d-Nt),Math.max(0,p-Tt),ui.TOP_LEFT):new qe(s.left+Nt,s.top+Tt),this.topRightPaddingBox=v>0||C>0?Ni(s.left+Math.min(rt,s.width-xt),s.top+Tt,rt>s.width+xt?0:Math.max(0,v-xt),Math.max(0,C-Tt),ui.TOP_RIGHT):new qe(s.left+s.width-xt,s.top+Tt),this.bottomRightPaddingBox=E>0||Q>0?Ni(s.left+Math.min(Bt,s.width-Nt),s.top+Math.min(ht,s.height-ft),Math.max(0,E-xt),Math.max(0,Q-ft),ui.BOTTOM_RIGHT):new qe(s.left+s.width-xt,s.top+s.height-ft),this.bottomLeftPaddingBox=V>0||R>0?Ni(s.left+Nt,s.top+Math.min(Et,s.height-ft),Math.max(0,V-Nt),Math.max(0,R-ft),ui.BOTTOM_LEFT):new qe(s.left+Nt,s.top+s.height-ft),this.topLeftContentBox=d>0||p>0?Ni(s.left+Nt+vt,s.top+Tt+jt,Math.max(0,d-(Nt+vt)),Math.max(0,p-(Tt+jt)),ui.TOP_LEFT):new qe(s.left+Nt+vt,s.top+Tt+jt),this.topRightContentBox=v>0||C>0?Ni(s.left+Math.min(rt,s.width+Nt+vt),s.top+Tt+jt,rt>s.width+Nt+vt?0:v-Nt+vt,C-(Tt+jt),ui.TOP_RIGHT):new qe(s.left+s.width-(xt+at),s.top+Tt+jt),this.bottomRightContentBox=E>0||Q>0?Ni(s.left+Math.min(Bt,s.width-(Nt+vt)),s.top+Math.min(ht,s.height+Tt+jt),Math.max(0,E-(xt+at)),Q-(ft+ct),ui.BOTTOM_RIGHT):new qe(s.left+s.width-(xt+at),s.top+s.height-(ft+ct)),this.bottomLeftContentBox=V>0||R>0?Ni(s.left+Nt+vt,s.top+Et,Math.max(0,V-(Nt+vt)),R-(ft+ct),ui.BOTTOM_LEFT):new qe(s.left+Nt+vt,s.top+s.height-(ft+ct))}return n}(),ui;(function(n){n[n.TOP_LEFT=0]="TOP_LEFT",n[n.TOP_RIGHT=1]="TOP_RIGHT",n[n.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",n[n.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(ui||(ui={}));var Ni=function(n,t,i,s,u){var d=4*((Math.sqrt(2)-1)/3),p=i*d,A=s*d,v=n+i,C=t+s;switch(u){case ui.TOP_LEFT:return new Op(new qe(n,C),new qe(n,C-A),new qe(v-p,t),new qe(v,t));case ui.TOP_RIGHT:return new Op(new qe(n,t),new qe(n+p,t),new qe(v,C-A),new qe(v,C));case ui.BOTTOM_RIGHT:return new Op(new qe(v,t),new qe(v,t+A),new qe(n+p,C),new qe(n,C));case ui.BOTTOM_LEFT:default:return new Op(new qe(v,C),new qe(v-p,C),new qe(n,t+A),new qe(n,t))}},Rp=function(n){return[n.topLeftBorderBox,n.topRightBorderBox,n.bottomRightBorderBox,n.bottomLeftBorderBox]},uT=function(n){return[n.topLeftContentBox,n.topRightContentBox,n.bottomRightContentBox,n.bottomLeftContentBox]},zp=function(n){return[n.topLeftPaddingBox,n.topRightPaddingBox,n.bottomRightPaddingBox,n.bottomLeftPaddingBox]},hT=function(){function n(t,i,s){this.offsetX=t,this.offsetY=i,this.matrix=s,this.type=0,this.target=6}return n}(),Hp=function(){function n(t,i){this.path=t,this.target=i,this.type=1}return n}(),dT=function(){function n(t){this.opacity=t,this.type=2,this.target=6}return n}(),pT=function(n){return n.type===0},I_=function(n){return n.type===1},fT=function(n){return n.type===2},E_=function(n,t){return n.length===t.length?n.some(function(i,s){return i===t[s]}):!1},gT=function(n,t,i,s,u){return n.map(function(d,p){switch(p){case 0:return d.add(t,i);case 1:return d.add(t+s,i);case 2:return d.add(t+s,i+u);case 3:return d.add(t,i+u)}return d})},T_=function(){function n(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return n}(),U_=function(){function n(t,i){if(this.container=t,this.parent=i,this.effects=[],this.curves=new cT(this.container),this.container.styles.opacity<1&&this.effects.push(new dT(this.container.styles.opacity)),this.container.styles.transform!==null){var s=this.container.bounds.left+this.container.styles.transformOrigin[0].number,u=this.container.bounds.top+this.container.styles.transformOrigin[1].number,d=this.container.styles.transform;this.effects.push(new hT(s,u,d))}if(this.container.styles.overflowX!==0){var p=Rp(this.curves),A=zp(this.curves);E_(p,A)?this.effects.push(new Hp(p,6)):(this.effects.push(new Hp(p,2)),this.effects.push(new Hp(A,4)))}}return n.prototype.getEffects=function(t){for(var i=[2,3].indexOf(this.container.styles.position)===-1,s=this.parent,u=this.effects.slice(0);s;){var d=s.effects.filter(function(v){return!I_(v)});if(i||s.container.styles.position!==0||!s.parent){if(u.unshift.apply(u,d),i=[2,3].indexOf(s.container.styles.position)===-1,s.container.styles.overflowX!==0){var p=Rp(s.curves),A=zp(s.curves);E_(p,A)||u.unshift(new Hp(A,6))}}else u.unshift.apply(u,d);s=s.parent}return u.filter(function(v){return En(v.target,t)})},n}(),Tm=function(n,t,i,s){n.container.elements.forEach(function(u){var d=En(u.flags,4),p=En(u.flags,2),A=new U_(u,n);En(u.styles.display,2048)&&s.push(A);var v=En(u.flags,8)?[]:s;if(d||p){var C=d||u.styles.isPositioned()?i:t,F=new T_(A);if(u.styles.isPositioned()||u.styles.opacity<1||u.styles.isTransformed()){var E=u.styles.zIndex.order;if(E<0){var Q=0;C.negativeZIndex.some(function(V,R){return E>V.element.container.styles.zIndex.order?(Q=R,!1):Q>0}),C.negativeZIndex.splice(Q,0,F)}else if(E>0){var T=0;C.positiveZIndex.some(function(V,R){return E>=V.element.container.styles.zIndex.order?(T=R+1,!1):T>0}),C.positiveZIndex.splice(T,0,F)}else C.zeroOrAutoZIndexOrTransformedOrOpacity.push(F)}else u.styles.isFloating()?C.nonPositionedFloats.push(F):C.nonPositionedInlineLevel.push(F);Tm(A,F,d?F:i,v)}else u.styles.isInlineLevel()?t.inlineLevel.push(A):t.nonInlineLevel.push(A),Tm(A,t,i,v);En(u.flags,8)&&P_(u,v)})},P_=function(n,t){for(var i=n instanceof vm?n.start:1,s=n instanceof vm?n.reversed:!1,u=0;u<t.length;u++){var d=t[u];d.container instanceof i_&&typeof d.container.value=="number"&&d.container.value!==0&&(i=d.container.value),d.listValue=zh(i,d.container.styles.listStyleType,!0),i+=s?-1:1}},mT=function(n){var t=new U_(n,null),i=new T_(t),s=[];return Tm(t,i,i,s),P_(t.container,s),i},L_=function(n,t){switch(t){case 0:return Ro(n.topLeftBorderBox,n.topLeftPaddingBox,n.topRightBorderBox,n.topRightPaddingBox);case 1:return Ro(n.topRightBorderBox,n.topRightPaddingBox,n.bottomRightBorderBox,n.bottomRightPaddingBox);case 2:return Ro(n.bottomRightBorderBox,n.bottomRightPaddingBox,n.bottomLeftBorderBox,n.bottomLeftPaddingBox);case 3:default:return Ro(n.bottomLeftBorderBox,n.bottomLeftPaddingBox,n.topLeftBorderBox,n.topLeftPaddingBox)}},yT=function(n,t){switch(t){case 0:return Ro(n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox,n.topRightBorderBox,n.topRightBorderDoubleOuterBox);case 1:return Ro(n.topRightBorderBox,n.topRightBorderDoubleOuterBox,n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox);case 2:return Ro(n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox,n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox);case 3:default:return Ro(n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox,n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox)}},vT=function(n,t){switch(t){case 0:return Ro(n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox,n.topRightBorderDoubleInnerBox,n.topRightPaddingBox);case 1:return Ro(n.topRightBorderDoubleInnerBox,n.topRightPaddingBox,n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox);case 2:return Ro(n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox,n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox);case 3:default:return Ro(n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox,n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox)}},wT=function(n,t){switch(t){case 0:return Vp(n.topLeftBorderStroke,n.topRightBorderStroke);case 1:return Vp(n.topRightBorderStroke,n.bottomRightBorderStroke);case 2:return Vp(n.bottomRightBorderStroke,n.bottomLeftBorderStroke);case 3:default:return Vp(n.bottomLeftBorderStroke,n.topLeftBorderStroke)}},Vp=function(n,t){var i=[];return Oo(n)?i.push(n.subdivide(.5,!1)):i.push(n),Oo(t)?i.push(t.subdivide(.5,!0)):i.push(t),i},Ro=function(n,t,i,s){var u=[];return Oo(n)?u.push(n.subdivide(.5,!1)):u.push(n),Oo(i)?u.push(i.subdivide(.5,!0)):u.push(i),Oo(s)?u.push(s.subdivide(.5,!0).reverse()):u.push(s),Oo(t)?u.push(t.subdivide(.5,!1).reverse()):u.push(t),u},Q_=function(n){var t=n.bounds,i=n.styles;return t.add(i.borderLeftWidth,i.borderTopWidth,-(i.borderRightWidth+i.borderLeftWidth),-(i.borderTopWidth+i.borderBottomWidth))},jp=function(n){var t=n.styles,i=n.bounds,s=Ui(t.paddingLeft,i.width),u=Ui(t.paddingRight,i.width),d=Ui(t.paddingTop,i.width),p=Ui(t.paddingBottom,i.width);return i.add(s+t.borderLeftWidth,d+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+s+u),-(t.borderTopWidth+t.borderBottomWidth+d+p))},_T=function(n,t){return n===0?t.bounds:n===2?jp(t):Q_(t)},bT=function(n,t){return n===0?t.bounds:n===2?jp(t):Q_(t)},Um=function(n,t,i){var s=_T(wu(n.styles.backgroundOrigin,t),n),u=bT(wu(n.styles.backgroundClip,t),n),d=xT(wu(n.styles.backgroundSize,t),i,s),p=d[0],A=d[1],v=kh(wu(n.styles.backgroundPosition,t),s.width-p,s.height-A),C=BT(wu(n.styles.backgroundRepeat,t),v,d,s,u),F=Math.round(s.left+v[0]),E=Math.round(s.top+v[1]);return[C,F,E,p,A]},vu=function(n){return xi(n)&&n.value===pu.AUTO},Kp=function(n){return typeof n=="number"},xT=function(n,t,i){var s=t[0],u=t[1],d=t[2],p=n[0],A=n[1];if(!p)return[0,0];if(gn(p)&&A&&gn(A))return[Ui(p,i.width),Ui(A,i.height)];var v=Kp(d);if(xi(p)&&(p.value===pu.CONTAIN||p.value===pu.COVER)){if(Kp(d)){var C=i.width/i.height;return C<d!=(p.value===pu.COVER)?[i.width,i.width/d]:[i.height*d,i.height]}return[i.width,i.height]}var F=Kp(s),E=Kp(u),Q=F||E;if(vu(p)&&(!A||vu(A))){if(F&&E)return[s,u];if(!v&&!Q)return[i.width,i.height];if(Q&&v){var T=F?s:u*d,V=E?u:s/d;return[T,V]}var R=F?s:i.width,W=E?u:i.height;return[R,W]}if(v){var j=0,rt=0;return gn(p)?j=Ui(p,i.width):gn(A)&&(rt=Ui(A,i.height)),vu(p)?j=rt*d:(!A||vu(A))&&(rt=j/d),[j,rt]}var ht=null,Bt=null;if(gn(p)?ht=Ui(p,i.width):A&&gn(A)&&(Bt=Ui(A,i.height)),ht!==null&&(!A||vu(A))&&(Bt=F&&E?ht/s*u:i.height),Bt!==null&&vu(p)&&(ht=F&&E?Bt/u*s:i.width),ht!==null&&Bt!==null)return[ht,Bt];throw new Error("Unable to calculate background-size for element")},wu=function(n,t){var i=n[t];return typeof i>"u"?n[0]:i},BT=function(n,t,i,s,u){var d=t[0],p=t[1],A=i[0],v=i[1];switch(n){case 2:return[new qe(Math.round(s.left),Math.round(s.top+p)),new qe(Math.round(s.left+s.width),Math.round(s.top+p)),new qe(Math.round(s.left+s.width),Math.round(v+s.top+p)),new qe(Math.round(s.left),Math.round(v+s.top+p))];case 3:return[new qe(Math.round(s.left+d),Math.round(s.top)),new qe(Math.round(s.left+d+A),Math.round(s.top)),new qe(Math.round(s.left+d+A),Math.round(s.height+s.top)),new qe(Math.round(s.left+d),Math.round(s.height+s.top))];case 1:return[new qe(Math.round(s.left+d),Math.round(s.top+p)),new qe(Math.round(s.left+d+A),Math.round(s.top+p)),new qe(Math.round(s.left+d+A),Math.round(s.top+p+v)),new qe(Math.round(s.left+d),Math.round(s.top+p+v))];default:return[new qe(Math.round(u.left),Math.round(u.top)),new qe(Math.round(u.left+u.width),Math.round(u.top)),new qe(Math.round(u.left+u.width),Math.round(u.height+u.top)),new qe(Math.round(u.left),Math.round(u.height+u.top))]}},CT="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",k_="Hidden Text",FT=function(){function n(t){this._data={},this._document=t}return n.prototype.parseMetrics=function(t,i){var s=this._document.createElement("div"),u=this._document.createElement("img"),d=this._document.createElement("span"),p=this._document.body;s.style.visibility="hidden",s.style.fontFamily=t,s.style.fontSize=i,s.style.margin="0",s.style.padding="0",s.style.whiteSpace="nowrap",p.appendChild(s),u.src=CT,u.width=1,u.height=1,u.style.margin="0",u.style.padding="0",u.style.verticalAlign="baseline",d.style.fontFamily=t,d.style.fontSize=i,d.style.margin="0",d.style.padding="0",d.appendChild(this._document.createTextNode(k_)),s.appendChild(d),s.appendChild(u);var A=u.offsetTop-d.offsetTop+2;s.removeChild(d),s.appendChild(this._document.createTextNode(k_)),s.style.lineHeight="normal",u.style.verticalAlign="super";var v=u.offsetTop-s.offsetTop+2;return p.removeChild(s),{baseline:A,middle:v}},n.prototype.getMetrics=function(t,i){var s=t+" "+i;return typeof this._data[s]>"u"&&(this._data[s]=this.parseMetrics(t,i)),this._data[s]},n}(),M_=function(){function n(t,i){this.context=t,this.options=i}return n}(),ST=1e4,IT=function(n){ga(t,n);function t(i,s){var u=n.call(this,i,s)||this;return u._activeEffects=[],u.canvas=s.canvas?s.canvas:document.createElement("canvas"),u.ctx=u.canvas.getContext("2d"),s.canvas||(u.canvas.width=Math.floor(s.width*s.scale),u.canvas.height=Math.floor(s.height*s.scale),u.canvas.style.width=s.width+"px",u.canvas.style.height=s.height+"px"),u.fontMetrics=new FT(document),u.ctx.scale(u.options.scale,u.options.scale),u.ctx.translate(-s.x,-s.y),u.ctx.textBaseline="bottom",u._activeEffects=[],u.context.logger.debug("Canvas renderer initialized ("+s.width+"x"+s.height+") with scale "+s.scale),u}return t.prototype.applyEffects=function(i){for(var s=this;this._activeEffects.length;)this.popEffect();i.forEach(function(u){return s.applyEffect(u)})},t.prototype.applyEffect=function(i){this.ctx.save(),fT(i)&&(this.ctx.globalAlpha=i.opacity),pT(i)&&(this.ctx.translate(i.offsetX,i.offsetY),this.ctx.transform(i.matrix[0],i.matrix[1],i.matrix[2],i.matrix[3],i.matrix[4],i.matrix[5]),this.ctx.translate(-i.offsetX,-i.offsetY)),I_(i)&&(this.path(i.path),this.ctx.clip()),this._activeEffects.push(i)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(i){return Is(this,void 0,void 0,function(){var s;return ds(this,function(u){switch(u.label){case 0:return s=i.element.container.styles,s.isVisible()?[4,this.renderStackContent(i)]:[3,2];case 1:u.sent(),u.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(i){return Is(this,void 0,void 0,function(){return ds(this,function(s){switch(s.label){case 0:if(En(i.container.flags,16))debugger;return i.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(i)]:[3,3];case 1:return s.sent(),[4,this.renderNodeContent(i)];case 2:s.sent(),s.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(i,s,u){var d=this;if(s===0)this.ctx.fillText(i.text,i.bounds.left,i.bounds.top+u);else{var p=ym(i.text);p.reduce(function(A,v){return d.ctx.fillText(v,A,i.bounds.top+u),A+d.ctx.measureText(v).width},i.bounds.left)}},t.prototype.createFontStyle=function(i){var s=i.fontVariant.filter(function(p){return p==="normal"||p==="small-caps"}).join(""),u=LT(i.fontFamily).join(", "),d=Qh(i.fontSize)?""+i.fontSize.number+i.fontSize.unit:i.fontSize.number+"px";return[[i.fontStyle,s,i.fontWeight,d,u].join(" "),u,d]},t.prototype.renderTextNode=function(i,s){return Is(this,void 0,void 0,function(){var u,d,p,A,v,C,F,E,Q=this;return ds(this,function(T){return u=this.createFontStyle(s),d=u[0],p=u[1],A=u[2],this.ctx.font=d,this.ctx.direction=s.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",v=this.fontMetrics.getMetrics(p,A),C=v.baseline,F=v.middle,E=s.paintOrder,i.textBounds.forEach(function(V){E.forEach(function(R){switch(R){case 0:Q.ctx.fillStyle=Nn(s.color),Q.renderTextWithLetterSpacing(V,s.letterSpacing,C);var W=s.textShadow;W.length&&V.text.trim().length&&(W.slice(0).reverse().forEach(function(j){Q.ctx.shadowColor=Nn(j.color),Q.ctx.shadowOffsetX=j.offsetX.number*Q.options.scale,Q.ctx.shadowOffsetY=j.offsetY.number*Q.options.scale,Q.ctx.shadowBlur=j.blur.number,Q.renderTextWithLetterSpacing(V,s.letterSpacing,C)}),Q.ctx.shadowColor="",Q.ctx.shadowOffsetX=0,Q.ctx.shadowOffsetY=0,Q.ctx.shadowBlur=0),s.textDecorationLine.length&&(Q.ctx.fillStyle=Nn(s.textDecorationColor||s.color),s.textDecorationLine.forEach(function(j){switch(j){case 1:Q.ctx.fillRect(V.bounds.left,Math.round(V.bounds.top+C),V.bounds.width,1);break;case 2:Q.ctx.fillRect(V.bounds.left,Math.round(V.bounds.top),V.bounds.width,1);break;case 3:Q.ctx.fillRect(V.bounds.left,Math.ceil(V.bounds.top+F),V.bounds.width,1);break}}));break;case 1:s.webkitTextStrokeWidth&&V.text.trim().length&&(Q.ctx.strokeStyle=Nn(s.webkitTextStrokeColor),Q.ctx.lineWidth=s.webkitTextStrokeWidth,Q.ctx.lineJoin=window.chrome?"miter":"round",Q.ctx.strokeText(V.text,V.bounds.left,V.bounds.top+C)),Q.ctx.strokeStyle="",Q.ctx.lineWidth=0,Q.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(i,s,u){if(u&&i.intrinsicWidth>0&&i.intrinsicHeight>0){var d=jp(i),p=zp(s);this.path(p),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(u,0,0,i.intrinsicWidth,i.intrinsicHeight,d.left,d.top,d.width,d.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(i){return Is(this,void 0,void 0,function(){var s,u,d,p,A,v,rt,rt,C,F,E,Q,Bt,T,V,Et,R,W,j,rt,ht,Bt,Et;return ds(this,function(Tt){switch(Tt.label){case 0:this.applyEffects(i.getEffects(4)),s=i.container,u=i.curves,d=s.styles,p=0,A=s.textNodes,Tt.label=1;case 1:return p<A.length?(v=A[p],[4,this.renderTextNode(v,d)]):[3,4];case 2:Tt.sent(),Tt.label=3;case 3:return p++,[3,1];case 4:if(!(s instanceof t_))return[3,8];Tt.label=5;case 5:return Tt.trys.push([5,7,,8]),[4,this.context.cache.match(s.src)];case 6:return rt=Tt.sent(),this.renderReplacedElement(s,u,rt),[3,8];case 7:return Tt.sent(),this.context.logger.error("Error loading image "+s.src),[3,8];case 8:if(s instanceof e_&&this.renderReplacedElement(s,u,s.canvas),!(s instanceof r_))return[3,12];Tt.label=9;case 9:return Tt.trys.push([9,11,,12]),[4,this.context.cache.match(s.svg)];case 10:return rt=Tt.sent(),this.renderReplacedElement(s,u,rt),[3,12];case 11:return Tt.sent(),this.context.logger.error("Error loading svg "+s.svg.substring(0,255)),[3,12];case 12:return s instanceof a_&&s.tree?(C=new t(this.context,{scale:this.options.scale,backgroundColor:s.backgroundColor,x:0,y:0,width:s.width,height:s.height}),[4,C.render(s.tree)]):[3,14];case 13:F=Tt.sent(),s.width&&s.height&&this.ctx.drawImage(F,0,0,s.width,s.height,s.bounds.left,s.bounds.top,s.bounds.width,s.bounds.height),Tt.label=14;case 14:if(s instanceof wm&&(E=Math.min(s.bounds.width,s.bounds.height),s.type===Lp?s.checked&&(this.ctx.save(),this.path([new qe(s.bounds.left+E*.39363,s.bounds.top+E*.79),new qe(s.bounds.left+E*.16,s.bounds.top+E*.5549),new qe(s.bounds.left+E*.27347,s.bounds.top+E*.44071),new qe(s.bounds.left+E*.39694,s.bounds.top+E*.5649),new qe(s.bounds.left+E*.72983,s.bounds.top+E*.23),new qe(s.bounds.left+E*.84,s.bounds.top+E*.34085),new qe(s.bounds.left+E*.39363,s.bounds.top+E*.79)]),this.ctx.fillStyle=Nn(n_),this.ctx.fill(),this.ctx.restore()):s.type===Qp&&s.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(s.bounds.left+E/2,s.bounds.top+E/2,E/4,0,Math.PI*2,!0),this.ctx.fillStyle=Nn(n_),this.ctx.fill(),this.ctx.restore())),ET(s)&&s.value.length){switch(Q=this.createFontStyle(d),Bt=Q[0],T=Q[1],V=this.fontMetrics.getMetrics(Bt,T).baseline,this.ctx.font=Bt,this.ctx.fillStyle=Nn(d.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=UT(s.styles.textAlign),Et=jp(s),R=0,s.styles.textAlign){case 1:R+=Et.width/2;break;case 2:R+=Et.width;break}W=Et.add(R,0,0,-Et.height/2+1),this.ctx.save(),this.path([new qe(Et.left,Et.top),new qe(Et.left+Et.width,Et.top),new qe(Et.left+Et.width,Et.top+Et.height),new qe(Et.left,Et.top+Et.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Oh(s.value,W),d.letterSpacing,V),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!En(s.styles.display,2048))return[3,20];if(s.styles.listStyleImage===null)return[3,19];if(j=s.styles.listStyleImage,j.type!==0)return[3,18];rt=void 0,ht=j.url,Tt.label=15;case 15:return Tt.trys.push([15,17,,18]),[4,this.context.cache.match(ht)];case 16:return rt=Tt.sent(),this.ctx.drawImage(rt,s.bounds.left-(rt.width+10),s.bounds.top),[3,18];case 17:return Tt.sent(),this.context.logger.error("Error loading list-style-image "+ht),[3,18];case 18:return[3,20];case 19:i.listValue&&s.styles.listStyleType!==-1&&(Bt=this.createFontStyle(d)[0],this.ctx.font=Bt,this.ctx.fillStyle=Nn(d.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Et=new GA(s.bounds.left,s.bounds.top+Ui(s.styles.paddingTop,s.bounds.width),s.bounds.width,Qw(d.lineHeight,d.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Oh(i.listValue,Et),d.letterSpacing,Qw(d.lineHeight,d.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),Tt.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(i){return Is(this,void 0,void 0,function(){var s,u,j,d,p,j,A,v,j,C,F,j,E,Q,j,T,V,j,R,W,j;return ds(this,function(rt){switch(rt.label){case 0:if(En(i.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(i.element)];case 1:rt.sent(),s=0,u=i.negativeZIndex,rt.label=2;case 2:return s<u.length?(j=u[s],[4,this.renderStack(j)]):[3,5];case 3:rt.sent(),rt.label=4;case 4:return s++,[3,2];case 5:return[4,this.renderNodeContent(i.element)];case 6:rt.sent(),d=0,p=i.nonInlineLevel,rt.label=7;case 7:return d<p.length?(j=p[d],[4,this.renderNode(j)]):[3,10];case 8:rt.sent(),rt.label=9;case 9:return d++,[3,7];case 10:A=0,v=i.nonPositionedFloats,rt.label=11;case 11:return A<v.length?(j=v[A],[4,this.renderStack(j)]):[3,14];case 12:rt.sent(),rt.label=13;case 13:return A++,[3,11];case 14:C=0,F=i.nonPositionedInlineLevel,rt.label=15;case 15:return C<F.length?(j=F[C],[4,this.renderStack(j)]):[3,18];case 16:rt.sent(),rt.label=17;case 17:return C++,[3,15];case 18:E=0,Q=i.inlineLevel,rt.label=19;case 19:return E<Q.length?(j=Q[E],[4,this.renderNode(j)]):[3,22];case 20:rt.sent(),rt.label=21;case 21:return E++,[3,19];case 22:T=0,V=i.zeroOrAutoZIndexOrTransformedOrOpacity,rt.label=23;case 23:return T<V.length?(j=V[T],[4,this.renderStack(j)]):[3,26];case 24:rt.sent(),rt.label=25;case 25:return T++,[3,23];case 26:R=0,W=i.positiveZIndex,rt.label=27;case 27:return R<W.length?(j=W[R],[4,this.renderStack(j)]):[3,30];case 28:rt.sent(),rt.label=29;case 29:return R++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(i){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(i.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(i){this.ctx.beginPath(),this.formatPath(i),this.ctx.closePath()},t.prototype.formatPath=function(i){var s=this;i.forEach(function(u,d){var p=Oo(u)?u.start:u;d===0?s.ctx.moveTo(p.x,p.y):s.ctx.lineTo(p.x,p.y),Oo(u)&&s.ctx.bezierCurveTo(u.startControl.x,u.startControl.y,u.endControl.x,u.endControl.y,u.end.x,u.end.y)})},t.prototype.renderRepeat=function(i,s,u,d){this.path(i),this.ctx.fillStyle=s,this.ctx.translate(u,d),this.ctx.fill(),this.ctx.translate(-u,-d)},t.prototype.resizeImage=function(i,s,u){var d;if(i.width===s&&i.height===u)return i;var p=(d=this.canvas.ownerDocument)!==null&&d!==void 0?d:document,A=p.createElement("canvas");A.width=Math.max(1,s),A.height=Math.max(1,u);var v=A.getContext("2d");return v.drawImage(i,0,0,i.width,i.height,0,0,s,u),A},t.prototype.renderBackgroundImage=function(i){return Is(this,void 0,void 0,function(){var s,u,d,p,A,v;return ds(this,function(C){switch(C.label){case 0:s=i.styles.backgroundImage.length-1,u=function(F){var E,Q,T,jt,Vt,Zt,vt,mt,ft,V,jt,Vt,Zt,vt,mt,R,W,j,rt,ht,Bt,Et,Tt,xt,ft,Nt,jt,at,ct,vt,mt,$t,Vt,Zt,Ht,Yt,Wt,me,et,dt,_t,St;return ds(this,function(Ot){switch(Ot.label){case 0:if(F.type!==0)return[3,5];E=void 0,Q=F.url,Ot.label=1;case 1:return Ot.trys.push([1,3,,4]),[4,d.context.cache.match(Q)];case 2:return E=Ot.sent(),[3,4];case 3:return Ot.sent(),d.context.logger.error("Error loading background-image "+Q),[3,4];case 4:return E&&(T=Um(i,s,[E.width,E.height,E.width/E.height]),jt=T[0],Vt=T[1],Zt=T[2],vt=T[3],mt=T[4],ft=d.ctx.createPattern(d.resizeImage(E,vt,mt),"repeat"),d.renderRepeat(jt,ft,Vt,Zt)),[3,6];case 5:pS(F)?(V=Um(i,s,[null,null,null]),jt=V[0],Vt=V[1],Zt=V[2],vt=V[3],mt=V[4],R=lS(F.angle,vt,mt),W=R[0],j=R[1],rt=R[2],ht=R[3],Bt=R[4],Et=document.createElement("canvas"),Et.width=vt,Et.height=mt,Tt=Et.getContext("2d"),xt=Tt.createLinearGradient(j,ht,rt,Bt),xw(F.stops,W).forEach(function(Rt){return xt.addColorStop(Rt.stop,Nn(Rt.color))}),Tt.fillStyle=xt,Tt.fillRect(0,0,vt,mt),vt>0&&mt>0&&(ft=d.ctx.createPattern(Et,"repeat"),d.renderRepeat(jt,ft,Vt,Zt))):fS(F)&&(Nt=Um(i,s,[null,null,null]),jt=Nt[0],at=Nt[1],ct=Nt[2],vt=Nt[3],mt=Nt[4],$t=F.position.length===0?[nm]:F.position,Vt=Ui($t[0],vt),Zt=Ui($t[$t.length-1],mt),Ht=cS(F,Vt,Zt,vt,mt),Yt=Ht[0],Wt=Ht[1],Yt>0&&Wt>0&&(me=d.ctx.createRadialGradient(at+Vt,ct+Zt,0,at+Vt,ct+Zt,Yt),xw(F.stops,Yt*2).forEach(function(Rt){return me.addColorStop(Rt.stop,Nn(Rt.color))}),d.path(jt),d.ctx.fillStyle=me,Yt!==Wt?(et=i.bounds.left+.5*i.bounds.width,dt=i.bounds.top+.5*i.bounds.height,_t=Wt/Yt,St=1/_t,d.ctx.save(),d.ctx.translate(et,dt),d.ctx.transform(1,0,0,_t,0,0),d.ctx.translate(-et,-dt),d.ctx.fillRect(at,St*(ct-dt)+dt,vt,mt*St),d.ctx.restore()):d.ctx.fill())),Ot.label=6;case 6:return s--,[2]}})},d=this,p=0,A=i.styles.backgroundImage.slice(0).reverse(),C.label=1;case 1:return p<A.length?(v=A[p],[5,u(v)]):[3,4];case 2:C.sent(),C.label=3;case 3:return p++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(i,s,u){return Is(this,void 0,void 0,function(){return ds(this,function(d){return this.path(L_(u,s)),this.ctx.fillStyle=Nn(i),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(i,s,u,d){return Is(this,void 0,void 0,function(){var p,A;return ds(this,function(v){switch(v.label){case 0:return s<3?[4,this.renderSolidBorder(i,u,d)]:[3,2];case 1:return v.sent(),[2];case 2:return p=yT(d,u),this.path(p),this.ctx.fillStyle=Nn(i),this.ctx.fill(),A=vT(d,u),this.path(A),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(i){return Is(this,void 0,void 0,function(){var s,u,d,p,A,v,C,F,E=this;return ds(this,function(Q){switch(Q.label){case 0:return this.applyEffects(i.getEffects(2)),s=i.container.styles,u=!Ol(s.backgroundColor)||s.backgroundImage.length,d=[{style:s.borderTopStyle,color:s.borderTopColor,width:s.borderTopWidth},{style:s.borderRightStyle,color:s.borderRightColor,width:s.borderRightWidth},{style:s.borderBottomStyle,color:s.borderBottomColor,width:s.borderBottomWidth},{style:s.borderLeftStyle,color:s.borderLeftColor,width:s.borderLeftWidth}],p=TT(wu(s.backgroundClip,0),i.curves),u||s.boxShadow.length?(this.ctx.save(),this.path(p),this.ctx.clip(),Ol(s.backgroundColor)||(this.ctx.fillStyle=Nn(s.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(i.container)]):[3,2];case 1:Q.sent(),this.ctx.restore(),s.boxShadow.slice(0).reverse().forEach(function(T){E.ctx.save();var V=Rp(i.curves),R=T.inset?0:ST,W=gT(V,-R+(T.inset?1:-1)*T.spread.number,(T.inset?1:-1)*T.spread.number,T.spread.number*(T.inset?-2:2),T.spread.number*(T.inset?-2:2));T.inset?(E.path(V),E.ctx.clip(),E.mask(W)):(E.mask(V),E.ctx.clip(),E.path(W)),E.ctx.shadowOffsetX=T.offsetX.number+R,E.ctx.shadowOffsetY=T.offsetY.number,E.ctx.shadowColor=Nn(T.color),E.ctx.shadowBlur=T.blur.number,E.ctx.fillStyle=T.inset?Nn(T.color):"rgba(0,0,0,1)",E.ctx.fill(),E.ctx.restore()}),Q.label=2;case 2:A=0,v=0,C=d,Q.label=3;case 3:return v<C.length?(F=C[v],F.style!==0&&!Ol(F.color)&&F.width>0?F.style!==2?[3,5]:[4,this.renderDashedDottedBorder(F.color,F.width,A,i.curves,2)]:[3,11]):[3,13];case 4:return Q.sent(),[3,11];case 5:return F.style!==3?[3,7]:[4,this.renderDashedDottedBorder(F.color,F.width,A,i.curves,3)];case 6:return Q.sent(),[3,11];case 7:return F.style!==4?[3,9]:[4,this.renderDoubleBorder(F.color,F.width,A,i.curves)];case 8:return Q.sent(),[3,11];case 9:return[4,this.renderSolidBorder(F.color,A,i.curves)];case 10:Q.sent(),Q.label=11;case 11:A++,Q.label=12;case 12:return v++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(i,s,u,d,p){return Is(this,void 0,void 0,function(){var A,v,C,F,E,Q,T,V,R,W,j,rt,ht,Bt,Et,Tt,Et,Tt;return ds(this,function(xt){return this.ctx.save(),A=wT(d,u),v=L_(d,u),p===2&&(this.path(v),this.ctx.clip()),Oo(v[0])?(C=v[0].start.x,F=v[0].start.y):(C=v[0].x,F=v[0].y),Oo(v[1])?(E=v[1].end.x,Q=v[1].end.y):(E=v[1].x,Q=v[1].y),u===0||u===2?T=Math.abs(C-E):T=Math.abs(F-Q),this.ctx.beginPath(),p===3?this.formatPath(A):this.formatPath(v.slice(0,2)),V=s<3?s*3:s*2,R=s<3?s*2:s,p===3&&(V=s,R=s),W=!0,T<=V*2?W=!1:T<=V*2+R?(j=T/(2*V+R),V*=j,R*=j):(rt=Math.floor((T+R)/(V+R)),ht=(T-rt*V)/(rt-1),Bt=(T-(rt+1)*V)/rt,R=Bt<=0||Math.abs(R-ht)<Math.abs(R-Bt)?ht:Bt),W&&(p===3?this.ctx.setLineDash([0,V+R]):this.ctx.setLineDash([V,R])),p===3?(this.ctx.lineCap="round",this.ctx.lineWidth=s):this.ctx.lineWidth=s*2+1.1,this.ctx.strokeStyle=Nn(i),this.ctx.stroke(),this.ctx.setLineDash([]),p===2&&(Oo(v[0])&&(Et=v[3],Tt=v[0],this.ctx.beginPath(),this.formatPath([new qe(Et.end.x,Et.end.y),new qe(Tt.start.x,Tt.start.y)]),this.ctx.stroke()),Oo(v[1])&&(Et=v[1],Tt=v[2],this.ctx.beginPath(),this.formatPath([new qe(Et.end.x,Et.end.y),new qe(Tt.start.x,Tt.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(i){return Is(this,void 0,void 0,function(){var s;return ds(this,function(u){switch(u.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Nn(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),s=mT(i),[4,this.renderStack(s)];case 1:return u.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(M_),ET=function(n){return n instanceof o_||n instanceof s_?!0:n instanceof wm&&n.type!==Qp&&n.type!==Lp},TT=function(n,t){switch(n){case 0:return Rp(t);case 2:return uT(t);case 1:default:return zp(t)}},UT=function(n){switch(n){case 1:return"center";case 2:return"right";case 0:default:return"left"}},PT=["-apple-system","system-ui"],LT=function(n){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?n.filter(function(t){return PT.indexOf(t)===-1}):n},QT=function(n){ga(t,n);function t(i,s){var u=n.call(this,i,s)||this;return u.canvas=s.canvas?s.canvas:document.createElement("canvas"),u.ctx=u.canvas.getContext("2d"),u.options=s,u.canvas.width=Math.floor(s.width*s.scale),u.canvas.height=Math.floor(s.height*s.scale),u.canvas.style.width=s.width+"px",u.canvas.style.height=s.height+"px",u.ctx.scale(u.options.scale,u.options.scale),u.ctx.translate(-s.x,-s.y),u.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+s.width+"x"+s.height+" at "+s.x+","+s.y+") with scale "+s.scale),u}return t.prototype.render=function(i){return Is(this,void 0,void 0,function(){var s,u;return ds(this,function(d){switch(d.label){case 0:return s=mm(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,i),[4,kT(s)];case 1:return u=d.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Nn(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(u,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(M_),kT=function(n){return new Promise(function(t,i){var s=new Image;s.onload=function(){t(s)},s.onerror=i,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(n))})},MT=function(){function n(t){var i=t.id,s=t.enabled;this.id=i,this.enabled=s,this.start=Date.now()}return n.prototype.debug=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Jd([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},n.prototype.getTime=function(){return Date.now()-this.start},n.prototype.info=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Jd([this.id,this.getTime()+"ms"],t))},n.prototype.warn=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Jd([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},n.prototype.error=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Jd([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},n.instances={},n}(),DT=function(){function n(t,i){var s;this.windowBounds=i,this.instanceName="#"+n.instanceCount++,this.logger=new MT({id:this.instanceName,enabled:t.logging}),this.cache=(s=t.cache)!==null&&s!==void 0?s:new iT(this,t)}return n.instanceCount=1,n}(),NT=function(n,t){return t===void 0&&(t={}),OT(n,t)};typeof window<"u"&&S_.setContext(window);var OT=function(n,t){return Is(void 0,void 0,void 0,function(){var i,s,u,d,p,A,v,C,F,E,Q,T,V,R,W,j,rt,ht,Bt,Et,xt,Tt,xt,ft,Nt,jt,at,ct,vt,mt,$t,Vt,Zt,Ht,Yt,Wt,me,et,dt,_t;return ds(this,function(St){switch(St.label){case 0:if(!n||typeof n!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(i=n.ownerDocument,!i)throw new Error("Element is not attached to a Document");if(s=i.defaultView,!s)throw new Error("Document is not attached to a Window");return u={allowTaint:(ft=t.allowTaint)!==null&&ft!==void 0?ft:!1,imageTimeout:(Nt=t.imageTimeout)!==null&&Nt!==void 0?Nt:15e3,proxy:t.proxy,useCORS:(jt=t.useCORS)!==null&&jt!==void 0?jt:!1},d=Dg({logging:(at=t.logging)!==null&&at!==void 0?at:!0,cache:t.cache},u),p={windowWidth:(ct=t.windowWidth)!==null&&ct!==void 0?ct:s.innerWidth,windowHeight:(vt=t.windowHeight)!==null&&vt!==void 0?vt:s.innerHeight,scrollX:(mt=t.scrollX)!==null&&mt!==void 0?mt:s.pageXOffset,scrollY:($t=t.scrollY)!==null&&$t!==void 0?$t:s.pageYOffset},A=new GA(p.scrollX,p.scrollY,p.windowWidth,p.windowHeight),v=new DT(d,A),C=(Vt=t.foreignObjectRendering)!==null&&Vt!==void 0?Vt:!1,F={allowTaint:(Zt=t.allowTaint)!==null&&Zt!==void 0?Zt:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:C,copyStyles:C},v.logger.debug("Starting document clone with size "+A.width+"x"+A.height+" scrolled to "+-A.left+","+-A.top),E=new C_(v,n,F),Q=E.clonedReferenceElement,Q?[4,E.toIFrame(i,A)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return T=St.sent(),V=bm(Q)||RE(Q)?g3(Q.ownerDocument):tp(v,Q),R=V.width,W=V.height,j=V.left,rt=V.top,ht=RT(v,Q,t.backgroundColor),Bt={canvas:t.canvas,backgroundColor:ht,scale:(Yt=(Ht=t.scale)!==null&&Ht!==void 0?Ht:s.devicePixelRatio)!==null&&Yt!==void 0?Yt:1,x:((Wt=t.x)!==null&&Wt!==void 0?Wt:0)+j,y:((me=t.y)!==null&&me!==void 0?me:0)+rt,width:(et=t.width)!==null&&et!==void 0?et:Math.ceil(R),height:(dt=t.height)!==null&&dt!==void 0?dt:Math.ceil(W)},C?(v.logger.debug("Document cloned, using foreign object rendering"),xt=new QT(v,Bt),[4,xt.render(Q)]):[3,3];case 2:return Et=St.sent(),[3,5];case 3:return v.logger.debug("Document cloned, element located at "+j+","+rt+" with size "+R+"x"+W+" using computed rendering"),v.logger.debug("Starting DOM parsing"),Tt=l_(v,Q),ht===Tt.styles.backgroundColor&&(Tt.styles.backgroundColor=ZA.TRANSPARENT),v.logger.debug("Starting renderer for element at "+Bt.x+","+Bt.y+" with size "+Bt.width+"x"+Bt.height),xt=new IT(v,Bt),[4,xt.render(Tt)];case 4:Et=St.sent(),St.label=5;case 5:return(!((_t=t.removeContainer)!==null&&_t!==void 0)||_t)&&(C_.destroy(T)||v.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),v.logger.debug("Finished rendering"),[2,Et]}})})},RT=function(n,t,i){var s=t.ownerDocument,u=s.documentElement?Mh(n,getComputedStyle(s.documentElement).backgroundColor):ZA.TRANSPARENT,d=s.body?Mh(n,getComputedStyle(s.body).backgroundColor):ZA.TRANSPARENT,p=typeof i=="string"?Mh(n,i):i===null?ZA.TRANSPARENT:4294967295;return t===s.documentElement?Ol(u)?Ol(d)?p:d:u:p};const zT=Object.freeze(Object.defineProperty({__proto__:null,default:NT},Symbol.toStringTag,{value:"Module"}));/*! @license DOMPurify 2.5.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.5/LICENSE */function Vl(n){"@babel/helpers - typeof";return Vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vl(n)}function Pm(n,t){return Pm=Object.setPrototypeOf||function(i,s){return i.__proto__=s,i},Pm(n,t)}function HT(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $p(n,t,i){return HT()?$p=Reflect.construct:$p=function(s,u,d){var p=[null];p.push.apply(p,u);var A=Function.bind.apply(s,p),v=new A;return d&&Pm(v,d.prototype),v},$p.apply(null,arguments)}function ya(n){return VT(n)||jT(n)||KT(n)||$T()}function VT(n){if(Array.isArray(n))return Lm(n)}function jT(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function KT(n,t){if(n){if(typeof n=="string")return Lm(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Lm(n,t)}}function Lm(n,t){(t==null||t>n.length)&&(t=n.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=n[i];return s}function $T(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var qT=Object.hasOwnProperty,D_=Object.setPrototypeOf,GT=Object.isFrozen,XT=Object.getPrototypeOf,ZT=Object.getOwnPropertyDescriptor,Us=Object.freeze,zo=Object.seal,WT=Object.create,N_=typeof Reflect<"u"&&Reflect,qp=N_.apply,Qm=N_.construct;qp||(qp=function(n,t,i){return n.apply(t,i)}),Us||(Us=function(n){return n}),zo||(zo=function(n){return n}),Qm||(Qm=function(n,t){return $p(n,ya(t))});var YT=Ho(Array.prototype.forEach),O_=Ho(Array.prototype.pop),Vh=Ho(Array.prototype.push),Gp=Ho(String.prototype.toLowerCase),km=Ho(String.prototype.toString),R_=Ho(String.prototype.match),va=Ho(String.prototype.replace),JT=Ho(String.prototype.indexOf),tU=Ho(String.prototype.trim),Yn=Ho(RegExp.prototype.test),Mm=eU(TypeError);function Ho(n){return function(t){for(var i=arguments.length,s=new Array(i>1?i-1:0),u=1;u<i;u++)s[u-1]=arguments[u];return qp(n,t,s)}}function eU(n){return function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Qm(n,i)}}function Hr(n,t,i){var s;i=(s=i)!==null&&s!==void 0?s:Gp,D_&&D_(n,null);for(var u=t.length;u--;){var d=t[u];if(typeof d=="string"){var p=i(d);p!==d&&(GT(t)||(t[u]=p),d=p)}n[d]=!0}return n}function wc(n){var t=WT(null),i;for(i in n)qp(qT,n,[i])===!0&&(t[i]=n[i]);return t}function Xp(n,t){for(;n!==null;){var i=ZT(n,t);if(i){if(i.get)return Ho(i.get);if(typeof i.value=="function")return Ho(i.value)}n=XT(n)}function s(u){return console.warn("fallback value for",u),null}return s}var z_=Us(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Dm=Us(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Nm=Us(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),rU=Us(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Om=Us(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),iU=Us(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),H_=Us(["#text"]),V_=Us(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Rm=Us(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),j_=Us(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Zp=Us(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),nU=zo(/\{\{[\w\W]*|[\w\W]*\}\}/gm),sU=zo(/<%[\w\W]*|[\w\W]*%>/gm),oU=zo(/\${[\w\W]*}/gm),aU=zo(/^data-[\-\w.\u00B7-\uFFFF]/),AU=zo(/^aria-[\-\w]+$/),lU=zo(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),cU=zo(/^(?:\w+script|data):/i),uU=zo(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),hU=zo(/^html$/i),dU=zo(/^[a-z][.\w]*(-[.\w]+)+$/i),pU=function(){return typeof window>"u"?null:window},fU=function(n,t){if(Vl(n)!=="object"||typeof n.createPolicy!="function")return null;var i=null,s="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(s)&&(i=t.currentScript.getAttribute(s));var u="dompurify"+(i?"#"+i:"");try{return n.createPolicy(u,{createHTML:function(d){return d},createScriptURL:function(d){return d}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function K_(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:pU(),t=function(Ct){return K_(Ct)};if(t.version="2.5.5",t.removed=[],!n||!n.document||n.document.nodeType!==9)return t.isSupported=!1,t;var i=n.document,s=n.document,u=n.DocumentFragment,d=n.HTMLTemplateElement,p=n.Node,A=n.Element,v=n.NodeFilter,C=n.NamedNodeMap,F=C===void 0?n.NamedNodeMap||n.MozNamedAttrMap:C,E=n.HTMLFormElement,Q=n.DOMParser,T=n.trustedTypes,V=A.prototype,R=Xp(V,"cloneNode"),W=Xp(V,"nextSibling"),j=Xp(V,"childNodes"),rt=Xp(V,"parentNode");if(typeof d=="function"){var ht=s.createElement("template");ht.content&&ht.content.ownerDocument&&(s=ht.content.ownerDocument)}var Bt=fU(T,i),Et=Bt?Bt.createHTML(""):"",Tt=s,xt=Tt.implementation,ft=Tt.createNodeIterator,Nt=Tt.createDocumentFragment,jt=Tt.getElementsByTagName,at=i.importNode,ct={};try{ct=wc(s).documentMode?s.documentMode:{}}catch{}var vt={};t.isSupported=typeof rt=="function"&&xt&&xt.createHTMLDocument!==void 0&&ct!==9;var mt=nU,$t=sU,Vt=oU,Zt=aU,Ht=AU,Yt=cU,Wt=uU,me=dU,et=lU,dt=null,_t=Hr({},[].concat(ya(z_),ya(Dm),ya(Nm),ya(Om),ya(H_))),St=null,Ot=Hr({},[].concat(ya(V_),ya(Rm),ya(j_),ya(Zp))),Rt=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Jt=null,re=null,be=!0,_e=!0,Te=!1,Qe=!0,je=!1,oe=!0,nt=!1,cr=!1,Ke=!1,Ae=!1,ge=!1,Se=!1,Ce=!0,He=!1,Xe="user-content-",nr=!0,yr=!1,br={},ce=null,Je=Hr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),sr=null,Ie=Hr({},["audio","video","img","source","image","track"]),Xr=null,he=Hr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),rr="http://www.w3.org/1998/Math/MathML",Ee="http://www.w3.org/2000/svg",vr="http://www.w3.org/1999/xhtml",ti=vr,Pe=!1,mi=null,Rr=Hr({},[rr,Ee,vr],km),ri,jr=["application/xhtml+xml","text/html"],gt="text/html",K,q=null,At=s.createElement("form"),pt=function(Ct){return Ct instanceof RegExp||Ct instanceof Function},Pt=function(Ct){q&&q===Ct||((!Ct||Vl(Ct)!=="object")&&(Ct={}),Ct=wc(Ct),ri=jr.indexOf(Ct.PARSER_MEDIA_TYPE)===-1?ri=gt:ri=Ct.PARSER_MEDIA_TYPE,K=ri==="application/xhtml+xml"?km:Gp,dt="ALLOWED_TAGS"in Ct?Hr({},Ct.ALLOWED_TAGS,K):_t,St="ALLOWED_ATTR"in Ct?Hr({},Ct.ALLOWED_ATTR,K):Ot,mi="ALLOWED_NAMESPACES"in Ct?Hr({},Ct.ALLOWED_NAMESPACES,km):Rr,Xr="ADD_URI_SAFE_ATTR"in Ct?Hr(wc(he),Ct.ADD_URI_SAFE_ATTR,K):he,sr="ADD_DATA_URI_TAGS"in Ct?Hr(wc(Ie),Ct.ADD_DATA_URI_TAGS,K):Ie,ce="FORBID_CONTENTS"in Ct?Hr({},Ct.FORBID_CONTENTS,K):Je,Jt="FORBID_TAGS"in Ct?Hr({},Ct.FORBID_TAGS,K):{},re="FORBID_ATTR"in Ct?Hr({},Ct.FORBID_ATTR,K):{},br="USE_PROFILES"in Ct?Ct.USE_PROFILES:!1,be=Ct.ALLOW_ARIA_ATTR!==!1,_e=Ct.ALLOW_DATA_ATTR!==!1,Te=Ct.ALLOW_UNKNOWN_PROTOCOLS||!1,Qe=Ct.ALLOW_SELF_CLOSE_IN_ATTR!==!1,je=Ct.SAFE_FOR_TEMPLATES||!1,oe=Ct.SAFE_FOR_XML!==!1,nt=Ct.WHOLE_DOCUMENT||!1,Ae=Ct.RETURN_DOM||!1,ge=Ct.RETURN_DOM_FRAGMENT||!1,Se=Ct.RETURN_TRUSTED_TYPE||!1,Ke=Ct.FORCE_BODY||!1,Ce=Ct.SANITIZE_DOM!==!1,He=Ct.SANITIZE_NAMED_PROPS||!1,nr=Ct.KEEP_CONTENT!==!1,yr=Ct.IN_PLACE||!1,et=Ct.ALLOWED_URI_REGEXP||et,ti=Ct.NAMESPACE||vr,Rt=Ct.CUSTOM_ELEMENT_HANDLING||{},Ct.CUSTOM_ELEMENT_HANDLING&&pt(Ct.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Rt.tagNameCheck=Ct.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ct.CUSTOM_ELEMENT_HANDLING&&pt(Ct.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Rt.attributeNameCheck=Ct.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ct.CUSTOM_ELEMENT_HANDLING&&typeof Ct.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Rt.allowCustomizedBuiltInElements=Ct.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),je&&(_e=!1),ge&&(Ae=!0),br&&(dt=Hr({},ya(H_)),St=[],br.html===!0&&(Hr(dt,z_),Hr(St,V_)),br.svg===!0&&(Hr(dt,Dm),Hr(St,Rm),Hr(St,Zp)),br.svgFilters===!0&&(Hr(dt,Nm),Hr(St,Rm),Hr(St,Zp)),br.mathMl===!0&&(Hr(dt,Om),Hr(St,j_),Hr(St,Zp))),Ct.ADD_TAGS&&(dt===_t&&(dt=wc(dt)),Hr(dt,Ct.ADD_TAGS,K)),Ct.ADD_ATTR&&(St===Ot&&(St=wc(St)),Hr(St,Ct.ADD_ATTR,K)),Ct.ADD_URI_SAFE_ATTR&&Hr(Xr,Ct.ADD_URI_SAFE_ATTR,K),Ct.FORBID_CONTENTS&&(ce===Je&&(ce=wc(ce)),Hr(ce,Ct.FORBID_CONTENTS,K)),nr&&(dt["#text"]=!0),nt&&Hr(dt,["html","head","body"]),dt.table&&(Hr(dt,["tbody"]),delete Jt.tbody),Us&&Us(Ct),q=Ct)},Dt=Hr({},["mi","mo","mn","ms","mtext"]),Ut=Hr({},["foreignobject","annotation-xml"]),It=Hr({},["title","style","font","a","script"]),te=Hr({},Dm);Hr(te,Nm),Hr(te,rU);var le=Hr({},Om);Hr(le,iU);var qt=function(Ct){var Fe=rt(Ct);(!Fe||!Fe.tagName)&&(Fe={namespaceURI:ti,tagName:"template"});var ye=Gp(Ct.tagName),Lr=Gp(Fe.tagName);return mi[Ct.namespaceURI]?Ct.namespaceURI===Ee?Fe.namespaceURI===vr?ye==="svg":Fe.namespaceURI===rr?ye==="svg"&&(Lr==="annotation-xml"||Dt[Lr]):!!te[ye]:Ct.namespaceURI===rr?Fe.namespaceURI===vr?ye==="math":Fe.namespaceURI===Ee?ye==="math"&&Ut[Lr]:!!le[ye]:Ct.namespaceURI===vr?Fe.namespaceURI===Ee&&!Ut[Lr]||Fe.namespaceURI===rr&&!Dt[Lr]?!1:!le[ye]&&(It[ye]||!te[ye]):!!(ri==="application/xhtml+xml"&&mi[Ct.namespaceURI]):!1},pe=function(Ct){Vh(t.removed,{element:Ct});try{Ct.parentNode.removeChild(Ct)}catch{try{Ct.outerHTML=Et}catch{Ct.remove()}}},ke=function(Ct,Fe){try{Vh(t.removed,{attribute:Fe.getAttributeNode(Ct),from:Fe})}catch{Vh(t.removed,{attribute:null,from:Fe})}if(Fe.removeAttribute(Ct),Ct==="is"&&!St[Ct])if(Ae||ge)try{pe(Fe)}catch{}else try{Fe.setAttribute(Ct,"")}catch{}},Ge=function(Ct){var Fe,ye;if(Ke)Ct="<remove></remove>"+Ct;else{var Lr=R_(Ct,/^[\r\n\t ]+/);ye=Lr&&Lr[0]}ri==="application/xhtml+xml"&&ti===vr&&(Ct='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ct+"</body></html>");var dr=Bt?Bt.createHTML(Ct):Ct;if(ti===vr)try{Fe=new Q().parseFromString(dr,ri)}catch{}if(!Fe||!Fe.documentElement){Fe=xt.createDocument(ti,"template",null);try{Fe.documentElement.innerHTML=Pe?Et:dr}catch{}}var zi=Fe.body||Fe.documentElement;return Ct&&ye&&zi.insertBefore(s.createTextNode(ye),zi.childNodes[0]||null),ti===vr?jt.call(Fe,nt?"html":"body")[0]:nt?Fe.documentElement:zi},ar=function(Ct){return ft.call(Ct.ownerDocument||Ct,Ct,v.SHOW_ELEMENT|v.SHOW_COMMENT|v.SHOW_TEXT|v.SHOW_PROCESSING_INSTRUCTION|v.SHOW_CDATA_SECTION,null,!1)},xr=function(Ct){return Ct instanceof E&&(typeof Ct.nodeName!="string"||typeof Ct.textContent!="string"||typeof Ct.removeChild!="function"||!(Ct.attributes instanceof F)||typeof Ct.removeAttribute!="function"||typeof Ct.setAttribute!="function"||typeof Ct.namespaceURI!="string"||typeof Ct.insertBefore!="function"||typeof Ct.hasChildNodes!="function")},tr=function(Ct){return Vl(p)==="object"?Ct instanceof p:Ct&&Vl(Ct)==="object"&&typeof Ct.nodeType=="number"&&typeof Ct.nodeName=="string"},Br=function(Ct,Fe,ye){vt[Ct]&&YT(vt[Ct],function(Lr){Lr.call(t,Fe,ye,q)})},Kr=function(Ct){var Fe;if(Br("beforeSanitizeElements",Ct,null),xr(Ct)||Yn(/[\u0080-\uFFFF]/,Ct.nodeName))return pe(Ct),!0;var ye=K(Ct.nodeName);if(Br("uponSanitizeElement",Ct,{tagName:ye,allowedTags:dt}),Ct.hasChildNodes()&&!tr(Ct.firstElementChild)&&(!tr(Ct.content)||!tr(Ct.content.firstElementChild))&&Yn(/<[/\w]/g,Ct.innerHTML)&&Yn(/<[/\w]/g,Ct.textContent)||ye==="select"&&Yn(/<template/i,Ct.innerHTML)||Ct.nodeType===7||oe&&Ct.nodeType===8&&Yn(/<[/\w]/g,Ct.data))return pe(Ct),!0;if(!dt[ye]||Jt[ye]){if(!Jt[ye]&&gr(ye)&&(Rt.tagNameCheck instanceof RegExp&&Yn(Rt.tagNameCheck,ye)||Rt.tagNameCheck instanceof Function&&Rt.tagNameCheck(ye)))return!1;if(nr&&!ce[ye]){var Lr=rt(Ct)||Ct.parentNode,dr=j(Ct)||Ct.childNodes;if(dr&&Lr)for(var zi=dr.length,ai=zi-1;ai>=0;--ai){var yi=R(dr[ai],!0);yi.__removalCount=(Ct.__removalCount||0)+1,Lr.insertBefore(yi,W(Ct))}}return pe(Ct),!0}return Ct instanceof A&&!qt(Ct)||(ye==="noscript"||ye==="noembed"||ye==="noframes")&&Yn(/<\/no(script|embed|frames)/i,Ct.innerHTML)?(pe(Ct),!0):(je&&Ct.nodeType===3&&(Fe=Ct.textContent,Fe=va(Fe,mt," "),Fe=va(Fe,$t," "),Fe=va(Fe,Vt," "),Ct.textContent!==Fe&&(Vh(t.removed,{element:Ct.cloneNode()}),Ct.textContent=Fe)),Br("afterSanitizeElements",Ct,null),!1)},qr=function(Ct,Fe,ye){if(Ce&&(Fe==="id"||Fe==="name")&&(ye in s||ye in At))return!1;if(!(_e&&!re[Fe]&&Yn(Zt,Fe))&&!(be&&Yn(Ht,Fe))){if(!St[Fe]||re[Fe]){if(!(gr(Ct)&&(Rt.tagNameCheck instanceof RegExp&&Yn(Rt.tagNameCheck,Ct)||Rt.tagNameCheck instanceof Function&&Rt.tagNameCheck(Ct))&&(Rt.attributeNameCheck instanceof RegExp&&Yn(Rt.attributeNameCheck,Fe)||Rt.attributeNameCheck instanceof Function&&Rt.attributeNameCheck(Fe))||Fe==="is"&&Rt.allowCustomizedBuiltInElements&&(Rt.tagNameCheck instanceof RegExp&&Yn(Rt.tagNameCheck,ye)||Rt.tagNameCheck instanceof Function&&Rt.tagNameCheck(ye))))return!1}else if(!Xr[Fe]&&!Yn(et,va(ye,Wt,""))&&!((Fe==="src"||Fe==="xlink:href"||Fe==="href")&&Ct!=="script"&&JT(ye,"data:")===0&&sr[Ct])&&!(Te&&!Yn(Yt,va(ye,Wt,"")))&&ye)return!1}return!0},gr=function(Ct){return Ct!=="annotation-xml"&&R_(Ct,me)},Mr=function(Ct){var Fe,ye,Lr,dr;Br("beforeSanitizeAttributes",Ct,null);var zi=Ct.attributes;if(zi){var ai={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:St};for(dr=zi.length;dr--;){Fe=zi[dr];var yi=Fe,di=yi.name,Oi=yi.namespaceURI;if(ye=di==="value"?Fe.value:tU(Fe.value),Lr=K(di),ai.attrName=Lr,ai.attrValue=ye,ai.keepAttr=!0,ai.forceKeepAttr=void 0,Br("uponSanitizeAttribute",Ct,ai),ye=ai.attrValue,!ai.forceKeepAttr&&(ke(di,Ct),!!ai.keepAttr)){if(!Qe&&Yn(/\/>/i,ye)){ke(di,Ct);continue}if(oe&&Yn(/((--!?|])>)|<\/(style|title)/i,ye)){ke(di,Ct);continue}je&&(ye=va(ye,mt," "),ye=va(ye,$t," "),ye=va(ye,Vt," "));var Xi=K(Ct.nodeName);if(qr(Xi,Lr,ye)){if(He&&(Lr==="id"||Lr==="name")&&(ke(di,Ct),ye=Xe+ye),Bt&&Vl(T)==="object"&&typeof T.getAttributeType=="function"&&!Oi)switch(T.getAttributeType(Xi,Lr)){case"TrustedHTML":{ye=Bt.createHTML(ye);break}case"TrustedScriptURL":{ye=Bt.createScriptURL(ye);break}}try{Oi?Ct.setAttributeNS(Oi,di,ye):Ct.setAttribute(di,ye),xr(Ct)?pe(Ct):O_(t.removed)}catch{}}}}Br("afterSanitizeAttributes",Ct,null)}},Zr=function Ct(Fe){var ye,Lr=ar(Fe);for(Br("beforeSanitizeShadowDOM",Fe,null);ye=Lr.nextNode();)Br("uponSanitizeShadowNode",ye,null),!Kr(ye)&&(ye.content instanceof u&&Ct(ye.content),Mr(ye));Br("afterSanitizeShadowDOM",Fe,null)};return t.sanitize=function(Ct){var Fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ye,Lr,dr,zi,ai;if(Pe=!Ct,Pe&&(Ct="<!-->"),typeof Ct!="string"&&!tr(Ct))if(typeof Ct.toString=="function"){if(Ct=Ct.toString(),typeof Ct!="string")throw Mm("dirty is not a string, aborting")}else throw Mm("toString is not a function");if(!t.isSupported){if(Vl(n.toStaticHTML)==="object"||typeof n.toStaticHTML=="function"){if(typeof Ct=="string")return n.toStaticHTML(Ct);if(tr(Ct))return n.toStaticHTML(Ct.outerHTML)}return Ct}if(cr||Pt(Fe),t.removed=[],typeof Ct=="string"&&(yr=!1),yr){if(Ct.nodeName){var yi=K(Ct.nodeName);if(!dt[yi]||Jt[yi])throw Mm("root node is forbidden and cannot be sanitized in-place")}}else if(Ct instanceof p)ye=Ge("<!---->"),Lr=ye.ownerDocument.importNode(Ct,!0),Lr.nodeType===1&&Lr.nodeName==="BODY"||Lr.nodeName==="HTML"?ye=Lr:ye.appendChild(Lr);else{if(!Ae&&!je&&!nt&&Ct.indexOf("<")===-1)return Bt&&Se?Bt.createHTML(Ct):Ct;if(ye=Ge(Ct),!ye)return Ae?null:Se?Et:""}ye&&Ke&&pe(ye.firstChild);for(var di=ar(yr?Ct:ye);dr=di.nextNode();)dr.nodeType===3&&dr===zi||Kr(dr)||(dr.content instanceof u&&Zr(dr.content),Mr(dr),zi=dr);if(zi=null,yr)return Ct;if(Ae){if(ge)for(ai=Nt.call(ye.ownerDocument);ye.firstChild;)ai.appendChild(ye.firstChild);else ai=ye;return(St.shadowroot||St.shadowrootmod)&&(ai=at.call(i,ai,!0)),ai}var Oi=nt?ye.outerHTML:ye.innerHTML;return nt&&dt["!doctype"]&&ye.ownerDocument&&ye.ownerDocument.doctype&&ye.ownerDocument.doctype.name&&Yn(hU,ye.ownerDocument.doctype.name)&&(Oi="<!DOCTYPE "+ye.ownerDocument.doctype.name+`>
`+Oi),je&&(Oi=va(Oi,mt," "),Oi=va(Oi,$t," "),Oi=va(Oi,Vt," ")),Bt&&Se?Bt.createHTML(Oi):Oi},t.setConfig=function(Ct){Pt(Ct),cr=!0},t.clearConfig=function(){q=null,cr=!1},t.isValidAttribute=function(Ct,Fe,ye){q||Pt({});var Lr=K(Ct),dr=K(Fe);return qr(Lr,dr,ye)},t.addHook=function(Ct,Fe){typeof Fe=="function"&&(vt[Ct]=vt[Ct]||[],Vh(vt[Ct],Fe))},t.removeHook=function(Ct){if(vt[Ct])return O_(vt[Ct])},t.removeHooks=function(Ct){vt[Ct]&&(vt[Ct]=[])},t.removeAllHooks=function(){vt={}},t}var gU=K_();const mU=Object.freeze(Object.defineProperty({__proto__:null,default:gU},Symbol.toStringTag,{value:"Module"}));var _u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var jh=function(n){return n&&n.Math===Math&&n},An=jh(typeof globalThis=="object"&&globalThis)||jh(typeof window=="object"&&window)||jh(typeof self=="object"&&self)||jh(typeof _u=="object"&&_u)||jh(typeof _u=="object"&&_u)||function(){return this}()||Function("return this")(),Kh={},ln=function(n){try{return!!n()}catch{return!0}},yU=ln,wa=!yU(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),vU=ln,Wp=!vU(function(){var n=(function(){}).bind();return typeof n!="function"||n.hasOwnProperty("prototype")}),wU=Wp,Yp=Function.prototype.call,Jn=wU?Yp.bind(Yp):function(){return Yp.apply(Yp,arguments)},q_={},G_={}.propertyIsEnumerable,X_=Object.getOwnPropertyDescriptor,_U=X_&&!G_.call({1:2},1);q_.f=_U?function(n){var t=X_(this,n);return!!t&&t.enumerable}:G_;var zm=function(n,t){return{enumerable:!(n&1),configurable:!(n&2),writable:!(n&4),value:t}},Z_=Wp,W_=Function.prototype,Hm=W_.call,bU=Z_&&W_.bind.bind(Hm,Hm),cn=Z_?bU:function(n){return function(){return Hm.apply(n,arguments)}},Y_=cn,xU=Y_({}.toString),BU=Y_("".slice),_c=function(n){return BU(xU(n),8,-1)},CU=cn,FU=ln,SU=_c,Vm=Object,IU=CU("".split),J_=FU(function(){return!Vm("z").propertyIsEnumerable(0)})?function(n){return SU(n)==="String"?IU(n,""):Vm(n)}:Vm,bc=function(n){return n==null},EU=bc,TU=TypeError,_a=function(n){if(EU(n))throw new TU("Can't call method on "+n);return n},UU=J_,PU=_a,$h=function(n){return UU(PU(n))},jm=typeof document=="object"&&document.all,un=typeof jm>"u"&&jm!==void 0?function(n){return typeof n=="function"||n===jm}:function(n){return typeof n=="function"},LU=un,ba=function(n){return typeof n=="object"?n!==null:LU(n)},Km=An,QU=un,kU=function(n){return QU(n)?n:void 0},xc=function(n,t){return arguments.length<2?kU(Km[n]):Km[n]&&Km[n][t]},MU=cn,Jp=MU({}.isPrototypeOf),tf=typeof navigator<"u"&&String(navigator.userAgent)||"",t2=An,$m=tf,e2=t2.process,r2=t2.Deno,i2=e2&&e2.versions||r2&&r2.version,n2=i2&&i2.v8,xa,ef;n2&&(xa=n2.split("."),ef=xa[0]>0&&xa[0]<4?1:+(xa[0]+xa[1])),!ef&&$m&&(xa=$m.match(/Edge\/(\d+)/),(!xa||xa[1]>=74)&&(xa=$m.match(/Chrome\/(\d+)/),xa&&(ef=+xa[1])));var qm=ef,s2=qm,DU=ln,NU=An,OU=NU.String,o2=!!Object.getOwnPropertySymbols&&!DU(function(){var n=Symbol("symbol detection");return!OU(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&s2&&s2<41}),RU=o2,a2=RU&&!Symbol.sham&&typeof Symbol.iterator=="symbol",zU=xc,HU=un,VU=Jp,jU=a2,KU=Object,A2=jU?function(n){return typeof n=="symbol"}:function(n){var t=zU("Symbol");return HU(t)&&VU(t.prototype,KU(n))},$U=String,rf=function(n){try{return $U(n)}catch{return"Object"}},qU=un,GU=rf,XU=TypeError,YA=function(n){if(qU(n))return n;throw new XU(GU(n)+" is not a function")},ZU=YA,WU=bc,bu=function(n,t){var i=n[t];return WU(i)?void 0:ZU(i)},Gm=Jn,Xm=un,Zm=ba,YU=TypeError,JU=function(n,t){var i,s;if(t==="string"&&Xm(i=n.toString)&&!Zm(s=Gm(i,n))||Xm(i=n.valueOf)&&!Zm(s=Gm(i,n))||t!=="string"&&Xm(i=n.toString)&&!Zm(s=Gm(i,n)))return s;throw new YU("Can't convert object to primitive value")},l2={exports:{}},c2=An,tP=Object.defineProperty,Wm=function(n,t){try{tP(c2,n,{value:t,configurable:!0,writable:!0})}catch{c2[n]=t}return t},eP=An,rP=Wm,u2="__core-js_shared__",h2=l2.exports=eP[u2]||rP(u2,{});(h2.versions||(h2.versions=[])).push({version:"3.37.1",mode:"global",copyright:" 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE",source:"https://github.com/zloirock/core-js"});var Ym=l2.exports,d2=Ym,Jm=function(n,t){return d2[n]||(d2[n]=t||{})},iP=_a,nP=Object,nf=function(n){return nP(iP(n))},sP=cn,oP=nf,aP=sP({}.hasOwnProperty),Ba=Object.hasOwn||function(n,t){return aP(oP(n),t)},AP=cn,lP=0,cP=Math.random(),uP=AP(1 .toString),p2=function(n){return"Symbol("+(n===void 0?"":n)+")_"+uP(++lP+cP,36)},hP=An,dP=Jm,f2=Ba,pP=p2,fP=o2,gP=a2,xu=hP.Symbol,t0=dP("wks"),mP=gP?xu.for||xu:xu&&xu.withoutSetter||pP,On=function(n){return f2(t0,n)||(t0[n]=fP&&f2(xu,n)?xu[n]:mP("Symbol."+n)),t0[n]},yP=Jn,g2=ba,m2=A2,vP=bu,wP=JU,_P=On,bP=TypeError,xP=_P("toPrimitive"),BP=function(n,t){if(!g2(n)||m2(n))return n;var i=vP(n,xP),s;if(i){if(t===void 0&&(t="default"),s=yP(i,n,t),!g2(s)||m2(s))return s;throw new bP("Can't convert object to primitive value")}return t===void 0&&(t="number"),wP(n,t)},CP=BP,FP=A2,y2=function(n){var t=CP(n,"string");return FP(t)?t:t+""},SP=An,v2=ba,e0=SP.document,IP=v2(e0)&&v2(e0.createElement),sf=function(n){return IP?e0.createElement(n):{}},EP=wa,TP=ln,UP=sf,w2=!EP&&!TP(function(){return Object.defineProperty(UP("div"),"a",{get:function(){return 7}}).a!==7}),PP=wa,LP=Jn,QP=q_,kP=zm,MP=$h,DP=y2,NP=Ba,OP=w2,_2=Object.getOwnPropertyDescriptor;Kh.f=PP?_2:function(n,t){if(n=MP(n),t=DP(t),OP)try{return _2(n,t)}catch{}if(NP(n,t))return kP(!LP(QP.f,n,t),n[t])};var JA={},RP=wa,zP=ln,b2=RP&&zP(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),HP=ba,VP=String,jP=TypeError,Ps=function(n){if(HP(n))return n;throw new jP(VP(n)+" is not an object")},KP=wa,$P=w2,qP=b2,of=Ps,x2=y2,GP=TypeError,r0=Object.defineProperty,XP=Object.getOwnPropertyDescriptor,i0="enumerable",n0="configurable",s0="writable";JA.f=KP?qP?function(n,t,i){if(of(n),t=x2(t),of(i),typeof n=="function"&&t==="prototype"&&"value"in i&&s0 in i&&!i[s0]){var s=XP(n,t);s&&s[s0]&&(n[t]=i.value,i={configurable:n0 in i?i[n0]:s[n0],enumerable:i0 in i?i[i0]:s[i0],writable:!1})}return r0(n,t,i)}:r0:function(n,t,i){if(of(n),t=x2(t),of(i),$P)try{return r0(n,t,i)}catch{}if("get"in i||"set"in i)throw new GP("Accessors not supported");return"value"in i&&(n[t]=i.value),n};var ZP=wa,WP=JA,YP=zm,qh=ZP?function(n,t,i){return WP.f(n,t,YP(1,i))}:function(n,t,i){return n[t]=i,n},B2={exports:{}},o0=wa,JP=Ba,C2=Function.prototype,tL=o0&&Object.getOwnPropertyDescriptor,a0=JP(C2,"name"),eL=a0&&(function(){}).name==="something",rL=a0&&(!o0||o0&&tL(C2,"name").configurable),af={EXISTS:a0,PROPER:eL,CONFIGURABLE:rL},iL=cn,nL=un,A0=Ym,sL=iL(Function.toString);nL(A0.inspectSource)||(A0.inspectSource=function(n){return sL(n)});var l0=A0.inspectSource,oL=An,aL=un,F2=oL.WeakMap,AL=aL(F2)&&/native code/.test(String(F2)),lL=Jm,cL=p2,S2=lL("keys"),c0=function(n){return S2[n]||(S2[n]=cL(n))},u0={},uL=AL,I2=An,hL=ba,dL=qh,h0=Ba,d0=Ym,pL=c0,fL=u0,E2="Object already initialized",p0=I2.TypeError,gL=I2.WeakMap,Af,Gh,lf,mL=function(n){return lf(n)?Gh(n):Af(n,{})},yL=function(n){return function(t){var i;if(!hL(t)||(i=Gh(t)).type!==n)throw new p0("Incompatible receiver, "+n+" required");return i}};if(uL||d0.state){var sA=d0.state||(d0.state=new gL);sA.get=sA.get,sA.has=sA.has,sA.set=sA.set,Af=function(n,t){if(sA.has(n))throw new p0(E2);return t.facade=n,sA.set(n,t),t},Gh=function(n){return sA.get(n)||{}},lf=function(n){return sA.has(n)}}else{var Bu=pL("state");fL[Bu]=!0,Af=function(n,t){if(h0(n,Bu))throw new p0(E2);return t.facade=n,dL(n,Bu,t),t},Gh=function(n){return h0(n,Bu)?n[Bu]:{}},lf=function(n){return h0(n,Bu)}}var cf={set:Af,get:Gh,has:lf,enforce:mL,getterFor:yL},f0=cn,vL=ln,wL=un,uf=Ba,g0=wa,_L=af.CONFIGURABLE,bL=l0,T2=cf,xL=T2.enforce,BL=T2.get,U2=String,hf=Object.defineProperty,CL=f0("".slice),FL=f0("".replace),SL=f0([].join),IL=g0&&!vL(function(){return hf(function(){},"length",{value:8}).length!==8}),EL=String(String).split("String"),TL=B2.exports=function(n,t,i){CL(U2(t),0,7)==="Symbol("&&(t="["+FL(U2(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),i&&i.getter&&(t="get "+t),i&&i.setter&&(t="set "+t),(!uf(n,"name")||_L&&n.name!==t)&&(g0?hf(n,"name",{value:t,configurable:!0}):n.name=t),IL&&i&&uf(i,"arity")&&n.length!==i.arity&&hf(n,"length",{value:i.arity});try{i&&uf(i,"constructor")&&i.constructor?g0&&hf(n,"prototype",{writable:!1}):n.prototype&&(n.prototype=void 0)}catch{}var s=xL(n);return uf(s,"source")||(s.source=SL(EL,typeof t=="string"?t:"")),n};Function.prototype.toString=TL(function(){return wL(this)&&BL(this).source||bL(this)},"toString");var P2=B2.exports,UL=un,PL=JA,LL=P2,QL=Wm,Bc=function(n,t,i,s){s||(s={});var u=s.enumerable,d=s.name!==void 0?s.name:t;if(UL(i)&&LL(i,d,s),s.global)u?n[t]=i:QL(t,i);else{try{s.unsafe?n[t]&&(u=!0):delete n[t]}catch{}u?n[t]=i:PL.f(n,t,{value:i,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return n},L2={},kL=Math.ceil,ML=Math.floor,DL=Math.trunc||function(n){var t=+n;return(t>0?ML:kL)(t)},NL=DL,df=function(n){var t=+n;return t!==t||t===0?0:NL(t)},OL=df,RL=Math.max,zL=Math.min,HL=function(n,t){var i=OL(n);return i<0?RL(i+t,0):zL(i,t)},VL=df,jL=Math.min,Cu=function(n){var t=VL(n);return t>0?jL(t,9007199254740991):0},KL=Cu,m0=function(n){return KL(n.length)},$L=$h,qL=HL,GL=m0,Q2=function(n){return function(t,i,s){var u=$L(t),d=GL(u);if(d===0)return!n&&-1;var p=qL(s,d),A;if(n&&i!==i){for(;d>p;)if(A=u[p++],A!==A)return!0}else for(;d>p;p++)if((n||p in u)&&u[p]===i)return n||p||0;return!n&&-1}},k2={includes:Q2(!0),indexOf:Q2(!1)},XL=cn,y0=Ba,ZL=$h,WL=k2.indexOf,YL=u0,M2=XL([].push),D2=function(n,t){var i=ZL(n),s=0,u=[],d;for(d in i)!y0(YL,d)&&y0(i,d)&&M2(u,d);for(;t.length>s;)y0(i,d=t[s++])&&(~WL(u,d)||M2(u,d));return u},v0=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],JL=D2,tQ=v0,eQ=tQ.concat("length","prototype");L2.f=Object.getOwnPropertyNames||function(n){return JL(n,eQ)};var N2={};N2.f=Object.getOwnPropertySymbols;var rQ=xc,iQ=cn,nQ=L2,sQ=N2,oQ=Ps,aQ=iQ([].concat),AQ=rQ("Reflect","ownKeys")||function(n){var t=nQ.f(oQ(n)),i=sQ.f;return i?aQ(t,i(n)):t},O2=Ba,lQ=AQ,cQ=Kh,uQ=JA,hQ=function(n,t,i){for(var s=lQ(t),u=uQ.f,d=cQ.f,p=0;p<s.length;p++){var A=s[p];!O2(n,A)&&!(i&&O2(i,A))&&u(n,A,d(t,A))}},dQ=ln,pQ=un,fQ=/#|\.prototype\./,Xh=function(n,t){var i=mQ[gQ(n)];return i===vQ?!0:i===yQ?!1:pQ(t)?dQ(t):!!t},gQ=Xh.normalize=function(n){return String(n).replace(fQ,".").toLowerCase()},mQ=Xh.data={},yQ=Xh.NATIVE="N",vQ=Xh.POLYFILL="P",R2=Xh,pf=An,wQ=Kh.f,_Q=qh,bQ=Bc,xQ=Wm,BQ=hQ,CQ=R2,Ls=function(n,t){var i=n.target,s=n.global,u=n.stat,d,p,A,v,C,F;if(s?p=pf:u?p=pf[i]||xQ(i,{}):p=pf[i]&&pf[i].prototype,p)for(A in t){if(C=t[A],n.dontCallGetSet?(F=wQ(p,A),v=F&&F.value):v=p[A],d=CQ(s?A:i+(u?".":"#")+A,n.forced),!d&&v!==void 0){if(typeof C==typeof v)continue;BQ(C,v)}(n.sham||v&&v.sham)&&_Q(C,"sham",!0),bQ(p,A,C,n)}},FQ=An,SQ=_c,Zh=SQ(FQ.process)==="process",IQ=cn,EQ=YA,TQ=function(n,t,i){try{return IQ(EQ(Object.getOwnPropertyDescriptor(n,t)[i]))}catch{}},UQ=ba,PQ=function(n){return UQ(n)||n===null},LQ=PQ,QQ=String,kQ=TypeError,MQ=function(n){if(LQ(n))return n;throw new kQ("Can't set "+QQ(n)+" as a prototype")},DQ=TQ,NQ=ba,OQ=_a,RQ=MQ,z2=Object.setPrototypeOf||("__proto__"in{}?function(){var n=!1,t={},i;try{i=DQ(Object.prototype,"__proto__","set"),i(t,[]),n=t instanceof Array}catch{}return function(s,u){return OQ(s),RQ(u),NQ(s)&&(n?i(s,u):s.__proto__=u),s}}():void 0),zQ=JA.f,HQ=Ba,VQ=On,H2=VQ("toStringTag"),ff=function(n,t,i){n&&!i&&(n=n.prototype),n&&!HQ(n,H2)&&zQ(n,H2,{configurable:!0,value:t})},V2=P2,jQ=JA,KQ=function(n,t,i){return i.get&&V2(i.get,t,{getter:!0}),i.set&&V2(i.set,t,{setter:!0}),jQ.f(n,t,i)},$Q=xc,qQ=KQ,GQ=On,XQ=wa,j2=GQ("species"),ZQ=function(n){var t=$Q(n);XQ&&t&&!t[j2]&&qQ(t,j2,{configurable:!0,get:function(){return this}})},WQ=Jp,YQ=TypeError,JQ=function(n,t){if(WQ(t,n))return n;throw new YQ("Incorrect invocation")},t6=On,e6=t6("toStringTag"),K2={};K2[e6]="z";var r6=String(K2)==="[object z]",i6=r6,n6=un,gf=_c,s6=On,o6=s6("toStringTag"),a6=Object,A6=gf(function(){return arguments}())==="Arguments",l6=function(n,t){try{return n[t]}catch{}},w0=i6?gf:function(n){var t,i,s;return n===void 0?"Undefined":n===null?"Null":typeof(i=l6(t=a6(n),o6))=="string"?i:A6?gf(t):(s=gf(t))==="Object"&&n6(t.callee)?"Arguments":s},c6=cn,u6=ln,$2=un,h6=w0,d6=xc,p6=l0,q2=function(){},G2=d6("Reflect","construct"),_0=/^\s*(?:class|function)\b/,f6=c6(_0.exec),g6=!_0.test(q2),Wh=function(n){if(!$2(n))return!1;try{return G2(q2,[],n),!0}catch{return!1}},X2=function(n){if(!$2(n))return!1;switch(h6(n)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return g6||!!f6(_0,p6(n))}catch{return!0}};X2.sham=!0;var m6=!G2||u6(function(){var n;return Wh(Wh.call)||!Wh(Object)||!Wh(function(){n=!0})||n})?X2:Wh,y6=m6,v6=rf,w6=TypeError,_6=function(n){if(y6(n))return n;throw new w6(v6(n)+" is not a constructor")},Z2=Ps,b6=_6,x6=bc,B6=On,C6=B6("species"),W2=function(n,t){var i=Z2(n).constructor,s;return i===void 0||x6(s=Z2(i)[C6])?t:b6(s)},F6=Wp,Y2=Function.prototype,J2=Y2.apply,tb=Y2.call,eb=typeof Reflect=="object"&&Reflect.apply||(F6?tb.bind(J2):function(){return tb.apply(J2,arguments)}),S6=_c,I6=cn,mf=function(n){if(S6(n)==="Function")return I6(n)},rb=mf,E6=YA,T6=Wp,U6=rb(rb.bind),b0=function(n,t){return E6(n),t===void 0?n:T6?U6(n,t):function(){return n.apply(t,arguments)}},P6=xc,ib=P6("document","documentElement"),L6=cn,Q6=L6([].slice),k6=TypeError,M6=function(n,t){if(n<t)throw new k6("Not enough arguments");return n},D6=tf,nb=/(?:ipad|iphone|ipod).*applewebkit/i.test(D6),_o=An,N6=eb,O6=b0,sb=un,R6=Ba,ob=ln,ab=ib,z6=Q6,Ab=sf,H6=M6,V6=nb,j6=Zh,x0=_o.setImmediate,B0=_o.clearImmediate,K6=_o.process,C0=_o.Dispatch,$6=_o.Function,lb=_o.MessageChannel,q6=_o.String,F0=0,Yh={},cb="onreadystatechange",Jh,Cc,S0,I0;ob(function(){Jh=_o.location});var E0=function(n){if(R6(Yh,n)){var t=Yh[n];delete Yh[n],t()}},T0=function(n){return function(){E0(n)}},ub=function(n){E0(n.data)},hb=function(n){_o.postMessage(q6(n),Jh.protocol+"//"+Jh.host)};(!x0||!B0)&&(x0=function(n){H6(arguments.length,1);var t=sb(n)?n:$6(n),i=z6(arguments,1);return Yh[++F0]=function(){N6(t,void 0,i)},Cc(F0),F0},B0=function(n){delete Yh[n]},j6?Cc=function(n){K6.nextTick(T0(n))}:C0&&C0.now?Cc=function(n){C0.now(T0(n))}:lb&&!V6?(S0=new lb,I0=S0.port2,S0.port1.onmessage=ub,Cc=O6(I0.postMessage,I0)):_o.addEventListener&&sb(_o.postMessage)&&!_o.importScripts&&Jh&&Jh.protocol!=="file:"&&!ob(hb)?(Cc=hb,_o.addEventListener("message",ub,!1)):cb in Ab("script")?Cc=function(n){ab.appendChild(Ab("script"))[cb]=function(){ab.removeChild(this),E0(n)}}:Cc=function(n){setTimeout(T0(n),0)});var db={set:x0,clear:B0},pb=An,G6=wa,X6=Object.getOwnPropertyDescriptor,Z6=function(n){if(!G6)return pb[n];var t=X6(pb,n);return t&&t.value},fb=function(){this.head=null,this.tail=null};fb.prototype={add:function(n){var t={item:n,next:null},i=this.tail;i?i.next=t:this.head=t,this.tail=t},get:function(){var n=this.head;if(n){var t=this.head=n.next;return t===null&&(this.tail=null),n.item}}};var gb=fb,W6=tf,Y6=/ipad|iphone|ipod/i.test(W6)&&typeof Pebble<"u",J6=tf,tk=/web0s(?!.*chrome)/i.test(J6),Fu=An,ek=Z6,mb=b0,U0=db.set,rk=gb,ik=nb,nk=Y6,sk=tk,P0=Zh,yb=Fu.MutationObserver||Fu.WebKitMutationObserver,vb=Fu.document,wb=Fu.process,yf=Fu.Promise,L0=ek("queueMicrotask"),Su,Q0,k0,vf,_b;if(!L0){var wf=new rk,_f=function(){var n,t;for(P0&&(n=wb.domain)&&n.exit();t=wf.get();)try{t()}catch(i){throw wf.head&&Su(),i}n&&n.enter()};!ik&&!P0&&!sk&&yb&&vb?(Q0=!0,k0=vb.createTextNode(""),new yb(_f).observe(k0,{characterData:!0}),Su=function(){k0.data=Q0=!Q0}):!nk&&yf&&yf.resolve?(vf=yf.resolve(void 0),vf.constructor=yf,_b=mb(vf.then,vf),Su=function(){_b(_f)}):P0?Su=function(){wb.nextTick(_f)}:(U0=mb(U0,Fu),Su=function(){U0(_f)}),L0=function(n){wf.head||Su(),wf.add(n)}}var ok=L0,ak=function(n,t){try{arguments.length===1?console.error(n):console.error(n,t)}catch{}},M0=function(n){try{return{error:!1,value:n()}}catch(t){return{error:!0,value:t}}},Ak=An,bf=Ak.Promise,bb=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",lk=bb,ck=Zh,uk=!lk&&!ck&&typeof window=="object"&&typeof document=="object",hk=An,td=bf,dk=un,pk=R2,fk=l0,gk=On,mk=uk,yk=bb,D0=qm;td&&td.prototype;var vk=gk("species"),N0=!1,xb=dk(hk.PromiseRejectionEvent),wk=pk("Promise",function(){var n=fk(td),t=n!==String(td);if(!t&&D0===66)return!0;if(!D0||D0<51||!/native code/.test(n)){var i=new td(function(d){d(1)}),s=function(d){d(function(){},function(){})},u=i.constructor={};if(u[vk]=s,N0=i.then(function(){})instanceof s,!N0)return!0}return!t&&(mk||yk)&&!xb}),ed={CONSTRUCTOR:wk,REJECTION_EVENT:xb,SUBCLASSING:N0},Iu={},Bb=YA,_k=TypeError,bk=function(n){var t,i;this.promise=new n(function(s,u){if(t!==void 0||i!==void 0)throw new _k("Bad Promise constructor");t=s,i=u}),this.resolve=Bb(t),this.reject=Bb(i)};Iu.f=function(n){return new bk(n)};var xk=Ls,xf=Zh,jl=An,Eu=Jn,Cb=Bc,Fb=z2,Bk=ff,Ck=ZQ,Fk=YA,Bf=un,Sk=ba,Ik=JQ,Ek=W2,Sb=db.set,O0=ok,Tk=ak,Uk=M0,Pk=gb,Ib=cf,Cf=bf,R0=ed,Eb=Iu,Ff="Promise",Tb=R0.CONSTRUCTOR,Lk=R0.REJECTION_EVENT,Qk=R0.SUBCLASSING,z0=Ib.getterFor(Ff),kk=Ib.set,Tu=Cf&&Cf.prototype,Fc=Cf,Sf=Tu,Ub=jl.TypeError,H0=jl.document,V0=jl.process,j0=Eb.f,Mk=j0,Dk=!!(H0&&H0.createEvent&&jl.dispatchEvent),Pb="unhandledrejection",Nk="rejectionhandled",Lb=0,Qb=1,Ok=2,K0=1,kb=2,If,Mb,Rk,Db,Nb=function(n){var t;return Sk(n)&&Bf(t=n.then)?t:!1},Ob=function(n,t){var i=t.value,s=t.state===Qb,u=s?n.ok:n.fail,d=n.resolve,p=n.reject,A=n.domain,v,C,F;try{u?(s||(t.rejection===kb&&Hk(t),t.rejection=K0),u===!0?v=i:(A&&A.enter(),v=u(i),A&&(A.exit(),F=!0)),v===n.promise?p(new Ub("Promise-chain cycle")):(C=Nb(v))?Eu(C,v,d,p):d(v)):p(i)}catch(E){A&&!F&&A.exit(),p(E)}},Rb=function(n,t){n.notified||(n.notified=!0,O0(function(){for(var i=n.reactions,s;s=i.get();)Ob(s,n);n.notified=!1,t&&!n.rejection&&zk(n)}))},zb=function(n,t,i){var s,u;Dk?(s=H0.createEvent("Event"),s.promise=t,s.reason=i,s.initEvent(n,!1,!0),jl.dispatchEvent(s)):s={promise:t,reason:i},!Lk&&(u=jl["on"+n])?u(s):n===Pb&&Tk("Unhandled promise rejection",i)},zk=function(n){Eu(Sb,jl,function(){var t=n.facade,i=n.value,s=Hb(n),u;if(s&&(u=Uk(function(){xf?V0.emit("unhandledRejection",i,t):zb(Pb,t,i)}),n.rejection=xf||Hb(n)?kb:K0,u.error))throw u.value})},Hb=function(n){return n.rejection!==K0&&!n.parent},Hk=function(n){Eu(Sb,jl,function(){var t=n.facade;xf?V0.emit("rejectionHandled",t):zb(Nk,t,n.value)})},Uu=function(n,t,i){return function(s){n(t,s,i)}},Pu=function(n,t,i){n.done||(n.done=!0,i&&(n=i),n.value=t,n.state=Ok,Rb(n,!0))},$0=function(n,t,i){if(!n.done){n.done=!0,i&&(n=i);try{if(n.facade===t)throw new Ub("Promise can't be resolved itself");var s=Nb(t);s?O0(function(){var u={done:!1};try{Eu(s,t,Uu($0,u,n),Uu(Pu,u,n))}catch(d){Pu(u,d,n)}}):(n.value=t,n.state=Qb,Rb(n,!1))}catch(u){Pu({done:!1},u,n)}}};if(Tb&&(Fc=function(n){Ik(this,Sf),Fk(n),Eu(If,this);var t=z0(this);try{n(Uu($0,t),Uu(Pu,t))}catch(i){Pu(t,i)}},Sf=Fc.prototype,If=function(n){kk(this,{type:Ff,done:!1,notified:!1,parent:!1,reactions:new Pk,rejection:!1,state:Lb,value:void 0})},If.prototype=Cb(Sf,"then",function(n,t){var i=z0(this),s=j0(Ek(this,Fc));return i.parent=!0,s.ok=Bf(n)?n:!0,s.fail=Bf(t)&&t,s.domain=xf?V0.domain:void 0,i.state===Lb?i.reactions.add(s):O0(function(){Ob(s,i)}),s.promise}),Mb=function(){var n=new If,t=z0(n);this.promise=n,this.resolve=Uu($0,t),this.reject=Uu(Pu,t)},Eb.f=j0=function(n){return n===Fc||n===Rk?new Mb(n):Mk(n)},Bf(Cf)&&Tu!==Object.prototype)){Db=Tu.then,Qk||Cb(Tu,"then",function(n,t){var i=this;return new Fc(function(s,u){Eu(Db,i,s,u)}).then(n,t)},{unsafe:!0});try{delete Tu.constructor}catch{}Fb&&Fb(Tu,Sf)}xk({global:!0,constructor:!0,wrap:!0,forced:Tb},{Promise:Fc}),Bk(Fc,Ff,!1),Ck(Ff);var rd={},Vk=On,jk=rd,Kk=Vk("iterator"),$k=Array.prototype,qk=function(n){return n!==void 0&&(jk.Array===n||$k[Kk]===n)},Gk=w0,Vb=bu,Xk=bc,Zk=rd,Wk=On,Yk=Wk("iterator"),jb=function(n){if(!Xk(n))return Vb(n,Yk)||Vb(n,"@@iterator")||Zk[Gk(n)]},Jk=Jn,tM=YA,eM=Ps,rM=rf,iM=jb,nM=TypeError,sM=function(n,t){var i=arguments.length<2?iM(n):t;if(tM(i))return eM(Jk(i,n));throw new nM(rM(n)+" is not iterable")},oM=Jn,Kb=Ps,aM=bu,AM=function(n,t,i){var s,u;Kb(n);try{if(s=aM(n,"return"),!s){if(t==="throw")throw i;return i}s=oM(s,n)}catch(d){u=!0,s=d}if(t==="throw")throw i;if(u)throw s;return Kb(s),i},lM=b0,cM=Jn,uM=Ps,hM=rf,dM=qk,pM=m0,$b=Jp,fM=sM,gM=jb,qb=AM,mM=TypeError,Ef=function(n,t){this.stopped=n,this.result=t},Gb=Ef.prototype,Xb=function(n,t,i){var s=i&&i.that,u=!!(i&&i.AS_ENTRIES),d=!!(i&&i.IS_RECORD),p=!!(i&&i.IS_ITERATOR),A=!!(i&&i.INTERRUPTED),v=lM(t,s),C,F,E,Q,T,V,R,W=function(rt){return C&&qb(C,"normal",rt),new Ef(!0,rt)},j=function(rt){return u?(uM(rt),A?v(rt[0],rt[1],W):v(rt[0],rt[1])):A?v(rt,W):v(rt)};if(d)C=n.iterator;else if(p)C=n;else{if(F=gM(n),!F)throw new mM(hM(n)+" is not iterable");if(dM(F)){for(E=0,Q=pM(n);Q>E;E++)if(T=j(n[E]),T&&$b(Gb,T))return T;return new Ef(!1)}C=fM(n,F)}for(V=d?n.next:C.next;!(R=cM(V,C)).done;){try{T=j(R.value)}catch(rt){qb(C,"throw",rt)}if(typeof T=="object"&&T&&$b(Gb,T))return T}return new Ef(!1)},yM=On,Zb=yM("iterator"),Wb=!1;try{var vM=0,Yb={next:function(){return{done:!!vM++}},return:function(){Wb=!0}};Yb[Zb]=function(){return this},Array.from(Yb,function(){throw 2})}catch{}var wM=function(n,t){try{if(!t&&!Wb)return!1}catch{return!1}var i=!1;try{var s={};s[Zb]=function(){return{next:function(){return{done:i=!0}}}},n(s)}catch{}return i},_M=bf,bM=wM,xM=ed.CONSTRUCTOR,Jb=xM||!bM(function(n){_M.all(n).then(void 0,function(){})}),BM=Ls,CM=Jn,FM=YA,SM=Iu,IM=M0,EM=Xb,TM=Jb;BM({target:"Promise",stat:!0,forced:TM},{all:function(n){var t=this,i=SM.f(t),s=i.resolve,u=i.reject,d=IM(function(){var p=FM(t.resolve),A=[],v=0,C=1;EM(n,function(F){var E=v++,Q=!1;C++,CM(p,t,F).then(function(T){Q||(Q=!0,A[E]=T,--C||s(A))},u)}),--C||s(A)});return d.error&&u(d.value),i.promise}});var UM=Ls,PM=ed.CONSTRUCTOR,q0=bf,LM=xc,QM=un,kM=Bc,tx=q0&&q0.prototype;if(UM({target:"Promise",proto:!0,forced:PM,real:!0},{catch:function(n){return this.then(void 0,n)}}),QM(q0)){var ex=LM("Promise").prototype.catch;tx.catch!==ex&&kM(tx,"catch",ex,{unsafe:!0})}var MM=Ls,DM=Jn,NM=YA,OM=Iu,RM=M0,zM=Xb,HM=Jb;MM({target:"Promise",stat:!0,forced:HM},{race:function(n){var t=this,i=OM.f(t),s=i.reject,u=RM(function(){var d=NM(t.resolve);zM(n,function(p){DM(d,t,p).then(i.resolve,s)})});return u.error&&s(u.value),i.promise}});var VM=Ls,jM=Iu,KM=ed.CONSTRUCTOR;VM({target:"Promise",stat:!0,forced:KM},{reject:function(n){var t=jM.f(this),i=t.reject;return i(n),t.promise}});var $M=Ps,qM=ba,GM=Iu,XM=function(n,t){if($M(n),qM(t)&&t.constructor===n)return t;var i=GM.f(n),s=i.resolve;return s(t),i.promise},ZM=Ls,WM=xc,YM=ed.CONSTRUCTOR,JM=XM;WM("Promise"),ZM({target:"Promise",stat:!0,forced:YM},{resolve:function(n){return JM(this,n)}});function rx(n,t,i,s,u,d,p){try{var A=n[d](p),v=A.value}catch(C){return void i(C)}A.done?t(v):Promise.resolve(v).then(s,u)}function tl(n){return function(){var t=this,i=arguments;return new Promise(function(s,u){var d=n.apply(t,i);function p(v){rx(d,s,u,p,A,"next",v)}function A(v){rx(d,s,u,p,A,"throw",v)}p(void 0)})}}var tD=w0,eD=String,oA=function(n){if(tD(n)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return eD(n)},rD=Ps,ix=function(){var n=rD(this),t="";return n.hasIndices&&(t+="d"),n.global&&(t+="g"),n.ignoreCase&&(t+="i"),n.multiline&&(t+="m"),n.dotAll&&(t+="s"),n.unicode&&(t+="u"),n.unicodeSets&&(t+="v"),n.sticky&&(t+="y"),t},G0=ln,iD=An,X0=iD.RegExp,Z0=G0(function(){var n=X0("a","y");return n.lastIndex=2,n.exec("abcd")!==null}),nD=Z0||G0(function(){return!X0("a","y").sticky}),sD=Z0||G0(function(){var n=X0("^r","gy");return n.lastIndex=2,n.exec("str")!==null}),nx={BROKEN_CARET:sD,MISSED_STICKY:nD,UNSUPPORTED_Y:Z0},sx={},oD=D2,aD=v0,AD=Object.keys||function(n){return oD(n,aD)},lD=wa,cD=b2,uD=JA,hD=Ps,dD=$h,pD=AD;sx.f=lD&&!cD?Object.defineProperties:function(n,t){hD(n);for(var i=dD(t),s=pD(t),u=s.length,d=0,p;u>d;)uD.f(n,p=s[d++],i[p]);return n};var fD=Ps,gD=sx,ox=v0,mD=u0,yD=ib,vD=sf,wD=c0,ax=">",Ax="<",W0="prototype",Y0="script",lx=wD("IE_PROTO"),J0=function(){},cx=function(n){return Ax+Y0+ax+n+Ax+"/"+Y0+ax},ux=function(n){n.write(cx("")),n.close();var t=n.parentWindow.Object;return n=null,t},_D=function(){var n=vD("iframe"),t="java"+Y0+":",i;return n.style.display="none",yD.appendChild(n),n.src=String(t),i=n.contentWindow.document,i.open(),i.write(cx("document.F=Object")),i.close(),i.F},Tf,Uf=function(){try{Tf=new ActiveXObject("htmlfile")}catch{}Uf=typeof document<"u"?document.domain&&Tf?ux(Tf):_D():ux(Tf);for(var n=ox.length;n--;)delete Uf[W0][ox[n]];return Uf()};mD[lx]=!0;var t1=Object.create||function(n,t){var i;return n!==null?(J0[W0]=fD(n),i=new J0,J0[W0]=null,i[lx]=n):i=Uf(),t===void 0?i:gD.f(i,t)},bD=ln,xD=An,BD=xD.RegExp,CD=bD(function(){var n=BD(".","s");return!(n.dotAll&&n.test(`
`)&&n.flags==="s")}),FD=ln,SD=An,ID=SD.RegExp,ED=FD(function(){var n=ID("(?<a>b)","g");return n.exec("b").groups.a!=="b"||"b".replace(n,"$<a>c")!=="bc"}),Lu=Jn,Pf=cn,TD=oA,UD=ix,PD=nx,LD=Jm,QD=t1,kD=cf.get,MD=CD,DD=ED,ND=LD("native-string-replace",String.prototype.replace),Lf=RegExp.prototype.exec,e1=Lf,OD=Pf("".charAt),RD=Pf("".indexOf),zD=Pf("".replace),r1=Pf("".slice),i1=function(){var n=/a/,t=/b*/g;return Lu(Lf,n,"a"),Lu(Lf,t,"a"),n.lastIndex!==0||t.lastIndex!==0}(),hx=PD.BROKEN_CARET,n1=/()??/.exec("")[1]!==void 0,HD=i1||n1||hx||MD||DD;HD&&(e1=function(n){var t=this,i=kD(t),s=TD(n),u=i.raw,d,p,A,v,C,F,E;if(u)return u.lastIndex=t.lastIndex,d=Lu(e1,u,s),t.lastIndex=u.lastIndex,d;var Q=i.groups,T=hx&&t.sticky,V=Lu(UD,t),R=t.source,W=0,j=s;if(T&&(V=zD(V,"y",""),RD(V,"g")===-1&&(V+="g"),j=r1(s,t.lastIndex),t.lastIndex>0&&(!t.multiline||t.multiline&&OD(s,t.lastIndex-1)!==`
`)&&(R="(?: "+R+")",j=" "+j,W++),p=new RegExp("^(?:"+R+")",V)),n1&&(p=new RegExp("^"+R+"$(?!\\s)",V)),i1&&(A=t.lastIndex),v=Lu(Lf,T?p:t,j),T?v?(v.input=r1(v.input,W),v[0]=r1(v[0],W),v.index=t.lastIndex,t.lastIndex+=v[0].length):t.lastIndex=0:i1&&v&&(t.lastIndex=t.global?v.index+v[0].length:A),n1&&v&&v.length>1&&Lu(ND,v[0],p,function(){for(C=1;C<arguments.length-2;C++)arguments[C]===void 0&&(v[C]=void 0)}),v&&Q)for(v.groups=F=QD(null),C=0;C<Q.length;C++)E=Q[C],F[E[0]]=v[E[1]];return v});var s1=e1,VD=Ls,dx=s1;VD({target:"RegExp",proto:!0,forced:/./.exec!==dx},{exec:dx});var px=Jn,fx=Bc,jD=s1,gx=ln,mx=On,KD=qh,$D=mx("species"),o1=RegExp.prototype,a1=function(n,t,i,s){var u=mx(n),d=!gx(function(){var C={};return C[u]=function(){return 7},""[n](C)!==7}),p=d&&!gx(function(){var C=!1,F=/a/;return n==="split"&&(F={},F.constructor={},F.constructor[$D]=function(){return F},F.flags="",F[u]=/./[u]),F.exec=function(){return C=!0,null},F[u](""),!C});if(!d||!p||i){var A=/./[u],v=t(u,""[n],function(C,F,E,Q,T){var V=F.exec;return V===jD||V===o1.exec?d&&!T?{done:!0,value:px(A,F,E,Q)}:{done:!0,value:px(C,E,F,Q)}:{done:!1}});fx(String.prototype,n,v[0]),fx(o1,u,v[1])}s&&KD(o1[u],"sham",!0)},A1=cn,qD=df,GD=oA,XD=_a,ZD=A1("".charAt),yx=A1("".charCodeAt),WD=A1("".slice),vx=function(n){return function(t,i){var s=GD(XD(t)),u=qD(i),d=s.length,p,A;return u<0||u>=d?n?"":void 0:(p=yx(s,u),p<55296||p>56319||u+1===d||(A=yx(s,u+1))<56320||A>57343?n?ZD(s,u):p:n?WD(s,u,u+2):(p-55296<<10)+(A-56320)+65536)}},YD={codeAt:vx(!1),charAt:vx(!0)},JD=YD.charAt,l1=function(n,t,i){return t+(i?JD(n,t).length:1)},wx=Jn,t8=Ps,e8=un,r8=_c,i8=s1,n8=TypeError,c1=function(n,t){var i=n.exec;if(e8(i)){var s=wx(i,n,t);return s!==null&&t8(s),s}if(r8(n)==="RegExp")return wx(i8,n,t);throw new n8("RegExp#exec called on incompatible receiver")},s8=Jn,o8=a1,a8=Ps,A8=bc,l8=Cu,u1=oA,c8=_a,u8=bu,h8=l1,_x=c1;o8("match",function(n,t,i){return[function(s){var u=c8(this),d=A8(s)?void 0:u8(s,n);return d?s8(d,s,u):new RegExp(s)[n](u1(u))},function(s){var u=a8(this),d=u1(s),p=i(t,u,d);if(p.done)return p.value;if(!u.global)return _x(u,d);var A=u.unicode;u.lastIndex=0;for(var v=[],C=0,F;(F=_x(u,d))!==null;){var E=u1(F[0]);v[C]=E,E===""&&(u.lastIndex=h8(d,l8(u.lastIndex),A)),C++}return C===0?null:v}]});var h1=cn,d8=nf,p8=Math.floor,d1=h1("".charAt),f8=h1("".replace),p1=h1("".slice),g8=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,m8=/\$([$&'`]|\d{1,2})/g,y8=function(n,t,i,s,u,d){var p=i+n.length,A=s.length,v=m8;return u!==void 0&&(u=d8(u),v=g8),f8(d,v,function(C,F){var E;switch(d1(F,0)){case"$":return"$";case"&":return n;case"`":return p1(t,0,i);case"'":return p1(t,p);case"<":E=u[p1(F,1,-1)];break;default:var Q=+F;if(Q===0)return C;if(Q>A){var T=p8(Q/10);return T===0?C:T<=A?s[T-1]===void 0?d1(F,1):s[T-1]+d1(F,1):C}E=s[Q-1]}return E===void 0?"":E})},v8=eb,bx=Jn,Qf=cn,w8=a1,_8=ln,b8=Ps,x8=un,B8=bc,C8=df,F8=Cu,Qu=oA,S8=_a,I8=l1,E8=bu,T8=y8,U8=c1,P8=On,f1=P8("replace"),L8=Math.max,Q8=Math.min,k8=Qf([].concat),g1=Qf([].push),xx=Qf("".indexOf),Bx=Qf("".slice),M8=function(n){return n===void 0?n:String(n)},D8=function(){return"a".replace(/./,"$0")==="$0"}(),Cx=function(){return/./[f1]?/./[f1]("a","$0")==="":!1}(),N8=!_8(function(){var n=/./;return n.exec=function(){var t=[];return t.groups={a:"7"},t},"".replace(n,"$<a>")!=="7"});w8("replace",function(n,t,i){var s=Cx?"$":"$0";return[function(u,d){var p=S8(this),A=B8(u)?void 0:E8(u,f1);return A?bx(A,u,p,d):bx(t,Qu(p),u,d)},function(u,d){var p=b8(this),A=Qu(u);if(typeof d=="string"&&xx(d,s)===-1&&xx(d,"$<")===-1){var v=i(t,p,A,d);if(v.done)return v.value}var C=x8(d);C||(d=Qu(d));var F=p.global,E;F&&(E=p.unicode,p.lastIndex=0);for(var Q=[],T;T=U8(p,A),!(T===null||(g1(Q,T),!F));){var V=Qu(T[0]);V===""&&(p.lastIndex=I8(A,F8(p.lastIndex),E))}for(var R="",W=0,j=0;j<Q.length;j++){T=Q[j];for(var rt=Qu(T[0]),ht=L8(Q8(C8(T.index),A.length),0),Bt=[],Et,Tt=1;Tt<T.length;Tt++)g1(Bt,M8(T[Tt]));var xt=T.groups;if(C){var ft=k8([rt],Bt,ht,A);xt!==void 0&&g1(ft,xt),Et=Qu(v8(d,void 0,ft))}else Et=T8(rt,A,ht,Bt,xt,d);ht>=W&&(R+=Bx(A,W,ht)+Et,W=ht+rt.length)}return R+Bx(A,W)}]},!N8||!D8||Cx);var O8=ba,R8=_c,z8=On,H8=z8("match"),V8=function(n){var t;return O8(n)&&((t=n[H8])!==void 0?!!t:R8(n)==="RegExp")},j8=V8,K8=TypeError,m1=function(n){if(j8(n))throw new K8("The method doesn't accept regular expressions");return n},$8=On,q8=$8("match"),y1=function(n){var t=/./;try{"/./"[n](t)}catch{try{return t[q8]=!1,"/./"[n](t)}catch{}}return!1},G8=Ls,X8=mf,Z8=Kh.f,W8=Cu,Fx=oA,Y8=m1,J8=_a,tN=y1,eN=X8("".slice),rN=Math.min,Sx=tN("startsWith"),iN=!Sx&&!!function(){var n=Z8(String.prototype,"startsWith");return n&&!n.writable}();G8({target:"String",proto:!0,forced:!iN&&!Sx},{startsWith:function(n){var t=Fx(J8(this));Y8(n);var i=W8(rN(arguments.length>1?arguments[1]:void 0,t.length)),s=Fx(n);return eN(t,i,i+s.length)===s}});var nN=On,sN=t1,oN=JA.f,v1=nN("unscopables"),w1=Array.prototype;w1[v1]===void 0&&oN(w1,v1,{configurable:!0,value:sN(null)});var aN=function(n){w1[v1][n]=!0},AN=ln,lN=!AN(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype}),cN=Ba,uN=un,hN=nf,dN=c0,pN=lN,Ix=dN("IE_PROTO"),_1=Object,fN=_1.prototype,Ex=pN?_1.getPrototypeOf:function(n){var t=hN(n);if(cN(t,Ix))return t[Ix];var i=t.constructor;return uN(i)&&t instanceof i?i.prototype:t instanceof _1?fN:null},gN=ln,mN=un,yN=ba,Tx=Ex,vN=Bc,wN=On,b1=wN("iterator"),Ux=!1,Sc,x1,B1;[].keys&&(B1=[].keys(),"next"in B1?(x1=Tx(Tx(B1)),x1!==Object.prototype&&(Sc=x1)):Ux=!0);var _N=!yN(Sc)||gN(function(){var n={};return Sc[b1].call(n)!==n});_N&&(Sc={}),mN(Sc[b1])||vN(Sc,b1,function(){return this});var Px={IteratorPrototype:Sc,BUGGY_SAFARI_ITERATORS:Ux},bN=Px.IteratorPrototype,xN=t1,BN=zm,CN=ff,FN=rd,SN=function(){return this},IN=function(n,t,i,s){var u=t+" Iterator";return n.prototype=xN(bN,{next:BN(+!s,i)}),CN(n,u,!1),FN[u]=SN,n},EN=Ls,TN=Jn,Lx=af,UN=un,PN=IN,Qx=Ex,kx=z2,LN=ff,QN=qh,C1=Bc,kN=On,MN=rd,Mx=Px,DN=Lx.PROPER,NN=Lx.CONFIGURABLE,Dx=Mx.IteratorPrototype,kf=Mx.BUGGY_SAFARI_ITERATORS,id=kN("iterator"),Nx="keys",nd="values",Ox="entries",ON=function(){return this},RN=function(n,t,i,s,u,d,p){PN(i,t,s);var A=function(j){if(j===u&&Q)return Q;if(!kf&&j&&j in F)return F[j];switch(j){case Nx:return function(){return new i(this,j)};case nd:return function(){return new i(this,j)};case Ox:return function(){return new i(this,j)}}return function(){return new i(this)}},v=t+" Iterator",C=!1,F=n.prototype,E=F[id]||F["@@iterator"]||u&&F[u],Q=!kf&&E||A(u),T=t==="Array"&&F.entries||E,V,R,W;if(T&&(V=Qx(T.call(new n)),V!==Object.prototype&&V.next&&(Qx(V)!==Dx&&(kx?kx(V,Dx):UN(V[id])||C1(V,id,ON)),LN(V,v,!0))),DN&&u===nd&&E&&E.name!==nd&&(NN?QN(F,"name",nd):(C=!0,Q=function(){return TN(E,this)})),u)if(R={values:A(nd),keys:d?Q:A(Nx),entries:A(Ox)},p)for(W in R)(kf||C||!(W in F))&&C1(F,W,R[W]);else EN({target:t,proto:!0,forced:kf||C},R);return F[id]!==Q&&C1(F,id,Q,{name:u}),MN[t]=Q,R},zN=function(n,t){return{value:n,done:t}},HN=$h,F1=aN,Rx=rd,zx=cf,VN=JA.f,jN=RN,Mf=zN,KN=wa,Hx="Array Iterator",$N=zx.set,qN=zx.getterFor(Hx),GN=jN(Array,"Array",function(n,t){$N(this,{type:Hx,target:HN(n),index:0,kind:t})},function(){var n=qN(this),t=n.target,i=n.index++;if(!t||i>=t.length)return n.target=void 0,Mf(void 0,!0);switch(n.kind){case"keys":return Mf(i,!1);case"values":return Mf(t[i],!1)}return Mf([i,t[i]],!1)},"values"),Vx=Rx.Arguments=Rx.Array;if(F1("keys"),F1("values"),F1("entries"),KN&&Vx.name!=="values")try{VN(Vx,"name",{value:"values"})}catch{}var XN={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},ZN=sf,S1=ZN("span").classList,jx=S1&&S1.constructor&&S1.constructor.prototype,WN=jx===Object.prototype?void 0:jx,Kx=An,$x=XN,YN=WN,sd=GN,qx=qh,JN=ff,tO=On,I1=tO("iterator"),E1=sd.values,Gx=function(n,t){if(n){if(n[I1]!==E1)try{qx(n,I1,E1)}catch{n[I1]=E1}if(JN(n,t,!0),$x[t]){for(var i in sd)if(n[i]!==sd[i])try{qx(n,i,sd[i])}catch{n[i]=sd[i]}}}};for(var T1 in $x)Gx(Kx[T1]&&Kx[T1].prototype,T1);Gx(YN,"DOMTokenList");function eO(n,t){if(oi(n)!="object"||!n)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var s=i.call(n,t||"default");if(oi(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function rO(n){var t=eO(n,"string");return oi(t)=="symbol"?t:t+""}function U1(n,t,i){return(t=rO(t))in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n}var iO=YA,nO=nf,sO=J_,oO=m0,Xx=TypeError,Zx="Reduce of empty array with no initial value",Wx=function(n){return function(t,i,s,u){var d=nO(t),p=sO(d),A=oO(d);if(iO(i),A===0&&s<2)throw new Xx(Zx);var v=n?A-1:0,C=n?-1:1;if(s<2)for(;;){if(v in p){u=p[v],v+=C;break}if(v+=C,n?v<0:A<=v)throw new Xx(Zx)}for(;n?v>=0:A>v;v+=C)v in p&&(u=i(u,p[v],v,d));return u}},aO={left:Wx(!1),right:Wx(!0)},AO=ln,Yx=function(n,t){var i=[][n];return!!i&&AO(function(){i.call(null,t||function(){return 1},1)})},lO=Ls,cO=aO.left,uO=Yx,Jx=qm,hO=Zh,dO=!hO&&Jx>79&&Jx<83,pO=dO||!uO("reduce");lO({target:"Array",proto:!0,forced:pO},{reduce:function(n){var t=arguments.length;return cO(this,n,t,t>1?arguments[1]:void 0)}});var fO=Ls,gO=mf,mO=Kh.f,yO=Cu,tB=oA,vO=m1,wO=_a,_O=y1,bO=gO("".slice),xO=Math.min,eB=_O("endsWith"),BO=!eB&&!!function(){var n=mO(String.prototype,"endsWith");return n&&!n.writable}();fO({target:"String",proto:!0,forced:!BO&&!eB},{endsWith:function(n){var t=tB(wO(this));vO(n);var i=arguments.length>1?arguments[1]:void 0,s=t.length,u=i===void 0?s:xO(yO(i),s),d=tB(n);return bO(t,u-d.length,u)===d}});var P1=Jn,rB=cn,CO=a1,FO=Ps,SO=bc,IO=_a,EO=W2,TO=l1,UO=Cu,iB=oA,PO=bu,nB=c1,LO=nx,QO=ln,ku=LO.UNSUPPORTED_Y,kO=4294967295,MO=Math.min,L1=rB([].push),Q1=rB("".slice),DO=!QO(function(){var n=/(?:)/,t=n.exec;n.exec=function(){return t.apply(this,arguments)};var i="ab".split(n);return i.length!==2||i[0]!=="a"||i[1]!=="b"}),sB="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;CO("split",function(n,t,i){var s="0".split(void 0,0).length?function(u,d){return u===void 0&&d===0?[]:P1(t,this,u,d)}:t;return[function(u,d){var p=IO(this),A=SO(u)?void 0:PO(u,n);return A?P1(A,u,p,d):P1(s,iB(p),u,d)},function(u,d){var p=FO(this),A=iB(u);if(!sB){var v=i(s,p,A,d,s!==t);if(v.done)return v.value}var C=EO(p,RegExp),F=p.unicode,E=(p.ignoreCase?"i":"")+(p.multiline?"m":"")+(p.unicode?"u":"")+(ku?"g":"y"),Q=new C(ku?"^(?:"+p.source+")":p,E),T=d===void 0?kO:d>>>0;if(T===0)return[];if(A.length===0)return nB(Q,A)===null?[A]:[];for(var V=0,R=0,W=[];R<A.length;){Q.lastIndex=ku?0:R;var j=nB(Q,ku?Q1(A,R):A),rt;if(j===null||(rt=MO(UO(Q.lastIndex+(ku?R:0)),A.length))===V)R=TO(A,R,F);else{if(L1(W,Q1(A,V,R)),W.length===T)return W;for(var ht=1;ht<=j.length-1;ht++)if(L1(W,j[ht]),W.length===T)return W;R=V=rt}}return L1(W,Q1(A,V)),W}]},sB||!DO,ku);var Df={exports:{}},od={exports:{}};(function(){var n,t,i,s,u,d;typeof performance<"u"&&performance!==null&&performance.now?od.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(od.exports=function(){return(n()-u)/1e6},t=process.hrtime,n=function(){var p;return p=t(),p[0]*1e9+p[1]},s=n(),d=process.uptime()*1e9,u=s-d):Date.now?(od.exports=function(){return Date.now()-i},i=Date.now()):(od.exports=function(){return new Date().getTime()-i},i=new Date().getTime())}).call(_u);for(var NO=od.exports,OO=NO,el=typeof window>"u"?_u:window,Nf=["moz","webkit"],Mu="AnimationFrame",Du=el["request"+Mu],ad=el["cancel"+Mu]||el["cancelRequest"+Mu],Ad=0;!Du&&Ad<Nf.length;Ad++)Du=el[Nf[Ad]+"Request"+Mu],ad=el[Nf[Ad]+"Cancel"+Mu]||el[Nf[Ad]+"CancelRequest"+Mu];if(!Du||!ad){var k1=0,oB=0,Ic=[],RO=1e3/60;Du=function(n){if(Ic.length===0){var t=OO(),i=Math.max(0,RO-(t-k1));k1=i+t,setTimeout(function(){var s=Ic.slice(0);Ic.length=0;for(var u=0;u<s.length;u++)if(!s[u].cancelled)try{s[u].callback(k1)}catch(d){setTimeout(function(){throw d},0)}},Math.round(i))}return Ic.push({handle:++oB,callback:n,cancelled:!1}),oB},ad=function(n){for(var t=0;t<Ic.length;t++)Ic[t].handle===n&&(Ic[t].cancelled=!0)}}Df.exports=function(n){return Du.call(el,n)},Df.exports.cancel=function(){ad.apply(el,arguments)},Df.exports.polyfill=function(n){n||(n=el),n.requestAnimationFrame=Du,n.cancelAnimationFrame=ad};var zO=Df.exports;const M1=$_(zO);var aB=`	
\v\f\r \u2028\u2029\uFEFF`,HO=cn,VO=_a,jO=oA,D1=aB,AB=HO("".replace),KO=RegExp("^["+D1+"]+"),$O=RegExp("(^|[^"+D1+"])["+D1+"]+$"),N1=function(n){return function(t){var i=jO(VO(t));return n&1&&(i=AB(i,KO,"")),n&2&&(i=AB(i,$O,"$1")),i}},qO={start:N1(1),end:N1(2),trim:N1(3)},GO=af.PROPER,XO=ln,lB=aB,cB="",ZO=function(n){return XO(function(){return!!lB[n]()||cB[n]()!==cB||GO&&lB[n].name!==n})},WO=Ls,YO=qO.trim,JO=ZO;WO({target:"String",proto:!0,forced:JO("trim")},{trim:function(){return YO(this)}});var tR=function(n){this.ok=!1,this.alpha=1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n=n.replace(/ /g,""),n=n.toLowerCase();var t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};n=t[n]||n;for(var i=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(v){return[parseInt(v[1]),parseInt(v[2]),parseInt(v[3]),parseFloat(v[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(v){return[parseInt(v[1]),parseInt(v[2]),parseInt(v[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(v){return[parseInt(v[1],16),parseInt(v[2],16),parseInt(v[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(v){return[parseInt(v[1]+v[1],16),parseInt(v[2]+v[2],16),parseInt(v[3]+v[3],16)]}}],s=0;s<i.length;s++){var u=i[s].re,d=i[s].process,p=u.exec(n);if(p){var A=d(p);this.r=A[0],this.g=A[1],this.b=A[2],A.length>3&&(this.alpha=A[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var v=this.r.toString(16),C=this.g.toString(16),F=this.b.toString(16);return v.length==1&&(v="0"+v),C.length==1&&(C="0"+C),F.length==1&&(F="0"+F),"#"+v+C+F},this.getHelpXML=function(){for(var v=new Array,C=0;C<i.length;C++)for(var F=i[C].example,E=0;E<F.length;E++)v[v.length]=F[E];for(var Q in t)v[v.length]=Q;var T=document.createElement("ul");T.setAttribute("id","rgbcolor-examples");for(var C=0;C<v.length;C++)try{var V=document.createElement("li"),R=new RGBColor(v[C]),W=document.createElement("div");W.style.cssText="margin: 3px; border: 1px solid black; background:"+R.toHex()+"; color:"+R.toHex(),W.appendChild(document.createTextNode("test"));var j=document.createTextNode(" "+v[C]+" -> "+R.toRGB()+" -> "+R.toHex());V.appendChild(W),V.appendChild(j),T.appendChild(V)}catch{}return T}};const O1=$_(tR);var eR=Ls,rR=mf,iR=k2.indexOf,nR=Yx,R1=rR([].indexOf),uB=!!R1&&1/R1([1],1,-0)<0,sR=uB||!nR("indexOf");eR({target:"Array",proto:!0,forced:sR},{indexOf:function(n){var t=arguments.length>1?arguments[1]:void 0;return uB?R1(this,n,t)||0:iR(this,n,t)}});var oR=Ls,aR=cn,AR=m1,lR=_a,hB=oA,cR=y1,uR=aR("".indexOf);oR({target:"String",proto:!0,forced:!cR("includes")},{includes:function(n){return!!~uR(hB(lR(this)),hB(AR(n)),arguments.length>1?arguments[1]:void 0)}});var hR=_c,dR=Array.isArray||function(n){return hR(n)==="Array"},pR=Ls,fR=cn,gR=dR,mR=fR([].reverse),dB=[1,2];pR({target:"Array",proto:!0,forced:String(dB)===String(dB.reverse())},{reverse:function(){return gR(this)&&(this.length=this.length),mR(this)}});/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var pB=function(n,t){return(pB=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(i[u]=s[u])})(n,t)};function fB(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}pB(n,t),n.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}function yR(n){var t="";Array.isArray(n)||(n=[n]);for(var i=0;i<n.length;i++){var s=n[i];if(s.type===Be.CLOSE_PATH)t+="z";else if(s.type===Be.HORIZ_LINE_TO)t+=(s.relative?"h":"H")+s.x;else if(s.type===Be.VERT_LINE_TO)t+=(s.relative?"v":"V")+s.y;else if(s.type===Be.MOVE_TO)t+=(s.relative?"m":"M")+s.x+" "+s.y;else if(s.type===Be.LINE_TO)t+=(s.relative?"l":"L")+s.x+" "+s.y;else if(s.type===Be.CURVE_TO)t+=(s.relative?"c":"C")+s.x1+" "+s.y1+" "+s.x2+" "+s.y2+" "+s.x+" "+s.y;else if(s.type===Be.SMOOTH_CURVE_TO)t+=(s.relative?"s":"S")+s.x2+" "+s.y2+" "+s.x+" "+s.y;else if(s.type===Be.QUAD_TO)t+=(s.relative?"q":"Q")+s.x1+" "+s.y1+" "+s.x+" "+s.y;else if(s.type===Be.SMOOTH_QUAD_TO)t+=(s.relative?"t":"T")+s.x+" "+s.y;else{if(s.type!==Be.ARC)throw new Error('Unexpected command type "'+s.type+'" at index '+i+".");t+=(s.relative?"a":"A")+s.rX+" "+s.rY+" "+s.xRot+" "+ +s.lArcFlag+" "+ +s.sweepFlag+" "+s.x+" "+s.y}}return t}function z1(n,t){var i=n[0],s=n[1];return[i*Math.cos(t)-s*Math.sin(t),i*Math.sin(t)+s*Math.cos(t)]}function Ca(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];for(var i=0;i<n.length;i++)if(typeof n[i]!="number")throw new Error("assertNumbers arguments["+i+"] is not a number. "+typeof n[i]+" == typeof "+n[i]);return!0}var Kl=Math.PI;function H1(n,t,i){n.lArcFlag=n.lArcFlag===0?0:1,n.sweepFlag=n.sweepFlag===0?0:1;var s=n.rX,u=n.rY,d=n.x,p=n.y;s=Math.abs(n.rX),u=Math.abs(n.rY);var A=z1([(t-d)/2,(i-p)/2],-n.xRot/180*Kl),v=A[0],C=A[1],F=Math.pow(v,2)/Math.pow(s,2)+Math.pow(C,2)/Math.pow(u,2);1<F&&(s*=Math.sqrt(F),u*=Math.sqrt(F)),n.rX=s,n.rY=u;var E=Math.pow(s,2)*Math.pow(C,2)+Math.pow(u,2)*Math.pow(v,2),Q=(n.lArcFlag!==n.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(s,2)*Math.pow(u,2)-E)/E)),T=s*C/u*Q,V=-u*v/s*Q,R=z1([T,V],n.xRot/180*Kl);n.cX=R[0]+(t+d)/2,n.cY=R[1]+(i+p)/2,n.phi1=Math.atan2((C-V)/u,(v-T)/s),n.phi2=Math.atan2((-C-V)/u,(-v-T)/s),n.sweepFlag===0&&n.phi2>n.phi1&&(n.phi2-=2*Kl),n.sweepFlag===1&&n.phi2<n.phi1&&(n.phi2+=2*Kl),n.phi1*=180/Kl,n.phi2*=180/Kl}function gB(n,t,i){Ca(n,t,i);var s=n*n+t*t-i*i;if(0>s)return[];if(s===0)return[[n*i/(n*n+t*t),t*i/(n*n+t*t)]];var u=Math.sqrt(s);return[[(n*i+t*u)/(n*n+t*t),(t*i-n*u)/(n*n+t*t)],[(n*i-t*u)/(n*n+t*t),(t*i+n*u)/(n*n+t*t)]]}var mn,rl=Math.PI/180;function mB(n,t,i){return(1-i)*n+i*t}function yB(n,t,i,s){return n+Math.cos(s/180*Kl)*t+Math.sin(s/180*Kl)*i}function vB(n,t,i,s){var u=1e-6,d=t-n,p=i-t,A=3*d+3*(s-i)-6*p,v=6*(p-d),C=3*d;return Math.abs(A)<u?[-C/v]:function(F,E,Q){var T=F*F/4-E;if(T<-Q)return[];if(T<=Q)return[-F/2];var V=Math.sqrt(T);return[-F/2-V,-F/2+V]}(v/A,C/A,u)}function wB(n,t,i,s,u){var d=1-u;return n*(d*d*d)+t*(3*d*d*u)+i*(3*d*u*u)+s*(u*u*u)}(function(n){function t(){return u(function(A,v,C){return A.relative&&(A.x1!==void 0&&(A.x1+=v),A.y1!==void 0&&(A.y1+=C),A.x2!==void 0&&(A.x2+=v),A.y2!==void 0&&(A.y2+=C),A.x!==void 0&&(A.x+=v),A.y!==void 0&&(A.y+=C),A.relative=!1),A})}function i(){var A=NaN,v=NaN,C=NaN,F=NaN;return u(function(E,Q,T){return E.type&Be.SMOOTH_CURVE_TO&&(E.type=Be.CURVE_TO,A=isNaN(A)?Q:A,v=isNaN(v)?T:v,E.x1=E.relative?Q-A:2*Q-A,E.y1=E.relative?T-v:2*T-v),E.type&Be.CURVE_TO?(A=E.relative?Q+E.x2:E.x2,v=E.relative?T+E.y2:E.y2):(A=NaN,v=NaN),E.type&Be.SMOOTH_QUAD_TO&&(E.type=Be.QUAD_TO,C=isNaN(C)?Q:C,F=isNaN(F)?T:F,E.x1=E.relative?Q-C:2*Q-C,E.y1=E.relative?T-F:2*T-F),E.type&Be.QUAD_TO?(C=E.relative?Q+E.x1:E.x1,F=E.relative?T+E.y1:E.y1):(C=NaN,F=NaN),E})}function s(){var A=NaN,v=NaN;return u(function(C,F,E){if(C.type&Be.SMOOTH_QUAD_TO&&(C.type=Be.QUAD_TO,A=isNaN(A)?F:A,v=isNaN(v)?E:v,C.x1=C.relative?F-A:2*F-A,C.y1=C.relative?E-v:2*E-v),C.type&Be.QUAD_TO){A=C.relative?F+C.x1:C.x1,v=C.relative?E+C.y1:C.y1;var Q=C.x1,T=C.y1;C.type=Be.CURVE_TO,C.x1=((C.relative?0:F)+2*Q)/3,C.y1=((C.relative?0:E)+2*T)/3,C.x2=(C.x+2*Q)/3,C.y2=(C.y+2*T)/3}else A=NaN,v=NaN;return C})}function u(A){var v=0,C=0,F=NaN,E=NaN;return function(Q){if(isNaN(F)&&!(Q.type&Be.MOVE_TO))throw new Error("path must start with moveto");var T=A(Q,v,C,F,E);return Q.type&Be.CLOSE_PATH&&(v=F,C=E),Q.x!==void 0&&(v=Q.relative?v+Q.x:Q.x),Q.y!==void 0&&(C=Q.relative?C+Q.y:Q.y),Q.type&Be.MOVE_TO&&(F=v,E=C),T}}function d(A,v,C,F,E,Q){return Ca(A,v,C,F,E,Q),u(function(T,V,R,W){var j=T.x1,rt=T.x2,ht=T.relative&&!isNaN(W),Bt=T.x!==void 0?T.x:ht?0:V,Et=T.y!==void 0?T.y:ht?0:R;function Tt(et){return et*et}T.type&Be.HORIZ_LINE_TO&&v!==0&&(T.type=Be.LINE_TO,T.y=T.relative?0:R),T.type&Be.VERT_LINE_TO&&C!==0&&(T.type=Be.LINE_TO,T.x=T.relative?0:V),T.x!==void 0&&(T.x=T.x*A+Et*C+(ht?0:E)),T.y!==void 0&&(T.y=Bt*v+T.y*F+(ht?0:Q)),T.x1!==void 0&&(T.x1=T.x1*A+T.y1*C+(ht?0:E)),T.y1!==void 0&&(T.y1=j*v+T.y1*F+(ht?0:Q)),T.x2!==void 0&&(T.x2=T.x2*A+T.y2*C+(ht?0:E)),T.y2!==void 0&&(T.y2=rt*v+T.y2*F+(ht?0:Q));var xt=A*F-v*C;if(T.xRot!==void 0&&(A!==1||v!==0||C!==0||F!==1))if(xt===0)delete T.rX,delete T.rY,delete T.xRot,delete T.lArcFlag,delete T.sweepFlag,T.type=Be.LINE_TO;else{var ft=T.xRot*Math.PI/180,Nt=Math.sin(ft),jt=Math.cos(ft),at=1/Tt(T.rX),ct=1/Tt(T.rY),vt=Tt(jt)*at+Tt(Nt)*ct,mt=2*Nt*jt*(at-ct),$t=Tt(Nt)*at+Tt(jt)*ct,Vt=vt*F*F-mt*v*F+$t*v*v,Zt=mt*(A*F+v*C)-2*(vt*C*F+$t*A*v),Ht=vt*C*C-mt*A*C+$t*A*A,Yt=(Math.atan2(Zt,Vt-Ht)+Math.PI)%Math.PI/2,Wt=Math.sin(Yt),me=Math.cos(Yt);T.rX=Math.abs(xt)/Math.sqrt(Vt*Tt(me)+Zt*Wt*me+Ht*Tt(Wt)),T.rY=Math.abs(xt)/Math.sqrt(Vt*Tt(Wt)-Zt*Wt*me+Ht*Tt(me)),T.xRot=180*Yt/Math.PI}return T.sweepFlag!==void 0&&0>xt&&(T.sweepFlag=+!T.sweepFlag),T})}function p(){return function(A){var v={};for(var C in A)v[C]=A[C];return v}}n.ROUND=function(A){function v(C){return Math.round(C*A)/A}return A===void 0&&(A=1e13),Ca(A),function(C){return C.x1!==void 0&&(C.x1=v(C.x1)),C.y1!==void 0&&(C.y1=v(C.y1)),C.x2!==void 0&&(C.x2=v(C.x2)),C.y2!==void 0&&(C.y2=v(C.y2)),C.x!==void 0&&(C.x=v(C.x)),C.y!==void 0&&(C.y=v(C.y)),C.rX!==void 0&&(C.rX=v(C.rX)),C.rY!==void 0&&(C.rY=v(C.rY)),C}},n.TO_ABS=t,n.TO_REL=function(){return u(function(A,v,C){return A.relative||(A.x1!==void 0&&(A.x1-=v),A.y1!==void 0&&(A.y1-=C),A.x2!==void 0&&(A.x2-=v),A.y2!==void 0&&(A.y2-=C),A.x!==void 0&&(A.x-=v),A.y!==void 0&&(A.y-=C),A.relative=!0),A})},n.NORMALIZE_HVZ=function(A,v,C){return A===void 0&&(A=!0),v===void 0&&(v=!0),C===void 0&&(C=!0),u(function(F,E,Q,T,V){if(isNaN(T)&&!(F.type&Be.MOVE_TO))throw new Error("path must start with moveto");return v&&F.type&Be.HORIZ_LINE_TO&&(F.type=Be.LINE_TO,F.y=F.relative?0:Q),C&&F.type&Be.VERT_LINE_TO&&(F.type=Be.LINE_TO,F.x=F.relative?0:E),A&&F.type&Be.CLOSE_PATH&&(F.type=Be.LINE_TO,F.x=F.relative?T-E:T,F.y=F.relative?V-Q:V),F.type&Be.ARC&&(F.rX===0||F.rY===0)&&(F.type=Be.LINE_TO,delete F.rX,delete F.rY,delete F.xRot,delete F.lArcFlag,delete F.sweepFlag),F})},n.NORMALIZE_ST=i,n.QT_TO_C=s,n.INFO=u,n.SANITIZE=function(A){A===void 0&&(A=0),Ca(A);var v=NaN,C=NaN,F=NaN,E=NaN;return u(function(Q,T,V,R,W){var j=Math.abs,rt=!1,ht=0,Bt=0;if(Q.type&Be.SMOOTH_CURVE_TO&&(ht=isNaN(v)?0:T-v,Bt=isNaN(C)?0:V-C),Q.type&(Be.CURVE_TO|Be.SMOOTH_CURVE_TO)?(v=Q.relative?T+Q.x2:Q.x2,C=Q.relative?V+Q.y2:Q.y2):(v=NaN,C=NaN),Q.type&Be.SMOOTH_QUAD_TO?(F=isNaN(F)?T:2*T-F,E=isNaN(E)?V:2*V-E):Q.type&Be.QUAD_TO?(F=Q.relative?T+Q.x1:Q.x1,E=Q.relative?V+Q.y1:Q.y2):(F=NaN,E=NaN),Q.type&Be.LINE_COMMANDS||Q.type&Be.ARC&&(Q.rX===0||Q.rY===0||!Q.lArcFlag)||Q.type&Be.CURVE_TO||Q.type&Be.SMOOTH_CURVE_TO||Q.type&Be.QUAD_TO||Q.type&Be.SMOOTH_QUAD_TO){var Et=Q.x===void 0?0:Q.relative?Q.x:Q.x-T,Tt=Q.y===void 0?0:Q.relative?Q.y:Q.y-V;ht=isNaN(F)?Q.x1===void 0?ht:Q.relative?Q.x:Q.x1-T:F-T,Bt=isNaN(E)?Q.y1===void 0?Bt:Q.relative?Q.y:Q.y1-V:E-V;var xt=Q.x2===void 0?0:Q.relative?Q.x:Q.x2-T,ft=Q.y2===void 0?0:Q.relative?Q.y:Q.y2-V;j(Et)<=A&&j(Tt)<=A&&j(ht)<=A&&j(Bt)<=A&&j(xt)<=A&&j(ft)<=A&&(rt=!0)}return Q.type&Be.CLOSE_PATH&&j(T-R)<=A&&j(V-W)<=A&&(rt=!0),rt?[]:Q})},n.MATRIX=d,n.ROTATE=function(A,v,C){v===void 0&&(v=0),C===void 0&&(C=0),Ca(A,v,C);var F=Math.sin(A),E=Math.cos(A);return d(E,F,-F,E,v-v*E+C*F,C-v*F-C*E)},n.TRANSLATE=function(A,v){return v===void 0&&(v=0),Ca(A,v),d(1,0,0,1,A,v)},n.SCALE=function(A,v){return v===void 0&&(v=A),Ca(A,v),d(A,0,0,v,0,0)},n.SKEW_X=function(A){return Ca(A),d(1,0,Math.atan(A),1,0,0)},n.SKEW_Y=function(A){return Ca(A),d(1,Math.atan(A),0,1,0,0)},n.X_AXIS_SYMMETRY=function(A){return A===void 0&&(A=0),Ca(A),d(-1,0,0,1,A,0)},n.Y_AXIS_SYMMETRY=function(A){return A===void 0&&(A=0),Ca(A),d(1,0,0,-1,0,A)},n.A_TO_C=function(){return u(function(A,v,C){return Be.ARC===A.type?function(F,E,Q){var T,V,R,W;F.cX||H1(F,E,Q);for(var j=Math.min(F.phi1,F.phi2),rt=Math.max(F.phi1,F.phi2)-j,ht=Math.ceil(rt/90),Bt=new Array(ht),Et=E,Tt=Q,xt=0;xt<ht;xt++){var ft=mB(F.phi1,F.phi2,xt/ht),Nt=mB(F.phi1,F.phi2,(xt+1)/ht),jt=Nt-ft,at=4/3*Math.tan(jt*rl/4),ct=[Math.cos(ft*rl)-at*Math.sin(ft*rl),Math.sin(ft*rl)+at*Math.cos(ft*rl)],vt=ct[0],mt=ct[1],$t=[Math.cos(Nt*rl),Math.sin(Nt*rl)],Vt=$t[0],Zt=$t[1],Ht=[Vt+at*Math.sin(Nt*rl),Zt-at*Math.cos(Nt*rl)],Yt=Ht[0],Wt=Ht[1];Bt[xt]={relative:F.relative,type:Be.CURVE_TO};var me=function(et,dt){var _t=z1([et*F.rX,dt*F.rY],F.xRot),St=_t[0],Ot=_t[1];return[F.cX+St,F.cY+Ot]};T=me(vt,mt),Bt[xt].x1=T[0],Bt[xt].y1=T[1],V=me(Yt,Wt),Bt[xt].x2=V[0],Bt[xt].y2=V[1],R=me(Vt,Zt),Bt[xt].x=R[0],Bt[xt].y=R[1],F.relative&&(Bt[xt].x1-=Et,Bt[xt].y1-=Tt,Bt[xt].x2-=Et,Bt[xt].y2-=Tt,Bt[xt].x-=Et,Bt[xt].y-=Tt),Et=(W=[Bt[xt].x,Bt[xt].y])[0],Tt=W[1]}return Bt}(A,A.relative?0:v,A.relative?0:C):A})},n.ANNOTATE_ARCS=function(){return u(function(A,v,C){return A.relative&&(v=0,C=0),Be.ARC===A.type&&H1(A,v,C),A})},n.CLONE=p,n.CALCULATE_BOUNDS=function(){var A=function(Q){var T={};for(var V in Q)T[V]=Q[V];return T},v=t(),C=s(),F=i(),E=u(function(Q,T,V){var R=F(C(v(A(Q))));function W(Wt){Wt>E.maxX&&(E.maxX=Wt),Wt<E.minX&&(E.minX=Wt)}function j(Wt){Wt>E.maxY&&(E.maxY=Wt),Wt<E.minY&&(E.minY=Wt)}if(R.type&Be.DRAWING_COMMANDS&&(W(T),j(V)),R.type&Be.HORIZ_LINE_TO&&W(R.x),R.type&Be.VERT_LINE_TO&&j(R.y),R.type&Be.LINE_TO&&(W(R.x),j(R.y)),R.type&Be.CURVE_TO){W(R.x),j(R.y);for(var rt=0,ht=vB(T,R.x1,R.x2,R.x);rt<ht.length;rt++)0<(Yt=ht[rt])&&1>Yt&&W(wB(T,R.x1,R.x2,R.x,Yt));for(var Bt=0,Et=vB(V,R.y1,R.y2,R.y);Bt<Et.length;Bt++)0<(Yt=Et[Bt])&&1>Yt&&j(wB(V,R.y1,R.y2,R.y,Yt))}if(R.type&Be.ARC){W(R.x),j(R.y),H1(R,T,V);for(var Tt=R.xRot/180*Math.PI,xt=Math.cos(Tt)*R.rX,ft=Math.sin(Tt)*R.rX,Nt=-Math.sin(Tt)*R.rY,jt=Math.cos(Tt)*R.rY,at=R.phi1<R.phi2?[R.phi1,R.phi2]:-180>R.phi2?[R.phi2+360,R.phi1+360]:[R.phi2,R.phi1],ct=at[0],vt=at[1],mt=function(Wt){var me=Wt[0],et=Wt[1],dt=180*Math.atan2(et,me)/Math.PI;return dt<ct?dt+360:dt},$t=0,Vt=gB(Nt,-xt,0).map(mt);$t<Vt.length;$t++)(Yt=Vt[$t])>ct&&Yt<vt&&W(yB(R.cX,xt,Nt,Yt));for(var Zt=0,Ht=gB(jt,-ft,0).map(mt);Zt<Ht.length;Zt++){var Yt;(Yt=Ht[Zt])>ct&&Yt<vt&&j(yB(R.cY,ft,jt,Yt))}}return Q});return E.minX=1/0,E.maxX=-1/0,E.minY=1/0,E.maxY=-1/0,E}})(mn||(mn={}));var Fa,_B=function(){function n(){}return n.prototype.round=function(t){return this.transform(mn.ROUND(t))},n.prototype.toAbs=function(){return this.transform(mn.TO_ABS())},n.prototype.toRel=function(){return this.transform(mn.TO_REL())},n.prototype.normalizeHVZ=function(t,i,s){return this.transform(mn.NORMALIZE_HVZ(t,i,s))},n.prototype.normalizeST=function(){return this.transform(mn.NORMALIZE_ST())},n.prototype.qtToC=function(){return this.transform(mn.QT_TO_C())},n.prototype.aToC=function(){return this.transform(mn.A_TO_C())},n.prototype.sanitize=function(t){return this.transform(mn.SANITIZE(t))},n.prototype.translate=function(t,i){return this.transform(mn.TRANSLATE(t,i))},n.prototype.scale=function(t,i){return this.transform(mn.SCALE(t,i))},n.prototype.rotate=function(t,i,s){return this.transform(mn.ROTATE(t,i,s))},n.prototype.matrix=function(t,i,s,u,d,p){return this.transform(mn.MATRIX(t,i,s,u,d,p))},n.prototype.skewX=function(t){return this.transform(mn.SKEW_X(t))},n.prototype.skewY=function(t){return this.transform(mn.SKEW_Y(t))},n.prototype.xSymmetry=function(t){return this.transform(mn.X_AXIS_SYMMETRY(t))},n.prototype.ySymmetry=function(t){return this.transform(mn.Y_AXIS_SYMMETRY(t))},n.prototype.annotateArcs=function(){return this.transform(mn.ANNOTATE_ARCS())},n}(),vR=function(n){return n===" "||n==="	"||n==="\r"||n===`
`},bB=function(n){return 48<=n.charCodeAt(0)&&n.charCodeAt(0)<=57},wR=function(n){function t(){var i=n.call(this)||this;return i.curNumber="",i.curCommandType=-1,i.curCommandRelative=!1,i.canParseCommandOrComma=!0,i.curNumberHasExp=!1,i.curNumberHasExpDigits=!1,i.curNumberHasDecimal=!1,i.curArgs=[],i}return fB(t,n),t.prototype.finish=function(i){if(i===void 0&&(i=[]),this.parse(" ",i),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return i},t.prototype.parse=function(i,s){var u=this;s===void 0&&(s=[]);for(var d=function(E){s.push(E),u.curArgs.length=0,u.canParseCommandOrComma=!0},p=0;p<i.length;p++){var A=i[p],v=!(this.curCommandType!==Be.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!=="0"&&this.curNumber!=="1"),C=bB(A)&&(this.curNumber==="0"&&A==="0"||v);if(!bB(A)||C)if(A!=="e"&&A!=="E")if(A!=="-"&&A!=="+"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(A!=="."||this.curNumberHasExp||this.curNumberHasDecimal||v){if(this.curNumber&&this.curCommandType!==-1){var F=Number(this.curNumber);if(isNaN(F))throw new SyntaxError("Invalid number ending at "+p);if(this.curCommandType===Be.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>F)throw new SyntaxError('Expected positive number, got "'+F+'" at index "'+p+'"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+p+'"')}this.curArgs.push(F),this.curArgs.length===_R[this.curCommandType]&&(Be.HORIZ_LINE_TO===this.curCommandType?d({type:Be.HORIZ_LINE_TO,relative:this.curCommandRelative,x:F}):Be.VERT_LINE_TO===this.curCommandType?d({type:Be.VERT_LINE_TO,relative:this.curCommandRelative,y:F}):this.curCommandType===Be.MOVE_TO||this.curCommandType===Be.LINE_TO||this.curCommandType===Be.SMOOTH_QUAD_TO?(d({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),Be.MOVE_TO===this.curCommandType&&(this.curCommandType=Be.LINE_TO)):this.curCommandType===Be.CURVE_TO?d({type:Be.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===Be.SMOOTH_CURVE_TO?d({type:Be.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===Be.QUAD_TO?d({type:Be.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===Be.ARC&&d({type:Be.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!vR(A))if(A===","&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(A!=="+"&&A!=="-"&&A!==".")if(C)this.curNumber=A,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError("Unterminated command at index "+p+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+A+'" at index '+p+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,A!=="z"&&A!=="Z")if(A==="h"||A==="H")this.curCommandType=Be.HORIZ_LINE_TO,this.curCommandRelative=A==="h";else if(A==="v"||A==="V")this.curCommandType=Be.VERT_LINE_TO,this.curCommandRelative=A==="v";else if(A==="m"||A==="M")this.curCommandType=Be.MOVE_TO,this.curCommandRelative=A==="m";else if(A==="l"||A==="L")this.curCommandType=Be.LINE_TO,this.curCommandRelative=A==="l";else if(A==="c"||A==="C")this.curCommandType=Be.CURVE_TO,this.curCommandRelative=A==="c";else if(A==="s"||A==="S")this.curCommandType=Be.SMOOTH_CURVE_TO,this.curCommandRelative=A==="s";else if(A==="q"||A==="Q")this.curCommandType=Be.QUAD_TO,this.curCommandRelative=A==="q";else if(A==="t"||A==="T")this.curCommandType=Be.SMOOTH_QUAD_TO,this.curCommandRelative=A==="t";else{if(A!=="a"&&A!=="A")throw new SyntaxError('Unexpected character "'+A+'" at index '+p+".");this.curCommandType=Be.ARC,this.curCommandRelative=A==="a"}else s.push({type:Be.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=A,this.curNumberHasDecimal=A==="."}else this.curNumber+=A,this.curNumberHasDecimal=!0;else this.curNumber+=A;else this.curNumber+=A,this.curNumberHasExp=!0;else this.curNumber+=A,this.curNumberHasExpDigits=this.curNumberHasExp}return s},t.prototype.transform=function(i){return Object.create(this,{parse:{value:function(s,u){u===void 0&&(u=[]);for(var d=0,p=Object.getPrototypeOf(this).parse.call(this,s);d<p.length;d++){var A=p[d],v=i(A);Array.isArray(v)?u.push.apply(u,v):u.push(v)}return u}}})},t}(_B),Be=function(n){function t(i){var s=n.call(this)||this;return s.commands=typeof i=="string"?t.parse(i):i,s}return fB(t,n),t.prototype.encode=function(){return t.encode(this.commands)},t.prototype.getBounds=function(){var i=mn.CALCULATE_BOUNDS();return this.transform(i),i},t.prototype.transform=function(i){for(var s=[],u=0,d=this.commands;u<d.length;u++){var p=i(d[u]);Array.isArray(p)?s.push.apply(s,p):s.push(p)}return this.commands=s,this},t.encode=function(i){return yR(i)},t.parse=function(i){var s=new wR,u=[];return s.parse(i,u),s.finish(u),u},t.CLOSE_PATH=1,t.MOVE_TO=2,t.HORIZ_LINE_TO=4,t.VERT_LINE_TO=8,t.LINE_TO=16,t.CURVE_TO=32,t.SMOOTH_CURVE_TO=64,t.QUAD_TO=128,t.SMOOTH_QUAD_TO=256,t.ARC=512,t.LINE_COMMANDS=t.LINE_TO|t.HORIZ_LINE_TO|t.VERT_LINE_TO,t.DRAWING_COMMANDS=t.HORIZ_LINE_TO|t.VERT_LINE_TO|t.LINE_TO|t.CURVE_TO|t.SMOOTH_CURVE_TO|t.QUAD_TO|t.SMOOTH_QUAD_TO|t.ARC,t}(_B),_R=((Fa={})[Be.MOVE_TO]=2,Fa[Be.LINE_TO]=2,Fa[Be.HORIZ_LINE_TO]=1,Fa[Be.VERT_LINE_TO]=1,Fa[Be.CLOSE_PATH]=0,Fa[Be.QUAD_TO]=4,Fa[Be.SMOOTH_QUAD_TO]=2,Fa[Be.CURVE_TO]=6,Fa[Be.SMOOTH_CURVE_TO]=4,Fa[Be.ARC]=7,Fa),bR=Jn,xR=Ba,BR=Jp,CR=ix,xB=RegExp.prototype,FR=function(n){var t=n.flags;return t===void 0&&!("flags"in xB)&&!xR(n,"flags")&&BR(xB,n)?bR(CR,n):t},SR=af.PROPER,IR=Bc,ER=Ps,BB=oA,TR=ln,UR=FR,V1="toString",CB=RegExp.prototype,FB=CB[V1],PR=TR(function(){return FB.call({source:"a",flags:"b"})!=="/a/b"}),LR=SR&&FB.name!==V1;(PR||LR)&&IR(CB,V1,function(){var n=ER(this),t=BB(n.source),i=BB(UR(n));return"/"+t+"/"+i},{unsafe:!0});function Of(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Of=function(t){return typeof t}:Of=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Of(n)}function QR(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}var kR=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],MR=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function DR(n,t,i,s,u){if(typeof n=="string"&&(n=document.getElementById(n)),!n||Of(n)!=="object"||!("getContext"in n))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var d=n.getContext("2d");try{return d.getImageData(t,i,s,u)}catch(p){throw new Error("unable to access image data: "+p)}}function NR(n,t,i,s,u,d){if(!(isNaN(d)||d<1)){d|=0;var p=DR(n,t,i,s,u);p=OR(p,t,i,s,u,d),n.getContext("2d").putImageData(p,t,i)}}function OR(n,t,i,s,u,d){for(var p=n.data,A=2*d+1,v=s-1,C=u-1,F=d+1,E=F*(F+1)/2,Q=new SB,T=Q,V,R=1;R<A;R++)T=T.next=new SB,R===F&&(V=T);T.next=Q;for(var W=null,j=null,rt=0,ht=0,Bt=kR[d],Et=MR[d],Tt=0;Tt<u;Tt++){T=Q;for(var xt=p[ht],ft=p[ht+1],Nt=p[ht+2],jt=p[ht+3],at=0;at<F;at++)T.r=xt,T.g=ft,T.b=Nt,T.a=jt,T=T.next;for(var ct=0,vt=0,mt=0,$t=0,Vt=F*xt,Zt=F*ft,Ht=F*Nt,Yt=F*jt,Wt=E*xt,me=E*ft,et=E*Nt,dt=E*jt,_t=1;_t<F;_t++){var St=ht+((v<_t?v:_t)<<2),Ot=p[St],Rt=p[St+1],Jt=p[St+2],re=p[St+3],be=F-_t;Wt+=(T.r=Ot)*be,me+=(T.g=Rt)*be,et+=(T.b=Jt)*be,dt+=(T.a=re)*be,ct+=Ot,vt+=Rt,mt+=Jt,$t+=re,T=T.next}W=Q,j=V;for(var _e=0;_e<s;_e++){var Te=dt*Bt>>>Et;if(p[ht+3]=Te,Te!==0){var Qe=255/Te;p[ht]=(Wt*Bt>>>Et)*Qe,p[ht+1]=(me*Bt>>>Et)*Qe,p[ht+2]=(et*Bt>>>Et)*Qe}else p[ht]=p[ht+1]=p[ht+2]=0;Wt-=Vt,me-=Zt,et-=Ht,dt-=Yt,Vt-=W.r,Zt-=W.g,Ht-=W.b,Yt-=W.a;var je=_e+d+1;je=rt+(je<v?je:v)<<2,ct+=W.r=p[je],vt+=W.g=p[je+1],mt+=W.b=p[je+2],$t+=W.a=p[je+3],Wt+=ct,me+=vt,et+=mt,dt+=$t,W=W.next;var oe=j,nt=oe.r,cr=oe.g,Ke=oe.b,Ae=oe.a;Vt+=nt,Zt+=cr,Ht+=Ke,Yt+=Ae,ct-=nt,vt-=cr,mt-=Ke,$t-=Ae,j=j.next,ht+=4}rt+=s}for(var ge=0;ge<s;ge++){ht=ge<<2;var Se=p[ht],Ce=p[ht+1],He=p[ht+2],Xe=p[ht+3],nr=F*Se,yr=F*Ce,br=F*He,ce=F*Xe,Je=E*Se,sr=E*Ce,Ie=E*He,Xr=E*Xe;T=Q;for(var he=0;he<F;he++)T.r=Se,T.g=Ce,T.b=He,T.a=Xe,T=T.next;for(var rr=s,Ee=0,vr=0,ti=0,Pe=0,mi=1;mi<=d;mi++){ht=rr+ge<<2;var Rr=F-mi;Je+=(T.r=Se=p[ht])*Rr,sr+=(T.g=Ce=p[ht+1])*Rr,Ie+=(T.b=He=p[ht+2])*Rr,Xr+=(T.a=Xe=p[ht+3])*Rr,Pe+=Se,Ee+=Ce,vr+=He,ti+=Xe,T=T.next,mi<C&&(rr+=s)}ht=ge,W=Q,j=V;for(var ri=0;ri<u;ri++){var jr=ht<<2;p[jr+3]=Xe=Xr*Bt>>>Et,Xe>0?(Xe=255/Xe,p[jr]=(Je*Bt>>>Et)*Xe,p[jr+1]=(sr*Bt>>>Et)*Xe,p[jr+2]=(Ie*Bt>>>Et)*Xe):p[jr]=p[jr+1]=p[jr+2]=0,Je-=nr,sr-=yr,Ie-=br,Xr-=ce,nr-=W.r,yr-=W.g,br-=W.b,ce-=W.a,jr=ge+((jr=ri+F)<C?jr:C)*s<<2,Je+=Pe+=W.r=p[jr],sr+=Ee+=W.g=p[jr+1],Ie+=vr+=W.b=p[jr+2],Xr+=ti+=W.a=p[jr+3],W=W.next,nr+=Se=j.r,yr+=Ce=j.g,br+=He=j.b,ce+=Xe=j.a,Pe-=Se,Ee-=Ce,vr-=He,ti-=Xe,j=j.next,ht+=s}}return n}var SB=function n(){QR(this,n),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function RR(){var{DOMParser:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t={window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:n,createCanvas(i,s){return new OffscreenCanvas(i,s)},createImage(i){return tl(function*(){var s=yield fetch(i),u=yield s.blob(),d=yield createImageBitmap(u);return d})()}};return(typeof DOMParser<"u"||typeof n>"u")&&Reflect.deleteProperty(t,"DOMParser"),t}function zR(n){var{DOMParser:t,canvas:i,fetch:s}=n;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:t,fetch:s,createCanvas:i.createCanvas,createImage:i.loadImage}}var HR=Object.freeze({__proto__:null,offscreen:RR,node:zR});function Ec(n){return n.replace(/(?!\u3000)\s+/gm," ")}function IB(n){return n.replace(/^[\n \t]+/,"")}function EB(n){return n.replace(/[\n \t]+$/,"")}function Js(n){var t=(n||"").match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm)||[];return t.map(parseFloat)}var VR=/^[A-Z-]+$/;function TB(n){return VR.test(n)?n.toLowerCase():n}function j1(n){var t=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(n)||[];return t[2]||t[3]||t[4]}function UB(n){if(!n.startsWith("rgb"))return n;var t=3,i=n.replace(/\d+(\.\d+)?/g,(s,u)=>t--&&u?String(Math.round(parseFloat(s))):s);return i}var jR=/(\[[^\]]+\])/g,KR=/(#[^\s+>~.[:]+)/g,$R=/(\.[^\s+>~.[:]+)/g,qR=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,GR=/(:[\w-]+\([^)]*\))/gi,XR=/(:[^\s+>~.[:]+)/g,ZR=/([^\s+>~.[:]+)/g;function Tc(n,t){var i=t.exec(n);return i?[n.replace(t," "),i.length]:[n,0]}function PB(n){var t=[0,0,0],i=n.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),s=0;return[i,s]=Tc(i,jR),t[1]+=s,[i,s]=Tc(i,KR),t[0]+=s,[i,s]=Tc(i,$R),t[1]+=s,[i,s]=Tc(i,qR),t[2]+=s,[i,s]=Tc(i,GR),t[1]+=s,[i,s]=Tc(i,XR),t[1]+=s,i=i.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[i,s]=Tc(i,ZR),t[2]+=s,t.join("")}var Uc=1e-8;function K1(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2))}function Rf(n,t){return(n[0]*t[0]+n[1]*t[1])/(K1(n)*K1(t))}function $1(n,t){return(n[0]*t[1]<n[1]*t[0]?-1:1)*Math.acos(Rf(n,t))}function q1(n){return n*n*n}function G1(n){return 3*n*n*(1-n)}function X1(n){return 3*n*(1-n)*(1-n)}function Z1(n){return(1-n)*(1-n)*(1-n)}function W1(n){return n*n}function Y1(n){return 2*n*(1-n)}function J1(n){return(1-n)*(1-n)}class mr{constructor(t,i,s){this.document=t,this.name=i,this.value=s,this.isNormalizedColor=!1}static empty(t){return new mr(t,"EMPTY","")}split(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:" ",{document:i,name:s}=this;return Ec(this.getString()).trim().split(t).map(u=>new mr(i,s,u))}hasValue(t){var{value:i}=this;return i!==null&&i!==""&&(t||i!==0)&&typeof i<"u"}isString(t){var{value:i}=this,s=typeof i=="string";return!s||!t?s:t.test(i)}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;var t=this.getString();switch(!0){case t.endsWith("px"):case/^[0-9]+$/.test(t):return!0;default:return!1}}setValue(t){return this.value=t,this}getValue(t){return typeof t>"u"||this.hasValue()?this.value:t}getNumber(t){if(!this.hasValue())return typeof t>"u"?0:parseFloat(t);var{value:i}=this,s=parseFloat(i);return this.isString(/%$/)&&(s/=100),s}getString(t){return typeof t>"u"||this.hasValue()?typeof this.value>"u"?"":String(this.value):String(t)}getColor(t){var i=this.getString(t);return this.isNormalizedColor||(this.isNormalizedColor=!0,i=UB(i),this.value=i),i}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasValue())return 0;var[s,u]=typeof t=="boolean"?[void 0,t]:[t],{viewPort:d}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(d.computeSize("x"),d.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(d.computeSize("x"),d.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*d.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*d.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return this.getNumber()*15;case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case(this.isString(/%$/)&&u):return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*d.computeSize(s);default:{var p=this.getNumber();return i&&p<1?p*d.computeSize(s):p}}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():this.getNumber()*1e3:0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){var t=this.getString(),i=/#([^)'"]+)/.exec(t);return i&&(i=i[1]),i||(i=t),this.document.definitions[i]}getFillStyleDefinition(t,i){var s=this.getDefinition();if(!s)return null;if(typeof s.createGradient=="function")return s.createGradient(this.document.ctx,t,i);if(typeof s.createPattern=="function"){if(s.getHrefAttribute().hasValue()){var u=s.getAttribute("patternTransform");s=s.getHrefAttribute().getDefinition(),u.hasValue()&&s.getAttribute("patternTransform",!0).setValue(u.value)}return s.createPattern(this.document.ctx,t,i)}return null}getTextBaseline(){return this.hasValue()?mr.textBaselineMapping[this.getString()]:null}addOpacity(t){for(var i=this.getColor(),s=i.length,u=0,d=0;d<s&&(i[d]===","&&u++,u!==3);d++);if(t.hasValue()&&this.isString()&&u!==3){var p=new O1(i);p.ok&&(p.alpha=t.getNumber(),i=p.toRGBA())}return new mr(this.document,this.name,i)}}mr.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};class LB{constructor(){this.viewPorts=[]}clear(){this.viewPorts=[]}setCurrent(t,i){this.viewPorts.push({width:t,height:i})}removeCurrent(){this.viewPorts.pop()}getCurrent(){var{viewPorts:t}=this;return t[t.length-1]}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(t){return typeof t=="number"?t:t==="x"?this.width:t==="y"?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}}class Gi{constructor(t,i){this.x=t,this.y=i}static parse(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,[s=i,u=i]=Js(t);return new Gi(s,u)}static parseScale(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,[s=i,u=s]=Js(t);return new Gi(s,u)}static parsePath(t){for(var i=Js(t),s=i.length,u=[],d=0;d<s;d+=2)u.push(new Gi(i[d],i[d+1]));return u}angleTo(t){return Math.atan2(t.y-this.y,t.x-this.x)}applyTransform(t){var{x:i,y:s}=this,u=i*t[0]+s*t[2]+t[4],d=i*t[1]+s*t[3]+t[5];this.x=u,this.y=d}}class QB{constructor(t){this.screen=t,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}isWorking(){return this.working}start(){if(!this.working){var{screen:t,onClick:i,onMouseMove:s}=this,u=t.ctx.canvas;u.onclick=i,u.onmousemove=s,this.working=!0}}stop(){if(this.working){var t=this.screen.ctx.canvas;this.working=!1,t.onclick=null,t.onmousemove=null}}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(this.working){var{screen:t,events:i,eventElements:s}=this,{style:u}=t.ctx.canvas;u&&(u.cursor=""),i.forEach((d,p)=>{for(var{run:A}=d,v=s[p];v;)A(v),v=v.parent}),this.events=[],this.eventElements=[]}}checkPath(t,i){if(!(!this.working||!i)){var{events:s,eventElements:u}=this;s.forEach((d,p)=>{var{x:A,y:v}=d;!u[p]&&i.isPointInPath&&i.isPointInPath(A,v)&&(u[p]=t)})}}checkBoundingBox(t,i){if(!(!this.working||!i)){var{events:s,eventElements:u}=this;s.forEach((d,p)=>{var{x:A,y:v}=d;!u[p]&&i.isPointInBox(A,v)&&(u[p]=t)})}}mapXY(t,i){for(var{window:s,ctx:u}=this.screen,d=new Gi(t,i),p=u.canvas;p;)d.x-=p.offsetLeft,d.y-=p.offsetTop,p=p.offsetParent;return s.scrollX&&(d.x+=s.scrollX),s.scrollY&&(d.y+=s.scrollY),d}onClick(t){var{x:i,y:s}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onclick",x:i,y:s,run(u){u.onClick&&u.onClick()}})}onMouseMove(t){var{x:i,y:s}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onmousemove",x:i,y:s,run(u){u.onMouseMove&&u.onMouseMove()}})}}var kB=typeof window<"u"?window:null,MB=typeof fetch<"u"?fetch.bind(void 0):null;class ld{constructor(t){var{fetch:i=MB,window:s=kB}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.ctx=t,this.FRAMERATE=30,this.MAX_VIRTUAL_PIXELS=3e4,this.CLIENT_WIDTH=800,this.CLIENT_HEIGHT=600,this.viewPort=new LB,this.mouse=new QB(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=s,this.fetch=i}wait(t){this.waits.push(t)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;var t=this.waits.every(i=>i());return t&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=t,t}setDefaults(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4}setViewBox(t){var{document:i,ctx:s,aspectRatio:u,width:d,desiredWidth:p,height:A,desiredHeight:v,minX:C=0,minY:F=0,refX:E,refY:Q,clip:T=!1,clipX:V=0,clipY:R=0}=t,W=Ec(u).replace(/^defer\s/,""),[j,rt]=W.split(" "),ht=j||"xMidYMid",Bt=rt||"meet",Et=d/p,Tt=A/v,xt=Math.min(Et,Tt),ft=Math.max(Et,Tt),Nt=p,jt=v;Bt==="meet"&&(Nt*=xt,jt*=xt),Bt==="slice"&&(Nt*=ft,jt*=ft);var at=new mr(i,"refX",E),ct=new mr(i,"refY",Q),vt=at.hasValue()&&ct.hasValue();if(vt&&s.translate(-xt*at.getPixels("x"),-xt*ct.getPixels("y")),T){var mt=xt*V,$t=xt*R;s.beginPath(),s.moveTo(mt,$t),s.lineTo(d,$t),s.lineTo(d,A),s.lineTo(mt,A),s.closePath(),s.clip()}if(!vt){var Vt=Bt==="meet"&&xt===Tt,Zt=Bt==="slice"&&ft===Tt,Ht=Bt==="meet"&&xt===Et,Yt=Bt==="slice"&&ft===Et;ht.startsWith("xMid")&&(Vt||Zt)&&s.translate(d/2-Nt/2,0),ht.endsWith("YMid")&&(Ht||Yt)&&s.translate(0,A/2-jt/2),ht.startsWith("xMax")&&(Vt||Zt)&&s.translate(d-Nt,0),ht.endsWith("YMax")&&(Ht||Yt)&&s.translate(0,A-jt)}switch(!0){case ht==="none":s.scale(Et,Tt);break;case Bt==="meet":s.scale(xt,xt);break;case Bt==="slice":s.scale(ft,ft);break}s.translate(-C,-F)}start(t){var{enableRedraw:i=!1,ignoreMouse:s=!1,ignoreAnimation:u=!1,ignoreDimensions:d=!1,ignoreClear:p=!1,forceRedraw:A,scaleWidth:v,scaleHeight:C,offsetX:F,offsetY:E}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{FRAMERATE:Q,mouse:T}=this,V=1e3/Q;if(this.frameDuration=V,this.readyPromise=new Promise(ht=>{this.resolveReady=ht}),this.isReady()&&this.render(t,d,p,v,C,F,E),!!i){var R=Date.now(),W=R,j=0,rt=()=>{R=Date.now(),j=R-W,j>=V&&(W=R-j%V,this.shouldUpdate(u,A)&&(this.render(t,d,p,v,C,F,E),T.runEvents())),this.intervalId=M1(rt)};s||T.start(),this.intervalId=M1(rt)}}stop(){this.intervalId&&(M1.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(t,i){if(!t){var{frameDuration:s}=this,u=this.animations.reduce((d,p)=>p.update(s)||d,!1);if(u)return!0}return!!(typeof i=="function"&&i()||!this.isReadyLock&&this.isReady()||this.mouse.hasEvents())}render(t,i,s,u,d,p,A){var{CLIENT_WIDTH:v,CLIENT_HEIGHT:C,viewPort:F,ctx:E,isFirstRender:Q}=this,T=E.canvas;F.clear(),T.width&&T.height?F.setCurrent(T.width,T.height):F.setCurrent(v,C);var V=t.getStyle("width"),R=t.getStyle("height");!i&&(Q||typeof u!="number"&&typeof d!="number")&&(V.hasValue()&&(T.width=V.getPixels("x"),T.style&&(T.style.width="".concat(T.width,"px"))),R.hasValue()&&(T.height=R.getPixels("y"),T.style&&(T.style.height="".concat(T.height,"px"))));var W=T.clientWidth||T.width,j=T.clientHeight||T.height;if(i&&V.hasValue()&&R.hasValue()&&(W=V.getPixels("x"),j=R.getPixels("y")),F.setCurrent(W,j),typeof p=="number"&&t.getAttribute("x",!0).setValue(p),typeof A=="number"&&t.getAttribute("y",!0).setValue(A),typeof u=="number"||typeof d=="number"){var rt=Js(t.getAttribute("viewBox").getString()),ht=0,Bt=0;if(typeof u=="number"){var Et=t.getStyle("width");Et.hasValue()?ht=Et.getPixels("x")/u:isNaN(rt[2])||(ht=rt[2]/u)}if(typeof d=="number"){var Tt=t.getStyle("height");Tt.hasValue()?Bt=Tt.getPixels("y")/d:isNaN(rt[3])||(Bt=rt[3]/d)}ht||(ht=Bt),Bt||(Bt=ht),t.getAttribute("width",!0).setValue(u),t.getAttribute("height",!0).setValue(d);var xt=t.getStyle("transform",!0,!0);xt.setValue("".concat(xt.getString()," scale(").concat(1/ht,", ").concat(1/Bt,")"))}s||E.clearRect(0,0,W,j),t.render(E),Q&&(this.isFirstRender=!1)}}ld.defaultWindow=kB,ld.defaultFetch=MB;var{defaultFetch:WR}=ld,YR=typeof DOMParser<"u"?DOMParser:null;class zf{constructor(){var{fetch:t=WR,DOMParser:i=YR}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fetch=t,this.DOMParser=i}parse(t){var i=this;return tl(function*(){return t.startsWith("<")?i.parseFromString(t):i.load(t)})()}parseFromString(t){var i=new this.DOMParser;try{return this.checkDocument(i.parseFromString(t,"image/svg+xml"))}catch{return this.checkDocument(i.parseFromString(t,"text/xml"))}}checkDocument(t){var i=t.getElementsByTagName("parsererror")[0];if(i)throw new Error(i.textContent);return t}load(t){var i=this;return tl(function*(){var s=yield i.fetch(t),u=yield s.text();return i.parseFromString(u)})()}}class DB{constructor(t,i){this.type="translate",this.point=null,this.point=Gi.parse(i)}apply(t){var{x:i,y:s}=this.point;t.translate(i||0,s||0)}unapply(t){var{x:i,y:s}=this.point;t.translate(-1*i||0,-1*s||0)}applyToPoint(t){var{x:i,y:s}=this.point;t.applyTransform([1,0,0,1,i||0,s||0])}}class NB{constructor(t,i,s){this.type="rotate",this.angle=null,this.originX=null,this.originY=null,this.cx=0,this.cy=0;var u=Js(i);this.angle=new mr(t,"angle",u[0]),this.originX=s[0],this.originY=s[1],this.cx=u[1]||0,this.cy=u[2]||0}apply(t){var{cx:i,cy:s,originX:u,originY:d,angle:p}=this,A=i+u.getPixels("x"),v=s+d.getPixels("y");t.translate(A,v),t.rotate(p.getRadians()),t.translate(-A,-v)}unapply(t){var{cx:i,cy:s,originX:u,originY:d,angle:p}=this,A=i+u.getPixels("x"),v=s+d.getPixels("y");t.translate(A,v),t.rotate(-1*p.getRadians()),t.translate(-A,-v)}applyToPoint(t){var{cx:i,cy:s,angle:u}=this,d=u.getRadians();t.applyTransform([1,0,0,1,i||0,s||0]),t.applyTransform([Math.cos(d),Math.sin(d),-Math.sin(d),Math.cos(d),0,0]),t.applyTransform([1,0,0,1,-i||0,-s||0])}}class OB{constructor(t,i,s){this.type="scale",this.scale=null,this.originX=null,this.originY=null;var u=Gi.parseScale(i);(u.x===0||u.y===0)&&(u.x=Uc,u.y=Uc),this.scale=u,this.originX=s[0],this.originY=s[1]}apply(t){var{scale:{x:i,y:s},originX:u,originY:d}=this,p=u.getPixels("x"),A=d.getPixels("y");t.translate(p,A),t.scale(i,s||i),t.translate(-p,-A)}unapply(t){var{scale:{x:i,y:s},originX:u,originY:d}=this,p=u.getPixels("x"),A=d.getPixels("y");t.translate(p,A),t.scale(1/i,1/s||i),t.translate(-p,-A)}applyToPoint(t){var{x:i,y:s}=this.scale;t.applyTransform([i||0,0,0,s||0,0,0])}}class ty{constructor(t,i,s){this.type="matrix",this.matrix=[],this.originX=null,this.originY=null,this.matrix=Js(i),this.originX=s[0],this.originY=s[1]}apply(t){var{originX:i,originY:s,matrix:u}=this,d=i.getPixels("x"),p=s.getPixels("y");t.translate(d,p),t.transform(u[0],u[1],u[2],u[3],u[4],u[5]),t.translate(-d,-p)}unapply(t){var{originX:i,originY:s,matrix:u}=this,d=u[0],p=u[2],A=u[4],v=u[1],C=u[3],F=u[5],E=0,Q=0,T=1,V=1/(d*(C*T-F*Q)-p*(v*T-F*E)+A*(v*Q-C*E)),R=i.getPixels("x"),W=s.getPixels("y");t.translate(R,W),t.transform(V*(C*T-F*Q),V*(F*E-v*T),V*(A*Q-p*T),V*(d*T-A*E),V*(p*F-A*C),V*(A*v-d*F)),t.translate(-R,-W)}applyToPoint(t){t.applyTransform(this.matrix)}}class ey extends ty{constructor(t,i,s){super(t,i,s),this.type="skew",this.angle=null,this.angle=new mr(t,"angle",i)}}class RB extends ey{constructor(t,i,s){super(t,i,s),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}}class zB extends ey{constructor(t,i,s){super(t,i,s),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}}function JR(n){return Ec(n).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function t7(n){var[t,i]=n.split("(");return[t.trim(),i.trim().replace(")","")]}class $l{constructor(t,i,s){this.document=t,this.transforms=[];var u=JR(i);u.forEach(d=>{if(d!=="none"){var[p,A]=t7(d),v=$l.transformTypes[p];typeof v<"u"&&this.transforms.push(new v(this.document,A,s))}})}static fromElement(t,i){var s=i.getStyle("transform",!1,!0),[u,d=u]=i.getStyle("transform-origin",!1,!0).split(),p=[u,d];return s.hasValue()?new $l(t,s.getString(),p):null}apply(t){for(var{transforms:i}=this,s=i.length,u=0;u<s;u++)i[u].apply(t)}unapply(t){for(var{transforms:i}=this,s=i.length,u=s-1;u>=0;u--)i[u].unapply(t)}applyToPoint(t){for(var{transforms:i}=this,s=i.length,u=0;u<s;u++)i[u].applyToPoint(t)}}$l.transformTypes={translate:DB,rotate:NB,scale:OB,matrix:ty,skewX:RB,skewY:zB};class Pi{constructor(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(this.document=t,this.node=i,this.captureTextNodes=s,this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],!(!i||i.nodeType!==1)){if(Array.from(i.attributes).forEach(A=>{var v=TB(A.nodeName);this.attributes[v]=new mr(t,v,A.value)}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()){var u=this.getAttribute("style").getString().split(";").map(A=>A.trim());u.forEach(A=>{if(A){var[v,C]=A.split(":").map(F=>F.trim());this.styles[v]=new mr(t,v,C)}})}var{definitions:d}=t,p=this.getAttribute("id");p.hasValue()&&(d[p.getString()]||(d[p.getString()]=this)),Array.from(i.childNodes).forEach(A=>{if(A.nodeType===1)this.addChild(A);else if(s&&(A.nodeType===3||A.nodeType===4)){var v=t.createTextNode(A);v.getText().length>0&&this.addChild(v)}})}}getAttribute(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=this.attributes[t];if(!s&&i){var u=new mr(this.document,t,"");return this.attributes[t]=u,u}return s||mr.empty(this.document)}getHrefAttribute(){for(var t in this.attributes)if(t==="href"||t.endsWith(":href"))return this.attributes[t];return mr.empty(this.document)}getStyle(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,u=this.styles[t];if(u)return u;var d=this.getAttribute(t);if(d!=null&&d.hasValue())return this.styles[t]=d,d;if(!s){var{parent:p}=this;if(p){var A=p.getStyle(t);if(A!=null&&A.hasValue())return A}}if(i){var v=new mr(this.document,t,"");return this.styles[t]=v,v}return u||mr.empty(this.document)}render(t){if(!(this.getStyle("display").getString()==="none"||this.getStyle("visibility").getString()==="hidden")){if(t.save(),this.getStyle("mask").hasValue()){var i=this.getStyle("mask").getDefinition();i&&(this.applyEffects(t),i.apply(t,this))}else if(this.getStyle("filter").getValue("none")!=="none"){var s=this.getStyle("filter").getDefinition();s&&(this.applyEffects(t),s.apply(t,this))}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}}setContext(t){}applyEffects(t){var i=$l.fromElement(this.document,this);i&&i.apply(t);var s=this.getStyle("clip-path",!1,!0);if(s.hasValue()){var u=s.getDefinition();u&&u.apply(t)}}clearContext(t){}renderChildren(t){this.children.forEach(i=>{i.render(t)})}addChild(t){var i=t instanceof Pi?t:this.document.createElement(t);i.parent=this,Pi.ignoreChildTypes.includes(i.type)||this.children.push(i)}matchesSelector(t){var i,{node:s}=this;if(typeof s.matches=="function")return s.matches(t);var u=(i=s.getAttribute)===null||i===void 0?void 0:i.call(s,"class");return!u||u===""?!1:u.split(" ").some(d=>".".concat(d)===t)}addStylesFromStyleDefinition(){var{styles:t,stylesSpecificity:i}=this.document;for(var s in t)if(!s.startsWith("@")&&this.matchesSelector(s)){var u=t[s],d=i[s];if(u)for(var p in u){var A=this.stylesSpecificity[p];typeof A>"u"&&(A="000"),d>=A&&(this.styles[p]=u[p],this.stylesSpecificity[p]=d)}}}removeStyles(t,i){var s=i.reduce((u,d)=>{var p=t.getStyle(d);if(!p.hasValue())return u;var A=p.getString();return p.setValue(""),[...u,[d,A]]},[]);return s}restoreStyles(t,i){i.forEach(s=>{var[u,d]=s;t.getStyle(u,!0).setValue(d)})}isFirstChild(){var t;return((t=this.parent)===null||t===void 0?void 0:t.children.indexOf(this))===0}}Pi.ignoreChildTypes=["title"];class HB extends Pi{constructor(t,i,s){super(t,i,s)}}function e7(n){var t=n.trim();return/^('|")/.test(t)?t:'"'.concat(t,'"')}function r7(n){return typeof process>"u"?n:n.trim().split(",").map(e7).join(",")}function i7(n){if(!n)return"";var t=n.trim().toLowerCase();switch(t){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return t;default:return/^oblique\s+(-|)\d+deg$/.test(t)?t:""}}function n7(n){if(!n)return"";var t=n.trim().toLowerCase();switch(t){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return t;default:return/^[\d.]+$/.test(t)?t:""}}class ps{constructor(t,i,s,u,d,p){var A=p?typeof p=="string"?ps.parse(p):p:{};this.fontFamily=d||A.fontFamily,this.fontSize=u||A.fontSize,this.fontStyle=t||A.fontStyle,this.fontWeight=s||A.fontWeight,this.fontVariant=i||A.fontVariant}static parse(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0,s="",u="",d="",p="",A="",v=Ec(t).trim().split(" "),C={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return v.forEach(F=>{switch(!0){case(!C.fontStyle&&ps.styles.includes(F)):F!=="inherit"&&(s=F),C.fontStyle=!0;break;case(!C.fontVariant&&ps.variants.includes(F)):F!=="inherit"&&(u=F),C.fontStyle=!0,C.fontVariant=!0;break;case(!C.fontWeight&&ps.weights.includes(F)):F!=="inherit"&&(d=F),C.fontStyle=!0,C.fontVariant=!0,C.fontWeight=!0;break;case!C.fontSize:F!=="inherit"&&([p]=F.split("/")),C.fontStyle=!0,C.fontVariant=!0,C.fontWeight=!0,C.fontSize=!0;break;default:F!=="inherit"&&(A+=F)}}),new ps(s,u,d,p,A,i)}toString(){return[i7(this.fontStyle),this.fontVariant,n7(this.fontWeight),this.fontSize,r7(this.fontFamily)].join(" ").trim()}}ps.styles="normal|italic|oblique|inherit",ps.variants="normal|small-caps|inherit",ps.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";class Vo{constructor(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.NaN,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.NaN,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Number.NaN,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Number.NaN;this.x1=t,this.y1=i,this.x2=s,this.y2=u,this.addPoint(t,i),this.addPoint(s,u)}get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(t,i){typeof t<"u"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),typeof i<"u"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=i,this.y2=i),i<this.y1&&(this.y1=i),i>this.y2&&(this.y2=i))}addX(t){this.addPoint(t,null)}addY(t){this.addPoint(null,t)}addBoundingBox(t){if(t){var{x1:i,y1:s,x2:u,y2:d}=t;this.addPoint(i,s),this.addPoint(u,d)}}sumCubic(t,i,s,u,d){return Math.pow(1-t,3)*i+3*Math.pow(1-t,2)*t*s+3*(1-t)*Math.pow(t,2)*u+Math.pow(t,3)*d}bezierCurveAdd(t,i,s,u,d){var p=6*i-12*s+6*u,A=-3*i+9*s-9*u+3*d,v=3*s-3*i;if(A===0){if(p===0)return;var C=-v/p;0<C&&C<1&&(t?this.addX(this.sumCubic(C,i,s,u,d)):this.addY(this.sumCubic(C,i,s,u,d)));return}var F=Math.pow(p,2)-4*v*A;if(!(F<0)){var E=(-p+Math.sqrt(F))/(2*A);0<E&&E<1&&(t?this.addX(this.sumCubic(E,i,s,u,d)):this.addY(this.sumCubic(E,i,s,u,d)));var Q=(-p-Math.sqrt(F))/(2*A);0<Q&&Q<1&&(t?this.addX(this.sumCubic(Q,i,s,u,d)):this.addY(this.sumCubic(Q,i,s,u,d)))}}addBezierCurve(t,i,s,u,d,p,A,v){this.addPoint(t,i),this.addPoint(A,v),this.bezierCurveAdd(!0,t,s,d,A),this.bezierCurveAdd(!1,i,u,p,v)}addQuadraticCurve(t,i,s,u,d,p){var A=t+.6666666666666666*(s-t),v=i+2/3*(u-i),C=A+1/3*(d-t),F=v+1/3*(p-i);this.addBezierCurve(t,i,A,C,v,F,d,p)}isPointInBox(t,i){var{x1:s,y1:u,x2:d,y2:p}=this;return s<=t&&t<=d&&u<=i&&i<=p}}class kr extends Be{constructor(t){super(t.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=null,this.start=null,this.current=null,this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new Gi(0,0),this.control=new Gi(0,0),this.current=new Gi(0,0),this.points=[],this.angles=[]}isEnd(){var{i:t,commands:i}=this;return t>=i.length-1}next(){var t=this.commands[++this.i];return this.previousCommand=this.command,this.command=t,t}getPoint(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"x",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"y",s=new Gi(this.command[t],this.command[i]);return this.makeAbsolute(s)}getAsControlPoint(t,i){var s=this.getPoint(t,i);return this.control=s,s}getAsCurrentPoint(t,i){var s=this.getPoint(t,i);return this.current=s,s}getReflectedControlPoint(){var t=this.previousCommand.type;if(t!==Be.CURVE_TO&&t!==Be.SMOOTH_CURVE_TO&&t!==Be.QUAD_TO&&t!==Be.SMOOTH_QUAD_TO)return this.current;var{current:{x:i,y:s},control:{x:u,y:d}}=this,p=new Gi(2*i-u,2*s-d);return p}makeAbsolute(t){if(this.command.relative){var{x:i,y:s}=this.current;t.x+=i,t.y+=s}return t}addMarker(t,i,s){var{points:u,angles:d}=this;s&&d.length>0&&!d[d.length-1]&&(d[d.length-1]=u[u.length-1].angleTo(s)),this.addMarkerAngle(t,i?i.angleTo(t):null)}addMarkerAngle(t,i){this.points.push(t),this.angles.push(i)}getMarkerPoints(){return this.points}getMarkerAngles(){for(var{angles:t}=this,i=t.length,s=0;s<i;s++)if(!t[s]){for(var u=s+1;u<i;u++)if(t[u]){t[s]=t[u];break}}return t}}class ql extends Pi{constructor(){super(...arguments),this.modifiedEmSizeStack=!1}calculateOpacity(){for(var t=1,i=this;i;){var s=i.getStyle("opacity",!1,!0);s.hasValue(!0)&&(t*=s.getNumber()),i=i.parent}return t}setContext(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!i){var s=this.getStyle("fill"),u=this.getStyle("fill-opacity"),d=this.getStyle("stroke"),p=this.getStyle("stroke-opacity");if(s.isUrlDefinition()){var A=s.getFillStyleDefinition(this,u);A&&(t.fillStyle=A)}else if(s.hasValue()){s.getString()==="currentColor"&&s.setValue(this.getStyle("color").getColor());var v=s.getColor();v!=="inherit"&&(t.fillStyle=v==="none"?"rgba(0,0,0,0)":v)}if(u.hasValue()){var C=new mr(this.document,"fill",t.fillStyle).addOpacity(u).getColor();t.fillStyle=C}if(d.isUrlDefinition()){var F=d.getFillStyleDefinition(this,p);F&&(t.strokeStyle=F)}else if(d.hasValue()){d.getString()==="currentColor"&&d.setValue(this.getStyle("color").getColor());var E=d.getString();E!=="inherit"&&(t.strokeStyle=E==="none"?"rgba(0,0,0,0)":E)}if(p.hasValue()){var Q=new mr(this.document,"stroke",t.strokeStyle).addOpacity(p).getString();t.strokeStyle=Q}var T=this.getStyle("stroke-width");if(T.hasValue()){var V=T.getPixels();t.lineWidth=V||Uc}var R=this.getStyle("stroke-linecap"),W=this.getStyle("stroke-linejoin"),j=this.getStyle("stroke-miterlimit"),rt=this.getStyle("stroke-dasharray"),ht=this.getStyle("stroke-dashoffset");if(R.hasValue()&&(t.lineCap=R.getString()),W.hasValue()&&(t.lineJoin=W.getString()),j.hasValue()&&(t.miterLimit=j.getNumber()),rt.hasValue()&&rt.getString()!=="none"){var Bt=Js(rt.getString());typeof t.setLineDash<"u"?t.setLineDash(Bt):typeof t.webkitLineDash<"u"?t.webkitLineDash=Bt:typeof t.mozDash<"u"&&!(Bt.length===1&&Bt[0]===0)&&(t.mozDash=Bt);var Et=ht.getPixels();typeof t.lineDashOffset<"u"?t.lineDashOffset=Et:typeof t.webkitLineDashOffset<"u"?t.webkitLineDashOffset=Et:typeof t.mozDashOffset<"u"&&(t.mozDashOffset=Et)}}if(this.modifiedEmSizeStack=!1,typeof t.font<"u"){var Tt=this.getStyle("font"),xt=this.getStyle("font-style"),ft=this.getStyle("font-variant"),Nt=this.getStyle("font-weight"),jt=this.getStyle("font-size"),at=this.getStyle("font-family"),ct=new ps(xt.getString(),ft.getString(),Nt.getString(),jt.hasValue()?"".concat(jt.getPixels(!0),"px"):"",at.getString(),ps.parse(Tt.getString(),t.font));xt.setValue(ct.fontStyle),ft.setValue(ct.fontVariant),Nt.setValue(ct.fontWeight),jt.setValue(ct.fontSize),at.setValue(ct.fontFamily),t.font=ct.toString(),jt.isPixels()&&(this.document.emSize=jt.getPixels(),this.modifiedEmSizeStack=!0)}i||(this.applyEffects(t),t.globalAlpha=this.calculateOpacity())}clearContext(t){super.clearContext(t),this.modifiedEmSizeStack&&this.document.popEmSize()}}class hi extends ql{constructor(t,i,s){super(t,i,s),this.type="path",this.pathParser=null,this.pathParser=new kr(this.getAttribute("d").getString())}path(t){var{pathParser:i}=this,s=new Vo;for(i.reset(),t&&t.beginPath();!i.isEnd();)switch(i.next().type){case kr.MOVE_TO:this.pathM(t,s);break;case kr.LINE_TO:this.pathL(t,s);break;case kr.HORIZ_LINE_TO:this.pathH(t,s);break;case kr.VERT_LINE_TO:this.pathV(t,s);break;case kr.CURVE_TO:this.pathC(t,s);break;case kr.SMOOTH_CURVE_TO:this.pathS(t,s);break;case kr.QUAD_TO:this.pathQ(t,s);break;case kr.SMOOTH_QUAD_TO:this.pathT(t,s);break;case kr.ARC:this.pathA(t,s);break;case kr.CLOSE_PATH:this.pathZ(t,s);break}return s}getBoundingBox(t){return this.path()}getMarkers(){var{pathParser:t}=this,i=t.getMarkerPoints(),s=t.getMarkerAngles(),u=i.map((d,p)=>[d,s[p]]);return u}renderChildren(t){this.path(t),this.document.screen.mouse.checkPath(this,t);var i=this.getStyle("fill-rule");t.fillStyle!==""&&(i.getString("inherit")!=="inherit"?t.fill(i.getString()):t.fill()),t.strokeStyle!==""&&(this.getAttribute("vector-effect").getString()==="non-scaling-stroke"?(t.save(),t.setTransform(1,0,0,1,0,0),t.stroke(),t.restore()):t.stroke());var s=this.getMarkers();if(s){var u=s.length-1,d=this.getStyle("marker-start"),p=this.getStyle("marker-mid"),A=this.getStyle("marker-end");if(d.isUrlDefinition()){var v=d.getDefinition(),[C,F]=s[0];v.render(t,C,F)}if(p.isUrlDefinition())for(var E=p.getDefinition(),Q=1;Q<u;Q++){var[T,V]=s[Q];E.render(t,T,V)}if(A.isUrlDefinition()){var R=A.getDefinition(),[W,j]=s[u];R.render(t,W,j)}}}static pathM(t){var i=t.getAsCurrentPoint();return t.start=t.current,{point:i}}pathM(t,i){var{pathParser:s}=this,{point:u}=hi.pathM(s),{x:d,y:p}=u;s.addMarker(u),i.addPoint(d,p),t&&t.moveTo(d,p)}static pathL(t){var{current:i}=t,s=t.getAsCurrentPoint();return{current:i,point:s}}pathL(t,i){var{pathParser:s}=this,{current:u,point:d}=hi.pathL(s),{x:p,y:A}=d;s.addMarker(d,u),i.addPoint(p,A),t&&t.lineTo(p,A)}static pathH(t){var{current:i,command:s}=t,u=new Gi((s.relative?i.x:0)+s.x,i.y);return t.current=u,{current:i,point:u}}pathH(t,i){var{pathParser:s}=this,{current:u,point:d}=hi.pathH(s),{x:p,y:A}=d;s.addMarker(d,u),i.addPoint(p,A),t&&t.lineTo(p,A)}static pathV(t){var{current:i,command:s}=t,u=new Gi(i.x,(s.relative?i.y:0)+s.y);return t.current=u,{current:i,point:u}}pathV(t,i){var{pathParser:s}=this,{current:u,point:d}=hi.pathV(s),{x:p,y:A}=d;s.addMarker(d,u),i.addPoint(p,A),t&&t.lineTo(p,A)}static pathC(t){var{current:i}=t,s=t.getPoint("x1","y1"),u=t.getAsControlPoint("x2","y2"),d=t.getAsCurrentPoint();return{current:i,point:s,controlPoint:u,currentPoint:d}}pathC(t,i){var{pathParser:s}=this,{current:u,point:d,controlPoint:p,currentPoint:A}=hi.pathC(s);s.addMarker(A,p,d),i.addBezierCurve(u.x,u.y,d.x,d.y,p.x,p.y,A.x,A.y),t&&t.bezierCurveTo(d.x,d.y,p.x,p.y,A.x,A.y)}static pathS(t){var{current:i}=t,s=t.getReflectedControlPoint(),u=t.getAsControlPoint("x2","y2"),d=t.getAsCurrentPoint();return{current:i,point:s,controlPoint:u,currentPoint:d}}pathS(t,i){var{pathParser:s}=this,{current:u,point:d,controlPoint:p,currentPoint:A}=hi.pathS(s);s.addMarker(A,p,d),i.addBezierCurve(u.x,u.y,d.x,d.y,p.x,p.y,A.x,A.y),t&&t.bezierCurveTo(d.x,d.y,p.x,p.y,A.x,A.y)}static pathQ(t){var{current:i}=t,s=t.getAsControlPoint("x1","y1"),u=t.getAsCurrentPoint();return{current:i,controlPoint:s,currentPoint:u}}pathQ(t,i){var{pathParser:s}=this,{current:u,controlPoint:d,currentPoint:p}=hi.pathQ(s);s.addMarker(p,d,d),i.addQuadraticCurve(u.x,u.y,d.x,d.y,p.x,p.y),t&&t.quadraticCurveTo(d.x,d.y,p.x,p.y)}static pathT(t){var{current:i}=t,s=t.getReflectedControlPoint();t.control=s;var u=t.getAsCurrentPoint();return{current:i,controlPoint:s,currentPoint:u}}pathT(t,i){var{pathParser:s}=this,{current:u,controlPoint:d,currentPoint:p}=hi.pathT(s);s.addMarker(p,d,d),i.addQuadraticCurve(u.x,u.y,d.x,d.y,p.x,p.y),t&&t.quadraticCurveTo(d.x,d.y,p.x,p.y)}static pathA(t){var{current:i,command:s}=t,{rX:u,rY:d,xRot:p,lArcFlag:A,sweepFlag:v}=s,C=p*(Math.PI/180),F=t.getAsCurrentPoint(),E=new Gi(Math.cos(C)*(i.x-F.x)/2+Math.sin(C)*(i.y-F.y)/2,-Math.sin(C)*(i.x-F.x)/2+Math.cos(C)*(i.y-F.y)/2),Q=Math.pow(E.x,2)/Math.pow(u,2)+Math.pow(E.y,2)/Math.pow(d,2);Q>1&&(u*=Math.sqrt(Q),d*=Math.sqrt(Q));var T=(A===v?-1:1)*Math.sqrt((Math.pow(u,2)*Math.pow(d,2)-Math.pow(u,2)*Math.pow(E.y,2)-Math.pow(d,2)*Math.pow(E.x,2))/(Math.pow(u,2)*Math.pow(E.y,2)+Math.pow(d,2)*Math.pow(E.x,2)));isNaN(T)&&(T=0);var V=new Gi(T*u*E.y/d,T*-d*E.x/u),R=new Gi((i.x+F.x)/2+Math.cos(C)*V.x-Math.sin(C)*V.y,(i.y+F.y)/2+Math.sin(C)*V.x+Math.cos(C)*V.y),W=$1([1,0],[(E.x-V.x)/u,(E.y-V.y)/d]),j=[(E.x-V.x)/u,(E.y-V.y)/d],rt=[(-E.x-V.x)/u,(-E.y-V.y)/d],ht=$1(j,rt);return Rf(j,rt)<=-1&&(ht=Math.PI),Rf(j,rt)>=1&&(ht=0),{currentPoint:F,rX:u,rY:d,sweepFlag:v,xAxisRotation:C,centp:R,a1:W,ad:ht}}pathA(t,i){var{pathParser:s}=this,{currentPoint:u,rX:d,rY:p,sweepFlag:A,xAxisRotation:v,centp:C,a1:F,ad:E}=hi.pathA(s),Q=1-A?1:-1,T=F+Q*(E/2),V=new Gi(C.x+d*Math.cos(T),C.y+p*Math.sin(T));if(s.addMarkerAngle(V,T-Q*Math.PI/2),s.addMarkerAngle(u,T-Q*Math.PI),i.addPoint(u.x,u.y),t&&!isNaN(F)&&!isNaN(E)){var R=d>p?d:p,W=d>p?1:d/p,j=d>p?p/d:1;t.translate(C.x,C.y),t.rotate(v),t.scale(W,j),t.arc(0,0,R,F,F+E,!!(1-A)),t.scale(1/W,1/j),t.rotate(-v),t.translate(-C.x,-C.y)}}static pathZ(t){t.current=t.start}pathZ(t,i){hi.pathZ(this.pathParser),t&&i.x1!==i.x2&&i.y1!==i.y2&&t.closePath()}}class ry extends hi{constructor(t,i,s){super(t,i,s),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}}class il extends ql{constructor(t,i,s){super(t,i,new.target===il?!0:s),this.type="text",this.x=0,this.y=0,this.measureCache=-1}setContext(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.setContext(t,i);var s=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();s&&(t.textBaseline=s)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(t){if(this.type!=="text")return this.getTElementBoundingBox(t);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t);var i=null;return this.children.forEach((s,u)=>{var d=this.getChildBoundingBox(t,this,this,u);i?i.addBoundingBox(d):i=d}),i}getFontSize(){var{document:t,parent:i}=this,s=ps.parse(t.ctx.font).fontSize,u=i.getStyle("font-size").getNumber(s);return u}getTElementBoundingBox(t){var i=this.getFontSize();return new Vo(this.x,this.y-i,this.x+this.measureText(t),this.y)}getGlyph(t,i,s){var u=i[s],d=null;if(t.isArabic){var p=i.length,A=i[s-1],v=i[s+1],C="isolated";if((s===0||A===" ")&&s<p-1&&v!==" "&&(C="terminal"),s>0&&A!==" "&&s<p-1&&v!==" "&&(C="medial"),s>0&&A!==" "&&(s===p-1||v===" ")&&(C="initial"),typeof t.glyphs[u]<"u"){var F=t.glyphs[u];d=F instanceof ry?F:F[C]}}else d=t.glyphs[u];return d||(d=t.missingGlyph),d}getText(){return""}getTextFromNode(t){var i=t||this.node,s=Array.from(i.parentNode.childNodes),u=s.indexOf(i),d=s.length-1,p=Ec(i.textContent||"");return u===0&&(p=IB(p)),u===d&&(p=EB(p)),p}renderChildren(t){if(this.type!=="text"){this.renderTElementChildren(t);return}this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t),this.children.forEach((s,u)=>{this.renderChild(t,this,this,u)});var{mouse:i}=this.document.screen;i.isWorking()&&i.checkBoundingBox(this,this.getBoundingBox(t))}renderTElementChildren(t){var{document:i,parent:s}=this,u=this.getText(),d=s.getStyle("font-family").getDefinition();if(d){for(var{unitsPerEm:p}=d.fontFace,A=ps.parse(i.ctx.font),v=s.getStyle("font-size").getNumber(A.fontSize),C=s.getStyle("font-style").getString(A.fontStyle),F=v/p,E=d.isRTL?u.split("").reverse().join(""):u,Q=Js(s.getAttribute("dx").getString()),T=E.length,V=0;V<T;V++){var R=this.getGlyph(d,E,V);t.translate(this.x,this.y),t.scale(F,-F);var W=t.lineWidth;t.lineWidth=t.lineWidth*p/v,C==="italic"&&t.transform(1,0,.4,1,0,0),R.render(t),C==="italic"&&t.transform(1,0,-.4,1,0,0),t.lineWidth=W,t.scale(1/F,-1/F),t.translate(-this.x,-this.y),this.x+=v*(R.horizAdvX||d.horizAdvX)/p,typeof Q[V]<"u"&&!isNaN(Q[V])&&(this.x+=Q[V])}return}var{x:j,y:rt}=this;t.fillStyle&&t.fillText(u,j,rt),t.strokeStyle&&t.strokeText(u,j,rt)}applyAnchoring(){if(!(this.textChunkStart>=this.leafTexts.length)){var t=this.leafTexts[this.textChunkStart],i=t.getStyle("text-anchor").getString("start"),s=!1,u=0;i==="start"&&!s||i==="end"&&s?u=t.x-this.minX:i==="end"&&!s||i==="start"&&s?u=t.x-this.maxX:u=t.x-(this.minX+this.maxX)/2;for(var d=this.textChunkStart;d<this.leafTexts.length;d++)this.leafTexts[d].x+=u;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}}adjustChildCoordinatesRecursive(t){this.children.forEach((i,s)=>{this.adjustChildCoordinatesRecursiveCore(t,this,this,s)}),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(t,i,s,u){var d=s.children[u];d.children.length>0?d.children.forEach((p,A)=>{i.adjustChildCoordinatesRecursiveCore(t,i,d,A)}):this.adjustChildCoordinates(t,i,s,u)}adjustChildCoordinates(t,i,s,u){var d=s.children[u];if(typeof d.measureText!="function")return d;t.save(),d.setContext(t,!0);var p=d.getAttribute("x"),A=d.getAttribute("y"),v=d.getAttribute("dx"),C=d.getAttribute("dy"),F=d.getStyle("font-family").getDefinition(),E=!!F&&F.isRTL;u===0&&(p.hasValue()||p.setValue(d.getInheritedAttribute("x")),A.hasValue()||A.setValue(d.getInheritedAttribute("y")),v.hasValue()||v.setValue(d.getInheritedAttribute("dx")),C.hasValue()||C.setValue(d.getInheritedAttribute("dy")));var Q=d.measureText(t);return E&&(i.x-=Q),p.hasValue()?(i.applyAnchoring(),d.x=p.getPixels("x"),v.hasValue()&&(d.x+=v.getPixels("x"))):(v.hasValue()&&(i.x+=v.getPixels("x")),d.x=i.x),i.x=d.x,E||(i.x+=Q),A.hasValue()?(d.y=A.getPixels("y"),C.hasValue()&&(d.y+=C.getPixels("y"))):(C.hasValue()&&(i.y+=C.getPixels("y")),d.y=i.y),i.y=d.y,i.leafTexts.push(d),i.minX=Math.min(i.minX,d.x,d.x+Q),i.maxX=Math.max(i.maxX,d.x,d.x+Q),d.clearContext(t),t.restore(),d}getChildBoundingBox(t,i,s,u){var d=s.children[u];if(typeof d.getBoundingBox!="function")return null;var p=d.getBoundingBox(t);return p?(d.children.forEach((A,v)=>{var C=i.getChildBoundingBox(t,i,d,v);p.addBoundingBox(C)}),p):null}renderChild(t,i,s,u){var d=s.children[u];d.render(t),d.children.forEach((p,A)=>{i.renderChild(t,i,d,A)})}measureText(t){var{measureCache:i}=this;if(~i)return i;var s=this.getText(),u=this.measureTargetText(t,s);return this.measureCache=u,u}measureTargetText(t,i){if(!i.length)return 0;var{parent:s}=this,u=s.getStyle("font-family").getDefinition();if(u){for(var d=this.getFontSize(),p=u.isRTL?i.split("").reverse().join(""):i,A=Js(s.getAttribute("dx").getString()),v=p.length,C=0,F=0;F<v;F++){var E=this.getGlyph(u,p,F);C+=(E.horizAdvX||u.horizAdvX)*d/u.fontFace.unitsPerEm,typeof A[F]<"u"&&!isNaN(A[F])&&(C+=A[F])}return C}if(!t.measureText)return i.length*10;t.save(),this.setContext(t,!0);var{width:Q}=t.measureText(i);return this.clearContext(t),t.restore(),Q}getInheritedAttribute(t){for(var i=this;i instanceof il&&i.isFirstChild();){var s=i.parent.getAttribute(t);if(s.hasValue(!0))return s.getValue("0");i=i.parent}return null}}class cd extends il{constructor(t,i,s){super(t,i,new.target===cd?!0:s),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}getText(){return this.text}}class s7 extends cd{constructor(){super(...arguments),this.type="textNode"}}class Nu extends ql{constructor(){super(...arguments),this.type="svg",this.root=!1}setContext(t){var i,{document:s}=this,{screen:u,window:d}=s,p=t.canvas;if(u.setDefaults(t),p.style&&typeof t.font<"u"&&d&&typeof d.getComputedStyle<"u"){t.font=d.getComputedStyle(p).getPropertyValue("font");var A=new mr(s,"fontSize",ps.parse(t.font).fontSize);A.hasValue()&&(s.rootEmSize=A.getPixels("y"),s.emSize=s.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);var{width:v,height:C}=u.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");var F=this.getAttribute("refX"),E=this.getAttribute("refY"),Q=this.getAttribute("viewBox"),T=Q.hasValue()?Js(Q.getString()):null,V=!this.root&&this.getStyle("overflow").getValue("hidden")!=="visible",R=0,W=0,j=0,rt=0;T&&(R=T[0],W=T[1]),this.root||(v=this.getStyle("width").getPixels("x"),C=this.getStyle("height").getPixels("y"),this.type==="marker"&&(j=R,rt=W,R=0,W=0)),u.viewPort.setCurrent(v,C),this.node&&(!this.parent||((i=this.node.parentNode)===null||i===void 0?void 0:i.nodeName)==="foreignObject")&&this.getStyle("transform",!1,!0).hasValue()&&!this.getStyle("transform-origin",!1,!0).hasValue()&&this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(t),t.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),T&&(v=T[2],C=T[3]),s.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:u.viewPort.width,desiredWidth:v,height:u.viewPort.height,desiredHeight:C,minX:R,minY:W,refX:F.getValue(),refY:E.getValue(),clip:V,clipX:j,clipY:rt}),T&&(u.viewPort.removeCurrent(),u.viewPort.setCurrent(v,C))}clearContext(t){super.clearContext(t),this.document.screen.viewPort.removeCurrent()}resize(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,u=this.getAttribute("width",!0),d=this.getAttribute("height",!0),p=this.getAttribute("viewBox"),A=this.getAttribute("style"),v=u.getNumber(0),C=d.getNumber(0);if(s)if(typeof s=="string")this.getAttribute("preserveAspectRatio",!0).setValue(s);else{var F=this.getAttribute("preserveAspectRatio");F.hasValue()&&F.setValue(F.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(u.setValue(t),d.setValue(i),p.hasValue()||p.setValue("0 0 ".concat(v||t," ").concat(C||i)),A.hasValue()){var E=this.getStyle("width"),Q=this.getStyle("height");E.hasValue()&&E.setValue("".concat(t,"px")),Q.hasValue()&&Q.setValue("".concat(i,"px"))}}}class iy extends hi{constructor(){super(...arguments),this.type="rect"}path(t){var i=this.getAttribute("x").getPixels("x"),s=this.getAttribute("y").getPixels("y"),u=this.getStyle("width",!1,!0).getPixels("x"),d=this.getStyle("height",!1,!0).getPixels("y"),p=this.getAttribute("rx"),A=this.getAttribute("ry"),v=p.getPixels("x"),C=A.getPixels("y");if(p.hasValue()&&!A.hasValue()&&(C=v),A.hasValue()&&!p.hasValue()&&(v=C),v=Math.min(v,u/2),C=Math.min(C,d/2),t){var F=4*((Math.sqrt(2)-1)/3);t.beginPath(),d>0&&u>0&&(t.moveTo(i+v,s),t.lineTo(i+u-v,s),t.bezierCurveTo(i+u-v+F*v,s,i+u,s+C-F*C,i+u,s+C),t.lineTo(i+u,s+d-C),t.bezierCurveTo(i+u,s+d-C+F*C,i+u-v+F*v,s+d,i+u-v,s+d),t.lineTo(i+v,s+d),t.bezierCurveTo(i+v-F*v,s+d,i,s+d-C+F*C,i,s+d-C),t.lineTo(i,s+C),t.bezierCurveTo(i,s+C-F*C,i+v-F*v,s,i+v,s),t.closePath())}return new Vo(i,s,i+u,s+d)}getMarkers(){return null}}class VB extends hi{constructor(){super(...arguments),this.type="circle"}path(t){var i=this.getAttribute("cx").getPixels("x"),s=this.getAttribute("cy").getPixels("y"),u=this.getAttribute("r").getPixels();return t&&u>0&&(t.beginPath(),t.arc(i,s,u,0,Math.PI*2,!1),t.closePath()),new Vo(i-u,s-u,i+u,s+u)}getMarkers(){return null}}class jB extends hi{constructor(){super(...arguments),this.type="ellipse"}path(t){var i=4*((Math.sqrt(2)-1)/3),s=this.getAttribute("rx").getPixels("x"),u=this.getAttribute("ry").getPixels("y"),d=this.getAttribute("cx").getPixels("x"),p=this.getAttribute("cy").getPixels("y");return t&&s>0&&u>0&&(t.beginPath(),t.moveTo(d+s,p),t.bezierCurveTo(d+s,p+i*u,d+i*s,p+u,d,p+u),t.bezierCurveTo(d-i*s,p+u,d-s,p+i*u,d-s,p),t.bezierCurveTo(d-s,p-i*u,d-i*s,p-u,d,p-u),t.bezierCurveTo(d+i*s,p-u,d+s,p-i*u,d+s,p),t.closePath()),new Vo(d-s,p-u,d+s,p+u)}getMarkers(){return null}}class KB extends hi{constructor(){super(...arguments),this.type="line"}getPoints(){return[new Gi(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new Gi(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(t){var[{x:i,y:s},{x:u,y:d}]=this.getPoints();return t&&(t.beginPath(),t.moveTo(i,s),t.lineTo(u,d)),new Vo(i,s,u,d)}getMarkers(){var[t,i]=this.getPoints(),s=t.angleTo(i);return[[t,s],[i,s]]}}class ny extends hi{constructor(t,i,s){super(t,i,s),this.type="polyline",this.points=[],this.points=Gi.parsePath(this.getAttribute("points").getString())}path(t){var{points:i}=this,[{x:s,y:u}]=i,d=new Vo(s,u);return t&&(t.beginPath(),t.moveTo(s,u)),i.forEach(p=>{var{x:A,y:v}=p;d.addPoint(A,v),t&&t.lineTo(A,v)}),d}getMarkers(){var{points:t}=this,i=t.length-1,s=[];return t.forEach((u,d)=>{d!==i&&s.push([u,u.angleTo(t[d+1])])}),s.length>0&&s.push([t[t.length-1],s[s.length-1][1]]),s}}class $B extends ny{constructor(){super(...arguments),this.type="polygon"}path(t){var i=super.path(t),[{x:s,y:u}]=this.points;return t&&(t.lineTo(s,u),t.closePath()),i}}class qB extends Pi{constructor(){super(...arguments),this.type="pattern"}createPattern(t,i,s){var u=this.getStyle("width").getPixels("x",!0),d=this.getStyle("height").getPixels("y",!0),p=new Nu(this.document,null);p.attributes.viewBox=new mr(this.document,"viewBox",this.getAttribute("viewBox").getValue()),p.attributes.width=new mr(this.document,"width","".concat(u,"px")),p.attributes.height=new mr(this.document,"height","".concat(d,"px")),p.attributes.transform=new mr(this.document,"transform",this.getAttribute("patternTransform").getValue()),p.children=this.children;var A=this.document.createCanvas(u,d),v=A.getContext("2d"),C=this.getAttribute("x"),F=this.getAttribute("y");C.hasValue()&&F.hasValue()&&v.translate(C.getPixels("x",!0),F.getPixels("y",!0)),s.hasValue()?this.styles["fill-opacity"]=s:Reflect.deleteProperty(this.styles,"fill-opacity");for(var E=-1;E<=1;E++)for(var Q=-1;Q<=1;Q++)v.save(),p.attributes.x=new mr(this.document,"x",E*A.width),p.attributes.y=new mr(this.document,"y",Q*A.height),p.render(v),v.restore();var T=t.createPattern(A,"repeat");return T}}class GB extends Pi{constructor(){super(...arguments),this.type="marker"}render(t,i,s){if(i){var{x:u,y:d}=i,p=this.getAttribute("orient").getString("auto"),A=this.getAttribute("markerUnits").getString("strokeWidth");t.translate(u,d),p==="auto"&&t.rotate(s),A==="strokeWidth"&&t.scale(t.lineWidth,t.lineWidth),t.save();var v=new Nu(this.document,null);v.type=this.type,v.attributes.viewBox=new mr(this.document,"viewBox",this.getAttribute("viewBox").getValue()),v.attributes.refX=new mr(this.document,"refX",this.getAttribute("refX").getValue()),v.attributes.refY=new mr(this.document,"refY",this.getAttribute("refY").getValue()),v.attributes.width=new mr(this.document,"width",this.getAttribute("markerWidth").getValue()),v.attributes.height=new mr(this.document,"height",this.getAttribute("markerHeight").getValue()),v.attributes.overflow=new mr(this.document,"overflow",this.getAttribute("overflow").getValue()),v.attributes.fill=new mr(this.document,"fill",this.getAttribute("fill").getColor("black")),v.attributes.stroke=new mr(this.document,"stroke",this.getAttribute("stroke").getValue("none")),v.children=this.children,v.render(t),t.restore(),A==="strokeWidth"&&t.scale(1/t.lineWidth,1/t.lineWidth),p==="auto"&&t.rotate(-s),t.translate(-u,-d)}}}class XB extends Pi{constructor(){super(...arguments),this.type="defs"}render(){}}class Hf extends ql{constructor(){super(...arguments),this.type="g"}getBoundingBox(t){var i=new Vo;return this.children.forEach(s=>{i.addBoundingBox(s.getBoundingBox(t))}),i}}class sy extends Pi{constructor(t,i,s){super(t,i,s),this.attributesToInherit=["gradientUnits"],this.stops=[];var{stops:u,children:d}=this;d.forEach(p=>{p.type==="stop"&&u.push(p)})}getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(t,i,s){var u=this;this.getHrefAttribute().hasValue()&&(u=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(u));var{stops:d}=u,p=this.getGradient(t,i);if(!p)return this.addParentOpacity(s,d[d.length-1].color);if(d.forEach(W=>{p.addColorStop(W.offset,this.addParentOpacity(s,W.color))}),this.getAttribute("gradientTransform").hasValue()){var{document:A}=this,{MAX_VIRTUAL_PIXELS:v,viewPort:C}=A.screen,[F]=C.viewPorts,E=new iy(A,null);E.attributes.x=new mr(A,"x",-v/3),E.attributes.y=new mr(A,"y",-v/3),E.attributes.width=new mr(A,"width",v),E.attributes.height=new mr(A,"height",v);var Q=new Hf(A,null);Q.attributes.transform=new mr(A,"transform",this.getAttribute("gradientTransform").getValue()),Q.children=[E];var T=new Nu(A,null);T.attributes.x=new mr(A,"x",0),T.attributes.y=new mr(A,"y",0),T.attributes.width=new mr(A,"width",F.width),T.attributes.height=new mr(A,"height",F.height),T.children=[Q];var V=A.createCanvas(F.width,F.height),R=V.getContext("2d");return R.fillStyle=p,T.render(R),R.createPattern(V,"no-repeat")}return p}inheritStopContainer(t){this.attributesToInherit.forEach(i=>{!this.getAttribute(i).hasValue()&&t.getAttribute(i).hasValue()&&this.getAttribute(i,!0).setValue(t.getAttribute(i).getValue())})}addParentOpacity(t,i){if(t.hasValue()){var s=new mr(this.document,"color",i);return s.addOpacity(t).getColor()}return i}}class ZB extends sy{constructor(t,i,s){super(t,i,s),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}getGradient(t,i){var s=this.getGradientUnits()==="objectBoundingBox",u=s?i.getBoundingBox(t):null;if(s&&!u)return null;!this.getAttribute("x1").hasValue()&&!this.getAttribute("y1").hasValue()&&!this.getAttribute("x2").hasValue()&&!this.getAttribute("y2").hasValue()&&(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));var d=s?u.x+u.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),p=s?u.y+u.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),A=s?u.x+u.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),v=s?u.y+u.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return d===A&&p===v?null:t.createLinearGradient(d,p,A,v)}}class WB extends sy{constructor(t,i,s){super(t,i,s),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}getGradient(t,i){var s=this.getGradientUnits()==="objectBoundingBox",u=i.getBoundingBox(t);if(s&&!u)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");var d=s?u.x+u.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),p=s?u.y+u.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),A=d,v=p;this.getAttribute("fx").hasValue()&&(A=s?u.x+u.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(v=s?u.y+u.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));var C=s?(u.width+u.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),F=this.getAttribute("fr").getPixels();return t.createRadialGradient(A,v,F,d,p,C)}}class YB extends Pi{constructor(t,i,s){super(t,i,s),this.type="stop";var u=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),d=this.getStyle("stop-opacity"),p=this.getStyle("stop-color",!0);p.getString()===""&&p.setValue("#000"),d.hasValue()&&(p=p.addOpacity(d)),this.offset=u,this.color=p.getColor()}}class Vf extends Pi{constructor(t,i,s){super(t,i,s),this.type="animate",this.duration=0,this.initialValue=null,this.initialUnits="",this.removed=!1,this.frozen=!1,t.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new mr(t,"values",null);var u=this.getAttribute("values");u.hasValue()&&this.values.setValue(u.getString().split(";"))}getProperty(){var t=this.getAttribute("attributeType").getString(),i=this.getAttribute("attributeName").getString();return t==="CSS"?this.parent.getStyle(i,!0):this.parent.getAttribute(i,!0)}calcValue(){var{initialUnits:t}=this,{progress:i,from:s,to:u}=this.getProgress(),d=s.getNumber()+(u.getNumber()-s.getNumber())*i;return t==="%"&&(d*=100),"".concat(d).concat(t)}update(t){var{parent:i}=this,s=this.getProperty();if(this.initialValue||(this.initialValue=s.getString(),this.initialUnits=s.getUnits()),this.duration>this.maxDuration){var u=this.getAttribute("fill").getString("remove");if(this.getAttribute("repeatCount").getString()==="indefinite"||this.getAttribute("repeatDur").getString()==="indefinite")this.duration=0;else if(u==="freeze"&&!this.frozen)this.frozen=!0,i.animationFrozen=!0,i.animationFrozenValue=s.getString();else if(u==="remove"&&!this.removed)return this.removed=!0,s.setValue(i.animationFrozen?i.animationFrozenValue:this.initialValue),!0;return!1}this.duration+=t;var d=!1;if(this.begin<this.duration){var p=this.calcValue(),A=this.getAttribute("type");if(A.hasValue()){var v=A.getString();p="".concat(v,"(").concat(p,")")}s.setValue(p),d=!0}return d}getProgress(){var{document:t,values:i}=this,s={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(i.hasValue()){var u=s.progress*(i.getValue().length-1),d=Math.floor(u),p=Math.ceil(u);s.from=new mr(t,"from",parseFloat(i.getValue()[d])),s.to=new mr(t,"to",parseFloat(i.getValue()[p])),s.progress=(u-d)/(p-d)}else s.from=this.from,s.to=this.to;return s}}class JB extends Vf{constructor(){super(...arguments),this.type="animateColor"}calcValue(){var{progress:t,from:i,to:s}=this.getProgress(),u=new O1(i.getColor()),d=new O1(s.getColor());if(u.ok&&d.ok){var p=u.r+(d.r-u.r)*t,A=u.g+(d.g-u.g)*t,v=u.b+(d.b-u.b)*t;return"rgb(".concat(Math.floor(p),", ").concat(Math.floor(A),", ").concat(Math.floor(v),")")}return this.getAttribute("from").getColor()}}class t5 extends Vf{constructor(){super(...arguments),this.type="animateTransform"}calcValue(){var{progress:t,from:i,to:s}=this.getProgress(),u=Js(i.getString()),d=Js(s.getString()),p=u.map((A,v)=>{var C=d[v];return A+(C-A)*t}).join(" ");return p}}class e5 extends Pi{constructor(t,i,s){super(t,i,s),this.type="font",this.glyphs={},this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();var{definitions:u}=t,{children:d}=this;for(var p of d)switch(p.type){case"font-face":{this.fontFace=p;var A=p.getStyle("font-family");A.hasValue()&&(u[A.getString()]=this);break}case"missing-glyph":this.missingGlyph=p;break;case"glyph":{var v=p;v.arabicForm?(this.isRTL=!0,this.isArabic=!0,typeof this.glyphs[v.unicode]>"u"&&(this.glyphs[v.unicode]={}),this.glyphs[v.unicode][v.arabicForm]=v):this.glyphs[v.unicode]=v;break}}}render(){}}class r5 extends Pi{constructor(t,i,s){super(t,i,s),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}}class i5 extends hi{constructor(){super(...arguments),this.type="missing-glyph",this.horizAdvX=0}}class n5 extends il{constructor(){super(...arguments),this.type="tref"}getText(){var t=this.getHrefAttribute().getDefinition();if(t){var i=t.children[0];if(i)return i.getText()}return""}}class s5 extends il{constructor(t,i,s){super(t,i,s),this.type="a";var{childNodes:u}=i,d=u[0],p=u.length>0&&Array.from(u).every(A=>A.nodeType===3);this.hasText=p,this.text=p?this.getTextFromNode(d):""}getText(){return this.text}renderChildren(t){if(this.hasText){super.renderChildren(t);var{document:i,x:s,y:u}=this,{mouse:d}=i.screen,p=new mr(i,"fontSize",ps.parse(i.ctx.font).fontSize);d.isWorking()&&d.checkBoundingBox(this,new Vo(s,u-p.getPixels("y"),s+this.measureText(t),u))}else if(this.children.length>0){var A=new Hf(this.document,null);A.children=this.children,A.parent=this,A.render(t)}}onClick(){var{window:t}=this.document;t&&t.open(this.getHrefAttribute().getString())}onMouseMove(){var t=this.document.ctx;t.canvas.style.cursor="pointer"}}function o5(n,t){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);t&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),i.push.apply(i,s)}return i}function jf(n){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?o5(Object(i),!0).forEach(function(s){U1(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):o5(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}class a5 extends il{constructor(t,i,s){super(t,i,s),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);var u=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(u)}getText(){return this.text}path(t){var{dataArray:i}=this;t&&t.beginPath(),i.forEach(s=>{var{type:u,points:d}=s;switch(u){case kr.LINE_TO:t&&t.lineTo(d[0],d[1]);break;case kr.MOVE_TO:t&&t.moveTo(d[0],d[1]);break;case kr.CURVE_TO:t&&t.bezierCurveTo(d[0],d[1],d[2],d[3],d[4],d[5]);break;case kr.QUAD_TO:t&&t.quadraticCurveTo(d[0],d[1],d[2],d[3]);break;case kr.ARC:{var[p,A,v,C,F,E,Q,T]=d,V=v>C?v:C,R=v>C?1:v/C,W=v>C?C/v:1;t&&(t.translate(p,A),t.rotate(Q),t.scale(R,W),t.arc(0,0,V,F,F+E,!!(1-T)),t.scale(1/R,1/W),t.rotate(-Q),t.translate(-p,-A));break}case kr.CLOSE_PATH:t&&t.closePath();break}})}renderChildren(t){this.setTextData(t),t.save();var i=this.parent.getStyle("text-decoration").getString(),s=this.getFontSize(),{glyphInfo:u}=this,d=t.fillStyle;i==="underline"&&t.beginPath(),u.forEach((p,A)=>{var{p0:v,p1:C,rotation:F,text:E}=p;t.save(),t.translate(v.x,v.y),t.rotate(F),t.fillStyle&&t.fillText(E,0,0),t.strokeStyle&&t.strokeText(E,0,0),t.restore(),i==="underline"&&(A===0&&t.moveTo(v.x,v.y+s/8),t.lineTo(C.x,C.y+s/5))}),i==="underline"&&(t.lineWidth=s/20,t.strokeStyle=d,t.stroke(),t.closePath()),t.restore()}getLetterSpacingAt(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.letterSpacingCache[t]||0}findSegmentToFitChar(t,i,s,u,d,p,A,v,C){var F=p,E=this.measureText(t,v);v===" "&&i==="justify"&&s<u&&(E+=(u-s)/d),C>-1&&(F+=this.getLetterSpacingAt(C));var Q=this.textHeight/20,T=this.getEquidistantPointOnPath(F,Q,0),V=this.getEquidistantPointOnPath(F+E,Q,0),R={p0:T,p1:V},W=T&&V?Math.atan2(V.y-T.y,V.x-T.x):0;if(A){var j=Math.cos(Math.PI/2+W)*A,rt=Math.cos(-W)*A;R.p0=jf(jf({},T),{},{x:T.x+j,y:T.y+rt}),R.p1=jf(jf({},V),{},{x:V.x+j,y:V.y+rt})}return F+=E,{offset:F,segment:R,rotation:W}}measureText(t,i){var{measuresCache:s}=this,u=i||this.getText();if(s.has(u))return s.get(u);var d=this.measureTargetText(t,u);return s.set(u,d),d}setTextData(t){if(!this.glyphInfo){var i=this.getText(),s=i.split(""),u=i.split(" ").length-1,d=this.parent.getAttribute("dx").split().map(Bt=>Bt.getPixels("x")),p=this.parent.getAttribute("dy").getPixels("y"),A=this.parent.getStyle("text-anchor").getString("start"),v=this.getStyle("letter-spacing"),C=this.parent.getStyle("letter-spacing"),F=0;!v.hasValue()||v.getValue()==="inherit"?F=C.getPixels():v.hasValue()&&v.getValue()!=="initial"&&v.getValue()!=="unset"&&(F=v.getPixels());var E=[],Q=i.length;this.letterSpacingCache=E;for(var T=0;T<Q;T++)E.push(typeof d[T]<"u"?d[T]:F);var V=E.reduce((Bt,Et,Tt)=>Tt===0?0:Bt+Et||0,0),R=this.measureText(t),W=Math.max(R+V,0);this.textWidth=R,this.textHeight=this.getFontSize(),this.glyphInfo=[];var j=this.getPathLength(),rt=this.getStyle("startOffset").getNumber(0)*j,ht=0;(A==="middle"||A==="center")&&(ht=-W/2),(A==="end"||A==="right")&&(ht=-W),ht+=rt,s.forEach((Bt,Et)=>{var{offset:Tt,segment:xt,rotation:ft}=this.findSegmentToFitChar(t,A,W,j,u,ht,p,Bt,Et);ht=Tt,!(!xt.p0||!xt.p1)&&this.glyphInfo.push({text:s[Et],p0:xt.p0,p1:xt.p1,rotation:ft})})}}parsePathData(t){if(this.pathLength=-1,!t)return[];var i=[],{pathParser:s}=t;for(s.reset();!s.isEnd();){var{current:u}=s,d=u?u.x:0,p=u?u.y:0,A=s.next(),v=A.type,C=[];switch(A.type){case kr.MOVE_TO:this.pathM(s,C);break;case kr.LINE_TO:v=this.pathL(s,C);break;case kr.HORIZ_LINE_TO:v=this.pathH(s,C);break;case kr.VERT_LINE_TO:v=this.pathV(s,C);break;case kr.CURVE_TO:this.pathC(s,C);break;case kr.SMOOTH_CURVE_TO:v=this.pathS(s,C);break;case kr.QUAD_TO:this.pathQ(s,C);break;case kr.SMOOTH_QUAD_TO:v=this.pathT(s,C);break;case kr.ARC:C=this.pathA(s);break;case kr.CLOSE_PATH:hi.pathZ(s);break}A.type!==kr.CLOSE_PATH?i.push({type:v,points:C,start:{x:d,y:p},pathLength:this.calcLength(d,p,v,C)}):i.push({type:kr.CLOSE_PATH,points:[],pathLength:0})}return i}pathM(t,i){var{x:s,y:u}=hi.pathM(t).point;i.push(s,u)}pathL(t,i){var{x:s,y:u}=hi.pathL(t).point;return i.push(s,u),kr.LINE_TO}pathH(t,i){var{x:s,y:u}=hi.pathH(t).point;return i.push(s,u),kr.LINE_TO}pathV(t,i){var{x:s,y:u}=hi.pathV(t).point;return i.push(s,u),kr.LINE_TO}pathC(t,i){var{point:s,controlPoint:u,currentPoint:d}=hi.pathC(t);i.push(s.x,s.y,u.x,u.y,d.x,d.y)}pathS(t,i){var{point:s,controlPoint:u,currentPoint:d}=hi.pathS(t);return i.push(s.x,s.y,u.x,u.y,d.x,d.y),kr.CURVE_TO}pathQ(t,i){var{controlPoint:s,currentPoint:u}=hi.pathQ(t);i.push(s.x,s.y,u.x,u.y)}pathT(t,i){var{controlPoint:s,currentPoint:u}=hi.pathT(t);return i.push(s.x,s.y,u.x,u.y),kr.QUAD_TO}pathA(t){var{rX:i,rY:s,sweepFlag:u,xAxisRotation:d,centp:p,a1:A,ad:v}=hi.pathA(t);return u===0&&v>0&&(v-=2*Math.PI),u===1&&v<0&&(v+=2*Math.PI),[p.x,p.y,i,s,A,v,d,u]}calcLength(t,i,s,u){var d=0,p=null,A=null,v=0;switch(s){case kr.LINE_TO:return this.getLineLength(t,i,u[0],u[1]);case kr.CURVE_TO:for(d=0,p=this.getPointOnCubicBezier(0,t,i,u[0],u[1],u[2],u[3],u[4],u[5]),v=.01;v<=1;v+=.01)A=this.getPointOnCubicBezier(v,t,i,u[0],u[1],u[2],u[3],u[4],u[5]),d+=this.getLineLength(p.x,p.y,A.x,A.y),p=A;return d;case kr.QUAD_TO:for(d=0,p=this.getPointOnQuadraticBezier(0,t,i,u[0],u[1],u[2],u[3]),v=.01;v<=1;v+=.01)A=this.getPointOnQuadraticBezier(v,t,i,u[0],u[1],u[2],u[3]),d+=this.getLineLength(p.x,p.y,A.x,A.y),p=A;return d;case kr.ARC:{d=0;var C=u[4],F=u[5],E=u[4]+F,Q=Math.PI/180;if(Math.abs(C-E)<Q&&(Q=Math.abs(C-E)),p=this.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],C,0),F<0)for(v=C-Q;v>E;v-=Q)A=this.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],v,0),d+=this.getLineLength(p.x,p.y,A.x,A.y),p=A;else for(v=C+Q;v<E;v+=Q)A=this.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],v,0),d+=this.getLineLength(p.x,p.y,A.x,A.y),p=A;return A=this.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],E,0),d+=this.getLineLength(p.x,p.y,A.x,A.y),d}}return 0}getPointOnLine(t,i,s,u,d){var p=arguments.length>5&&arguments[5]!==void 0?arguments[5]:i,A=arguments.length>6&&arguments[6]!==void 0?arguments[6]:s,v=(d-s)/(u-i+Uc),C=Math.sqrt(t*t/(1+v*v));u<i&&(C*=-1);var F=v*C,E=null;if(u===i)E={x:p,y:A+F};else if((A-s)/(p-i+Uc)===v)E={x:p+C,y:A+F};else{var Q=0,T=0,V=this.getLineLength(i,s,u,d);if(V<Uc)return null;var R=(p-i)*(u-i)+(A-s)*(d-s);R/=V*V,Q=i+R*(u-i),T=s+R*(d-s);var W=this.getLineLength(p,A,Q,T),j=Math.sqrt(t*t-W*W);C=Math.sqrt(j*j/(1+v*v)),u<i&&(C*=-1),F=v*C,E={x:Q+C,y:T+F}}return E}getPointOnPath(t){var i=this.getPathLength(),s=0,u=null;if(t<-5e-5||t-5e-5>i)return null;var{dataArray:d}=this;for(var p of d){if(p&&(p.pathLength<5e-5||s+p.pathLength+5e-5<t)){s+=p.pathLength;continue}var A=t-s,v=0;switch(p.type){case kr.LINE_TO:u=this.getPointOnLine(A,p.start.x,p.start.y,p.points[0],p.points[1],p.start.x,p.start.y);break;case kr.ARC:{var C=p.points[4],F=p.points[5],E=p.points[4]+F;if(v=C+A/p.pathLength*F,F<0&&v<E||F>=0&&v>E)break;u=this.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],v,p.points[6]);break}case kr.CURVE_TO:v=A/p.pathLength,v>1&&(v=1),u=this.getPointOnCubicBezier(v,p.start.x,p.start.y,p.points[0],p.points[1],p.points[2],p.points[3],p.points[4],p.points[5]);break;case kr.QUAD_TO:v=A/p.pathLength,v>1&&(v=1),u=this.getPointOnQuadraticBezier(v,p.start.x,p.start.y,p.points[0],p.points[1],p.points[2],p.points[3]);break}if(u)return u;break}return null}getLineLength(t,i,s,u){return Math.sqrt((s-t)*(s-t)+(u-i)*(u-i))}getPathLength(){return this.pathLength===-1&&(this.pathLength=this.dataArray.reduce((t,i)=>i.pathLength>0?t+i.pathLength:t,0)),this.pathLength}getPointOnCubicBezier(t,i,s,u,d,p,A,v,C){var F=v*q1(t)+p*G1(t)+u*X1(t)+i*Z1(t),E=C*q1(t)+A*G1(t)+d*X1(t)+s*Z1(t);return{x:F,y:E}}getPointOnQuadraticBezier(t,i,s,u,d,p,A){var v=p*W1(t)+u*Y1(t)+i*J1(t),C=A*W1(t)+d*Y1(t)+s*J1(t);return{x:v,y:C}}getPointOnEllipticalArc(t,i,s,u,d,p){var A=Math.cos(p),v=Math.sin(p),C={x:s*Math.cos(d),y:u*Math.sin(d)};return{x:t+(C.x*A-C.y*v),y:i+(C.x*v+C.y*A)}}buildEquidistantCache(t,i){var s=this.getPathLength(),u=i||.25,d=t||s/100;if(!this.equidistantCache||this.equidistantCache.step!==d||this.equidistantCache.precision!==u){this.equidistantCache={step:d,precision:u,points:[]};for(var p=0,A=0;A<=s;A+=u){var v=this.getPointOnPath(A),C=this.getPointOnPath(A+u);!v||!C||(p+=this.getLineLength(v.x,v.y,C.x,C.y),p>=d&&(this.equidistantCache.points.push({x:v.x,y:v.y,distance:A}),p-=d))}}}getEquidistantPointOnPath(t,i,s){if(this.buildEquidistantCache(i,s),t<0||t-this.getPathLength()>5e-5)return null;var u=Math.round(t/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[u]||null}}var o7=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i;class A5 extends ql{constructor(t,i,s){super(t,i,s),this.type="image",this.loaded=!1;var u=this.getHrefAttribute().getString();if(u){var d=u.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(u);t.images.push(this),d?this.loadSvg(u):this.loadImage(u),this.isSvg=d}}loadImage(t){var i=this;return tl(function*(){try{var s=yield i.document.createImage(t);i.image=s}catch(u){console.error('Error while loading image "'.concat(t,'":'),u)}i.loaded=!0})()}loadSvg(t){var i=this;return tl(function*(){var s=o7.exec(t);if(s){var u=s[5];s[4]==="base64"?i.image=atob(u):i.image=decodeURIComponent(u)}else try{var d=yield i.document.fetch(t),p=yield d.text();i.image=p}catch(A){console.error('Error while loading image "'.concat(t,'":'),A)}i.loaded=!0})()}renderChildren(t){var{document:i,image:s,loaded:u}=this,d=this.getAttribute("x").getPixels("x"),p=this.getAttribute("y").getPixels("y"),A=this.getStyle("width").getPixels("x"),v=this.getStyle("height").getPixels("y");if(!(!u||!s||!A||!v)){if(t.save(),t.translate(d,p),this.isSvg){var C=i.canvg.forkString(t,this.image,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:A,scaleHeight:v});C.document.documentElement.parent=this,C.render()}else{var F=this.image;i.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:A,desiredWidth:F.width,height:v,desiredHeight:F.height}),this.loaded&&(typeof F.complete>"u"||F.complete)&&t.drawImage(F,0,0)}t.restore()}}getBoundingBox(){var t=this.getAttribute("x").getPixels("x"),i=this.getAttribute("y").getPixels("y"),s=this.getStyle("width").getPixels("x"),u=this.getStyle("height").getPixels("y");return new Vo(t,i,t+s,i+u)}}class l5 extends ql{constructor(){super(...arguments),this.type="symbol"}render(t){}}class c5{constructor(t){this.document=t,this.loaded=!1,t.fonts.push(this)}load(t,i){var s=this;return tl(function*(){try{var{document:u}=s,d=yield u.canvg.parser.load(i),p=d.getElementsByTagName("font");Array.from(p).forEach(A=>{var v=u.createElement(A);u.definitions[t]=v})}catch(A){console.error('Error while loading font "'.concat(i,'":'),A)}s.loaded=!0})()}}class oy extends Pi{constructor(t,i,s){super(t,i,s),this.type="style";var u=Ec(Array.from(i.childNodes).map(p=>p.textContent).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")),d=u.split("}");d.forEach(p=>{var A=p.trim();if(A){var v=A.split("{"),C=v[0].split(","),F=v[1].split(";");C.forEach(E=>{var Q=E.trim();if(Q){var T=t.styles[Q]||{};if(F.forEach(W=>{var j=W.indexOf(":"),rt=W.substr(0,j).trim(),ht=W.substr(j+1,W.length-j).trim();rt&&ht&&(T[rt]=new mr(t,rt,ht))}),t.styles[Q]=T,t.stylesSpecificity[Q]=PB(Q),Q==="@font-face"){var V=T["font-family"].getString().replace(/"|'/g,""),R=T.src.getString().split(",");R.forEach(W=>{if(W.indexOf('format("svg")')>0){var j=j1(W);j&&new c5(t).load(V,j)}})}}})}})}}oy.parseExternalUrl=j1;class u5 extends ql{constructor(){super(...arguments),this.type="use"}setContext(t){super.setContext(t);var i=this.getAttribute("x"),s=this.getAttribute("y");i.hasValue()&&t.translate(i.getPixels("x"),0),s.hasValue()&&t.translate(0,s.getPixels("y"))}path(t){var{element:i}=this;i&&i.path(t)}renderChildren(t){var{document:i,element:s}=this;if(s){var u=s;if(s.type==="symbol"&&(u=new Nu(i,null),u.attributes.viewBox=new mr(i,"viewBox",s.getAttribute("viewBox").getString()),u.attributes.preserveAspectRatio=new mr(i,"preserveAspectRatio",s.getAttribute("preserveAspectRatio").getString()),u.attributes.overflow=new mr(i,"overflow",s.getAttribute("overflow").getString()),u.children=s.children,s.styles.opacity=new mr(i,"opacity",this.calculateOpacity())),u.type==="svg"){var d=this.getStyle("width",!1,!0),p=this.getStyle("height",!1,!0);d.hasValue()&&(u.attributes.width=new mr(i,"width",d.getString())),p.hasValue()&&(u.attributes.height=new mr(i,"height",p.getString()))}var A=u.parent;u.parent=this,u.render(t),u.parent=A}}getBoundingBox(t){var{element:i}=this;return i?i.getBoundingBox(t):null}elementTransform(){var{document:t,element:i}=this;return $l.fromElement(t,i)}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}}function Kf(n,t,i,s,u,d){return n[i*s*4+t*4+d]}function $f(n,t,i,s,u,d,p){n[i*s*4+t*4+d]=p}function yn(n,t,i){var s=n[t];return s*i}function nl(n,t,i,s){return t+Math.cos(n)*i+Math.sin(n)*s}class ay extends Pi{constructor(t,i,s){super(t,i,s),this.type="feColorMatrix";var u=Js(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":{var d=u[0];u=[.213+.787*d,.715-.715*d,.072-.072*d,0,0,.213-.213*d,.715+.285*d,.072-.072*d,0,0,.213-.213*d,.715-.715*d,.072+.928*d,0,0,0,0,0,1,0,0,0,0,0,1];break}case"hueRotate":{var p=u[0]*Math.PI/180;u=[nl(p,.213,.787,-.213),nl(p,.715,-.715,-.715),nl(p,.072,-.072,.928),0,0,nl(p,.213,-.213,.143),nl(p,.715,.285,.14),nl(p,.072,-.072,-.283),0,0,nl(p,.213,-.213,-.787),nl(p,.715,-.715,.715),nl(p,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break}case"luminanceToAlpha":u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];break}this.matrix=u,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}apply(t,i,s,u,d){for(var{includeOpacity:p,matrix:A}=this,v=t.getImageData(0,0,u,d),C=0;C<d;C++)for(var F=0;F<u;F++){var E=Kf(v.data,F,C,u,d,0),Q=Kf(v.data,F,C,u,d,1),T=Kf(v.data,F,C,u,d,2),V=Kf(v.data,F,C,u,d,3),R=yn(A,0,E)+yn(A,1,Q)+yn(A,2,T)+yn(A,3,V)+yn(A,4,1),W=yn(A,5,E)+yn(A,6,Q)+yn(A,7,T)+yn(A,8,V)+yn(A,9,1),j=yn(A,10,E)+yn(A,11,Q)+yn(A,12,T)+yn(A,13,V)+yn(A,14,1),rt=yn(A,15,E)+yn(A,16,Q)+yn(A,17,T)+yn(A,18,V)+yn(A,19,1);p&&(R=0,W=0,j=0,rt*=V/255),$f(v.data,F,C,u,d,0,R),$f(v.data,F,C,u,d,1,W),$f(v.data,F,C,u,d,2,j),$f(v.data,F,C,u,d,3,rt)}t.clearRect(0,0,u,d),t.putImageData(v,0,0)}}class ud extends Pi{constructor(){super(...arguments),this.type="mask"}apply(t,i){var{document:s}=this,u=this.getAttribute("x").getPixels("x"),d=this.getAttribute("y").getPixels("y"),p=this.getStyle("width").getPixels("x"),A=this.getStyle("height").getPixels("y");if(!p&&!A){var v=new Vo;this.children.forEach(V=>{v.addBoundingBox(V.getBoundingBox(t))}),u=Math.floor(v.x1),d=Math.floor(v.y1),p=Math.floor(v.width),A=Math.floor(v.height)}var C=this.removeStyles(i,ud.ignoreStyles),F=s.createCanvas(u+p,d+A),E=F.getContext("2d");s.screen.setDefaults(E),this.renderChildren(E),new ay(s,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(E,0,0,u+p,d+A);var Q=s.createCanvas(u+p,d+A),T=Q.getContext("2d");s.screen.setDefaults(T),i.render(T),T.globalCompositeOperation="destination-in",T.fillStyle=E.createPattern(F,"no-repeat"),T.fillRect(0,0,u+p,d+A),t.fillStyle=T.createPattern(Q,"no-repeat"),t.fillRect(0,0,u+p,d+A),this.restoreStyles(i,C)}render(t){}}ud.ignoreStyles=["mask","transform","clip-path"];var h5=()=>{};class d5 extends Pi{constructor(){super(...arguments),this.type="clipPath"}apply(t){var{document:i}=this,s=Reflect.getPrototypeOf(t),{beginPath:u,closePath:d}=t;s&&(s.beginPath=h5,s.closePath=h5),Reflect.apply(u,t,[]),this.children.forEach(p=>{if(!(typeof p.path>"u")){var A=typeof p.elementTransform<"u"?p.elementTransform():null;A||(A=$l.fromElement(i,p)),A&&A.apply(t),p.path(t),s&&(s.closePath=d),A&&A.unapply(t)}}),Reflect.apply(d,t,[]),t.clip(),s&&(s.beginPath=u,s.closePath=d)}render(t){}}class hd extends Pi{constructor(){super(...arguments),this.type="filter"}apply(t,i){var{document:s,children:u}=this,d=i.getBoundingBox(t);if(d){var p=0,A=0;u.forEach(j=>{var rt=j.extraFilterDistance||0;p=Math.max(p,rt),A=Math.max(A,rt)});var v=Math.floor(d.width),C=Math.floor(d.height),F=v+2*p,E=C+2*A;if(!(F<1||E<1)){var Q=Math.floor(d.x),T=Math.floor(d.y),V=this.removeStyles(i,hd.ignoreStyles),R=s.createCanvas(F,E),W=R.getContext("2d");s.screen.setDefaults(W),W.translate(-Q+p,-T+A),i.render(W),u.forEach(j=>{typeof j.apply=="function"&&j.apply(W,0,0,F,E)}),t.drawImage(R,0,0,F,E,Q-p,T-A,F,E),this.restoreStyles(i,V)}}}render(t){}}hd.ignoreStyles=["filter","transform","clip-path"];class p5 extends Pi{constructor(t,i,s){super(t,i,s),this.type="feDropShadow",this.addStylesFromStyleDefinition()}apply(t,i,s,u,d){}}class f5 extends Pi{constructor(){super(...arguments),this.type="feMorphology"}apply(t,i,s,u,d){}}class g5 extends Pi{constructor(){super(...arguments),this.type="feComposite"}apply(t,i,s,u,d){}}class m5 extends Pi{constructor(t,i,s){super(t,i,s),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}apply(t,i,s,u,d){var{document:p,blurRadius:A}=this,v=p.window?p.window.document.body:null,C=t.canvas;C.id=p.getUniqueId(),v&&(C.style.display="none",v.appendChild(C)),NR(C,i,s,u,d,A),v&&v.removeChild(C)}}class y5 extends Pi{constructor(){super(...arguments),this.type="title"}}class v5 extends Pi{constructor(){super(...arguments),this.type="desc"}}var a7={svg:Nu,rect:iy,circle:VB,ellipse:jB,line:KB,polyline:ny,polygon:$B,path:hi,pattern:qB,marker:GB,defs:XB,linearGradient:ZB,radialGradient:WB,stop:YB,animate:Vf,animateColor:JB,animateTransform:t5,font:e5,"font-face":r5,"missing-glyph":i5,glyph:ry,text:il,tspan:cd,tref:n5,a:s5,textPath:a5,image:A5,g:Hf,symbol:l5,style:oy,use:u5,mask:ud,clipPath:d5,filter:hd,feDropShadow:p5,feMorphology:f5,feComposite:g5,feColorMatrix:ay,feGaussianBlur:m5,title:y5,desc:v5};function w5(n,t){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);t&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),i.push.apply(i,s)}return i}function A7(n){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?w5(Object(i),!0).forEach(function(s){U1(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):w5(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function l7(n,t){var i=document.createElement("canvas");return i.width=n,i.height=t,i}function c7(n){return Ay.apply(this,arguments)}function Ay(){return Ay=tl(function*(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=document.createElement("img");return t&&(i.crossOrigin="Anonymous"),new Promise((s,u)=>{i.onload=()=>{s(i)},i.onerror=(d,p,A,v,C)=>{u(C)},i.src=n})}),Ay.apply(this,arguments)}class sl{constructor(t){var{rootEmSize:i=12,emSize:s=12,createCanvas:u=sl.createCanvas,createImage:d=sl.createImage,anonymousCrossOrigin:p}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.canvg=t,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=t.screen,this.rootEmSize=i,this.emSize=s,this.createCanvas=u,this.createImage=this.bindCreateImage(d,p),this.screen.wait(this.isImagesLoaded.bind(this)),this.screen.wait(this.isFontsLoaded.bind(this))}bindCreateImage(t,i){return typeof i=="boolean"?(s,u)=>t(s,typeof u=="boolean"?u:i):t}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){var{emSizeStack:t}=this;return t[t.length-1]}set emSize(t){var{emSizeStack:i}=this;i.push(t)}popEmSize(){var{emSizeStack:t}=this;t.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every(t=>t.loaded)}isFontsLoaded(){return this.fonts.every(t=>t.loaded)}createDocumentElement(t){var i=this.createElement(t.documentElement);return i.root=!0,i.addStylesFromStyleDefinition(),this.documentElement=i,i}createElement(t){var i=t.nodeName.replace(/^[^:]+:/,""),s=sl.elementTypes[i];return typeof s<"u"?new s(this,t):new HB(this,t)}createTextNode(t){return new s7(this,t)}setViewBox(t){this.screen.setViewBox(A7({document:this},t))}}sl.createCanvas=l7,sl.createImage=c7,sl.elementTypes=a7;function _5(n,t){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);t&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),i.push.apply(i,s)}return i}function Pc(n){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?_5(Object(i),!0).forEach(function(s){U1(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):_5(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}class Lc{constructor(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.parser=new zf(s),this.screen=new ld(t,s),this.options=s;var u=new sl(this,s),d=u.createDocumentElement(i);this.document=u,this.documentElement=d}static from(t,i){var s=arguments;return tl(function*(){var u=s.length>2&&s[2]!==void 0?s[2]:{},d=new zf(u),p=yield d.parse(i);return new Lc(t,p,u)})()}static fromString(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=new zf(s),d=u.parseFromString(i);return new Lc(t,d,s)}fork(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Lc.from(t,i,Pc(Pc({},this.options),s))}forkString(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Lc.fromString(t,i,Pc(Pc({},this.options),s))}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}render(){var t=arguments,i=this;return tl(function*(){var s=t.length>0&&t[0]!==void 0?t[0]:{};i.start(Pc({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0},s)),yield i.ready(),i.stop()})()}start(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{documentElement:i,screen:s,options:u}=this;s.start(i,Pc(Pc({enableRedraw:!0},u),t))}stop(){this.screen.stop()}resize(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.documentElement.resize(t,i,s)}}const u7=Object.freeze(Object.defineProperty({__proto__:null,AElement:s5,AnimateColorElement:JB,AnimateElement:Vf,AnimateTransformElement:t5,BoundingBox:Vo,CB1:q1,CB2:G1,CB3:X1,CB4:Z1,Canvg:Lc,CircleElement:VB,ClipPathElement:d5,DefsElement:XB,DescElement:v5,Document:sl,Element:Pi,EllipseElement:jB,FeColorMatrixElement:ay,FeCompositeElement:g5,FeDropShadowElement:p5,FeGaussianBlurElement:m5,FeMorphologyElement:f5,FilterElement:hd,Font:ps,FontElement:e5,FontFaceElement:r5,GElement:Hf,GlyphElement:ry,GradientElement:sy,ImageElement:A5,LineElement:KB,LinearGradientElement:ZB,MarkerElement:GB,MaskElement:ud,Matrix:ty,MissingGlyphElement:i5,Mouse:QB,PSEUDO_ZERO:Uc,Parser:zf,PathElement:hi,PathParser:kr,PatternElement:qB,Point:Gi,PolygonElement:$B,PolylineElement:ny,Property:mr,QB1:W1,QB2:Y1,QB3:J1,RadialGradientElement:WB,RectElement:iy,RenderedElement:ql,Rotate:NB,SVGElement:Nu,SVGFontLoader:c5,Scale:OB,Screen:ld,Skew:ey,SkewX:RB,SkewY:zB,StopElement:YB,StyleElement:oy,SymbolElement:l5,TRefElement:n5,TSpanElement:cd,TextElement:il,TextPathElement:a5,TitleElement:y5,Transform:$l,Translate:DB,UnknownElement:HB,UseElement:u5,ViewPort:LB,compressSpaces:Ec,default:Lc,getSelectorSpecificity:PB,normalizeAttributeName:TB,normalizeColor:UB,parseExternalUrl:j1,presets:HR,toNumbers:Js,trimLeft:IB,trimRight:EB,vectorMagnitude:K1,vectorsAngle:$1,vectorsRatio:Rf},Symbol.toStringTag,{value:"Module"}));Xn.DPI=dg,Xn.Format=Wa,Xn.MapboxExportControl=f3,Xn.PageOrientation=ph,Xn.Size=Il,Object.defineProperty(Xn,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=mapbox-gl-export.umd.js.map
