(function(Yn,Js){typeof exports=="object"&&typeof module<"u"?Js(exports,require("mapbox-gl")):typeof define=="function"&&define.amd?define(["exports","mapbox-gl"],Js):(Yn=typeof globalThis<"u"?globalThis:Yn||self,Js(Yn.MapboxExportControl={},Yn.mapboxgl))})(this,function(Yn,Js){"use strict";var Xz=Object.defineProperty;var Zz=(Yn,Js,su)=>Js in Yn?Xz(Yn,Js,{enumerable:!0,configurable:!0,writable:!0,value:su}):Yn[Js]=su;var $y=(Yn,Js,su)=>Zz(Yn,typeof Js!="symbol"?Js+"":Js,su);var su=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qy={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.4.0/LICENSE.txt
 */(function(n,t){(function(i,s){n.exports=s()})(su,function(){var i={},s={};function l(p,o,v){if(s[p]=v,p==="index"){var C="var sharedModule = {}; ("+s.shared+")(sharedModule); ("+s.worker+")(sharedModule);",I={};return s.shared(I),s.index(i,I),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([C],{type:"text/javascript"}))),i}}l("shared",["exports"],function(p){function o(a,e,A,d){return new(A||(A=Promise))(function(m,w){function B(N){try{L(d.next(N))}catch(R){w(R)}}function S(N){try{L(d.throw(N))}catch(R){w(R)}}function L(N){var R;N.done?m(N.value):(R=N.value,R instanceof A?R:new A(function(j){j(R)})).then(B,S)}L((d=d.apply(a,e||[])).next())})}function v(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}typeof SuppressedError=="function"&&SuppressedError;var C=I;function I(a,e){this.x=a,this.y=e}I.prototype={clone:function(){return new I(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,e){return this.clone()._rotateAround(a,e)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var e=a.x-this.x,A=a.y-this.y;return e*e+A*A},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,e){return Math.atan2(this.x*e-this.y*a,this.x*a+this.y*e)},_matMult:function(a){var e=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=e,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var e=Math.cos(a),A=Math.sin(a),d=A*this.x+e*this.y;return this.x=e*this.x-A*this.y,this.y=d,this},_rotateAround:function(a,e){var A=Math.cos(a),d=Math.sin(a),m=e.y+d*(this.x-e.x)+A*(this.y-e.y);return this.x=e.x+A*(this.x-e.x)-d*(this.y-e.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},I.convert=function(a){return a instanceof I?a:Array.isArray(a)?new I(a[0],a[1]):a};var U=v(C),Q=P;function P(a,e,A,d){this.cx=3*a,this.bx=3*(A-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(d-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=e,this.p2x=A,this.p2y=d}P.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,e){if(e===void 0&&(e=1e-6),a<0)return 0;if(a>1)return 1;for(var A=a,d=0;d<8;d++){var m=this.sampleCurveX(A)-a;if(Math.abs(m)<e)return A;var w=this.sampleCurveDerivativeX(A);if(Math.abs(w)<1e-6)break;A-=m/w}var B=0,S=1;for(A=a,d=0;d<20&&(m=this.sampleCurveX(A),!(Math.abs(m-a)<e));d++)a>m?B=A:S=A,A=.5*(S-B)+B;return A},solve:function(a,e){return this.sampleCurveY(this.solveCurveX(a,e))}};var K=v(Q);let V,Y;function $(){return V==null&&(V=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),V}function it(){if(Y==null&&(Y=!1,$())){const e=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(e){for(let d=0;d<5*5;d++){const m=4*d;e.fillStyle=`rgb(${m},${m+1},${m+2})`,e.fillRect(d%5,Math.floor(d/5),1,1)}const A=e.getImageData(0,0,5,5).data;for(let d=0;d<5*5*4;d++)if(d%4!=3&&A[d]!==d){Y=!0;break}}}return Y||!1}function ht(a,e,A,d){const m=new K(a,e,A,d);return w=>m.solve(w)}const St=ht(.25,.1,.25,1);function Tt(a,e,A){return Math.min(A,Math.max(e,a))}function Lt(a,e,A){const d=A-e,m=((a-e)%d+d)%d+e;return m===e?A:m}function Ft(a,...e){for(const A of e)for(const d in A)a[d]=A[d];return a}let yt=1;function Rt(a,e,A){const d={};for(const m in a)d[m]=e.call(this,a[m],m,a);return d}function Wt(a,e,A){const d={};for(const m in a)e.call(this,a[m],m,a)&&(d[m]=a[m]);return d}function At(a){return Array.isArray(a)?a.map(At):typeof a=="object"&&a?Rt(a,At):a}const lt={};function bt(a){lt[a]||(typeof console<"u"&&console.warn(a),lt[a]=!0)}function wt(a,e,A){return(A.y-a.y)*(e.x-a.x)>(e.y-a.y)*(A.x-a.x)}function Xt(a){return typeof WorkerGlobalScope<"u"&&a!==void 0&&a instanceof WorkerGlobalScope}let Gt=null;function Yt(a){return typeof ImageBitmap<"u"&&a instanceof ImageBitmap}const qt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function te(a,e,A,d,m){return o(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const w=new VideoFrame(a,{timestamp:0});try{const B=w==null?void 0:w.format;if(!B||!B.startsWith("BGR")&&!B.startsWith("RGB"))throw new Error(`Unrecognized format ${B}`);const S=B.startsWith("BGR"),L=new Uint8ClampedArray(d*m*4);if(yield w.copyTo(L,function(N,R,j,W,et){const at=4*Math.max(-R,0),ct=(Math.max(0,j)-j)*W*4+at,xt=4*W,It=Math.max(0,R),$t=Math.max(0,j);return{rect:{x:It,y:$t,width:Math.min(N.width,R+W)-It,height:Math.min(N.height,j+et)-$t},layout:[{offset:ct,stride:xt}]}}(a,e,A,d,m)),S)for(let N=0;N<L.length;N+=4){const R=L[N];L[N]=L[N+2],L[N+2]=R}return L}finally{w.close()}})}let Jt,me;const rt="AbortError";function dt(){return new Error(rt)}const Bt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Et(a){return Bt.REGISTERED_PROTOCOLS[a.substring(0,a.indexOf("://"))]}const Nt="global-dispatcher";class Ht extends Error{constructor(e,A,d,m){super(`AJAXError: ${A} (${e}): ${d}`),this.status=e,this.statusText=A,this.url=d,this.body=m}}const ie=()=>Xt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,se=function(a,e){if(/:\/\//.test(a.url)&&!/^https?:|^file:/.test(a.url)){const d=Et(a.url);if(d)return d(a,e);if(Xt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:a,targetMapId:Nt},e)}if(!(/^file:/.test(A=a.url)||/^file:/.test(ie())&&!/^\w+:/.test(A))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(d,m){return o(this,void 0,void 0,function*(){const w=new Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,cache:d.cache,referrer:ie(),signal:m.signal});d.type!=="json"||w.headers.has("Accept")||w.headers.set("Accept","application/json");const B=yield fetch(w);if(!B.ok){const N=yield B.blob();throw new Ht(B.status,B.statusText,d.url,N)}let S;S=d.type==="arrayBuffer"||d.type==="image"?B.arrayBuffer():d.type==="json"?B.json():B.text();const L=yield S;if(m.signal.aborted)throw dt();return{data:L,cacheControl:B.headers.get("Cache-Control"),expires:B.headers.get("Expires")}})}(a,e);if(Xt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:a,mustQueue:!0,targetMapId:Nt},e)}var A;return function(d,m){return new Promise((w,B)=>{var S;const L=new XMLHttpRequest;L.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(L.responseType="arraybuffer");for(const N in d.headers)L.setRequestHeader(N,d.headers[N]);d.type==="json"&&(L.responseType="text",!((S=d.headers)===null||S===void 0)&&S.Accept||L.setRequestHeader("Accept","application/json")),L.withCredentials=d.credentials==="include",L.onerror=()=>{B(new Error(L.statusText))},L.onload=()=>{if(!m.signal.aborted)if((L.status>=200&&L.status<300||L.status===0)&&L.response!==null){let N=L.response;if(d.type==="json")try{N=JSON.parse(L.response)}catch(R){return void B(R)}w({data:N,cacheControl:L.getResponseHeader("Cache-Control"),expires:L.getResponseHeader("Expires")})}else{const N=new Blob([L.response],{type:L.getResponseHeader("Content-Type")});B(new Ht(L.status,L.statusText,d.url,N))}},m.signal.addEventListener("abort",()=>{L.abort(),B(dt())}),L.send(d.body)})}(a,e)};function Ce(a){if(!a||a.indexOf("://")<=0||a.indexOf("data:image/")===0||a.indexOf("blob:")===0)return!0;const e=new URL(a),A=window.location;return e.protocol===A.protocol&&e.host===A.host}function be(a,e,A){A[a]&&A[a].indexOf(e)!==-1||(A[a]=A[a]||[],A[a].push(e))}function Te(a,e,A){if(A&&A[a]){const d=A[a].indexOf(e);d!==-1&&A[a].splice(d,1)}}class Le{constructor(e,A={}){Ft(this,A),this.type=e}}class Qe extends Le{constructor(e,A={}){super("error",Ft({error:e},A))}}class le{on(e,A){return this._listeners=this._listeners||{},be(e,A,this._listeners),this}off(e,A){return Te(e,A,this._listeners),Te(e,A,this._oneTimeListeners),this}once(e,A){return A?(this._oneTimeListeners=this._oneTimeListeners||{},be(e,A,this._oneTimeListeners),this):new Promise(d=>this.once(e,d))}fire(e,A){typeof e=="string"&&(e=new Le(e,A||{}));const d=e.type;if(this.listens(d)){e.target=this;const m=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const S of m)S.call(this,e);const w=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const S of w)Te(d,S,this._oneTimeListeners),S.call(this,e);const B=this._eventedParent;B&&(Ft(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),B.fire(e))}else e instanceof Qe&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,A){return this._eventedParent=e,this._eventedParentData=A,this}}var nt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const dr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function $e(a,e){const A={};for(const d in a)d!=="ref"&&(A[d]=a[d]);return dr.forEach(d=>{d in e&&(A[d]=e[d])}),A}function ce(a,e){if(Array.isArray(a)){if(!Array.isArray(e)||a.length!==e.length)return!1;for(let A=0;A<a.length;A++)if(!ce(a[A],e[A]))return!1;return!0}if(typeof a=="object"&&a!==null&&e!==null){if(typeof e!="object"||Object.keys(a).length!==Object.keys(e).length)return!1;for(const A in a)if(!ce(a[A],e[A]))return!1;return!0}return a===e}function ge(a,e){a.push(e)}function Se(a,e,A){ge(A,{command:"addSource",args:[a,e[a]]})}function Ie(a,e,A){ge(e,{command:"removeSource",args:[a]}),A[a]=!0}function Ge(a,e,A,d){Ie(a,A,d),Se(a,e,A)}function Ze(a,e,A){let d;for(d in a[A])if(Object.prototype.hasOwnProperty.call(a[A],d)&&d!=="data"&&!ce(a[A][d],e[A][d]))return!1;for(d in e[A])if(Object.prototype.hasOwnProperty.call(e[A],d)&&d!=="data"&&!ce(a[A][d],e[A][d]))return!1;return!0}function pr(a,e,A,d,m,w){a=a||{},e=e||{};for(const B in a)Object.prototype.hasOwnProperty.call(a,B)&&(ce(a[B],e[B])||A.push({command:w,args:[d,B,e[B],m]}));for(const B in e)Object.prototype.hasOwnProperty.call(e,B)&&!Object.prototype.hasOwnProperty.call(a,B)&&(ce(a[B],e[B])||A.push({command:w,args:[d,B,e[B],m]}))}function wr(a){return a.id}function Sr(a,e){return a[e.id]=e,a}class pe{constructor(e,A,d,m){this.message=(e?`${e}: `:"")+d,m&&(this.identifier=m),A!=null&&A.__line__&&(this.line=A.__line__)}}function Xe(a,...e){for(const A of e)for(const d in A)a[d]=A[d];return a}class ur extends Error{constructor(e,A){super(A),this.message=A,this.key=e}}class Ue{constructor(e,A=[]){this.parent=e,this.bindings={};for(const[d,m]of A)this.bindings[d]=m}concat(e){return new Ue(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const Jr={kind:"null"},he={kind:"number"},sr={kind:"string"},Me={kind:"boolean"},xr={kind:"color"},Gr={kind:"object"},ke={kind:"value"},Fi={kind:"collator"},zr={kind:"formatted"},Dr={kind:"padding"},pt={kind:"resolvedImage"},G={kind:"variableAnchorOffsetCollection"};function q(a,e){return{kind:"array",itemType:a,N:e}}function tt(a){if(a.kind==="array"){const e=tt(a.itemType);return typeof a.N=="number"?`array<${e}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${e}>`}return a.kind}const _t=[Jr,he,sr,Me,xr,zr,Gr,q(ke),Dr,pt,G];function Pt(a,e){if(e.kind==="error")return null;if(a.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Pt(a.itemType,e.itemType))&&(typeof a.N!="number"||a.N===e.N))return null}else{if(a.kind===e.kind)return null;if(a.kind==="value"){for(const A of _t)if(!Pt(A,e))return null}}return`Expected ${tt(a)} but found ${tt(e)} instead.`}function kt(a,e){return e.some(A=>A.kind===a.kind)}function Ot(a,e){return e.some(A=>A==="null"?a===null:A==="array"?Array.isArray(a):A==="object"?a&&!Array.isArray(a)&&typeof a=="object":A===typeof a)}function vt(a,e){return a.kind==="array"&&e.kind==="array"?a.itemType.kind===e.itemType.kind&&typeof a.N=="number":a.kind===e.kind}const jt=.96422,de=.82521,ae=4/29,ne=6/29,Ee=3*ne*ne,Re=ne*ne*ne,Fr=Math.PI/180,ar=180/Math.PI;function Br(a){return(a%=360)<0&&(a+=360),a}function Ur([a,e,A,d]){let m,w;const B=Zr((.2225045*(a=Ir(a))+.7168786*(e=Ir(e))+.0606169*(A=Ir(A)))/1);a===e&&e===A?m=w=B:(m=Zr((.4360747*a+.3850649*e+.1430804*A)/jt),w=Zr((.0139322*a+.0971045*e+.7141733*A)/de));const S=116*B-16;return[S<0?0:S,500*(m-B),200*(B-w),d]}function Ir(a){return a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Zr(a){return a>Re?Math.pow(a,1/3):a/Ee+ae}function cr([a,e,A,d]){let m=(a+16)/116,w=isNaN(e)?m:m+e/500,B=isNaN(A)?m:m-A/200;return m=1*ni(m),w=jt*ni(w),B=de*ni(B),[jr(3.1338561*w-1.6168667*m-.4906146*B),jr(-.9787684*w+1.9161415*m+.033454*B),jr(.0719453*w-.2289914*m+1.4052427*B),d]}function jr(a){return(a=a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055)<0?0:a>1?1:a}function ni(a){return a>ne?a*a*a:Ee*(a-ae)}function zi(a){return parseInt(a.padEnd(2,a),16)/255}function Ut(a,e){return Fe(e?a/100:a,0,1)}function Fe(a,e,A){return Math.min(Math.max(e,a),A)}function xe(a){return!a.some(Number.isNaN)}const Kr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class vr{constructor(e,A,d,m=1,w=!0){this.r=e,this.g=A,this.b=d,this.a=m,w||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[e,A,d,m]))}static parse(e){if(e instanceof vr)return e;if(typeof e!="string")return;const A=function(d){if((d=d.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=Kr[d];if(m){const[B,S,L]=m;return[B/255,S/255,L/255,1]}if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){const B=d.length<6?1:2;let S=1;return[zi(d.slice(S,S+=B)),zi(d.slice(S,S+=B)),zi(d.slice(S,S+=B)),zi(d.slice(S,S+B)||"ff")]}if(d.startsWith("rgb")){const B=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(B){const[S,L,N,R,j,W,et,at,ct,xt,It,$t]=B,Qt=[R||" ",et||" ",xt].join("");if(Qt==="  "||Qt==="  /"||Qt===",,"||Qt===",,,"){const Vt=[N,W,ct].join(""),Ae=Vt==="%%%"?100:Vt===""?255:0;if(Ae){const ve=[Fe(+L/Ae,0,1),Fe(+j/Ae,0,1),Fe(+at/Ae,0,1),It?Ut(+It,$t):1];if(xe(ve))return ve}}return}}const w=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){const[B,S,L,N,R,j,W,et,at]=w,ct=[L||" ",R||" ",W].join("");if(ct==="  "||ct==="  /"||ct===",,"||ct===",,,"){const xt=[+S,Fe(+N,0,100),Fe(+j,0,100),et?Ut(+et,at):1];if(xe(xt))return function([It,$t,Qt,Vt]){function Ae(ve){const De=(ve+It/30)%12,lr=$t*Math.min(Qt,1-Qt);return Qt-lr*Math.max(-1,Math.min(De-3,9-De,1))}return It=Br(It),$t/=100,Qt/=100,[Ae(0),Ae(8),Ae(4),Vt]}(xt)}}}(e);return A?new vr(...A,!1):void 0}get rgb(){const{r:e,g:A,b:d,a:m}=this,w=m||1/0;return this.overwriteGetter("rgb",[e/w,A/w,d/w,m])}get hcl(){return this.overwriteGetter("hcl",function(e){const[A,d,m,w]=Ur(e),B=Math.sqrt(d*d+m*m);return[Math.round(1e4*B)?Br(Math.atan2(m,d)*ar):NaN,B,A,w]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Ur(this.rgb))}overwriteGetter(e,A){return Object.defineProperty(this,e,{value:A}),A}toString(){const[e,A,d,m]=this.rgb;return`rgba(${[e,A,d].map(w=>Math.round(255*w)).join(",")},${m})`}}vr.black=new vr(0,0,0,1),vr.white=new vr(1,1,1,1),vr.transparent=new vr(0,0,0,0),vr.red=new vr(1,0,0,1);class Ji{constructor(e,A,d){this.sensitivity=e?A?"variant":"case":A?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,A){return this.collator.compare(e,A)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class si{constructor(e,A,d,m,w){this.text=e,this.image=A,this.scale=d,this.fontStack=m,this.textColor=w}}class yi{constructor(e){this.sections=e}static fromString(e){return new yi([new si(e,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof yi?e:yi.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class li{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof li)return e;if(typeof e=="number")return new li([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const A of e)if(typeof A!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new li(e)}}toString(){return JSON.stringify(this.values)}}const Si=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class tn{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof tn)return e;if(Array.isArray(e)&&!(e.length<1)&&e.length%2==0){for(let A=0;A<e.length;A+=2){const d=e[A],m=e[A+1];if(typeof d!="string"||!Si.has(d)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new tn(e)}}toString(){return JSON.stringify(this.values)}}class Ln{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Ln({name:e,available:!1}):null}}function Vl(a,e,A,d){return typeof a=="number"&&a>=0&&a<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof A=="number"&&A>=0&&A<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[a,e,A,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[a,e,A,d]:[a,e,A]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Rn(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof vr||a instanceof Ji||a instanceof yi||a instanceof li||a instanceof tn||a instanceof Ln)return!0;if(Array.isArray(a)){for(const e of a)if(!Rn(e))return!1;return!0}if(typeof a=="object"){for(const e in a)if(!Rn(a[e]))return!1;return!0}return!1}function ki(a){if(a===null)return Jr;if(typeof a=="string")return sr;if(typeof a=="boolean")return Me;if(typeof a=="number")return he;if(a instanceof vr)return xr;if(a instanceof Ji)return Fi;if(a instanceof yi)return zr;if(a instanceof li)return Dr;if(a instanceof tn)return G;if(a instanceof Ln)return pt;if(Array.isArray(a)){const e=a.length;let A;for(const d of a){const m=ki(d);if(A){if(A===m)continue;A=ke;break}A=m}return q(A||ke,e)}return Gr}function vi(a){const e=typeof a;return a===null?"":e==="string"||e==="number"||e==="boolean"?String(a):a instanceof vr||a instanceof yi||a instanceof li||a instanceof tn||a instanceof Ln?a.toString():JSON.stringify(a)}class na{constructor(e,A){this.type=e,this.value=A}static parse(e,A){if(e.length!==2)return A.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Rn(e[1]))return A.error("invalid value");const d=e[1];let m=ki(d);const w=A.expectedType;return m.kind!=="array"||m.N!==0||!w||w.kind!=="array"||typeof w.N=="number"&&w.N!==0||(m=w),new na(m,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class wi{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const sa={string:sr,number:he,boolean:Me,object:Gr};class Qn{constructor(e,A){this.type=e,this.args=A}static parse(e,A){if(e.length<2)return A.error("Expected at least one argument.");let d,m=1;const w=e[0];if(w==="array"){let S,L;if(e.length>2){const N=e[1];if(typeof N!="string"||!(N in sa)||N==="object")return A.error('The item type argument of "array" must be one of string, number, boolean',1);S=sa[N],m++}else S=ke;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return A.error('The length argument to "array" must be a positive integer literal',2);L=e[2],m++}d=q(S,L)}else{if(!sa[w])throw new Error(`Types doesn't contain name = ${w}`);d=sa[w]}const B=[];for(;m<e.length;m++){const S=A.parse(e[m],m,ke);if(!S)return null;B.push(S)}return new Qn(d,B)}evaluate(e){for(let A=0;A<this.args.length;A++){const d=this.args[A].evaluate(e);if(!Pt(this.type,ki(d)))return d;if(A===this.args.length-1)throw new wi(`Expected value to be of type ${tt(this.type)}, but found ${tt(ki(d))} instead.`)}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const hA={"to-boolean":Me,"to-color":xr,"to-number":he,"to-string":sr};class Ki{constructor(e,A){this.type=e,this.args=A}static parse(e,A){if(e.length<2)return A.error("Expected at least one argument.");const d=e[0];if(!hA[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&e.length!==2)return A.error("Expected one argument.");const m=hA[d],w=[];for(let B=1;B<e.length;B++){const S=A.parse(e[B],B,ke);if(!S)return null;w.push(S)}return new Ki(m,w)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let A,d;for(const m of this.args){if(A=m.evaluate(e),d=null,A instanceof vr)return A;if(typeof A=="string"){const w=e.parseColor(A);if(w)return w}else if(Array.isArray(A)&&(d=A.length<3||A.length>4?`Invalid rbga value ${JSON.stringify(A)}: expected an array containing either three or four numeric values.`:Vl(A[0],A[1],A[2],A[3]),!d))return new vr(A[0]/255,A[1]/255,A[2]/255,A[3])}throw new wi(d||`Could not parse color from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"padding":{let A;for(const d of this.args){A=d.evaluate(e);const m=li.parse(A);if(m)return m}throw new wi(`Could not parse padding from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"variableAnchorOffsetCollection":{let A;for(const d of this.args){A=d.evaluate(e);const m=tn.parse(A);if(m)return m}throw new wi(`Could not parse variableAnchorOffsetCollection from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"number":{let A=null;for(const d of this.args){if(A=d.evaluate(e),A===null)return 0;const m=Number(A);if(!isNaN(m))return m}throw new wi(`Could not convert ${JSON.stringify(A)} to number.`)}case"formatted":return yi.fromString(vi(this.args[0].evaluate(e)));case"resolvedImage":return Ln.fromString(vi(this.args[0].evaluate(e)));default:return vi(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const Ya=["Unknown","Point","LineString","Polygon"];class en{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ya[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let A=this._parseColorCache[e];return A||(A=this._parseColorCache[e]=vr.parse(e)),A}}class $r{constructor(e,A,d=[],m,w=new Ue,B=[]){this.registry=e,this.path=d,this.key=d.map(S=>`[${S}]`).join(""),this.scope=w,this.errors=B,this.expectedType=m,this._isConstant=A}parse(e,A,d,m,w={}){return A?this.concat(A,d,m)._parse(e,w):this._parse(e,w)}_parse(e,A){function d(m,w,B){return B==="assert"?new Qn(w,[m]):B==="coerce"?new Ki(w,[m]):m}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=e[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const w=this.registry[m];if(w){let B=w.parse(e,this);if(!B)return null;if(this.expectedType){const S=this.expectedType,L=B.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||L.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||L.kind!=="value"&&L.kind!=="string")if(S.kind!=="padding"||L.kind!=="value"&&L.kind!=="number"&&L.kind!=="array")if(S.kind!=="variableAnchorOffsetCollection"||L.kind!=="value"&&L.kind!=="array"){if(this.checkSubtype(S,L))return null}else B=d(B,S,A.typeAnnotation||"coerce");else B=d(B,S,A.typeAnnotation||"coerce");else B=d(B,S,A.typeAnnotation||"coerce");else B=d(B,S,A.typeAnnotation||"assert")}if(!(B instanceof na)&&B.type.kind!=="resolvedImage"&&this._isConstant(B)){const S=new en;try{B=new na(B.type,B.evaluate(S))}catch(L){return this.error(L.message),null}}return B}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,A,d){const m=typeof e=="number"?this.path.concat(e):this.path,w=d?this.scope.concat(d):this.scope;return new $r(this.registry,this._isConstant,m,A||null,w,this.errors)}error(e,...A){const d=`${this.key}${A.map(m=>`[${m}]`).join("")}`;this.errors.push(new ur(d,e))}checkSubtype(e,A){const d=Pt(e,A);return d&&this.error(d),d}}class Ro{constructor(e,A){this.type=A.type,this.bindings=[].concat(e),this.result=A}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const A of this.bindings)e(A[1]);e(this.result)}static parse(e,A){if(e.length<4)return A.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const d=[];for(let w=1;w<e.length-1;w+=2){const B=e[w];if(typeof B!="string")return A.error(`Expected string, but found ${typeof B} instead.`,w);if(/[^a-zA-Z0-9_]/.test(B))return A.error("Variable names must contain only alphanumeric characters or '_'.",w);const S=A.parse(e[w+1],w+1);if(!S)return null;d.push([B,S])}const m=A.parse(e[e.length-1],e.length-1,A.expectedType,d);return m?new Ro(d,m):null}outputDefined(){return this.result.outputDefined()}}class Ja{constructor(e,A){this.type=A.type,this.name=e,this.boundExpression=A}static parse(e,A){if(e.length!==2||typeof e[1]!="string")return A.error("'var' expression requires exactly one string literal argument.");const d=e[1];return A.scope.has(d)?new Ja(d,A.scope.get(d)):A.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class dA{constructor(e,A,d){this.type=e,this.index=A,this.input=d}static parse(e,A){if(e.length!==3)return A.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const d=A.parse(e[1],1,he),m=A.parse(e[2],2,q(A.expectedType||ke));return d&&m?new dA(m.type.itemType,d,m):null}evaluate(e){const A=this.index.evaluate(e),d=this.input.evaluate(e);if(A<0)throw new wi(`Array index out of bounds: ${A} < 0.`);if(A>=d.length)throw new wi(`Array index out of bounds: ${A} > ${d.length-1}.`);if(A!==Math.floor(A))throw new wi(`Array index must be an integer, but found ${A} instead.`);return d[A]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class pA{constructor(e,A){this.type=Me,this.needle=e,this.haystack=A}static parse(e,A){if(e.length!==3)return A.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const d=A.parse(e[1],1,ke),m=A.parse(e[2],2,ke);return d&&m?kt(d.type,[Me,sr,he,Jr,ke])?new pA(d,m):A.error(`Expected first argument to be of type boolean, string, number or null, but found ${tt(d.type)} instead`):null}evaluate(e){const A=this.needle.evaluate(e),d=this.haystack.evaluate(e);if(!d)return!1;if(!Ot(A,["boolean","string","number","null"]))throw new wi(`Expected first argument to be of type boolean, string, number or null, but found ${tt(ki(A))} instead.`);if(!Ot(d,["string","array"]))throw new wi(`Expected second argument to be of type array or string, but found ${tt(ki(d))} instead.`);return d.indexOf(A)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class to{constructor(e,A,d){this.type=he,this.needle=e,this.haystack=A,this.fromIndex=d}static parse(e,A){if(e.length<=2||e.length>=5)return A.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const d=A.parse(e[1],1,ke),m=A.parse(e[2],2,ke);if(!d||!m)return null;if(!kt(d.type,[Me,sr,he,Jr,ke]))return A.error(`Expected first argument to be of type boolean, string, number or null, but found ${tt(d.type)} instead`);if(e.length===4){const w=A.parse(e[3],3,he);return w?new to(d,m,w):null}return new to(d,m)}evaluate(e){const A=this.needle.evaluate(e),d=this.haystack.evaluate(e);if(!Ot(A,["boolean","string","number","null"]))throw new wi(`Expected first argument to be of type boolean, string, number or null, but found ${tt(ki(A))} instead.`);if(!Ot(d,["string","array"]))throw new wi(`Expected second argument to be of type array or string, but found ${tt(ki(d))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(e);return d.indexOf(A,m)}return d.indexOf(A)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class il{constructor(e,A,d,m,w,B){this.inputType=e,this.type=A,this.input=d,this.cases=m,this.outputs=w,this.otherwise=B}static parse(e,A){if(e.length<5)return A.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return A.error("Expected an even number of arguments.");let d,m;A.expectedType&&A.expectedType.kind!=="value"&&(m=A.expectedType);const w={},B=[];for(let N=2;N<e.length-1;N+=2){let R=e[N];const j=e[N+1];Array.isArray(R)||(R=[R]);const W=A.concat(N);if(R.length===0)return W.error("Expected at least one branch label.");for(const at of R){if(typeof at!="number"&&typeof at!="string")return W.error("Branch labels must be numbers or strings.");if(typeof at=="number"&&Math.abs(at)>Number.MAX_SAFE_INTEGER)return W.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof at=="number"&&Math.floor(at)!==at)return W.error("Numeric branch labels must be integer values.");if(d){if(W.checkSubtype(d,ki(at)))return null}else d=ki(at);if(w[String(at)]!==void 0)return W.error("Branch labels must be unique.");w[String(at)]=B.length}const et=A.parse(j,N,m);if(!et)return null;m=m||et.type,B.push(et)}const S=A.parse(e[1],1,ke);if(!S)return null;const L=A.parse(e[e.length-1],e.length-1,m);return L?S.type.kind!=="value"&&A.concat(1).checkSubtype(d,S.type)?null:new il(d,m,S,w,B,L):null}evaluate(e){const A=this.input.evaluate(e);return(ki(A)===this.inputType&&this.outputs[this.cases[A]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class eo{constructor(e,A,d){this.type=e,this.branches=A,this.otherwise=d}static parse(e,A){if(e.length<4)return A.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return A.error("Expected an odd number of arguments.");let d;A.expectedType&&A.expectedType.kind!=="value"&&(d=A.expectedType);const m=[];for(let B=1;B<e.length-1;B+=2){const S=A.parse(e[B],B,Me);if(!S)return null;const L=A.parse(e[B+1],B+1,d);if(!L)return null;m.push([S,L]),d=d||L.type}const w=A.parse(e[e.length-1],e.length-1,d);if(!w)return null;if(!d)throw new Error("Can't infer output type");return new eo(d,m,w)}evaluate(e){for(const[A,d]of this.branches)if(A.evaluate(e))return d.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[A,d]of this.branches)e(A),e(d);e(this.otherwise)}outputDefined(){return this.branches.every(([e,A])=>A.outputDefined())&&this.otherwise.outputDefined()}}class zo{constructor(e,A,d,m){this.type=e,this.input=A,this.beginIndex=d,this.endIndex=m}static parse(e,A){if(e.length<=2||e.length>=5)return A.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const d=A.parse(e[1],1,ke),m=A.parse(e[2],2,he);if(!d||!m)return null;if(!kt(d.type,[q(ke),sr,ke]))return A.error(`Expected first argument to be of type array or string, but found ${tt(d.type)} instead`);if(e.length===4){const w=A.parse(e[3],3,he);return w?new zo(d.type,d,m,w):null}return new zo(d.type,d,m)}evaluate(e){const A=this.input.evaluate(e),d=this.beginIndex.evaluate(e);if(!Ot(A,["string","array"]))throw new wi(`Expected first argument to be of type array or string, but found ${tt(ki(A))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(e);return A.slice(d,m)}return A.slice(d)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function fA(a,e){const A=a.length-1;let d,m,w=0,B=A,S=0;for(;w<=B;)if(S=Math.floor((w+B)/2),d=a[S],m=a[S+1],d<=e){if(S===A||e<m)return S;w=S+1}else{if(!(d>e))throw new wi("Input is not a number.");B=S-1}return 0}class Ho{constructor(e,A,d){this.type=e,this.input=A,this.labels=[],this.outputs=[];for(const[m,w]of d)this.labels.push(m),this.outputs.push(w)}static parse(e,A){if(e.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return A.error("Expected an even number of arguments.");const d=A.parse(e[1],1,he);if(!d)return null;const m=[];let w=null;A.expectedType&&A.expectedType.kind!=="value"&&(w=A.expectedType);for(let B=1;B<e.length;B+=2){const S=B===1?-1/0:e[B],L=e[B+1],N=B,R=B+1;if(typeof S!="number")return A.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',N);if(m.length&&m[m.length-1][0]>=S)return A.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',N);const j=A.parse(L,R,w);if(!j)return null;w=w||j.type,m.push([S,j])}return new Ho(w,d,m)}evaluate(e){const A=this.labels,d=this.outputs;if(A.length===1)return d[0].evaluate(e);const m=this.input.evaluate(e);if(m<=A[0])return d[0].evaluate(e);const w=A.length;return m>=A[w-1]?d[w-1].evaluate(e):d[fA(A,m)].evaluate(e)}eachChild(e){e(this.input);for(const A of this.outputs)e(A)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function xa(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var gA=ro;function ro(a,e,A,d){this.cx=3*a,this.bx=3*(A-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(d-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=e,this.p2x=A,this.p2y=d}ro.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,e){if(e===void 0&&(e=1e-6),a<0)return 0;if(a>1)return 1;for(var A=a,d=0;d<8;d++){var m=this.sampleCurveX(A)-a;if(Math.abs(m)<e)return A;var w=this.sampleCurveDerivativeX(A);if(Math.abs(w)<1e-6)break;A-=m/w}var B=0,S=1;for(A=a,d=0;d<20&&(m=this.sampleCurveX(A),!(Math.abs(m-a)<e));d++)a>m?B=A:S=A,A=.5*(S-B)+B;return A},solve:function(a,e){return this.sampleCurveY(this.solveCurveX(a,e))}};var nl=xa(gA);function Di(a,e,A){return a+A*(e-a)}function mA(a,e,A){return a.map((d,m)=>Di(d,e[m],A))}const on={number:Di,color:function(a,e,A,d="rgb"){switch(d){case"rgb":{const[m,w,B,S]=mA(a.rgb,e.rgb,A);return new vr(m,w,B,S,!1)}case"hcl":{const[m,w,B,S]=a.hcl,[L,N,R,j]=e.hcl;let W,et;if(isNaN(m)||isNaN(L))isNaN(m)?isNaN(L)?W=NaN:(W=L,B!==1&&B!==0||(et=N)):(W=m,R!==1&&R!==0||(et=w));else{let $t=L-m;L>m&&$t>180?$t-=360:L<m&&m-L>180&&($t+=360),W=m+A*$t}const[at,ct,xt,It]=function([$t,Qt,Vt,Ae]){return $t=isNaN($t)?0:$t*Fr,cr([Vt,Math.cos($t)*Qt,Math.sin($t)*Qt,Ae])}([W,et??Di(w,N,A),Di(B,R,A),Di(S,j,A)]);return new vr(at,ct,xt,It,!1)}case"lab":{const[m,w,B,S]=cr(mA(a.lab,e.lab,A));return new vr(m,w,B,S,!1)}}},array:mA,padding:function(a,e,A){return new li(mA(a.values,e.values,A))},variableAnchorOffsetCollection:function(a,e,A){const d=a.values,m=e.values;if(d.length!==m.length)throw new wi(`Cannot interpolate values of different length. from: ${a.toString()}, to: ${e.toString()}`);const w=[];for(let B=0;B<d.length;B+=2){if(d[B]!==m[B])throw new wi(`Cannot interpolate values containing mismatched anchors. from[${B}]: ${d[B]}, to[${B}]: ${m[B]}`);w.push(d[B]);const[S,L]=d[B+1],[N,R]=m[B+1];w.push([Di(S,N,A),Di(L,R,A)])}return new tn(w)}};class fr{constructor(e,A,d,m,w){this.type=e,this.operator=A,this.interpolation=d,this.input=m,this.labels=[],this.outputs=[];for(const[B,S]of w)this.labels.push(B),this.outputs.push(S)}static interpolationFactor(e,A,d,m){let w=0;if(e.name==="exponential")w=sl(A,e.base,d,m);else if(e.name==="linear")w=sl(A,1,d,m);else if(e.name==="cubic-bezier"){const B=e.controlPoints;w=new nl(B[0],B[1],B[2],B[3]).solve(sl(A,1,d,m))}return w}static parse(e,A){let[d,m,w,...B]=e;if(!Array.isArray(m)||m.length===0)return A.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const N=m[1];if(typeof N!="number")return A.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:N}}else{if(m[0]!=="cubic-bezier")return A.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const N=m.slice(1);if(N.length!==4||N.some(R=>typeof R!="number"||R<0||R>1))return A.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:N}}}if(e.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return A.error("Expected an even number of arguments.");if(w=A.parse(w,2,he),!w)return null;const S=[];let L=null;d==="interpolate-hcl"||d==="interpolate-lab"?L=xr:A.expectedType&&A.expectedType.kind!=="value"&&(L=A.expectedType);for(let N=0;N<B.length;N+=2){const R=B[N],j=B[N+1],W=N+3,et=N+4;if(typeof R!="number")return A.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(S.length&&S[S.length-1][0]>=R)return A.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',W);const at=A.parse(j,et,L);if(!at)return null;L=L||at.type,S.push([R,at])}return vt(L,he)||vt(L,xr)||vt(L,Dr)||vt(L,G)||vt(L,q(he))?new fr(L,d,m,w,S):A.error(`Type ${tt(L)} is not interpolatable.`)}evaluate(e){const A=this.labels,d=this.outputs;if(A.length===1)return d[0].evaluate(e);const m=this.input.evaluate(e);if(m<=A[0])return d[0].evaluate(e);const w=A.length;if(m>=A[w-1])return d[w-1].evaluate(e);const B=fA(A,m),S=fr.interpolationFactor(this.interpolation,m,A[B],A[B+1]),L=d[B].evaluate(e),N=d[B+1].evaluate(e);switch(this.operator){case"interpolate":return on[this.type.kind](L,N,S);case"interpolate-hcl":return on.color(L,N,S,"hcl");case"interpolate-lab":return on.color(L,N,S,"lab")}}eachChild(e){e(this.input);for(const A of this.outputs)e(A)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function sl(a,e,A,d){const m=d-A,w=a-A;return m===0?0:e===1?w/m:(Math.pow(e,w)-1)/(Math.pow(e,m)-1)}class yA{constructor(e,A){this.type=e,this.args=A}static parse(e,A){if(e.length<2)return A.error("Expectected at least one argument.");let d=null;const m=A.expectedType;m&&m.kind!=="value"&&(d=m);const w=[];for(const S of e.slice(1)){const L=A.parse(S,1+w.length,d,void 0,{typeAnnotation:"omit"});if(!L)return null;d=d||L.type,w.push(L)}if(!d)throw new Error("No output type");const B=m&&w.some(S=>Pt(m,S.type));return new yA(B?ke:d,w)}evaluate(e){let A,d=null,m=0;for(const w of this.args)if(m++,d=w.evaluate(e),d&&d instanceof Ln&&!d.available&&(A||(A=d.name),d=null,m===this.args.length&&(d=A)),d!==null)break;return d}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function ys(a,e){return a==="=="||a==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function vA(a,e,A,d){return d.compare(e,A)===0}function Ba(a,e,A){const d=a!=="=="&&a!=="!=";return class GC{constructor(w,B,S){this.type=Me,this.lhs=w,this.rhs=B,this.collator=S,this.hasUntypedArgument=w.type.kind==="value"||B.type.kind==="value"}static parse(w,B){if(w.length!==3&&w.length!==4)return B.error("Expected two or three arguments.");const S=w[0];let L=B.parse(w[1],1,ke);if(!L)return null;if(!ys(S,L.type))return B.concat(1).error(`"${S}" comparisons are not supported for type '${tt(L.type)}'.`);let N=B.parse(w[2],2,ke);if(!N)return null;if(!ys(S,N.type))return B.concat(2).error(`"${S}" comparisons are not supported for type '${tt(N.type)}'.`);if(L.type.kind!==N.type.kind&&L.type.kind!=="value"&&N.type.kind!=="value")return B.error(`Cannot compare types '${tt(L.type)}' and '${tt(N.type)}'.`);d&&(L.type.kind==="value"&&N.type.kind!=="value"?L=new Qn(N.type,[L]):L.type.kind!=="value"&&N.type.kind==="value"&&(N=new Qn(L.type,[N])));let R=null;if(w.length===4){if(L.type.kind!=="string"&&N.type.kind!=="string"&&L.type.kind!=="value"&&N.type.kind!=="value")return B.error("Cannot use collator to compare non-string types.");if(R=B.parse(w[3],3,Fi),!R)return null}return new GC(L,N,R)}evaluate(w){const B=this.lhs.evaluate(w),S=this.rhs.evaluate(w);if(d&&this.hasUntypedArgument){const L=ki(B),N=ki(S);if(L.kind!==N.kind||L.kind!=="string"&&L.kind!=="number")throw new wi(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${L.kind}, ${N.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const L=ki(B),N=ki(S);if(L.kind!=="string"||N.kind!=="string")return e(w,B,S)}return this.collator?A(w,B,S,this.collator.evaluate(w)):e(w,B,S)}eachChild(w){w(this.lhs),w(this.rhs),this.collator&&w(this.collator)}outputDefined(){return!0}}}const wA=Ba("==",function(a,e,A){return e===A},vA),_A=Ba("!=",function(a,e,A){return e!==A},function(a,e,A,d){return!vA(0,e,A,d)}),jl=Ba("<",function(a,e,A){return e<A},function(a,e,A,d){return d.compare(e,A)<0}),kc=Ba(">",function(a,e,A){return e>A},function(a,e,A,d){return d.compare(e,A)>0}),Dc=Ba("<=",function(a,e,A){return e<=A},function(a,e,A,d){return d.compare(e,A)<=0}),al=Ba(">=",function(a,e,A){return e>=A},function(a,e,A,d){return d.compare(e,A)>=0});class aa{constructor(e,A,d){this.type=Fi,this.locale=d,this.caseSensitive=e,this.diacriticSensitive=A}static parse(e,A){if(e.length!==2)return A.error("Expected one argument.");const d=e[1];if(typeof d!="object"||Array.isArray(d))return A.error("Collator options argument must be an object.");const m=A.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,Me);if(!m)return null;const w=A.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,Me);if(!w)return null;let B=null;return d.locale&&(B=A.parse(d.locale,1,sr),!B)?null:new aa(m,w,B)}evaluate(e){return new Ji(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class oa{constructor(e,A,d,m,w){this.type=sr,this.number=e,this.locale=A,this.currency=d,this.minFractionDigits=m,this.maxFractionDigits=w}static parse(e,A){if(e.length!==3)return A.error("Expected two arguments.");const d=A.parse(e[1],1,he);if(!d)return null;const m=e[2];if(typeof m!="object"||Array.isArray(m))return A.error("NumberFormat options argument must be an object.");let w=null;if(m.locale&&(w=A.parse(m.locale,1,sr),!w))return null;let B=null;if(m.currency&&(B=A.parse(m.currency,1,sr),!B))return null;let S=null;if(m["min-fraction-digits"]&&(S=A.parse(m["min-fraction-digits"],1,he),!S))return null;let L=null;return m["max-fraction-digits"]&&(L=A.parse(m["max-fraction-digits"],1,he),!L)?null:new oa(d,w,B,S,L)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class bA{constructor(e){this.type=zr,this.sections=e}static parse(e,A){if(e.length<2)return A.error("Expected at least one argument.");const d=e[1];if(!Array.isArray(d)&&typeof d=="object")return A.error("First argument must be an image or text section.");const m=[];let w=!1;for(let B=1;B<=e.length-1;++B){const S=e[B];if(w&&typeof S=="object"&&!Array.isArray(S)){w=!1;let L=null;if(S["font-scale"]&&(L=A.parse(S["font-scale"],1,he),!L))return null;let N=null;if(S["text-font"]&&(N=A.parse(S["text-font"],1,q(sr)),!N))return null;let R=null;if(S["text-color"]&&(R=A.parse(S["text-color"],1,xr),!R))return null;const j=m[m.length-1];j.scale=L,j.font=N,j.textColor=R}else{const L=A.parse(e[B],1,ke);if(!L)return null;const N=L.type.kind;if(N!=="string"&&N!=="value"&&N!=="null"&&N!=="resolvedImage")return A.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");w=!0,m.push({content:L,scale:null,font:null,textColor:null})}}return new bA(m)}evaluate(e){return new yi(this.sections.map(A=>{const d=A.content.evaluate(e);return ki(d)===pt?new si("",d,null,null,null):new si(vi(d),null,A.scale?A.scale.evaluate(e):null,A.font?A.font.evaluate(e).join(","):null,A.textColor?A.textColor.evaluate(e):null)}))}eachChild(e){for(const A of this.sections)e(A.content),A.scale&&e(A.scale),A.font&&e(A.font),A.textColor&&e(A.textColor)}outputDefined(){return!1}}class Ca{constructor(e){this.type=pt,this.input=e}static parse(e,A){if(e.length!==2)return A.error("Expected two arguments.");const d=A.parse(e[1],1,sr);return d?new Ca(d):A.error("No image name provided.")}evaluate(e){const A=this.input.evaluate(e),d=Ln.fromString(A);return d&&e.availableImages&&(d.available=e.availableImages.indexOf(A)>-1),d}eachChild(e){e(this.input)}outputDefined(){return!1}}class Fa{constructor(e){this.type=he,this.input=e}static parse(e,A){if(e.length!==2)return A.error(`Expected 1 argument, but found ${e.length-1} instead.`);const d=A.parse(e[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?A.error(`Expected argument of type string or array, but found ${tt(d.type)} instead.`):new Fa(d):null}evaluate(e){const A=this.input.evaluate(e);if(typeof A=="string"||Array.isArray(A))return A.length;throw new wi(`Expected value to be of type string or array, but found ${tt(ki(A))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const An=8192;function Wr(a,e){const A=(180+a[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,m=Math.pow(2,e.z);return[Math.round(A*m*An),Math.round(d*m*An)]}function xA(a,e){const A=Math.pow(2,e.z);return[(m=(a[0]/An+e.x)/A,360*m-180),(d=(a[1]/An+e.y)/A,360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90)];var d,m}function io(a,e){a[0]=Math.min(a[0],e[0]),a[1]=Math.min(a[1],e[1]),a[2]=Math.max(a[2],e[0]),a[3]=Math.max(a[3],e[1])}function no(a,e){return!(a[0]<=e[0]||a[2]>=e[2]||a[1]<=e[1]||a[3]>=e[3])}function Sa(a,e,A){const d=a[0]-e[0],m=a[1]-e[1],w=a[0]-A[0],B=a[1]-A[1];return d*B-w*m==0&&d*w<=0&&m*B<=0}function zs(a,e,A,d){return(m=[d[0]-A[0],d[1]-A[1]])[0]*(w=[e[0]-a[0],e[1]-a[1]])[1]-m[1]*w[0]!=0&&!(!Kl(a,e,A,d)||!Kl(A,d,a,e));var m,w}function Nc(a,e,A){for(const d of A)for(let m=0;m<d.length-1;++m)if(zs(a,e,d[m],d[m+1]))return!0;return!1}function is(a,e,A=!1){let d=!1;for(const S of e)for(let L=0;L<S.length-1;L++){if(Sa(a,S[L],S[L+1]))return A;(w=S[L])[1]>(m=a)[1]!=(B=S[L+1])[1]>m[1]&&m[0]<(B[0]-w[0])*(m[1]-w[1])/(B[1]-w[1])+w[0]&&(d=!d)}var m,w,B;return d}function Hs(a,e){for(const A of e)if(is(a,A))return!0;return!1}function BA(a,e){for(const A of a)if(!is(A,e))return!1;for(let A=0;A<a.length-1;++A)if(Nc(a[A],a[A+1],e))return!1;return!0}function Vo(a,e){for(const A of e)if(BA(a,A))return!0;return!1}function Kl(a,e,A,d){const m=d[0]-A[0],w=d[1]-A[1],B=(a[0]-A[0])*w-m*(a[1]-A[1]),S=(e[0]-A[0])*w-m*(e[1]-A[1]);return B>0&&S<0||B<0&&S>0}function so(a,e,A){const d=[];for(let m=0;m<a.length;m++){const w=[];for(let B=0;B<a[m].length;B++){const S=Wr(a[m][B],A);io(e,S),w.push(S)}d.push(w)}return d}function $l(a,e,A){const d=[];for(let m=0;m<a.length;m++){const w=so(a[m],e,A);d.push(w)}return d}function CA(a,e,A,d){if(a[0]<A[0]||a[0]>A[2]){const m=.5*d;let w=a[0]-A[0]>m?-d:A[0]-a[0]>m?d:0;w===0&&(w=a[0]-A[2]>m?-d:A[2]-a[0]>m?d:0),a[0]+=w}io(e,a)}function FA(a,e,A,d){const m=Math.pow(2,d.z)*An,w=[d.x*An,d.y*An],B=[];for(const S of a)for(const L of S){const N=[L.x+w[0],L.y+w[1]];CA(N,e,A,m),B.push(N)}return B}function ol(a,e,A,d){const m=Math.pow(2,d.z)*An,w=[d.x*An,d.y*An],B=[];for(const L of a){const N=[];for(const R of L){const j=[R.x+w[0],R.y+w[1]];io(e,j),N.push(j)}B.push(N)}if(e[2]-e[0]<=m/2){(S=e)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const L of B)for(const N of L)CA(N,e,A,m)}var S;return B}class vs{constructor(e,A){this.type=Me,this.geojson=e,this.geometries=A}static parse(e,A){if(e.length!==2)return A.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Rn(e[1])){const d=e[1];if(d.type==="FeatureCollection"){const m=[];for(const w of d.features){const{type:B,coordinates:S}=w.geometry;B==="Polygon"&&m.push(S),B==="MultiPolygon"&&m.push(...S)}if(m.length)return new vs(d,{type:"MultiPolygon",coordinates:m})}else if(d.type==="Feature"){const m=d.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new vs(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new vs(d,d)}return A.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(A,d){const m=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],B=A.canonicalID();if(d.type==="Polygon"){const S=so(d.coordinates,w,B),L=FA(A.geometry(),m,w,B);if(!no(m,w))return!1;for(const N of L)if(!is(N,S))return!1}if(d.type==="MultiPolygon"){const S=$l(d.coordinates,w,B),L=FA(A.geometry(),m,w,B);if(!no(m,w))return!1;for(const N of L)if(!Hs(N,S))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(A,d){const m=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],B=A.canonicalID();if(d.type==="Polygon"){const S=so(d.coordinates,w,B),L=ol(A.geometry(),m,w,B);if(!no(m,w))return!1;for(const N of L)if(!BA(N,S))return!1}if(d.type==="MultiPolygon"){const S=$l(d.coordinates,w,B),L=ol(A.geometry(),m,w,B);if(!no(m,w))return!1;for(const N of L)if(!Vo(N,S))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let SA=class{constructor(a=[],e=Al){if(this.data=a,this.length=this.data.length,this.compare=e,this.length>0)for(let A=(this.length>>1)-1;A>=0;A--)this._down(A)}push(a){this.data.push(a),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const a=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:e,compare:A}=this,d=e[a];for(;a>0;){const m=a-1>>1,w=e[m];if(A(d,w)>=0)break;e[a]=w,a=m}e[a]=d}_down(a){const{data:e,compare:A}=this,d=this.length>>1,m=e[a];for(;a<d;){let w=1+(a<<1),B=e[w];const S=w+1;if(S<this.length&&A(e[S],B)<0&&(w=S,B=e[S]),A(B,m)>=0)break;e[a]=B,a=w}e[a]=m}};function Al(a,e){return a<e?-1:a>e?1:0}function ql(a,e,A,d,m){Gl(a,e,A,d||a.length-1,m||jo)}function Gl(a,e,A,d,m){for(;d>A;){if(d-A>600){var w=d-A+1,B=e-A+1,S=Math.log(w),L=.5*Math.exp(2*S/3),N=.5*Math.sqrt(S*L*(w-L)/w)*(B-w/2<0?-1:1);Gl(a,e,Math.max(A,Math.floor(e-B*L/w+N)),Math.min(d,Math.floor(e+(w-B)*L/w+N)),m)}var R=a[e],j=A,W=d;for(Aa(a,A,e),m(a[d],R)>0&&Aa(a,A,d);j<W;){for(Aa(a,j,W),j++,W--;m(a[j],R)<0;)j++;for(;m(a[W],R)>0;)W--}m(a[A],R)===0?Aa(a,A,W):Aa(a,++W,d),W<=e&&(A=W+1),e<=W&&(d=W-1)}}function Aa(a,e,A){var d=a[e];a[e]=a[A],a[A]=d}function jo(a,e){return a<e?-1:a>e?1:0}function ao(a,e){if(a.length<=1)return[a];const A=[];let d,m;for(const w of a){const B=ll(w);B!==0&&(w.area=Math.abs(B),m===void 0&&(m=B<0),m===B<0?(d&&A.push(d),d=[w]):d.push(w))}if(d&&A.push(d),e>1)for(let w=0;w<A.length;w++)A[w].length<=e||(ql(A[w],e,1,A[w].length-1,oo),A[w]=A[w].slice(0,e));return A}function oo(a,e){return e.area-a.area}function ll(a){let e=0;for(let A,d,m=0,w=a.length,B=w-1;m<w;B=m++)A=a[m],d=a[B],e+=(d.x-A.x)*(A.y+d.y);return e}const M=1/298.257223563,J=M*(2-M),Ct=Math.PI/180;class Dt{constructor(e){const A=6378.137*Ct*1e3,d=Math.cos(e*Ct),m=1/(1-J*(1-d*d)),w=Math.sqrt(m);this.kx=A*w*d,this.ky=A*w*m*(1-J)}distance(e,A){const d=this.wrap(e[0]-A[0])*this.kx,m=(e[1]-A[1])*this.ky;return Math.sqrt(d*d+m*m)}pointOnLine(e,A){let d,m,w,B,S=1/0;for(let L=0;L<e.length-1;L++){let N=e[L][0],R=e[L][1],j=this.wrap(e[L+1][0]-N)*this.kx,W=(e[L+1][1]-R)*this.ky,et=0;j===0&&W===0||(et=(this.wrap(A[0]-N)*this.kx*j+(A[1]-R)*this.ky*W)/(j*j+W*W),et>1?(N=e[L+1][0],R=e[L+1][1]):et>0&&(N+=j/this.kx*et,R+=W/this.ky*et)),j=this.wrap(A[0]-N)*this.kx,W=(A[1]-R)*this.ky;const at=j*j+W*W;at<S&&(S=at,d=N,m=R,w=L,B=et)}return{point:[d,m],index:w,t:Math.max(0,Math.min(1,B))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}function Zt(a,e){return e[0]-a[0]}function ue(a){return a[1]-a[0]+1}function we(a,e){return a[1]>=a[0]&&a[1]<e}function Ke(a,e){if(a[0]>a[1])return[null,null];const A=ue(a);if(e){if(A===2)return[a,null];const m=Math.floor(A/2);return[[a[0],a[0]+m],[a[0]+m,a[1]]]}if(A===1)return[a,null];const d=Math.floor(A/2)-1;return[[a[0],a[0]+d],[a[0]+d+1,a[1]]]}function yr(a,e){if(!we(e,a.length))return[1/0,1/0,-1/0,-1/0];const A=[1/0,1/0,-1/0,-1/0];for(let d=e[0];d<=e[1];++d)io(A,a[d]);return A}function Pr(a){const e=[1/0,1/0,-1/0,-1/0];for(const A of a)for(const d of A)io(e,d);return e}function or(a){return a[0]!==-1/0&&a[1]!==-1/0&&a[2]!==1/0&&a[3]!==1/0}function qr(a,e,A){if(!or(a)||!or(e))return NaN;let d=0,m=0;return a[2]<e[0]&&(d=e[0]-a[2]),a[0]>e[2]&&(d=a[0]-e[2]),a[1]>e[3]&&(m=a[1]-e[3]),a[3]<e[1]&&(m=e[1]-a[3]),A.distance([0,0],[d,m])}function er(a,e,A){const d=A.pointOnLine(e,a);return A.distance(a,d.point)}function _i(a,e,A,d,m){const w=Math.min(er(a,[A,d],m),er(e,[A,d],m)),B=Math.min(er(A,[a,e],m),er(d,[a,e],m));return Math.min(w,B)}function Mr(a,e,A,d,m){if(!we(e,a.length)||!we(d,A.length))return 1/0;let w=1/0;for(let B=e[0];B<e[1];++B){const S=a[B],L=a[B+1];for(let N=d[0];N<d[1];++N){const R=A[N],j=A[N+1];if(zs(S,L,R,j))return 0;w=Math.min(w,_i(S,L,R,j,m))}}return w}function Nr(a,e,A,d,m){if(!we(e,a.length)||!we(d,A.length))return NaN;let w=1/0;for(let B=e[0];B<=e[1];++B)for(let S=d[0];S<=d[1];++S)if(w=Math.min(w,m.distance(a[B],A[S])),w===0)return w;return w}function Hi(a,e,A){if(is(a,e,!0))return 0;let d=1/0;for(const m of e){const w=m[0],B=m[m.length-1];if(w!==B&&(d=Math.min(d,er(a,[B,w],A)),d===0))return d;const S=A.pointOnLine(m,a);if(d=Math.min(d,A.distance(a,S.point)),d===0)return d}return d}function ws(a,e,A,d){if(!we(e,a.length))return NaN;for(let w=e[0];w<=e[1];++w)if(is(a[w],A,!0))return 0;let m=1/0;for(let w=e[0];w<e[1];++w){const B=a[w],S=a[w+1];for(const L of A)for(let N=0,R=L.length,j=R-1;N<R;j=N++){const W=L[j],et=L[N];if(zs(B,S,W,et))return 0;m=Math.min(m,_i(B,S,W,et,d))}}return m}function zn(a,e){for(const A of a)for(const d of A)if(is(d,e,!0))return!0;return!1}function Ia(a,e,A,d=1/0){const m=Pr(a),w=Pr(e);if(d!==1/0&&qr(m,w,A)>=d)return d;if(no(m,w)){if(zn(a,e))return 0}else if(zn(e,a))return 0;let B=1/0;for(const S of a)for(let L=0,N=S.length,R=N-1;L<N;R=L++){const j=S[R],W=S[L];for(const et of e)for(let at=0,ct=et.length,xt=ct-1;at<ct;xt=at++){const It=et[xt],$t=et[at];if(zs(j,W,It,$t))return 0;B=Math.min(B,_i(j,W,It,$t,A))}}return B}function cl(a,e,A,d,m,w){if(!w)return;const B=qr(yr(d,w),m,A);B<e&&a.push([B,w,[0,0]])}function Ao(a,e,A,d,m,w,B){if(!w||!B)return;const S=qr(yr(d,w),yr(m,B),A);S<e&&a.push([S,w,B])}function lo(a,e,A,d,m=1/0){let w=Math.min(d.distance(a[0],A[0][0]),m);if(w===0)return w;const B=new SA([[0,[0,a.length-1],[0,0]]],Zt),S=Pr(A);for(;B.length>0;){const L=B.pop();if(L[0]>=w)continue;const N=L[1],R=e?50:100;if(ue(N)<=R){if(!we(N,a.length))return NaN;if(e){const j=ws(a,N,A,d);if(isNaN(j)||j===0)return j;w=Math.min(w,j)}else for(let j=N[0];j<=N[1];++j){const W=Hi(a[j],A,d);if(w=Math.min(w,W),w===0)return 0}}else{const j=Ke(N,e);cl(B,w,d,a,S,j[0]),cl(B,w,d,a,S,j[1])}}return w}function la(a,e,A,d,m,w=1/0){let B=Math.min(w,m.distance(a[0],A[0]));if(B===0)return B;const S=new SA([[0,[0,a.length-1],[0,A.length-1]]],Zt);for(;S.length>0;){const L=S.pop();if(L[0]>=B)continue;const N=L[1],R=L[2],j=e?50:100,W=d?50:100;if(ue(N)<=j&&ue(R)<=W){if(!we(N,a.length)&&we(R,A.length))return NaN;let et;if(e&&d)et=Mr(a,N,A,R,m),B=Math.min(B,et);else if(e&&!d){const at=a.slice(N[0],N[1]+1);for(let ct=R[0];ct<=R[1];++ct)if(et=er(A[ct],at,m),B=Math.min(B,et),B===0)return B}else if(!e&&d){const at=A.slice(R[0],R[1]+1);for(let ct=N[0];ct<=N[1];++ct)if(et=er(a[ct],at,m),B=Math.min(B,et),B===0)return B}else et=Nr(a,N,A,R,m),B=Math.min(B,et)}else{const et=Ke(N,e),at=Ke(R,d);Ao(S,B,m,a,A,et[0],at[0]),Ao(S,B,m,a,A,et[0],at[1]),Ao(S,B,m,a,A,et[1],at[0]),Ao(S,B,m,a,A,et[1],at[1])}}return B}function co(a){return a.type==="MultiPolygon"?a.coordinates.map(e=>({type:"Polygon",coordinates:e})):a.type==="MultiLineString"?a.coordinates.map(e=>({type:"LineString",coordinates:e})):a.type==="MultiPoint"?a.coordinates.map(e=>({type:"Point",coordinates:e})):[a]}class _s{constructor(e,A){this.type=he,this.geojson=e,this.geometries=A}static parse(e,A){if(e.length!==2)return A.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Rn(e[1])){const d=e[1];if(d.type==="FeatureCollection")return new _s(d,d.features.map(m=>co(m.geometry)).flat());if(d.type==="Feature")return new _s(d,co(d.geometry));if("type"in d&&"coordinates"in d)return new _s(d,co(d))}return A.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(A,d){const m=A.geometry(),w=m.flat().map(L=>xA([L.x,L.y],A.canonical));if(m.length===0)return NaN;const B=new Dt(w[0][1]);let S=1/0;for(const L of d){switch(L.type){case"Point":S=Math.min(S,la(w,!1,[L.coordinates],!1,B,S));break;case"LineString":S=Math.min(S,la(w,!1,L.coordinates,!0,B,S));break;case"Polygon":S=Math.min(S,lo(w,!1,L.coordinates,B,S))}if(S===0)return S}return S}(e,this.geometries);if(e.geometryType()==="LineString")return function(A,d){const m=A.geometry(),w=m.flat().map(L=>xA([L.x,L.y],A.canonical));if(m.length===0)return NaN;const B=new Dt(w[0][1]);let S=1/0;for(const L of d){switch(L.type){case"Point":S=Math.min(S,la(w,!0,[L.coordinates],!1,B,S));break;case"LineString":S=Math.min(S,la(w,!0,L.coordinates,!0,B,S));break;case"Polygon":S=Math.min(S,lo(w,!0,L.coordinates,B,S))}if(S===0)return S}return S}(e,this.geometries);if(e.geometryType()==="Polygon")return function(A,d){const m=A.geometry();if(m.length===0||m[0].length===0)return NaN;const w=ao(m,0).map(L=>L.map(N=>N.map(R=>xA([R.x,R.y],A.canonical)))),B=new Dt(w[0][0][0][1]);let S=1/0;for(const L of d)for(const N of w){switch(L.type){case"Point":S=Math.min(S,lo([L.coordinates],!1,N,B,S));break;case"LineString":S=Math.min(S,lo(L.coordinates,!0,N,B,S));break;case"Polygon":S=Math.min(S,Ia(N,L.coordinates,B,S))}if(S===0)return S}return S}(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const bs={"==":wA,"!=":_A,">":kc,"<":jl,">=":al,"<=":Dc,array:Qn,at:dA,boolean:Qn,case:eo,coalesce:yA,collator:aa,format:bA,image:Ca,in:pA,"index-of":to,interpolate:fr,"interpolate-hcl":fr,"interpolate-lab":fr,length:Fa,let:Ro,literal:na,match:il,number:Qn,"number-format":oa,object:Qn,slice:zo,step:Ho,string:Qn,"to-boolean":Ki,"to-color":Ki,"to-number":Ki,"to-string":Ki,var:Ja,within:vs,distance:_s};class ci{constructor(e,A,d,m){this.name=e,this.type=A,this._evaluate=d,this.args=m}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,A){const d=e[0],m=ci.definitions[d];if(!m)return A.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const w=Array.isArray(m)?m[0]:m.type,B=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,S=B.filter(([N])=>!Array.isArray(N)||N.length===e.length-1);let L=null;for(const[N,R]of S){L=new $r(A.registry,bn,A.path,null,A.scope);const j=[];let W=!1;for(let et=1;et<e.length;et++){const at=e[et],ct=Array.isArray(N)?N[et-1]:N.type,xt=L.parse(at,1+j.length,ct);if(!xt){W=!0;break}j.push(xt)}if(!W)if(Array.isArray(N)&&N.length!==j.length)L.error(`Expected ${N.length} arguments, but found ${j.length} instead.`);else{for(let et=0;et<j.length;et++){const at=Array.isArray(N)?N[et]:N.type,ct=j[et];L.concat(et+1).checkSubtype(at,ct.type)}if(L.errors.length===0)return new ci(d,w,R,j)}}if(S.length===1)A.errors.push(...L.errors);else{const N=(S.length?S:B).map(([j])=>{return W=j,Array.isArray(W)?`(${W.map(tt).join(", ")})`:`(${tt(W.type)}...)`;var W}).join(" | "),R=[];for(let j=1;j<e.length;j++){const W=A.parse(e[j],1+R.length);if(!W)return null;R.push(tt(W.type))}A.error(`Expected arguments of type ${N}, but found (${R.join(", ")}) instead.`)}return null}static register(e,A){ci.definitions=A;for(const d in A)e[d]=ci}}function Ko(a,[e,A,d,m]){e=e.evaluate(a),A=A.evaluate(a),d=d.evaluate(a);const w=m?m.evaluate(a):1,B=Vl(e,A,d,w);if(B)throw new wi(B);return new vr(e/255,A/255,d/255,w,!1)}function $o(a,e){return a in e}function uo(a,e){const A=e[a];return A===void 0?null:A}function Vs(a){return{type:a}}function bn(a){if(a instanceof Ja)return bn(a.boundExpression);if(a instanceof ci&&a.name==="error"||a instanceof aa||a instanceof vs||a instanceof _s)return!1;const e=a instanceof Ki||a instanceof Qn;let A=!0;return a.eachChild(d=>{A=e?A&&bn(d):A&&d instanceof na}),!!A&&IA(a)&&qo(a,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function IA(a){if(a instanceof ci&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof vs||a instanceof _s)return!1;let e=!0;return a.eachChild(A=>{e&&!IA(A)&&(e=!1)}),e}function Ea(a){if(a instanceof ci&&a.name==="feature-state")return!1;let e=!0;return a.eachChild(A=>{e&&!Ea(A)&&(e=!1)}),e}function qo(a,e){if(a instanceof ci&&e.indexOf(a.name)>=0)return!1;let A=!0;return a.eachChild(d=>{A&&!qo(d,e)&&(A=!1)}),A}function ns(a){return{result:"success",value:a}}function js(a){return{result:"error",value:a}}function Ks(a){return a["property-type"]==="data-driven"||a["property-type"]==="cross-faded-data-driven"}function Wl(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function $s(a){return!!a.expression&&a.expression.interpolated}function Lr(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function In(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function qs(a){return a}function Hn(a,e){const A=e.type==="color",d=a.stops&&typeof a.stops[0][0]=="object",m=d||!(d||a.property!==void 0),w=a.type||($s(e)?"exponential":"interval");if(A||e.type==="padding"){const R=A?vr.parse:li.parse;(a=Xe({},a)).stops&&(a.stops=a.stops.map(j=>[j[0],R(j[1])])),a.default=R(a.default?a.default:e.default)}if(a.colorSpace&&(B=a.colorSpace)!=="rgb"&&B!=="hcl"&&B!=="lab")throw new Error(`Unknown color space: "${a.colorSpace}"`);var B;let S,L,N;if(w==="exponential")S=po;else if(w==="interval")S=xs;else if(w==="categorical"){S=ho,L=Object.create(null);for(const R of a.stops)L[R[0]]=R[1];N=typeof a.stops[0][0]}else{if(w!=="identity")throw new Error(`Unknown function type "${w}"`);S=fo}if(d){const R={},j=[];for(let at=0;at<a.stops.length;at++){const ct=a.stops[at],xt=ct[0].zoom;R[xt]===void 0&&(R[xt]={zoom:xt,type:a.type,property:a.property,default:a.default,stops:[]},j.push(xt)),R[xt].stops.push([ct[0].value,ct[1]])}const W=[];for(const at of j)W.push([R[at].zoom,Hn(R[at],e)]);const et={name:"linear"};return{kind:"composite",interpolationType:et,interpolationFactor:fr.interpolationFactor.bind(void 0,et),zoomStops:W.map(at=>at[0]),evaluate:({zoom:at},ct)=>po({stops:W,base:a.base},e,at).evaluate(at,ct)}}if(m){const R=w==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:R,interpolationFactor:fr.interpolationFactor.bind(void 0,R),zoomStops:a.stops.map(j=>j[0]),evaluate:({zoom:j})=>S(a,e,j,L,N)}}return{kind:"source",evaluate(R,j){const W=j&&j.properties?j.properties[a.property]:void 0;return W===void 0?Vn(a.default,e.default):S(a,e,W,L,N)}}}function Vn(a,e,A){return a!==void 0?a:e!==void 0?e:A!==void 0?A:void 0}function ho(a,e,A,d,m){return Vn(typeof A===m?d[A]:void 0,a.default,e.default)}function xs(a,e,A){if(Lr(A)!=="number")return Vn(a.default,e.default);const d=a.stops.length;if(d===1||A<=a.stops[0][0])return a.stops[0][1];if(A>=a.stops[d-1][0])return a.stops[d-1][1];const m=fA(a.stops.map(w=>w[0]),A);return a.stops[m][1]}function po(a,e,A){const d=a.base!==void 0?a.base:1;if(Lr(A)!=="number")return Vn(a.default,e.default);const m=a.stops.length;if(m===1||A<=a.stops[0][0])return a.stops[0][1];if(A>=a.stops[m-1][0])return a.stops[m-1][1];const w=fA(a.stops.map(R=>R[0]),A),B=function(R,j,W,et){const at=et-W,ct=R-W;return at===0?0:j===1?ct/at:(Math.pow(j,ct)-1)/(Math.pow(j,at)-1)}(A,d,a.stops[w][0],a.stops[w+1][0]),S=a.stops[w][1],L=a.stops[w+1][1],N=on[e.type]||qs;return typeof S.evaluate=="function"?{evaluate(...R){const j=S.evaluate.apply(void 0,R),W=L.evaluate.apply(void 0,R);if(j!==void 0&&W!==void 0)return N(j,W,B,a.colorSpace)}}:N(S,L,B,a.colorSpace)}function fo(a,e,A){switch(e.type){case"color":A=vr.parse(A);break;case"formatted":A=yi.fromString(A.toString());break;case"resolvedImage":A=Ln.fromString(A.toString());break;case"padding":A=li.parse(A);break;default:Lr(A)===e.type||e.type==="enum"&&e.values[A]||(A=void 0)}return Vn(A,a.default,e.default)}ci.register(bs,{error:[{kind:"error"},[sr],(a,[e])=>{throw new wi(e.evaluate(a))}],typeof:[sr,[ke],(a,[e])=>tt(ki(e.evaluate(a)))],"to-rgba":[q(he,4),[xr],(a,[e])=>{const[A,d,m,w]=e.evaluate(a).rgb;return[255*A,255*d,255*m,w]}],rgb:[xr,[he,he,he],Ko],rgba:[xr,[he,he,he,he],Ko],has:{type:Me,overloads:[[[sr],(a,[e])=>$o(e.evaluate(a),a.properties())],[[sr,Gr],(a,[e,A])=>$o(e.evaluate(a),A.evaluate(a))]]},get:{type:ke,overloads:[[[sr],(a,[e])=>uo(e.evaluate(a),a.properties())],[[sr,Gr],(a,[e,A])=>uo(e.evaluate(a),A.evaluate(a))]]},"feature-state":[ke,[sr],(a,[e])=>uo(e.evaluate(a),a.featureState||{})],properties:[Gr,[],a=>a.properties()],"geometry-type":[sr,[],a=>a.geometryType()],id:[ke,[],a=>a.id()],zoom:[he,[],a=>a.globals.zoom],"heatmap-density":[he,[],a=>a.globals.heatmapDensity||0],"line-progress":[he,[],a=>a.globals.lineProgress||0],accumulated:[ke,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[he,Vs(he),(a,e)=>{let A=0;for(const d of e)A+=d.evaluate(a);return A}],"*":[he,Vs(he),(a,e)=>{let A=1;for(const d of e)A*=d.evaluate(a);return A}],"-":{type:he,overloads:[[[he,he],(a,[e,A])=>e.evaluate(a)-A.evaluate(a)],[[he],(a,[e])=>-e.evaluate(a)]]},"/":[he,[he,he],(a,[e,A])=>e.evaluate(a)/A.evaluate(a)],"%":[he,[he,he],(a,[e,A])=>e.evaluate(a)%A.evaluate(a)],ln2:[he,[],()=>Math.LN2],pi:[he,[],()=>Math.PI],e:[he,[],()=>Math.E],"^":[he,[he,he],(a,[e,A])=>Math.pow(e.evaluate(a),A.evaluate(a))],sqrt:[he,[he],(a,[e])=>Math.sqrt(e.evaluate(a))],log10:[he,[he],(a,[e])=>Math.log(e.evaluate(a))/Math.LN10],ln:[he,[he],(a,[e])=>Math.log(e.evaluate(a))],log2:[he,[he],(a,[e])=>Math.log(e.evaluate(a))/Math.LN2],sin:[he,[he],(a,[e])=>Math.sin(e.evaluate(a))],cos:[he,[he],(a,[e])=>Math.cos(e.evaluate(a))],tan:[he,[he],(a,[e])=>Math.tan(e.evaluate(a))],asin:[he,[he],(a,[e])=>Math.asin(e.evaluate(a))],acos:[he,[he],(a,[e])=>Math.acos(e.evaluate(a))],atan:[he,[he],(a,[e])=>Math.atan(e.evaluate(a))],min:[he,Vs(he),(a,e)=>Math.min(...e.map(A=>A.evaluate(a)))],max:[he,Vs(he),(a,e)=>Math.max(...e.map(A=>A.evaluate(a)))],abs:[he,[he],(a,[e])=>Math.abs(e.evaluate(a))],round:[he,[he],(a,[e])=>{const A=e.evaluate(a);return A<0?-Math.round(-A):Math.round(A)}],floor:[he,[he],(a,[e])=>Math.floor(e.evaluate(a))],ceil:[he,[he],(a,[e])=>Math.ceil(e.evaluate(a))],"filter-==":[Me,[sr,ke],(a,[e,A])=>a.properties()[e.value]===A.value],"filter-id-==":[Me,[ke],(a,[e])=>a.id()===e.value],"filter-type-==":[Me,[sr],(a,[e])=>a.geometryType()===e.value],"filter-<":[Me,[sr,ke],(a,[e,A])=>{const d=a.properties()[e.value],m=A.value;return typeof d==typeof m&&d<m}],"filter-id-<":[Me,[ke],(a,[e])=>{const A=a.id(),d=e.value;return typeof A==typeof d&&A<d}],"filter->":[Me,[sr,ke],(a,[e,A])=>{const d=a.properties()[e.value],m=A.value;return typeof d==typeof m&&d>m}],"filter-id->":[Me,[ke],(a,[e])=>{const A=a.id(),d=e.value;return typeof A==typeof d&&A>d}],"filter-<=":[Me,[sr,ke],(a,[e,A])=>{const d=a.properties()[e.value],m=A.value;return typeof d==typeof m&&d<=m}],"filter-id-<=":[Me,[ke],(a,[e])=>{const A=a.id(),d=e.value;return typeof A==typeof d&&A<=d}],"filter->=":[Me,[sr,ke],(a,[e,A])=>{const d=a.properties()[e.value],m=A.value;return typeof d==typeof m&&d>=m}],"filter-id->=":[Me,[ke],(a,[e])=>{const A=a.id(),d=e.value;return typeof A==typeof d&&A>=d}],"filter-has":[Me,[ke],(a,[e])=>e.value in a.properties()],"filter-has-id":[Me,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[Me,[q(sr)],(a,[e])=>e.value.indexOf(a.geometryType())>=0],"filter-id-in":[Me,[q(ke)],(a,[e])=>e.value.indexOf(a.id())>=0],"filter-in-small":[Me,[sr,q(ke)],(a,[e,A])=>A.value.indexOf(a.properties()[e.value])>=0],"filter-in-large":[Me,[sr,q(ke)],(a,[e,A])=>function(d,m,w,B){for(;w<=B;){const S=w+B>>1;if(m[S]===d)return!0;m[S]>d?B=S-1:w=S+1}return!1}(a.properties()[e.value],A.value,0,A.value.length-1)],all:{type:Me,overloads:[[[Me,Me],(a,[e,A])=>e.evaluate(a)&&A.evaluate(a)],[Vs(Me),(a,e)=>{for(const A of e)if(!A.evaluate(a))return!1;return!0}]]},any:{type:Me,overloads:[[[Me,Me],(a,[e,A])=>e.evaluate(a)||A.evaluate(a)],[Vs(Me),(a,e)=>{for(const A of e)if(A.evaluate(a))return!0;return!1}]]},"!":[Me,[Me],(a,[e])=>!e.evaluate(a)],"is-supported-script":[Me,[sr],(a,[e])=>{const A=a.globals&&a.globals.isSupportedScript;return!A||A(e.evaluate(a))}],upcase:[sr,[sr],(a,[e])=>e.evaluate(a).toUpperCase()],downcase:[sr,[sr],(a,[e])=>e.evaluate(a).toLowerCase()],concat:[sr,Vs(ke),(a,e)=>e.map(A=>vi(A.evaluate(a))).join("")],"resolved-locale":[sr,[Fi],(a,[e])=>e.evaluate(a).resolvedLocale()]});class ca{constructor(e,A){var d;this.expression=e,this._warningHistory={},this._evaluator=new en,this._defaultValue=A?(d=A).type==="color"&&In(d.default)?new vr(0,0,0,0):d.type==="color"?vr.parse(d.default)||null:d.type==="padding"?li.parse(d.default)||null:d.type==="variableAnchorOffsetCollection"?tn.parse(d.default)||null:d.default===void 0?null:d.default:null,this._enumValues=A&&A.type==="enum"?A.values:null}evaluateWithoutErrorHandling(e,A,d,m,w,B){return this._evaluator.globals=e,this._evaluator.feature=A,this._evaluator.featureState=d,this._evaluator.canonical=m,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=B,this.expression.evaluate(this._evaluator)}evaluate(e,A,d,m,w,B){this._evaluator.globals=e,this._evaluator.feature=A||null,this._evaluator.featureState=d||null,this._evaluator.canonical=m,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=B||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new wi(`Expected value to be one of ${Object.keys(this._enumValues).map(L=>JSON.stringify(L)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function jn(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in bs}function Bs(a,e){const A=new $r(bs,bn,[],e?function(m){const w={color:xr,string:sr,number:he,enum:sr,boolean:Me,formatted:zr,padding:Dr,resolvedImage:pt,variableAnchorOffsetCollection:G};return m.type==="array"?q(w[m.value]||ke,m.length):w[m.type]}(e):void 0),d=A.parse(a,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?ns(new ca(d,e)):js(A.errors)}class Ta{constructor(e,A){this.kind=e,this._styleExpression=A,this.isStateDependent=e!=="constant"&&!Ea(A.expression)}evaluateWithoutErrorHandling(e,A,d,m,w,B){return this._styleExpression.evaluateWithoutErrorHandling(e,A,d,m,w,B)}evaluate(e,A,d,m,w,B){return this._styleExpression.evaluate(e,A,d,m,w,B)}}class go{constructor(e,A,d,m){this.kind=e,this.zoomStops=d,this._styleExpression=A,this.isStateDependent=e!=="camera"&&!Ea(A.expression),this.interpolationType=m}evaluateWithoutErrorHandling(e,A,d,m,w,B){return this._styleExpression.evaluateWithoutErrorHandling(e,A,d,m,w,B)}evaluate(e,A,d,m,w,B){return this._styleExpression.evaluate(e,A,d,m,w,B)}interpolationFactor(e,A,d){return this.interpolationType?fr.interpolationFactor(this.interpolationType,e,A,d):0}}function Gs(a,e){const A=Bs(a,e);if(A.result==="error")return A;const d=A.value.expression,m=IA(d);if(!m&&!Ks(e))return js([new ur("","data expressions not supported")]);const w=qo(d,["zoom"]);if(!w&&!Wl(e))return js([new ur("","zoom expressions not supported")]);const B=$i(d);return B||w?B instanceof ur?js([B]):B instanceof fr&&!$s(e)?js([new ur("",'"interpolate" expressions cannot be used with this property')]):ns(B?new go(m?"camera":"composite",A.value,B.labels,B instanceof fr?B.interpolation:void 0):new Ta(m?"constant":"source",A.value)):js([new ur("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Kn{constructor(e,A){this._parameters=e,this._specification=A,Xe(this,Hn(this._parameters,this._specification))}static deserialize(e){return new Kn(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function $i(a){let e=null;if(a instanceof Ro)e=$i(a.result);else if(a instanceof yA){for(const A of a.args)if(e=$i(A),e)break}else(a instanceof Ho||a instanceof fr)&&a.input instanceof ci&&a.input.name==="zoom"&&(e=a);return e instanceof ur||a.eachChild(A=>{const d=$i(A);d instanceof ur?e=d:!e&&d?e=new ur("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&d&&e!==d&&(e=new ur("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function ln(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const e of a.slice(1))if(!ln(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const ua={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ai(a){if(a==null)return{filter:()=>!0,needGeometry:!1};ln(a)||(a=Pi(a));const e=Bs(a,ua);if(e.result==="error")throw new Error(e.value.map(A=>`${A.key}: ${A.message}`).join(", "));return{filter:(A,d,m)=>e.value.evaluate(A,d,{},m),needGeometry:gi(a)}}function fi(a,e){return a<e?-1:a>e?1:0}function gi(a){if(!Array.isArray(a))return!1;if(a[0]==="within"||a[0]==="distance")return!0;for(let e=1;e<a.length;e++)if(gi(a[e]))return!0;return!1}function Pi(a){if(!a)return!0;const e=a[0];return a.length<=1?e!=="any":e==="=="?ss(a[1],a[2],"=="):e==="!="?Go(ss(a[1],a[2],"==")):e==="<"||e===">"||e==="<="||e===">="?ss(a[1],a[2],e):e==="any"?(A=a.slice(1),["any"].concat(A.map(Pi))):e==="all"?["all"].concat(a.slice(1).map(Pi)):e==="none"?["all"].concat(a.slice(1).map(Pi).map(Go)):e==="in"?Ua(a[1],a.slice(2)):e==="!in"?Go(Ua(a[1],a.slice(2))):e==="has"?Pa(a[1]):e!=="!has"||Go(Pa(a[1]));var A}function ss(a,e,A){switch(a){case"$type":return[`filter-type-${A}`,e];case"$id":return[`filter-id-${A}`,e];default:return[`filter-${A}`,a,e]}}function Ua(a,e){if(e.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(A=>typeof A!=typeof e[0])?["filter-in-large",a,["literal",e.sort(fi)]]:["filter-in-small",a,["literal",e]]}}function Pa(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function Go(a){return["!",a]}function mo(a){const e=typeof a;if(e==="number"||e==="boolean"||e==="string"||a==null)return JSON.stringify(a);if(Array.isArray(a)){let m="[";for(const w of a)m+=`${mo(w)},`;return`${m}]`}const A=Object.keys(a).sort();let d="{";for(let m=0;m<A.length;m++)d+=`${JSON.stringify(A[m])}:${mo(a[A[m]])},`;return`${d}}`}function $u(a){let e="";for(const A of dr)e+=`/${mo(a[A])}`;return e}function ul(a){const e=a.value;return e?[new pe(a.key,e,"constants have been deprecated as of v8")]:[]}function Ii(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function ha(a){if(Array.isArray(a))return a.map(ha);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const e={};for(const A in a)e[A]=ha(a[A]);return e}return Ii(a)}function $n(a){const e=a.key,A=a.value,d=a.valueSpec||{},m=a.objectElementValidators||{},w=a.style,B=a.styleSpec,S=a.validateSpec;let L=[];const N=Lr(A);if(N!=="object")return[new pe(e,A,`object expected, ${N} found`)];for(const R in A){const j=R.split(".")[0],W=d[j]||d["*"];let et;if(m[j])et=m[j];else if(d[j])et=S;else if(m["*"])et=m["*"];else{if(!d["*"]){L.push(new pe(e,A[R],`unknown property "${R}"`));continue}et=S}L=L.concat(et({key:(e&&`${e}.`)+R,value:A[R],valueSpec:W,style:w,styleSpec:B,object:A,objectKey:R,validateSpec:S},A))}for(const R in d)m[R]||d[R].required&&d[R].default===void 0&&A[R]===void 0&&L.push(new pe(e,A,`missing required property "${R}"`));return L}function EA(a){const e=a.value,A=a.valueSpec,d=a.style,m=a.styleSpec,w=a.key,B=a.arrayElementValidator||a.validateSpec;if(Lr(e)!=="array")return[new pe(w,e,`array expected, ${Lr(e)} found`)];if(A.length&&e.length!==A.length)return[new pe(w,e,`array length ${A.length} expected, length ${e.length} found`)];if(A["min-length"]&&e.length<A["min-length"])return[new pe(w,e,`array length at least ${A["min-length"]} expected, length ${e.length} found`)];let S={type:A.value,values:A.values};m.$version<7&&(S.function=A.function),Lr(A.value)==="object"&&(S=A.value);let L=[];for(let N=0;N<e.length;N++)L=L.concat(B({array:e,arrayIndex:N,value:e[N],valueSpec:S,validateSpec:a.validateSpec,style:d,styleSpec:m,key:`${w}[${N}]`}));return L}function TA(a){const e=a.key,A=a.value,d=a.valueSpec;let m=Lr(A);return m==="number"&&A!=A&&(m="NaN"),m!=="number"?[new pe(e,A,`number expected, ${m} found`)]:"minimum"in d&&A<d.minimum?[new pe(e,A,`${A} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&A>d.maximum?[new pe(e,A,`${A} is greater than the maximum value ${d.maximum}`)]:[]}function En(a){const e=a.valueSpec,A=Ii(a.value.type);let d,m,w,B={};const S=A!=="categorical"&&a.value.property===void 0,L=!S,N=Lr(a.value.stops)==="array"&&Lr(a.value.stops[0])==="array"&&Lr(a.value.stops[0][0])==="object",R=$n({key:a.key,value:a.value,valueSpec:a.styleSpec.function,validateSpec:a.validateSpec,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(et){if(A==="identity")return[new pe(et.key,et.value,'identity function may not have a "stops" property')];let at=[];const ct=et.value;return at=at.concat(EA({key:et.key,value:ct,valueSpec:et.valueSpec,validateSpec:et.validateSpec,style:et.style,styleSpec:et.styleSpec,arrayElementValidator:j})),Lr(ct)==="array"&&ct.length===0&&at.push(new pe(et.key,ct,"array must have at least one stop")),at},default:function(et){return et.validateSpec({key:et.key,value:et.value,valueSpec:e,validateSpec:et.validateSpec,style:et.style,styleSpec:et.styleSpec})}}});return A==="identity"&&S&&R.push(new pe(a.key,a.value,'missing required property "property"')),A==="identity"||a.value.stops||R.push(new pe(a.key,a.value,'missing required property "stops"')),A==="exponential"&&a.valueSpec.expression&&!$s(a.valueSpec)&&R.push(new pe(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(L&&!Ks(a.valueSpec)?R.push(new pe(a.key,a.value,"property functions not supported")):S&&!Wl(a.valueSpec)&&R.push(new pe(a.key,a.value,"zoom functions not supported"))),A!=="categorical"&&!N||a.value.property!==void 0||R.push(new pe(a.key,a.value,'"property" property is required')),R;function j(et){let at=[];const ct=et.value,xt=et.key;if(Lr(ct)!=="array")return[new pe(xt,ct,`array expected, ${Lr(ct)} found`)];if(ct.length!==2)return[new pe(xt,ct,`array length 2 expected, length ${ct.length} found`)];if(N){if(Lr(ct[0])!=="object")return[new pe(xt,ct,`object expected, ${Lr(ct[0])} found`)];if(ct[0].zoom===void 0)return[new pe(xt,ct,"object stop key must have zoom")];if(ct[0].value===void 0)return[new pe(xt,ct,"object stop key must have value")];if(w&&w>Ii(ct[0].zoom))return[new pe(xt,ct[0].zoom,"stop zoom values must appear in ascending order")];Ii(ct[0].zoom)!==w&&(w=Ii(ct[0].zoom),m=void 0,B={}),at=at.concat($n({key:`${xt}[0]`,value:ct[0],valueSpec:{zoom:{}},validateSpec:et.validateSpec,style:et.style,styleSpec:et.styleSpec,objectElementValidators:{zoom:TA,value:W}}))}else at=at.concat(W({key:`${xt}[0]`,value:ct[0],valueSpec:{},validateSpec:et.validateSpec,style:et.style,styleSpec:et.styleSpec},ct));return jn(ha(ct[1]))?at.concat([new pe(`${xt}[1]`,ct[1],"expressions are not allowed in function stops.")]):at.concat(et.validateSpec({key:`${xt}[1]`,value:ct[1],valueSpec:e,validateSpec:et.validateSpec,style:et.style,styleSpec:et.styleSpec}))}function W(et,at){const ct=Lr(et.value),xt=Ii(et.value),It=et.value!==null?et.value:at;if(d){if(ct!==d)return[new pe(et.key,It,`${ct} stop domain type must match previous stop domain type ${d}`)]}else d=ct;if(ct!=="number"&&ct!=="string"&&ct!=="boolean")return[new pe(et.key,It,"stop domain value must be a number, string, or boolean")];if(ct!=="number"&&A!=="categorical"){let $t=`number expected, ${ct} found`;return Ks(e)&&A===void 0&&($t+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new pe(et.key,It,$t)]}return A!=="categorical"||ct!=="number"||isFinite(xt)&&Math.floor(xt)===xt?A!=="categorical"&&ct==="number"&&m!==void 0&&xt<m?[new pe(et.key,It,"stop domain values must appear in ascending order")]:(m=xt,A==="categorical"&&xt in B?[new pe(et.key,It,"stop domain values must be unique")]:(B[xt]=!0,[])):[new pe(et.key,It,`integer expected, found ${xt}`)]}}function qi(a){const e=(a.expressionContext==="property"?Gs:Bs)(ha(a.value),a.valueSpec);if(e.result==="error")return e.value.map(d=>new pe(`${a.key}${d.key}`,a.value,d.message));const A=e.value.expression||e.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!A.outputDefined())return[new pe(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!Ea(A))return[new pe(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter"&&!Ea(A))return[new pe(a.key,a.value,'"feature-state" data expressions are not supported with filters.')];if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!qo(A,["zoom","feature-state"]))return[new pe(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!IA(A))return[new pe(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function La(a){const e=a.key,A=a.value,d=a.valueSpec,m=[];return Array.isArray(d.values)?d.values.indexOf(Ii(A))===-1&&m.push(new pe(e,A,`expected one of [${d.values.join(", ")}], ${JSON.stringify(A)} found`)):Object.keys(d.values).indexOf(Ii(A))===-1&&m.push(new pe(e,A,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(A)} found`)),m}function Wo(a){return ln(ha(a.value))?qi(Xe({},a,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Xl(a)}function Xl(a){const e=a.value,A=a.key;if(Lr(e)!=="array")return[new pe(A,e,`array expected, ${Lr(e)} found`)];const d=a.styleSpec;let m,w=[];if(e.length<1)return[new pe(A,e,"filter array must have at least 1 element")];switch(w=w.concat(La({key:`${A}[0]`,value:e[0],valueSpec:d.filter_operator,style:a.style,styleSpec:a.styleSpec})),Ii(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&Ii(e[1])==="$type"&&w.push(new pe(A,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&w.push(new pe(A,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(m=Lr(e[1]),m!=="string"&&w.push(new pe(`${A}[1]`,e[1],`string expected, ${m} found`)));for(let B=2;B<e.length;B++)m=Lr(e[B]),Ii(e[1])==="$type"?w=w.concat(La({key:`${A}[${B}]`,value:e[B],valueSpec:d.geometry_type,style:a.style,styleSpec:a.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&w.push(new pe(`${A}[${B}]`,e[B],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let B=1;B<e.length;B++)w=w.concat(Xl({key:`${A}[${B}]`,value:e[B],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":m=Lr(e[1]),e.length!==2?w.push(new pe(A,e,`filter array for "${e[0]}" operator must have 2 elements`)):m!=="string"&&w.push(new pe(`${A}[1]`,e[1],`string expected, ${m} found`))}return w}function UA(a,e){const A=a.key,d=a.validateSpec,m=a.style,w=a.styleSpec,B=a.value,S=a.objectKey,L=w[`${e}_${a.layerType}`];if(!L)return[];const N=S.match(/^(.*)-transition$/);if(e==="paint"&&N&&L[N[1]]&&L[N[1]].transition)return d({key:A,value:B,valueSpec:w.transition,style:m,styleSpec:w});const R=a.valueSpec||L[S];if(!R)return[new pe(A,B,`unknown property "${S}"`)];let j;if(Lr(B)==="string"&&Ks(R)&&!R.tokens&&(j=/^{([^}]+)}$/.exec(B)))return[new pe(A,B,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(j[1])} }\`.`)];const W=[];return a.layerType==="symbol"&&(S==="text-field"&&m&&!m.glyphs&&W.push(new pe(A,B,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&In(ha(B))&&Ii(B.type)==="identity"&&W.push(new pe(A,B,'"text-font" does not support identity functions'))),W.concat(d({key:a.key,value:B,valueSpec:R,style:m,styleSpec:w,expressionContext:"property",propertyType:e,propertyKey:S}))}function Xo(a){return UA(a,"paint")}function hl(a){return UA(a,"layout")}function Oc(a){let e=[];const A=a.value,d=a.key,m=a.style,w=a.styleSpec;A.type||A.ref||e.push(new pe(d,A,'either "type" or "ref" is required'));let B=Ii(A.type);const S=Ii(A.ref);if(A.id){const L=Ii(A.id);for(let N=0;N<a.arrayIndex;N++){const R=m.layers[N];Ii(R.id)===L&&e.push(new pe(d,A.id,`duplicate layer id "${A.id}", previously used at line ${R.id.__line__}`))}}if("ref"in A){let L;["type","source","source-layer","filter","layout"].forEach(N=>{N in A&&e.push(new pe(d,A[N],`"${N}" is prohibited for ref layers`))}),m.layers.forEach(N=>{Ii(N.id)===S&&(L=N)}),L?L.ref?e.push(new pe(d,A.ref,"ref cannot reference another ref layer")):B=Ii(L.type):e.push(new pe(d,A.ref,`ref layer "${S}" not found`))}else if(B!=="background")if(A.source){const L=m.sources&&m.sources[A.source],N=L&&Ii(L.type);L?N==="vector"&&B==="raster"?e.push(new pe(d,A.source,`layer "${A.id}" requires a raster source`)):N!=="raster-dem"&&B==="hillshade"?e.push(new pe(d,A.source,`layer "${A.id}" requires a raster-dem source`)):N==="raster"&&B!=="raster"?e.push(new pe(d,A.source,`layer "${A.id}" requires a vector source`)):N!=="vector"||A["source-layer"]?N==="raster-dem"&&B!=="hillshade"?e.push(new pe(d,A.source,"raster-dem source can only be used with layer type 'hillshade'.")):B!=="line"||!A.paint||!A.paint["line-gradient"]||N==="geojson"&&L.lineMetrics||e.push(new pe(d,A,`layer "${A.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new pe(d,A,`layer "${A.id}" must specify a "source-layer"`)):e.push(new pe(d,A.source,`source "${A.source}" not found`))}else e.push(new pe(d,A,'missing required property "source"'));return e=e.concat($n({key:d,value:A,valueSpec:w.layer,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,objectElementValidators:{"*":()=>[],type:()=>a.validateSpec({key:`${d}.type`,value:A.type,valueSpec:w.layer.type,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,object:A,objectKey:"type"}),filter:Wo,layout:L=>$n({layer:A,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,validateSpec:L.validateSpec,objectElementValidators:{"*":N=>hl(Xe({layerType:B},N))}}),paint:L=>$n({layer:A,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,validateSpec:L.validateSpec,objectElementValidators:{"*":N=>Xo(Xe({layerType:B},N))}})}})),e}function da(a){const e=a.value,A=a.key,d=Lr(e);return d!=="string"?[new pe(A,e,`string expected, ${d} found`)]:[]}const Zl={promoteId:function({key:a,value:e}){if(Lr(e)==="string")return da({key:a,value:e});{const A=[];for(const d in e)A.push(...da({key:`${a}.${d}`,value:e[d]}));return A}}};function PA(a){const e=a.value,A=a.key,d=a.styleSpec,m=a.style,w=a.validateSpec;if(!e.type)return[new pe(A,e,'"type" is required')];const B=Ii(e.type);let S;switch(B){case"vector":case"raster":return S=$n({key:A,value:e,valueSpec:d[`source_${B.replace("-","_")}`],style:a.style,styleSpec:d,objectElementValidators:Zl,validateSpec:w}),S;case"raster-dem":return S=function(L){var N;const R=(N=L.sourceName)!==null&&N!==void 0?N:"",j=L.value,W=L.styleSpec,et=W.source_raster_dem,at=L.style;let ct=[];const xt=Lr(j);if(j===void 0)return ct;if(xt!=="object")return ct.push(new pe("source_raster_dem",j,`object expected, ${xt} found`)),ct;const It=Ii(j.encoding)==="custom",$t=["redFactor","greenFactor","blueFactor","baseShift"],Qt=L.value.encoding?`"${L.value.encoding}"`:"Default";for(const Vt in j)!It&&$t.includes(Vt)?ct.push(new pe(Vt,j[Vt],`In "${R}": "${Vt}" is only valid when "encoding" is set to "custom". ${Qt} encoding found`)):et[Vt]?ct=ct.concat(L.validateSpec({key:Vt,value:j[Vt],valueSpec:et[Vt],validateSpec:L.validateSpec,style:at,styleSpec:W})):ct.push(new pe(Vt,j[Vt],`unknown property "${Vt}"`));return ct}({sourceName:A,value:e,style:a.style,styleSpec:d,validateSpec:w}),S;case"geojson":if(S=$n({key:A,value:e,valueSpec:d.source_geojson,style:m,styleSpec:d,validateSpec:w,objectElementValidators:Zl}),e.cluster)for(const L in e.clusterProperties){const[N,R]=e.clusterProperties[L],j=typeof N=="string"?[N,["accumulated"],["get",L]]:N;S.push(...qi({key:`${A}.${L}.map`,value:R,validateSpec:w,expressionContext:"cluster-map"})),S.push(...qi({key:`${A}.${L}.reduce`,value:j,validateSpec:w,expressionContext:"cluster-reduce"}))}return S;case"video":return $n({key:A,value:e,valueSpec:d.source_video,style:m,validateSpec:w,styleSpec:d});case"image":return $n({key:A,value:e,valueSpec:d.source_image,style:m,validateSpec:w,styleSpec:d});case"canvas":return[new pe(A,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return La({key:`${A}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,validateSpec:w,styleSpec:d})}}function dl(a){const e=a.value,A=a.styleSpec,d=A.light,m=a.style;let w=[];const B=Lr(e);if(e===void 0)return w;if(B!=="object")return w=w.concat([new pe("light",e,`object expected, ${B} found`)]),w;for(const S in e){const L=S.match(/^(.*)-transition$/);w=w.concat(L&&d[L[1]]&&d[L[1]].transition?a.validateSpec({key:S,value:e[S],valueSpec:A.transition,validateSpec:a.validateSpec,style:m,styleSpec:A}):d[S]?a.validateSpec({key:S,value:e[S],valueSpec:d[S],validateSpec:a.validateSpec,style:m,styleSpec:A}):[new pe(S,e[S],`unknown property "${S}"`)])}return w}function Rc(a){const e=a.value,A=a.styleSpec,d=A.sky,m=a.style,w=Lr(e);if(e===void 0)return[];if(w!=="object")return[new pe("sky",e,`object expected, ${w} found`)];let B=[];for(const S in e)B=B.concat(d[S]?a.validateSpec({key:S,value:e[S],valueSpec:d[S],style:m,styleSpec:A}):[new pe(S,e[S],`unknown property "${S}"`)]);return B}function qu(a){const e=a.value,A=a.styleSpec,d=A.terrain,m=a.style;let w=[];const B=Lr(e);if(e===void 0)return w;if(B!=="object")return w=w.concat([new pe("terrain",e,`object expected, ${B} found`)]),w;for(const S in e)w=w.concat(d[S]?a.validateSpec({key:S,value:e[S],valueSpec:d[S],validateSpec:a.validateSpec,style:m,styleSpec:A}):[new pe(S,e[S],`unknown property "${S}"`)]);return w}function zc(a){let e=[];const A=a.value,d=a.key;if(Array.isArray(A)){const m=[],w=[];for(const B in A)A[B].id&&m.includes(A[B].id)&&e.push(new pe(d,A,`all the sprites' ids must be unique, but ${A[B].id} is duplicated`)),m.push(A[B].id),A[B].url&&w.includes(A[B].url)&&e.push(new pe(d,A,`all the sprites' URLs must be unique, but ${A[B].url} is duplicated`)),w.push(A[B].url),e=e.concat($n({key:`${d}[${B}]`,value:A[B],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:a.validateSpec}));return e}return da({key:d,value:A})}const Hc={"*":()=>[],array:EA,boolean:function(a){const e=a.value,A=a.key,d=Lr(e);return d!=="boolean"?[new pe(A,e,`boolean expected, ${d} found`)]:[]},number:TA,color:function(a){const e=a.key,A=a.value,d=Lr(A);return d!=="string"?[new pe(e,A,`color expected, ${d} found`)]:vr.parse(String(A))?[]:[new pe(e,A,`color expected, "${A}" found`)]},constants:ul,enum:La,filter:Wo,function:En,layer:Oc,object:$n,source:PA,light:dl,sky:Rc,terrain:qu,projection:function(a){const e=a.value,A=a.styleSpec,d=A.projection,m=a.style,w=Lr(e);if(e===void 0)return[];if(w!=="object")return[new pe("projection",e,`object expected, ${w} found`)];let B=[];for(const S in e)B=B.concat(d[S]?a.validateSpec({key:S,value:e[S],valueSpec:d[S],style:m,styleSpec:A}):[new pe(S,e[S],`unknown property "${S}"`)]);return B},string:da,formatted:function(a){return da(a).length===0?[]:qi(a)},resolvedImage:function(a){return da(a).length===0?[]:qi(a)},padding:function(a){const e=a.key,A=a.value;if(Lr(A)==="array"){if(A.length<1||A.length>4)return[new pe(e,A,`padding requires 1 to 4 values; ${A.length} values found`)];const d={type:"number"};let m=[];for(let w=0;w<A.length;w++)m=m.concat(a.validateSpec({key:`${e}[${w}]`,value:A[w],validateSpec:a.validateSpec,valueSpec:d}));return m}return TA({key:e,value:A,valueSpec:{}})},variableAnchorOffsetCollection:function(a){const e=a.key,A=a.value,d=Lr(A),m=a.styleSpec;if(d!=="array"||A.length<1||A.length%2!=0)return[new pe(e,A,"variableAnchorOffsetCollection requires a non-empty array of even length")];let w=[];for(let B=0;B<A.length;B+=2)w=w.concat(La({key:`${e}[${B}]`,value:A[B],valueSpec:m.layout_symbol["text-anchor"]})),w=w.concat(EA({key:`${e}[${B+1}]`,value:A[B+1],valueSpec:{length:2,value:"number"},validateSpec:a.validateSpec,style:a.style,styleSpec:m}));return w},sprite:zc};function LA(a){const e=a.value,A=a.valueSpec,d=a.styleSpec;return a.validateSpec=LA,A.expression&&In(Ii(e))?En(a):A.expression&&jn(ha(e))?qi(a):A.type&&Hc[A.type]?Hc[A.type](a):$n(Xe({},a,{valueSpec:A.type?d[A.type]:A}))}function Vc(a){const e=a.value,A=a.key,d=da(a);return d.length||(e.indexOf("{fontstack}")===-1&&d.push(new pe(A,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&d.push(new pe(A,e,'"glyphs" url must include a "{range}" token'))),d}function Cs(a,e=nt){let A=[];return A=A.concat(LA({key:"",value:a,valueSpec:e.$root,styleSpec:e,style:a,validateSpec:LA,objectElementValidators:{glyphs:Vc,"*":()=>[]}})),a.constants&&(A=A.concat(ul({key:"constants",value:a.constants,style:a,styleSpec:e,validateSpec:LA}))),Yl(A)}function as(a){return function(e){return a({...e,validateSpec:LA})}}function Yl(a){return[].concat(a).sort((e,A)=>e.line-A.line)}function qn(a){return function(...e){return Yl(a.apply(this,e))}}Cs.source=qn(as(PA)),Cs.sprite=qn(as(zc)),Cs.glyphs=qn(as(Vc)),Cs.light=qn(as(dl)),Cs.sky=qn(as(Rc)),Cs.terrain=qn(as(qu)),Cs.layer=qn(as(Oc)),Cs.filter=qn(as(Wo)),Cs.paintProperty=qn(as(Xo)),Cs.layoutProperty=qn(as(hl));const Qa=Cs,ld=Qa.light,Gu=Qa.paintProperty,jc=Qa.layoutProperty;function Kc(a,e){let A=!1;if(e&&e.length)for(const d of e)a.fire(new Qe(new Error(d.message))),A=!0;return A}class pl{constructor(e,A,d){const m=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;const B=new Int32Array(this.arrayBuffer);e=B[0],this.d=(A=B[1])+2*(d=B[2]);for(let L=0;L<this.d*this.d;L++){const N=B[3+L],R=B[3+L+1];m.push(N===R?null:B.subarray(N,R))}const S=B[3+m.length+1];this.keys=B.subarray(B[3+m.length],S),this.bboxes=B.subarray(S),this.insert=this._insertReadonly}else{this.d=A+2*d;for(let B=0;B<this.d*this.d;B++)m.push([]);this.keys=[],this.bboxes=[]}this.n=A,this.extent=e,this.padding=d,this.scale=A/e,this.uid=0;const w=d/A*e;this.min=-w,this.max=e+w}insert(e,A,d,m,w){this._forEachCell(A,d,m,w,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(A),this.bboxes.push(d),this.bboxes.push(m),this.bboxes.push(w)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,A,d,m,w,B){this.cells[w].push(B)}query(e,A,d,m,w){const B=this.min,S=this.max;if(e<=B&&A<=B&&S<=d&&S<=m&&!w)return Array.prototype.slice.call(this.keys);{const L=[];return this._forEachCell(e,A,d,m,this._queryCell,L,{},w),L}}_queryCell(e,A,d,m,w,B,S,L){const N=this.cells[w];if(N!==null){const R=this.keys,j=this.bboxes;for(let W=0;W<N.length;W++){const et=N[W];if(S[et]===void 0){const at=4*et;(L?L(j[at+0],j[at+1],j[at+2],j[at+3]):e<=j[at+2]&&A<=j[at+3]&&d>=j[at+0]&&m>=j[at+1])?(S[et]=!0,B.push(R[et])):S[et]=!1}}}}_forEachCell(e,A,d,m,w,B,S,L){const N=this._convertToCellCoord(e),R=this._convertToCellCoord(A),j=this._convertToCellCoord(d),W=this._convertToCellCoord(m);for(let et=N;et<=j;et++)for(let at=R;at<=W;at++){const ct=this.d*at+et;if((!L||L(this._convertFromCellCoord(et),this._convertFromCellCoord(at),this._convertFromCellCoord(et+1),this._convertFromCellCoord(at+1)))&&w.call(this,e,A,d,m,ct,B,S,L))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const e=this.cells,A=3+this.cells.length+1+1;let d=0;for(let B=0;B<this.cells.length;B++)d+=this.cells[B].length;const m=new Int32Array(A+d+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let w=A;for(let B=0;B<e.length;B++){const S=e[B];m[3+B]=w,m.set(S,w),w+=S.length}return m[3+e.length]=w,m.set(this.keys,w),w+=this.keys.length,m[3+e.length+1]=w,m.set(this.bboxes,w),w+=this.bboxes.length,m.buffer}static serialize(e,A){const d=e.toArrayBuffer();return A&&A.push(d),{buffer:d}}static deserialize(e){return new pl(e.buffer)}}const yo={};function Ve(a,e,A={}){if(yo[a])throw new Error(`${a} is already registered.`);Object.defineProperty(e,"_classRegistryKey",{value:a,writeable:!1}),yo[a]={klass:e,omit:A.omit||[],shallow:A.shallow||[]}}Ve("Object",Object),Ve("TransferableGridIndex",pl),Ve("Color",vr),Ve("Error",Error),Ve("AJAXError",Ht),Ve("ResolvedImage",Ln),Ve("StylePropertyFunction",Kn),Ve("StyleExpression",ca,{omit:["_evaluator"]}),Ve("ZoomDependentExpression",go),Ve("ZoomConstantExpression",Ta),Ve("CompoundExpression",ci,{omit:["_evaluate"]});for(const a in bs)bs[a]._classRegistryKey||Ve(`Expression_${a}`,bs[a]);function Ma(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function Mn(a,e){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob||a instanceof Error)return a;if(Ma(a)||Yt(a))return e&&e.push(a),a;if(ArrayBuffer.isView(a)){const A=a;return e&&e.push(A.buffer),A}if(a instanceof ImageData)return e&&e.push(a.data.buffer),a;if(Array.isArray(a)){const A=[];for(const d of a)A.push(Mn(d,e));return A}if(typeof a=="object"){const A=a.constructor,d=A._classRegistryKey;if(!d)throw new Error(`can't serialize object of unregistered class ${A.name}`);if(!yo[d])throw new Error(`${d} is not registered.`);const m=A.serialize?A.serialize(a,e):{};if(A.serialize){if(e&&m===e[e.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const w in a){if(!a.hasOwnProperty(w)||yo[d].omit.indexOf(w)>=0)continue;const B=a[w];m[w]=yo[d].shallow.indexOf(w)>=0?B:Mn(B,e)}a instanceof Error&&(m.message=a.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(m.$name=d),m}throw new Error("can't serialize object of type "+typeof a)}function cn(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob||a instanceof Error||Ma(a)||Yt(a)||ArrayBuffer.isView(a)||a instanceof ImageData)return a;if(Array.isArray(a))return a.map(cn);if(typeof a=="object"){const e=a.$name||"Object";if(!yo[e])throw new Error(`can't deserialize unregistered class ${e}`);const{klass:A}=yo[e];if(!A)throw new Error(`can't deserialize unregistered class ${e}`);if(A.deserialize)return A.deserialize(a);const d=Object.create(A.prototype);for(const m of Object.keys(a)){if(m==="$name")continue;const w=a[m];d[m]=yo[e].shallow.indexOf(m)>=0?w:cn(w)}return d}throw new Error("can't deserialize object of type "+typeof a)}class Wu{constructor(){this.first=!0}update(e,A){const d=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=A):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=A),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=d,!0))}}const Ne={"Latin-1 Supplement":a=>a>=128&&a<=255,Arabic:a=>a>=1536&&a<=1791,"Arabic Supplement":a=>a>=1872&&a<=1919,"Arabic Extended-A":a=>a>=2208&&a<=2303,"Hangul Jamo":a=>a>=4352&&a<=4607,"Unified Canadian Aboriginal Syllabics":a=>a>=5120&&a<=5759,Khmer:a=>a>=6016&&a<=6143,"Unified Canadian Aboriginal Syllabics Extended":a=>a>=6320&&a<=6399,"General Punctuation":a=>a>=8192&&a<=8303,"Letterlike Symbols":a=>a>=8448&&a<=8527,"Number Forms":a=>a>=8528&&a<=8591,"Miscellaneous Technical":a=>a>=8960&&a<=9215,"Control Pictures":a=>a>=9216&&a<=9279,"Optical Character Recognition":a=>a>=9280&&a<=9311,"Enclosed Alphanumerics":a=>a>=9312&&a<=9471,"Geometric Shapes":a=>a>=9632&&a<=9727,"Miscellaneous Symbols":a=>a>=9728&&a<=9983,"Miscellaneous Symbols and Arrows":a=>a>=11008&&a<=11263,"CJK Radicals Supplement":a=>a>=11904&&a<=12031,"Kangxi Radicals":a=>a>=12032&&a<=12255,"Ideographic Description Characters":a=>a>=12272&&a<=12287,"CJK Symbols and Punctuation":a=>a>=12288&&a<=12351,Hiragana:a=>a>=12352&&a<=12447,Katakana:a=>a>=12448&&a<=12543,Bopomofo:a=>a>=12544&&a<=12591,"Hangul Compatibility Jamo":a=>a>=12592&&a<=12687,Kanbun:a=>a>=12688&&a<=12703,"Bopomofo Extended":a=>a>=12704&&a<=12735,"CJK Strokes":a=>a>=12736&&a<=12783,"Katakana Phonetic Extensions":a=>a>=12784&&a<=12799,"Enclosed CJK Letters and Months":a=>a>=12800&&a<=13055,"CJK Compatibility":a=>a>=13056&&a<=13311,"CJK Unified Ideographs Extension A":a=>a>=13312&&a<=19903,"Yijing Hexagram Symbols":a=>a>=19904&&a<=19967,"CJK Unified Ideographs":a=>a>=19968&&a<=40959,"Yi Syllables":a=>a>=40960&&a<=42127,"Yi Radicals":a=>a>=42128&&a<=42191,"Hangul Jamo Extended-A":a=>a>=43360&&a<=43391,"Hangul Syllables":a=>a>=44032&&a<=55215,"Hangul Jamo Extended-B":a=>a>=55216&&a<=55295,"Private Use Area":a=>a>=57344&&a<=63743,"CJK Compatibility Ideographs":a=>a>=63744&&a<=64255,"Arabic Presentation Forms-A":a=>a>=64336&&a<=65023,"Vertical Forms":a=>a>=65040&&a<=65055,"CJK Compatibility Forms":a=>a>=65072&&a<=65103,"Small Form Variants":a=>a>=65104&&a<=65135,"Arabic Presentation Forms-B":a=>a>=65136&&a<=65279,"Halfwidth and Fullwidth Forms":a=>a>=65280&&a<=65519};function pa(a){for(const e of a)if($c(e.charCodeAt(0)))return!0;return!1}function Fs(a){for(const e of a)if(!Xu(e.charCodeAt(0)))return!1;return!0}function Xu(a){return!(Ne.Arabic(a)||Ne["Arabic Supplement"](a)||Ne["Arabic Extended-A"](a)||Ne["Arabic Presentation Forms-A"](a)||Ne["Arabic Presentation Forms-B"](a))}function $c(a){return!(a!==746&&a!==747&&(a<4352||!(Ne["Bopomofo Extended"](a)||Ne.Bopomofo(a)||Ne["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||Ne["CJK Compatibility Ideographs"](a)||Ne["CJK Compatibility"](a)||Ne["CJK Radicals Supplement"](a)||Ne["CJK Strokes"](a)||!(!Ne["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||Ne["CJK Unified Ideographs Extension A"](a)||Ne["CJK Unified Ideographs"](a)||Ne["Enclosed CJK Letters and Months"](a)||Ne["Hangul Compatibility Jamo"](a)||Ne["Hangul Jamo Extended-A"](a)||Ne["Hangul Jamo Extended-B"](a)||Ne["Hangul Jamo"](a)||Ne["Hangul Syllables"](a)||Ne.Hiragana(a)||Ne["Ideographic Description Characters"](a)||Ne.Kanbun(a)||Ne["Kangxi Radicals"](a)||Ne["Katakana Phonetic Extensions"](a)||Ne.Katakana(a)&&a!==12540||!(!Ne["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!Ne["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||Ne["Unified Canadian Aboriginal Syllabics"](a)||Ne["Unified Canadian Aboriginal Syllabics Extended"](a)||Ne["Vertical Forms"](a)||Ne["Yijing Hexagram Symbols"](a)||Ne["Yi Syllables"](a)||Ne["Yi Radicals"](a))))}function qc(a){return!($c(a)||function(e){return!!(Ne["Latin-1 Supplement"](e)&&(e===167||e===169||e===174||e===177||e===188||e===189||e===190||e===215||e===247)||Ne["General Punctuation"](e)&&(e===8214||e===8224||e===8225||e===8240||e===8241||e===8251||e===8252||e===8258||e===8263||e===8264||e===8265||e===8273)||Ne["Letterlike Symbols"](e)||Ne["Number Forms"](e)||Ne["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||e===9003||e>=9085&&e<=9114||e>=9150&&e<=9165||e===9167||e>=9169&&e<=9179||e>=9186&&e<=9215)||Ne["Control Pictures"](e)&&e!==9251||Ne["Optical Character Recognition"](e)||Ne["Enclosed Alphanumerics"](e)||Ne["Geometric Shapes"](e)||Ne["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||Ne["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||Ne["CJK Symbols and Punctuation"](e)||Ne.Katakana(e)||Ne["Private Use Area"](e)||Ne["CJK Compatibility Forms"](e)||Ne["Small Form Variants"](e)||Ne["Halfwidth and Fullwidth Forms"](e)||e===8734||e===8756||e===8757||e>=9984&&e<=10087||e>=10102&&e<=10131||e===65532||e===65533)}(a))}function ka(a){return a>=1424&&a<=2303||Ne["Arabic Presentation Forms-A"](a)||Ne["Arabic Presentation Forms-B"](a)}function Gc(a,e){return!(!e&&ka(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||Ne.Khmer(a))}function Jl(a){for(const e of a)if(ka(e.charCodeAt(0)))return!0;return!1}const vo=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(a){this.pluginStatus=a.pluginStatus,this.pluginURL=a.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(a){this.applyArabicShaping=a.applyArabicShaping,this.processBidirectionalText=a.processBidirectionalText,this.processStyledBidirectionalText=a.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class ti{constructor(e,A){this.zoom=e,A?(this.now=A.now,this.fadeDuration=A.fadeDuration,this.zoomHistory=A.zoomHistory,this.transition=A.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Wu,this.transition={})}isSupportedScript(e){return function(A,d){for(const m of A)if(!Gc(m.charCodeAt(0),d))return!1;return!0}(e,vo.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,A=e-Math.floor(e),d=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:A+(1-A)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*A}}}class Zo{constructor(e,A){this.property=e,this.value=A,this.expression=function(d,m){if(In(d))return new Kn(d,m);if(jn(d)){const w=Gs(d,m);if(w.result==="error")throw new Error(w.value.map(B=>`${B.key}: ${B.message}`).join(", "));return w.value}{let w=d;return m.type==="color"&&typeof d=="string"?w=vr.parse(d):m.type!=="padding"||typeof d!="number"&&!Array.isArray(d)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(d)&&(w=tn.parse(d)):w=li.parse(d),{kind:"constant",evaluate:()=>w}}}(A===void 0?e.specification.default:A,e.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(e,A,d){return this.property.possiblyEvaluate(this,e,A,d)}}class fa{constructor(e){this.property=e,this.value=new Zo(e,void 0)}transitioned(e,A){return new Wc(this.property,this.value,A,Ft({},e.transition,this.transition),e.now)}untransitioned(){return new Wc(this.property,this.value,null,{},0)}}class wo{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return At(this._values[e].value.value)}setValue(e,A){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new fa(this._values[e].property)),this._values[e].value=new Zo(this._values[e].property,A===null?void 0:At(A))}getTransition(e){return At(this._values[e].transition)}setTransition(e,A){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new fa(this._values[e].property)),this._values[e].transition=At(A)||void 0}serialize(){const e={};for(const A of Object.keys(this._values)){const d=this.getValue(A);d!==void 0&&(e[A]=d);const m=this.getTransition(A);m!==void 0&&(e[`${A}-transition`]=m)}return e}transitioned(e,A){const d=new Xc(this._properties);for(const m of Object.keys(this._values))d._values[m]=this._values[m].transitioned(e,A._values[m]);return d}untransitioned(){const e=new Xc(this._properties);for(const A of Object.keys(this._values))e._values[A]=this._values[A].untransitioned();return e}}class Wc{constructor(e,A,d,m,w){this.property=e,this.value=A,this.begin=w+m.delay||0,this.end=this.begin+m.duration||0,e.specification.transition&&(m.delay||m.duration)&&(this.prior=d)}possiblyEvaluate(e,A,d){const m=e.now||0,w=this.value.possiblyEvaluate(e,A,d),B=this.prior;if(B){if(m>this.end)return this.prior=null,w;if(this.value.isDataDriven())return this.prior=null,w;if(m<this.begin)return B.possiblyEvaluate(e,A,d);{const S=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(B.possiblyEvaluate(e,A,d),w,function(L){if(L<=0)return 0;if(L>=1)return 1;const N=L*L,R=N*L;return 4*(L<.5?R:3*(L-N)+R-.75)}(S))}}return w}}class Xc{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,A,d){const m=new tc(this._properties);for(const w of Object.keys(this._values))m._values[w]=this._values[w].possiblyEvaluate(e,A,d);return m}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class QA{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}hasValue(e){return this._values[e].value!==void 0}getValue(e){return At(this._values[e].value)}setValue(e,A){this._values[e]=new Zo(this._values[e].property,A===null?void 0:At(A))}serialize(){const e={};for(const A of Object.keys(this._values)){const d=this.getValue(A);d!==void 0&&(e[A]=d)}return e}possiblyEvaluate(e,A,d){const m=new tc(this._properties);for(const w of Object.keys(this._values))m._values[w]=this._values[w].possiblyEvaluate(e,A,d);return m}}class ga{constructor(e,A,d){this.property=e,this.value=A,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(e){return this.value.kind==="constant"?this.value.value:e}evaluate(e,A,d,m){return this.property.evaluate(this.value,this.parameters,e,A,d,m)}}class tc{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class Ye{constructor(e){this.specification=e}possiblyEvaluate(e,A){if(e.isDataDriven())throw new Error("Value should not be data driven");return e.expression.evaluate(A)}interpolate(e,A,d){const m=on[this.specification.type];return m?m(e,A,d):e}}class gr{constructor(e,A){this.specification=e,this.overrides=A}possiblyEvaluate(e,A,d,m){return new ga(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(A,null,{},d,m)}:e.expression,A)}interpolate(e,A,d){if(e.value.kind!=="constant"||A.value.kind!=="constant")return e;if(e.value.value===void 0||A.value.value===void 0)return new ga(this,{kind:"constant",value:void 0},e.parameters);const m=on[this.specification.type];if(m){const w=m(e.value.value,A.value.value,d);return new ga(this,{kind:"constant",value:w},e.parameters)}return e}evaluate(e,A,d,m,w,B){return e.kind==="constant"?e.value:e.evaluate(A,d,m,w,B)}}class b extends gr{possiblyEvaluate(e,A,d,m){if(e.value===void 0)return new ga(this,{kind:"constant",value:void 0},A);if(e.expression.kind==="constant"){const w=e.expression.evaluate(A,null,{},d,m),B=e.property.specification.type==="resolvedImage"&&typeof w!="string"?w.name:w,S=this._calculate(B,B,B,A);return new ga(this,{kind:"constant",value:S},A)}if(e.expression.kind==="camera"){const w=this._calculate(e.expression.evaluate({zoom:A.zoom-1}),e.expression.evaluate({zoom:A.zoom}),e.expression.evaluate({zoom:A.zoom+1}),A);return new ga(this,{kind:"constant",value:w},A)}return new ga(this,e.expression,A)}evaluate(e,A,d,m,w,B){if(e.kind==="source"){const S=e.evaluate(A,d,m,w,B);return this._calculate(S,S,S,A)}return e.kind==="composite"?this._calculate(e.evaluate({zoom:Math.floor(A.zoom)-1},d,m),e.evaluate({zoom:Math.floor(A.zoom)},d,m),e.evaluate({zoom:Math.floor(A.zoom)+1},d,m),A):e.value}_calculate(e,A,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:e,to:A}:{from:d,to:A}}interpolate(e){return e}}class r{constructor(e){this.specification=e}possiblyEvaluate(e,A,d,m){if(e.value!==void 0){if(e.expression.kind==="constant"){const w=e.expression.evaluate(A,null,{},d,m);return this._calculate(w,w,w,A)}return this._calculate(e.expression.evaluate(new ti(Math.floor(A.zoom-1),A)),e.expression.evaluate(new ti(Math.floor(A.zoom),A)),e.expression.evaluate(new ti(Math.floor(A.zoom+1),A)),A)}}_calculate(e,A,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:e,to:A}:{from:d,to:A}}interpolate(e){return e}}class c{constructor(e){this.specification=e}possiblyEvaluate(e,A,d,m){return!!e.expression.evaluate(A,null,{},d,m)}interpolate(){return!1}}class g{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const A in e){const d=e[A];d.specification.overridable&&this.overridableProperties.push(A);const m=this.defaultPropertyValues[A]=new Zo(d,void 0),w=this.defaultTransitionablePropertyValues[A]=new fa(d);this.defaultTransitioningPropertyValues[A]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[A]=m.possiblyEvaluate({})}}}Ve("DataDrivenProperty",gr),Ve("DataConstantProperty",Ye),Ve("CrossFadedDataDrivenProperty",b),Ve("CrossFadedProperty",r),Ve("ColorRampProperty",c);const y="-transition";class x extends le{constructor(e,A){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1},e.type!=="custom"&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,e.type!=="background"&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),A.layout&&(this._unevaluatedLayout=new QA(A.layout)),A.paint)){this._transitionablePaint=new wo(A.paint);for(const d in e.paint)this.setPaintProperty(d,e.paint[d],{validate:!1});for(const d in e.layout)this.setLayoutProperty(d,e.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new tc(A.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,A,d={}){A!=null&&this._validate(jc,`layers.${this.id}.layout.${e}`,e,A,d)||(e!=="visibility"?this._unevaluatedLayout.setValue(e,A):this.visibility=A)}getPaintProperty(e){return e.endsWith(y)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,A,d={}){if(A!=null&&this._validate(Gu,`layers.${this.id}.paint.${e}`,e,A,d))return!1;if(e.endsWith(y))return this._transitionablePaint.setTransition(e.slice(0,-11),A||void 0),!1;{const m=this._transitionablePaint._values[e],w=m.property.specification["property-type"]==="cross-faded-data-driven",B=m.value.isDataDriven(),S=m.value;this._transitionablePaint.setValue(e,A),this._handleSpecialPaintPropertyUpdate(e);const L=this._transitionablePaint._values[e].value;return L.isDataDriven()||B||w||this._handleOverridablePaintPropertyUpdate(e,S,L)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,A,d){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||this.visibility==="none"}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,A){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,A)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,A)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),Wt(e,(A,d)=>!(A===void 0||d==="layout"&&!Object.keys(A).length||d==="paint"&&!Object.keys(A).length))}_validate(e,A,d,m,w={}){return(!w||w.validate!==!1)&&Kc(this,e.call(Qa,{key:A,layerType:this.type,objectKey:d,value:m,styleSpec:nt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const A=this.paint.get(e);if(A instanceof ga&&Ks(A.property.specification)&&(A.value.kind==="source"||A.value.kind==="composite")&&A.value.isStateDependent)return!0}return!1}}const T={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class u{constructor(e,A){this._structArray=e,this._pos1=A*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class f{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,A){return e._trim(),A&&(e.isTransferred=!0,A.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const A=Object.create(this.prototype);return A.arrayBuffer=e.arrayBuffer,A.length=e.length,A.capacity=e.arrayBuffer.byteLength/A.bytesPerElement,A._refreshViews(),A}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const A=this.uint8;this._refreshViews(),A&&this.uint8.set(A)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function _(a,e=1){let A=0,d=0;return{members:a.map(m=>{const w=T[m.type].BYTES_PER_ELEMENT,B=A=F(A,Math.max(e,w)),S=m.components||1;return d=Math.max(d,w),A+=w*S,{name:m.name,type:m.type,components:S,offset:B}}),size:F(A,Math.max(d,e)),alignment:e}}function F(a,e){return Math.ceil(a/e)*e}class E extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,A){const d=this.length;return this.resize(d+1),this.emplace(d,e,A)}emplace(e,A,d){const m=2*e;return this.int16[m+0]=A,this.int16[m+1]=d,e}}E.prototype.bytesPerElement=4,Ve("StructArrayLayout2i4",E);class k extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,A,d){const m=this.length;return this.resize(m+1),this.emplace(m,e,A,d)}emplace(e,A,d,m){const w=3*e;return this.int16[w+0]=A,this.int16[w+1]=d,this.int16[w+2]=m,e}}k.prototype.bytesPerElement=6,Ve("StructArrayLayout3i6",k);class D extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,A,d,m){const w=this.length;return this.resize(w+1),this.emplace(w,e,A,d,m)}emplace(e,A,d,m,w){const B=4*e;return this.int16[B+0]=A,this.int16[B+1]=d,this.int16[B+2]=m,this.int16[B+3]=w,e}}D.prototype.bytesPerElement=8,Ve("StructArrayLayout4i8",D);class O extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,A,d,m,w,B){const S=this.length;return this.resize(S+1),this.emplace(S,e,A,d,m,w,B)}emplace(e,A,d,m,w,B,S){const L=6*e;return this.int16[L+0]=A,this.int16[L+1]=d,this.int16[L+2]=m,this.int16[L+3]=w,this.int16[L+4]=B,this.int16[L+5]=S,e}}O.prototype.bytesPerElement=12,Ve("StructArrayLayout2i4i12",O);class z extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,A,d,m,w,B){const S=this.length;return this.resize(S+1),this.emplace(S,e,A,d,m,w,B)}emplace(e,A,d,m,w,B,S){const L=4*e,N=8*e;return this.int16[L+0]=A,this.int16[L+1]=d,this.uint8[N+4]=m,this.uint8[N+5]=w,this.uint8[N+6]=B,this.uint8[N+7]=S,e}}z.prototype.bytesPerElement=8,Ve("StructArrayLayout2i4ub8",z);class H extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,A){const d=this.length;return this.resize(d+1),this.emplace(d,e,A)}emplace(e,A,d){const m=2*e;return this.float32[m+0]=A,this.float32[m+1]=d,e}}H.prototype.bytesPerElement=8,Ve("StructArrayLayout2f8",H);class X extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,A,d,m,w,B,S,L,N,R){const j=this.length;return this.resize(j+1),this.emplace(j,e,A,d,m,w,B,S,L,N,R)}emplace(e,A,d,m,w,B,S,L,N,R,j){const W=10*e;return this.uint16[W+0]=A,this.uint16[W+1]=d,this.uint16[W+2]=m,this.uint16[W+3]=w,this.uint16[W+4]=B,this.uint16[W+5]=S,this.uint16[W+6]=L,this.uint16[W+7]=N,this.uint16[W+8]=R,this.uint16[W+9]=j,e}}X.prototype.bytesPerElement=20,Ve("StructArrayLayout10ui20",X);class ot extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,A,d,m,w,B,S,L,N,R,j,W){const et=this.length;return this.resize(et+1),this.emplace(et,e,A,d,m,w,B,S,L,N,R,j,W)}emplace(e,A,d,m,w,B,S,L,N,R,j,W,et){const at=12*e;return this.int16[at+0]=A,this.int16[at+1]=d,this.int16[at+2]=m,this.int16[at+3]=w,this.uint16[at+4]=B,this.uint16[at+5]=S,this.uint16[at+6]=L,this.uint16[at+7]=N,this.int16[at+8]=R,this.int16[at+9]=j,this.int16[at+10]=W,this.int16[at+11]=et,e}}ot.prototype.bytesPerElement=24,Ve("StructArrayLayout4i4ui4i24",ot);class Z extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,A,d){const m=this.length;return this.resize(m+1),this.emplace(m,e,A,d)}emplace(e,A,d,m){const w=3*e;return this.float32[w+0]=A,this.float32[w+1]=d,this.float32[w+2]=m,e}}Z.prototype.bytesPerElement=12,Ve("StructArrayLayout3f12",Z);class st extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const A=this.length;return this.resize(A+1),this.emplace(A,e)}emplace(e,A){return this.uint32[1*e+0]=A,e}}st.prototype.bytesPerElement=4,Ve("StructArrayLayout1ul4",st);class mt extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,A,d,m,w,B,S,L,N){const R=this.length;return this.resize(R+1),this.emplace(R,e,A,d,m,w,B,S,L,N)}emplace(e,A,d,m,w,B,S,L,N,R){const j=10*e,W=5*e;return this.int16[j+0]=A,this.int16[j+1]=d,this.int16[j+2]=m,this.int16[j+3]=w,this.int16[j+4]=B,this.int16[j+5]=S,this.uint32[W+3]=L,this.uint16[j+8]=N,this.uint16[j+9]=R,e}}mt.prototype.bytesPerElement=20,Ve("StructArrayLayout6i1ul2ui20",mt);class gt extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,A,d,m,w,B){const S=this.length;return this.resize(S+1),this.emplace(S,e,A,d,m,w,B)}emplace(e,A,d,m,w,B,S){const L=6*e;return this.int16[L+0]=A,this.int16[L+1]=d,this.int16[L+2]=m,this.int16[L+3]=w,this.int16[L+4]=B,this.int16[L+5]=S,e}}gt.prototype.bytesPerElement=12,Ve("StructArrayLayout2i2i2i12",gt);class ut extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,A,d,m,w){const B=this.length;return this.resize(B+1),this.emplace(B,e,A,d,m,w)}emplace(e,A,d,m,w,B){const S=4*e,L=8*e;return this.float32[S+0]=A,this.float32[S+1]=d,this.float32[S+2]=m,this.int16[L+6]=w,this.int16[L+7]=B,e}}ut.prototype.bytesPerElement=16,Ve("StructArrayLayout2f1f2i16",ut);class ft extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,A,d,m,w,B){const S=this.length;return this.resize(S+1),this.emplace(S,e,A,d,m,w,B)}emplace(e,A,d,m,w,B,S){const L=16*e,N=4*e,R=8*e;return this.uint8[L+0]=A,this.uint8[L+1]=d,this.float32[N+1]=m,this.float32[N+2]=w,this.int16[R+6]=B,this.int16[R+7]=S,e}}ft.prototype.bytesPerElement=16,Ve("StructArrayLayout2ub2f2i16",ft);class zt extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,A,d){const m=this.length;return this.resize(m+1),this.emplace(m,e,A,d)}emplace(e,A,d,m){const w=3*e;return this.uint16[w+0]=A,this.uint16[w+1]=d,this.uint16[w+2]=m,e}}zt.prototype.bytesPerElement=6,Ve("StructArrayLayout3ui6",zt);class Kt extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,A,d,m,w,B,S,L,N,R,j,W,et,at,ct,xt,It){const $t=this.length;return this.resize($t+1),this.emplace($t,e,A,d,m,w,B,S,L,N,R,j,W,et,at,ct,xt,It)}emplace(e,A,d,m,w,B,S,L,N,R,j,W,et,at,ct,xt,It,$t){const Qt=24*e,Vt=12*e,Ae=48*e;return this.int16[Qt+0]=A,this.int16[Qt+1]=d,this.uint16[Qt+2]=m,this.uint16[Qt+3]=w,this.uint32[Vt+2]=B,this.uint32[Vt+3]=S,this.uint32[Vt+4]=L,this.uint16[Qt+10]=N,this.uint16[Qt+11]=R,this.uint16[Qt+12]=j,this.float32[Vt+7]=W,this.float32[Vt+8]=et,this.uint8[Ae+36]=at,this.uint8[Ae+37]=ct,this.uint8[Ae+38]=xt,this.uint32[Vt+10]=It,this.int16[Qt+22]=$t,e}}Kt.prototype.bytesPerElement=48,Ve("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Kt);class Mt extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,A,d,m,w,B,S,L,N,R,j,W,et,at,ct,xt,It,$t,Qt,Vt,Ae,ve,De,lr,ze,Pe,ir,qe){const je=this.length;return this.resize(je+1),this.emplace(je,e,A,d,m,w,B,S,L,N,R,j,W,et,at,ct,xt,It,$t,Qt,Vt,Ae,ve,De,lr,ze,Pe,ir,qe)}emplace(e,A,d,m,w,B,S,L,N,R,j,W,et,at,ct,xt,It,$t,Qt,Vt,Ae,ve,De,lr,ze,Pe,ir,qe,je){const fe=32*e,nr=16*e;return this.int16[fe+0]=A,this.int16[fe+1]=d,this.int16[fe+2]=m,this.int16[fe+3]=w,this.int16[fe+4]=B,this.int16[fe+5]=S,this.int16[fe+6]=L,this.int16[fe+7]=N,this.uint16[fe+8]=R,this.uint16[fe+9]=j,this.uint16[fe+10]=W,this.uint16[fe+11]=et,this.uint16[fe+12]=at,this.uint16[fe+13]=ct,this.uint16[fe+14]=xt,this.uint16[fe+15]=It,this.uint16[fe+16]=$t,this.uint16[fe+17]=Qt,this.uint16[fe+18]=Vt,this.uint16[fe+19]=Ae,this.uint16[fe+20]=ve,this.uint16[fe+21]=De,this.uint16[fe+22]=lr,this.uint32[nr+12]=ze,this.float32[nr+13]=Pe,this.float32[nr+14]=ir,this.uint16[fe+30]=qe,this.uint16[fe+31]=je,e}}Mt.prototype.bytesPerElement=64,Ve("StructArrayLayout8i15ui1ul2f2ui64",Mt);class ee extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const A=this.length;return this.resize(A+1),this.emplace(A,e)}emplace(e,A){return this.float32[1*e+0]=A,e}}ee.prototype.bytesPerElement=4,Ve("StructArrayLayout1f4",ee);class oe extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,A,d){const m=this.length;return this.resize(m+1),this.emplace(m,e,A,d)}emplace(e,A,d,m){const w=3*e;return this.uint16[6*e+0]=A,this.float32[w+1]=d,this.float32[w+2]=m,e}}oe.prototype.bytesPerElement=12,Ve("StructArrayLayout1ui2f12",oe);class _e extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,A,d){const m=this.length;return this.resize(m+1),this.emplace(m,e,A,d)}emplace(e,A,d,m){const w=4*e;return this.uint32[2*e+0]=A,this.uint16[w+2]=d,this.uint16[w+3]=m,e}}_e.prototype.bytesPerElement=8,Ve("StructArrayLayout1ul2ui8",_e);class re extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,A){const d=this.length;return this.resize(d+1),this.emplace(d,e,A)}emplace(e,A,d){const m=2*e;return this.uint16[m+0]=A,this.uint16[m+1]=d,e}}re.prototype.bytesPerElement=4,Ve("StructArrayLayout2ui4",re);class ye extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const A=this.length;return this.resize(A+1),this.emplace(A,e)}emplace(e,A){return this.uint16[1*e+0]=A,e}}ye.prototype.bytesPerElement=2,Ve("StructArrayLayout1ui2",ye);class Oe extends f{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,A,d,m){const w=this.length;return this.resize(w+1),this.emplace(w,e,A,d,m)}emplace(e,A,d,m,w){const B=4*e;return this.float32[B+0]=A,this.float32[B+1]=d,this.float32[B+2]=m,this.float32[B+3]=w,e}}Oe.prototype.bytesPerElement=16,Ve("StructArrayLayout4f16",Oe);class hr extends u{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new U(this.anchorPointX,this.anchorPointY)}}hr.prototype.size=20;class He extends mt{get(e){return new hr(this,e)}}Ve("CollisionBoxArray",He);class rr extends u{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}rr.prototype.size=48;class _r extends Kt{get(e){return new rr(this,e)}}Ve("PlacedSymbolArray",_r);class mr extends u{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}mr.prototype.size=64;class ei extends Mt{get(e){return new mr(this,e)}}Ve("SymbolInstanceArray",ei);class Rr extends ee{getoffsetX(e){return this.float32[1*e+0]}}Ve("GlyphOffsetArray",Rr);class Xr extends k{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}Ve("SymbolLineVertexArray",Xr);class oi extends u{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}oi.prototype.size=12;class Qr extends oe{get(e){return new oi(this,e)}}Ve("TextAnchorOffsetArray",Qr);class Ai extends u{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ai.prototype.size=8;class Li extends _e{get(e){return new Ai(this,e)}}Ve("FeatureIndexArray",Li);class Ei extends E{}class Gi extends E{}class Wi extends E{}class un extends O{}class os extends z{}class Xi extends H{}class bi extends X{}class xn extends ot{}class As extends Z{}class ls extends st{}class Hr extends gt{}class hn extends ft{}class rn extends zt{}class xi extends re{}const Da=_([{name:"a_pos",components:2,type:"Int16"}],4),{members:Yo}=Da;class Ni{constructor(e=[]){this.segments=e}prepareSegment(e,A,d,m){let w=this.segments[this.segments.length-1];return e>Ni.MAX_VERTEX_ARRAY_LENGTH&&bt(`Max vertices per segment is ${Ni.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!w||w.vertexLength+e>Ni.MAX_VERTEX_ARRAY_LENGTH||w.sortKey!==m)&&(w={vertexOffset:A.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0},m!==void 0&&(w.sortKey=m),this.segments.push(w)),w}get(){return this.segments}destroy(){for(const e of this.segments)for(const A in e.vaos)e.vaos[A].destroy()}static simpleSegment(e,A,d,m){return new Ni([{vertexOffset:e,primitiveOffset:A,vertexLength:d,primitiveLength:m,vaos:{},sortKey:0}])}}function Ss(a,e){return 256*(a=Tt(Math.floor(a),0,255))+Tt(Math.floor(e),0,255)}Ni.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ve("SegmentVector",Ni);const Na=_([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Oa={exports:{}},Ra={exports:{}};Ra.exports=function(a,e){var A,d,m,w,B,S,L,N;for(d=a.length-(A=3&a.length),m=e,B=3432918353,S=461845907,N=0;N<d;)L=255&a.charCodeAt(N)|(255&a.charCodeAt(++N))<<8|(255&a.charCodeAt(++N))<<16|(255&a.charCodeAt(++N))<<24,++N,m=27492+(65535&(w=5*(65535&(m=(m^=L=(65535&(L=(L=(65535&L)*B+(((L>>>16)*B&65535)<<16)&4294967295)<<15|L>>>17))*S+(((L>>>16)*S&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(w>>>16)&65535)<<16);switch(L=0,A){case 3:L^=(255&a.charCodeAt(N+2))<<16;case 2:L^=(255&a.charCodeAt(N+1))<<8;case 1:m^=L=(65535&(L=(L=(65535&(L^=255&a.charCodeAt(N)))*B+(((L>>>16)*B&65535)<<16)&4294967295)<<15|L>>>17))*S+(((L>>>16)*S&65535)<<16)&4294967295}return m^=a.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var fl=Ra.exports,ec={exports:{}};ec.exports=function(a,e){for(var A,d=a.length,m=e^d,w=0;d>=4;)A=1540483477*(65535&(A=255&a.charCodeAt(w)|(255&a.charCodeAt(++w))<<8|(255&a.charCodeAt(++w))<<16|(255&a.charCodeAt(++w))<<24))+((1540483477*(A>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(A=1540483477*(65535&(A^=A>>>24))+((1540483477*(A>>>16)&65535)<<16)),d-=4,++w;switch(d){case 3:m^=(255&a.charCodeAt(w+2))<<16;case 2:m^=(255&a.charCodeAt(w+1))<<8;case 1:m=1540483477*(65535&(m^=255&a.charCodeAt(w)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var MA=fl,gl=ec.exports;Oa.exports=MA,Oa.exports.murmur3=MA,Oa.exports.murmur2=gl;var Jo=v(Oa.exports);class ma{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,A,d,m){this.ids.push(Of(e)),this.positions.push(A,d,m)}getPositions(e){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const A=Of(e);let d=0,m=this.ids.length-1;for(;d<m;){const B=d+m>>1;this.ids[B]>=A?m=B:d=B+1}const w=[];for(;this.ids[d]===A;)w.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return w}static serialize(e,A){const d=new Float64Array(e.ids),m=new Uint32Array(e.positions);return cd(d,m,0,d.length-1),A&&A.push(d.buffer,m.buffer),{ids:d,positions:m}}static deserialize(e){const A=new ma;return A.ids=e.ids,A.positions=e.positions,A.indexed=!0,A}}function Of(a){const e=+a;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:Jo(String(a))}function cd(a,e,A,d){for(;A<d;){const m=a[A+d>>1];let w=A-1,B=d+1;for(;;){do w++;while(a[w]<m);do B--;while(a[B]>m);if(w>=B)break;rc(a,w,B),rc(e,3*w,3*B),rc(e,3*w+1,3*B+1),rc(e,3*w+2,3*B+2)}B-A<d-B?(cd(a,e,A,B),A=B+1):(cd(a,e,B+1,d),d=B)}}function rc(a,e,A){const d=a[e];a[e]=a[A],a[A]=d}Ve("FeaturePositionMap",ma);class Is{constructor(e,A){this.gl=e.gl,this.location=A}}class Zu extends Is{constructor(e,A){super(e,A),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class Rf extends Is{constructor(e,A){super(e,A),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class zf extends Is{constructor(e,A){super(e,A),this.current=vr.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const Hf=new Float32Array(16);function ic(a){return[Ss(255*a.r,255*a.g),Ss(255*a.b,255*a.a)]}class nc{constructor(e,A,d){this.value=e,this.uniformNames=A.map(m=>`u_${m}`),this.type=d}setUniform(e,A,d){e.set(d.constantOr(this.value))}getBinding(e,A,d){return this.type==="color"?new zf(e,A):new Zu(e,A)}}class ml{constructor(e,A){this.uniformNames=A.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,A){this.pixelRatioFrom=A.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=A.tlbr,this.patternTo=e.tlbr}setUniform(e,A,d,m){const w=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;w&&e.set(w)}getBinding(e,A,d){return d.substr(0,9)==="u_pattern"?new Rf(e,A):new Zu(e,A)}}class ya{constructor(e,A,d,m){this.expression=e,this.type=d,this.maxValue=0,this.paintVertexAttributes=A.map(w=>({name:`a_${w}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(e,A,d,m,w){const B=this.paintVertexArray.length,S=this.expression.evaluate(new ti(0),A,{},m,[],w);this.paintVertexArray.resize(e),this._setPaintValue(B,e,S)}updatePaintArray(e,A,d,m){const w=this.expression.evaluate({zoom:0},d,m);this._setPaintValue(e,A,w)}_setPaintValue(e,A,d){if(this.type==="color"){const m=ic(d);for(let w=e;w<A;w++)this.paintVertexArray.emplace(w,m[0],m[1])}else{for(let m=e;m<A;m++)this.paintVertexArray.emplace(m,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ws{constructor(e,A,d,m,w,B){this.expression=e,this.uniformNames=A.map(S=>`u_${S}_t`),this.type=d,this.useIntegerZoom=m,this.zoom=w,this.maxValue=0,this.paintVertexAttributes=A.map(S=>({name:`a_${S}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new B}populatePaintArray(e,A,d,m,w){const B=this.expression.evaluate(new ti(this.zoom),A,{},m,[],w),S=this.expression.evaluate(new ti(this.zoom+1),A,{},m,[],w),L=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(L,e,B,S)}updatePaintArray(e,A,d,m){const w=this.expression.evaluate({zoom:this.zoom},d,m),B=this.expression.evaluate({zoom:this.zoom+1},d,m);this._setPaintValue(e,A,w,B)}_setPaintValue(e,A,d,m){if(this.type==="color"){const w=ic(d),B=ic(m);for(let S=e;S<A;S++)this.paintVertexArray.emplace(S,w[0],w[1],B[0],B[1])}else{for(let w=e;w<A;w++)this.paintVertexArray.emplace(w,d,m);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(m))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,A){const d=this.useIntegerZoom?Math.floor(A.zoom):A.zoom,m=Tt(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);e.set(m)}getBinding(e,A,d){return new Zu(e,A)}}class va{constructor(e,A,d,m,w,B){this.expression=e,this.type=A,this.useIntegerZoom=d,this.zoom=m,this.layerId=B,this.zoomInPaintVertexArray=new w,this.zoomOutPaintVertexArray=new w}populatePaintArray(e,A,d){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(m,e,A.patterns&&A.patterns[this.layerId],d)}updatePaintArray(e,A,d,m,w){this._setPaintValues(e,A,d.patterns&&d.patterns[this.layerId],w)}_setPaintValues(e,A,d,m){if(!m||!d)return;const{min:w,mid:B,max:S}=d,L=m[w],N=m[B],R=m[S];if(L&&N&&R)for(let j=e;j<A;j++)this.zoomInPaintVertexArray.emplace(j,N.tl[0],N.tl[1],N.br[0],N.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],N.pixelRatio,L.pixelRatio),this.zoomOutPaintVertexArray.emplace(j,N.tl[0],N.tl[1],N.br[0],N.br[1],R.tl[0],R.tl[1],R.br[0],R.br[1],N.pixelRatio,R.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,Na.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,Na.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ud{constructor(e,A,d){this.binders={},this._buffers=[];const m=[];for(const w in e.paint._values){if(!d(w))continue;const B=e.paint.get(w);if(!(B instanceof ga&&Ks(B.property.specification)))continue;const S=Yu(w,e.type),L=B.value,N=B.property.specification.type,R=B.property.useIntegerZoom,j=B.property.specification["property-type"],W=j==="cross-faded"||j==="cross-faded-data-driven";if(L.kind==="constant")this.binders[w]=W?new ml(L.value,S):new nc(L.value,S,N),m.push(`/u_${w}`);else if(L.kind==="source"||W){const et=hd(w,N,"source");this.binders[w]=W?new va(L,N,R,A,et,e.id):new ya(L,S,N,et),m.push(`/a_${w}`)}else{const et=hd(w,N,"composite");this.binders[w]=new Ws(L,S,N,R,A,et),m.push(`/z_${w}`)}}this.cacheKey=m.sort().join("")}getMaxValue(e){const A=this.binders[e];return A instanceof ya||A instanceof Ws?A.maxValue:0}populatePaintArrays(e,A,d,m,w){for(const B in this.binders){const S=this.binders[B];(S instanceof ya||S instanceof Ws||S instanceof va)&&S.populatePaintArray(e,A,d,m,w)}}setConstantPatternPositions(e,A){for(const d in this.binders){const m=this.binders[d];m instanceof ml&&m.setConstantPatternPositions(e,A)}}updatePaintArrays(e,A,d,m,w){let B=!1;for(const S in e){const L=A.getPositions(S);for(const N of L){const R=d.feature(N.index);for(const j in this.binders){const W=this.binders[j];if((W instanceof ya||W instanceof Ws||W instanceof va)&&W.expression.isStateDependent===!0){const et=m.paint.get(j);W.expression=et.value,W.updatePaintArray(N.start,N.end,R,e[S],w),B=!0}}}}return B}defines(){const e=[];for(const A in this.binders){const d=this.binders[A];(d instanceof nc||d instanceof ml)&&e.push(...d.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return e}getBinderAttributes(){const e=[];for(const A in this.binders){const d=this.binders[A];if(d instanceof ya||d instanceof Ws)for(let m=0;m<d.paintVertexAttributes.length;m++)e.push(d.paintVertexAttributes[m].name);else if(d instanceof va)for(let m=0;m<Na.members.length;m++)e.push(Na.members[m].name)}return e}getBinderUniforms(){const e=[];for(const A in this.binders){const d=this.binders[A];if(d instanceof nc||d instanceof ml||d instanceof Ws)for(const m of d.uniformNames)e.push(m)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,A){const d=[];for(const m in this.binders){const w=this.binders[m];if(w instanceof nc||w instanceof ml||w instanceof Ws){for(const B of w.uniformNames)if(A[B]){const S=w.getBinding(e,A[B],B);d.push({name:B,property:m,binding:S})}}}return d}setUniforms(e,A,d,m){for(const{name:w,property:B,binding:S}of A)this.binders[B].setUniform(S,m,d.get(B),w)}updatePaintBuffers(e){this._buffers=[];for(const A in this.binders){const d=this.binders[A];if(e&&d instanceof va){const m=e.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(d instanceof ya||d instanceof Ws)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(e){for(const A in this.binders){const d=this.binders[A];(d instanceof ya||d instanceof Ws||d instanceof va)&&d.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const A=this.binders[e];(A instanceof ya||A instanceof Ws||A instanceof va)&&A.destroy()}}}class yl{constructor(e,A,d=()=>!0){this.programConfigurations={};for(const m of e)this.programConfigurations[m.id]=new ud(m,A,d);this.needsUpload=!1,this._featureMap=new ma,this._bufferOffset=0}populatePaintArrays(e,A,d,m,w,B){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(e,A,m,w,B);A.id!==void 0&&this._featureMap.add(A.id,d,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,A,d,m){for(const w of d)this.needsUpload=this.programConfigurations[w.id].updatePaintArrays(e,this._featureMap,A,w,m)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const A in this.programConfigurations)this.programConfigurations[A].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}function Yu(a,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[a]||[a.replace(`${e}-`,"").replace(/-/g,"_")]}function hd(a,e,A){const d={color:{source:H,composite:Oe},number:{source:ee,composite:H}},m=function(w){return{"line-pattern":{source:bi,composite:bi},"fill-pattern":{source:bi,composite:bi},"fill-extrusion-pattern":{source:bi,composite:bi}}[w]}(a);return m&&m[A]||d[e][A]}Ve("ConstantBinder",nc),Ve("CrossFadedConstantBinder",ml),Ve("SourceExpressionBinder",ya),Ve("CrossFadedCompositeBinder",va),Ve("CompositeExpressionBinder",Ws),Ve("ProgramConfiguration",ud,{omit:["_buffers"]}),Ve("ProgramConfigurationSet",yl);const Oi=8192,_o=Math.pow(2,14)-1,dd=-_o-1;function kA(a){const e=Oi/a.extent,A=a.loadGeometry();for(let d=0;d<A.length;d++){const m=A[d];for(let w=0;w<m.length;w++){const B=m[w],S=Math.round(B.x*e),L=Math.round(B.y*e);B.x=Tt(S,dd,_o),B.y=Tt(L,dd,_o),(S<B.x||S>B.x+1||L<B.y||L>B.y+1)&&bt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return A}function vl(a,e){return{type:a.type,id:a.id,properties:a.properties,geometry:e?kA(a):[]}}function Zc(a,e,A,d,m){a.emplaceBack(2*e+(d+1)/2,2*A+(m+1)/2)}class DA{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(A=>A.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Gi,this.indexArray=new rn,this.segments=new Ni,this.programConfigurations=new yl(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(e,A,d){const m=this.layers[0],w=[];let B=null,S=!1;m.type==="circle"&&(B=m.layout.get("circle-sort-key"),S=!B.isConstant());for(const{feature:L,id:N,index:R,sourceLayerIndex:j}of e){const W=this.layers[0]._featureFilter.needGeometry,et=vl(L,W);if(!this.layers[0]._featureFilter.filter(new ti(this.zoom),et,d))continue;const at=S?B.evaluate(et,{},d):void 0,ct={id:N,properties:L.properties,type:L.type,sourceLayerIndex:j,index:R,geometry:W?et.geometry:kA(L),patterns:{},sortKey:at};w.push(ct)}S&&w.sort((L,N)=>L.sortKey-N.sortKey);for(const L of w){const{geometry:N,index:R,sourceLayerIndex:j}=L,W=e[R].feature;this.addFeature(L,N,R,d),A.featureIndex.insert(W,N,R,j,this.index)}}update(e,A,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,A,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Yo),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,A,d,m){for(const w of A)for(const B of w){const S=B.x,L=B.y;if(S<0||S>=Oi||L<0||L>=Oi)continue;const N=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),R=N.vertexLength;Zc(this.layoutVertexArray,S,L,-1,-1),Zc(this.layoutVertexArray,S,L,1,-1),Zc(this.layoutVertexArray,S,L,1,1),Zc(this.layoutVertexArray,S,L,-1,1),this.indexArray.emplaceBack(R,R+1,R+2),this.indexArray.emplaceBack(R,R+3,R+2),N.vertexLength+=4,N.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,d,{},m)}}function Vf(a,e){for(let A=0;A<a.length;A++)if(Xs(e,a[A]))return!0;for(let A=0;A<e.length;A++)if(Xs(a,e[A]))return!0;return!!pd(a,e)}function jf(a,e,A){return!!Xs(a,e)||!!Jc(e,a,A)}function Kf(a,e){if(a.length===1)return bo(e,a[0]);for(let A=0;A<e.length;A++){const d=e[A];for(let m=0;m<d.length;m++)if(Xs(a,d[m]))return!0}for(let A=0;A<a.length;A++)if(bo(e,a[A]))return!0;for(let A=0;A<e.length;A++)if(pd(a,e[A]))return!0;return!1}function $f(a,e,A){if(a.length>1){if(pd(a,e))return!0;for(let d=0;d<e.length;d++)if(Jc(e[d],a,A))return!0}for(let d=0;d<a.length;d++)if(Jc(a[d],e,A))return!0;return!1}function pd(a,e){if(a.length===0||e.length===0)return!1;for(let A=0;A<a.length-1;A++){const d=a[A],m=a[A+1];for(let w=0;w<e.length-1;w++)if(Yc(d,m,e[w],e[w+1]))return!0}return!1}function Yc(a,e,A,d){return wt(a,A,d)!==wt(e,A,d)&&wt(a,e,A)!==wt(a,e,d)}function Jc(a,e,A){const d=A*A;if(e.length===1)return a.distSqr(e[0])<d;for(let m=1;m<e.length;m++)if(tu(a,e[m-1],e[m])<d)return!0;return!1}function tu(a,e,A){const d=e.distSqr(A);if(d===0)return a.distSqr(e);const m=((a.x-e.x)*(A.x-e.x)+(a.y-e.y)*(A.y-e.y))/d;return a.distSqr(m<0?e:m>1?A:A.sub(e)._mult(m)._add(e))}function bo(a,e){let A,d,m,w=!1;for(let B=0;B<a.length;B++){A=a[B];for(let S=0,L=A.length-1;S<A.length;L=S++)d=A[S],m=A[L],d.y>e.y!=m.y>e.y&&e.x<(m.x-d.x)*(e.y-d.y)/(m.y-d.y)+d.x&&(w=!w)}return w}function Xs(a,e){let A=!1;for(let d=0,m=a.length-1;d<a.length;m=d++){const w=a[d],B=a[m];w.y>e.y!=B.y>e.y&&e.x<(B.x-w.x)*(e.y-w.y)/(B.y-w.y)+w.x&&(A=!A)}return A}function NA(a,e,A){const d=A[0],m=A[2];if(a.x<d.x&&e.x<d.x||a.x>m.x&&e.x>m.x||a.y<d.y&&e.y<d.y||a.y>m.y&&e.y>m.y)return!1;const w=wt(a,e,A[0]);return w!==wt(a,e,A[1])||w!==wt(a,e,A[2])||w!==wt(a,e,A[3])}function OA(a,e,A){const d=e.paint.get(a).value;return d.kind==="constant"?d.value:A.programConfigurations.get(e.id).getMaxValue(a)}function sc(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function eu(a,e,A,d,m){if(!e[0]&&!e[1])return a;const w=U.convert(e)._mult(m);A==="viewport"&&w._rotate(-d);const B=[];for(let S=0;S<a.length;S++)B.push(a[S].sub(w));return B}let qf,Ju;Ve("CircleBucket",DA,{omit:["layers"]});var fd={get paint(){return Ju=Ju||new g({"circle-radius":new gr(nt.paint_circle["circle-radius"]),"circle-color":new gr(nt.paint_circle["circle-color"]),"circle-blur":new gr(nt.paint_circle["circle-blur"]),"circle-opacity":new gr(nt.paint_circle["circle-opacity"]),"circle-translate":new Ye(nt.paint_circle["circle-translate"]),"circle-translate-anchor":new Ye(nt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ye(nt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ye(nt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new gr(nt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new gr(nt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new gr(nt.paint_circle["circle-stroke-opacity"])})},get layout(){return qf=qf||new g({"circle-sort-key":new gr(nt.layout_circle["circle-sort-key"])})}},Es=1e-6,th=typeof Float32Array<"u"?Float32Array:Array;function Ay(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function b5(a,e,A){var d=e[0],m=e[1],w=e[2],B=e[3],S=e[4],L=e[5],N=e[6],R=e[7],j=e[8],W=e[9],et=e[10],at=e[11],ct=e[12],xt=e[13],It=e[14],$t=e[15],Qt=A[0],Vt=A[1],Ae=A[2],ve=A[3];return a[0]=Qt*d+Vt*S+Ae*j+ve*ct,a[1]=Qt*m+Vt*L+Ae*W+ve*xt,a[2]=Qt*w+Vt*N+Ae*et+ve*It,a[3]=Qt*B+Vt*R+Ae*at+ve*$t,a[4]=(Qt=A[4])*d+(Vt=A[5])*S+(Ae=A[6])*j+(ve=A[7])*ct,a[5]=Qt*m+Vt*L+Ae*W+ve*xt,a[6]=Qt*w+Vt*N+Ae*et+ve*It,a[7]=Qt*B+Vt*R+Ae*at+ve*$t,a[8]=(Qt=A[8])*d+(Vt=A[9])*S+(Ae=A[10])*j+(ve=A[11])*ct,a[9]=Qt*m+Vt*L+Ae*W+ve*xt,a[10]=Qt*w+Vt*N+Ae*et+ve*It,a[11]=Qt*B+Vt*R+Ae*at+ve*$t,a[12]=(Qt=A[12])*d+(Vt=A[13])*S+(Ae=A[14])*j+(ve=A[15])*ct,a[13]=Qt*m+Vt*L+Ae*W+ve*xt,a[14]=Qt*w+Vt*N+Ae*et+ve*It,a[15]=Qt*B+Vt*R+Ae*at+ve*$t,a}Math.hypot||(Math.hypot=function(){for(var a=0,e=arguments.length;e--;)a+=arguments[e]*arguments[e];return Math.sqrt(a)});var gd,c7=b5;function Gf(a,e,A){var d=e[0],m=e[1],w=e[2],B=e[3];return a[0]=A[0]*d+A[4]*m+A[8]*w+A[12]*B,a[1]=A[1]*d+A[5]*m+A[9]*w+A[13]*B,a[2]=A[2]*d+A[6]*m+A[10]*w+A[14]*B,a[3]=A[3]*d+A[7]*m+A[11]*w+A[15]*B,a}gd=new th(4),th!=Float32Array&&(gd[0]=0,gd[1]=0,gd[2]=0,gd[3]=0);class u7 extends x{constructor(e){super(e,fd)}createBucket(e){return new DA(e)}queryRadius(e){const A=e;return OA("circle-radius",this,A)+OA("circle-stroke-width",this,A)+sc(this.paint.get("circle-translate"))}queryIntersectsFeature(e,A,d,m,w,B,S,L){const N=eu(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),B.angle,S),R=this.paint.get("circle-radius").evaluate(A,d)+this.paint.get("circle-stroke-width").evaluate(A,d),j=this.paint.get("circle-pitch-alignment")==="map",W=j?N:function(at,ct){return at.map(xt=>x5(xt,ct))}(N,L),et=j?R*S:R;for(const at of m)for(const ct of at){const xt=j?ct:x5(ct,L);let It=et;const $t=Gf([],[ct.x,ct.y,0,1],L);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?It*=$t[3]/B.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(It*=B.cameraToCenterDistance/$t[3]),jf(W,xt,It))return!0}return!1}}function x5(a,e){const A=Gf([],[a.x,a.y,0,1],e);return new U(A[0]/A[3],A[1]/A[3])}class B5 extends DA{}let C5;Ve("HeatmapBucket",B5,{omit:["layers"]});var h7={get paint(){return C5=C5||new g({"heatmap-radius":new gr(nt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new gr(nt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ye(nt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new c(nt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ye(nt.paint_heatmap["heatmap-opacity"])})}};function ly(a,{width:e,height:A},d,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==e*A*d)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${e*A*d}`)}else m=new Uint8Array(e*A*d);return a.width=e,a.height=A,a.data=m,a}function F5(a,{width:e,height:A},d){if(e===a.width&&A===a.height)return;const m=ly({},{width:e,height:A},d);cy(a,m,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,e),height:Math.min(a.height,A)},d),a.width=e,a.height=A,a.data=m.data}function cy(a,e,A,d,m,w){if(m.width===0||m.height===0)return e;if(m.width>a.width||m.height>a.height||A.x>a.width-m.width||A.y>a.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>e.width||m.height>e.height||d.x>e.width-m.width||d.y>e.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const B=a.data,S=e.data;if(B===S)throw new Error("srcData equals dstData, so image is already copied");for(let L=0;L<m.height;L++){const N=((A.y+L)*a.width+A.x)*w,R=((d.y+L)*e.width+d.x)*w;for(let j=0;j<m.width*w;j++)S[R+j]=B[N+j]}return e}class md{constructor(e,A){ly(this,e,1,A)}resize(e){F5(this,e,1)}clone(){return new md({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,A,d,m,w){cy(e,A,d,m,w,1)}}class za{constructor(e,A){ly(this,e,4,A)}resize(e){F5(this,e,4)}replace(e,A){A?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new za({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,A,d,m,w){cy(e,A,d,m,w,4)}}function S5(a){const e={},A=a.resolution||256,d=a.clips?a.clips.length:1,m=a.image||new za({width:A,height:d});if(Math.log(A)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${A}`);const w=(B,S,L)=>{e[a.evaluationKey]=L;const N=a.expression.evaluate(e);m.data[B+S+0]=Math.floor(255*N.r/N.a),m.data[B+S+1]=Math.floor(255*N.g/N.a),m.data[B+S+2]=Math.floor(255*N.b/N.a),m.data[B+S+3]=Math.floor(255*N.a)};if(a.clips)for(let B=0,S=0;B<d;++B,S+=4*A)for(let L=0,N=0;L<A;L++,N+=4){const R=L/(A-1),{start:j,end:W}=a.clips[B];w(S,N,j*(1-R)+W*R)}else for(let B=0,S=0;B<A;B++,S+=4)w(0,S,B/(A-1));return m}Ve("AlphaImage",md),Ve("RGBAImage",za);class d7 extends x{createBucket(e){return new B5(e)}constructor(e){super(e,h7),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){e==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=S5({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let I5;var p7={get paint(){return I5=I5||new g({"hillshade-illumination-direction":new Ye(nt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ye(nt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ye(nt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ye(nt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ye(nt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ye(nt.paint_hillshade["hillshade-accent-color"])})}};class f7 extends x{constructor(e){super(e,p7)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const g7=_([{name:"a_pos",components:2,type:"Int16"}],4),{members:m7}=g7;var uy={exports:{}};function Wf(a,e,A){A=A||2;var d,m,w,B,S,L,N,R=e&&e.length,j=R?e[0]*A:a.length,W=E5(a,0,j,A,!0),et=[];if(!W||W.next===W.prev)return et;if(R&&(W=function(ct,xt,It,$t){var Qt,Vt,Ae,ve=[];for(Qt=0,Vt=xt.length;Qt<Vt;Qt++)(Ae=E5(ct,xt[Qt]*$t,Qt<Vt-1?xt[Qt+1]*$t:ct.length,$t,!1))===Ae.next&&(Ae.steiner=!0),ve.push(C7(Ae));for(ve.sort(b7),Qt=0;Qt<ve.length;Qt++)It=x7(ve[Qt],It);return It}(a,e,W,A)),a.length>80*A){d=w=a[0],m=B=a[1];for(var at=A;at<j;at+=A)(S=a[at])<d&&(d=S),(L=a[at+1])<m&&(m=L),S>w&&(w=S),L>B&&(B=L);N=(N=Math.max(w-d,B-m))!==0?32767/N:0}return yd(W,et,A,d,m,N,0),et}function E5(a,e,A,d,m){var w,B;if(m===py(a,e,A,d)>0)for(w=e;w<A;w+=d)B=P5(w,a[w],a[w+1],B);else for(w=A-d;w>=e;w-=d)B=P5(w,a[w],a[w+1],B);return B&&Xf(B,B.next)&&(wd(B),B=B.next),B}function ru(a,e){if(!a)return a;e||(e=a);var A,d=a;do if(A=!1,d.steiner||!Xf(d,d.next)&&nn(d.prev,d,d.next)!==0)d=d.next;else{if(wd(d),(d=e=d.prev)===d.next)break;A=!0}while(A||d!==e);return e}function yd(a,e,A,d,m,w,B){if(a){!B&&w&&function(R,j,W,et){var at=R;do at.z===0&&(at.z=hy(at.x,at.y,j,W,et)),at.prevZ=at.prev,at.nextZ=at.next,at=at.next;while(at!==R);at.prevZ.nextZ=null,at.prevZ=null,function(ct){var xt,It,$t,Qt,Vt,Ae,ve,De,lr=1;do{for(It=ct,ct=null,Vt=null,Ae=0;It;){for(Ae++,$t=It,ve=0,xt=0;xt<lr&&(ve++,$t=$t.nextZ);xt++);for(De=lr;ve>0||De>0&&$t;)ve!==0&&(De===0||!$t||It.z<=$t.z)?(Qt=It,It=It.nextZ,ve--):(Qt=$t,$t=$t.nextZ,De--),Vt?Vt.nextZ=Qt:ct=Qt,Qt.prevZ=Vt,Vt=Qt;It=$t}Vt.nextZ=null,lr*=2}while(Ae>1)}(at)}(a,d,m,w);for(var S,L,N=a;a.prev!==a.next;)if(S=a.prev,L=a.next,w?v7(a,d,m,w):y7(a))e.push(S.i/A|0),e.push(a.i/A|0),e.push(L.i/A|0),wd(a),a=L.next,N=L.next;else if((a=L)===N){B?B===1?yd(a=w7(ru(a),e,A),e,A,d,m,w,2):B===2&&_7(a,e,A,d,m,w):yd(ru(a),e,A,d,m,w,1);break}}}function y7(a){var e=a.prev,A=a,d=a.next;if(nn(e,A,d)>=0)return!1;for(var m=e.x,w=A.x,B=d.x,S=e.y,L=A.y,N=d.y,R=m<w?m<B?m:B:w<B?w:B,j=S<L?S<N?S:N:L<N?L:N,W=m>w?m>B?m:B:w>B?w:B,et=S>L?S>N?S:N:L>N?L:N,at=d.next;at!==e;){if(at.x>=R&&at.x<=W&&at.y>=j&&at.y<=et&&eh(m,S,w,L,B,N,at.x,at.y)&&nn(at.prev,at,at.next)>=0)return!1;at=at.next}return!0}function v7(a,e,A,d){var m=a.prev,w=a,B=a.next;if(nn(m,w,B)>=0)return!1;for(var S=m.x,L=w.x,N=B.x,R=m.y,j=w.y,W=B.y,et=S<L?S<N?S:N:L<N?L:N,at=R<j?R<W?R:W:j<W?j:W,ct=S>L?S>N?S:N:L>N?L:N,xt=R>j?R>W?R:W:j>W?j:W,It=hy(et,at,e,A,d),$t=hy(ct,xt,e,A,d),Qt=a.prevZ,Vt=a.nextZ;Qt&&Qt.z>=It&&Vt&&Vt.z<=$t;){if(Qt.x>=et&&Qt.x<=ct&&Qt.y>=at&&Qt.y<=xt&&Qt!==m&&Qt!==B&&eh(S,R,L,j,N,W,Qt.x,Qt.y)&&nn(Qt.prev,Qt,Qt.next)>=0||(Qt=Qt.prevZ,Vt.x>=et&&Vt.x<=ct&&Vt.y>=at&&Vt.y<=xt&&Vt!==m&&Vt!==B&&eh(S,R,L,j,N,W,Vt.x,Vt.y)&&nn(Vt.prev,Vt,Vt.next)>=0))return!1;Vt=Vt.nextZ}for(;Qt&&Qt.z>=It;){if(Qt.x>=et&&Qt.x<=ct&&Qt.y>=at&&Qt.y<=xt&&Qt!==m&&Qt!==B&&eh(S,R,L,j,N,W,Qt.x,Qt.y)&&nn(Qt.prev,Qt,Qt.next)>=0)return!1;Qt=Qt.prevZ}for(;Vt&&Vt.z<=$t;){if(Vt.x>=et&&Vt.x<=ct&&Vt.y>=at&&Vt.y<=xt&&Vt!==m&&Vt!==B&&eh(S,R,L,j,N,W,Vt.x,Vt.y)&&nn(Vt.prev,Vt,Vt.next)>=0)return!1;Vt=Vt.nextZ}return!0}function w7(a,e,A){var d=a;do{var m=d.prev,w=d.next.next;!Xf(m,w)&&T5(m,d,d.next,w)&&vd(m,w)&&vd(w,m)&&(e.push(m.i/A|0),e.push(d.i/A|0),e.push(w.i/A|0),wd(d),wd(d.next),d=a=w),d=d.next}while(d!==a);return ru(d)}function _7(a,e,A,d,m,w){var B=a;do{for(var S=B.next.next;S!==B.prev;){if(B.i!==S.i&&F7(B,S)){var L=U5(B,S);return B=ru(B,B.next),L=ru(L,L.next),yd(B,e,A,d,m,w,0),void yd(L,e,A,d,m,w,0)}S=S.next}B=B.next}while(B!==a)}function b7(a,e){return a.x-e.x}function x7(a,e){var A=function(m,w){var B,S=w,L=m.x,N=m.y,R=-1/0;do{if(N<=S.y&&N>=S.next.y&&S.next.y!==S.y){var j=S.x+(N-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(j<=L&&j>R&&(R=j,B=S.x<S.next.x?S:S.next,j===L))return B}S=S.next}while(S!==w);if(!B)return null;var W,et=B,at=B.x,ct=B.y,xt=1/0;S=B;do L>=S.x&&S.x>=at&&L!==S.x&&eh(N<ct?L:R,N,at,ct,N<ct?R:L,N,S.x,S.y)&&(W=Math.abs(N-S.y)/(L-S.x),vd(S,m)&&(W<xt||W===xt&&(S.x>B.x||S.x===B.x&&B7(B,S)))&&(B=S,xt=W)),S=S.next;while(S!==et);return B}(a,e);if(!A)return e;var d=U5(A,a);return ru(d,d.next),ru(A,A.next)}function B7(a,e){return nn(a.prev,a,e.prev)<0&&nn(e.next,a,a.next)<0}function hy(a,e,A,d,m){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-A)*m|0)|a<<8))|a<<4))|a<<2))|a<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-d)*m|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function C7(a){var e=a,A=a;do(e.x<A.x||e.x===A.x&&e.y<A.y)&&(A=e),e=e.next;while(e!==a);return A}function eh(a,e,A,d,m,w,B,S){return(m-B)*(e-S)>=(a-B)*(w-S)&&(a-B)*(d-S)>=(A-B)*(e-S)&&(A-B)*(w-S)>=(m-B)*(d-S)}function F7(a,e){return a.next.i!==e.i&&a.prev.i!==e.i&&!function(A,d){var m=A;do{if(m.i!==A.i&&m.next.i!==A.i&&m.i!==d.i&&m.next.i!==d.i&&T5(m,m.next,A,d))return!0;m=m.next}while(m!==A);return!1}(a,e)&&(vd(a,e)&&vd(e,a)&&function(A,d){var m=A,w=!1,B=(A.x+d.x)/2,S=(A.y+d.y)/2;do m.y>S!=m.next.y>S&&m.next.y!==m.y&&B<(m.next.x-m.x)*(S-m.y)/(m.next.y-m.y)+m.x&&(w=!w),m=m.next;while(m!==A);return w}(a,e)&&(nn(a.prev,a,e.prev)||nn(a,e.prev,e))||Xf(a,e)&&nn(a.prev,a,a.next)>0&&nn(e.prev,e,e.next)>0)}function nn(a,e,A){return(e.y-a.y)*(A.x-e.x)-(e.x-a.x)*(A.y-e.y)}function Xf(a,e){return a.x===e.x&&a.y===e.y}function T5(a,e,A,d){var m=Yf(nn(a,e,A)),w=Yf(nn(a,e,d)),B=Yf(nn(A,d,a)),S=Yf(nn(A,d,e));return m!==w&&B!==S||!(m!==0||!Zf(a,A,e))||!(w!==0||!Zf(a,d,e))||!(B!==0||!Zf(A,a,d))||!(S!==0||!Zf(A,e,d))}function Zf(a,e,A){return e.x<=Math.max(a.x,A.x)&&e.x>=Math.min(a.x,A.x)&&e.y<=Math.max(a.y,A.y)&&e.y>=Math.min(a.y,A.y)}function Yf(a){return a>0?1:a<0?-1:0}function vd(a,e){return nn(a.prev,a,a.next)<0?nn(a,e,a.next)>=0&&nn(a,a.prev,e)>=0:nn(a,e,a.prev)<0||nn(a,a.next,e)<0}function U5(a,e){var A=new dy(a.i,a.x,a.y),d=new dy(e.i,e.x,e.y),m=a.next,w=e.prev;return a.next=e,e.prev=a,A.next=m,m.prev=A,d.next=A,A.prev=d,w.next=d,d.prev=w,d}function P5(a,e,A,d){var m=new dy(a,e,A);return d?(m.next=d.next,m.prev=d,d.next.prev=m,d.next=m):(m.prev=m,m.next=m),m}function wd(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function dy(a,e,A){this.i=a,this.x=e,this.y=A,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function py(a,e,A,d){for(var m=0,w=e,B=A-d;w<A;w+=d)m+=(a[B]-a[w])*(a[w+1]+a[B+1]),B=w;return m}uy.exports=Wf,uy.exports.default=Wf,Wf.deviation=function(a,e,A,d){var m=e&&e.length,w=Math.abs(py(a,0,m?e[0]*A:a.length,A));if(m)for(var B=0,S=e.length;B<S;B++)w-=Math.abs(py(a,e[B]*A,B<S-1?e[B+1]*A:a.length,A));var L=0;for(B=0;B<d.length;B+=3){var N=d[B]*A,R=d[B+1]*A,j=d[B+2]*A;L+=Math.abs((a[N]-a[j])*(a[R+1]-a[N+1])-(a[N]-a[R])*(a[j+1]-a[N+1]))}return w===0&&L===0?0:Math.abs((L-w)/w)},Wf.flatten=function(a){for(var e=a[0][0].length,A={vertices:[],holes:[],dimensions:e},d=0,m=0;m<a.length;m++){for(var w=0;w<a[m].length;w++)for(var B=0;B<e;B++)A.vertices.push(a[m][w][B]);m>0&&A.holes.push(d+=a[m-1].length)}return A};var L5=v(uy.exports);function fy(a,e,A){const d=A.patternDependencies;let m=!1;for(const w of e){const B=w.paint.get(`${a}-pattern`);B.isConstant()||(m=!0);const S=B.constantOr(null);S&&(m=!0,d[S.to]=!0,d[S.from]=!0)}return m}function gy(a,e,A,d,m){const w=m.patternDependencies;for(const B of e){const S=B.paint.get(`${a}-pattern`).value;if(S.kind!=="constant"){let L=S.evaluate({zoom:d-1},A,{},m.availableImages),N=S.evaluate({zoom:d},A,{},m.availableImages),R=S.evaluate({zoom:d+1},A,{},m.availableImages);L=L&&L.name?L.name:L,N=N&&N.name?N.name:N,R=R&&R.name?R.name:R,w[L]=!0,w[N]=!0,w[R]=!0,A.patterns[B.id]={min:L,mid:N,max:R}}}return A}class my{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(A=>A.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Wi,this.indexArray=new rn,this.indexArray2=new xi,this.programConfigurations=new yl(e.layers,e.zoom),this.segments=new Ni,this.segments2=new Ni,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(e,A,d){this.hasPattern=fy("fill",this.layers,A);const m=this.layers[0].layout.get("fill-sort-key"),w=!m.isConstant(),B=[];for(const{feature:S,id:L,index:N,sourceLayerIndex:R}of e){const j=this.layers[0]._featureFilter.needGeometry,W=vl(S,j);if(!this.layers[0]._featureFilter.filter(new ti(this.zoom),W,d))continue;const et=w?m.evaluate(W,{},d,A.availableImages):void 0,at={id:L,properties:S.properties,type:S.type,sourceLayerIndex:R,index:N,geometry:j?W.geometry:kA(S),patterns:{},sortKey:et};B.push(at)}w&&B.sort((S,L)=>S.sortKey-L.sortKey);for(const S of B){const{geometry:L,index:N,sourceLayerIndex:R}=S;if(this.hasPattern){const j=gy("fill",this.layers,S,this.zoom,A);this.patternFeatures.push(j)}else this.addFeature(S,L,N,d,{});A.featureIndex.insert(e[N].feature,L,N,R,this.index)}}update(e,A,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,A,this.stateDependentLayers,d)}addFeatures(e,A,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,A,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,m7),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,A,d,m,w){for(const B of ao(A,500)){let S=0;for(const et of B)S+=et.length;const L=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),N=L.vertexLength,R=[],j=[];for(const et of B){if(et.length===0)continue;et!==B[0]&&j.push(R.length/2);const at=this.segments2.prepareSegment(et.length,this.layoutVertexArray,this.indexArray2),ct=at.vertexLength;this.layoutVertexArray.emplaceBack(et[0].x,et[0].y),this.indexArray2.emplaceBack(ct+et.length-1,ct),R.push(et[0].x),R.push(et[0].y);for(let xt=1;xt<et.length;xt++)this.layoutVertexArray.emplaceBack(et[xt].x,et[xt].y),this.indexArray2.emplaceBack(ct+xt-1,ct+xt),R.push(et[xt].x),R.push(et[xt].y);at.vertexLength+=et.length,at.primitiveLength+=et.length}const W=L5(R,j);for(let et=0;et<W.length;et+=3)this.indexArray.emplaceBack(N+W[et],N+W[et+1],N+W[et+2]);L.vertexLength+=S,L.primitiveLength+=W.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,d,w,m)}}let Q5,M5;Ve("FillBucket",my,{omit:["layers","patternFeatures"]});var S7={get paint(){return M5=M5||new g({"fill-antialias":new Ye(nt.paint_fill["fill-antialias"]),"fill-opacity":new gr(nt.paint_fill["fill-opacity"]),"fill-color":new gr(nt.paint_fill["fill-color"]),"fill-outline-color":new gr(nt.paint_fill["fill-outline-color"]),"fill-translate":new Ye(nt.paint_fill["fill-translate"]),"fill-translate-anchor":new Ye(nt.paint_fill["fill-translate-anchor"]),"fill-pattern":new b(nt.paint_fill["fill-pattern"])})},get layout(){return Q5=Q5||new g({"fill-sort-key":new gr(nt.layout_fill["fill-sort-key"])})}};class I7 extends x{constructor(e){super(e,S7)}recalculate(e,A){super.recalculate(e,A);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new my(e)}queryRadius(){return sc(this.paint.get("fill-translate"))}queryIntersectsFeature(e,A,d,m,w,B,S){return Kf(eu(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),B.angle,S),m)}isTileClipped(){return!0}}const E7=_([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),T7=_([{name:"a_centroid",components:2,type:"Int16"}],4),{members:U7}=E7;var ac={},P7=C,k5=rh;function rh(a,e,A,d,m){this.properties={},this.extent=A,this.type=0,this._pbf=a,this._geometry=-1,this._keys=d,this._values=m,a.readFields(L7,this,e)}function L7(a,e,A){a==1?e.id=A.readVarint():a==2?function(d,m){for(var w=d.readVarint()+d.pos;d.pos<w;){var B=m._keys[d.readVarint()],S=m._values[d.readVarint()];m.properties[B]=S}}(A,e):a==3?e.type=A.readVarint():a==4&&(e._geometry=A.pos)}function Q7(a){for(var e,A,d=0,m=0,w=a.length,B=w-1;m<w;B=m++)d+=((A=a[B]).x-(e=a[m]).x)*(e.y+A.y);return d}rh.types=["Unknown","Point","LineString","Polygon"],rh.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var e,A=a.readVarint()+a.pos,d=1,m=0,w=0,B=0,S=[];a.pos<A;){if(m<=0){var L=a.readVarint();d=7&L,m=L>>3}if(m--,d===1||d===2)w+=a.readSVarint(),B+=a.readSVarint(),d===1&&(e&&S.push(e),e=[]),e.push(new P7(w,B));else{if(d!==7)throw new Error("unknown command "+d);e&&e.push(e[0].clone())}}return e&&S.push(e),S},rh.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var e=a.readVarint()+a.pos,A=1,d=0,m=0,w=0,B=1/0,S=-1/0,L=1/0,N=-1/0;a.pos<e;){if(d<=0){var R=a.readVarint();A=7&R,d=R>>3}if(d--,A===1||A===2)(m+=a.readSVarint())<B&&(B=m),m>S&&(S=m),(w+=a.readSVarint())<L&&(L=w),w>N&&(N=w);else if(A!==7)throw new Error("unknown command "+A)}return[B,L,S,N]},rh.prototype.toGeoJSON=function(a,e,A){var d,m,w=this.extent*Math.pow(2,A),B=this.extent*a,S=this.extent*e,L=this.loadGeometry(),N=rh.types[this.type];function R(et){for(var at=0;at<et.length;at++){var ct=et[at];et[at]=[360*(ct.x+B)/w-180,360/Math.PI*Math.atan(Math.exp((180-360*(ct.y+S)/w)*Math.PI/180))-90]}}switch(this.type){case 1:var j=[];for(d=0;d<L.length;d++)j[d]=L[d][0];R(L=j);break;case 2:for(d=0;d<L.length;d++)R(L[d]);break;case 3:for(L=function(et){var at=et.length;if(at<=1)return[et];for(var ct,xt,It=[],$t=0;$t<at;$t++){var Qt=Q7(et[$t]);Qt!==0&&(xt===void 0&&(xt=Qt<0),xt===Qt<0?(ct&&It.push(ct),ct=[et[$t]]):ct.push(et[$t]))}return ct&&It.push(ct),It}(L),d=0;d<L.length;d++)for(m=0;m<L[d].length;m++)R(L[d][m])}L.length===1?L=L[0]:N="Multi"+N;var W={type:"Feature",geometry:{type:N,coordinates:L},properties:this.properties};return"id"in this&&(W.id=this.id),W};var M7=k5,D5=N5;function N5(a,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(k7,this,e),this.length=this._features.length}function k7(a,e,A){a===15?e.version=A.readVarint():a===1?e.name=A.readString():a===5?e.extent=A.readVarint():a===2?e._features.push(A.pos):a===3?e._keys.push(A.readString()):a===4&&e._values.push(function(d){for(var m=null,w=d.readVarint()+d.pos;d.pos<w;){var B=d.readVarint()>>3;m=B===1?d.readString():B===2?d.readFloat():B===3?d.readDouble():B===4?d.readVarint64():B===5?d.readVarint():B===6?d.readSVarint():B===7?d.readBoolean():null}return m}(A))}N5.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var e=this._pbf.readVarint()+this._pbf.pos;return new M7(this._pbf,e,this.extent,this._keys,this._values)};var D7=D5;function N7(a,e,A){if(a===3){var d=new D7(A,A.readVarint()+A.pos);d.length&&(e[d.name]=d)}}ac.VectorTile=function(a,e){this.layers=a.readFields(N7,{},e)},ac.VectorTileFeature=k5,ac.VectorTileLayer=D5;const O7=ac.VectorTileFeature.types,yy=Math.pow(2,13);function _d(a,e,A,d,m,w,B,S){a.emplaceBack(e,A,2*Math.floor(d*yy)+B,m*yy*2,w*yy*2,Math.round(S))}class vy{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(A=>A.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new un,this.centroidVertexArray=new Ei,this.indexArray=new rn,this.programConfigurations=new yl(e.layers,e.zoom),this.segments=new Ni,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(e,A,d){this.features=[],this.hasPattern=fy("fill-extrusion",this.layers,A);for(const{feature:m,id:w,index:B,sourceLayerIndex:S}of e){const L=this.layers[0]._featureFilter.needGeometry,N=vl(m,L);if(!this.layers[0]._featureFilter.filter(new ti(this.zoom),N,d))continue;const R={id:w,sourceLayerIndex:S,index:B,geometry:L?N.geometry:kA(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(gy("fill-extrusion",this.layers,R,this.zoom,A)):this.addFeature(R,R.geometry,B,d,{}),A.featureIndex.insert(m,R.geometry,B,S,this.index,!0)}}addFeatures(e,A,d){for(const m of this.features){const{geometry:w}=m;this.addFeature(m,w,m.index,A,d)}}update(e,A,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,A,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,U7),this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,T7.members,!0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(e,A,d,m,w){for(const B of ao(A,500)){const S={x:0,y:0,vertexCount:0};let L=0;for(const at of B)L+=at.length;let N=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const at of B){if(at.length===0||z7(at))continue;let ct=0;for(let xt=0;xt<at.length;xt++){const It=at[xt];if(xt>=1){const $t=at[xt-1];if(!R7(It,$t)){N.vertexLength+4>Ni.MAX_VERTEX_ARRAY_LENGTH&&(N=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Qt=It.sub($t)._perp()._unit(),Vt=$t.dist(It);ct+Vt>32768&&(ct=0),_d(this.layoutVertexArray,It.x,It.y,Qt.x,Qt.y,0,0,ct),_d(this.layoutVertexArray,It.x,It.y,Qt.x,Qt.y,0,1,ct),S.x+=2*It.x,S.y+=2*It.y,S.vertexCount+=2,ct+=Vt,_d(this.layoutVertexArray,$t.x,$t.y,Qt.x,Qt.y,0,0,ct),_d(this.layoutVertexArray,$t.x,$t.y,Qt.x,Qt.y,0,1,ct),S.x+=2*$t.x,S.y+=2*$t.y,S.vertexCount+=2;const Ae=N.vertexLength;this.indexArray.emplaceBack(Ae,Ae+2,Ae+1),this.indexArray.emplaceBack(Ae+1,Ae+2,Ae+3),N.vertexLength+=4,N.primitiveLength+=2}}}}if(N.vertexLength+L>Ni.MAX_VERTEX_ARRAY_LENGTH&&(N=this.segments.prepareSegment(L,this.layoutVertexArray,this.indexArray)),O7[e.type]!=="Polygon")continue;const R=[],j=[],W=N.vertexLength;for(const at of B)if(at.length!==0){at!==B[0]&&j.push(R.length/2);for(let ct=0;ct<at.length;ct++){const xt=at[ct];_d(this.layoutVertexArray,xt.x,xt.y,0,0,1,1,0),S.x+=xt.x,S.y+=xt.y,S.vertexCount+=1,R.push(xt.x),R.push(xt.y)}}const et=L5(R,j);for(let at=0;at<et.length;at+=3)this.indexArray.emplaceBack(W+et[at],W+et[at+2],W+et[at+1]);N.primitiveLength+=et.length/3,N.vertexLength+=L;for(let at=0;at<S.vertexCount;at++){const ct=Math.floor(S.x/S.vertexCount),xt=Math.floor(S.y/S.vertexCount);this.centroidVertexArray.emplaceBack(ct,xt)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,d,w,m)}}function R7(a,e){return a.x===e.x&&(a.x<0||a.x>Oi)||a.y===e.y&&(a.y<0||a.y>Oi)}function z7(a){return a.every(e=>e.x<0)||a.every(e=>e.x>Oi)||a.every(e=>e.y<0)||a.every(e=>e.y>Oi)}let O5;Ve("FillExtrusionBucket",vy,{omit:["layers","features"]});var H7={get paint(){return O5=O5||new g({"fill-extrusion-opacity":new Ye(nt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new gr(nt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ye(nt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ye(nt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new b(nt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new gr(nt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new gr(nt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ye(nt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class V7 extends x{constructor(e){super(e,H7)}createBucket(e){return new vy(e)}queryRadius(){return sc(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(e,A,d,m,w,B,S,L){const N=eu(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),B.angle,S),R=this.paint.get("fill-extrusion-height").evaluate(A,d),j=this.paint.get("fill-extrusion-base").evaluate(A,d),W=function(at,ct,xt,It){const $t=[];for(const Qt of at){const Vt=[Qt.x,Qt.y,0,1];Gf(Vt,Vt,ct),$t.push(new U(Vt[0]/Vt[3],Vt[1]/Vt[3]))}return $t}(N,L),et=function(at,ct,xt,It){const $t=[],Qt=[],Vt=It[8]*ct,Ae=It[9]*ct,ve=It[10]*ct,De=It[11]*ct,lr=It[8]*xt,ze=It[9]*xt,Pe=It[10]*xt,ir=It[11]*xt;for(const qe of at){const je=[],fe=[];for(const nr of qe){const Je=nr.x,Cr=nr.y,mi=It[0]*Je+It[4]*Cr+It[12],hi=It[1]*Je+It[5]*Cr+It[13],Tn=It[2]*Je+It[6]*Cr+It[14],xo=It[3]*Je+It[7]*Cr+It[15],Wn=Tn+ve,Zi=xo+De,Ts=mi+lr,Us=hi+ze,Ps=Tn+Pe,Yi=xo+ir,Un=new U((mi+Vt)/Zi,(hi+Ae)/Zi);Un.z=Wn/Zi,je.push(Un);const cs=new U(Ts/Yi,Us/Yi);cs.z=Ps/Yi,fe.push(cs)}$t.push(je),Qt.push(fe)}return[$t,Qt]}(m,j,R,L);return function(at,ct,xt){let It=1/0;Kf(xt,ct)&&(It=R5(xt,ct[0]));for(let $t=0;$t<ct.length;$t++){const Qt=ct[$t],Vt=at[$t];for(let Ae=0;Ae<Qt.length-1;Ae++){const ve=Qt[Ae],De=[ve,Qt[Ae+1],Vt[Ae+1],Vt[Ae],ve];Vf(xt,De)&&(It=Math.min(It,R5(xt,De)))}}return It!==1/0&&It}(et[0],et[1],W)}}function bd(a,e){return a.x*e.x+a.y*e.y}function R5(a,e){if(a.length===1){let A=0;const d=e[A++];let m;for(;!m||d.equals(m);)if(m=e[A++],!m)return 1/0;for(;A<e.length;A++){const w=e[A],B=a[0],S=m.sub(d),L=w.sub(d),N=B.sub(d),R=bd(S,S),j=bd(S,L),W=bd(L,L),et=bd(N,S),at=bd(N,L),ct=R*W-j*j,xt=(W*et-j*at)/ct,It=(R*at-j*et)/ct,$t=d.z*(1-xt-It)+m.z*xt+w.z*It;if(isFinite($t))return $t}return 1/0}{let A=1/0;for(const d of e)A=Math.min(A,d.z);return A}}const j7=_([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:K7}=j7,$7=_([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:q7}=$7,G7=ac.VectorTileFeature.types,W7=Math.cos(Math.PI/180*37.5),z5=Math.pow(2,14)/.5;class wy{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(A=>A.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(A=>{this.gradients[A.id]={}}),this.layoutVertexArray=new os,this.layoutVertexArray2=new Xi,this.indexArray=new rn,this.programConfigurations=new yl(e.layers,e.zoom),this.segments=new Ni,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(e,A,d){this.hasPattern=fy("line",this.layers,A);const m=this.layers[0].layout.get("line-sort-key"),w=!m.isConstant(),B=[];for(const{feature:S,id:L,index:N,sourceLayerIndex:R}of e){const j=this.layers[0]._featureFilter.needGeometry,W=vl(S,j);if(!this.layers[0]._featureFilter.filter(new ti(this.zoom),W,d))continue;const et=w?m.evaluate(W,{},d):void 0,at={id:L,properties:S.properties,type:S.type,sourceLayerIndex:R,index:N,geometry:j?W.geometry:kA(S),patterns:{},sortKey:et};B.push(at)}w&&B.sort((S,L)=>S.sortKey-L.sortKey);for(const S of B){const{geometry:L,index:N,sourceLayerIndex:R}=S;if(this.hasPattern){const j=gy("line",this.layers,S,this.zoom,A);this.patternFeatures.push(j)}else this.addFeature(S,L,N,d,{});A.featureIndex.insert(e[N].feature,L,N,R,this.index)}}update(e,A,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,A,this.stateDependentLayers,d)}addFeatures(e,A,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,A,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,q7)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,K7),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,A,d,m,w){const B=this.layers[0].layout,S=B.get("line-join").evaluate(e,{}),L=B.get("line-cap"),N=B.get("line-miter-limit"),R=B.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const j of A)this.addLine(j,e,S,L,N,R);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,d,w,m)}addLine(e,A,d,m,w,B){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let It=0;It<e.length-1;It++)this.totalDistance+=e[It].dist(e[It+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=G7[A.type]==="Polygon";let L=e.length;for(;L>=2&&e[L-1].equals(e[L-2]);)L--;let N=0;for(;N<L-1&&e[N].equals(e[N+1]);)N++;if(L<(S?3:2))return;d==="bevel"&&(w=1.05);const R=this.overscaling<=16?15*Oi/(512*this.overscaling):0,j=this.segments.prepareSegment(10*L,this.layoutVertexArray,this.indexArray);let W,et,at,ct,xt;this.e1=this.e2=-1,S&&(W=e[L-2],xt=e[N].sub(W)._unit()._perp());for(let It=N;It<L;It++){if(at=It===L-1?S?e[N+1]:void 0:e[It+1],at&&e[It].equals(at))continue;xt&&(ct=xt),W&&(et=W),W=e[It],xt=at?at.sub(W)._unit()._perp():ct,ct=ct||xt;let $t=ct.add(xt);$t.x===0&&$t.y===0||$t._unit();const Qt=ct.x*xt.x+ct.y*xt.y,Vt=$t.x*xt.x+$t.y*xt.y,Ae=Vt!==0?1/Vt:1/0,ve=2*Math.sqrt(2-2*Vt),De=Vt<W7&&et&&at,lr=ct.x*xt.y-ct.y*xt.x>0;if(De&&It>N){const ir=W.dist(et);if(ir>2*R){const qe=W.sub(W.sub(et)._mult(R/ir)._round());this.updateDistance(et,qe),this.addCurrentVertex(qe,ct,0,0,j),et=qe}}const ze=et&&at;let Pe=ze?d:S?"butt":m;if(ze&&Pe==="round"&&(Ae<B?Pe="miter":Ae<=2&&(Pe="fakeround")),Pe==="miter"&&Ae>w&&(Pe="bevel"),Pe==="bevel"&&(Ae>2&&(Pe="flipbevel"),Ae<w&&(Pe="miter")),et&&this.updateDistance(et,W),Pe==="miter")$t._mult(Ae),this.addCurrentVertex(W,$t,0,0,j);else if(Pe==="flipbevel"){if(Ae>100)$t=xt.mult(-1);else{const ir=Ae*ct.add(xt).mag()/ct.sub(xt).mag();$t._perp()._mult(ir*(lr?-1:1))}this.addCurrentVertex(W,$t,0,0,j),this.addCurrentVertex(W,$t.mult(-1),0,0,j)}else if(Pe==="bevel"||Pe==="fakeround"){const ir=-Math.sqrt(Ae*Ae-1),qe=lr?ir:0,je=lr?0:ir;if(et&&this.addCurrentVertex(W,ct,qe,je,j),Pe==="fakeround"){const fe=Math.round(180*ve/Math.PI/20);for(let nr=1;nr<fe;nr++){let Je=nr/fe;if(Je!==.5){const mi=Je-.5;Je+=Je*mi*(Je-1)*((1.0904+Qt*(Qt*(3.55645-1.43519*Qt)-3.2452))*mi*mi+(.848013+Qt*(.215638*Qt-1.06021)))}const Cr=xt.sub(ct)._mult(Je)._add(ct)._unit()._mult(lr?-1:1);this.addHalfVertex(W,Cr.x,Cr.y,!1,lr,0,j)}}at&&this.addCurrentVertex(W,xt,-qe,-je,j)}else if(Pe==="butt")this.addCurrentVertex(W,$t,0,0,j);else if(Pe==="square"){const ir=et?1:-1;this.addCurrentVertex(W,$t,ir,ir,j)}else Pe==="round"&&(et&&(this.addCurrentVertex(W,ct,0,0,j),this.addCurrentVertex(W,ct,1,1,j,!0)),at&&(this.addCurrentVertex(W,xt,-1,-1,j,!0),this.addCurrentVertex(W,xt,0,0,j)));if(De&&It<L-1){const ir=W.dist(at);if(ir>2*R){const qe=W.add(at.sub(W)._mult(R/ir)._round());this.updateDistance(W,qe),this.addCurrentVertex(qe,xt,0,0,j),W=qe}}}}addCurrentVertex(e,A,d,m,w,B=!1){const S=A.y*m-A.x,L=-A.y-A.x*m;this.addHalfVertex(e,A.x+A.y*d,A.y-A.x*d,B,!1,d,w),this.addHalfVertex(e,S,L,B,!0,-m,w),this.distance>z5/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(e,A,d,m,w,B))}addHalfVertex({x:e,y:A},d,m,w,B,S,L){const N=.5*(this.lineClips?this.scaledDistance*(z5-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e<<1)+(w?1:0),(A<<1)+(B?1:0),Math.round(63*d)+128,Math.round(63*m)+128,1+(S===0?0:S<0?-1:1)|(63&N)<<2,N>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const R=L.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,R),L.primitiveLength++),B?this.e2=R:this.e1=R}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,A){this.distance+=e.dist(A),this.updateScaledDistance()}}let H5,V5;Ve("LineBucket",wy,{omit:["layers","patternFeatures"]});var j5={get paint(){return V5=V5||new g({"line-opacity":new gr(nt.paint_line["line-opacity"]),"line-color":new gr(nt.paint_line["line-color"]),"line-translate":new Ye(nt.paint_line["line-translate"]),"line-translate-anchor":new Ye(nt.paint_line["line-translate-anchor"]),"line-width":new gr(nt.paint_line["line-width"]),"line-gap-width":new gr(nt.paint_line["line-gap-width"]),"line-offset":new gr(nt.paint_line["line-offset"]),"line-blur":new gr(nt.paint_line["line-blur"]),"line-dasharray":new r(nt.paint_line["line-dasharray"]),"line-pattern":new b(nt.paint_line["line-pattern"]),"line-gradient":new c(nt.paint_line["line-gradient"])})},get layout(){return H5=H5||new g({"line-cap":new Ye(nt.layout_line["line-cap"]),"line-join":new gr(nt.layout_line["line-join"]),"line-miter-limit":new Ye(nt.layout_line["line-miter-limit"]),"line-round-limit":new Ye(nt.layout_line["line-round-limit"]),"line-sort-key":new gr(nt.layout_line["line-sort-key"])})}};class X7 extends gr{possiblyEvaluate(e,A){return A=new ti(Math.floor(A.zoom),{now:A.now,fadeDuration:A.fadeDuration,zoomHistory:A.zoomHistory,transition:A.transition}),super.possiblyEvaluate(e,A)}evaluate(e,A,d,m){return A=Ft({},A,{zoom:Math.floor(A.zoom)}),super.evaluate(e,A,d,m)}}let Jf;class Z7 extends x{constructor(e){super(e,j5),this.gradientVersion=0,Jf||(Jf=new X7(j5.paint.properties["line-width"].specification),Jf.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(e){if(e==="line-gradient"){const A=this.gradientExpression();this.stepInterpolant=!!function(d){return d._styleExpression!==void 0}(A)&&A._styleExpression.expression instanceof Ho,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(e,A){super.recalculate(e,A),this.paint._values["line-floorwidth"]=Jf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new wy(e)}queryRadius(e){const A=e,d=K5(OA("line-width",this,A),OA("line-gap-width",this,A)),m=OA("line-offset",this,A);return d/2+Math.abs(m)+sc(this.paint.get("line-translate"))}queryIntersectsFeature(e,A,d,m,w,B,S){const L=eu(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),B.angle,S),N=S/2*K5(this.paint.get("line-width").evaluate(A,d),this.paint.get("line-gap-width").evaluate(A,d)),R=this.paint.get("line-offset").evaluate(A,d);return R&&(m=function(j,W){const et=[];for(let at=0;at<j.length;at++){const ct=j[at],xt=[];for(let It=0;It<ct.length;It++){const $t=ct[It-1],Qt=ct[It],Vt=ct[It+1],Ae=It===0?new U(0,0):Qt.sub($t)._unit()._perp(),ve=It===ct.length-1?new U(0,0):Vt.sub(Qt)._unit()._perp(),De=Ae._add(ve)._unit(),lr=De.x*ve.x+De.y*ve.y;lr!==0&&De._mult(1/lr),xt.push(De._mult(W)._add(Qt))}et.push(xt)}return et}(m,R*S)),function(j,W,et){for(let at=0;at<W.length;at++){const ct=W[at];if(j.length>=3){for(let xt=0;xt<ct.length;xt++)if(Xs(j,ct[xt]))return!0}if($f(j,ct,et))return!0}return!1}(L,m,N)}isTileClipped(){return!0}}function K5(a,e){return e>0?e+2*a:a}const Y7=_([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),J7=_([{name:"a_projected_pos",components:3,type:"Float32"}],4);_([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const tz=_([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);_([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const $5=_([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ez=_([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function rz(a,e,A){return a.sections.forEach(d=>{d.text=function(m,w,B){const S=w.layout.get("text-transform").evaluate(B,{});return S==="uppercase"?m=m.toLocaleUpperCase():S==="lowercase"&&(m=m.toLocaleLowerCase()),vo.applyArabicShaping&&(m=vo.applyArabicShaping(m)),m}(d.text,e,A)}),a}_([{name:"triangle",components:3,type:"Uint16"}]),_([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),_([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),_([{type:"Float32",name:"offsetX"}]),_([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),_([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const xd={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Bn=24,q5=ui,G5=function(a,e,A,d,m){var w,B,S=8*m-d-1,L=(1<<S)-1,N=L>>1,R=-7,j=m-1,W=-1,et=a[e+j];for(j+=W,w=et&(1<<-R)-1,et>>=-R,R+=S;R>0;w=256*w+a[e+j],j+=W,R-=8);for(B=w&(1<<-R)-1,w>>=-R,R+=d;R>0;B=256*B+a[e+j],j+=W,R-=8);if(w===0)w=1-N;else{if(w===L)return B?NaN:1/0*(et?-1:1);B+=Math.pow(2,d),w-=N}return(et?-1:1)*B*Math.pow(2,w-d)},W5=function(a,e,A,d,m,w){var B,S,L,N=8*w-m-1,R=(1<<N)-1,j=R>>1,W=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,et=0,at=1,ct=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(S=isNaN(e)?1:0,B=R):(B=Math.floor(Math.log(e)/Math.LN2),e*(L=Math.pow(2,-B))<1&&(B--,L*=2),(e+=B+j>=1?W/L:W*Math.pow(2,1-j))*L>=2&&(B++,L/=2),B+j>=R?(S=0,B=R):B+j>=1?(S=(e*L-1)*Math.pow(2,m),B+=j):(S=e*Math.pow(2,j-1)*Math.pow(2,m),B=0));m>=8;a[A+et]=255&S,et+=at,S/=256,m-=8);for(B=B<<m|S,N+=m;N>0;a[A+et]=255&B,et+=at,B/=256,N-=8);a[A+et-at]|=128*ct};function ui(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}ui.Varint=0,ui.Fixed64=1,ui.Bytes=2,ui.Fixed32=5;var _y=4294967296,X5=1/_y,Z5=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function wl(a){return a.type===ui.Bytes?a.readVarint()+a.pos:a.pos+1}function ih(a,e,A){return A?4294967296*e+(a>>>0):4294967296*(e>>>0)+(a>>>0)}function Y5(a,e,A){var d=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));A.realloc(d);for(var m=A.pos-1;m>=a;m--)A.buf[m+d]=A.buf[m]}function iz(a,e){for(var A=0;A<a.length;A++)e.writeVarint(a[A])}function nz(a,e){for(var A=0;A<a.length;A++)e.writeSVarint(a[A])}function sz(a,e){for(var A=0;A<a.length;A++)e.writeFloat(a[A])}function az(a,e){for(var A=0;A<a.length;A++)e.writeDouble(a[A])}function oz(a,e){for(var A=0;A<a.length;A++)e.writeBoolean(a[A])}function Az(a,e){for(var A=0;A<a.length;A++)e.writeFixed32(a[A])}function lz(a,e){for(var A=0;A<a.length;A++)e.writeSFixed32(a[A])}function cz(a,e){for(var A=0;A<a.length;A++)e.writeFixed64(a[A])}function uz(a,e){for(var A=0;A<a.length;A++)e.writeSFixed64(a[A])}function tg(a,e){return(a[e]|a[e+1]<<8|a[e+2]<<16)+16777216*a[e+3]}function nh(a,e,A){a[A]=e,a[A+1]=e>>>8,a[A+2]=e>>>16,a[A+3]=e>>>24}function J5(a,e){return(a[e]|a[e+1]<<8|a[e+2]<<16)+(a[e+3]<<24)}ui.prototype={destroy:function(){this.buf=null},readFields:function(a,e,A){for(A=A||this.length;this.pos<A;){var d=this.readVarint(),m=d>>3,w=this.pos;this.type=7&d,a(m,e,this),this.pos===w&&this.skip(d)}return e},readMessage:function(a,e){return this.readFields(a,e,this.readVarint()+this.pos)},readFixed32:function(){var a=tg(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=J5(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=tg(this.buf,this.pos)+tg(this.buf,this.pos+4)*_y;return this.pos+=8,a},readSFixed64:function(){var a=tg(this.buf,this.pos)+J5(this.buf,this.pos+4)*_y;return this.pos+=8,a},readFloat:function(){var a=G5(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=G5(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var e,A,d=this.buf;return e=127&(A=d[this.pos++]),A<128?e:(e|=(127&(A=d[this.pos++]))<<7,A<128?e:(e|=(127&(A=d[this.pos++]))<<14,A<128?e:(e|=(127&(A=d[this.pos++]))<<21,A<128?e:function(m,w,B){var S,L,N=B.buf;if(S=(112&(L=N[B.pos++]))>>4,L<128||(S|=(127&(L=N[B.pos++]))<<3,L<128)||(S|=(127&(L=N[B.pos++]))<<10,L<128)||(S|=(127&(L=N[B.pos++]))<<17,L<128)||(S|=(127&(L=N[B.pos++]))<<24,L<128)||(S|=(1&(L=N[B.pos++]))<<31,L<128))return ih(m,S,w);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(A=d[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var a=this.readVarint()+this.pos,e=this.pos;return this.pos=a,a-e>=12&&Z5?function(A,d,m){return Z5.decode(A.subarray(d,m))}(this.buf,e,a):function(A,d,m){for(var w="",B=d;B<m;){var S,L,N,R=A[B],j=null,W=R>239?4:R>223?3:R>191?2:1;if(B+W>m)break;W===1?R<128&&(j=R):W===2?(192&(S=A[B+1]))==128&&(j=(31&R)<<6|63&S)<=127&&(j=null):W===3?(L=A[B+2],(192&(S=A[B+1]))==128&&(192&L)==128&&((j=(15&R)<<12|(63&S)<<6|63&L)<=2047||j>=55296&&j<=57343)&&(j=null)):W===4&&(L=A[B+2],N=A[B+3],(192&(S=A[B+1]))==128&&(192&L)==128&&(192&N)==128&&((j=(15&R)<<18|(63&S)<<12|(63&L)<<6|63&N)<=65535||j>=1114112)&&(j=null)),j===null?(j=65533,W=1):j>65535&&(j-=65536,w+=String.fromCharCode(j>>>10&1023|55296),j=56320|1023&j),w+=String.fromCharCode(j),B+=W}return w}(this.buf,e,a)},readBytes:function(){var a=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,a);return this.pos=a,e},readPackedVarint:function(a,e){if(this.type!==ui.Bytes)return a.push(this.readVarint(e));var A=wl(this);for(a=a||[];this.pos<A;)a.push(this.readVarint(e));return a},readPackedSVarint:function(a){if(this.type!==ui.Bytes)return a.push(this.readSVarint());var e=wl(this);for(a=a||[];this.pos<e;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==ui.Bytes)return a.push(this.readBoolean());var e=wl(this);for(a=a||[];this.pos<e;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==ui.Bytes)return a.push(this.readFloat());var e=wl(this);for(a=a||[];this.pos<e;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==ui.Bytes)return a.push(this.readDouble());var e=wl(this);for(a=a||[];this.pos<e;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==ui.Bytes)return a.push(this.readFixed32());var e=wl(this);for(a=a||[];this.pos<e;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==ui.Bytes)return a.push(this.readSFixed32());var e=wl(this);for(a=a||[];this.pos<e;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==ui.Bytes)return a.push(this.readFixed64());var e=wl(this);for(a=a||[];this.pos<e;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==ui.Bytes)return a.push(this.readSFixed64());var e=wl(this);for(a=a||[];this.pos<e;)a.push(this.readSFixed64());return a},skip:function(a){var e=7&a;if(e===ui.Varint)for(;this.buf[this.pos++]>127;);else if(e===ui.Bytes)this.pos=this.readVarint()+this.pos;else if(e===ui.Fixed32)this.pos+=4;else{if(e!==ui.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(a,e){this.writeVarint(a<<3|e)},realloc:function(a){for(var e=this.length||16;e<this.pos+a;)e*=2;if(e!==this.length){var A=new Uint8Array(e);A.set(this.buf),this.buf=A,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),nh(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),nh(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),nh(this.buf,-1&a,this.pos),nh(this.buf,Math.floor(a*X5),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),nh(this.buf,-1&a,this.pos),nh(this.buf,Math.floor(a*X5),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(e,A){var d,m;if(e>=0?(d=e%4294967296|0,m=e/4294967296|0):(m=~(-e/4294967296),4294967295^(d=~(-e%4294967296))?d=d+1|0:(d=0,m=m+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");A.realloc(10),function(w,B,S){S.buf[S.pos++]=127&w|128,w>>>=7,S.buf[S.pos++]=127&w|128,w>>>=7,S.buf[S.pos++]=127&w|128,w>>>=7,S.buf[S.pos++]=127&w|128,S.buf[S.pos]=127&(w>>>=7)}(d,0,A),function(w,B){var S=(7&w)<<4;B.buf[B.pos++]|=S|((w>>>=3)?128:0),w&&(B.buf[B.pos++]=127&w|((w>>>=7)?128:0),w&&(B.buf[B.pos++]=127&w|((w>>>=7)?128:0),w&&(B.buf[B.pos++]=127&w|((w>>>=7)?128:0),w&&(B.buf[B.pos++]=127&w|((w>>>=7)?128:0),w&&(B.buf[B.pos++]=127&w)))))}(m,A)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(!!a)},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var e=this.pos;this.pos=function(d,m,w){for(var B,S,L=0;L<m.length;L++){if((B=m.charCodeAt(L))>55295&&B<57344){if(!S){B>56319||L+1===m.length?(d[w++]=239,d[w++]=191,d[w++]=189):S=B;continue}if(B<56320){d[w++]=239,d[w++]=191,d[w++]=189,S=B;continue}B=S-55296<<10|B-56320|65536,S=null}else S&&(d[w++]=239,d[w++]=191,d[w++]=189,S=null);B<128?d[w++]=B:(B<2048?d[w++]=B>>6|192:(B<65536?d[w++]=B>>12|224:(d[w++]=B>>18|240,d[w++]=B>>12&63|128),d[w++]=B>>6&63|128),d[w++]=63&B|128)}return w}(this.buf,a,this.pos);var A=this.pos-e;A>=128&&Y5(e,A,this),this.pos=e-1,this.writeVarint(A),this.pos+=A},writeFloat:function(a){this.realloc(4),W5(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),W5(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var e=a.length;this.writeVarint(e),this.realloc(e);for(var A=0;A<e;A++)this.buf[this.pos++]=a[A]},writeRawMessage:function(a,e){this.pos++;var A=this.pos;a(e,this);var d=this.pos-A;d>=128&&Y5(A,d,this),this.pos=A-1,this.writeVarint(d),this.pos+=d},writeMessage:function(a,e,A){this.writeTag(a,ui.Bytes),this.writeRawMessage(e,A)},writePackedVarint:function(a,e){e.length&&this.writeMessage(a,iz,e)},writePackedSVarint:function(a,e){e.length&&this.writeMessage(a,nz,e)},writePackedBoolean:function(a,e){e.length&&this.writeMessage(a,oz,e)},writePackedFloat:function(a,e){e.length&&this.writeMessage(a,sz,e)},writePackedDouble:function(a,e){e.length&&this.writeMessage(a,az,e)},writePackedFixed32:function(a,e){e.length&&this.writeMessage(a,Az,e)},writePackedSFixed32:function(a,e){e.length&&this.writeMessage(a,lz,e)},writePackedFixed64:function(a,e){e.length&&this.writeMessage(a,cz,e)},writePackedSFixed64:function(a,e){e.length&&this.writeMessage(a,uz,e)},writeBytesField:function(a,e){this.writeTag(a,ui.Bytes),this.writeBytes(e)},writeFixed32Field:function(a,e){this.writeTag(a,ui.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(a,e){this.writeTag(a,ui.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(a,e){this.writeTag(a,ui.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(a,e){this.writeTag(a,ui.Fixed64),this.writeSFixed64(e)},writeVarintField:function(a,e){this.writeTag(a,ui.Varint),this.writeVarint(e)},writeSVarintField:function(a,e){this.writeTag(a,ui.Varint),this.writeSVarint(e)},writeStringField:function(a,e){this.writeTag(a,ui.Bytes),this.writeString(e)},writeFloatField:function(a,e){this.writeTag(a,ui.Fixed32),this.writeFloat(e)},writeDoubleField:function(a,e){this.writeTag(a,ui.Fixed64),this.writeDouble(e)},writeBooleanField:function(a,e){this.writeVarintField(a,!!e)}};var by=v(q5);const xy=3;function hz(a,e,A){a===1&&A.readMessage(dz,e)}function dz(a,e,A){if(a===3){const{id:d,bitmap:m,width:w,height:B,left:S,top:L,advance:N}=A.readMessage(pz,{});e.push({id:d,bitmap:new md({width:w+2*xy,height:B+2*xy},m),metrics:{width:w,height:B,left:S,top:L,advance:N}})}}function pz(a,e,A){a===1?e.id=A.readVarint():a===2?e.bitmap=A.readBytes():a===3?e.width=A.readVarint():a===4?e.height=A.readVarint():a===5?e.left=A.readSVarint():a===6?e.top=A.readSVarint():a===7&&(e.advance=A.readVarint())}const tC=xy;function eC(a){let e=0,A=0;for(const B of a)e+=B.w*B.h,A=Math.max(A,B.w);a.sort((B,S)=>S.h-B.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),A),h:1/0}];let m=0,w=0;for(const B of a)for(let S=d.length-1;S>=0;S--){const L=d[S];if(!(B.w>L.w||B.h>L.h)){if(B.x=L.x,B.y=L.y,w=Math.max(w,B.y+B.h),m=Math.max(m,B.x+B.w),B.w===L.w&&B.h===L.h){const N=d.pop();S<d.length&&(d[S]=N)}else B.h===L.h?(L.x+=B.w,L.w-=B.w):B.w===L.w?(L.y+=B.h,L.h-=B.h):(d.push({x:L.x+B.w,y:L.y,w:L.w-B.w,h:B.h}),L.y+=B.h,L.h-=B.h);break}}return{w:m,h:w,fill:e/(m*w)||0}}const Zs=1;class By{constructor(e,{pixelRatio:A,version:d,stretchX:m,stretchY:w,content:B,textFitWidth:S,textFitHeight:L}){this.paddedRect=e,this.pixelRatio=A,this.stretchX=m,this.stretchY=w,this.content=B,this.version=d,this.textFitWidth=S,this.textFitHeight=L}get tl(){return[this.paddedRect.x+Zs,this.paddedRect.y+Zs]}get br(){return[this.paddedRect.x+this.paddedRect.w-Zs,this.paddedRect.y+this.paddedRect.h-Zs]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Zs)/this.pixelRatio,(this.paddedRect.h-2*Zs)/this.pixelRatio]}}class rC{constructor(e,A){const d={},m={};this.haveRenderCallbacks=[];const w=[];this.addImages(e,d,w),this.addImages(A,m,w);const{w:B,h:S}=eC(w),L=new za({width:B||1,height:S||1});for(const N in e){const R=e[N],j=d[N].paddedRect;za.copy(R.data,L,{x:0,y:0},{x:j.x+Zs,y:j.y+Zs},R.data)}for(const N in A){const R=A[N],j=m[N].paddedRect,W=j.x+Zs,et=j.y+Zs,at=R.data.width,ct=R.data.height;za.copy(R.data,L,{x:0,y:0},{x:W,y:et},R.data),za.copy(R.data,L,{x:0,y:ct-1},{x:W,y:et-1},{width:at,height:1}),za.copy(R.data,L,{x:0,y:0},{x:W,y:et+ct},{width:at,height:1}),za.copy(R.data,L,{x:at-1,y:0},{x:W-1,y:et},{width:1,height:ct}),za.copy(R.data,L,{x:0,y:0},{x:W+at,y:et},{width:1,height:ct})}this.image=L,this.iconPositions=d,this.patternPositions=m}addImages(e,A,d){for(const m in e){const w=e[m],B={x:0,y:0,w:w.data.width+2*Zs,h:w.data.height+2*Zs};d.push(B),A[m]=new By(B,w),w.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(e,A){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in e.updatedImages)this.patchUpdatedImage(this.iconPositions[d],e.getImage(d),A),this.patchUpdatedImage(this.patternPositions[d],e.getImage(d),A)}patchUpdatedImage(e,A,d){if(!e||!A||e.version===A.version)return;e.version=A.version;const[m,w]=e.tl;d.update(A.data,void 0,{x:m,y:w})}}var oc;Ve("ImagePosition",By),Ve("ImageAtlas",rC),p.ah=void 0,(oc=p.ah||(p.ah={}))[oc.none=0]="none",oc[oc.horizontal=1]="horizontal",oc[oc.vertical=2]="vertical",oc[oc.horizontalOnly=3]="horizontalOnly";const Bd=-17;class Cd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,A){const d=new Cd;return d.scale=e||1,d.fontStack=A,d}static forImage(e){const A=new Cd;return A.imageName=e,A}}class sh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,A){const d=new sh;for(let m=0;m<e.sections.length;m++){const w=e.sections[m];w.image?d.addImageSection(w):d.addTextSection(w,A)}return d}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(){this.text=function(e){let A="";for(let d=0;d<e.length;d++){const m=e.charCodeAt(d+1)||null,w=e.charCodeAt(d-1)||null;A+=m&&qc(m)&&!xd[e[d+1]]||w&&qc(w)&&!xd[e[d-1]]||!xd[e[d]]?e[d]:xd[e[d]]}return A}(this.text)}trim(){let e=0;for(let d=0;d<this.text.length&&rg[this.text.charCodeAt(d)];d++)e++;let A=this.text.length;for(let d=this.text.length-1;d>=0&&d>=e&&rg[this.text.charCodeAt(d)];d--)A--;this.text=this.text.substring(e,A),this.sectionIndex=this.sectionIndex.slice(e,A)}substring(e,A){const d=new sh;return d.text=this.text.substring(e,A),d.sectionIndex=this.sectionIndex.slice(e,A),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,A)=>Math.max(e,this.sections[A].scale),0)}addTextSection(e,A){this.text+=e.text,this.sections.push(Cd.forText(e.scale,e.fontStack||A));const d=this.sections.length-1;for(let m=0;m<e.text.length;++m)this.sectionIndex.push(d)}addImageSection(e){const A=e.image?e.image.name:"";if(A.length===0)return void bt("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(Cd.forImage(A)),this.sectionIndex.push(this.sections.length-1)):bt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function eg(a,e,A,d,m,w,B,S,L,N,R,j,W,et,at){const ct=sh.fromFeature(a,m);let xt;j===p.ah.vertical&&ct.verticalizePunctuation();const{processBidirectionalText:It,processStyledBidirectionalText:$t}=vo;if(It&&ct.sections.length===1){xt=[];const Ae=It(ct.toString(),Cy(ct,N,w,e,d,et));for(const ve of Ae){const De=new sh;De.text=ve,De.sections=ct.sections;for(let lr=0;lr<ve.length;lr++)De.sectionIndex.push(0);xt.push(De)}}else if($t){xt=[];const Ae=$t(ct.text,ct.sectionIndex,Cy(ct,N,w,e,d,et));for(const ve of Ae){const De=new sh;De.text=ve[0],De.sectionIndex=ve[1],De.sections=ct.sections,xt.push(De)}}else xt=function(Ae,ve){const De=[],lr=Ae.text;let ze=0;for(const Pe of ve)De.push(Ae.substring(ze,Pe)),ze=Pe;return ze<lr.length&&De.push(Ae.substring(ze,lr.length)),De}(ct,Cy(ct,N,w,e,d,et));const Qt=[],Vt={positionedLines:Qt,text:ct.toString(),top:R[1],bottom:R[1],left:R[0],right:R[0],writingMode:j,iconsInText:!1,verticalizable:!1};return function(Ae,ve,De,lr,ze,Pe,ir,qe,je,fe,nr,Je){let Cr=0,mi=Bd,hi=0,Tn=0;const xo=qe==="right"?1:qe==="left"?0:.5;let Wn=0;for(const Yi of ze){Yi.trim();const Un=Yi.getMaxScale(),cs=(Un-1)*Bn,Xn={positionedGlyphs:[],lineOffset:0};Ae.positionedLines[Wn]=Xn;const Ls=Xn.positionedGlyphs;let Zn=0;if(!Yi.length()){mi+=Pe,++Wn;continue}for(let Ys=0;Ys<Yi.length();Ys++){const Yr=Yi.getSection(Ys),Bi=Yi.getSectionIndex(Ys),Ti=Yi.getCharCode(Ys);let wa=0,Vi=null,lh=null,zA=null,HA=Bn;const Bo=!(je===p.ah.horizontal||!nr&&!$c(Ti)||nr&&(rg[Ti]||(Zi=Ti,Ne.Arabic(Zi)||Ne["Arabic Supplement"](Zi)||Ne["Arabic Extended-A"](Zi)||Ne["Arabic Presentation Forms-A"](Zi)||Ne["Arabic Presentation Forms-B"](Zi))));if(Yr.imageName){const ja=lr[Yr.imageName];if(!ja)continue;zA=Yr.imageName,Ae.iconsInText=Ae.iconsInText||!0,lh=ja.paddedRect;const kn=ja.displaySize;Yr.scale=Yr.scale*Bn/Je,Vi={width:kn[0],height:kn[1],left:Zs,top:-tC,advance:Bo?kn[1]:kn[0]},wa=cs+(Bn-kn[1]*Yr.scale),HA=Vi.advance;const _l=Bo?kn[0]*Yr.scale-Bn*Un:kn[1]*Yr.scale-Bn*Un;_l>0&&_l>Zn&&(Zn=_l)}else{const ja=De[Yr.fontStack],kn=ja&&ja[Ti];if(kn&&kn.rect)lh=kn.rect,Vi=kn.metrics;else{const _l=ve[Yr.fontStack],Td=_l&&_l[Ti];if(!Td)continue;Vi=Td.metrics}wa=(Un-Yr.scale)*Bn}Bo?(Ae.verticalizable=!0,Ls.push({glyph:Ti,imageName:zA,x:Cr,y:mi+wa,vertical:Bo,scale:Yr.scale,fontStack:Yr.fontStack,sectionIndex:Bi,metrics:Vi,rect:lh}),Cr+=HA*Yr.scale+fe):(Ls.push({glyph:Ti,imageName:zA,x:Cr,y:mi+wa,vertical:Bo,scale:Yr.scale,fontStack:Yr.fontStack,sectionIndex:Bi,metrics:Vi,rect:lh}),Cr+=Vi.advance*Yr.scale+fe)}Ls.length!==0&&(hi=Math.max(Cr-fe,hi),yz(Ls,0,Ls.length-1,xo,Zn)),Cr=0;const Va=Pe*Un+Zn;Xn.lineOffset=Math.max(Zn,cs),mi+=Va,Tn=Math.max(Va,Tn),++Wn}var Zi;const Ts=mi-Bd,{horizontalAlign:Us,verticalAlign:Ps}=Fy(ir);(function(Yi,Un,cs,Xn,Ls,Zn,Va,Ys,Yr){const Bi=(Un-cs)*Ls;let Ti=0;Ti=Zn!==Va?-Ys*Xn-Bd:(-Xn*Yr+.5)*Va;for(const wa of Yi)for(const Vi of wa.positionedGlyphs)Vi.x+=Bi,Vi.y+=Ti})(Ae.positionedLines,xo,Us,Ps,hi,Tn,Pe,Ts,ze.length),Ae.top+=-Ps*Ts,Ae.bottom=Ae.top+Ts,Ae.left+=-Us*hi,Ae.right=Ae.left+hi}(Vt,e,A,d,xt,B,S,L,j,N,W,at),!function(Ae){for(const ve of Ae)if(ve.positionedGlyphs.length!==0)return!1;return!0}(Qt)&&Vt}const rg={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},fz={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},gz={40:!0};function iC(a,e,A,d,m,w){if(e.imageName){const B=d[e.imageName];return B?B.displaySize[0]*e.scale*Bn/w+m:0}{const B=A[e.fontStack],S=B&&B[a];return S?S.metrics.advance*e.scale+m:0}}function nC(a,e,A,d){const m=Math.pow(a-e,2);return d?a<e?m/2:2*m:m+Math.abs(A)*A}function mz(a,e,A){let d=0;return a===10&&(d-=1e4),A&&(d+=150),a!==40&&a!==65288||(d+=50),e!==41&&e!==65289||(d+=50),d}function sC(a,e,A,d,m,w){let B=null,S=nC(e,A,m,w);for(const L of d){const N=nC(e-L.x,A,m,w)+L.badness;N<=S&&(B=L,S=N)}return{index:a,x:e,priorBreak:B,badness:S}}function aC(a){return a?aC(a.priorBreak).concat(a.index):[]}function Cy(a,e,A,d,m,w){if(!a)return[];const B=[],S=function(j,W,et,at,ct,xt){let It=0;for(let $t=0;$t<j.length();$t++){const Qt=j.getSection($t);It+=iC(j.getCharCode($t),Qt,at,ct,W,xt)}return It/Math.max(1,Math.ceil(It/et))}(a,e,A,d,m,w),L=a.text.indexOf("​")>=0;let N=0;for(let j=0;j<a.length();j++){const W=a.getSection(j),et=a.getCharCode(j);if(rg[et]||(N+=iC(et,W,d,m,e,w)),j<a.length()-1){const at=!((R=et)<11904||!(Ne["Bopomofo Extended"](R)||Ne.Bopomofo(R)||Ne["CJK Compatibility Forms"](R)||Ne["CJK Compatibility Ideographs"](R)||Ne["CJK Compatibility"](R)||Ne["CJK Radicals Supplement"](R)||Ne["CJK Strokes"](R)||Ne["CJK Symbols and Punctuation"](R)||Ne["CJK Unified Ideographs Extension A"](R)||Ne["CJK Unified Ideographs"](R)||Ne["Enclosed CJK Letters and Months"](R)||Ne["Halfwidth and Fullwidth Forms"](R)||Ne.Hiragana(R)||Ne["Ideographic Description Characters"](R)||Ne["Kangxi Radicals"](R)||Ne["Katakana Phonetic Extensions"](R)||Ne.Katakana(R)||Ne["Vertical Forms"](R)||Ne["Yi Radicals"](R)||Ne["Yi Syllables"](R)));(fz[et]||at||W.imageName||j!==a.length()-2&&gz[a.getCharCode(j+1)])&&B.push(sC(j+1,N,S,B,mz(et,a.getCharCode(j+1),at&&L),!1))}}var R;return aC(sC(a.length(),N,S,B,0,!0))}function Fy(a){let e=.5,A=.5;switch(a){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":A=1;break;case"top":case"top-right":case"top-left":A=0}return{horizontalAlign:e,verticalAlign:A}}function yz(a,e,A,d,m){if(!d&&!m)return;const w=a[A],B=(a[A].x+w.metrics.advance*w.scale)*d;for(let S=e;S<=A;S++)a[S].x-=B,a[S].y+=m}function vz(a,e,A){const{horizontalAlign:d,verticalAlign:m}=Fy(A),w=e[0]-a.displaySize[0]*d,B=e[1]-a.displaySize[1]*m;return{image:a,top:B,bottom:B+a.displaySize[1],left:w,right:w+a.displaySize[0]}}function oC(a){var e,A;let d=a.left,m=a.top,w=a.right-d,B=a.bottom-m;const S=(e=a.image.textFitWidth)!==null&&e!==void 0?e:"stretchOrShrink",L=(A=a.image.textFitHeight)!==null&&A!==void 0?A:"stretchOrShrink",N=(a.image.content[2]-a.image.content[0])/(a.image.content[3]-a.image.content[1]);if(L==="proportional"){if(S==="stretchOnly"&&w/B<N||S==="proportional"){const R=Math.ceil(B*N);d*=R/w,w=R}}else if(S==="proportional"&&L==="stretchOnly"&&N!==0&&w/B>N){const R=Math.ceil(w/N);m*=R/B,B=R}return{x1:d,y1:m,x2:d+w,y2:m+B}}function AC(a,e,A,d,m,w){const B=a.image;let S;if(B.content){const xt=B.content,It=B.pixelRatio||1;S=[xt[0]/It,xt[1]/It,B.displaySize[0]-xt[2]/It,B.displaySize[1]-xt[3]/It]}const L=e.left*w,N=e.right*w;let R,j,W,et;A==="width"||A==="both"?(et=m[0]+L-d[3],j=m[0]+N+d[1]):(et=m[0]+(L+N-B.displaySize[0])/2,j=et+B.displaySize[0]);const at=e.top*w,ct=e.bottom*w;return A==="height"||A==="both"?(R=m[1]+at-d[0],W=m[1]+ct+d[2]):(R=m[1]+(at+ct-B.displaySize[1])/2,W=R+B.displaySize[1]),{image:B,top:R,right:j,bottom:W,left:et,collisionPadding:S}}const Fd=255,RA=128,Ac=Fd*RA;function lC(a,e){const{expression:A}=e;if(A.kind==="constant")return{kind:"constant",layoutSize:A.evaluate(new ti(a+1))};if(A.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:m}=A;let w=0;for(;w<d.length&&d[w]<=a;)w++;w=Math.max(0,w-1);let B=w;for(;B<d.length&&d[B]<a+1;)B++;B=Math.min(d.length-1,B);const S=d[w],L=d[B];return A.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:L,interpolationType:m}:{kind:"camera",minZoom:S,maxZoom:L,minSize:A.evaluate(new ti(S)),maxSize:A.evaluate(new ti(L)),interpolationType:m}}}function Sy(a,e,A){let d="never";const m=a.get(e);return m?d=m:a.get(A)&&(d="always"),d}const wz=ac.VectorTileFeature.types,_z=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ig(a,e,A,d,m,w,B,S,L,N,R,j,W){const et=S?Math.min(Ac,Math.round(S[0])):0,at=S?Math.min(Ac,Math.round(S[1])):0;a.emplaceBack(e,A,Math.round(32*d),Math.round(32*m),w,B,(et<<1)+(L?1:0),at,16*N,16*R,256*j,256*W)}function Iy(a,e,A){a.emplaceBack(e.x,e.y,A),a.emplaceBack(e.x,e.y,A),a.emplaceBack(e.x,e.y,A),a.emplaceBack(e.x,e.y,A)}function bz(a){for(const e of a.sections)if(Jl(e.text))return!0;return!1}class Ey{constructor(e){this.layoutVertexArray=new xn,this.indexArray=new rn,this.programConfigurations=e,this.segments=new Ni,this.dynamicLayoutVertexArray=new As,this.opacityVertexArray=new ls,this.hasVisibleVertices=!1,this.placedSymbolArray=new _r}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(e,A,d,m){this.isEmpty()||(d&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Y7.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,A),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,J7.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,_z,!0),this.opacityVertexBuffer.itemSize=1),(d||m)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ve("SymbolBuffers",Ey);class Ty{constructor(e,A,d){this.layoutVertexArray=new e,this.layoutAttributes=A,this.indexArray=new d,this.segments=new Ni,this.collisionVertexArray=new hn}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,tz.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ve("CollisionBuffers",Ty);class ah{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(B=>B.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ay([]),this.placementViewportMatrix=Ay([]);const A=this.layers[0]._unevaluatedLayout._values;this.textSizeData=lC(this.zoom,A["text-size"]),this.iconSizeData=lC(this.zoom,A["icon-size"]);const d=this.layers[0].layout,m=d.get("symbol-sort-key"),w=d.get("symbol-z-order");this.canOverlap=Sy(d,"text-overlap","text-allow-overlap")!=="never"||Sy(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=w!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(w==="viewport-y"||w==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(B=>p.ah[B])),this.stateDependentLayerIds=this.layers.filter(B=>B.isStateDependent()).map(B=>B.id),this.sourceID=e.sourceID}createArrays(){this.text=new Ey(new yl(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new Ey(new yl(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new Rr,this.lineVertexArray=new Xr,this.symbolInstances=new ei,this.textAnchorOffsets=new Qr}calculateGlyphDependencies(e,A,d,m,w){for(let B=0;B<e.length;B++)if(A[e.charCodeAt(B)]=!0,(d||m)&&w){const S=xd[e.charAt(B)];S&&(A[S.charCodeAt(0)]=!0)}}populate(e,A,d){const m=this.layers[0],w=m.layout,B=w.get("text-font"),S=w.get("text-field"),L=w.get("icon-image"),N=(S.value.kind!=="constant"||S.value.value instanceof yi&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(B.value.kind!=="constant"||B.value.value.length>0),R=L.value.kind!=="constant"||!!L.value.value||Object.keys(L.parameters).length>0,j=w.get("symbol-sort-key");if(this.features=[],!N&&!R)return;const W=A.iconDependencies,et=A.glyphDependencies,at=A.availableImages,ct=new ti(this.zoom);for(const{feature:xt,id:It,index:$t,sourceLayerIndex:Qt}of e){const Vt=m._featureFilter.needGeometry,Ae=vl(xt,Vt);if(!m._featureFilter.filter(ct,Ae,d))continue;let ve,De;if(Vt||(Ae.geometry=kA(xt)),N){const ze=m.getValueAndResolveTokens("text-field",Ae,d,at),Pe=yi.factory(ze),ir=this.hasRTLText=this.hasRTLText||bz(Pe);(!ir||vo.getRTLTextPluginStatus()==="unavailable"||ir&&vo.isParsed())&&(ve=rz(Pe,m,Ae))}if(R){const ze=m.getValueAndResolveTokens("icon-image",Ae,d,at);De=ze instanceof Ln?ze:Ln.fromString(ze)}if(!ve&&!De)continue;const lr=this.sortFeaturesByKey?j.evaluate(Ae,{},d):void 0;if(this.features.push({id:It,text:ve,icon:De,index:$t,sourceLayerIndex:Qt,geometry:Ae.geometry,properties:xt.properties,type:wz[xt.type],sortKey:lr}),De&&(W[De.name]=!0),ve){const ze=B.evaluate(Ae,{},d).join(","),Pe=w.get("text-rotation-alignment")!=="viewport"&&w.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(p.ah.vertical)>=0;for(const ir of ve.sections)if(ir.image)W[ir.image.name]=!0;else{const qe=pa(ve.toString()),je=ir.fontStack||ze,fe=et[je]=et[je]||{};this.calculateGlyphDependencies(ir.text,fe,Pe,this.allowVerticalPlacement,qe)}}}w.get("symbol-placement")==="line"&&(this.features=function(xt){const It={},$t={},Qt=[];let Vt=0;function Ae(ze){Qt.push(xt[ze]),Vt++}function ve(ze,Pe,ir){const qe=$t[ze];return delete $t[ze],$t[Pe]=qe,Qt[qe].geometry[0].pop(),Qt[qe].geometry[0]=Qt[qe].geometry[0].concat(ir[0]),qe}function De(ze,Pe,ir){const qe=It[Pe];return delete It[Pe],It[ze]=qe,Qt[qe].geometry[0].shift(),Qt[qe].geometry[0]=ir[0].concat(Qt[qe].geometry[0]),qe}function lr(ze,Pe,ir){const qe=ir?Pe[0][Pe[0].length-1]:Pe[0][0];return`${ze}:${qe.x}:${qe.y}`}for(let ze=0;ze<xt.length;ze++){const Pe=xt[ze],ir=Pe.geometry,qe=Pe.text?Pe.text.toString():null;if(!qe){Ae(ze);continue}const je=lr(qe,ir),fe=lr(qe,ir,!0);if(je in $t&&fe in It&&$t[je]!==It[fe]){const nr=De(je,fe,ir),Je=ve(je,fe,Qt[nr].geometry);delete It[je],delete $t[fe],$t[lr(qe,Qt[Je].geometry,!0)]=Je,Qt[nr].geometry=null}else je in $t?ve(je,fe,ir):fe in It?De(je,fe,ir):(Ae(ze),It[je]=Vt-1,$t[fe]=Vt-1)}return Qt.filter(ze=>ze.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((xt,It)=>xt.sortKey-It.sortKey)}update(e,A,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,A,this.layers,d),this.icon.programConfigurations.updatePaintArrays(e,A,this.layers,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,A){const d=this.lineVertexArray.length;if(e.segment!==void 0){let m=e.dist(A[e.segment+1]),w=e.dist(A[e.segment]);const B={};for(let S=e.segment+1;S<A.length;S++)B[S]={x:A[S].x,y:A[S].y,tileUnitDistanceFromAnchor:m},S<A.length-1&&(m+=A[S+1].dist(A[S]));for(let S=e.segment||0;S>=0;S--)B[S]={x:A[S].x,y:A[S].y,tileUnitDistanceFromAnchor:w},S>0&&(w+=A[S-1].dist(A[S]));for(let S=0;S<A.length;S++){const L=B[S];this.lineVertexArray.emplaceBack(L.x,L.y,L.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(e,A,d,m,w,B,S,L,N,R,j,W){const et=e.indexArray,at=e.layoutVertexArray,ct=e.segments.prepareSegment(4*A.length,at,et,this.canOverlap?B.sortKey:void 0),xt=this.glyphOffsetArray.length,It=ct.vertexLength,$t=this.allowVerticalPlacement&&S===p.ah.vertical?Math.PI/2:0,Qt=B.text&&B.text.sections;for(let Vt=0;Vt<A.length;Vt++){const{tl:Ae,tr:ve,bl:De,br:lr,tex:ze,pixelOffsetTL:Pe,pixelOffsetBR:ir,minFontScaleX:qe,minFontScaleY:je,glyphOffset:fe,isSDF:nr,sectionIndex:Je}=A[Vt],Cr=ct.vertexLength,mi=fe[1];ig(at,L.x,L.y,Ae.x,mi+Ae.y,ze.x,ze.y,d,nr,Pe.x,Pe.y,qe,je),ig(at,L.x,L.y,ve.x,mi+ve.y,ze.x+ze.w,ze.y,d,nr,ir.x,Pe.y,qe,je),ig(at,L.x,L.y,De.x,mi+De.y,ze.x,ze.y+ze.h,d,nr,Pe.x,ir.y,qe,je),ig(at,L.x,L.y,lr.x,mi+lr.y,ze.x+ze.w,ze.y+ze.h,d,nr,ir.x,ir.y,qe,je),Iy(e.dynamicLayoutVertexArray,L,$t),et.emplaceBack(Cr,Cr+1,Cr+2),et.emplaceBack(Cr+1,Cr+2,Cr+3),ct.vertexLength+=4,ct.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(fe[0]),Vt!==A.length-1&&Je===A[Vt+1].sectionIndex||e.programConfigurations.populatePaintArrays(at.length,B,B.index,{},W,Qt&&Qt[Je])}e.placedSymbolArray.emplaceBack(L.x,L.y,xt,this.glyphOffsetArray.length-xt,It,N,R,L.segment,d?d[0]:0,d?d[1]:0,m[0],m[1],S,0,!1,0,j)}_addCollisionDebugVertex(e,A,d,m,w,B){return A.emplaceBack(0,0),e.emplaceBack(d.x,d.y,m,w,Math.round(B.x),Math.round(B.y))}addCollisionDebugVertices(e,A,d,m,w,B,S){const L=w.segments.prepareSegment(4,w.layoutVertexArray,w.indexArray),N=L.vertexLength,R=w.layoutVertexArray,j=w.collisionVertexArray,W=S.anchorX,et=S.anchorY;this._addCollisionDebugVertex(R,j,B,W,et,new U(e,A)),this._addCollisionDebugVertex(R,j,B,W,et,new U(d,A)),this._addCollisionDebugVertex(R,j,B,W,et,new U(d,m)),this._addCollisionDebugVertex(R,j,B,W,et,new U(e,m)),L.vertexLength+=4;const at=w.indexArray;at.emplaceBack(N,N+1),at.emplaceBack(N+1,N+2),at.emplaceBack(N+2,N+3),at.emplaceBack(N+3,N),L.primitiveLength+=4}addDebugCollisionBoxes(e,A,d,m){for(let w=e;w<A;w++){const B=this.collisionBoxArray.get(w);this.addCollisionDebugVertices(B.x1,B.y1,B.x2,B.y2,m?this.textCollisionBox:this.iconCollisionBox,B.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Ty(Hr,$5.members,xi),this.iconCollisionBox=new Ty(Hr,$5.members,xi);for(let e=0;e<this.symbolInstances.length;e++){const A=this.symbolInstances.get(e);this.addDebugCollisionBoxes(A.textBoxStartIndex,A.textBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.verticalTextBoxStartIndex,A.verticalTextBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.iconBoxStartIndex,A.iconBoxEndIndex,A,!1),this.addDebugCollisionBoxes(A.verticalIconBoxStartIndex,A.verticalIconBoxEndIndex,A,!1)}}_deserializeCollisionBoxesForSymbol(e,A,d,m,w,B,S,L,N){const R={};for(let j=A;j<d;j++){const W=e.get(j);R.textBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},R.textFeatureIndex=W.featureIndex;break}for(let j=m;j<w;j++){const W=e.get(j);R.verticalTextBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},R.verticalTextFeatureIndex=W.featureIndex;break}for(let j=B;j<S;j++){const W=e.get(j);R.iconBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},R.iconFeatureIndex=W.featureIndex;break}for(let j=L;j<N;j++){const W=e.get(j);R.verticalIconBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},R.verticalIconFeatureIndex=W.featureIndex;break}return R}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let A=0;A<this.symbolInstances.length;A++){const d=this.symbolInstances.get(A);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,A){const d=e.placedSymbolArray.get(A),m=d.vertexStartIndex+4*d.numGlyphs;for(let w=d.vertexStartIndex;w<m;w+=4)e.indexArray.emplaceBack(w,w+1,w+2),e.indexArray.emplaceBack(w+1,w+2,w+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const A=Math.sin(e),d=Math.cos(e),m=[],w=[],B=[];for(let S=0;S<this.symbolInstances.length;++S){B.push(S);const L=this.symbolInstances.get(S);m.push(0|Math.round(A*L.anchorX+d*L.anchorY)),w.push(L.featureIndex)}return B.sort((S,L)=>m[S]-m[L]||w[L]-w[S]),B}addToSortKeyRanges(e,A){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===A?d.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:A,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const A of this.symbolInstanceIndexes){const d=this.symbolInstances.get(A);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((m,w,B)=>{m>=0&&B.indexOf(m)===w&&this.addIndicesForPlacedSymbol(this.text,m)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let cC,uC;Ve("SymbolBucket",ah,{omit:["layers","collisionBoxArray","features","compareText"]}),ah.MAX_GLYPHS=65535,ah.addDynamicAttributes=Iy;var Uy={get paint(){return uC=uC||new g({"icon-opacity":new gr(nt.paint_symbol["icon-opacity"]),"icon-color":new gr(nt.paint_symbol["icon-color"]),"icon-halo-color":new gr(nt.paint_symbol["icon-halo-color"]),"icon-halo-width":new gr(nt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new gr(nt.paint_symbol["icon-halo-blur"]),"icon-translate":new Ye(nt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ye(nt.paint_symbol["icon-translate-anchor"]),"text-opacity":new gr(nt.paint_symbol["text-opacity"]),"text-color":new gr(nt.paint_symbol["text-color"],{runtimeType:xr,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new gr(nt.paint_symbol["text-halo-color"]),"text-halo-width":new gr(nt.paint_symbol["text-halo-width"]),"text-halo-blur":new gr(nt.paint_symbol["text-halo-blur"]),"text-translate":new Ye(nt.paint_symbol["text-translate"]),"text-translate-anchor":new Ye(nt.paint_symbol["text-translate-anchor"])})},get layout(){return cC=cC||new g({"symbol-placement":new Ye(nt.layout_symbol["symbol-placement"]),"symbol-spacing":new Ye(nt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ye(nt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new gr(nt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ye(nt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ye(nt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Ye(nt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Ye(nt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ye(nt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ye(nt.layout_symbol["icon-rotation-alignment"]),"icon-size":new gr(nt.layout_symbol["icon-size"]),"icon-text-fit":new Ye(nt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ye(nt.layout_symbol["icon-text-fit-padding"]),"icon-image":new gr(nt.layout_symbol["icon-image"]),"icon-rotate":new gr(nt.layout_symbol["icon-rotate"]),"icon-padding":new gr(nt.layout_symbol["icon-padding"]),"icon-keep-upright":new Ye(nt.layout_symbol["icon-keep-upright"]),"icon-offset":new gr(nt.layout_symbol["icon-offset"]),"icon-anchor":new gr(nt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ye(nt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ye(nt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ye(nt.layout_symbol["text-rotation-alignment"]),"text-field":new gr(nt.layout_symbol["text-field"]),"text-font":new gr(nt.layout_symbol["text-font"]),"text-size":new gr(nt.layout_symbol["text-size"]),"text-max-width":new gr(nt.layout_symbol["text-max-width"]),"text-line-height":new Ye(nt.layout_symbol["text-line-height"]),"text-letter-spacing":new gr(nt.layout_symbol["text-letter-spacing"]),"text-justify":new gr(nt.layout_symbol["text-justify"]),"text-radial-offset":new gr(nt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ye(nt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new gr(nt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new gr(nt.layout_symbol["text-anchor"]),"text-max-angle":new Ye(nt.layout_symbol["text-max-angle"]),"text-writing-mode":new Ye(nt.layout_symbol["text-writing-mode"]),"text-rotate":new gr(nt.layout_symbol["text-rotate"]),"text-padding":new Ye(nt.layout_symbol["text-padding"]),"text-keep-upright":new Ye(nt.layout_symbol["text-keep-upright"]),"text-transform":new gr(nt.layout_symbol["text-transform"]),"text-offset":new gr(nt.layout_symbol["text-offset"]),"text-allow-overlap":new Ye(nt.layout_symbol["text-allow-overlap"]),"text-overlap":new Ye(nt.layout_symbol["text-overlap"]),"text-ignore-placement":new Ye(nt.layout_symbol["text-ignore-placement"]),"text-optional":new Ye(nt.layout_symbol["text-optional"])})}};class hC{constructor(e){if(e.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=e.property.overrides?e.property.overrides.runtimeType:Jr,this.defaultValue=e}evaluate(e){if(e.formattedSection){const A=this.defaultValue.property.overrides;if(A&&A.hasOverride(e.formattedSection))return A.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ve("FormatSectionOverride",hC,{omit:["defaultValue"]});class ng extends x{constructor(e){super(e,Uy)}recalculate(e,A){if(super.recalculate(e,A),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const d=this.layout.get("text-writing-mode");if(d){const m=[];for(const w of d)m.indexOf(w)<0&&m.push(w);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,A,d,m){const w=this.layout.get(e).evaluate(A,{},d,m),B=this._unevaluatedLayout._values[e];return B.isDataDriven()||jn(B.value)||!w?w:function(S,L){return L.replace(/{([^{}]+)}/g,(N,R)=>S&&R in S?String(S[R]):"")}(A.properties,w)}createBucket(e){return new ah(e)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const e of Uy.paint.overridableProperties){if(!ng.hasPaintOverride(this.layout,e))continue;const A=this.paint.get(e),d=new hC(A),m=new ca(d,A.property.specification);let w=null;w=A.value.kind==="constant"||A.value.kind==="source"?new Ta("source",m):new go("composite",m,A.value.zoomStops),this.paint._values[e]=new ga(A.property,w,A.parameters)}}_handleOverridablePaintPropertyUpdate(e,A,d){return!(!this.layout||A.isDataDriven()||d.isDataDriven())&&ng.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,A){const d=e.get("text-field"),m=Uy.paint.properties[A];let w=!1;const B=S=>{for(const L of S)if(m.overrides&&m.overrides.hasOverride(L))return void(w=!0)};if(d.value.kind==="constant"&&d.value.value instanceof yi)B(d.value.value.sections);else if(d.value.kind==="source"){const S=N=>{w||(N instanceof na&&ki(N.value)===zr?B(N.value.sections):N instanceof bA?B(N.sections):N.eachChild(S))},L=d.value;L._styleExpression&&S(L._styleExpression.expression)}return w}}let dC;var xz={get paint(){return dC=dC||new g({"background-color":new Ye(nt.paint_background["background-color"]),"background-pattern":new r(nt.paint_background["background-pattern"]),"background-opacity":new Ye(nt.paint_background["background-opacity"])})}};class Bz extends x{constructor(e){super(e,xz)}}let pC;var Cz={get paint(){return pC=pC||new g({"raster-opacity":new Ye(nt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ye(nt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ye(nt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ye(nt.paint_raster["raster-brightness-max"]),"raster-saturation":new Ye(nt.paint_raster["raster-saturation"]),"raster-contrast":new Ye(nt.paint_raster["raster-contrast"]),"raster-resampling":new Ye(nt.paint_raster["raster-resampling"]),"raster-fade-duration":new Ye(nt.paint_raster["raster-fade-duration"])})}};class Fz extends x{constructor(e){super(e,Cz)}}class Sz extends x{constructor(e){super(e,{}),this.onAdd=A=>{this.implementation.onAdd&&this.implementation.onAdd(A,A.painter.context.gl)},this.onRemove=A=>{this.implementation.onRemove&&this.implementation.onRemove(A,A.painter.context.gl)},this.implementation=e}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Iz{constructor(e){this._methodToThrottle=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Py=63710088e-1;class lc{constructor(e,A){if(isNaN(e)||isNaN(A))throw new Error(`Invalid LngLat object: (${e}, ${A})`);if(this.lng=+e,this.lat=+A,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new lc(Lt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const A=Math.PI/180,d=this.lat*A,m=e.lat*A,w=Math.sin(d)*Math.sin(m)+Math.cos(d)*Math.cos(m)*Math.cos((e.lng-this.lng)*A);return Py*Math.acos(Math.min(w,1))}static convert(e){if(e instanceof lc)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new lc(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new lc(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const fC=2*Math.PI*Py;function gC(a){return fC*Math.cos(a*Math.PI/180)}function mC(a){return(180+a)/360}function yC(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function vC(a,e){return a/gC(e)}function Ly(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}class sg{constructor(e,A,d=0){this.x=+e,this.y=+A,this.z=+d}static fromLngLat(e,A=0){const d=lc.convert(e);return new sg(mC(d.lng),yC(d.lat),vC(A,d.lat))}toLngLat(){return new lc(360*this.x-180,Ly(this.y))}toAltitude(){return this.z*gC(Ly(this.y))}meterInMercatorCoordinateUnits(){return 1/fC*(e=Ly(this.y),1/Math.cos(e*Math.PI/180));var e}}function wC(a,e,A){var d=2*Math.PI*6378137/256/Math.pow(2,A);return[a*d-2*Math.PI*6378137/2,e*d-2*Math.PI*6378137/2]}class Qy{constructor(e,A,d){if(e<0||e>25||d<0||d>=Math.pow(2,e)||A<0||A>=Math.pow(2,e))throw new Error(`x=${A}, y=${d}, z=${e} outside of bounds. 0<=x<${Math.pow(2,e)}, 0<=y<${Math.pow(2,e)} 0<=z<=25 `);this.z=e,this.x=A,this.y=d,this.key=Sd(0,e,e,A,d)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,A,d){const m=(B=this.y,S=this.z,L=wC(256*(w=this.x),256*(B=Math.pow(2,S)-B-1),S),N=wC(256*(w+1),256*(B+1),S),L[0]+","+L[1]+","+N[0]+","+N[1]);var w,B,S,L,N;const R=function(j,W,et){let at,ct="";for(let xt=j;xt>0;xt--)at=1<<xt-1,ct+=(W&at?1:0)+(et&at?2:0);return ct}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,A>1?"@2x":"").replace(/{quadkey}/g,R).replace(/{bbox-epsg-3857}/g,m)}isChildOf(e){const A=this.z-e.z;return A>0&&e.x===this.x>>A&&e.y===this.y>>A}getTilePoint(e){const A=Math.pow(2,this.z);return new U((e.x*A-this.x)*Oi,(e.y*A-this.y)*Oi)}toString(){return`${this.z}/${this.x}/${this.y}`}}class _C{constructor(e,A){this.wrap=e,this.canonical=A,this.key=Sd(e,A.z,A.z,A.x,A.y)}}class Ha{constructor(e,A,d,m,w){if(e<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${e}; z = ${d}`);this.overscaledZ=e,this.wrap=A,this.canonical=new Qy(d,+m,+w),this.key=Sd(A,e,d,m,w)}clone(){return new Ha(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const A=this.canonical.z-e;return e>this.canonical.z?new Ha(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ha(e,this.wrap,e,this.canonical.x>>A,this.canonical.y>>A)}calculateScaledKey(e,A){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-e;return e>this.canonical.z?Sd(this.wrap*+A,e,this.canonical.z,this.canonical.x,this.canonical.y):Sd(this.wrap*+A,e,e,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(e){if(e.wrap!==this.wrap)return!1;const A=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>A&&e.canonical.y===this.canonical.y>>A}children(e){if(this.overscaledZ>=e)return[new Ha(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const A=this.canonical.z+1,d=2*this.canonical.x,m=2*this.canonical.y;return[new Ha(A,this.wrap,A,d,m),new Ha(A,this.wrap,A,d+1,m),new Ha(A,this.wrap,A,d,m+1),new Ha(A,this.wrap,A,d+1,m+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Ha(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Ha(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new _C(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new sg(e.x-this.wrap,e.y))}}function Sd(a,e,A,d,m){(a*=2)<0&&(a=-1*a-1);const w=1<<A;return(w*w*a+w*m+d).toString(36)+A.toString(36)+e.toString(36)}Ve("CanonicalTileID",Qy),Ve("OverscaledTileID",Ha,{omit:["posMatrix"]});class bC{constructor(e,A,d,m=1,w=1,B=1,S=0){if(this.uid=e,A.height!==A.width)throw new RangeError("DEM tiles must be square");if(d&&!["mapbox","terrarium","custom"].includes(d))return void bt(`"${d}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=A.height;const L=this.dim=A.height-2;switch(this.data=new Uint32Array(A.data.buffer),d){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=w,this.blueFactor=B,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let N=0;N<L;N++)this.data[this._idx(-1,N)]=this.data[this._idx(0,N)],this.data[this._idx(L,N)]=this.data[this._idx(L-1,N)],this.data[this._idx(N,-1)]=this.data[this._idx(N,0)],this.data[this._idx(N,L)]=this.data[this._idx(N,L-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(L,-1)]=this.data[this._idx(L-1,0)],this.data[this._idx(-1,L)]=this.data[this._idx(0,L-1)],this.data[this._idx(L,L)]=this.data[this._idx(L-1,L-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let N=0;N<L;N++)for(let R=0;R<L;R++){const j=this.get(N,R);j>this.max&&(this.max=j),j<this.min&&(this.min=j)}}get(e,A){const d=new Uint8Array(this.data.buffer),m=4*this._idx(e,A);return this.unpack(d[m],d[m+1],d[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(e,A){if(e<-1||e>=this.dim+1||A<-1||A>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(A+1)*this.stride+(e+1)}unpack(e,A,d){return e*this.redFactor+A*this.greenFactor+d*this.blueFactor-this.baseShift}getPixels(){return new za({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,A,d){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let m=A*this.dim,w=A*this.dim+this.dim,B=d*this.dim,S=d*this.dim+this.dim;switch(A){case-1:m=w-1;break;case 1:w=m+1}switch(d){case-1:B=S-1;break;case 1:S=B+1}const L=-A*this.dim,N=-d*this.dim;for(let R=B;R<S;R++)for(let j=m;j<w;j++)this.data[this._idx(j,R)]=e.data[this._idx(j+L,R+N)]}}Ve("DEMData",bC);class xC{constructor(e){this._stringToNumber={},this._numberToString=[];for(let A=0;A<e.length;A++){const d=e[A];this._stringToNumber[d]=A,this._numberToString[A]=d}}encode(e){return this._stringToNumber[e]}decode(e){if(e>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${e} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[e]}}class BC{constructor(e,A,d,m,w){this.type="Feature",this._vectorTileFeature=e,e._z=A,e._x=d,e._y=m,this.properties=e.properties,this.id=w}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const A in this)A!=="_geometry"&&A!=="_vectorTileFeature"&&(e[A]=this[A]);return e}}class CC{constructor(e,A){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new pl(Oi,16,0),this.grid3D=new pl(Oi,16,0),this.featureIndexArray=new Li,this.promoteId=A}insert(e,A,d,m,w,B){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,m,w);const L=B?this.grid3D:this.grid;for(let N=0;N<A.length;N++){const R=A[N],j=[1/0,1/0,-1/0,-1/0];for(let W=0;W<R.length;W++){const et=R[W];j[0]=Math.min(j[0],et.x),j[1]=Math.min(j[1],et.y),j[2]=Math.max(j[2],et.x),j[3]=Math.max(j[3],et.y)}j[0]<Oi&&j[1]<Oi&&j[2]>=0&&j[3]>=0&&L.insert(S,j[0],j[1],j[2],j[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ac.VectorTile(new by(this.rawTileData)).layers,this.sourceLayerCoder=new xC(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(e,A,d,m){this.loadVTLayers();const w=e.params||{},B=Oi/e.tileSize/e.scale,S=ai(w.filter),L=e.queryGeometry,N=e.queryPadding*B,R=SC(L),j=this.grid.query(R.minX-N,R.minY-N,R.maxX+N,R.maxY+N),W=SC(e.cameraQueryGeometry),et=this.grid3D.query(W.minX-N,W.minY-N,W.maxX+N,W.maxY+N,(xt,It,$t,Qt)=>function(Vt,Ae,ve,De,lr){for(const Pe of Vt)if(Ae<=Pe.x&&ve<=Pe.y&&De>=Pe.x&&lr>=Pe.y)return!0;const ze=[new U(Ae,ve),new U(Ae,lr),new U(De,lr),new U(De,ve)];if(Vt.length>2){for(const Pe of ze)if(Xs(Vt,Pe))return!0}for(let Pe=0;Pe<Vt.length-1;Pe++)if(NA(Vt[Pe],Vt[Pe+1],ze))return!0;return!1}(e.cameraQueryGeometry,xt-N,It-N,$t+N,Qt+N));for(const xt of et)j.push(xt);j.sort(Ez);const at={};let ct;for(let xt=0;xt<j.length;xt++){const It=j[xt];if(It===ct)continue;ct=It;const $t=this.featureIndexArray.get(It);let Qt=null;this.loadMatchingFeature(at,$t.bucketIndex,$t.sourceLayerIndex,$t.featureIndex,S,w.layers,w.availableImages,A,d,m,(Vt,Ae,ve)=>(Qt||(Qt=kA(Vt)),Ae.queryIntersectsFeature(L,Vt,ve,Qt,this.z,e.transform,B,e.pixelPosMatrix)))}return at}loadMatchingFeature(e,A,d,m,w,B,S,L,N,R,j){const W=this.bucketLayerIDs[A];if(B&&!function(xt,It){for(let $t=0;$t<xt.length;$t++)if(It.indexOf(xt[$t])>=0)return!0;return!1}(B,W))return;const et=this.sourceLayerCoder.decode(d),at=this.vtLayers[et].feature(m);if(w.needGeometry){const xt=vl(at,!0);if(!w.filter(new ti(this.tileID.overscaledZ),xt,this.tileID.canonical))return}else if(!w.filter(new ti(this.tileID.overscaledZ),at))return;const ct=this.getId(at,et);for(let xt=0;xt<W.length;xt++){const It=W[xt];if(B&&B.indexOf(It)<0)continue;const $t=L[It];if(!$t)continue;let Qt={};ct&&R&&(Qt=R.getState($t.sourceLayer||"_geojsonTileLayer",ct));const Vt=Ft({},N[It]);Vt.paint=FC(Vt.paint,$t.paint,at,Qt,S),Vt.layout=FC(Vt.layout,$t.layout,at,Qt,S);const Ae=!j||j(at,$t,Qt);if(!Ae)continue;const ve=new BC(at,this.z,this.x,this.y,ct);ve.layer=Vt;let De=e[It];De===void 0&&(De=e[It]=[]),De.push({featureIndex:m,feature:ve,intersectionZ:Ae})}}lookupSymbolFeatures(e,A,d,m,w,B,S,L){const N={};this.loadVTLayers();const R=ai(w);for(const j of e)this.loadMatchingFeature(N,d,m,j,R,B,S,L,A);return N}hasLayer(e){for(const A of this.bucketLayerIDs)for(const d of A)if(e===d)return!0;return!1}getId(e,A){let d=e.id;return this.promoteId&&(d=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[A]],typeof d=="boolean"&&(d=Number(d))),d}}function FC(a,e,A,d,m){return Rt(a,(w,B)=>{const S=e instanceof tc?e.get(B):null;return S&&S.evaluate?S.evaluate(A,d,m):S})}function SC(a){let e=1/0,A=1/0,d=-1/0,m=-1/0;for(const w of a)e=Math.min(e,w.x),A=Math.min(A,w.y),d=Math.max(d,w.x),m=Math.max(m,w.y);return{minX:e,minY:A,maxX:d,maxY:m}}function Ez(a,e){return e-a}function IC(a,e,A,d,m){const w=[];for(let B=0;B<a.length;B++){const S=a[B];let L;for(let N=0;N<S.length-1;N++){let R=S[N],j=S[N+1];R.x<e&&j.x<e||(R.x<e?R=new U(e,R.y+(e-R.x)/(j.x-R.x)*(j.y-R.y))._round():j.x<e&&(j=new U(e,R.y+(e-R.x)/(j.x-R.x)*(j.y-R.y))._round()),R.y<A&&j.y<A||(R.y<A?R=new U(R.x+(A-R.y)/(j.y-R.y)*(j.x-R.x),A)._round():j.y<A&&(j=new U(R.x+(A-R.y)/(j.y-R.y)*(j.x-R.x),A)._round()),R.x>=d&&j.x>=d||(R.x>=d?R=new U(d,R.y+(d-R.x)/(j.x-R.x)*(j.y-R.y))._round():j.x>=d&&(j=new U(d,R.y+(d-R.x)/(j.x-R.x)*(j.y-R.y))._round()),R.y>=m&&j.y>=m||(R.y>=m?R=new U(R.x+(m-R.y)/(j.y-R.y)*(j.x-R.x),m)._round():j.y>=m&&(j=new U(R.x+(m-R.y)/(j.y-R.y)*(j.x-R.x),m)._round()),L&&R.equals(L[L.length-1])||(L=[R],w.push(L)),L.push(j)))))}}return w}Ve("FeatureIndex",CC,{omit:["rawTileData","sourceLayerCoder"]});class cc extends U{constructor(e,A,d,m){super(e,A),this.angle=d,m!==void 0&&(this.segment=m)}clone(){return new cc(this.x,this.y,this.angle,this.segment)}}function EC(a,e,A,d,m){if(e.segment===void 0||A===0)return!0;let w=e,B=e.segment+1,S=0;for(;S>-A/2;){if(B--,B<0)return!1;S-=a[B].dist(w),w=a[B]}S+=a[B].dist(a[B+1]),B++;const L=[];let N=0;for(;S<A/2;){const R=a[B],j=a[B+1];if(!j)return!1;let W=a[B-1].angleTo(R)-R.angleTo(j);for(W=Math.abs((W+3*Math.PI)%(2*Math.PI)-Math.PI),L.push({distance:S,angleDelta:W}),N+=W;S-L[0].distance>d;)N-=L.shift().angleDelta;if(N>m)return!1;B++,S+=R.dist(j)}return!0}function TC(a){let e=0;for(let A=0;A<a.length-1;A++)e+=a[A].dist(a[A+1]);return e}function UC(a,e,A){return a?.6*e*A:0}function PC(a,e){return Math.max(a?a.right-a.left:0,e?e.right-e.left:0)}function Tz(a,e,A,d,m,w){const B=UC(A,m,w),S=PC(A,d)*w;let L=0;const N=TC(a)/2;for(let R=0;R<a.length-1;R++){const j=a[R],W=a[R+1],et=j.dist(W);if(L+et>N){const at=(N-L)/et,ct=on.number(j.x,W.x,at),xt=on.number(j.y,W.y,at),It=new cc(ct,xt,W.angleTo(j),R);return It._round(),!B||EC(a,It,S,B,e)?It:void 0}L+=et}}function Uz(a,e,A,d,m,w,B,S,L){const N=UC(d,w,B),R=PC(d,m),j=R*B,W=a[0].x===0||a[0].x===L||a[0].y===0||a[0].y===L;return e-j<e/4&&(e=j+e/4),LC(a,W?e/2*S%e:(R/2+2*w)*B*S%e,e,N,A,j,W,!1,L)}function LC(a,e,A,d,m,w,B,S,L){const N=w/2,R=TC(a);let j=0,W=e-A,et=[];for(let at=0;at<a.length-1;at++){const ct=a[at],xt=a[at+1],It=ct.dist(xt),$t=xt.angleTo(ct);for(;W+A<j+It;){W+=A;const Qt=(W-j)/It,Vt=on.number(ct.x,xt.x,Qt),Ae=on.number(ct.y,xt.y,Qt);if(Vt>=0&&Vt<L&&Ae>=0&&Ae<L&&W-N>=0&&W+N<=R){const ve=new cc(Vt,Ae,$t,at);ve._round(),d&&!EC(a,ve,w,d,m)||et.push(ve)}}j+=It}return S||et.length||B||(et=LC(a,j/2,A,d,m,w,B,!0,L)),et}Ve("Anchor",cc);const oh=Zs;function QC(a,e,A,d){const m=[],w=a.image,B=w.pixelRatio,S=w.paddedRect.w-2*oh,L=w.paddedRect.h-2*oh;let N={x1:a.left,y1:a.top,x2:a.right,y2:a.bottom};const R=w.stretchX||[[0,S]],j=w.stretchY||[[0,L]],W=(fe,nr)=>fe+nr[1]-nr[0],et=R.reduce(W,0),at=j.reduce(W,0),ct=S-et,xt=L-at;let It=0,$t=et,Qt=0,Vt=at,Ae=0,ve=ct,De=0,lr=xt;if(w.content&&d){const fe=w.content,nr=fe[2]-fe[0],Je=fe[3]-fe[1];(w.textFitWidth||w.textFitHeight)&&(N=oC(a)),It=ag(R,0,fe[0]),Qt=ag(j,0,fe[1]),$t=ag(R,fe[0],fe[2]),Vt=ag(j,fe[1],fe[3]),Ae=fe[0]-It,De=fe[1]-Qt,ve=nr-$t,lr=Je-Vt}const ze=N.x1,Pe=N.y1,ir=N.x2-ze,qe=N.y2-Pe,je=(fe,nr,Je,Cr)=>{const mi=og(fe.stretch-It,$t,ir,ze),hi=Ag(fe.fixed-Ae,ve,fe.stretch,et),Tn=og(nr.stretch-Qt,Vt,qe,Pe),xo=Ag(nr.fixed-De,lr,nr.stretch,at),Wn=og(Je.stretch-It,$t,ir,ze),Zi=Ag(Je.fixed-Ae,ve,Je.stretch,et),Ts=og(Cr.stretch-Qt,Vt,qe,Pe),Us=Ag(Cr.fixed-De,lr,Cr.stretch,at),Ps=new U(mi,Tn),Yi=new U(Wn,Tn),Un=new U(Wn,Ts),cs=new U(mi,Ts),Xn=new U(hi/B,xo/B),Ls=new U(Zi/B,Us/B),Zn=e*Math.PI/180;if(Zn){const Yr=Math.sin(Zn),Bi=Math.cos(Zn),Ti=[Bi,-Yr,Yr,Bi];Ps._matMult(Ti),Yi._matMult(Ti),cs._matMult(Ti),Un._matMult(Ti)}const Va=fe.stretch+fe.fixed,Ys=nr.stretch+nr.fixed;return{tl:Ps,tr:Yi,bl:cs,br:Un,tex:{x:w.paddedRect.x+oh+Va,y:w.paddedRect.y+oh+Ys,w:Je.stretch+Je.fixed-Va,h:Cr.stretch+Cr.fixed-Ys},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Xn,pixelOffsetBR:Ls,minFontScaleX:ve/B/ir,minFontScaleY:lr/B/qe,isSDF:A}};if(d&&(w.stretchX||w.stretchY)){const fe=MC(R,ct,et),nr=MC(j,xt,at);for(let Je=0;Je<fe.length-1;Je++){const Cr=fe[Je],mi=fe[Je+1];for(let hi=0;hi<nr.length-1;hi++)m.push(je(Cr,nr[hi],mi,nr[hi+1]))}}else m.push(je({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:L+1}));return m}function ag(a,e,A){let d=0;for(const m of a)d+=Math.max(e,Math.min(A,m[1]))-Math.max(e,Math.min(A,m[0]));return d}function MC(a,e,A){const d=[{fixed:-oh,stretch:0}];for(const[m,w]of a){const B=d[d.length-1];d.push({fixed:m-B.stretch,stretch:B.stretch}),d.push({fixed:m-B.stretch,stretch:B.stretch+(w-m)})}return d.push({fixed:e+oh,stretch:A}),d}function og(a,e,A,d){return a/e*A+d}function Ag(a,e,A,d){return a-e*A/d}class lg{constructor(e,A,d,m,w,B,S,L,N,R){var j;if(this.boxStartIndex=e.length,N){let W=B.top,et=B.bottom;const at=B.collisionPadding;at&&(W-=at[1],et+=at[3]);let ct=et-W;ct>0&&(ct=Math.max(10,ct),this.circleDiameter=ct)}else{const W=!((j=B.image)===null||j===void 0)&&j.content&&(B.image.textFitWidth||B.image.textFitHeight)?oC(B):{x1:B.left,y1:B.top,x2:B.right,y2:B.bottom};W.y1=W.y1*S-L[0],W.y2=W.y2*S+L[2],W.x1=W.x1*S-L[3],W.x2=W.x2*S+L[1];const et=B.collisionPadding;if(et&&(W.x1-=et[0]*S,W.y1-=et[1]*S,W.x2+=et[2]*S,W.y2+=et[3]*S),R){const at=new U(W.x1,W.y1),ct=new U(W.x2,W.y1),xt=new U(W.x1,W.y2),It=new U(W.x2,W.y2),$t=R*Math.PI/180;at._rotate($t),ct._rotate($t),xt._rotate($t),It._rotate($t),W.x1=Math.min(at.x,ct.x,xt.x,It.x),W.x2=Math.max(at.x,ct.x,xt.x,It.x),W.y1=Math.min(at.y,ct.y,xt.y,It.y),W.y2=Math.max(at.y,ct.y,xt.y,It.y)}e.emplaceBack(A.x,A.y,W.x1,W.y1,W.x2,W.y2,d,m,w)}this.boxEndIndex=e.length}}class Pz{constructor(e=[],A=Lz){if(this.data=e,this.length=this.data.length,this.compare=A,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],A=this.data.pop();return this.length--,this.length>0&&(this.data[0]=A,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:A,compare:d}=this,m=A[e];for(;e>0;){const w=e-1>>1,B=A[w];if(d(m,B)>=0)break;A[e]=B,e=w}A[e]=m}_down(e){const{data:A,compare:d}=this,m=this.length>>1,w=A[e];for(;e<m;){let B=1+(e<<1),S=A[B];const L=B+1;if(L<this.length&&d(A[L],S)<0&&(B=L,S=A[L]),d(S,w)>=0)break;A[e]=S,e=B}A[e]=w}}function Lz(a,e){return a<e?-1:a>e?1:0}function Qz(a,e=1,A=!1){let d=1/0,m=1/0,w=-1/0,B=-1/0;const S=a[0];for(let et=0;et<S.length;et++){const at=S[et];(!et||at.x<d)&&(d=at.x),(!et||at.y<m)&&(m=at.y),(!et||at.x>w)&&(w=at.x),(!et||at.y>B)&&(B=at.y)}const L=Math.min(w-d,B-m);let N=L/2;const R=new Pz([],Mz);if(L===0)return new U(d,m);for(let et=d;et<w;et+=L)for(let at=m;at<B;at+=L)R.push(new Ah(et+N,at+N,N,a));let j=function(et){let at=0,ct=0,xt=0;const It=et[0];for(let $t=0,Qt=It.length,Vt=Qt-1;$t<Qt;Vt=$t++){const Ae=It[$t],ve=It[Vt],De=Ae.x*ve.y-ve.x*Ae.y;ct+=(Ae.x+ve.x)*De,xt+=(Ae.y+ve.y)*De,at+=3*De}return new Ah(ct/at,xt/at,0,et)}(a),W=R.length;for(;R.length;){const et=R.pop();(et.d>j.d||!j.d)&&(j=et,A&&console.log("found best %d after %d probes",Math.round(1e4*et.d)/1e4,W)),et.max-j.d<=e||(N=et.h/2,R.push(new Ah(et.p.x-N,et.p.y-N,N,a)),R.push(new Ah(et.p.x+N,et.p.y-N,N,a)),R.push(new Ah(et.p.x-N,et.p.y+N,N,a)),R.push(new Ah(et.p.x+N,et.p.y+N,N,a)),W+=4)}return A&&(console.log(`num probes: ${W}`),console.log(`best distance: ${j.d}`)),j.p}function Mz(a,e){return e.max-a.max}function Ah(a,e,A,d){this.p=new U(a,e),this.h=A,this.d=function(m,w){let B=!1,S=1/0;for(let L=0;L<w.length;L++){const N=w[L];for(let R=0,j=N.length,W=j-1;R<j;W=R++){const et=N[R],at=N[W];et.y>m.y!=at.y>m.y&&m.x<(at.x-et.x)*(m.y-et.y)/(at.y-et.y)+et.x&&(B=!B),S=Math.min(S,tu(m,et,at))}}return(B?1:-1)*Math.sqrt(S)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}var Gn;p.aq=void 0,(Gn=p.aq||(p.aq={}))[Gn.center=1]="center",Gn[Gn.left=2]="left",Gn[Gn.right=3]="right",Gn[Gn.top=4]="top",Gn[Gn.bottom=5]="bottom",Gn[Gn["top-left"]=6]="top-left",Gn[Gn["top-right"]=7]="top-right",Gn[Gn["bottom-left"]=8]="bottom-left",Gn[Gn["bottom-right"]=9]="bottom-right";const uc=7,My=Number.POSITIVE_INFINITY;function kC(a,e){return e[1]!==My?function(A,d,m){let w=0,B=0;switch(d=Math.abs(d),m=Math.abs(m),A){case"top-right":case"top-left":case"top":B=m-uc;break;case"bottom-right":case"bottom-left":case"bottom":B=-m+uc}switch(A){case"top-right":case"bottom-right":case"right":w=-d;break;case"top-left":case"bottom-left":case"left":w=d}return[w,B]}(a,e[0],e[1]):function(A,d){let m=0,w=0;d<0&&(d=0);const B=d/Math.SQRT2;switch(A){case"top-right":case"top-left":w=B-uc;break;case"bottom-right":case"bottom-left":w=-B+uc;break;case"bottom":w=-d+uc;break;case"top":w=d-uc}switch(A){case"top-right":case"bottom-right":m=-B;break;case"top-left":case"bottom-left":m=B;break;case"left":m=d;break;case"right":m=-d}return[m,w]}(a,e[0])}function DC(a,e,A){var d;const m=a.layout,w=(d=m.get("text-variable-anchor-offset"))===null||d===void 0?void 0:d.evaluate(e,{},A);if(w){const S=w.values,L=[];for(let N=0;N<S.length;N+=2){const R=L[N]=S[N],j=S[N+1].map(W=>W*Bn);R.startsWith("top")?j[1]-=uc:R.startsWith("bottom")&&(j[1]+=uc),L[N+1]=j}return new tn(L)}const B=m.get("text-variable-anchor");if(B){let S;S=a._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(e,{},A)*Bn,My]:m.get("text-offset").evaluate(e,{},A).map(N=>N*Bn);const L=[];for(const N of B)L.push(N,kC(N,S));return new tn(L)}return null}function ky(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function kz(a,e,A,d,m,w,B,S,L,N,R){let j=w.textMaxSize.evaluate(e,{});j===void 0&&(j=B);const W=a.layers[0].layout,et=W.get("icon-offset").evaluate(e,{},R),at=OC(A.horizontal),ct=B/24,xt=a.tilePixelRatio*ct,It=a.tilePixelRatio*j/24,$t=a.tilePixelRatio*S,Qt=a.tilePixelRatio*W.get("symbol-spacing"),Vt=W.get("text-padding")*a.tilePixelRatio,Ae=function(fe,nr,Je,Cr=1){const mi=fe.get("icon-padding").evaluate(nr,{},Je),hi=mi&&mi.values;return[hi[0]*Cr,hi[1]*Cr,hi[2]*Cr,hi[3]*Cr]}(W,e,R,a.tilePixelRatio),ve=W.get("text-max-angle")/180*Math.PI,De=W.get("text-rotation-alignment")!=="viewport"&&W.get("symbol-placement")!=="point",lr=W.get("icon-rotation-alignment")==="map"&&W.get("symbol-placement")!=="point",ze=W.get("symbol-placement"),Pe=Qt/2,ir=W.get("icon-text-fit");let qe;d&&ir!=="none"&&(a.allowVerticalPlacement&&A.vertical&&(qe=AC(d,A.vertical,ir,W.get("icon-text-fit-padding"),et,ct)),at&&(d=AC(d,at,ir,W.get("icon-text-fit-padding"),et,ct)));const je=(fe,nr)=>{nr.x<0||nr.x>=Oi||nr.y<0||nr.y>=Oi||function(Je,Cr,mi,hi,Tn,xo,Wn,Zi,Ts,Us,Ps,Yi,Un,cs,Xn,Ls,Zn,Va,Ys,Yr,Bi,Ti,wa,Vi,lh){const zA=Je.addToLineVertexArray(Cr,mi);let HA,Bo,ja,kn,_l=0,Td=0,VC=0,jC=0,jy=-1,Ky=-1;const bl={};let KC=Jo("");if(Je.allowVerticalPlacement&&hi.vertical){const us=Zi.layout.get("text-rotate").evaluate(Bi,{},Vi)+90;ja=new lg(Ts,Cr,Us,Ps,Yi,hi.vertical,Un,cs,Xn,us),Wn&&(kn=new lg(Ts,Cr,Us,Ps,Yi,Wn,Zn,Va,Xn,us))}if(Tn){const us=Zi.layout.get("icon-rotate").evaluate(Bi,{}),Ka=Zi.layout.get("icon-text-fit")!=="none",iu=QC(Tn,us,wa,Ka),eA=Wn?QC(Wn,us,wa,Ka):void 0;Bo=new lg(Ts,Cr,Us,Ps,Yi,Tn,Zn,Va,!1,us),_l=4*iu.length;const nu=Je.iconSizeData;let VA=null;nu.kind==="source"?(VA=[RA*Zi.layout.get("icon-size").evaluate(Bi,{})],VA[0]>Ac&&bt(`${Je.layerIds[0]}: Value for "icon-size" is >= ${Fd}. Reduce your "icon-size".`)):nu.kind==="composite"&&(VA=[RA*Ti.compositeIconSizes[0].evaluate(Bi,{},Vi),RA*Ti.compositeIconSizes[1].evaluate(Bi,{},Vi)],(VA[0]>Ac||VA[1]>Ac)&&bt(`${Je.layerIds[0]}: Value for "icon-size" is >= ${Fd}. Reduce your "icon-size".`)),Je.addSymbols(Je.icon,iu,VA,Yr,Ys,Bi,p.ah.none,Cr,zA.lineStartIndex,zA.lineLength,-1,Vi),jy=Je.icon.placedSymbolArray.length-1,eA&&(Td=4*eA.length,Je.addSymbols(Je.icon,eA,VA,Yr,Ys,Bi,p.ah.vertical,Cr,zA.lineStartIndex,zA.lineLength,-1,Vi),Ky=Je.icon.placedSymbolArray.length-1)}const $C=Object.keys(hi.horizontal);for(const us of $C){const Ka=hi.horizontal[us];if(!HA){KC=Jo(Ka.text);const eA=Zi.layout.get("text-rotate").evaluate(Bi,{},Vi);HA=new lg(Ts,Cr,Us,Ps,Yi,Ka,Un,cs,Xn,eA)}const iu=Ka.positionedLines.length===1;if(VC+=NC(Je,Cr,Ka,xo,Zi,Xn,Bi,Ls,zA,hi.vertical?p.ah.horizontal:p.ah.horizontalOnly,iu?$C:[us],bl,jy,Ti,Vi),iu)break}hi.vertical&&(jC+=NC(Je,Cr,hi.vertical,xo,Zi,Xn,Bi,Ls,zA,p.ah.vertical,["vertical"],bl,Ky,Ti,Vi));const Oz=HA?HA.boxStartIndex:Je.collisionBoxArray.length,Rz=HA?HA.boxEndIndex:Je.collisionBoxArray.length,zz=ja?ja.boxStartIndex:Je.collisionBoxArray.length,Hz=ja?ja.boxEndIndex:Je.collisionBoxArray.length,Vz=Bo?Bo.boxStartIndex:Je.collisionBoxArray.length,jz=Bo?Bo.boxEndIndex:Je.collisionBoxArray.length,Kz=kn?kn.boxStartIndex:Je.collisionBoxArray.length,$z=kn?kn.boxEndIndex:Je.collisionBoxArray.length;let tA=-1;const ug=(us,Ka)=>us&&us.circleDiameter?Math.max(us.circleDiameter,Ka):Ka;tA=ug(HA,tA),tA=ug(ja,tA),tA=ug(Bo,tA),tA=ug(kn,tA);const qC=tA>-1?1:0;qC&&(tA*=lh/Bn),Je.glyphOffsetArray.length>=ah.MAX_GLYPHS&&bt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Bi.sortKey!==void 0&&Je.addToSortKeyRanges(Je.symbolInstances.length,Bi.sortKey);const qz=DC(Zi,Bi,Vi),[Gz,Wz]=function(us,Ka){const iu=us.length,eA=Ka==null?void 0:Ka.values;if((eA==null?void 0:eA.length)>0)for(let nu=0;nu<eA.length;nu+=2){const VA=eA[nu+1];us.emplaceBack(p.aq[eA[nu]],VA[0],VA[1])}return[iu,us.length]}(Je.textAnchorOffsets,qz);Je.symbolInstances.emplaceBack(Cr.x,Cr.y,bl.right>=0?bl.right:-1,bl.center>=0?bl.center:-1,bl.left>=0?bl.left:-1,bl.vertical||-1,jy,Ky,KC,Oz,Rz,zz,Hz,Vz,jz,Kz,$z,Us,VC,jC,_l,Td,qC,0,Un,tA,Gz,Wz)}(a,nr,fe,A,d,m,qe,a.layers[0],a.collisionBoxArray,e.index,e.sourceLayerIndex,a.index,xt,[Vt,Vt,Vt,Vt],De,L,$t,Ae,lr,et,e,w,N,R,B)};if(ze==="line")for(const fe of IC(e.geometry,0,0,Oi,Oi)){const nr=Uz(fe,Qt,ve,A.vertical||at,d,24,It,a.overscaling,Oi);for(const Je of nr)at&&Dz(a,at.text,Pe,Je)||je(fe,Je)}else if(ze==="line-center"){for(const fe of e.geometry)if(fe.length>1){const nr=Tz(fe,ve,A.vertical||at,d,24,It);nr&&je(fe,nr)}}else if(e.type==="Polygon")for(const fe of ao(e.geometry,0)){const nr=Qz(fe,16);je(fe[0],new cc(nr.x,nr.y,0))}else if(e.type==="LineString")for(const fe of e.geometry)je(fe,new cc(fe[0].x,fe[0].y,0));else if(e.type==="Point")for(const fe of e.geometry)for(const nr of fe)je([nr],new cc(nr.x,nr.y,0))}function NC(a,e,A,d,m,w,B,S,L,N,R,j,W,et,at){const ct=function($t,Qt,Vt,Ae,ve,De,lr,ze){const Pe=Ae.layout.get("text-rotate").evaluate(De,{})*Math.PI/180,ir=[];for(const qe of Qt.positionedLines)for(const je of qe.positionedGlyphs){if(!je.rect)continue;const fe=je.rect||{};let nr=tC+1,Je=!0,Cr=1,mi=0;const hi=(ve||ze)&&je.vertical,Tn=je.metrics.advance*je.scale/2;if(ze&&Qt.verticalizable&&(mi=qe.lineOffset/2-(je.imageName?-(Bn-je.metrics.width*je.scale)/2:(je.scale-1)*Bn)),je.imageName){const Yr=lr[je.imageName];Je=Yr.sdf,Cr=Yr.pixelRatio,nr=Zs/Cr}const xo=ve?[je.x+Tn,je.y]:[0,0];let Wn=ve?[0,0]:[je.x+Tn+Vt[0],je.y+Vt[1]-mi],Zi=[0,0];hi&&(Zi=Wn,Wn=[0,0]);const Ts=je.metrics.isDoubleResolution?2:1,Us=(je.metrics.left-nr)*je.scale-Tn+Wn[0],Ps=(-je.metrics.top-nr)*je.scale+Wn[1],Yi=Us+fe.w/Ts*je.scale/Cr,Un=Ps+fe.h/Ts*je.scale/Cr,cs=new U(Us,Ps),Xn=new U(Yi,Ps),Ls=new U(Us,Un),Zn=new U(Yi,Un);if(hi){const Yr=new U(-Tn,Tn-Bd),Bi=-Math.PI/2,Ti=Bn/2-Tn,wa=new U(5-Bd-Ti,-(je.imageName?Ti:0)),Vi=new U(...Zi);cs._rotateAround(Bi,Yr)._add(wa)._add(Vi),Xn._rotateAround(Bi,Yr)._add(wa)._add(Vi),Ls._rotateAround(Bi,Yr)._add(wa)._add(Vi),Zn._rotateAround(Bi,Yr)._add(wa)._add(Vi)}if(Pe){const Yr=Math.sin(Pe),Bi=Math.cos(Pe),Ti=[Bi,-Yr,Yr,Bi];cs._matMult(Ti),Xn._matMult(Ti),Ls._matMult(Ti),Zn._matMult(Ti)}const Va=new U(0,0),Ys=new U(0,0);ir.push({tl:cs,tr:Xn,bl:Ls,br:Zn,tex:fe,writingMode:Qt.writingMode,glyphOffset:xo,sectionIndex:je.sectionIndex,isSDF:Je,pixelOffsetTL:Va,pixelOffsetBR:Ys,minFontScaleX:0,minFontScaleY:0})}return ir}(0,A,S,m,w,B,d,a.allowVerticalPlacement),xt=a.textSizeData;let It=null;xt.kind==="source"?(It=[RA*m.layout.get("text-size").evaluate(B,{})],It[0]>Ac&&bt(`${a.layerIds[0]}: Value for "text-size" is >= ${Fd}. Reduce your "text-size".`)):xt.kind==="composite"&&(It=[RA*et.compositeTextSizes[0].evaluate(B,{},at),RA*et.compositeTextSizes[1].evaluate(B,{},at)],(It[0]>Ac||It[1]>Ac)&&bt(`${a.layerIds[0]}: Value for "text-size" is >= ${Fd}. Reduce your "text-size".`)),a.addSymbols(a.text,ct,It,S,w,B,N,e,L.lineStartIndex,L.lineLength,W,at);for(const $t of R)j[$t]=a.text.placedSymbolArray.length-1;return 4*ct.length}function OC(a){for(const e in a)return a[e];return null}function Dz(a,e,A,d){const m=a.compareText;if(e in m){const w=m[e];for(let B=w.length-1;B>=0;B--)if(d.dist(w[B])<A)return!0}else m[e]=[];return m[e].push(d),!1}const RC=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Dy{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[A,d]=new Uint8Array(e,0,2);if(A!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=d>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const w=RC[15&d];if(!w)throw new Error("Unrecognized array type.");const[B]=new Uint16Array(e,2,1),[S]=new Uint32Array(e,4,1);return new Dy(S,B,w,e)}constructor(e,A=64,d=Float64Array,m){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+A,2),65535),this.ArrayType=d,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const w=RC.indexOf(this.ArrayType),B=2*e*this.ArrayType.BYTES_PER_ELEMENT,S=e*this.IndexArrayType.BYTES_PER_ELEMENT,L=(8-S%8)%8;if(w<0)throw new Error(`Unexpected typed array class: ${d}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+S+L,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+B+S+L),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+S+L,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+w]),new Uint16Array(this.data,2,1)[0]=A,new Uint32Array(this.data,4,1)[0]=e)}add(e,A){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=e,this.coords[this._pos++]=A,d}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return Ny(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,A,d,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:w,coords:B,nodeSize:S}=this,L=[0,w.length-1,0],N=[];for(;L.length;){const R=L.pop()||0,j=L.pop()||0,W=L.pop()||0;if(j-W<=S){for(let xt=W;xt<=j;xt++){const It=B[2*xt],$t=B[2*xt+1];It>=e&&It<=d&&$t>=A&&$t<=m&&N.push(w[xt])}continue}const et=W+j>>1,at=B[2*et],ct=B[2*et+1];at>=e&&at<=d&&ct>=A&&ct<=m&&N.push(w[et]),(R===0?e<=at:A<=ct)&&(L.push(W),L.push(et-1),L.push(1-R)),(R===0?d>=at:m>=ct)&&(L.push(et+1),L.push(j),L.push(1-R))}return N}within(e,A,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:w,nodeSize:B}=this,S=[0,m.length-1,0],L=[],N=d*d;for(;S.length;){const R=S.pop()||0,j=S.pop()||0,W=S.pop()||0;if(j-W<=B){for(let xt=W;xt<=j;xt++)HC(w[2*xt],w[2*xt+1],e,A)<=N&&L.push(m[xt]);continue}const et=W+j>>1,at=w[2*et],ct=w[2*et+1];HC(at,ct,e,A)<=N&&L.push(m[et]),(R===0?e-d<=at:A-d<=ct)&&(S.push(W),S.push(et-1),S.push(1-R)),(R===0?e+d>=at:A+d>=ct)&&(S.push(et+1),S.push(j),S.push(1-R))}return L}}function Ny(a,e,A,d,m,w){if(m-d<=A)return;const B=d+m>>1;zC(a,e,B,d,m,w),Ny(a,e,A,d,B-1,1-w),Ny(a,e,A,B+1,m,1-w)}function zC(a,e,A,d,m,w){for(;m>d;){if(m-d>600){const N=m-d+1,R=A-d+1,j=Math.log(N),W=.5*Math.exp(2*j/3),et=.5*Math.sqrt(j*W*(N-W)/N)*(R-N/2<0?-1:1);zC(a,e,A,Math.max(d,Math.floor(A-R*W/N+et)),Math.min(m,Math.floor(A+(N-R)*W/N+et)),w)}const B=e[2*A+w];let S=d,L=m;for(Id(a,e,d,A),e[2*m+w]>B&&Id(a,e,d,m);S<L;){for(Id(a,e,S,L),S++,L--;e[2*S+w]<B;)S++;for(;e[2*L+w]>B;)L--}e[2*d+w]===B?Id(a,e,d,L):(L++,Id(a,e,L,m)),L<=A&&(d=L+1),A<=L&&(m=L-1)}}function Id(a,e,A,d){Oy(a,A,d),Oy(e,2*A,2*d),Oy(e,2*A+1,2*d+1)}function Oy(a,e,A){const d=a[e];a[e]=a[A],a[A]=d}function HC(a,e,A,d){const m=a-A,w=e-d;return m*m+w*w}var Ry;p.be=void 0,(Ry=p.be||(p.be={})).create="create",Ry.load="load",Ry.fullLoad="fullLoad";let cg=null,Ed=[];const zy=1e3/60,Hy="loadTime",Vy="fullLoadTime",Nz={mark(a){performance.mark(a)},frame(a){const e=a;cg!=null&&Ed.push(e-cg),cg=e},clearMetrics(){cg=null,Ed=[],performance.clearMeasures(Hy),performance.clearMeasures(Vy);for(const a in p.be)performance.clearMarks(p.be[a])},getPerformanceMetrics(){performance.measure(Hy,p.be.create,p.be.load),performance.measure(Vy,p.be.create,p.be.fullLoad);const a=performance.getEntriesByName(Hy)[0].duration,e=performance.getEntriesByName(Vy)[0].duration,A=Ed.length,d=1/(Ed.reduce((w,B)=>w+B,0)/A/1e3),m=Ed.filter(w=>w>zy).reduce((w,B)=>w+(B-zy)/zy,0);return{loadTime:a,fullLoadTime:e,fps:d,percentDroppedFrames:m/(A+m)*100,totalFrames:A}}};p.$=Ni,p.A=th,p.B=function(a){if(Gt==null){const e=a.navigator?a.navigator.userAgent:null;Gt=!!a.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return Gt},p.C=class{constructor(a,e){this.target=a,this.mapId=e,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Iz(()=>this.process()),this.subscription=function(A,d,m,w){return A.addEventListener(d,m,!1),{unsubscribe:()=>{A.removeEventListener(d,m,!1)}}}(this.target,"message",A=>this.receive(A)),this.globalScope=Xt(self)?a:window}registerMessageHandler(a,e){this.messageHandlers[a]=e}sendAsync(a,e){return new Promise((A,d)=>{const m=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[m]={resolve:A,reject:d},e&&e.signal.addEventListener("abort",()=>{delete this.resolveRejects[m];const S={id:m,type:"<cancel>",origin:location.origin,targetMapId:a.targetMapId,sourceMapId:this.mapId};this.target.postMessage(S)},{once:!0});const w=[],B=Object.assign(Object.assign({},a),{id:m,sourceMapId:this.mapId,origin:location.origin,data:Mn(a.data,w)});this.target.postMessage(B,{transfer:w})})}receive(a){const e=a.data,A=e.id;if(!(e.origin!=="file://"&&location.origin!=="file://"&&e.origin!==location.origin||e.targetMapId&&this.mapId!==e.targetMapId)){if(e.type==="<cancel>"){delete this.tasks[A];const d=this.abortControllers[A];return delete this.abortControllers[A],void(d&&d.abort())}if(Xt(self)||e.mustQueue)return this.tasks[A]=e,this.taskQueue.push(A),void this.invoker.trigger();this.processTask(A,e)}}process(){if(this.taskQueue.length===0)return;const a=this.taskQueue.shift(),e=this.tasks[a];delete this.tasks[a],this.taskQueue.length>0&&this.invoker.trigger(),e&&this.processTask(a,e)}processTask(a,e){return o(this,void 0,void 0,function*(){if(e.type==="<response>"){const m=this.resolveRejects[a];return delete this.resolveRejects[a],m?void(e.error?m.reject(cn(e.error)):m.resolve(cn(e.data))):void 0}if(!this.messageHandlers[e.type])return void this.completeTask(a,new Error(`Could not find a registered handler for ${e.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const A=cn(e.data),d=new AbortController;this.abortControllers[a]=d;try{const m=yield this.messageHandlers[e.type](e.sourceMapId,A,d);this.completeTask(a,null,m)}catch(m){this.completeTask(a,m)}})}completeTask(a,e,A){const d=[];delete this.abortControllers[a];const m={id:a,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:e?Mn(e):null,data:Mn(A,d)};this.target.postMessage(m,{transfer:d})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},p.D=Ye,p.E=le,p.F=function(){var a=new th(16);return th!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},p.G=Nt,p.H=function(a,e,A){var d,m,w,B,S,L,N,R,j,W,et,at,ct=A[0],xt=A[1],It=A[2];return e===a?(a[12]=e[0]*ct+e[4]*xt+e[8]*It+e[12],a[13]=e[1]*ct+e[5]*xt+e[9]*It+e[13],a[14]=e[2]*ct+e[6]*xt+e[10]*It+e[14],a[15]=e[3]*ct+e[7]*xt+e[11]*It+e[15]):(m=e[1],w=e[2],B=e[3],S=e[4],L=e[5],N=e[6],R=e[7],j=e[8],W=e[9],et=e[10],at=e[11],a[0]=d=e[0],a[1]=m,a[2]=w,a[3]=B,a[4]=S,a[5]=L,a[6]=N,a[7]=R,a[8]=j,a[9]=W,a[10]=et,a[11]=at,a[12]=d*ct+S*xt+j*It+e[12],a[13]=m*ct+L*xt+W*It+e[13],a[14]=w*ct+N*xt+et*It+e[14],a[15]=B*ct+R*xt+at*It+e[15]),a},p.I=By,p.J=function(a,e,A){var d=A[0],m=A[1],w=A[2];return a[0]=e[0]*d,a[1]=e[1]*d,a[2]=e[2]*d,a[3]=e[3]*d,a[4]=e[4]*m,a[5]=e[5]*m,a[6]=e[6]*m,a[7]=e[7]*m,a[8]=e[8]*w,a[9]=e[9]*w,a[10]=e[10]*w,a[11]=e[11]*w,a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15],a},p.K=b5,p.L=function(a,e){const A={};for(let d=0;d<e.length;d++){const m=e[d];m in a&&(A[m]=a[m])}return A},p.M=lc,p.N=mC,p.O=yC,p.P=U,p.Q=Ha,p.R=za,p.S=$,p.T=wo,p.U=it,p.V=te,p.W=Oi,p.X=_,p.Y=sg,p.Z=class extends D{},p._=o,p.a=Bt,p.a$=function(a,e){return a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a[4]=e[4],a[5]=e[5],a[6]=e[6],a[7]=e[7],a[8]=e[8],a[9]=e[9],a[10]=e[10],a[11]=e[11],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15],a},p.a0=Qy,p.a1=pe,p.a2=a=>{const e=window.document.createElement("video");return e.muted=!0,new Promise(A=>{e.onloadstart=()=>{A(e)};for(const d of a){const m=window.document.createElement("source");Ce(d)||(e.crossOrigin="Anonymous"),m.src=d,e.appendChild(m)}})},p.a3=function(){return yt++},p.a4=He,p.a5=ah,p.a6=ai,p.a7=vl,p.a8=ti,p.a9=BC,p.aA=function(a){if(a.type==="custom")return new Sz(a);switch(a.type){case"background":return new Bz(a);case"circle":return new u7(a);case"fill":return new I7(a);case"fill-extrusion":return new V7(a);case"heatmap":return new d7(a);case"hillshade":return new f7(a);case"line":return new Z7(a);case"raster":return new Fz(a);case"symbol":return new ng(a)}},p.aB=At,p.aC=function(a,e){if(!a)return[{command:"setStyle",args:[e]}];let A=[];try{if(!ce(a.version,e.version))return[{command:"setStyle",args:[e]}];ce(a.center,e.center)||A.push({command:"setCenter",args:[e.center]}),ce(a.zoom,e.zoom)||A.push({command:"setZoom",args:[e.zoom]}),ce(a.bearing,e.bearing)||A.push({command:"setBearing",args:[e.bearing]}),ce(a.pitch,e.pitch)||A.push({command:"setPitch",args:[e.pitch]}),ce(a.sprite,e.sprite)||A.push({command:"setSprite",args:[e.sprite]}),ce(a.glyphs,e.glyphs)||A.push({command:"setGlyphs",args:[e.glyphs]}),ce(a.transition,e.transition)||A.push({command:"setTransition",args:[e.transition]}),ce(a.light,e.light)||A.push({command:"setLight",args:[e.light]}),ce(a.terrain,e.terrain)||A.push({command:"setTerrain",args:[e.terrain]}),ce(a.sky,e.sky)||A.push({command:"setSky",args:[e.sky]}),ce(a.projection,e.projection)||A.push({command:"setProjection",args:[e.projection]});const d={},m=[];(function(B,S,L,N){let R;for(R in S=S||{},B=B||{})Object.prototype.hasOwnProperty.call(B,R)&&(Object.prototype.hasOwnProperty.call(S,R)||Ie(R,L,N));for(R in S)Object.prototype.hasOwnProperty.call(S,R)&&(Object.prototype.hasOwnProperty.call(B,R)?ce(B[R],S[R])||(B[R].type==="geojson"&&S[R].type==="geojson"&&Ze(B,S,R)?ge(L,{command:"setGeoJSONSourceData",args:[R,S[R].data]}):Ge(R,S,L,N)):Se(R,S,L))})(a.sources,e.sources,m,d);const w=[];a.layers&&a.layers.forEach(B=>{"source"in B&&d[B.source]?A.push({command:"removeLayer",args:[B.id]}):w.push(B)}),A=A.concat(m),function(B,S,L){S=S||[];const N=(B=B||[]).map(wr),R=S.map(wr),j=B.reduce(Sr,{}),W=S.reduce(Sr,{}),et=N.slice(),at=Object.create(null);let ct,xt,It,$t,Qt;for(let Vt=0,Ae=0;Vt<N.length;Vt++)ct=N[Vt],Object.prototype.hasOwnProperty.call(W,ct)?Ae++:(ge(L,{command:"removeLayer",args:[ct]}),et.splice(et.indexOf(ct,Ae),1));for(let Vt=0,Ae=0;Vt<R.length;Vt++)ct=R[R.length-1-Vt],et[et.length-1-Vt]!==ct&&(Object.prototype.hasOwnProperty.call(j,ct)?(ge(L,{command:"removeLayer",args:[ct]}),et.splice(et.lastIndexOf(ct,et.length-Ae),1)):Ae++,$t=et[et.length-Vt],ge(L,{command:"addLayer",args:[W[ct],$t]}),et.splice(et.length-Vt,0,ct),at[ct]=!0);for(let Vt=0;Vt<R.length;Vt++)if(ct=R[Vt],xt=j[ct],It=W[ct],!at[ct]&&!ce(xt,It))if(ce(xt.source,It.source)&&ce(xt["source-layer"],It["source-layer"])&&ce(xt.type,It.type)){for(Qt in pr(xt.layout,It.layout,L,ct,null,"setLayoutProperty"),pr(xt.paint,It.paint,L,ct,null,"setPaintProperty"),ce(xt.filter,It.filter)||ge(L,{command:"setFilter",args:[ct,It.filter]}),ce(xt.minzoom,It.minzoom)&&ce(xt.maxzoom,It.maxzoom)||ge(L,{command:"setLayerZoomRange",args:[ct,It.minzoom,It.maxzoom]}),xt)Object.prototype.hasOwnProperty.call(xt,Qt)&&Qt!=="layout"&&Qt!=="paint"&&Qt!=="filter"&&Qt!=="metadata"&&Qt!=="minzoom"&&Qt!=="maxzoom"&&(Qt.indexOf("paint.")===0?pr(xt[Qt],It[Qt],L,ct,Qt.slice(6),"setPaintProperty"):ce(xt[Qt],It[Qt])||ge(L,{command:"setLayerProperty",args:[ct,Qt,It[Qt]]}));for(Qt in It)Object.prototype.hasOwnProperty.call(It,Qt)&&!Object.prototype.hasOwnProperty.call(xt,Qt)&&Qt!=="layout"&&Qt!=="paint"&&Qt!=="filter"&&Qt!=="metadata"&&Qt!=="minzoom"&&Qt!=="maxzoom"&&(Qt.indexOf("paint.")===0?pr(xt[Qt],It[Qt],L,ct,Qt.slice(6),"setPaintProperty"):ce(xt[Qt],It[Qt])||ge(L,{command:"setLayerProperty",args:[ct,Qt,It[Qt]]}))}else ge(L,{command:"removeLayer",args:[ct]}),$t=et[et.lastIndexOf(ct)+1],ge(L,{command:"addLayer",args:[It,$t]})}(w,e.layers,A)}catch(d){console.warn("Unable to compute style diff:",d),A=[{command:"setStyle",args:[e]}]}return A},p.aD=function(a){const e=[],A=a.id;return A===void 0&&e.push({message:`layers.${A}: missing required property "id"`}),a.render===void 0&&e.push({message:`layers.${A}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&e.push({message:`layers.${A}: property "renderingMode" must be either "2d" or "3d"`}),e},p.aE=function a(e,A){if(Array.isArray(e)){if(!Array.isArray(A)||e.length!==A.length)return!1;for(let d=0;d<e.length;d++)if(!a(e[d],A[d]))return!1;return!0}if(typeof e=="object"&&e!==null&&A!==null){if(typeof A!="object"||Object.keys(e).length!==Object.keys(A).length)return!1;for(const d in e)if(!a(e[d],A[d]))return!1;return!0}return e===A},p.aF=Rt,p.aG=Wt,p.aH=class extends Is{constructor(a,e){super(a,e),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},p.aI=Zu,p.aJ=class extends Is{constructor(a,e){super(a,e),this.current=Hf}set(a){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let e=1;e<16;e++)if(a[e]!==this.current[e]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}},p.aK=Rf,p.aL=class extends Is{constructor(a,e){super(a,e),this.current=[0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2]))}},p.aM=class extends Is{constructor(a,e){super(a,e),this.current=[0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1]))}},p.aN=zf,p.aO=function(a,e,A,d,m,w,B){var S=1/(e-A),L=1/(d-m),N=1/(w-B);return a[0]=-2*S,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*L,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*N,a[11]=0,a[12]=(e+A)*S,a[13]=(m+d)*L,a[14]=(B+w)*N,a[15]=1,a},p.aP=vr,p.aQ=c7,p.aR=class extends ut{},p.aS=ez,p.aT=class extends zt{},p.aU=function(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},p.aV=S5,p.aW=Ei,p.aX=class extends ye{},p.aY=rn,p.aZ=function(a,e){return a[0]===e[0]&&a[1]===e[1]&&a[2]===e[2]&&a[3]===e[3]&&a[4]===e[4]&&a[5]===e[5]&&a[6]===e[6]&&a[7]===e[7]&&a[8]===e[8]&&a[9]===e[9]&&a[10]===e[10]&&a[11]===e[11]&&a[12]===e[12]&&a[13]===e[13]&&a[14]===e[14]&&a[15]===e[15]},p.a_=function(a,e){var A=a[0],d=a[1],m=a[2],w=a[3],B=a[4],S=a[5],L=a[6],N=a[7],R=a[8],j=a[9],W=a[10],et=a[11],at=a[12],ct=a[13],xt=a[14],It=a[15],$t=e[0],Qt=e[1],Vt=e[2],Ae=e[3],ve=e[4],De=e[5],lr=e[6],ze=e[7],Pe=e[8],ir=e[9],qe=e[10],je=e[11],fe=e[12],nr=e[13],Je=e[14],Cr=e[15];return Math.abs(A-$t)<=Es*Math.max(1,Math.abs(A),Math.abs($t))&&Math.abs(d-Qt)<=Es*Math.max(1,Math.abs(d),Math.abs(Qt))&&Math.abs(m-Vt)<=Es*Math.max(1,Math.abs(m),Math.abs(Vt))&&Math.abs(w-Ae)<=Es*Math.max(1,Math.abs(w),Math.abs(Ae))&&Math.abs(B-ve)<=Es*Math.max(1,Math.abs(B),Math.abs(ve))&&Math.abs(S-De)<=Es*Math.max(1,Math.abs(S),Math.abs(De))&&Math.abs(L-lr)<=Es*Math.max(1,Math.abs(L),Math.abs(lr))&&Math.abs(N-ze)<=Es*Math.max(1,Math.abs(N),Math.abs(ze))&&Math.abs(R-Pe)<=Es*Math.max(1,Math.abs(R),Math.abs(Pe))&&Math.abs(j-ir)<=Es*Math.max(1,Math.abs(j),Math.abs(ir))&&Math.abs(W-qe)<=Es*Math.max(1,Math.abs(W),Math.abs(qe))&&Math.abs(et-je)<=Es*Math.max(1,Math.abs(et),Math.abs(je))&&Math.abs(at-fe)<=Es*Math.max(1,Math.abs(at),Math.abs(fe))&&Math.abs(ct-nr)<=Es*Math.max(1,Math.abs(ct),Math.abs(nr))&&Math.abs(xt-Je)<=Es*Math.max(1,Math.abs(xt),Math.abs(Je))&&Math.abs(It-Cr)<=Es*Math.max(1,Math.abs(It),Math.abs(Cr))},p.aa=function(a){const e={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(A,d,m,w)=>{const B=m||w;return e[d]=!B||B.toLowerCase(),""}),e["max-age"]){const A=parseInt(e["max-age"],10);isNaN(A)?delete e["max-age"]:e["max-age"]=A}return e},p.ab=function(a,e){const A=[];for(const d in a)d in e||A.push(d);return A},p.ac=Tt,p.ad=function(a,e,A){var d=Math.sin(A),m=Math.cos(A),w=e[0],B=e[1],S=e[2],L=e[3],N=e[4],R=e[5],j=e[6],W=e[7];return e!==a&&(a[8]=e[8],a[9]=e[9],a[10]=e[10],a[11]=e[11],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]),a[0]=w*m+N*d,a[1]=B*m+R*d,a[2]=S*m+j*d,a[3]=L*m+W*d,a[4]=N*m-w*d,a[5]=R*m-B*d,a[6]=j*m-S*d,a[7]=W*m-L*d,a},p.ae=function(a){var e=new th(16);return e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],e[4]=a[4],e[5]=a[5],e[6]=a[6],e[7]=a[7],e[8]=a[8],e[9]=a[9],e[10]=a[10],e[11]=a[11],e[12]=a[12],e[13]=a[13],e[14]=a[14],e[15]=a[15],e},p.af=Gf,p.ag=function(a,e){let A=0,d=0;if(a.kind==="constant")d=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:m,minZoom:w,maxZoom:B}=a,S=m?Tt(fr.interpolationFactor(m,e,w,B),0,1):0;a.kind==="camera"?d=on.number(a.minSize,a.maxSize,S):A=S}return{uSizeT:A,uSize:d}},p.ai=function(a,{uSize:e,uSizeT:A},{lowerSize:d,upperSize:m}){return a.kind==="source"?d/RA:a.kind==="composite"?on.number(d/RA,m/RA,A):e},p.aj=Iy,p.ak=function(a,e,A,d){const m=e.y-a.y,w=e.x-a.x,B=d.y-A.y,S=d.x-A.x,L=B*w-S*m;if(L===0)return null;const N=(S*(a.y-A.y)-B*(a.x-A.x))/L;return new U(a.x+N*w,a.y+N*m)},p.al=IC,p.am=Vf,p.an=Ay,p.ao=function(a){let e=1/0,A=1/0,d=-1/0,m=-1/0;for(const w of a)e=Math.min(e,w.x),A=Math.min(A,w.y),d=Math.max(d,w.x),m=Math.max(m,w.y);return[e,A,d,m]},p.ap=Bn,p.ar=Sy,p.as=function(a,e){var A=e[0],d=e[1],m=e[2],w=e[3],B=e[4],S=e[5],L=e[6],N=e[7],R=e[8],j=e[9],W=e[10],et=e[11],at=e[12],ct=e[13],xt=e[14],It=e[15],$t=A*S-d*B,Qt=A*L-m*B,Vt=A*N-w*B,Ae=d*L-m*S,ve=d*N-w*S,De=m*N-w*L,lr=R*ct-j*at,ze=R*xt-W*at,Pe=R*It-et*at,ir=j*xt-W*ct,qe=j*It-et*ct,je=W*It-et*xt,fe=$t*je-Qt*qe+Vt*ir+Ae*Pe-ve*ze+De*lr;return fe?(a[0]=(S*je-L*qe+N*ir)*(fe=1/fe),a[1]=(m*qe-d*je-w*ir)*fe,a[2]=(ct*De-xt*ve+It*Ae)*fe,a[3]=(W*ve-j*De-et*Ae)*fe,a[4]=(L*Pe-B*je-N*ze)*fe,a[5]=(A*je-m*Pe+w*ze)*fe,a[6]=(xt*Vt-at*De-It*Qt)*fe,a[7]=(R*De-W*Vt+et*Qt)*fe,a[8]=(B*qe-S*Pe+N*lr)*fe,a[9]=(d*Pe-A*qe-w*lr)*fe,a[10]=(at*ve-ct*Vt+It*$t)*fe,a[11]=(j*Vt-R*ve-et*$t)*fe,a[12]=(S*ze-B*ir-L*lr)*fe,a[13]=(A*ir-d*ze+m*lr)*fe,a[14]=(ct*Qt-at*Ae-xt*$t)*fe,a[15]=(R*Ae-j*Qt+W*$t)*fe,a):null},p.at=ky,p.au=Fy,p.av=Dy,p.aw=function(){const a={},e=nt.$version;for(const A in nt.$root){const d=nt.$root[A];if(d.required){let m=null;m=A==="version"?e:d.type==="array"?[]:{},m!=null&&(a[A]=m)}}return a},p.ax=Wu,p.ay=ie,p.az=function(a){a=a.slice();const e=Object.create(null);for(let A=0;A<a.length;A++)e[a[A].id]=a[A];for(let A=0;A<a.length;A++)"ref"in a[A]&&(a[A]=$e(a[A],e[a[A].ref]));return a},p.b=Yt,p.b0=function(a,e,A){return a[0]=e[0]*A[0],a[1]=e[1]*A[1],a[2]=e[2]*A[2],a[3]=e[3]*A[3],a},p.b1=function(a,e){return a[0]*e[0]+a[1]*e[1]+a[2]*e[2]+a[3]*e[3]},p.b2=Lt,p.b3=_C,p.b4=vC,p.b5=function(a,e,A,d,m){var w,B=1/Math.tan(e/2);return a[0]=B/A,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=B,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,m!=null&&m!==1/0?(a[10]=(m+d)*(w=1/(d-m)),a[14]=2*m*d*w):(a[10]=-1,a[14]=-2*d),a},p.b6=function(a,e,A){var d=Math.sin(A),m=Math.cos(A),w=e[4],B=e[5],S=e[6],L=e[7],N=e[8],R=e[9],j=e[10],W=e[11];return e!==a&&(a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]),a[4]=w*m+N*d,a[5]=B*m+R*d,a[6]=S*m+j*d,a[7]=L*m+W*d,a[8]=N*m-w*d,a[9]=R*m-B*d,a[10]=j*m-S*d,a[11]=W*m-L*d,a},p.b7=ht,p.b8=St,p.b9=function(a){return a*Math.PI/180},p.bA=Bs,p.bB=vo,p.ba=function(a,e){return a[0]=e[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=e[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=e[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},p.bb=class extends k{},p.bc=Py,p.bd=Nz,p.bf=Ht,p.bg=function(a,e){Bt.REGISTERED_PROTOCOLS[a]=e},p.bh=function(a){delete Bt.REGISTERED_PROTOCOLS[a]},p.bi=function(a,e){const A={};for(let m=0;m<a.length;m++){const w=e&&e[a[m].id]||$u(a[m]);e&&(e[a[m].id]=w);let B=A[w];B||(B=A[w]=[]),B.push(a[m])}const d=[];for(const m in A)d.push(A[m]);return d},p.bj=Ve,p.bk=xC,p.bl=CC,p.bm=rC,p.bn=function(a){a.bucket.createArrays(),a.bucket.tilePixelRatio=Oi/(512*a.bucket.overscaling),a.bucket.compareText={},a.bucket.iconsNeedLinear=!1;const e=a.bucket.layers[0],A=e.layout,d=e._unevaluatedLayout._values,m={layoutIconSize:d["icon-size"].possiblyEvaluate(new ti(a.bucket.zoom+1),a.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new ti(a.bucket.zoom+1),a.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new ti(18))};if(a.bucket.textSizeData.kind==="composite"){const{minZoom:N,maxZoom:R}=a.bucket.textSizeData;m.compositeTextSizes=[d["text-size"].possiblyEvaluate(new ti(N),a.canonical),d["text-size"].possiblyEvaluate(new ti(R),a.canonical)]}if(a.bucket.iconSizeData.kind==="composite"){const{minZoom:N,maxZoom:R}=a.bucket.iconSizeData;m.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new ti(N),a.canonical),d["icon-size"].possiblyEvaluate(new ti(R),a.canonical)]}const w=A.get("text-line-height")*Bn,B=A.get("text-rotation-alignment")!=="viewport"&&A.get("symbol-placement")!=="point",S=A.get("text-keep-upright"),L=A.get("text-size");for(const N of a.bucket.features){const R=A.get("text-font").evaluate(N,{},a.canonical).join(","),j=L.evaluate(N,{},a.canonical),W=m.layoutTextSize.evaluate(N,{},a.canonical),et=m.layoutIconSize.evaluate(N,{},a.canonical),at={horizontal:{},vertical:void 0},ct=N.text;let xt,It=[0,0];if(ct){const Vt=ct.toString(),Ae=A.get("text-letter-spacing").evaluate(N,{},a.canonical)*Bn,ve=Fs(Vt)?Ae:0,De=A.get("text-anchor").evaluate(N,{},a.canonical),lr=DC(e,N,a.canonical);if(!lr){const qe=A.get("text-radial-offset").evaluate(N,{},a.canonical);It=qe?kC(De,[qe*Bn,My]):A.get("text-offset").evaluate(N,{},a.canonical).map(je=>je*Bn)}let ze=B?"center":A.get("text-justify").evaluate(N,{},a.canonical);const Pe=A.get("symbol-placement")==="point"?A.get("text-max-width").evaluate(N,{},a.canonical)*Bn:1/0,ir=()=>{a.bucket.allowVerticalPlacement&&pa(Vt)&&(at.vertical=eg(ct,a.glyphMap,a.glyphPositions,a.imagePositions,R,Pe,w,De,"left",ve,It,p.ah.vertical,!0,W,j))};if(!B&&lr){const qe=new Set;if(ze==="auto")for(let fe=0;fe<lr.values.length;fe+=2)qe.add(ky(lr.values[fe]));else qe.add(ze);let je=!1;for(const fe of qe)if(!at.horizontal[fe])if(je)at.horizontal[fe]=at.horizontal[0];else{const nr=eg(ct,a.glyphMap,a.glyphPositions,a.imagePositions,R,Pe,w,"center",fe,ve,It,p.ah.horizontal,!1,W,j);nr&&(at.horizontal[fe]=nr,je=nr.positionedLines.length===1)}ir()}else{ze==="auto"&&(ze=ky(De));const qe=eg(ct,a.glyphMap,a.glyphPositions,a.imagePositions,R,Pe,w,De,ze,ve,It,p.ah.horizontal,!1,W,j);qe&&(at.horizontal[ze]=qe),ir(),pa(Vt)&&B&&S&&(at.vertical=eg(ct,a.glyphMap,a.glyphPositions,a.imagePositions,R,Pe,w,De,ze,ve,It,p.ah.vertical,!1,W,j))}}let $t=!1;if(N.icon&&N.icon.name){const Vt=a.imageMap[N.icon.name];Vt&&(xt=vz(a.imagePositions[N.icon.name],A.get("icon-offset").evaluate(N,{},a.canonical),A.get("icon-anchor").evaluate(N,{},a.canonical)),$t=!!Vt.sdf,a.bucket.sdfIcons===void 0?a.bucket.sdfIcons=$t:a.bucket.sdfIcons!==$t&&bt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Vt.pixelRatio!==a.bucket.pixelRatio||A.get("icon-rotate").constantOr(1)!==0)&&(a.bucket.iconsNeedLinear=!0))}const Qt=OC(at.horizontal)||at.vertical;a.bucket.iconsInText=!!Qt&&Qt.iconsInText,(Qt||xt)&&kz(a.bucket,N,at,xt,a.imageMap,m,W,et,It,$t,a.canonical)}a.showCollisionBoxes&&a.bucket.generateCollisionDebugBuffers()},p.bo=wy,p.bp=my,p.bq=vy,p.br=ac,p.bs=by,p.bt=class{constructor(a){this._marks={start:[a.url,"start"].join("#"),end:[a.url,"end"].join("#"),measure:a.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let a=performance.getEntriesByName(this._marks.measure);return a.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),a=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),a}},p.bu=function(a,e,A,d,m){return o(this,void 0,void 0,function*(){if(it())try{return yield te(a,e,A,d,m)}catch{}return function(w,B,S,L,N){const R=w.width,j=w.height;Jt&&me||(Jt=new OffscreenCanvas(R,j),me=Jt.getContext("2d",{willReadFrequently:!0})),Jt.width=R,Jt.height=j,me.drawImage(w,0,0,R,j);const W=me.getImageData(B,S,L,N);return me.clearRect(0,0,R,j),W.data}(a,e,A,d,m)})},p.bv=bC,p.bw=v,p.bx=C,p.by=q5,p.bz=function(a){return a.message===rt},p.c=dt,p.d=a=>o(void 0,void 0,void 0,function*(){if(a.byteLength===0)return createImageBitmap(new ImageData(1,1));const e=new Blob([new Uint8Array(a)],{type:"image/png"});try{return createImageBitmap(e)}catch(A){throw new Error(`Could not load image because of ${A.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),p.e=Ft,p.f=a=>new Promise((e,A)=>{const d=new Image;d.onload=()=>{e(d),URL.revokeObjectURL(d.src),d.onload=null,window.requestAnimationFrame(()=>{d.src=qt})},d.onerror=()=>A(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const m=new Blob([new Uint8Array(a)],{type:"image/png"});d.src=a.byteLength?URL.createObjectURL(m):qt}),p.g=Et,p.h=(a,e)=>se(Ft(a,{type:"json"}),e),p.i=Xt,p.j=Qe,p.k=Le,p.l=(a,e)=>se(Ft(a,{type:"arrayBuffer"}),e),p.m=se,p.n=function(a){return new by(a).readFields(hz,[])},p.o=md,p.p=eC,p.q=g,p.r=ld,p.s=Ce,p.t=Kc,p.u=Ne,p.v=nt,p.w=bt,p.x=Qa,p.y=function([a,e,A]){return e+=90,e*=Math.PI/180,A*=Math.PI/180,{x:a*Math.cos(e)*Math.sin(A),y:a*Math.sin(e)*Math.sin(A),z:a*Math.cos(A)}},p.z=on}),l("worker",["./shared"],function(p){class o{constructor(G){this.keyCache={},G&&this.replace(G)}replace(G){this._layerConfigs={},this._layers={},this.update(G,[])}update(G,q){for(const _t of G){this._layerConfigs[_t.id]=_t;const Pt=this._layers[_t.id]=p.aA(_t);Pt._featureFilter=p.a6(Pt.filter),this.keyCache[_t.id]&&delete this.keyCache[_t.id]}for(const _t of q)delete this.keyCache[_t],delete this._layerConfigs[_t],delete this._layers[_t];this.familiesBySource={};const tt=p.bi(Object.values(this._layerConfigs),this.keyCache);for(const _t of tt){const Pt=_t.map(ae=>this._layers[ae.id]),kt=Pt[0];if(kt.visibility==="none")continue;const Ot=kt.source||"";let vt=this.familiesBySource[Ot];vt||(vt=this.familiesBySource[Ot]={});const jt=kt.sourceLayer||"_geojsonTileLayer";let de=vt[jt];de||(de=vt[jt]=[]),de.push(Pt)}}}class v{constructor(G){const q={},tt=[];for(const Ot in G){const vt=G[Ot],jt=q[Ot]={};for(const de in vt){const ae=vt[+de];if(!ae||ae.bitmap.width===0||ae.bitmap.height===0)continue;const ne={x:0,y:0,w:ae.bitmap.width+2,h:ae.bitmap.height+2};tt.push(ne),jt[de]={rect:ne,metrics:ae.metrics}}}const{w:_t,h:Pt}=p.p(tt),kt=new p.o({width:_t||1,height:Pt||1});for(const Ot in G){const vt=G[Ot];for(const jt in vt){const de=vt[+jt];if(!de||de.bitmap.width===0||de.bitmap.height===0)continue;const ae=q[Ot][jt].rect;p.o.copy(de.bitmap,kt,{x:0,y:0},{x:ae.x+1,y:ae.y+1},de.bitmap)}}this.image=kt,this.positions=q}}p.bj("GlyphAtlas",v);class C{constructor(G){this.tileID=new p.Q(G.tileID.overscaledZ,G.tileID.wrap,G.tileID.canonical.z,G.tileID.canonical.x,G.tileID.canonical.y),this.uid=G.uid,this.zoom=G.zoom,this.pixelRatio=G.pixelRatio,this.tileSize=G.tileSize,this.source=G.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=G.showCollisionBoxes,this.collectResourceTiming=!!G.collectResourceTiming,this.returnDependencies=!!G.returnDependencies,this.promoteId=G.promoteId,this.inFlightDependencies=[]}parse(G,q,tt,_t){return p._(this,void 0,void 0,function*(){this.status="parsing",this.data=G,this.collisionBoxArray=new p.a4;const Pt=new p.bk(Object.keys(G.layers).sort()),kt=new p.bl(this.tileID,this.promoteId);kt.bucketLayerIDs=[];const Ot={},vt={featureIndex:kt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:tt},jt=q.familiesBySource[this.source];for(const cr in jt){const jr=G.layers[cr];if(!jr)continue;jr.version===1&&p.w(`Vector tile source "${this.source}" layer "${cr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ni=Pt.encode(cr),zi=[];for(let Ut=0;Ut<jr.length;Ut++){const Fe=jr.feature(Ut),xe=kt.getId(Fe,cr);zi.push({feature:Fe,id:xe,index:Ut,sourceLayerIndex:ni})}for(const Ut of jt[cr]){const Fe=Ut[0];Fe.source!==this.source&&p.w(`layer.source = ${Fe.source} does not equal this.source = ${this.source}`),Fe.minzoom&&this.zoom<Math.floor(Fe.minzoom)||Fe.maxzoom&&this.zoom>=Fe.maxzoom||Fe.visibility!=="none"&&(I(Ut,this.zoom,tt),(Ot[Fe.id]=Fe.createBucket({index:kt.bucketLayerIDs.length,layers:Ut,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ni,sourceID:this.source})).populate(zi,vt,this.tileID.canonical),kt.bucketLayerIDs.push(Ut.map(xe=>xe.id)))}}const de=p.aF(vt.glyphDependencies,cr=>Object.keys(cr).map(Number));this.inFlightDependencies.forEach(cr=>cr==null?void 0:cr.abort()),this.inFlightDependencies=[];let ae=Promise.resolve({});if(Object.keys(de).length){const cr=new AbortController;this.inFlightDependencies.push(cr),ae=_t.sendAsync({type:"GG",data:{stacks:de,source:this.source,tileID:this.tileID,type:"glyphs"}},cr)}const ne=Object.keys(vt.iconDependencies);let Ee=Promise.resolve({});if(ne.length){const cr=new AbortController;this.inFlightDependencies.push(cr),Ee=_t.sendAsync({type:"GI",data:{icons:ne,source:this.source,tileID:this.tileID,type:"icons"}},cr)}const Re=Object.keys(vt.patternDependencies);let Fr=Promise.resolve({});if(Re.length){const cr=new AbortController;this.inFlightDependencies.push(cr),Fr=_t.sendAsync({type:"GI",data:{icons:Re,source:this.source,tileID:this.tileID,type:"patterns"}},cr)}const[ar,Br,Ur]=yield Promise.all([ae,Ee,Fr]),Ir=new v(ar),Zr=new p.bm(Br,Ur);for(const cr in Ot){const jr=Ot[cr];jr instanceof p.a5?(I(jr.layers,this.zoom,tt),p.bn({bucket:jr,glyphMap:ar,glyphPositions:Ir.positions,imageMap:Br,imagePositions:Zr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):jr.hasPattern&&(jr instanceof p.bo||jr instanceof p.bp||jr instanceof p.bq)&&(I(jr.layers,this.zoom,tt),jr.addFeatures(vt,this.tileID.canonical,Zr.patternPositions))}return this.status="done",{buckets:Object.values(Ot).filter(cr=>!cr.isEmpty()),featureIndex:kt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ir.image,imageAtlas:Zr,glyphMap:this.returnDependencies?ar:null,iconMap:this.returnDependencies?Br:null,glyphPositions:this.returnDependencies?Ir.positions:null}})}}function I(pt,G,q){const tt=new p.a8(G);for(const _t of pt)_t.recalculate(tt,q)}class U{constructor(G,q,tt){this.actor=G,this.layerIndex=q,this.availableImages=tt,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(G,q){return p._(this,void 0,void 0,function*(){const tt=yield p.l(G.request,q);try{return{vectorTile:new p.br.VectorTile(new p.bs(tt.data)),rawData:tt.data,cacheControl:tt.cacheControl,expires:tt.expires}}catch(_t){const Pt=new Uint8Array(tt.data);let kt=`Unable to parse the tile at ${G.request.url}, `;throw kt+=Pt[0]===31&&Pt[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${_t.message}`,new Error(kt)}})}loadTile(G){return p._(this,void 0,void 0,function*(){const q=G.uid,tt=!!(G&&G.request&&G.request.collectResourceTiming)&&new p.bt(G.request),_t=new C(G);this.loading[q]=_t;const Pt=new AbortController;_t.abort=Pt;try{const kt=yield this.loadVectorTile(G,Pt);if(delete this.loading[q],!kt)return null;const Ot=kt.rawData,vt={};kt.expires&&(vt.expires=kt.expires),kt.cacheControl&&(vt.cacheControl=kt.cacheControl);const jt={};if(tt){const ae=tt.finish();ae&&(jt.resourceTiming=JSON.parse(JSON.stringify(ae)))}_t.vectorTile=kt.vectorTile;const de=_t.parse(kt.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[q]=_t,this.fetching[q]={rawTileData:Ot,cacheControl:vt,resourceTiming:jt};try{const ae=yield de;return p.e({rawTileData:Ot.slice(0)},ae,vt,jt)}finally{delete this.fetching[q]}}catch(kt){throw delete this.loading[q],_t.status="done",this.loaded[q]=_t,kt}})}reloadTile(G){return p._(this,void 0,void 0,function*(){const q=G.uid;if(!this.loaded||!this.loaded[q])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const tt=this.loaded[q];if(tt.showCollisionBoxes=G.showCollisionBoxes,tt.status==="parsing"){const _t=yield tt.parse(tt.vectorTile,this.layerIndex,this.availableImages,this.actor);let Pt;if(this.fetching[q]){const{rawTileData:kt,cacheControl:Ot,resourceTiming:vt}=this.fetching[q];delete this.fetching[q],Pt=p.e({rawTileData:kt.slice(0)},_t,Ot,vt)}else Pt=_t;return Pt}if(tt.status==="done"&&tt.vectorTile)return tt.parse(tt.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(G){return p._(this,void 0,void 0,function*(){const q=this.loading,tt=G.uid;q&&q[tt]&&q[tt].abort&&(q[tt].abort.abort(),delete q[tt])})}removeTile(G){return p._(this,void 0,void 0,function*(){this.loaded&&this.loaded[G.uid]&&delete this.loaded[G.uid]})}}class Q{constructor(){this.loaded={}}loadTile(G){return p._(this,void 0,void 0,function*(){const{uid:q,encoding:tt,rawImageData:_t,redFactor:Pt,greenFactor:kt,blueFactor:Ot,baseShift:vt}=G,jt=_t.width+2,de=_t.height+2,ae=p.b(_t)?new p.R({width:jt,height:de},yield p.bu(_t,-1,-1,jt,de)):_t,ne=new p.bv(q,ae,tt,Pt,kt,Ot,vt);return this.loaded=this.loaded||{},this.loaded[q]=ne,ne})}removeTile(G){const q=this.loaded,tt=G.uid;q&&q[tt]&&delete q[tt]}}function P(pt,G){if(pt.length!==0){K(pt[0],G);for(var q=1;q<pt.length;q++)K(pt[q],!G)}}function K(pt,G){for(var q=0,tt=0,_t=0,Pt=pt.length,kt=Pt-1;_t<Pt;kt=_t++){var Ot=(pt[_t][0]-pt[kt][0])*(pt[kt][1]+pt[_t][1]),vt=q+Ot;tt+=Math.abs(q)>=Math.abs(Ot)?q-vt+Ot:Ot-vt+q,q=vt}q+tt>=0!=!!G&&pt.reverse()}var V=p.bw(function pt(G,q){var tt,_t=G&&G.type;if(_t==="FeatureCollection")for(tt=0;tt<G.features.length;tt++)pt(G.features[tt],q);else if(_t==="GeometryCollection")for(tt=0;tt<G.geometries.length;tt++)pt(G.geometries[tt],q);else if(_t==="Feature")pt(G.geometry,q);else if(_t==="Polygon")P(G.coordinates,q);else if(_t==="MultiPolygon")for(tt=0;tt<G.coordinates.length;tt++)P(G.coordinates[tt],q);return G});const Y=p.br.VectorTileFeature.prototype.toGeoJSON;var $={exports:{}},it=p.bx,ht=p.br.VectorTileFeature,St=Tt;function Tt(pt,G){this.options=G||{},this.features=pt,this.length=pt.length}function Lt(pt,G){this.id=typeof pt.id=="number"?pt.id:void 0,this.type=pt.type,this.rawGeometry=pt.type===1?[pt.geometry]:pt.geometry,this.properties=pt.tags,this.extent=G||4096}Tt.prototype.feature=function(pt){return new Lt(this.features[pt],this.options.extent)},Lt.prototype.loadGeometry=function(){var pt=this.rawGeometry;this.geometry=[];for(var G=0;G<pt.length;G++){for(var q=pt[G],tt=[],_t=0;_t<q.length;_t++)tt.push(new it(q[_t][0],q[_t][1]));this.geometry.push(tt)}return this.geometry},Lt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var pt=this.geometry,G=1/0,q=-1/0,tt=1/0,_t=-1/0,Pt=0;Pt<pt.length;Pt++)for(var kt=pt[Pt],Ot=0;Ot<kt.length;Ot++){var vt=kt[Ot];G=Math.min(G,vt.x),q=Math.max(q,vt.x),tt=Math.min(tt,vt.y),_t=Math.max(_t,vt.y)}return[G,tt,q,_t]},Lt.prototype.toGeoJSON=ht.prototype.toGeoJSON;var Ft=p.by,yt=St;function Rt(pt){var G=new Ft;return function(q,tt){for(var _t in q.layers)tt.writeMessage(3,Wt,q.layers[_t])}(pt,G),G.finish()}function Wt(pt,G){var q;G.writeVarintField(15,pt.version||1),G.writeStringField(1,pt.name||""),G.writeVarintField(5,pt.extent||4096);var tt={keys:[],values:[],keycache:{},valuecache:{}};for(q=0;q<pt.length;q++)tt.feature=pt.feature(q),G.writeMessage(2,At,tt);var _t=tt.keys;for(q=0;q<_t.length;q++)G.writeStringField(3,_t[q]);var Pt=tt.values;for(q=0;q<Pt.length;q++)G.writeMessage(4,Gt,Pt[q])}function At(pt,G){var q=pt.feature;q.id!==void 0&&G.writeVarintField(1,q.id),G.writeMessage(2,lt,pt),G.writeVarintField(3,q.type),G.writeMessage(4,Xt,q)}function lt(pt,G){var q=pt.feature,tt=pt.keys,_t=pt.values,Pt=pt.keycache,kt=pt.valuecache;for(var Ot in q.properties){var vt=q.properties[Ot],jt=Pt[Ot];if(vt!==null){jt===void 0&&(tt.push(Ot),Pt[Ot]=jt=tt.length-1),G.writeVarint(jt);var de=typeof vt;de!=="string"&&de!=="boolean"&&de!=="number"&&(vt=JSON.stringify(vt));var ae=de+":"+vt,ne=kt[ae];ne===void 0&&(_t.push(vt),kt[ae]=ne=_t.length-1),G.writeVarint(ne)}}}function bt(pt,G){return(G<<3)+(7&pt)}function wt(pt){return pt<<1^pt>>31}function Xt(pt,G){for(var q=pt.loadGeometry(),tt=pt.type,_t=0,Pt=0,kt=q.length,Ot=0;Ot<kt;Ot++){var vt=q[Ot],jt=1;tt===1&&(jt=vt.length),G.writeVarint(bt(1,jt));for(var de=tt===3?vt.length-1:vt.length,ae=0;ae<de;ae++){ae===1&&tt!==1&&G.writeVarint(bt(2,de-1));var ne=vt[ae].x-_t,Ee=vt[ae].y-Pt;G.writeVarint(wt(ne)),G.writeVarint(wt(Ee)),_t+=ne,Pt+=Ee}tt===3&&G.writeVarint(bt(7,1))}}function Gt(pt,G){var q=typeof pt;q==="string"?G.writeStringField(1,pt):q==="boolean"?G.writeBooleanField(7,pt):q==="number"&&(pt%1!=0?G.writeDoubleField(3,pt):pt<0?G.writeSVarintField(6,pt):G.writeVarintField(5,pt))}$.exports=Rt,$.exports.fromVectorTileJs=Rt,$.exports.fromGeojsonVt=function(pt,G){G=G||{};var q={};for(var tt in pt)q[tt]=new yt(pt[tt].features,G),q[tt].name=tt,q[tt].version=G.version,q[tt].extent=G.extent;return Rt({layers:q})},$.exports.GeoJSONWrapper=yt;var Yt=p.bw($.exports);const qt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:pt=>pt},te=Math.fround||(Jt=new Float32Array(1),pt=>(Jt[0]=+pt,Jt[0]));var Jt;const me=3,rt=5,dt=6;class Bt{constructor(G){this.options=Object.assign(Object.create(qt),G),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(G){const{log:q,minZoom:tt,maxZoom:_t}=this.options;q&&console.time("total time");const Pt=`prepare ${G.length} points`;q&&console.time(Pt),this.points=G;const kt=[];for(let vt=0;vt<G.length;vt++){const jt=G[vt];if(!jt.geometry)continue;const[de,ae]=jt.geometry.coordinates,ne=te(Ht(de)),Ee=te(ie(ae));kt.push(ne,Ee,1/0,vt,-1,1),this.options.reduce&&kt.push(0)}let Ot=this.trees[_t+1]=this._createTree(kt);q&&console.timeEnd(Pt);for(let vt=_t;vt>=tt;vt--){const jt=+Date.now();Ot=this.trees[vt]=this._createTree(this._cluster(Ot,vt)),q&&console.log("z%d: %d clusters in %dms",vt,Ot.numItems,+Date.now()-jt)}return q&&console.timeEnd("total time"),this}getClusters(G,q){let tt=((G[0]+180)%360+360)%360-180;const _t=Math.max(-90,Math.min(90,G[1]));let Pt=G[2]===180?180:((G[2]+180)%360+360)%360-180;const kt=Math.max(-90,Math.min(90,G[3]));if(G[2]-G[0]>=360)tt=-180,Pt=180;else if(tt>Pt){const ae=this.getClusters([tt,_t,180,kt],q),ne=this.getClusters([-180,_t,Pt,kt],q);return ae.concat(ne)}const Ot=this.trees[this._limitZoom(q)],vt=Ot.range(Ht(tt),ie(kt),Ht(Pt),ie(_t)),jt=Ot.data,de=[];for(const ae of vt){const ne=this.stride*ae;de.push(jt[ne+rt]>1?Et(jt,ne,this.clusterProps):this.points[jt[ne+me]])}return de}getChildren(G){const q=this._getOriginId(G),tt=this._getOriginZoom(G),_t="No cluster with the specified id.",Pt=this.trees[tt];if(!Pt)throw new Error(_t);const kt=Pt.data;if(q*this.stride>=kt.length)throw new Error(_t);const Ot=this.options.radius/(this.options.extent*Math.pow(2,tt-1)),vt=Pt.within(kt[q*this.stride],kt[q*this.stride+1],Ot),jt=[];for(const de of vt){const ae=de*this.stride;kt[ae+4]===G&&jt.push(kt[ae+rt]>1?Et(kt,ae,this.clusterProps):this.points[kt[ae+me]])}if(jt.length===0)throw new Error(_t);return jt}getLeaves(G,q,tt){const _t=[];return this._appendLeaves(_t,G,q=q||10,tt=tt||0,0),_t}getTile(G,q,tt){const _t=this.trees[this._limitZoom(G)],Pt=Math.pow(2,G),{extent:kt,radius:Ot}=this.options,vt=Ot/kt,jt=(tt-vt)/Pt,de=(tt+1+vt)/Pt,ae={features:[]};return this._addTileFeatures(_t.range((q-vt)/Pt,jt,(q+1+vt)/Pt,de),_t.data,q,tt,Pt,ae),q===0&&this._addTileFeatures(_t.range(1-vt/Pt,jt,1,de),_t.data,Pt,tt,Pt,ae),q===Pt-1&&this._addTileFeatures(_t.range(0,jt,vt/Pt,de),_t.data,-1,tt,Pt,ae),ae.features.length?ae:null}getClusterExpansionZoom(G){let q=this._getOriginZoom(G)-1;for(;q<=this.options.maxZoom;){const tt=this.getChildren(G);if(q++,tt.length!==1)break;G=tt[0].properties.cluster_id}return q}_appendLeaves(G,q,tt,_t,Pt){const kt=this.getChildren(q);for(const Ot of kt){const vt=Ot.properties;if(vt&&vt.cluster?Pt+vt.point_count<=_t?Pt+=vt.point_count:Pt=this._appendLeaves(G,vt.cluster_id,tt,_t,Pt):Pt<_t?Pt++:G.push(Ot),G.length===tt)break}return Pt}_createTree(G){const q=new p.av(G.length/this.stride|0,this.options.nodeSize,Float32Array);for(let tt=0;tt<G.length;tt+=this.stride)q.add(G[tt],G[tt+1]);return q.finish(),q.data=G,q}_addTileFeatures(G,q,tt,_t,Pt,kt){for(const Ot of G){const vt=Ot*this.stride,jt=q[vt+rt]>1;let de,ae,ne;if(jt)de=Nt(q,vt,this.clusterProps),ae=q[vt],ne=q[vt+1];else{const Fr=this.points[q[vt+me]];de=Fr.properties;const[ar,Br]=Fr.geometry.coordinates;ae=Ht(ar),ne=ie(Br)}const Ee={type:1,geometry:[[Math.round(this.options.extent*(ae*Pt-tt)),Math.round(this.options.extent*(ne*Pt-_t))]],tags:de};let Re;Re=jt||this.options.generateId?q[vt+me]:this.points[q[vt+me]].id,Re!==void 0&&(Ee.id=Re),kt.features.push(Ee)}}_limitZoom(G){return Math.max(this.options.minZoom,Math.min(Math.floor(+G),this.options.maxZoom+1))}_cluster(G,q){const{radius:tt,extent:_t,reduce:Pt,minPoints:kt}=this.options,Ot=tt/(_t*Math.pow(2,q)),vt=G.data,jt=[],de=this.stride;for(let ae=0;ae<vt.length;ae+=de){if(vt[ae+2]<=q)continue;vt[ae+2]=q;const ne=vt[ae],Ee=vt[ae+1],Re=G.within(vt[ae],vt[ae+1],Ot),Fr=vt[ae+rt];let ar=Fr;for(const Br of Re){const Ur=Br*de;vt[Ur+2]>q&&(ar+=vt[Ur+rt])}if(ar>Fr&&ar>=kt){let Br,Ur=ne*Fr,Ir=Ee*Fr,Zr=-1;const cr=((ae/de|0)<<5)+(q+1)+this.points.length;for(const jr of Re){const ni=jr*de;if(vt[ni+2]<=q)continue;vt[ni+2]=q;const zi=vt[ni+rt];Ur+=vt[ni]*zi,Ir+=vt[ni+1]*zi,vt[ni+4]=cr,Pt&&(Br||(Br=this._map(vt,ae,!0),Zr=this.clusterProps.length,this.clusterProps.push(Br)),Pt(Br,this._map(vt,ni)))}vt[ae+4]=cr,jt.push(Ur/ar,Ir/ar,1/0,cr,-1,ar),Pt&&jt.push(Zr)}else{for(let Br=0;Br<de;Br++)jt.push(vt[ae+Br]);if(ar>1)for(const Br of Re){const Ur=Br*de;if(!(vt[Ur+2]<=q)){vt[Ur+2]=q;for(let Ir=0;Ir<de;Ir++)jt.push(vt[Ur+Ir])}}}}return jt}_getOriginId(G){return G-this.points.length>>5}_getOriginZoom(G){return(G-this.points.length)%32}_map(G,q,tt){if(G[q+rt]>1){const kt=this.clusterProps[G[q+dt]];return tt?Object.assign({},kt):kt}const _t=this.points[G[q+me]].properties,Pt=this.options.map(_t);return tt&&Pt===_t?Object.assign({},Pt):Pt}}function Et(pt,G,q){return{type:"Feature",id:pt[G+me],properties:Nt(pt,G,q),geometry:{type:"Point",coordinates:[(tt=pt[G],360*(tt-.5)),se(pt[G+1])]}};var tt}function Nt(pt,G,q){const tt=pt[G+rt],_t=tt>=1e4?`${Math.round(tt/1e3)}k`:tt>=1e3?Math.round(tt/100)/10+"k":tt,Pt=pt[G+dt],kt=Pt===-1?{}:Object.assign({},q[Pt]);return Object.assign(kt,{cluster:!0,cluster_id:pt[G+me],point_count:tt,point_count_abbreviated:_t})}function Ht(pt){return pt/360+.5}function ie(pt){const G=Math.sin(pt*Math.PI/180),q=.5-.25*Math.log((1+G)/(1-G))/Math.PI;return q<0?0:q>1?1:q}function se(pt){const G=(180-360*pt)*Math.PI/180;return 360*Math.atan(Math.exp(G))/Math.PI-90}function Ce(pt,G,q,tt){for(var _t,Pt=tt,kt=q-G>>1,Ot=q-G,vt=pt[G],jt=pt[G+1],de=pt[q],ae=pt[q+1],ne=G+3;ne<q;ne+=3){var Ee=be(pt[ne],pt[ne+1],vt,jt,de,ae);if(Ee>Pt)_t=ne,Pt=Ee;else if(Ee===Pt){var Re=Math.abs(ne-kt);Re<Ot&&(_t=ne,Ot=Re)}}Pt>tt&&(_t-G>3&&Ce(pt,G,_t,tt),pt[_t+2]=Pt,q-_t>3&&Ce(pt,_t,q,tt))}function be(pt,G,q,tt,_t,Pt){var kt=_t-q,Ot=Pt-tt;if(kt!==0||Ot!==0){var vt=((pt-q)*kt+(G-tt)*Ot)/(kt*kt+Ot*Ot);vt>1?(q=_t,tt=Pt):vt>0&&(q+=kt*vt,tt+=Ot*vt)}return(kt=pt-q)*kt+(Ot=G-tt)*Ot}function Te(pt,G,q,tt){var _t={id:pt===void 0?null:pt,type:G,geometry:q,tags:tt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Pt){var kt=Pt.geometry,Ot=Pt.type;if(Ot==="Point"||Ot==="MultiPoint"||Ot==="LineString")Le(Pt,kt);else if(Ot==="Polygon"||Ot==="MultiLineString")for(var vt=0;vt<kt.length;vt++)Le(Pt,kt[vt]);else if(Ot==="MultiPolygon")for(vt=0;vt<kt.length;vt++)for(var jt=0;jt<kt[vt].length;jt++)Le(Pt,kt[vt][jt])}(_t),_t}function Le(pt,G){for(var q=0;q<G.length;q+=3)pt.minX=Math.min(pt.minX,G[q]),pt.minY=Math.min(pt.minY,G[q+1]),pt.maxX=Math.max(pt.maxX,G[q]),pt.maxY=Math.max(pt.maxY,G[q+1])}function Qe(pt,G,q,tt){if(G.geometry){var _t=G.geometry.coordinates,Pt=G.geometry.type,kt=Math.pow(q.tolerance/((1<<q.maxZoom)*q.extent),2),Ot=[],vt=G.id;if(q.promoteId?vt=G.properties[q.promoteId]:q.generateId&&(vt=tt||0),Pt==="Point")le(_t,Ot);else if(Pt==="MultiPoint")for(var jt=0;jt<_t.length;jt++)le(_t[jt],Ot);else if(Pt==="LineString")nt(_t,Ot,kt,!1);else if(Pt==="MultiLineString"){if(q.lineMetrics){for(jt=0;jt<_t.length;jt++)nt(_t[jt],Ot=[],kt,!1),pt.push(Te(vt,"LineString",Ot,G.properties));return}dr(_t,Ot,kt,!1)}else if(Pt==="Polygon")dr(_t,Ot,kt,!0);else{if(Pt!=="MultiPolygon"){if(Pt==="GeometryCollection"){for(jt=0;jt<G.geometry.geometries.length;jt++)Qe(pt,{id:vt,geometry:G.geometry.geometries[jt],properties:G.properties},q,tt);return}throw new Error("Input data is not a valid GeoJSON object.")}for(jt=0;jt<_t.length;jt++){var de=[];dr(_t[jt],de,kt,!0),Ot.push(de)}}pt.push(Te(vt,Pt,Ot,G.properties))}}function le(pt,G){G.push($e(pt[0])),G.push(ce(pt[1])),G.push(0)}function nt(pt,G,q,tt){for(var _t,Pt,kt=0,Ot=0;Ot<pt.length;Ot++){var vt=$e(pt[Ot][0]),jt=ce(pt[Ot][1]);G.push(vt),G.push(jt),G.push(0),Ot>0&&(kt+=tt?(_t*jt-vt*Pt)/2:Math.sqrt(Math.pow(vt-_t,2)+Math.pow(jt-Pt,2))),_t=vt,Pt=jt}var de=G.length-3;G[2]=1,Ce(G,0,de,q),G[de+2]=1,G.size=Math.abs(kt),G.start=0,G.end=G.size}function dr(pt,G,q,tt){for(var _t=0;_t<pt.length;_t++){var Pt=[];nt(pt[_t],Pt,q,tt),G.push(Pt)}}function $e(pt){return pt/360+.5}function ce(pt){var G=Math.sin(pt*Math.PI/180),q=.5-.25*Math.log((1+G)/(1-G))/Math.PI;return q<0?0:q>1?1:q}function ge(pt,G,q,tt,_t,Pt,kt,Ot){if(tt/=G,Pt>=(q/=G)&&kt<tt)return pt;if(kt<q||Pt>=tt)return null;for(var vt=[],jt=0;jt<pt.length;jt++){var de=pt[jt],ae=de.geometry,ne=de.type,Ee=_t===0?de.minX:de.minY,Re=_t===0?de.maxX:de.maxY;if(Ee>=q&&Re<tt)vt.push(de);else if(!(Re<q||Ee>=tt)){var Fr=[];if(ne==="Point"||ne==="MultiPoint")Se(ae,Fr,q,tt,_t);else if(ne==="LineString")Ie(ae,Fr,q,tt,_t,!1,Ot.lineMetrics);else if(ne==="MultiLineString")Ze(ae,Fr,q,tt,_t,!1);else if(ne==="Polygon")Ze(ae,Fr,q,tt,_t,!0);else if(ne==="MultiPolygon")for(var ar=0;ar<ae.length;ar++){var Br=[];Ze(ae[ar],Br,q,tt,_t,!0),Br.length&&Fr.push(Br)}if(Fr.length){if(Ot.lineMetrics&&ne==="LineString"){for(ar=0;ar<Fr.length;ar++)vt.push(Te(de.id,ne,Fr[ar],de.tags));continue}ne!=="LineString"&&ne!=="MultiLineString"||(Fr.length===1?(ne="LineString",Fr=Fr[0]):ne="MultiLineString"),ne!=="Point"&&ne!=="MultiPoint"||(ne=Fr.length===3?"Point":"MultiPoint"),vt.push(Te(de.id,ne,Fr,de.tags))}}}return vt.length?vt:null}function Se(pt,G,q,tt,_t){for(var Pt=0;Pt<pt.length;Pt+=3){var kt=pt[Pt+_t];kt>=q&&kt<=tt&&(G.push(pt[Pt]),G.push(pt[Pt+1]),G.push(pt[Pt+2]))}}function Ie(pt,G,q,tt,_t,Pt,kt){for(var Ot,vt,jt=Ge(pt),de=_t===0?wr:Sr,ae=pt.start,ne=0;ne<pt.length-3;ne+=3){var Ee=pt[ne],Re=pt[ne+1],Fr=pt[ne+2],ar=pt[ne+3],Br=pt[ne+4],Ur=_t===0?Ee:Re,Ir=_t===0?ar:Br,Zr=!1;kt&&(Ot=Math.sqrt(Math.pow(Ee-ar,2)+Math.pow(Re-Br,2))),Ur<q?Ir>q&&(vt=de(jt,Ee,Re,ar,Br,q),kt&&(jt.start=ae+Ot*vt)):Ur>tt?Ir<tt&&(vt=de(jt,Ee,Re,ar,Br,tt),kt&&(jt.start=ae+Ot*vt)):pr(jt,Ee,Re,Fr),Ir<q&&Ur>=q&&(vt=de(jt,Ee,Re,ar,Br,q),Zr=!0),Ir>tt&&Ur<=tt&&(vt=de(jt,Ee,Re,ar,Br,tt),Zr=!0),!Pt&&Zr&&(kt&&(jt.end=ae+Ot*vt),G.push(jt),jt=Ge(pt)),kt&&(ae+=Ot)}var cr=pt.length-3;Ee=pt[cr],Re=pt[cr+1],Fr=pt[cr+2],(Ur=_t===0?Ee:Re)>=q&&Ur<=tt&&pr(jt,Ee,Re,Fr),cr=jt.length-3,Pt&&cr>=3&&(jt[cr]!==jt[0]||jt[cr+1]!==jt[1])&&pr(jt,jt[0],jt[1],jt[2]),jt.length&&G.push(jt)}function Ge(pt){var G=[];return G.size=pt.size,G.start=pt.start,G.end=pt.end,G}function Ze(pt,G,q,tt,_t,Pt){for(var kt=0;kt<pt.length;kt++)Ie(pt[kt],G,q,tt,_t,Pt,!1)}function pr(pt,G,q,tt){pt.push(G),pt.push(q),pt.push(tt)}function wr(pt,G,q,tt,_t,Pt){var kt=(Pt-G)/(tt-G);return pt.push(Pt),pt.push(q+(_t-q)*kt),pt.push(1),kt}function Sr(pt,G,q,tt,_t,Pt){var kt=(Pt-q)/(_t-q);return pt.push(G+(tt-G)*kt),pt.push(Pt),pt.push(1),kt}function pe(pt,G){for(var q=[],tt=0;tt<pt.length;tt++){var _t,Pt=pt[tt],kt=Pt.type;if(kt==="Point"||kt==="MultiPoint"||kt==="LineString")_t=Xe(Pt.geometry,G);else if(kt==="MultiLineString"||kt==="Polygon"){_t=[];for(var Ot=0;Ot<Pt.geometry.length;Ot++)_t.push(Xe(Pt.geometry[Ot],G))}else if(kt==="MultiPolygon")for(_t=[],Ot=0;Ot<Pt.geometry.length;Ot++){for(var vt=[],jt=0;jt<Pt.geometry[Ot].length;jt++)vt.push(Xe(Pt.geometry[Ot][jt],G));_t.push(vt)}q.push(Te(Pt.id,kt,_t,Pt.tags))}return q}function Xe(pt,G){var q=[];q.size=pt.size,pt.start!==void 0&&(q.start=pt.start,q.end=pt.end);for(var tt=0;tt<pt.length;tt+=3)q.push(pt[tt]+G,pt[tt+1],pt[tt+2]);return q}function ur(pt,G){if(pt.transformed)return pt;var q,tt,_t,Pt=1<<pt.z,kt=pt.x,Ot=pt.y;for(q=0;q<pt.features.length;q++){var vt=pt.features[q],jt=vt.geometry,de=vt.type;if(vt.geometry=[],de===1)for(tt=0;tt<jt.length;tt+=2)vt.geometry.push(Ue(jt[tt],jt[tt+1],G,Pt,kt,Ot));else for(tt=0;tt<jt.length;tt++){var ae=[];for(_t=0;_t<jt[tt].length;_t+=2)ae.push(Ue(jt[tt][_t],jt[tt][_t+1],G,Pt,kt,Ot));vt.geometry.push(ae)}}return pt.transformed=!0,pt}function Ue(pt,G,q,tt,_t,Pt){return[Math.round(q*(pt*tt-_t)),Math.round(q*(G*tt-Pt))]}function Jr(pt,G,q,tt,_t){for(var Pt=G===_t.maxZoom?0:_t.tolerance/((1<<G)*_t.extent),kt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:q,y:tt,z:G,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ot=0;Ot<pt.length;Ot++){kt.numFeatures++,he(kt,pt[Ot],Pt,_t);var vt=pt[Ot].minX,jt=pt[Ot].minY,de=pt[Ot].maxX,ae=pt[Ot].maxY;vt<kt.minX&&(kt.minX=vt),jt<kt.minY&&(kt.minY=jt),de>kt.maxX&&(kt.maxX=de),ae>kt.maxY&&(kt.maxY=ae)}return kt}function he(pt,G,q,tt){var _t=G.geometry,Pt=G.type,kt=[];if(Pt==="Point"||Pt==="MultiPoint")for(var Ot=0;Ot<_t.length;Ot+=3)kt.push(_t[Ot]),kt.push(_t[Ot+1]),pt.numPoints++,pt.numSimplified++;else if(Pt==="LineString")sr(kt,_t,pt,q,!1,!1);else if(Pt==="MultiLineString"||Pt==="Polygon")for(Ot=0;Ot<_t.length;Ot++)sr(kt,_t[Ot],pt,q,Pt==="Polygon",Ot===0);else if(Pt==="MultiPolygon")for(var vt=0;vt<_t.length;vt++){var jt=_t[vt];for(Ot=0;Ot<jt.length;Ot++)sr(kt,jt[Ot],pt,q,!0,Ot===0)}if(kt.length){var de=G.tags||null;if(Pt==="LineString"&&tt.lineMetrics){for(var ae in de={},G.tags)de[ae]=G.tags[ae];de.mapbox_clip_start=_t.start/_t.size,de.mapbox_clip_end=_t.end/_t.size}var ne={geometry:kt,type:Pt==="Polygon"||Pt==="MultiPolygon"?3:Pt==="LineString"||Pt==="MultiLineString"?2:1,tags:de};G.id!==null&&(ne.id=G.id),pt.features.push(ne)}}function sr(pt,G,q,tt,_t,Pt){var kt=tt*tt;if(tt>0&&G.size<(_t?kt:tt))q.numPoints+=G.length/3;else{for(var Ot=[],vt=0;vt<G.length;vt+=3)(tt===0||G[vt+2]>kt)&&(q.numSimplified++,Ot.push(G[vt]),Ot.push(G[vt+1])),q.numPoints++;_t&&function(jt,de){for(var ae=0,ne=0,Ee=jt.length,Re=Ee-2;ne<Ee;Re=ne,ne+=2)ae+=(jt[ne]-jt[Re])*(jt[ne+1]+jt[Re+1]);if(ae>0===de)for(ne=0,Ee=jt.length;ne<Ee/2;ne+=2){var Fr=jt[ne],ar=jt[ne+1];jt[ne]=jt[Ee-2-ne],jt[ne+1]=jt[Ee-1-ne],jt[Ee-2-ne]=Fr,jt[Ee-1-ne]=ar}}(Ot,Pt),pt.push(Ot)}}function Me(pt,G){var q=(G=this.options=function(_t,Pt){for(var kt in Pt)_t[kt]=Pt[kt];return _t}(Object.create(this.options),G)).debug;if(q&&console.time("preprocess data"),G.maxZoom<0||G.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(G.promoteId&&G.generateId)throw new Error("promoteId and generateId cannot be used together.");var tt=function(_t,Pt){var kt=[];if(_t.type==="FeatureCollection")for(var Ot=0;Ot<_t.features.length;Ot++)Qe(kt,_t.features[Ot],Pt,Ot);else Qe(kt,_t.type==="Feature"?_t:{geometry:_t},Pt);return kt}(pt,G);this.tiles={},this.tileCoords=[],q&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",G.indexMaxZoom,G.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),tt=function(_t,Pt){var kt=Pt.buffer/Pt.extent,Ot=_t,vt=ge(_t,1,-1-kt,kt,0,-1,2,Pt),jt=ge(_t,1,1-kt,2+kt,0,-1,2,Pt);return(vt||jt)&&(Ot=ge(_t,1,-kt,1+kt,0,-1,2,Pt)||[],vt&&(Ot=pe(vt,1).concat(Ot)),jt&&(Ot=Ot.concat(pe(jt,-1)))),Ot}(tt,G),tt.length&&this.splitTile(tt,0,0,0),q&&(tt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function xr(pt,G,q){return 32*((1<<pt)*q+G)+pt}function Gr(pt,G){return G?pt.properties[G]:pt.id}function ke(pt,G){if(pt==null)return!0;if(pt.type==="Feature")return Gr(pt,G)!=null;if(pt.type==="FeatureCollection"){const q=new Set;for(const tt of pt.features){const _t=Gr(tt,G);if(_t==null||q.has(_t))return!1;q.add(_t)}return!0}return!1}function Fi(pt,G){const q=new Map;if(pt!=null)if(pt.type==="Feature")q.set(Gr(pt,G),pt);else for(const tt of pt.features)q.set(Gr(tt,G),tt);return q}Me.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Me.prototype.splitTile=function(pt,G,q,tt,_t,Pt,kt){for(var Ot=[pt,G,q,tt],vt=this.options,jt=vt.debug;Ot.length;){tt=Ot.pop(),q=Ot.pop(),G=Ot.pop(),pt=Ot.pop();var de=1<<G,ae=xr(G,q,tt),ne=this.tiles[ae];if(!ne&&(jt>1&&console.time("creation"),ne=this.tiles[ae]=Jr(pt,G,q,tt,vt),this.tileCoords.push({z:G,x:q,y:tt}),jt)){jt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",G,q,tt,ne.numFeatures,ne.numPoints,ne.numSimplified),console.timeEnd("creation"));var Ee="z"+G;this.stats[Ee]=(this.stats[Ee]||0)+1,this.total++}if(ne.source=pt,_t){if(G===vt.maxZoom||G===_t)continue;var Re=1<<_t-G;if(q!==Math.floor(Pt/Re)||tt!==Math.floor(kt/Re))continue}else if(G===vt.indexMaxZoom||ne.numPoints<=vt.indexMaxPoints)continue;if(ne.source=null,pt.length!==0){jt>1&&console.time("clipping");var Fr,ar,Br,Ur,Ir,Zr,cr=.5*vt.buffer/vt.extent,jr=.5-cr,ni=.5+cr,zi=1+cr;Fr=ar=Br=Ur=null,Ir=ge(pt,de,q-cr,q+ni,0,ne.minX,ne.maxX,vt),Zr=ge(pt,de,q+jr,q+zi,0,ne.minX,ne.maxX,vt),pt=null,Ir&&(Fr=ge(Ir,de,tt-cr,tt+ni,1,ne.minY,ne.maxY,vt),ar=ge(Ir,de,tt+jr,tt+zi,1,ne.minY,ne.maxY,vt),Ir=null),Zr&&(Br=ge(Zr,de,tt-cr,tt+ni,1,ne.minY,ne.maxY,vt),Ur=ge(Zr,de,tt+jr,tt+zi,1,ne.minY,ne.maxY,vt),Zr=null),jt>1&&console.timeEnd("clipping"),Ot.push(Fr||[],G+1,2*q,2*tt),Ot.push(ar||[],G+1,2*q,2*tt+1),Ot.push(Br||[],G+1,2*q+1,2*tt),Ot.push(Ur||[],G+1,2*q+1,2*tt+1)}}},Me.prototype.getTile=function(pt,G,q){var tt=this.options,_t=tt.extent,Pt=tt.debug;if(pt<0||pt>24)return null;var kt=1<<pt,Ot=xr(pt,G=(G%kt+kt)%kt,q);if(this.tiles[Ot])return ur(this.tiles[Ot],_t);Pt>1&&console.log("drilling down to z%d-%d-%d",pt,G,q);for(var vt,jt=pt,de=G,ae=q;!vt&&jt>0;)jt--,de=Math.floor(de/2),ae=Math.floor(ae/2),vt=this.tiles[xr(jt,de,ae)];return vt&&vt.source?(Pt>1&&console.log("found parent tile z%d-%d-%d",jt,de,ae),Pt>1&&console.time("drilling down"),this.splitTile(vt.source,jt,de,ae,pt,G,q),Pt>1&&console.timeEnd("drilling down"),this.tiles[Ot]?ur(this.tiles[Ot],_t):null):null};class zr extends U{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(G,q){return p._(this,void 0,void 0,function*(){const tt=G.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const _t=this._geoJSONIndex.getTile(tt.z,tt.x,tt.y);if(!_t)return null;const Pt=new class{constructor(Ot){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=p.W,this.length=Ot.length,this._features=Ot}feature(Ot){return new class{constructor(vt){this._feature=vt,this.extent=p.W,this.type=vt.type,this.properties=vt.tags,"id"in vt&&!isNaN(vt.id)&&(this.id=parseInt(vt.id,10))}loadGeometry(){if(this._feature.type===1){const vt=[];for(const jt of this._feature.geometry)vt.push([new p.P(jt[0],jt[1])]);return vt}{const vt=[];for(const jt of this._feature.geometry){const de=[];for(const ae of jt)de.push(new p.P(ae[0],ae[1]));vt.push(de)}return vt}}toGeoJSON(vt,jt,de){return Y.call(this,vt,jt,de)}}(this._features[Ot])}}(_t.features);let kt=Yt(Pt);return kt.byteOffset===0&&kt.byteLength===kt.buffer.byteLength||(kt=new Uint8Array(kt)),{vectorTile:Pt,rawData:kt.buffer}})}loadData(G){return p._(this,void 0,void 0,function*(){var q;(q=this._pendingRequest)===null||q===void 0||q.abort();const tt=!!(G&&G.request&&G.request.collectResourceTiming)&&new p.bt(G.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(G,this._pendingRequest),this._geoJSONIndex=G.cluster?new Bt(function({superclusterOptions:Pt,clusterProperties:kt}){if(!kt||!Pt)return Pt;const Ot={},vt={},jt={accumulated:null,zoom:0},de={properties:null},ae=Object.keys(kt);for(const ne of ae){const[Ee,Re]=kt[ne],Fr=p.bA(Re),ar=p.bA(typeof Ee=="string"?[Ee,["accumulated"],["get",ne]]:Ee);Ot[ne]=Fr.value,vt[ne]=ar.value}return Pt.map=ne=>{de.properties=ne;const Ee={};for(const Re of ae)Ee[Re]=Ot[Re].evaluate(jt,de);return Ee},Pt.reduce=(ne,Ee)=>{de.properties=Ee;for(const Re of ae)jt.accumulated=ne[Re],ne[Re]=vt[Re].evaluate(jt,de)},Pt}(G)).load((yield this._pendingData).features):new Me(yield this._pendingData,G.geojsonVtOptions),this.loaded={};const _t={};if(tt){const Pt=tt.finish();Pt&&(_t.resourceTiming={},_t.resourceTiming[G.source]=JSON.parse(JSON.stringify(Pt)))}return _t}catch(_t){if(delete this._pendingRequest,p.bz(_t))return{abandoned:!0};throw _t}})}getData(){return p._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(G){const q=this.loaded;return q&&q[G.uid]?super.reloadTile(G):this.loadTile(G)}loadAndProcessGeoJSON(G,q){return p._(this,void 0,void 0,function*(){let tt=yield this.loadGeoJSON(G,q);if(delete this._pendingRequest,typeof tt!="object")throw new Error(`Input data given to '${G.source}' is not a valid GeoJSON object.`);if(V(tt,!0),G.filter){const _t=p.bA(G.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(_t.result==="error")throw new Error(_t.value.map(kt=>`${kt.key}: ${kt.message}`).join(", "));tt={type:"FeatureCollection",features:tt.features.filter(kt=>_t.value.evaluate({zoom:0},kt))}}return tt})}loadGeoJSON(G,q){return p._(this,void 0,void 0,function*(){const{promoteId:tt}=G;if(G.request){const _t=yield p.h(G.request,q);return this._dataUpdateable=ke(_t.data,tt)?Fi(_t.data,tt):void 0,_t.data}if(typeof G.data=="string")try{const _t=JSON.parse(G.data);return this._dataUpdateable=ke(_t,tt)?Fi(_t,tt):void 0,_t}catch{throw new Error(`Input data given to '${G.source}' is not a valid GeoJSON object.`)}if(!G.dataDiff)throw new Error(`Input data given to '${G.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${G.source}`);return function(_t,Pt,kt){var Ot,vt,jt,de;if(Pt.removeAll&&_t.clear(),Pt.remove)for(const ae of Pt.remove)_t.delete(ae);if(Pt.add)for(const ae of Pt.add){const ne=Gr(ae,kt);ne!=null&&_t.set(ne,ae)}if(Pt.update)for(const ae of Pt.update){let ne=_t.get(ae.id);if(ne==null)continue;const Ee=!ae.removeAllProperties&&(((Ot=ae.removeProperties)===null||Ot===void 0?void 0:Ot.length)>0||((vt=ae.addOrUpdateProperties)===null||vt===void 0?void 0:vt.length)>0);if((ae.newGeometry||ae.removeAllProperties||Ee)&&(ne=Object.assign({},ne),_t.set(ae.id,ne),Ee&&(ne.properties=Object.assign({},ne.properties))),ae.newGeometry&&(ne.geometry=ae.newGeometry),ae.removeAllProperties)ne.properties={};else if(((jt=ae.removeProperties)===null||jt===void 0?void 0:jt.length)>0)for(const Re of ae.removeProperties)Object.prototype.hasOwnProperty.call(ne.properties,Re)&&delete ne.properties[Re];if(((de=ae.addOrUpdateProperties)===null||de===void 0?void 0:de.length)>0)for(const{key:Re,value:Fr}of ae.addOrUpdateProperties)ne.properties[Re]=Fr}}(this._dataUpdateable,G.dataDiff,tt),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(G){return p._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(G){return this._geoJSONIndex.getClusterExpansionZoom(G.clusterId)}getClusterChildren(G){return this._geoJSONIndex.getChildren(G.clusterId)}getClusterLeaves(G){return this._geoJSONIndex.getLeaves(G.clusterId,G.limit,G.offset)}}class Dr{constructor(G){this.self=G,this.actor=new p.C(G),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(q,tt)=>{if(this.externalWorkerSourceTypes[q])throw new Error(`Worker source with name "${q}" already registered.`);this.externalWorkerSourceTypes[q]=tt},this.self.addProtocol=p.bg,this.self.removeProtocol=p.bh,this.self.registerRTLTextPlugin=q=>{if(p.bB.isParsed())throw new Error("RTL text plugin already registered.");p.bB.setMethods(q)},this.actor.registerMessageHandler("LDT",(q,tt)=>this._getDEMWorkerSource(q,tt.source).loadTile(tt)),this.actor.registerMessageHandler("RDT",(q,tt)=>p._(this,void 0,void 0,function*(){this._getDEMWorkerSource(q,tt.source).removeTile(tt)})),this.actor.registerMessageHandler("GCEZ",(q,tt)=>p._(this,void 0,void 0,function*(){return this._getWorkerSource(q,tt.type,tt.source).getClusterExpansionZoom(tt)})),this.actor.registerMessageHandler("GCC",(q,tt)=>p._(this,void 0,void 0,function*(){return this._getWorkerSource(q,tt.type,tt.source).getClusterChildren(tt)})),this.actor.registerMessageHandler("GCL",(q,tt)=>p._(this,void 0,void 0,function*(){return this._getWorkerSource(q,tt.type,tt.source).getClusterLeaves(tt)})),this.actor.registerMessageHandler("LD",(q,tt)=>this._getWorkerSource(q,tt.type,tt.source).loadData(tt)),this.actor.registerMessageHandler("GD",(q,tt)=>this._getWorkerSource(q,tt.type,tt.source).getData()),this.actor.registerMessageHandler("LT",(q,tt)=>this._getWorkerSource(q,tt.type,tt.source).loadTile(tt)),this.actor.registerMessageHandler("RT",(q,tt)=>this._getWorkerSource(q,tt.type,tt.source).reloadTile(tt)),this.actor.registerMessageHandler("AT",(q,tt)=>this._getWorkerSource(q,tt.type,tt.source).abortTile(tt)),this.actor.registerMessageHandler("RMT",(q,tt)=>this._getWorkerSource(q,tt.type,tt.source).removeTile(tt)),this.actor.registerMessageHandler("RS",(q,tt)=>p._(this,void 0,void 0,function*(){if(!this.workerSources[q]||!this.workerSources[q][tt.type]||!this.workerSources[q][tt.type][tt.source])return;const _t=this.workerSources[q][tt.type][tt.source];delete this.workerSources[q][tt.type][tt.source],_t.removeSource!==void 0&&_t.removeSource(tt)})),this.actor.registerMessageHandler("RM",q=>p._(this,void 0,void 0,function*(){delete this.layerIndexes[q],delete this.availableImages[q],delete this.workerSources[q],delete this.demWorkerSources[q]})),this.actor.registerMessageHandler("SR",(q,tt)=>p._(this,void 0,void 0,function*(){this.referrer=tt})),this.actor.registerMessageHandler("SRPS",(q,tt)=>this._syncRTLPluginState(q,tt)),this.actor.registerMessageHandler("IS",(q,tt)=>p._(this,void 0,void 0,function*(){this.self.importScripts(tt)})),this.actor.registerMessageHandler("SI",(q,tt)=>this._setImages(q,tt)),this.actor.registerMessageHandler("UL",(q,tt)=>p._(this,void 0,void 0,function*(){this._getLayerIndex(q).update(tt.layers,tt.removedIds)})),this.actor.registerMessageHandler("SL",(q,tt)=>p._(this,void 0,void 0,function*(){this._getLayerIndex(q).replace(tt)}))}_setImages(G,q){return p._(this,void 0,void 0,function*(){this.availableImages[G]=q;for(const tt in this.workerSources[G]){const _t=this.workerSources[G][tt];for(const Pt in _t)_t[Pt].availableImages=q}})}_syncRTLPluginState(G,q){return p._(this,void 0,void 0,function*(){if(p.bB.isParsed())return p.bB.getState();if(q.pluginStatus!=="loading")return p.bB.setState(q),q;const tt=q.pluginURL;if(this.self.importScripts(tt),p.bB.isParsed()){const _t={pluginStatus:"loaded",pluginURL:tt};return p.bB.setState(_t),_t}throw p.bB.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${tt}`)})}_getAvailableImages(G){let q=this.availableImages[G];return q||(q=[]),q}_getLayerIndex(G){let q=this.layerIndexes[G];return q||(q=this.layerIndexes[G]=new o),q}_getWorkerSource(G,q,tt){if(this.workerSources[G]||(this.workerSources[G]={}),this.workerSources[G][q]||(this.workerSources[G][q]={}),!this.workerSources[G][q][tt]){const _t={sendAsync:(Pt,kt)=>(Pt.targetMapId=G,this.actor.sendAsync(Pt,kt))};switch(q){case"vector":this.workerSources[G][q][tt]=new U(_t,this._getLayerIndex(G),this._getAvailableImages(G));break;case"geojson":this.workerSources[G][q][tt]=new zr(_t,this._getLayerIndex(G),this._getAvailableImages(G));break;default:this.workerSources[G][q][tt]=new this.externalWorkerSourceTypes[q](_t,this._getLayerIndex(G),this._getAvailableImages(G))}}return this.workerSources[G][q][tt]}_getDEMWorkerSource(G,q){return this.demWorkerSources[G]||(this.demWorkerSources[G]={}),this.demWorkerSources[G][q]||(this.demWorkerSources[G][q]=new Q),this.demWorkerSources[G][q]}}return p.i(self)&&(self.worker=new Dr(self)),Dr}),l("index",["exports","./shared"],function(p,o){var v="4.4.0";let C,I;const U={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:b=>new Promise((r,c)=>{const g=requestAnimationFrame(r);b.signal.addEventListener("abort",()=>{cancelAnimationFrame(g),c(o.c())})}),getImageData(b,r=0){return this.getImageCanvasContext(b).getImageData(-r,-r,b.width+2*r,b.height+2*r)},getImageCanvasContext(b){const r=window.document.createElement("canvas"),c=r.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return r.width=b.width,r.height=b.height,c.drawImage(b,0,0,b.width,b.height),c},resolveURL:b=>(C||(C=document.createElement("a")),C.href=b,C.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(I==null&&(I=matchMedia("(prefers-reduced-motion: reduce)")),I.matches)}};class Q{static testProp(r){if(!Q.docStyle)return r[0];for(let c=0;c<r.length;c++)if(r[c]in Q.docStyle)return r[c];return r[0]}static create(r,c,g){const y=window.document.createElement(r);return c!==void 0&&(y.className=c),g&&g.appendChild(y),y}static createNS(r,c){return window.document.createElementNS(r,c)}static disableDrag(){Q.docStyle&&Q.selectProp&&(Q.userSelect=Q.docStyle[Q.selectProp],Q.docStyle[Q.selectProp]="none")}static enableDrag(){Q.docStyle&&Q.selectProp&&(Q.docStyle[Q.selectProp]=Q.userSelect)}static setTransform(r,c){r.style[Q.transformProp]=c}static addEventListener(r,c,g,y={}){r.addEventListener(c,g,"passive"in y?y:y.capture)}static removeEventListener(r,c,g,y={}){r.removeEventListener(c,g,"passive"in y?y:y.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",Q.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",Q.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",Q.suppressClickInternal,!0)},0)}static getScale(r){const c=r.getBoundingClientRect();return{x:c.width/r.offsetWidth||1,y:c.height/r.offsetHeight||1,boundingClientRect:c}}static getPoint(r,c,g){const y=c.boundingClientRect;return new o.P((g.clientX-y.left)/c.x-r.clientLeft,(g.clientY-y.top)/c.y-r.clientTop)}static mousePos(r,c){const g=Q.getScale(r);return Q.getPoint(r,g,c)}static touchPos(r,c){const g=[],y=Q.getScale(r);for(let x=0;x<c.length;x++)g.push(Q.getPoint(r,y,c[x]));return g}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}Q.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,Q.selectProp=Q.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),Q.transformProp=Q.testProp(["transform","WebkitTransform"]);const P={supported:!1,testSupport:function(b){!Y&&V&&($?it(b):K=b)}};let K,V,Y=!1,$=!1;function it(b){const r=b.createTexture();b.bindTexture(b.TEXTURE_2D,r);try{if(b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,V),b.isContextLost())return;P.supported=!0}catch{}b.deleteTexture(r),Y=!0}var ht;typeof document<"u"&&(V=document.createElement("img"),V.onload=()=>{K&&it(K),K=null,$=!0},V.onerror=()=>{Y=!0,K=null},V.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(b){let r,c,g,y;b.resetRequestQueue=()=>{r=[],c=0,g=0,y={}},b.addThrottleControl=f=>{const _=g++;return y[_]=f,_},b.removeThrottleControl=f=>{delete y[f],T()},b.getImage=(f,_,F=!0)=>new Promise((E,k)=>{P.supported&&(f.headers||(f.headers={}),f.headers.accept="image/webp,*/*"),o.e(f,{type:"image"}),r.push({abortController:_,requestParameters:f,supportImageRefresh:F,state:"queued",onError:D=>{k(D)},onSuccess:D=>{E(D)}}),T()});const x=f=>o._(this,void 0,void 0,function*(){f.state="running";const{requestParameters:_,supportImageRefresh:F,onError:E,onSuccess:k,abortController:D}=f,O=F===!1&&!o.i(self)&&!o.g(_.url)&&(!_.headers||Object.keys(_.headers).reduce((X,ot)=>X&&ot==="accept",!0));c++;const z=O?u(_,D):o.m(_,D);try{const X=yield z;delete f.abortController,f.state="completed",X.data instanceof HTMLImageElement||o.b(X.data)?k(X):X.data&&k({data:yield(H=X.data,typeof createImageBitmap=="function"?o.d(H):o.f(H)),cacheControl:X.cacheControl,expires:X.expires})}catch(X){delete f.abortController,E(X)}finally{c--,T()}var H}),T=()=>{const f=(()=>{for(const _ of Object.keys(y))if(y[_]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let _=c;_<f&&r.length>0;_++){const F=r.shift();F.abortController.signal.aborted?_--:x(F)}},u=(f,_)=>new Promise((F,E)=>{const k=new Image,D=f.url,O=f.credentials;O&&O==="include"?k.crossOrigin="use-credentials":(O&&O==="same-origin"||!o.s(D))&&(k.crossOrigin="anonymous"),_.signal.addEventListener("abort",()=>{k.src="",E(o.c())}),k.fetchPriority="high",k.onload=()=>{k.onerror=k.onload=null,F({data:k})},k.onerror=()=>{k.onerror=k.onload=null,_.signal.aborted||E(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},k.src=D})}(ht||(ht={})),ht.resetRequestQueue();class St{constructor(r){this._transformRequestFn=r}transformRequest(r,c){return this._transformRequestFn&&this._transformRequestFn(r,c)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function Tt(b){var r=new o.A(3);return r[0]=b[0],r[1]=b[1],r[2]=b[2],r}var Lt,Ft=function(b,r,c){return b[0]=r[0]-c[0],b[1]=r[1]-c[1],b[2]=r[2]-c[2],b};Lt=new o.A(3),o.A!=Float32Array&&(Lt[0]=0,Lt[1]=0,Lt[2]=0);var yt=function(b){var r=b[0],c=b[1];return r*r+c*c};function Rt(b){const r=[];if(typeof b=="string")r.push({id:"default",url:b});else if(b&&b.length>0){const c=[];for(const{id:g,url:y}of b){const x=`${g}${y}`;c.indexOf(x)===-1&&(c.push(x),r.push({id:g,url:y}))}}return r}function Wt(b,r,c){const g=b.split("?");return g[0]+=`${r}${c}`,g.join("?")}(function(){var b=new o.A(2);o.A!=Float32Array&&(b[0]=0,b[1]=0)})();class At{constructor(r,c,g,y){this.context=r,this.format=g,this.texture=r.gl.createTexture(),this.update(c,y)}update(r,c,g){const{width:y,height:x}=r,T=!(this.size&&this.size[0]===y&&this.size[1]===x||g),{context:u}=this,{gl:f}=u;if(this.useMipmap=!!(c&&c.useMipmap),f.bindTexture(f.TEXTURE_2D,this.texture),u.pixelStoreUnpackFlipY.set(!1),u.pixelStoreUnpack.set(1),u.pixelStoreUnpackPremultiplyAlpha.set(this.format===f.RGBA&&(!c||c.premultiply!==!1)),T)this.size=[y,x],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||o.b(r)?f.texImage2D(f.TEXTURE_2D,0,this.format,this.format,f.UNSIGNED_BYTE,r):f.texImage2D(f.TEXTURE_2D,0,this.format,y,x,0,this.format,f.UNSIGNED_BYTE,r.data);else{const{x:_,y:F}=g||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||o.b(r)?f.texSubImage2D(f.TEXTURE_2D,0,_,F,f.RGBA,f.UNSIGNED_BYTE,r):f.texSubImage2D(f.TEXTURE_2D,0,_,F,y,x,f.RGBA,f.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&f.generateMipmap(f.TEXTURE_2D)}bind(r,c,g){const{context:y}=this,{gl:x}=y;x.bindTexture(x.TEXTURE_2D,this.texture),g!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(g=x.LINEAR),r!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,r),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,g||r),this.filter=r),c!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,c),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function lt(b){const{userImage:r}=b;return!!(r&&r.render&&r.render())&&(b.data.replace(new Uint8Array(r.data.buffer)),!0)}class bt extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:c,promiseResolve:g}of this.requestors)g(this._getImagesForIds(c));this.requestors=[]}}getImage(r){const c=this.images[r];if(c&&!c.data&&c.spriteData){const g=c.spriteData;c.data=new o.R({width:g.width,height:g.height},g.context.getImageData(g.x,g.y,g.width,g.height).data),c.spriteData=null}return c}addImage(r,c){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,c)&&(this.images[r]=c)}_validate(r,c){let g=!0;const y=c.data||c.spriteData;return this._validateStretch(c.stretchX,y&&y.width)||(this.fire(new o.j(new Error(`Image "${r}" has invalid "stretchX" value`))),g=!1),this._validateStretch(c.stretchY,y&&y.height)||(this.fire(new o.j(new Error(`Image "${r}" has invalid "stretchY" value`))),g=!1),this._validateContent(c.content,c)||(this.fire(new o.j(new Error(`Image "${r}" has invalid "content" value`))),g=!1),g}_validateStretch(r,c){if(!r)return!0;let g=0;for(const y of r){if(y[0]<g||y[1]<y[0]||c<y[1])return!1;g=y[1]}return!0}_validateContent(r,c){if(!r)return!0;if(r.length!==4)return!1;const g=c.spriteData,y=g&&g.width||c.data.width,x=g&&g.height||c.data.height;return!(r[0]<0||y<r[0]||r[1]<0||x<r[1]||r[2]<0||y<r[2]||r[3]<0||x<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,c,g=!0){const y=this.getImage(r);if(g&&(y.data.width!==c.data.width||y.data.height!==c.data.height))throw new Error(`size mismatch between old image (${y.data.width}x${y.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=y.version+1,this.images[r]=c,this.updatedImages[r]=!0}removeImage(r){const c=this.images[r];delete this.images[r],delete this.patterns[r],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((c,g)=>{let y=!0;if(!this.isLoaded())for(const x of r)this.images[x]||(y=!1);this.isLoaded()||y?c(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:c})})}_getImagesForIds(r){const c={};for(const g of r){let y=this.getImage(g);y||(this.fire(new o.k("styleimagemissing",{id:g})),y=this.getImage(g)),y?c[g]={data:y.data.clone(),pixelRatio:y.pixelRatio,sdf:y.sdf,version:y.version,stretchX:y.stretchX,stretchY:y.stretchY,content:y.content,textFitWidth:y.textFitWidth,textFitHeight:y.textFitHeight,hasRenderCallback:!!(y.userImage&&y.userImage.render)}:o.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:r,height:c}=this.atlasImage;return{width:r,height:c}}getPattern(r){const c=this.patterns[r],g=this.getImage(r);if(!g)return null;if(c&&c.position.version===g.version)return c.position;if(c)c.position.version=g.version;else{const y={w:g.data.width+2,h:g.data.height+2,x:0,y:0},x=new o.I(y,g);this.patterns[r]={bin:y,position:x}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const c=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new At(r,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const x in this.patterns)r.push(this.patterns[x].bin);const{w:c,h:g}=o.p(r),y=this.atlasImage;y.resize({width:c||1,height:g||1});for(const x in this.patterns){const{bin:T}=this.patterns[x],u=T.x+1,f=T.y+1,_=this.getImage(x).data,F=_.width,E=_.height;o.R.copy(_,y,{x:0,y:0},{x:u,y:f},{width:F,height:E}),o.R.copy(_,y,{x:0,y:E-1},{x:u,y:f-1},{width:F,height:1}),o.R.copy(_,y,{x:0,y:0},{x:u,y:f+E},{width:F,height:1}),o.R.copy(_,y,{x:F-1,y:0},{x:u-1,y:f},{width:1,height:E}),o.R.copy(_,y,{x:0,y:0},{x:u+F,y:f},{width:1,height:E})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const c of r){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const g=this.getImage(c);g||o.w(`Image with ID: "${c}" was not found`),lt(g)&&this.updateImage(c,g)}}}const wt=1e20;function Xt(b,r,c,g,y,x,T,u,f){for(let _=r;_<r+g;_++)Gt(b,c*x+_,x,y,T,u,f);for(let _=c;_<c+y;_++)Gt(b,_*x+r,1,g,T,u,f)}function Gt(b,r,c,g,y,x,T){x[0]=0,T[0]=-wt,T[1]=wt,y[0]=b[r];for(let u=1,f=0,_=0;u<g;u++){y[u]=b[r+u*c];const F=u*u;do{const E=x[f];_=(y[u]-y[E]+F-E*E)/(u-E)/2}while(_<=T[f]&&--f>-1);f++,x[f]=u,T[f]=_,T[f+1]=wt}for(let u=0,f=0;u<g;u++){for(;T[f+1]<u;)f++;const _=x[f],F=u-_;b[r+u*c]=y[_]+F*F}}class Yt{constructor(r,c){this.requestManager=r,this.localIdeographFontFamily=c,this.entries={}}setURL(r){this.url=r}getGlyphs(r){return o._(this,void 0,void 0,function*(){const c=[];for(const x in r)for(const T of r[x])c.push(this._getAndCacheGlyphsPromise(x,T));const g=yield Promise.all(c),y={};for(const{stack:x,id:T,glyph:u}of g)y[x]||(y[x]={}),y[x][T]=u&&{id:u.id,bitmap:u.bitmap.clone(),metrics:u.metrics};return y})}_getAndCacheGlyphsPromise(r,c){return o._(this,void 0,void 0,function*(){let g=this.entries[r];g||(g=this.entries[r]={glyphs:{},requests:{},ranges:{}});let y=g.glyphs[c];if(y!==void 0)return{stack:r,id:c,glyph:y};if(y=this._tinySDF(g,r,c),y)return g.glyphs[c]=y,{stack:r,id:c,glyph:y};const x=Math.floor(c/256);if(256*x>65535)throw new Error("glyphs > 65535 not supported");if(g.ranges[x])return{stack:r,id:c,glyph:y};if(!this.url)throw new Error("glyphsUrl is not set");if(!g.requests[x]){const u=Yt.loadGlyphRange(r,x,this.url,this.requestManager);g.requests[x]=u}const T=yield g.requests[x];for(const u in T)this._doesCharSupportLocalGlyph(+u)||(g.glyphs[+u]=T[+u]);return g.ranges[x]=!0,{stack:r,id:c,glyph:T[c]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(o.u["CJK Unified Ideographs"](r)||o.u["Hangul Syllables"](r)||o.u.Hiragana(r)||o.u.Katakana(r))}_tinySDF(r,c,g){const y=this.localIdeographFontFamily;if(!y||!this._doesCharSupportLocalGlyph(g))return;let x=r.tinySDF;if(!x){let u="400";/bold/i.test(c)?u="900":/medium/i.test(c)?u="500":/light/i.test(c)&&(u="200"),x=r.tinySDF=new Yt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:y,fontWeight:u})}const T=x.draw(String.fromCharCode(g));return{id:g,bitmap:new o.o({width:T.width||60,height:T.height||60},T.data),metrics:{width:T.glyphWidth/2||24,height:T.glyphHeight/2||24,left:T.glyphLeft/2+.5||0,top:T.glyphTop/2-27.5||-8,advance:T.glyphAdvance/2||24,isDoubleResolution:!0}}}}Yt.loadGlyphRange=function(b,r,c,g){return o._(this,void 0,void 0,function*(){const y=256*r,x=y+255,T=g.transformRequest(c.replace("{fontstack}",b).replace("{range}",`${y}-${x}`),"Glyphs"),u=yield o.l(T,new AbortController);if(!u||!u.data)throw new Error(`Could not load glyph range. range: ${r}, ${y}-${x}`);const f={};for(const _ of o.n(u.data))f[_.id]=_;return f})},Yt.TinySDF=class{constructor({fontSize:b=24,buffer:r=3,radius:c=8,cutoff:g=.25,fontFamily:y="sans-serif",fontWeight:x="normal",fontStyle:T="normal"}={}){this.buffer=r,this.cutoff=g,this.radius=c;const u=this.size=b+4*r,f=this._createCanvas(u),_=this.ctx=f.getContext("2d",{willReadFrequently:!0});_.font=`${T} ${x} ${b}px ${y}`,_.textBaseline="alphabetic",_.textAlign="left",_.fillStyle="black",this.gridOuter=new Float64Array(u*u),this.gridInner=new Float64Array(u*u),this.f=new Float64Array(u),this.z=new Float64Array(u+1),this.v=new Uint16Array(u)}_createCanvas(b){const r=document.createElement("canvas");return r.width=r.height=b,r}draw(b){const{width:r,actualBoundingBoxAscent:c,actualBoundingBoxDescent:g,actualBoundingBoxLeft:y,actualBoundingBoxRight:x}=this.ctx.measureText(b),T=Math.ceil(c),u=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(x-y))),f=Math.min(this.size-this.buffer,T+Math.ceil(g)),_=u+2*this.buffer,F=f+2*this.buffer,E=Math.max(_*F,0),k=new Uint8ClampedArray(E),D={data:k,width:_,height:F,glyphWidth:u,glyphHeight:f,glyphTop:T,glyphLeft:0,glyphAdvance:r};if(u===0||f===0)return D;const{ctx:O,buffer:z,gridInner:H,gridOuter:X}=this;O.clearRect(z,z,u,f),O.fillText(b,z,z+T);const ot=O.getImageData(z,z,u,f);X.fill(wt,0,E),H.fill(0,0,E);for(let Z=0;Z<f;Z++)for(let st=0;st<u;st++){const mt=ot.data[4*(Z*u+st)+3]/255;if(mt===0)continue;const gt=(Z+z)*_+st+z;if(mt===1)X[gt]=0,H[gt]=wt;else{const ut=.5-mt;X[gt]=ut>0?ut*ut:0,H[gt]=ut<0?ut*ut:0}}Xt(X,0,0,_,F,_,this.f,this.v,this.z),Xt(H,z,z,u,f,_,this.f,this.v,this.z);for(let Z=0;Z<E;Z++){const st=Math.sqrt(X[Z])-Math.sqrt(H[Z]);k[Z]=Math.round(255-255*(st/this.radius+this.cutoff))}return D}};class qt{constructor(){this.specification=o.v.light.position}possiblyEvaluate(r,c){return o.y(r.expression.evaluate(c))}interpolate(r,c,g){return{x:o.z.number(r.x,c.x,g),y:o.z.number(r.y,c.y,g),z:o.z.number(r.z,c.z,g)}}}let te;class Jt extends o.E{constructor(r){super(),te=te||new o.q({anchor:new o.D(o.v.light.anchor),position:new qt,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.T(te),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,c={}){if(!this._validate(o.r,r,c))for(const g in r){const y=r[g];g.endsWith("-transition")?this._transitionable.setTransition(g.slice(0,-11),y):this._transitionable.setValue(g,y)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,c,g){return(!g||g.validate!==!1)&&o.t(this,r.call(o.x,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}class me{constructor(r,c){this.width=r,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,c){const g=r.join(",")+String(c);return this.dashEntry[g]||(this.dashEntry[g]=this.addDash(r,c)),this.dashEntry[g]}getDashRanges(r,c,g){const y=[];let x=r.length%2==1?-r[r.length-1]*g:0,T=r[0]*g,u=!0;y.push({left:x,right:T,isDash:u,zeroLength:r[0]===0});let f=r[0];for(let _=1;_<r.length;_++){u=!u;const F=r[_];x=f*g,f+=F,T=f*g,y.push({left:x,right:T,isDash:u,zeroLength:F===0})}return y}addRoundDash(r,c,g){const y=c/2;for(let x=-g;x<=g;x++){const T=this.width*(this.nextRow+g+x);let u=0,f=r[u];for(let _=0;_<this.width;_++){_/f.right>1&&(f=r[++u]);const F=Math.abs(_-f.left),E=Math.abs(_-f.right),k=Math.min(F,E);let D;const O=x/g*(y+1);if(f.isDash){const z=y-Math.abs(O);D=Math.sqrt(k*k+z*z)}else D=y-Math.sqrt(k*k+O*O);this.data[T+_]=Math.max(0,Math.min(255,D+128))}}}addRegularDash(r){for(let u=r.length-1;u>=0;--u){const f=r[u],_=r[u+1];f.zeroLength?r.splice(u,1):_&&_.isDash===f.isDash&&(_.left=f.left,r.splice(u,1))}const c=r[0],g=r[r.length-1];c.isDash===g.isDash&&(c.left=g.left-this.width,g.right=c.right+this.width);const y=this.width*this.nextRow;let x=0,T=r[x];for(let u=0;u<this.width;u++){u/T.right>1&&(T=r[++x]);const f=Math.abs(u-T.left),_=Math.abs(u-T.right),F=Math.min(f,_);this.data[y+u]=Math.max(0,Math.min(255,(T.isDash?F:-F)+128))}}addDash(r,c){const g=c?7:0,y=2*g+1;if(this.nextRow+y>this.height)return o.w("LineAtlas out of space"),null;let x=0;for(let u=0;u<r.length;u++)x+=r[u];if(x!==0){const u=this.width/x,f=this.getDashRanges(r,this.width,u);c?this.addRoundDash(f,u,g):this.addRegularDash(f)}const T={y:(this.nextRow+g+.5)/this.height,height:2*g/this.height,width:x};return this.nextRow+=y,this.dirty=!0,T}bind(r){const c=r.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const rt="maplibre_preloaded_worker_pool";class dt{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<dt.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[rt]}numActive(){return Object.keys(this.active).length}}const Bt=Math.floor(U.hardwareConcurrency/2);let Et,Nt;function Ht(){return Et||(Et=new dt),Et}dt.workerCount=o.B(globalThis)?Math.max(Math.min(Bt,3),1):1;class ie{constructor(r,c){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=c;const g=this.workerPool.acquire(c);for(let y=0;y<g.length;y++){const x=new o.C(g[y],c);x.name=`Worker ${y}`,this.actors.push(x)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,c){const g=[];for(const y of this.actors)g.push(y.sendAsync({type:r,data:c}));return Promise.all(g)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,c){for(const g of this.actors)g.registerMessageHandler(r,c)}}function se(){return Nt||(Nt=new ie(Ht(),o.G),Nt.registerMessageHandler("GR",(b,r,c)=>o.m(r,c))),Nt}function Ce(b,r){const c=o.F();return o.H(c,c,[1,1,0]),o.J(c,c,[.5*b.width,.5*b.height,1]),o.K(c,c,b.calculatePosMatrix(r.toUnwrapped()))}function be(b,r,c,g,y,x){const T=function(E,k,D){if(E)for(const O of E){const z=k[O];if(z&&z.source===D&&z.type==="fill-extrusion")return!0}else for(const O in k){const z=k[O];if(z.source===D&&z.type==="fill-extrusion")return!0}return!1}(y&&y.layers,r,b.id),u=x.maxPitchScaleFactor(),f=b.tilesIn(g,u,T);f.sort(Te);const _=[];for(const E of f)_.push({wrappedTileID:E.tileID.wrapped().key,queryResults:E.tile.queryRenderedFeatures(r,c,b._state,E.queryGeometry,E.cameraQueryGeometry,E.scale,y,x,u,Ce(b.transform,E.tileID))});const F=function(E){const k={},D={};for(const O of E){const z=O.queryResults,H=O.wrappedTileID,X=D[H]=D[H]||{};for(const ot in z){const Z=z[ot],st=X[ot]=X[ot]||{},mt=k[ot]=k[ot]||[];for(const gt of Z)st[gt.featureIndex]||(st[gt.featureIndex]=!0,mt.push(gt))}}return k}(_);for(const E in F)F[E].forEach(k=>{const D=k.feature,O=b.getFeatureState(D.layer["source-layer"],D.id);D.source=D.layer.source,D.layer["source-layer"]&&(D.sourceLayer=D.layer["source-layer"]),D.state=O});return F}function Te(b,r){const c=b.tileID,g=r.tileID;return c.overscaledZ-g.overscaledZ||c.canonical.y-g.canonical.y||c.wrap-g.wrap||c.canonical.x-g.canonical.x}function Le(b,r,c){return o._(this,void 0,void 0,function*(){let g=b;if(b.url?g=(yield o.h(r.transformRequest(b.url,"Source"),c)).data:yield U.frameAsync(c),!g)return null;const y=o.L(o.e(g,b),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in g&&g.vector_layers&&(y.vectorLayerIds=g.vector_layers.map(x=>x.id)),y})}class Qe{constructor(r,c){r&&(c?this.setSouthWest(r).setNorthEast(c):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof o.M?new o.M(r.lng,r.lat):o.M.convert(r),this}setSouthWest(r){return this._sw=r instanceof o.M?new o.M(r.lng,r.lat):o.M.convert(r),this}extend(r){const c=this._sw,g=this._ne;let y,x;if(r instanceof o.M)y=r,x=r;else{if(!(r instanceof Qe))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Qe.convert(r)):this.extend(o.M.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(o.M.convert(r)):this;if(y=r._sw,x=r._ne,!y||!x)return this}return c||g?(c.lng=Math.min(y.lng,c.lng),c.lat=Math.min(y.lat,c.lat),g.lng=Math.max(x.lng,g.lng),g.lat=Math.max(x.lat,g.lat)):(this._sw=new o.M(y.lng,y.lat),this._ne=new o.M(x.lng,x.lat)),this}getCenter(){return new o.M((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.M(this.getWest(),this.getNorth())}getSouthEast(){return new o.M(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:c,lat:g}=o.M.convert(r);let y=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=g&&g<=this._ne.lat&&y}static convert(r){return r instanceof Qe?r:r&&new Qe(r)}static fromLngLat(r,c=0){const g=360*c/40075017,y=g/Math.cos(Math.PI/180*r.lat);return new Qe(new o.M(r.lng-y,r.lat-g),new o.M(r.lng+y,r.lat+g))}}class le{constructor(r,c,g){this.bounds=Qe.convert(this.validateBounds(r)),this.minzoom=c||0,this.maxzoom=g||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const c=Math.pow(2,r.z),g=Math.floor(o.N(this.bounds.getWest())*c),y=Math.floor(o.O(this.bounds.getNorth())*c),x=Math.ceil(o.N(this.bounds.getEast())*c),T=Math.ceil(o.O(this.bounds.getSouth())*c);return r.x>=g&&r.x<x&&r.y>=y&&r.y<T}}class nt extends o.E{constructor(r,c,g,y){if(super(),this.id=r,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.L(c,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield Le(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(o.e(this,r),r.bounds&&(this.tileBounds=new le(r.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new o.j(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(r){return o._(this,void 0,void 0,function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(c,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};g.request.collectResourceTiming=this._collectResourceTiming;let y="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((x,T)=>{r.reloadPromise={resolve:x,reject:T}})}else r.actor=this.dispatcher.getActor(),y="LT";r.abortController=new AbortController;try{const x=yield r.actor.sendAsync({type:y,data:g},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,x)}catch(x){if(delete r.abortController,r.aborted)return;if(x&&x.status!==404)throw x;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,c){if(c&&c.resourceTiming&&(r.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&r.setExpiryData(c),r.loadVectorData(c,this.map.painter),r.reloadPromise){const g=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(g.resolve).catch(g.reject)}}abortTile(r){return o._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return o._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class dr extends o.E{constructor(r,c,g,y){super(),this.id=r,this.dispatcher=g,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},c),o.e(this,o.L(c,["url","scheme","tileSize"]))}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield Le(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,r&&(o.e(this,r),r.bounds&&(this.tileBounds=new le(r.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new o.j(r))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return o.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return o._(this,void 0,void 0,function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const g=yield ht.getImage(this.map._requestManager.transformRequest(c,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(g&&g.data){this.map._refreshExpiredTiles&&g.cacheControl&&g.expires&&r.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});const y=this.map.painter.context,x=y.gl,T=g.data;r.texture=this.map.painter.getTileTexture(T.width),r.texture?r.texture.update(T,{useMipmap:!0}):(r.texture=new At(y,T,x.RGBA,{useMipmap:!0}),r.texture.bind(x.LINEAR,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST),y.extTextureFilterAnisotropic&&x.texParameterf(x.TEXTURE_2D,y.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,y.extTextureFilterAnisotropicMax)),r.state="loaded"}}catch(g){if(delete r.abortController,r.aborted)r.state="unloaded";else if(g)throw r.state="errored",g}})}abortTile(r){return o._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return o._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class $e extends dr{constructor(r,c,g,y){super(r,c,g,y),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(r){return o._(this,void 0,void 0,function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(c,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const y=yield ht.getImage(g,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(y&&y.data){const x=y.data;this.map._refreshExpiredTiles&&y.cacheControl&&y.expires&&r.setExpiryData({cacheControl:y.cacheControl,expires:y.expires});const T=o.b(x)&&o.S()?x:yield this.readImageNow(x),u={type:this.type,uid:r.uid,source:this.id,rawImageData:T,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const f=yield r.actor.sendAsync({type:"LDT",data:u});r.dem=f,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(y){if(delete r.abortController,r.aborted)r.state="unloaded";else if(y)throw r.state="errored",y}})}readImageNow(r){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&o.U()){const c=r.width+2,g=r.height+2;try{return new o.R({width:c,height:g},yield o.V(r,-1,-1,c,g))}catch{}}return U.getImageData(r,1)})}_getNeighboringTiles(r){const c=r.canonical,g=Math.pow(2,c.z),y=(c.x-1+g)%g,x=c.x===0?r.wrap-1:r.wrap,T=(c.x+1+g)%g,u=c.x+1===g?r.wrap+1:r.wrap,f={};return f[new o.Q(r.overscaledZ,x,c.z,y,c.y).key]={backfilled:!1},f[new o.Q(r.overscaledZ,u,c.z,T,c.y).key]={backfilled:!1},c.y>0&&(f[new o.Q(r.overscaledZ,x,c.z,y,c.y-1).key]={backfilled:!1},f[new o.Q(r.overscaledZ,r.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},f[new o.Q(r.overscaledZ,u,c.z,T,c.y-1).key]={backfilled:!1}),c.y+1<g&&(f[new o.Q(r.overscaledZ,x,c.z,y,c.y+1).key]={backfilled:!1},f[new o.Q(r.overscaledZ,r.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},f[new o.Q(r.overscaledZ,u,c.z,T,c.y+1).key]={backfilled:!1}),f}unloadTile(r){return o._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class ce extends o.E{constructor(r,c,g,y){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=g.getActor(),this.setEventedParent(y),this._data=c.data,this._options=o.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const x=o.W/this.tileSize;this.workerOptions=o.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*x,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*x,extent:o.W,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:o.W,radius:(c.clusterRadius||50)*x,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}getData(){return o._(this,void 0,void 0,function*(){const r=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})})}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,c,g){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:c,offset:g}})}_updateWorkerData(r){return o._(this,void 0,void 0,function*(){const c=o.e({type:this.type},this.workerOptions);r?c.dataDiff=r:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(U.resolveURL(this._data),"Source"),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new o.k("dataloading",{dataType:"source"}));try{const g=yield this.actor.sendAsync({type:"LD",data:c});if(this._pendingLoads--,this._removed||g.abandoned)return void this.fire(new o.k("dataabort",{dataType:"source"}));let y=null;g.resourceTiming&&g.resourceTiming[this.id]&&(y=g.resourceTiming[this.id].slice(0));const x={dataType:"source"};this._collectResourceTiming&&y&&y.length>0&&o.e(x,{resourceTiming:y}),this.fire(new o.k("data",Object.assign(Object.assign({},x),{sourceDataType:"metadata"}))),this.fire(new o.k("data",Object.assign(Object.assign({},x),{sourceDataType:"content"})))}catch(g){if(this._pendingLoads--,this._removed)return void this.fire(new o.k("dataabort",{dataType:"source"}));this.fire(new o.j(g))}})}loaded(){return this._pendingLoads===0}loadTile(r){return o._(this,void 0,void 0,function*(){const c=r.actor?"RT":"LT";r.actor=this.actor;const g={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.abortController=new AbortController;const y=yield this.actor.sendAsync({type:c,data:g},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(y,this.map.painter,c==="RT")})}abortTile(r){return o._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return o._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var ge=o.X([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Se extends o.E{constructor(r,c,g,y){super(),this.id=r,this.dispatcher=g,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=c}load(r){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield ht.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,r&&(this.coordinates=r),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new o.j(c))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const c=r.map(o.Y.fromLngLat);this.tileID=function(y){let x=1/0,T=1/0,u=-1/0,f=-1/0;for(const k of y)x=Math.min(x,k.x),T=Math.min(T,k.y),u=Math.max(u,k.x),f=Math.max(f,k.y);const _=Math.max(u-x,f-T),F=Math.max(0,Math.floor(-Math.log(_)/Math.LN2)),E=Math.pow(2,F);return new o.a0(F,Math.floor((x+u)/2*E),Math.floor((T+f)/2*E))}(c),this.minzoom=this.maxzoom=this.tileID.z;const g=c.map(y=>this.tileID.getTilePoint(y)._round());return this._boundsArray=new o.Z,this._boundsArray.emplaceBack(g[0].x,g[0].y,0,0),this._boundsArray.emplaceBack(g[1].x,g[1].y,o.W,0),this._boundsArray.emplaceBack(g[3].x,g[3].y,0,o.W),this._boundsArray.emplaceBack(g[2].x,g[2].y,o.W,o.W),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,c=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,ge.members)),this.boundsSegments||(this.boundsSegments=o.$.simpleSegment(0,0,4,2)),this.texture||(this.texture=new At(r,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let g=!1;for(const y in this.tiles){const x=this.tiles[y];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,g=!0)}g&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Ie extends Se{constructor(r,c,g,y){super(r,c,g,y),this.roundZoom=!0,this.type="video",this.options=c}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const c of r.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield o.a2(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new o.j(c))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const c=this.video.seekable;r<c.start(0)||r>c.end(0)?this.fire(new o.j(new o.a1(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,c=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,ge.members)),this.boundsSegments||(this.boundsSegments=o.$.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new At(r,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let g=!1;for(const y in this.tiles){const x=this.tiles[y];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,g=!0)}g&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ge extends Se{constructor(r,c,g,y){super(r,c,g,y),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(x=>!Array.isArray(x)||x.length!==2||x.some(T=>typeof T!="number"))||this.fire(new o.j(new o.a1(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.j(new o.a1(`sources.${r}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new o.j(new o.a1(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new o.j(new o.a1(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.j(new o.a1(`sources.${r}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,g=c.gl;this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,ge.members)),this.boundsSegments||(this.boundsSegments=o.$.simpleSegment(0,0,4,2)),this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new At(c,this.canvas,g.RGBA,{premultiply:!0});let y=!1;for(const x in this.tiles){const T=this.tiles[x];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,y=!0)}y&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const Ze={},pr=b=>{switch(b){case"geojson":return ce;case"image":return Se;case"raster":return dr;case"raster-dem":return $e;case"vector":return nt;case"video":return Ie;case"canvas":return Ge}return Ze[b]},wr="RTLPluginLoaded";class Sr extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=se()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(c=>{throw this.status="error",c})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return o._(this,arguments,void 0,function*(c,g=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=U.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!g)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.k(wr))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let pe=null;function Xe(){return pe||(pe=new Sr),pe}class ur{constructor(r,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=o.a3(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const c=r+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,c,g){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(y,x){const T={};if(!x)return T;for(const u of y){const f=u.layerIds.map(_=>x.getLayer(_)).filter(Boolean);if(f.length!==0){u.layers=f,u.stateDependentLayerIds&&(u.stateDependentLayers=u.stateDependentLayerIds.map(_=>f.filter(F=>F.id===_)[0]));for(const _ of f)T[_.id]=u}}return T}(r.buckets,c.style),this.hasSymbolBuckets=!1;for(const y in this.buckets){const x=this.buckets[y];if(x instanceof o.a5){if(this.hasSymbolBuckets=!0,!g)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const y in this.buckets){const x=this.buckets[y];if(x instanceof o.a5&&x.hasRTLText){this.hasRTLText=!0,Xe().lazyLoad();break}}this.queryPadding=0;for(const y in this.buckets){const x=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(y).queryRadius(x))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new o.a4}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const g in this.buckets){const y=this.buckets[g];y.uploadPending()&&y.upload(r)}const c=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new At(r,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new At(r,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,c,g,y,x,T,u,f,_,F){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:x,scale:T,tileSize:this.tileSize,pixelPosMatrix:F,transform:f,params:u,queryPadding:this.queryPadding*_},r,c,g):{}}querySourceFeatures(r,c){const g=this.latestFeatureIndex;if(!g||!g.rawTileData)return;const y=g.loadVTLayers(),x=c&&c.sourceLayer?c.sourceLayer:"",T=y._geojsonTileLayer||y[x];if(!T)return;const u=o.a6(c&&c.filter),{z:f,x:_,y:F}=this.tileID.canonical,E={z:f,x:_,y:F};for(let k=0;k<T.length;k++){const D=T.feature(k);if(u.needGeometry){const H=o.a7(D,!0);if(!u.filter(new o.a8(this.tileID.overscaledZ),H,this.tileID.canonical))continue}else if(!u.filter(new o.a8(this.tileID.overscaledZ),D))continue;const O=g.getId(D,x),z=new o.a9(D,f,_,F,O);z.tile=E,r.push(z)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const c=this.expirationTime;if(r.cacheControl){const g=o.aa(r.cacheControl);g["max-age"]&&(this.expirationTime=Date.now()+1e3*g["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const g=Date.now();let y=!1;if(this.expirationTime>g)y=!1;else if(c)if(this.expirationTime<c)y=!0;else{const x=this.expirationTime-c;x?this.expirationTime=g+Math.max(x,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const g=this.latestFeatureIndex.loadVTLayers();for(const y in this.buckets){if(!c.style.hasLayer(y))continue;const x=this.buckets[y],T=x.layers[0].sourceLayer||"_geojsonTileLayer",u=g[T],f=r[T];if(!u||!f||Object.keys(f).length===0)continue;x.update(f,u,this.imageAtlas&&this.imageAtlas.patternPositions||{});const _=c&&c.style&&c.style.getLayer(y);_&&(this.queryPadding=Math.max(this.queryPadding,_.queryRadius(x)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<U.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=U.now()+r}setDependencies(r,c){const g={};for(const y of c)g[y]=!0;this.dependencies[r]=g}hasDependency(r,c){for(const g of r){const y=this.dependencies[g];if(y){for(const x of c)if(y[x])return!0}}return!1}}class Ue{constructor(r,c){this.max=r,this.onRemove=c,this.reset()}reset(){for(const r in this.data)for(const c of this.data[r])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(r,c,g){const y=r.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);const x={value:c,timeout:void 0};if(g!==void 0&&(x.timeout=setTimeout(()=>{this.remove(r,x)},g)),this.data[y].push(x),this.order.push(y),this.order.length>this.max){const T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const c=this.data[r].shift();return c.timeout&&clearTimeout(c.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),c.value}getByKey(r){const c=this.data[r];return c?c[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,c){if(!this.has(r))return this;const g=r.wrapped().key,y=c===void 0?0:this.data[g].indexOf(c),x=this.data[g][y];return this.data[g].splice(y,1),x.timeout&&clearTimeout(x.timeout),this.data[g].length===0&&delete this.data[g],this.onRemove(x.value),this.order.splice(this.order.indexOf(g),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(r){const c=[];for(const g in this.data)for(const y of this.data[g])r(y.value)||c.push(y);for(const g of c)this.remove(g.value.tileID,g)}}class Jr{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,c,g){const y=String(c);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][y]=this.stateChanges[r][y]||{},o.e(this.stateChanges[r][y],g),this.deletedStates[r]===null){this.deletedStates[r]={};for(const x in this.state[r])x!==y&&(this.deletedStates[r][x]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][y]===null){this.deletedStates[r][y]={};for(const x in this.state[r][y])g[x]||(this.deletedStates[r][y][x]=null)}else for(const x in g)this.deletedStates[r]&&this.deletedStates[r][y]&&this.deletedStates[r][y][x]===null&&delete this.deletedStates[r][y][x]}removeFeatureState(r,c,g){if(this.deletedStates[r]===null)return;const y=String(c);if(this.deletedStates[r]=this.deletedStates[r]||{},g&&c!==void 0)this.deletedStates[r][y]!==null&&(this.deletedStates[r][y]=this.deletedStates[r][y]||{},this.deletedStates[r][y][g]=null);else if(c!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][y])for(g in this.deletedStates[r][y]={},this.stateChanges[r][y])this.deletedStates[r][y][g]=null;else this.deletedStates[r][y]=null;else this.deletedStates[r]=null}getState(r,c){const g=String(c),y=o.e({},(this.state[r]||{})[g],(this.stateChanges[r]||{})[g]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const x=this.deletedStates[r][c];if(x===null)return{};for(const T in x)delete y[T]}return y}initializeTileState(r,c){r.setFeatureState(this.state,c)}coalesceChanges(r,c){const g={};for(const y in this.stateChanges){this.state[y]=this.state[y]||{};const x={};for(const T in this.stateChanges[y])this.state[y][T]||(this.state[y][T]={}),o.e(this.state[y][T],this.stateChanges[y][T]),x[T]=this.state[y][T];g[y]=x}for(const y in this.deletedStates){this.state[y]=this.state[y]||{};const x={};if(this.deletedStates[y]===null)for(const T in this.state[y])x[T]={},this.state[y][T]={};else for(const T in this.deletedStates[y]){if(this.deletedStates[y][T]===null)this.state[y][T]={};else for(const u of Object.keys(this.deletedStates[y][T]))delete this.state[y][T][u];x[T]=this.state[y][T]}g[y]=g[y]||{},o.e(g[y],x)}if(this.stateChanges={},this.deletedStates={},Object.keys(g).length!==0)for(const y in r)r[y].setFeatureState(g,c)}}class he extends o.E{constructor(r,c,g){super(),this.id=r,this.dispatcher=g,this.on("data",y=>this._dataHandler(y)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((y,x,T,u)=>{const f=new(pr(x.type))(y,x,T,u);if(f.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${f.id}`);return f})(r,c,g,this),this._tiles={},this._cache=new Ue(0,y=>this._unloadTile(y)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Jr,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const c=this._tiles[r];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,c,g){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,c,g)}catch(y){r.state="errored",y.status!==404?this._source.fire(new o.j(y,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new o.k("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const g=this._tiles[c];g.upload(r),g.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(sr).map(r=>r.key)}getRenderableIds(r){const c=[];for(const g in this._tiles)this._isIdRenderable(g,r)&&c.push(this._tiles[g]);return r?c.sort((g,y)=>{const x=g.tileID,T=y.tileID,u=new o.P(x.canonical.x,x.canonical.y)._rotate(this.transform.angle),f=new o.P(T.canonical.x,T.canonical.y)._rotate(this.transform.angle);return x.overscaledZ-T.overscaledZ||f.y-u.y||f.x-u.x}).map(g=>g.tileID.key):c.map(g=>g.tileID).sort(sr).map(g=>g.key)}hasRenderableParent(r){const c=this.findLoadedParent(r,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(r,c){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(c||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,c){return o._(this,void 0,void 0,function*(){const g=this._tiles[r];g&&(g.state!=="loading"&&(g.state=c),yield this._loadTile(g,r,c))})}_tileLoaded(r,c,g){r.timeAdded=U.now(),g==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(c,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new o.k("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const c=this.getRenderableIds();for(let y=0;y<c.length;y++){const x=c[y];if(r.neighboringTiles&&r.neighboringTiles[x]){const T=this.getTileByID(x);g(r,T),g(T,r)}}function g(y,x){y.needsHillshadePrepare=!0,y.needsTerrainPrepare=!0;let T=x.tileID.canonical.x-y.tileID.canonical.x;const u=x.tileID.canonical.y-y.tileID.canonical.y,f=Math.pow(2,y.tileID.canonical.z),_=x.tileID.key;T===0&&u===0||Math.abs(u)>1||(Math.abs(T)>1&&(Math.abs(T+f)===1?T+=f:Math.abs(T-f)===1&&(T-=f)),x.dem&&y.dem&&(y.dem.backfillBorder(x.dem,T,u),y.neighboringTiles&&y.neighboringTiles[_]&&(y.neighboringTiles[_].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,c,g,y){for(const x in this._tiles){let T=this._tiles[x];if(y[x]||!T.hasData()||T.tileID.overscaledZ<=c||T.tileID.overscaledZ>g)continue;let u=T.tileID;for(;T&&T.tileID.overscaledZ>c+1;){const _=T.tileID.scaledTo(T.tileID.overscaledZ-1);T=this._tiles[_.key],T&&T.hasData()&&(u=_)}let f=u;for(;f.overscaledZ>c;)if(f=f.scaledTo(f.overscaledZ-1),r[f.key]){y[u.key]=u;break}}}findLoadedParent(r,c){if(r.key in this._loadedParentTiles){const g=this._loadedParentTiles[r.key];return g&&g.tileID.overscaledZ>=c?g:null}for(let g=r.overscaledZ-1;g>=c;g--){const y=r.scaledTo(g),x=this._getLoadedTile(y);if(x)return x}}findLoadedSibling(r){return this._getLoadedTile(r)}_getLoadedTile(r){const c=this._tiles[r.key];return c&&c.hasData()?c:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const c=Math.ceil(r.width/this._source.tileSize)+1,g=Math.ceil(r.height/this._source.tileSize)+1,y=Math.floor(c*g*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(x)}handleWrapJump(r){const c=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,c){const g={};for(const y in this._tiles){const x=this._tiles[y];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+c),g[x.tileID.key]=x}this._tiles=g;for(const y in this._timers)clearTimeout(this._timers[y]),delete this._timers[y];for(const y in this._tiles)this._setTileReloadTimer(y,this._tiles[y])}}_updateCoveredAndRetainedTiles(r,c,g,y,x,T){const u={},f={},_=Object.keys(r),F=U.now();for(const E of _){const k=r[E],D=this._tiles[E];if(!D||D.fadeEndTime!==0&&D.fadeEndTime<=F)continue;const O=this.findLoadedParent(k,c),z=this.findLoadedSibling(k),H=O||z||null;H&&(this._addTile(H.tileID),u[H.tileID.key]=H.tileID),f[E]=k}this._retainLoadedChildren(f,y,g,r);for(const E in u)r[E]||(this._coveredTiles[E]=!0,r[E]=u[E]);if(T){const E={},k={};for(const D of x)this._tiles[D.key].hasData()?E[D.key]=D:k[D.key]=D;for(const D in k){const O=k[D].children(this._source.maxzoom);this._tiles[O[0].key]&&this._tiles[O[1].key]&&this._tiles[O[2].key]&&this._tiles[O[3].key]&&(E[O[0].key]=r[O[0].key]=O[0],E[O[1].key]=r[O[1].key]=O[1],E[O[2].key]=r[O[2].key]=O[2],E[O[3].key]=r[O[3].key]=O[3],delete k[D])}for(const D in k){const O=k[D],z=this.findLoadedParent(O,this._source.minzoom),H=this.findLoadedSibling(O),X=z||H||null;if(X){E[X.tileID.key]=r[X.tileID.key]=X.tileID;for(const ot in E)E[ot].isChildOf(X.tileID)&&delete E[ot]}}for(const D in this._tiles)E[D]||(this._coveredTiles[D]=!0)}}update(r,c){if(!this._sourceLoaded||this._paused)return;let g;this.transform=r,this.terrain=c,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?g=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(F=>new o.Q(F.canonical.z,F.wrap,F.canonical.z,F.canonical.x,F.canonical.y)):(g=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c}),this._source.hasTile&&(g=g.filter(F=>this._source.hasTile(F)))):g=[];const y=r.coveringZoomLevel(this._source),x=Math.max(y-he.maxOverzooming,this._source.minzoom),T=Math.max(y+he.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const F={};for(const E of g)if(E.canonical.z>this._source.minzoom){const k=E.scaledTo(E.canonical.z-1);F[k.key]=k;const D=E.scaledTo(Math.max(this._source.minzoom,Math.min(E.canonical.z,5)));F[D.key]=D}g=g.concat(Object.values(F))}const u=g.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,u&&this.fire(new o.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const f=this._updateRetainedTiles(g,y);Me(this._source.type)&&this._updateCoveredAndRetainedTiles(f,x,T,y,g,c);for(const F in f)this._tiles[F].clearFadeHold();const _=o.ab(this._tiles,f);for(const F of _){const E=this._tiles[F];E.hasSymbolBuckets&&!E.holdingForFade()?E.setHoldDuration(this.map._fadeDuration):E.hasSymbolBuckets&&!E.symbolFadeFinished()||this._removeTile(F)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,c){var g;const y={},x={},T=Math.max(c-he.maxOverzooming,this._source.minzoom),u=Math.max(c+he.maxUnderzooming,this._source.minzoom),f={};for(const _ of r){const F=this._addTile(_);y[_.key]=_,F.hasData()||c<this._source.maxzoom&&(f[_.key]=_)}this._retainLoadedChildren(f,c,u,y);for(const _ of r){let F=this._tiles[_.key];if(F.hasData())continue;if(c+1>this._source.maxzoom){const k=_.children(this._source.maxzoom)[0],D=this.getTile(k);if(D&&D.hasData()){y[k.key]=k;continue}}else{const k=_.children(this._source.maxzoom);if(y[k[0].key]&&y[k[1].key]&&y[k[2].key]&&y[k[3].key])continue}let E=F.wasRequested();for(let k=_.overscaledZ-1;k>=T;--k){const D=_.scaledTo(k);if(x[D.key])break;if(x[D.key]=!0,F=this.getTile(D),!F&&E&&(F=this._addTile(D)),F){const O=F.hasData();if((O||!(!((g=this.map)===null||g===void 0)&&g.cancelPendingTileRequestsWhileZooming)||E)&&(y[D.key]=D),E=F.wasRequested(),O)break}}}return y}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const c=[];let g,y=this._tiles[r].tileID;for(;y.overscaledZ>0;){if(y.key in this._loadedParentTiles){g=this._loadedParentTiles[y.key];break}c.push(y.key);const x=y.scaledTo(y.overscaledZ-1);if(g=this._getLoadedTile(x),g)break;y=x}for(const x of c)this._loadedParentTiles[x]=g}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const r in this._tiles){const c=this._tiles[r].tileID,g=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=g}}_addTile(r){let c=this._tiles[r.key];if(c)return c;c=this._cache.getAndRemove(r),c&&(this._setTileReloadTimer(r.key,c),c.tileID=r,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,c)));const g=c;return c||(c=new ur(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(c,r.key,c.state)),c.uses++,this._tiles[r.key]=c,g||this._source.fire(new o.k("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(r,c){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const g=c.getExpiryTimeout();g&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},g))}_removeTile(r){const c=this._tiles[r];c&&(c.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(r){const c=r.sourceDataType;r.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&c==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,c,g){const y=[],x=this.transform;if(!x)return y;const T=g?x.getCameraQueryGeometry(r):r,u=r.map(O=>x.pointCoordinate(O,this.terrain)),f=T.map(O=>x.pointCoordinate(O,this.terrain)),_=this.getIds();let F=1/0,E=1/0,k=-1/0,D=-1/0;for(const O of f)F=Math.min(F,O.x),E=Math.min(E,O.y),k=Math.max(k,O.x),D=Math.max(D,O.y);for(let O=0;O<_.length;O++){const z=this._tiles[_[O]];if(z.holdingForFade())continue;const H=z.tileID,X=Math.pow(2,x.zoom-z.tileID.overscaledZ),ot=c*z.queryPadding*o.W/z.tileSize/X,Z=[H.getTilePoint(new o.Y(F,E)),H.getTilePoint(new o.Y(k,D))];if(Z[0].x-ot<o.W&&Z[0].y-ot<o.W&&Z[1].x+ot>=0&&Z[1].y+ot>=0){const st=u.map(gt=>H.getTilePoint(gt)),mt=f.map(gt=>H.getTilePoint(gt));y.push({tile:z,tileID:H,queryGeometry:st,cameraQueryGeometry:mt,scale:X})}}return y}getVisibleCoordinates(r){const c=this.getRenderableIds(r).map(g=>this._tiles[g].tileID);for(const g of c)g.posMatrix=this.transform.calculatePosMatrix(g.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(Me(this._source.type)){const r=U.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=r)return!0}return!1}setFeatureState(r,c,g){this._state.updateState(r=r||"_geojsonTileLayer",c,g)}removeFeatureState(r,c,g){this._state.removeFeatureState(r=r||"_geojsonTileLayer",c,g)}getFeatureState(r,c){return this._state.getState(r=r||"_geojsonTileLayer",c)}setDependencies(r,c,g){const y=this._tiles[r];y&&y.setDependencies(c,g)}reloadTilesForDependencies(r,c){for(const g in this._tiles)this._tiles[g].hasDependency(r,c)&&this._reloadTile(g,"reloading");this._cache.filter(g=>!g.hasDependency(r,c))}}function sr(b,r){const c=Math.abs(2*b.wrap)-+(b.wrap<0),g=Math.abs(2*r.wrap)-+(r.wrap<0);return b.overscaledZ-r.overscaledZ||g-c||r.canonical.y-b.canonical.y||r.canonical.x-b.canonical.x}function Me(b){return b==="raster"||b==="image"||b==="video"}he.maxOverzooming=10,he.maxUnderzooming=3;class xr{constructor(r,c){this.reset(r,c)}reset(r,c){this.points=r||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=o.ac(r,0,1);let c=1,g=this._distances[c];const y=r*this.paddedLength+this.padding;for(;g<y&&c<this._distances.length;)g=this._distances[++c];const x=c-1,T=this._distances[x],u=g-T,f=u>0?(y-T)/u:0;return this.points[x].mult(1-f).add(this.points[c].mult(f))}}function Gr(b,r){let c=!0;return b==="always"||b!=="never"&&r!=="never"||(c=!1),c}class ke{constructor(r,c,g){const y=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(r/g),this.yCellCount=Math.ceil(c/g);for(let T=0;T<this.xCellCount*this.yCellCount;T++)y.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=c,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,c,g,y,x){this._forEachCell(c,g,y,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(c),this.bboxes.push(g),this.bboxes.push(y),this.bboxes.push(x)}insertCircle(r,c,g,y){this._forEachCell(c-y,g-y,c+y,g+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(c),this.circles.push(g),this.circles.push(y)}_insertBoxCell(r,c,g,y,x,T){this.boxCells[x].push(T)}_insertCircleCell(r,c,g,y,x,T){this.circleCells[x].push(T)}_query(r,c,g,y,x,T,u){if(g<0||r>this.width||y<0||c>this.height)return[];const f=[];if(r<=0&&c<=0&&this.width<=g&&this.height<=y){if(x)return[{key:null,x1:r,y1:c,x2:g,y2:y}];for(let _=0;_<this.boxKeys.length;_++)f.push({key:this.boxKeys[_],x1:this.bboxes[4*_],y1:this.bboxes[4*_+1],x2:this.bboxes[4*_+2],y2:this.bboxes[4*_+3]});for(let _=0;_<this.circleKeys.length;_++){const F=this.circles[3*_],E=this.circles[3*_+1],k=this.circles[3*_+2];f.push({key:this.circleKeys[_],x1:F-k,y1:E-k,x2:F+k,y2:E+k})}}else this._forEachCell(r,c,g,y,this._queryCell,f,{hitTest:x,overlapMode:T,seenUids:{box:{},circle:{}}},u);return f}query(r,c,g,y){return this._query(r,c,g,y,!1,null)}hitTest(r,c,g,y,x,T){return this._query(r,c,g,y,!0,x,T).length>0}hitTestCircle(r,c,g,y,x){const T=r-g,u=r+g,f=c-g,_=c+g;if(u<0||T>this.width||_<0||f>this.height)return!1;const F=[];return this._forEachCell(T,f,u,_,this._queryCellCircle,F,{hitTest:!0,overlapMode:y,circle:{x:r,y:c,radius:g},seenUids:{box:{},circle:{}}},x),F.length>0}_queryCell(r,c,g,y,x,T,u,f){const{seenUids:_,hitTest:F,overlapMode:E}=u,k=this.boxCells[x];if(k!==null){const O=this.bboxes;for(const z of k)if(!_.box[z]){_.box[z]=!0;const H=4*z,X=this.boxKeys[z];if(r<=O[H+2]&&c<=O[H+3]&&g>=O[H+0]&&y>=O[H+1]&&(!f||f(X))&&(!F||!Gr(E,X.overlapMode))&&(T.push({key:X,x1:O[H],y1:O[H+1],x2:O[H+2],y2:O[H+3]}),F))return!0}}const D=this.circleCells[x];if(D!==null){const O=this.circles;for(const z of D)if(!_.circle[z]){_.circle[z]=!0;const H=3*z,X=this.circleKeys[z];if(this._circleAndRectCollide(O[H],O[H+1],O[H+2],r,c,g,y)&&(!f||f(X))&&(!F||!Gr(E,X.overlapMode))){const ot=O[H],Z=O[H+1],st=O[H+2];if(T.push({key:X,x1:ot-st,y1:Z-st,x2:ot+st,y2:Z+st}),F)return!0}}}return!1}_queryCellCircle(r,c,g,y,x,T,u,f){const{circle:_,seenUids:F,overlapMode:E}=u,k=this.boxCells[x];if(k!==null){const O=this.bboxes;for(const z of k)if(!F.box[z]){F.box[z]=!0;const H=4*z,X=this.boxKeys[z];if(this._circleAndRectCollide(_.x,_.y,_.radius,O[H+0],O[H+1],O[H+2],O[H+3])&&(!f||f(X))&&!Gr(E,X.overlapMode))return T.push(!0),!0}}const D=this.circleCells[x];if(D!==null){const O=this.circles;for(const z of D)if(!F.circle[z]){F.circle[z]=!0;const H=3*z,X=this.circleKeys[z];if(this._circlesCollide(O[H],O[H+1],O[H+2],_.x,_.y,_.radius)&&(!f||f(X))&&!Gr(E,X.overlapMode))return T.push(!0),!0}}}_forEachCell(r,c,g,y,x,T,u,f){const _=this._convertToXCellCoord(r),F=this._convertToYCellCoord(c),E=this._convertToXCellCoord(g),k=this._convertToYCellCoord(y);for(let D=_;D<=E;D++)for(let O=F;O<=k;O++)if(x.call(this,r,c,g,y,this.xCellCount*O+D,T,u,f))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,c,g,y,x,T){const u=y-r,f=x-c,_=g+T;return _*_>u*u+f*f}_circleAndRectCollide(r,c,g,y,x,T,u){const f=(T-y)/2,_=Math.abs(r-(y+f));if(_>f+g)return!1;const F=(u-x)/2,E=Math.abs(c-(x+F));if(E>F+g)return!1;if(_<=f||E<=F)return!0;const k=_-f,D=E-F;return k*k+D*D<=g*g}}function Fi(b,r,c,g,y){const x=o.F();return r?(o.J(x,x,[1/y,1/y,1]),c||o.ad(x,x,g.angle)):o.K(x,g.labelPlaneMatrix,b),x}function zr(b,r,c,g,y){if(r){const x=o.ae(b);return o.J(x,x,[y,y,1]),c||o.ad(x,x,-g.angle),x}return g.glCoordMatrix}function Dr(b,r,c){let g;c?(g=[b.x,b.y,c(b.x,b.y),1],o.af(g,g,r)):(g=[b.x,b.y,0,1],function(x,T,u){const f=T[0],_=T[1];x[0]=u[0]*f+u[4]*_+u[12],x[1]=u[1]*f+u[5]*_+u[13],x[3]=u[3]*f+u[7]*_+u[15]}(g,g,r));const y=g[3];return{point:new o.P(g[0]/y,g[1]/y),signedDistanceFromCamera:y,isOccluded:!1}}function pt(b,r){return .5+b/r*.5}function G(b,r){return b.x>=-r[0]&&b.x<=r[0]&&b.y>=-r[1]&&b.y<=r[1]}function q(b,r,c,g,y,x,T,u,f,_,F,E,k,D,O){const z=g?b.textSizeData:b.iconSizeData,H=o.ag(z,c.transform.zoom),X=[256/c.width*2+1,256/c.height*2+1],ot=g?b.text.dynamicLayoutVertexArray:b.icon.dynamicLayoutVertexArray;ot.clear();const Z=b.lineVertexArray,st=g?b.text.placedSymbolArray:b.icon.placedSymbolArray,mt=c.transform.width/c.transform.height;let gt=!1;for(let ut=0;ut<st.length;ut++){const ft=st.get(ut);if(ft.hidden||ft.writingMode===o.ah.vertical&&!gt){Ee(ft.numGlyphs,ot);continue}gt=!1;const zt=Dr(new o.P(ft.anchorX,ft.anchorY),r,O);if(!G(zt.point,X)){Ee(ft.numGlyphs,ot);continue}const Kt=pt(c.transform.cameraToCenterDistance,zt.signedDistanceFromCamera),Mt=o.ai(z,H,ft),ee=T?Mt/Kt:Mt*Kt,oe={getElevation:O,labelPlaneMatrix:y,lineVertexArray:Z,pitchWithMap:T,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:_,tileAnchorPoint:new o.P(ft.anchorX,ft.anchorY),unwrappedTileID:F,width:E,height:k,translation:D},_e=Pt(oe,ft,ee,!1,u,r,x,b.glyphOffsetArray,ot,mt,f);gt=_e.useVertical,(_e.notEnoughRoom||gt||_e.needsFlipping&&Pt(oe,ft,ee,!0,u,r,x,b.glyphOffsetArray,ot,mt,f).notEnoughRoom)&&Ee(ft.numGlyphs,ot)}g?b.text.dynamicLayoutVertexBuffer.updateData(ot):b.icon.dynamicLayoutVertexBuffer.updateData(ot)}function tt(b,r,c,g,y,x,T,u){const f=x.glyphStartIndex+x.numGlyphs,_=x.lineStartIndex,F=x.lineStartIndex+x.lineLength,E=r.getoffsetX(x.glyphStartIndex),k=r.getoffsetX(f-1),D=ae(b*E,c,g,y,x.segment,_,F,u,T);if(!D)return null;const O=ae(b*k,c,g,y,x.segment,_,F,u,T);return O?u.projectionCache.anyProjectionOccluded?null:{first:D,last:O}:null}function _t(b,r,c,g){return b===o.ah.horizontal&&Math.abs(c.y-r.y)>Math.abs(c.x-r.x)*g?{useVertical:!0}:(b===o.ah.vertical?r.y<c.y:r.x>c.x)?{needsFlipping:!0}:null}function Pt(b,r,c,g,y,x,T,u,f,_,F){const E=c/24,k=r.lineOffsetX*E,D=r.lineOffsetY*E;let O;if(r.numGlyphs>1){const z=r.glyphStartIndex+r.numGlyphs,H=r.lineStartIndex,X=r.lineStartIndex+r.lineLength,ot=tt(E,u,k,D,g,r,F,b);if(!ot)return{notEnoughRoom:!0};const Z=Dr(ot.first.point,T,b.getElevation).point,st=Dr(ot.last.point,T,b.getElevation).point;if(y&&!g){const mt=_t(r.writingMode,Z,st,_);if(mt)return mt}O=[ot.first];for(let mt=r.glyphStartIndex+1;mt<z-1;mt++)O.push(ae(E*u.getoffsetX(mt),k,D,g,r.segment,H,X,b,F));O.push(ot.last)}else{if(y&&!g){const H=Dr(b.tileAnchorPoint,x,b.getElevation).point,X=r.lineStartIndex+r.segment+1,ot=new o.P(b.lineVertexArray.getx(X),b.lineVertexArray.gety(X)),Z=Dr(ot,x,b.getElevation),st=Z.signedDistanceFromCamera>0?Z.point:function(gt,ut,ft,zt,Kt,Mt){return kt(gt,ut,ft,1,Kt,Mt)}(b.tileAnchorPoint,ot,H,0,x,b),mt=_t(r.writingMode,H,st,_);if(mt)return mt}const z=ae(E*u.getoffsetX(r.glyphStartIndex),k,D,g,r.segment,r.lineStartIndex,r.lineStartIndex+r.lineLength,b,F);if(!z||b.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};O=[z]}for(const z of O)o.aj(f,z.point,z.angle);return{}}function kt(b,r,c,g,y,x){const T=b.add(b.sub(r)._unit()),u=y!==void 0?Dr(T,y,x.getElevation).point:vt(T.x,T.y,x).point,f=c.sub(u);return c.add(f._mult(g/f.mag()))}function Ot(b,r,c){const g=r.projectionCache;if(g.projections[b])return g.projections[b];const y=new o.P(r.lineVertexArray.getx(b),r.lineVertexArray.gety(b)),x=vt(y.x,y.y,r);if(x.signedDistanceFromCamera>0)return g.projections[b]=x.point,g.anyProjectionOccluded=g.anyProjectionOccluded||x.isOccluded,x.point;const T=b-c.direction;return function(u,f,_,F,E){return kt(u,f,_,F,void 0,E)}(c.distanceFromAnchor===0?r.tileAnchorPoint:new o.P(r.lineVertexArray.getx(T),r.lineVertexArray.gety(T)),y,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,r)}function vt(b,r,c){const g=b+c.translation[0],y=r+c.translation[1];let x;return!c.pitchWithMap&&c.projection.useSpecialProjectionForSymbols?(x=c.projection.projectTileCoordinates(g,y,c.unwrappedTileID,c.getElevation),x.point.x=(.5*x.point.x+.5)*c.width,x.point.y=(.5*-x.point.y+.5)*c.height):(x=Dr(new o.P(g,y),c.labelPlaneMatrix,c.getElevation),x.isOccluded=!1),x}function jt(b,r,c){return b._unit()._perp()._mult(r*c)}function de(b,r,c,g,y,x,T,u,f){if(u.projectionCache.offsets[b])return u.projectionCache.offsets[b];const _=c.add(r);if(b+f.direction<g||b+f.direction>=y)return u.projectionCache.offsets[b]=_,_;const F=Ot(b+f.direction,u,f),E=jt(F.sub(c),T,f.direction),k=c.add(E),D=F.add(E);return u.projectionCache.offsets[b]=o.ak(x,_,k,D)||_,u.projectionCache.offsets[b]}function ae(b,r,c,g,y,x,T,u,f){const _=g?b-r:b+r;let F=_>0?1:-1,E=0;g&&(F*=-1,E=Math.PI),F<0&&(E+=Math.PI);let k,D=F>0?x+y:x+y+1;u.projectionCache.cachedAnchorPoint?k=u.projectionCache.cachedAnchorPoint:(k=vt(u.tileAnchorPoint.x,u.tileAnchorPoint.y,u).point,u.projectionCache.cachedAnchorPoint=k);let O,z,H=k,X=k,ot=0,Z=0;const st=Math.abs(_),mt=[];let gt;for(;ot+Z<=st;){if(D+=F,D<x||D>=T)return null;ot+=Z,X=H,z=O;const zt={absOffsetX:st,direction:F,distanceFromAnchor:ot,previousVertex:X};if(H=Ot(D,u,zt),c===0)mt.push(X),gt=H.sub(X);else{let Kt;const Mt=H.sub(X);Kt=Mt.mag()===0?jt(Ot(D+F,u,zt).sub(H),c,F):jt(Mt,c,F),z||(z=X.add(Kt)),O=de(D,Kt,H,x,T,z,c,u,zt),mt.push(z),gt=O.sub(z)}Z=gt.mag()}const ut=gt._mult((st-ot)/Z)._add(z||X),ft=E+Math.atan2(H.y-X.y,H.x-X.x);return mt.push(ut),{point:ut,angle:f?ft:0,path:mt}}const ne=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ee(b,r){for(let c=0;c<b;c++){const g=r.length;r.resize(g+4),r.float32.set(ne,3*g)}}const Re=100;class Fr{constructor(r,c,g=new ke(r.width+200,r.height+200,25),y=new ke(r.width+200,r.height+200,25)){this.transform=r,this.mapProjection=c,this.grid=g,this.ignoredGrid=y,this.pitchFactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+Re,this.screenBottomBoundary=r.height+Re,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,c,g,y,x,T,u,f,_,F,E){const k=r.anchorPointX+f[0],D=r.anchorPointY+f[1],O=this.projectAndGetPerspectiveRatio(y,k,D,x,F),z=this._projectCollisionBox(r,g,y,x,T,u,f,O,F,E),[H,X,ot,Z]=z.box;return this.mapProjection.useSpecialProjectionForSymbols&&(T?z.allPointsOccluded:this.mapProjection.isOccluded(k,D,x))||O.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(H,X,ot,Z)||c!=="always"&&this.grid.hitTest(H,X,ot,Z,c,_)?{box:[H,X,ot,Z],placeable:!1,offscreen:!1}:{box:[H,X,ot,Z],placeable:!0,offscreen:this.isOffscreen(H,X,ot,Z)}}placeCollisionCircles(r,c,g,y,x,T,u,f,_,F,E,k,D,O,z,H){const X=[],ot=new o.P(c.anchorX,c.anchorY),Z=this.getPerspectiveRatio(T,ot.x,ot.y,u,H),st=(E?x/Z:x*Z)/o.ap,mt={getElevation:H,labelPlaneMatrix:f,lineVertexArray:g,pitchWithMap:E,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:ot,unwrappedTileID:u,width:this.transform.width,height:this.transform.height,translation:z},gt=tt(st,y,c.lineOffsetX*st,c.lineOffsetY*st,!1,c,!1,mt);let ut=!1,ft=!1,zt=!0;if(gt){const Kt=.5*D*Z+O,Mt=new o.P(-100,-100),ee=new o.P(this.screenRightBoundary,this.screenBottomBoundary),oe=new xr,_e=gt.first,re=gt.last;let ye=[];for(let He=_e.path.length-1;He>=1;He--)ye.push(_e.path[He]);for(let He=1;He<re.path.length;He++)ye.push(re.path[He]);const Oe=2.5*Kt;if(_){const He=this.projectPathToScreenSpace(ye,mt,_);ye=He.some(rr=>rr.signedDistanceFromCamera<=0)?[]:He.map(rr=>rr.point)}let hr=[];if(ye.length>0){const He=ye[0].clone(),rr=ye[0].clone();for(let _r=1;_r<ye.length;_r++)He.x=Math.min(He.x,ye[_r].x),He.y=Math.min(He.y,ye[_r].y),rr.x=Math.max(rr.x,ye[_r].x),rr.y=Math.max(rr.y,ye[_r].y);hr=He.x>=Mt.x&&rr.x<=ee.x&&He.y>=Mt.y&&rr.y<=ee.y?[ye]:rr.x<Mt.x||He.x>ee.x||rr.y<Mt.y||He.y>ee.y?[]:o.al([ye],Mt.x,Mt.y,ee.x,ee.y)}for(const He of hr){oe.reset(He,.25*Kt);let rr=0;rr=oe.length<=.5*Kt?1:Math.ceil(oe.paddedLength/Oe)+1;for(let _r=0;_r<rr;_r++){const mr=_r/Math.max(rr-1,1),ei=oe.lerp(mr),Rr=ei.x+Re,Xr=ei.y+Re;X.push(Rr,Xr,Kt,0);const oi=Rr-Kt,Qr=Xr-Kt,Ai=Rr+Kt,Li=Xr+Kt;if(zt=zt&&this.isOffscreen(oi,Qr,Ai,Li),ft=ft||this.isInsideGrid(oi,Qr,Ai,Li),r!=="always"&&this.grid.hitTestCircle(Rr,Xr,Kt,r,k)&&(ut=!0,!F))return{circles:[],offscreen:!1,collisionDetected:ut}}}}return{circles:!F&&ut||!ft||Z<this.perspectiveRatioCutoff?[]:X,offscreen:zt,collisionDetected:ut}}projectPathToScreenSpace(r,c,g){return r.map(y=>Dr(y,g,c.getElevation))}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let g=1/0,y=1/0,x=-1/0,T=-1/0;for(const F of r){const E=new o.P(F.x+Re,F.y+Re);g=Math.min(g,E.x),y=Math.min(y,E.y),x=Math.max(x,E.x),T=Math.max(T,E.y),c.push(E)}const u=this.grid.query(g,y,x,T).concat(this.ignoredGrid.query(g,y,x,T)),f={},_={};for(const F of u){const E=F.key;if(f[E.bucketInstanceId]===void 0&&(f[E.bucketInstanceId]={}),f[E.bucketInstanceId][E.featureIndex])continue;const k=[new o.P(F.x1,F.y1),new o.P(F.x2,F.y1),new o.P(F.x2,F.y2),new o.P(F.x1,F.y2)];o.am(c,k)&&(f[E.bucketInstanceId][E.featureIndex]=!0,_[E.bucketInstanceId]===void 0&&(_[E.bucketInstanceId]=[]),_[E.bucketInstanceId].push(E.featureIndex))}return _}insertCollisionBox(r,c,g,y,x,T){(g?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:x,collisionGroupID:T,overlapMode:c},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,c,g,y,x,T){const u=g?this.ignoredGrid:this.grid,f={bucketInstanceId:y,featureIndex:x,collisionGroupID:T,overlapMode:c};for(let _=0;_<r.length;_+=4)u.insertCircle(f,r[_],r[_+1],r[_+2])}projectAndGetPerspectiveRatio(r,c,g,y,x){const T=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(c,g,y,x):Dr(new o.P(c,g),r,x);return{point:new o.P((T.point.x+1)/2*this.transform.width+Re,(1-T.point.y)/2*this.transform.height+Re),perspectiveRatio:.5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5,isOccluded:T.isOccluded,signedDistanceFromCamera:T.signedDistanceFromCamera}}getPerspectiveRatio(r,c,g,y,x){const T=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(c,g,y,x):Dr(new o.P(c,g),r,x);return .5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5}isOffscreen(r,c,g,y){return g<Re||r>=this.screenRightBoundary||y<Re||c>this.screenBottomBoundary}isInsideGrid(r,c,g,y){return g>=0&&r<this.gridRightBoundary&&y>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const r=o.an([]);return o.H(r,r,[-100,-100,0]),r}_projectCollisionBox(r,c,g,y,x,T,u,f,_,F){const E=c*f.perspectiveRatio;let k=new o.P(1,0),D=new o.P(0,1);const O=new o.P(r.anchorPointX+u[0],r.anchorPointY+u[1]);if(T&&!x){const Kt=this.projectAndGetPerspectiveRatio(g,O.x+1,O.y,y,_).point.sub(f.point).unit(),Mt=Math.atan(Kt.y/Kt.x)+(Kt.x<0?Math.PI:0),ee=Math.sin(Mt),oe=Math.cos(Mt);k=new o.P(oe,ee),D=new o.P(-ee,oe)}else if(!T&&x){const Kt=-this.transform.angle,Mt=Math.sin(Kt),ee=Math.cos(Kt);k=new o.P(ee,Mt),D=new o.P(-Mt,ee)}let z=f.point,H=E;if(x){z=O;const Kt=this.transform.zoom-Math.floor(this.transform.zoom);H=Math.pow(2,-Kt),H*=this.mapProjection.getPitchedTextCorrection(this.transform,O,y),F||(H*=o.ac(.5+f.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}F&&(z=z.add(k.mult(F.x*H)).add(D.mult(F.y*H)));const X=r.x1*H,ot=r.x2*H,Z=(X+ot)/2,st=r.y1*H,mt=r.y2*H,gt=(st+mt)/2,ut=[{offsetX:X,offsetY:st},{offsetX:Z,offsetY:st},{offsetX:ot,offsetY:st},{offsetX:ot,offsetY:gt},{offsetX:ot,offsetY:mt},{offsetX:Z,offsetY:mt},{offsetX:X,offsetY:mt},{offsetX:X,offsetY:gt}];let ft=[];for(const{offsetX:Kt,offsetY:Mt}of ut)ft.push(new o.P(z.x+k.x*Kt+D.x*Mt,z.y+k.y*Kt+D.y*Mt));let zt=!1;if(x){const Kt=ft.map(Mt=>this.projectAndGetPerspectiveRatio(g,Mt.x,Mt.y,y,_));zt=Kt.some(Mt=>!Mt.isOccluded),ft=Kt.map(Mt=>Mt.point)}else zt=!0;return{box:o.ao(ft),allPointsOccluded:!zt}}}function ar(b,r,c){return r*(o.W/(b.tileSize*Math.pow(2,c-b.tileID.overscaledZ)))}class Br{constructor(r,c,g,y){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?c:-c))):y&&g?1:0,this.placed=g}isHidden(){return this.opacity===0&&!this.placed}}class Ur{constructor(r,c,g,y,x){this.text=new Br(r?r.text:null,c,g,x),this.icon=new Br(r?r.icon:null,c,y,x)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ir{constructor(r,c,g){this.text=r,this.icon=c,this.skipFade=g}}class Zr{constructor(){this.invProjMatrix=o.F(),this.viewportMatrix=o.F(),this.circles=[]}}class cr{constructor(r,c,g,y,x){this.bucketInstanceId=r,this.featureIndex=c,this.sourceLayerIndex=g,this.bucketIndex=y,this.tileID=x}}class jr{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const c=++this.maxGroupID;this.collisionGroups[r]={ID:c,predicate:g=>g.collisionGroupID===c}}return this.collisionGroups[r]}}function ni(b,r,c,g,y){const{horizontalAlign:x,verticalAlign:T}=o.au(b);return new o.P(-(x-.5)*r+g[0]*y,-(T-.5)*c+g[1]*y)}class zi{constructor(r,c,g,y,x,T){this.transform=r.clone(),this.terrain=g,this.collisionIndex=new Fr(this.transform,c),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=y,this.retainedQueryData={},this.collisionGroups=new jr(x),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=T,T&&(T.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){const c=this.terrain;return c?(g,y)=>c.getElevation(r,g,y):null}getBucketParts(r,c,g,y){const x=g.getBucket(c),T=g.latestFeatureIndex;if(!x||!T||c.id!==x.layerIds[0])return;const u=g.collisionBoxArray,f=x.layers[0].layout,_=x.layers[0].paint,F=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),E=g.tileSize/o.W,k=g.tileID.toUnwrapped(),D=this.transform.calculatePosMatrix(k),O=f.get("text-pitch-alignment")==="map",z=f.get("text-rotation-alignment")==="map",H=ar(g,1,this.transform.zoom),X=this.collisionIndex.mapProjection.translatePosition(this.transform,g,_.get("text-translate"),_.get("text-translate-anchor")),ot=this.collisionIndex.mapProjection.translatePosition(this.transform,g,_.get("icon-translate"),_.get("icon-translate-anchor")),Z=Fi(D,O,z,this.transform,H);let st=null;if(O){const gt=zr(D,O,z,this.transform,H);st=o.K([],this.transform.labelPlaneMatrix,gt)}this.retainedQueryData[x.bucketInstanceId]=new cr(x.bucketInstanceId,T,x.sourceLayerIndex,x.index,g.tileID);const mt={bucket:x,layout:f,translationText:X,translationIcon:ot,posMatrix:D,unwrappedTileID:k,textLabelPlaneMatrix:Z,labelToScreenMatrix:st,scale:F,textPixelRatio:E,holdingForFade:g.holdingForFade(),collisionBoxArray:u,partiallyEvaluatedTextSize:o.ag(x.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(y)for(const gt of x.sortKeyRanges){const{sortKey:ut,symbolInstanceStart:ft,symbolInstanceEnd:zt}=gt;r.push({sortKey:ut,symbolInstanceStart:ft,symbolInstanceEnd:zt,parameters:mt})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:mt})}attemptAnchorPlacement(r,c,g,y,x,T,u,f,_,F,E,k,D,O,z,H,X,ot,Z){const st=o.aq[r.textAnchor],mt=[r.textOffset0,r.textOffset1],gt=ni(st,g,y,mt,x),ut=this.collisionIndex.placeCollisionBox(c,k,f,_,F,u,T,H,E.predicate,Z,gt);if((!ot||this.collisionIndex.placeCollisionBox(ot,k,f,_,F,u,T,X,E.predicate,Z,gt).placeable)&&ut.placeable){let ft;if(this.prevPlacement&&this.prevPlacement.variableOffsets[D.crossTileID]&&this.prevPlacement.placements[D.crossTileID]&&this.prevPlacement.placements[D.crossTileID].text&&(ft=this.prevPlacement.variableOffsets[D.crossTileID].anchor),D.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[D.crossTileID]={textOffset:mt,width:g,height:y,anchor:st,textBoxScale:x,prevAnchor:ft},this.markUsedJustification(O,st,D,z),O.allowVerticalPlacement&&(this.markUsedOrientation(O,z,D),this.placedOrientations[D.crossTileID]=z),{shift:gt,placedGlyphBoxes:ut}}}placeLayerBucketPart(r,c,g){const{bucket:y,layout:x,translationText:T,translationIcon:u,posMatrix:f,unwrappedTileID:_,textLabelPlaneMatrix:F,labelToScreenMatrix:E,textPixelRatio:k,holdingForFade:D,collisionBoxArray:O,partiallyEvaluatedTextSize:z,collisionGroup:H}=r.parameters,X=x.get("text-optional"),ot=x.get("icon-optional"),Z=o.ar(x,"text-overlap","text-allow-overlap"),st=Z==="always",mt=o.ar(x,"icon-overlap","icon-allow-overlap"),gt=mt==="always",ut=x.get("text-rotation-alignment")==="map",ft=x.get("text-pitch-alignment")==="map",zt=x.get("icon-text-fit")!=="none",Kt=x.get("symbol-z-order")==="viewport-y",Mt=st&&(gt||!y.hasIconData()||ot),ee=gt&&(st||!y.hasTextData()||X);!y.collisionArrays&&O&&y.deserializeCollisionBoxes(O);const oe=this._getTerrainElevationFunc(this.retainedQueryData[y.bucketInstanceId].tileID),_e=(re,ye,Oe)=>{var hr,He;if(c[re.crossTileID])return;if(D)return void(this.placements[re.crossTileID]=new Ir(!1,!1,!1));let rr=!1,_r=!1,mr=!0,ei=null,Rr={box:null,placeable:!1,offscreen:null},Xr={box:null,placeable:!1,offscreen:null},oi=null,Qr=null,Ai=null,Li=0,Ei=0,Gi=0;ye.textFeatureIndex?Li=ye.textFeatureIndex:re.useRuntimeCollisionCircles&&(Li=re.featureIndex),ye.verticalTextFeatureIndex&&(Ei=ye.verticalTextFeatureIndex);const Wi=ye.textBox;if(Wi){const bi=Hr=>{let hn=o.ah.horizontal;if(y.allowVerticalPlacement&&!Hr&&this.prevPlacement){const rn=this.prevPlacement.placedOrientations[re.crossTileID];rn&&(this.placedOrientations[re.crossTileID]=rn,hn=rn,this.markUsedOrientation(y,hn,re))}return hn},xn=(Hr,hn)=>{if(y.allowVerticalPlacement&&re.numVerticalGlyphVertices>0&&ye.verticalTextBox){for(const rn of y.writingModes)if(rn===o.ah.vertical?(Rr=hn(),Xr=Rr):Rr=Hr(),Rr&&Rr.placeable)break}else Rr=Hr()},As=re.textAnchorOffsetStartIndex,ls=re.textAnchorOffsetEndIndex;if(ls===As){const Hr=(hn,rn)=>{const xi=this.collisionIndex.placeCollisionBox(hn,Z,k,f,_,ft,ut,T,H.predicate,oe);return xi&&xi.placeable&&(this.markUsedOrientation(y,rn,re),this.placedOrientations[re.crossTileID]=rn),xi};xn(()=>Hr(Wi,o.ah.horizontal),()=>{const hn=ye.verticalTextBox;return y.allowVerticalPlacement&&re.numVerticalGlyphVertices>0&&hn?Hr(hn,o.ah.vertical):{box:null,offscreen:null}}),bi(Rr&&Rr.placeable)}else{let Hr=o.aq[(He=(hr=this.prevPlacement)===null||hr===void 0?void 0:hr.variableOffsets[re.crossTileID])===null||He===void 0?void 0:He.anchor];const hn=(xi,Da,Yo)=>{const Ni=xi.x2-xi.x1,Ss=xi.y2-xi.y1,Na=re.textBoxScale,Oa=zt&&mt==="never"?Da:null;let Ra=null,fl=Z==="never"?1:2,ec="never";Hr&&fl++;for(let MA=0;MA<fl;MA++){for(let gl=As;gl<ls;gl++){const Jo=y.textAnchorOffsets.get(gl);if(Hr&&Jo.textAnchor!==Hr)continue;const ma=this.attemptAnchorPlacement(Jo,xi,Ni,Ss,Na,ut,ft,k,f,_,H,ec,re,y,Yo,T,u,Oa,oe);if(ma&&(Ra=ma.placedGlyphBoxes,Ra&&Ra.placeable))return rr=!0,ei=ma.shift,Ra}Hr?Hr=null:ec=Z}return g&&!Ra&&(Ra={box:this.collisionIndex.placeCollisionBox(Wi,"always",k,f,_,ft,ut,T,H.predicate,oe,new o.P(0,0)).box,offscreen:!1,placeable:!1}),Ra};xn(()=>hn(Wi,ye.iconBox,o.ah.horizontal),()=>{const xi=ye.verticalTextBox;return y.allowVerticalPlacement&&(!Rr||!Rr.placeable)&&re.numVerticalGlyphVertices>0&&xi?hn(xi,ye.verticalIconBox,o.ah.vertical):{box:null,occluded:!0,offscreen:null}}),Rr&&(rr=Rr.placeable,mr=Rr.offscreen);const rn=bi(Rr&&Rr.placeable);if(!rr&&this.prevPlacement){const xi=this.prevPlacement.variableOffsets[re.crossTileID];xi&&(this.variableOffsets[re.crossTileID]=xi,this.markUsedJustification(y,xi.anchor,re,rn))}}}if(oi=Rr,rr=oi&&oi.placeable,mr=oi&&oi.offscreen,re.useRuntimeCollisionCircles){const bi=y.text.placedSymbolArray.get(re.centerJustifiedTextSymbolIndex),xn=o.ai(y.textSizeData,z,bi),As=x.get("text-padding");Qr=this.collisionIndex.placeCollisionCircles(Z,bi,y.lineVertexArray,y.glyphOffsetArray,xn,f,_,F,E,g,ft,H.predicate,re.collisionCircleDiameter,As,T,oe),Qr.circles.length&&Qr.collisionDetected&&!g&&o.w("Collisions detected, but collision boxes are not shown"),rr=st||Qr.circles.length>0&&!Qr.collisionDetected,mr=mr&&Qr.offscreen}if(ye.iconFeatureIndex&&(Gi=ye.iconFeatureIndex),ye.iconBox){const bi=xn=>this.collisionIndex.placeCollisionBox(xn,mt,k,f,_,ft,ut,u,H.predicate,oe,zt&&ei?ei:void 0);Xr&&Xr.placeable&&ye.verticalIconBox?(Ai=bi(ye.verticalIconBox),_r=Ai.placeable):(Ai=bi(ye.iconBox),_r=Ai.placeable),mr=mr&&Ai.offscreen}const un=X||re.numHorizontalGlyphVertices===0&&re.numVerticalGlyphVertices===0,os=ot||re.numIconVertices===0;un||os?os?un||(_r=_r&&rr):rr=_r&&rr:_r=rr=_r&&rr;const Xi=_r&&Ai.placeable;if(rr&&oi.placeable&&this.collisionIndex.insertCollisionBox(oi.box,Z,x.get("text-ignore-placement"),y.bucketInstanceId,Xr&&Xr.placeable&&Ei?Ei:Li,H.ID),Xi&&this.collisionIndex.insertCollisionBox(Ai.box,mt,x.get("icon-ignore-placement"),y.bucketInstanceId,Gi,H.ID),Qr&&rr&&this.collisionIndex.insertCollisionCircles(Qr.circles,Z,x.get("text-ignore-placement"),y.bucketInstanceId,Li,H.ID),g&&this.storeCollisionData(y.bucketInstanceId,Oe,ye,oi,Ai,Qr),re.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(y.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[re.crossTileID]=new Ir(rr||Mt,_r||ee,mr||y.justReloaded),c[re.crossTileID]=!0};if(Kt){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const re=y.getSortedSymbolIndexes(this.transform.angle);for(let ye=re.length-1;ye>=0;--ye){const Oe=re[ye];_e(y.symbolInstances.get(Oe),y.collisionArrays[Oe],Oe)}}else for(let re=r.symbolInstanceStart;re<r.symbolInstanceEnd;re++)_e(y.symbolInstances.get(re),y.collisionArrays[re],re);if(g&&y.bucketInstanceId in this.collisionCircleArrays){const re=this.collisionCircleArrays[y.bucketInstanceId];o.as(re.invProjMatrix,f),re.viewportMatrix=this.collisionIndex.getViewportMatrix()}y.justReloaded=!1}storeCollisionData(r,c,g,y,x,T){if(g.textBox||g.iconBox){let u,f;this.collisionBoxArrays.has(r)?u=this.collisionBoxArrays.get(r):(u=new Map,this.collisionBoxArrays.set(r,u)),u.has(c)?f=u.get(c):(f={text:null,icon:null},u.set(c,f)),g.textBox&&(f.text=y.box),g.iconBox&&(f.icon=x.box)}if(T){let u=this.collisionCircleArrays[r];u===void 0&&(u=this.collisionCircleArrays[r]=new Zr);for(let f=0;f<T.circles.length;f+=4)u.circles.push(T.circles[f+0]),u.circles.push(T.circles[f+1]),u.circles.push(T.circles[f+2]),u.circles.push(T.collisionDetected?1:0)}}markUsedJustification(r,c,g,y){let x;x=y===o.ah.vertical?g.verticalPlacedTextSymbolIndex:{left:g.leftJustifiedTextSymbolIndex,center:g.centerJustifiedTextSymbolIndex,right:g.rightJustifiedTextSymbolIndex}[o.at(c)];const T=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex,g.verticalPlacedTextSymbolIndex];for(const u of T)u>=0&&(r.text.placedSymbolArray.get(u).crossTileID=x>=0&&u!==x?0:g.crossTileID)}markUsedOrientation(r,c,g){const y=c===o.ah.horizontal||c===o.ah.horizontalOnly?c:0,x=c===o.ah.vertical?c:0,T=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex];for(const u of T)r.text.placedSymbolArray.get(u).placedOrientation=y;g.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(g.verticalPlacedTextSymbolIndex).placedOrientation=x)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let g=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const y=c?c.symbolFadeChange(r):1,x=c?c.opacities:{},T=c?c.variableOffsets:{},u=c?c.placedOrientations:{};for(const f in this.placements){const _=this.placements[f],F=x[f];F?(this.opacities[f]=new Ur(F,y,_.text,_.icon),g=g||_.text!==F.text.placed||_.icon!==F.icon.placed):(this.opacities[f]=new Ur(null,y,_.text,_.icon,_.skipFade),g=g||_.text||_.icon)}for(const f in x){const _=x[f];if(!this.opacities[f]){const F=new Ur(_,y,!1,!1);F.isHidden()||(this.opacities[f]=F,g=g||_.text.placed||_.icon.placed)}}for(const f in T)this.variableOffsets[f]||!this.opacities[f]||this.opacities[f].isHidden()||(this.variableOffsets[f]=T[f]);for(const f in u)this.placedOrientations[f]||!this.opacities[f]||this.opacities[f].isHidden()||(this.placedOrientations[f]=u[f]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");g?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:r)}updateLayerOpacities(r,c){const g={};for(const y of c){const x=y.getBucket(r);x&&y.latestFeatureIndex&&r.id===x.layerIds[0]&&this.updateBucketOpacities(x,y.tileID,g,y.collisionBoxArray)}}updateBucketOpacities(r,c,g,y){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const x=r.layers[0],T=x.layout,u=new Ur(null,0,!1,!1,!0),f=T.get("text-allow-overlap"),_=T.get("icon-allow-overlap"),F=x._unevaluatedLayout.hasValue("text-variable-anchor")||x._unevaluatedLayout.hasValue("text-variable-anchor-offset"),E=T.get("text-rotation-alignment")==="map",k=T.get("text-pitch-alignment")==="map",D=T.get("icon-text-fit")!=="none",O=new Ur(null,0,f&&(_||!r.hasIconData()||T.get("icon-optional")),_&&(f||!r.hasTextData()||T.get("text-optional")),!0);!r.collisionArrays&&y&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(y);const z=(X,ot,Z)=>{for(let st=0;st<ot/4;st++)X.opacityVertexArray.emplaceBack(Z);X.hasVisibleVertices=X.hasVisibleVertices||Z!==Si},H=this.collisionBoxArrays.get(r.bucketInstanceId);for(let X=0;X<r.symbolInstances.length;X++){const ot=r.symbolInstances.get(X),{numHorizontalGlyphVertices:Z,numVerticalGlyphVertices:st,crossTileID:mt}=ot;let gt=this.opacities[mt];g[mt]?gt=u:gt||(gt=O,this.opacities[mt]=gt),g[mt]=!0;const ut=ot.numIconVertices>0,ft=this.placedOrientations[ot.crossTileID],zt=ft===o.ah.vertical,Kt=ft===o.ah.horizontal||ft===o.ah.horizontalOnly;if(Z>0||st>0){const ee=li(gt.text);z(r.text,Z,zt?Si:ee),z(r.text,st,Kt?Si:ee);const oe=gt.text.isHidden();[ot.rightJustifiedTextSymbolIndex,ot.centerJustifiedTextSymbolIndex,ot.leftJustifiedTextSymbolIndex].forEach(ye=>{ye>=0&&(r.text.placedSymbolArray.get(ye).hidden=oe||zt?1:0)}),ot.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(ot.verticalPlacedTextSymbolIndex).hidden=oe||Kt?1:0);const _e=this.variableOffsets[ot.crossTileID];_e&&this.markUsedJustification(r,_e.anchor,ot,ft);const re=this.placedOrientations[ot.crossTileID];re&&(this.markUsedJustification(r,"left",ot,re),this.markUsedOrientation(r,re,ot))}if(ut){const ee=li(gt.icon),oe=!(D&&ot.verticalPlacedIconSymbolIndex&&zt);ot.placedIconSymbolIndex>=0&&(z(r.icon,ot.numIconVertices,oe?ee:Si),r.icon.placedSymbolArray.get(ot.placedIconSymbolIndex).hidden=gt.icon.isHidden()),ot.verticalPlacedIconSymbolIndex>=0&&(z(r.icon,ot.numVerticalIconVertices,oe?Si:ee),r.icon.placedSymbolArray.get(ot.verticalPlacedIconSymbolIndex).hidden=gt.icon.isHidden())}const Mt=H&&H.has(X)?H.get(X):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const ee=r.collisionArrays[X];if(ee){let oe=new o.P(0,0);if(ee.textBox||ee.verticalTextBox){let _e=!0;if(F){const re=this.variableOffsets[mt];re?(oe=ni(re.anchor,re.width,re.height,re.textOffset,re.textBoxScale),E&&oe._rotate(k?this.transform.angle:-this.transform.angle)):_e=!1}if(ee.textBox||ee.verticalTextBox){let re;ee.textBox&&(re=zt),ee.verticalTextBox&&(re=Kt),Ut(r.textCollisionBox.collisionVertexArray,gt.text.placed,!_e||re,Mt.text,oe.x,oe.y)}}if(ee.iconBox||ee.verticalIconBox){const _e=!!(!Kt&&ee.verticalIconBox);let re;ee.iconBox&&(re=_e),ee.verticalIconBox&&(re=!_e),Ut(r.iconCollisionBox.collisionVertexArray,gt.icon.placed,re,Mt.icon,D?oe.x:0,D?oe.y:0)}}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const X=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=X.invProjMatrix,r.placementViewportMatrix=X.viewportMatrix,r.collisionCircleArray=X.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,c){const g=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*g>r}setStale(){this.stale=!0}}function Ut(b,r,c,g,y,x){g&&g.length!==0||(g=[0,0,0,0]);const T=g[0]-Re,u=g[1]-Re,f=g[2]-Re,_=g[3]-Re;b.emplaceBack(r?1:0,c?1:0,y||0,x||0,T,u),b.emplaceBack(r?1:0,c?1:0,y||0,x||0,f,u),b.emplaceBack(r?1:0,c?1:0,y||0,x||0,f,_),b.emplaceBack(r?1:0,c?1:0,y||0,x||0,T,_)}const Fe=Math.pow(2,25),xe=Math.pow(2,24),Kr=Math.pow(2,17),vr=Math.pow(2,16),Ji=Math.pow(2,9),si=Math.pow(2,8),yi=Math.pow(2,1);function li(b){if(b.opacity===0&&!b.placed)return 0;if(b.opacity===1&&b.placed)return 4294967295;const r=b.placed?1:0,c=Math.floor(127*b.opacity);return c*Fe+r*xe+c*Kr+r*vr+c*Ji+r*si+c*yi+r}const Si=0;function tn(){return{isOccluded:(b,r,c)=>!1,getPitchedTextCorrection:(b,r,c)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(b,r,c,g){throw new Error("Not implemented.")},translatePosition:(b,r,c,g)=>function(y,x,T,u,f=!1){if(!T[0]&&!T[1])return[0,0];const _=f?u==="map"?y.angle:0:u==="viewport"?-y.angle:0;if(_){const F=Math.sin(_),E=Math.cos(_);T=[T[0]*E-T[1]*F,T[0]*F+T[1]*E]}return[f?T[0]:ar(x,T[0],y.zoom),f?T[1]:ar(x,T[1],y.zoom)]}(b,r,c,g),getCircleRadiusCorrection:b=>1}}class Ln{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,c,g,y,x){const T=this._bucketParts;for(;this._currentTileIndex<r.length;)if(c.getBucketParts(T,y,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort((u,f)=>u.sortKey-f.sortKey));this._currentPartIndex<T.length;)if(c.placeLayerBucketPart(T[this._currentPartIndex],this._seenCrossTileIDs,g),this._currentPartIndex++,x())return!0;return!1}}class Vl{constructor(r,c,g,y,x,T,u,f){this.placement=new zi(r,tn(),c,T,u,f),this._currentPlacementIndex=g.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(r,c,g){const y=U.now(),x=()=>!this._forceFullPlacement&&U.now()-y>2;for(;this._currentPlacementIndex>=0;){const T=c[r[this._currentPlacementIndex]],u=this.placement.collisionIndex.transform.zoom;if(T.type==="symbol"&&(!T.minzoom||T.minzoom<=u)&&(!T.maxzoom||T.maxzoom>u)){if(this._inProgressLayer||(this._inProgressLayer=new Ln(T)),this._inProgressLayer.continuePlacement(g[T.source],this.placement,this._showCollisionBoxes,T,x))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const Rn=512/o.W/2;class ki{constructor(r,c,g){this.tileID=r,this.bucketInstanceId=g,this._symbolsByKey={};const y=new Map;for(let x=0;x<c.length;x++){const T=c.get(x),u=T.key,f=y.get(u);f?f.push(T):y.set(u,[T])}for(const[x,T]of y){const u={positions:T.map(f=>({x:Math.floor(f.anchorX*Rn),y:Math.floor(f.anchorY*Rn)})),crossTileIDs:T.map(f=>f.crossTileID)};if(u.positions.length>128){const f=new o.av(u.positions.length,16,Uint16Array);for(const{x:_,y:F}of u.positions)f.add(_,F);f.finish(),delete u.positions,u.index=f}this._symbolsByKey[x]=u}}getScaledCoordinates(r,c){const{x:g,y,z:x}=this.tileID.canonical,{x:T,y:u,z:f}=c.canonical,_=Rn/Math.pow(2,f-x),F=(u*o.W+r.anchorY)*_,E=y*o.W*Rn;return{x:Math.floor((T*o.W+r.anchorX)*_-g*o.W*Rn),y:Math.floor(F-E)}}findMatches(r,c,g){const y=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let x=0;x<r.length;x++){const T=r.get(x);if(T.crossTileID)continue;const u=this._symbolsByKey[T.key];if(!u)continue;const f=this.getScaledCoordinates(T,c);if(u.index){const _=u.index.range(f.x-y,f.y-y,f.x+y,f.y+y).sort();for(const F of _){const E=u.crossTileIDs[F];if(!g[E]){g[E]=!0,T.crossTileID=E;break}}}else if(u.positions)for(let _=0;_<u.positions.length;_++){const F=u.positions[_],E=u.crossTileIDs[_];if(Math.abs(F.x-f.x)<=y&&Math.abs(F.y-f.y)<=y&&!g[E]){g[E]=!0,T.crossTileID=E;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class vi{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class na{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const c=Math.round((r-this.lng)/360);if(c!==0)for(const g in this.indexes){const y=this.indexes[g],x={};for(const T in y){const u=y[T];u.tileID=u.tileID.unwrapTo(u.tileID.wrap+c),x[u.tileID.key]=u}this.indexes[g]=x}this.lng=r}addBucket(r,c,g){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let x=0;x<c.symbolInstances.length;x++)c.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const y=this.usedCrossTileIDs[r.overscaledZ];for(const x in this.indexes){const T=this.indexes[x];if(Number(x)>r.overscaledZ)for(const u in T){const f=T[u];f.tileID.isChildOf(r)&&f.findMatches(c.symbolInstances,r,y)}else{const u=T[r.scaledTo(Number(x)).key];u&&u.findMatches(c.symbolInstances,r,y)}}for(let x=0;x<c.symbolInstances.length;x++){const T=c.symbolInstances.get(x);T.crossTileID||(T.crossTileID=g.generate(),y[T.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new ki(r,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(r,c){for(const g of c.getCrossTileIDsLists())for(const y of g)delete this.usedCrossTileIDs[r][y]}removeStaleBuckets(r){let c=!1;for(const g in this.indexes){const y=this.indexes[g];for(const x in y)r[y[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,y[x]),delete y[x],c=!0)}return c}}class wi{constructor(){this.layerIndexes={},this.crossTileIDs=new vi,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,c,g){let y=this.layerIndexes[r.id];y===void 0&&(y=this.layerIndexes[r.id]=new na);let x=!1;const T={};y.handleWrapJump(g);for(const u of c){const f=u.getBucket(r);f&&r.id===f.layerIds[0]&&(f.bucketInstanceId||(f.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(u.tileID,f,this.crossTileIDs)&&(x=!0),T[f.bucketInstanceId]=!0)}return y.removeStaleBuckets(T)&&(x=!0),x}pruneUnusedLayers(r){const c={};r.forEach(g=>{c[g]=!0});for(const g in this.layerIndexes)c[g]||delete this.layerIndexes[g]}}const sa=(b,r)=>o.t(b,r&&r.filter(c=>c.identifier!=="source.canvas")),Qn=o.aw();class hA extends o.E{constructor(r,c={}){super(),this._rtlPluginLoaded=()=>{for(const g in this.sourceCaches){const y=this.sourceCaches[g].getSource().type;y!=="vector"&&y!=="geojson"||this.sourceCaches[g].reload()}},this.map=r,this.dispatcher=new ie(Ht(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(g,y)=>this.getGlyphs(g,y)),this.dispatcher.registerMessageHandler("GI",(g,y)=>this.getImages(g,y)),this.imageManager=new bt,this.imageManager.setEventedParent(this),this.glyphManager=new Yt(r._requestManager,c.localIdeographFontFamily),this.lineAtlas=new me(256,512),this.crossTileSymbolIndex=new wi,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",o.ay()),Xe().on(wr,this._rtlPluginLoaded),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const y=this.sourceCaches[g.sourceId];if(!y)return;const x=y.getSource();if(x&&x.vectorLayerIds)for(const T in this._layers){const u=this._layers[T];u.source===x.id&&this._validateLayer(u)}})}loadURL(r,c={},g){this.fire(new o.k("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const y=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController,o.h(y,this._loadStyleRequest).then(x=>{this._loadStyleRequest=null,this._load(x.data,c,g)}).catch(x=>{this._loadStyleRequest=null,x&&this.fire(new o.j(x))})}loadJSON(r,c={},g){this.fire(new o.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,U.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(r,c,g)}).catch(()=>{})}loadEmpty(){this.fire(new o.k("dataloading",{dataType:"style"})),this._load(Qn,{validate:!1})}_load(r,c,g){var y;const x=c.transformStyle?c.transformStyle(g,r):r;if(!c.validate||!sa(this,o.x(x))){this._loaded=!0,this.stylesheet=x;for(const T in x.sources)this.addSource(T,x.sources[T],{validate:!1});x.sprite?this._loadSprite(x.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(x.glyphs),this._createLayers(),this.light=new Jt(this.stylesheet.light),this.map.setTerrain((y=this.stylesheet.terrain)!==null&&y!==void 0?y:null),this.fire(new o.k("data",{dataType:"style"})),this.fire(new o.k("style.load"))}}_createLayers(){const r=o.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",r),this._order=r.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of r){const g=o.aA(c);g.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=g}}_loadSprite(r,c=!1,g=void 0){let y;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(x,T,u,f){return o._(this,void 0,void 0,function*(){const _=Rt(x),F=u>1?"@2x":"",E={},k={};for(const{id:D,url:O}of _){const z=T.transformRequest(Wt(O,F,".json"),"SpriteJSON");E[D]=o.h(z,f);const H=T.transformRequest(Wt(O,F,".png"),"SpriteImage");k[D]=ht.getImage(H,f)}return yield Promise.all([...Object.values(E),...Object.values(k)]),function(D,O){return o._(this,void 0,void 0,function*(){const z={};for(const H in D){z[H]={};const X=U.getImageCanvasContext((yield O[H]).data),ot=(yield D[H]).data;for(const Z in ot){const{width:st,height:mt,x:gt,y:ut,sdf:ft,pixelRatio:zt,stretchX:Kt,stretchY:Mt,content:ee,textFitWidth:oe,textFitHeight:_e}=ot[Z];z[H][Z]={data:null,pixelRatio:zt,sdf:ft,stretchX:Kt,stretchY:Mt,content:ee,textFitWidth:oe,textFitHeight:_e,spriteData:{width:st,height:mt,x:gt,y:ut,context:X}}}}return z})}(E,k)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(x=>{if(this._spriteRequest=null,x)for(const T in x){this._spritesImagesIds[T]=[];const u=this._spritesImagesIds[T]?this._spritesImagesIds[T].filter(f=>!(f in x)):[];for(const f of u)this.imageManager.removeImage(f),this._changedImages[f]=!0;for(const f in x[T]){const _=T==="default"?f:`${T}:${f}`;this._spritesImagesIds[T].push(_),_ in this.imageManager.images?this.imageManager.updateImage(_,x[T][f],!1):this.imageManager.addImage(_,x[T][f]),c&&(this._changedImages[_]=!0)}}}).catch(x=>{this._spriteRequest=null,y=x,this.fire(new o.j(y))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"})),g&&g(y)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}_validateLayer(r){const c=this.sourceCaches[r.source];if(!c)return;const g=r.sourceLayer;if(!g)return;const y=c.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(g)===-1)&&this.fire(new o.j(new Error(`Source layer "${g}" does not exist on source "${y.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r){const c=this._serializedAllLayers();if(!r||r.length===0)return Object.values(c);const g=[];for(const y of r)c[y]&&g.push(c[y]);return g}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const c=Object.keys(this._layers);for(const g of c){const y=this._layers[g];y.type!=="custom"&&(r[g]=y.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const c=this._changed;if(c){const y=Object.keys(this._updatedLayers),x=Object.keys(this._removedLayers);(y.length||x.length)&&this._updateWorkerLayers(y,x);for(const T in this._updatedSources){const u=this._updatedSources[T];if(u==="reload")this._reloadSource(T);else{if(u!=="clear")throw new Error(`Invalid action ${u}`);this._clearSource(T)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(r);this.light.updateTransitions(r),this._resetUpdates()}const g={};for(const y in this.sourceCaches){const x=this.sourceCaches[y];g[y]=x.used,x.used=!1}for(const y of this._order){const x=this._layers[y];x.recalculate(r,this._availableImages),!x.isHidden(r.zoom)&&x.source&&(this.sourceCaches[x.source].used=!0)}for(const y in g){const x=this.sourceCaches[y];!!g[y]!=!!x.used&&x.fire(new o.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(r),this.z=r.zoom,c&&this.fire(new o.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,c={}){var g;this._checkLoaded();const y=this.serialize();if(r=c.transformStyle?c.transformStyle(y,r):r,((g=c.validate)===null||g===void 0||g)&&sa(this,o.x(r)))return!1;(r=o.aB(r)).layers=o.az(r.layers);const x=o.aC(y,r),T=this._getOperationsToPerform(x);if(T.unimplemented.length>0)throw new Error(`Unimplemented: ${T.unimplemented.join(", ")}.`);if(T.operations.length===0)return!1;for(const u of T.operations)u();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const c=[],g=[];for(const y of r)switch(y.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":c.push(()=>this.addLayer.apply(this,y.args));break;case"removeLayer":c.push(()=>this.removeLayer.apply(this,y.args));break;case"setPaintProperty":c.push(()=>this.setPaintProperty.apply(this,y.args));break;case"setLayoutProperty":c.push(()=>this.setLayoutProperty.apply(this,y.args));break;case"setFilter":c.push(()=>this.setFilter.apply(this,y.args));break;case"addSource":c.push(()=>this.addSource.apply(this,y.args));break;case"removeSource":c.push(()=>this.removeSource.apply(this,y.args));break;case"setLayerZoomRange":c.push(()=>this.setLayerZoomRange.apply(this,y.args));break;case"setLight":c.push(()=>this.setLight.apply(this,y.args));break;case"setGeoJSONSourceData":c.push(()=>this.setGeoJSONSourceData.apply(this,y.args));break;case"setGlyphs":c.push(()=>this.setGlyphs.apply(this,y.args));break;case"setSprite":c.push(()=>this.setSprite.apply(this,y.args));break;case"setTerrain":c.push(()=>this.map.setTerrain.apply(this,y.args));break;case"setTransition":c.push(()=>{});break;default:g.push(y.command)}return{operations:c,unimplemented:g}}addImage(r,c){if(this.getImage(r))return this.fire(new o.j(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,c),this._afterImageUpdated(r)}updateImage(r,c){this.imageManager.updateImage(r,c)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new o.j(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,c,g={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(o.x.source,`sources.${r}`,c,null,g))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const y=this.sourceCaches[r]=new he(r,c,this.dispatcher);y.style=this,y.setEventedParent(this,()=>({isSourceLoaded:y.loaded(),source:y.serialize(),sourceId:r})),y.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const g in this._layers)if(this._layers[g].source===r)return this.fire(new o.j(new Error(`Source "${r}" cannot be removed while layer "${g}" is using it.`)));const c=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],c.fire(new o.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,c){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const g=this.sourceCaches[r].getSource();if(g.type!=="geojson")throw new Error(`geojsonSource.type is ${g.type}, which is !== 'geojson`);g.setData(c),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,c,g={}){this._checkLoaded();const y=r.id;if(this.getLayer(y))return void this.fire(new o.j(new Error(`Layer "${y}" already exists on this map.`)));let x;if(r.type==="custom"){if(sa(this,o.aD(r)))return;x=o.aA(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(y,r.source),r=o.aB(r),r=o.e(r,{source:y})),this._validate(o.x.layer,`layers.${y}`,r,{arrayIndex:-1},g))return;x=o.aA(r),this._validateLayer(x),x.setEventedParent(this,{layer:{id:y}})}const T=c?this._order.indexOf(c):this._order.length;if(c&&T===-1)this.fire(new o.j(new Error(`Cannot add layer "${y}" before non-existing layer "${c}".`)));else{if(this._order.splice(T,0,y),this._layerOrderChanged=!0,this._layers[y]=x,this._removedLayers[y]&&x.source&&x.type!=="custom"){const u=this._removedLayers[y];delete this._removedLayers[y],u.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}moveLayer(r,c){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new o.j(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===c)return;const g=this._order.indexOf(r);this._order.splice(g,1);const y=c?this._order.indexOf(c):this._order.length;c&&y===-1?this.fire(new o.j(new Error(`Cannot move layer "${r}" before non-existing layer "${c}".`))):(this._order.splice(y,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const c=this._layers[r];if(!c)return void this.fire(new o.j(new Error(`Cannot remove non-existing layer "${r}".`)));c.setEventedParent(null);const g=this._order.indexOf(r);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=c,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],c.onRemove&&c.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,c,g){this._checkLoaded();const y=this.getLayer(r);y?y.minzoom===c&&y.maxzoom===g||(c!=null&&(y.minzoom=c),g!=null&&(y.maxzoom=g),this._updateLayer(y)):this.fire(new o.j(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,c,g={}){this._checkLoaded();const y=this.getLayer(r);if(y){if(!o.aE(y.filter,c))return c==null?(y.filter=void 0,void this._updateLayer(y)):void(this._validate(o.x.filter,`layers.${y.id}.filter`,c,null,g)||(y.filter=o.aB(c),this._updateLayer(y)))}else this.fire(new o.j(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return o.aB(this.getLayer(r).filter)}setLayoutProperty(r,c,g,y={}){this._checkLoaded();const x=this.getLayer(r);x?o.aE(x.getLayoutProperty(c),g)||(x.setLayoutProperty(c,g,y),this._updateLayer(x)):this.fire(new o.j(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,c){const g=this.getLayer(r);if(g)return g.getLayoutProperty(c);this.fire(new o.j(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,c,g,y={}){this._checkLoaded();const x=this.getLayer(r);x?o.aE(x.getPaintProperty(c),g)||(x.setPaintProperty(c,g,y)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[r]=!0,this._serializedLayers=null):this.fire(new o.j(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,c){return this.getLayer(r).getPaintProperty(c)}setFeatureState(r,c){this._checkLoaded();const g=r.source,y=r.sourceLayer,x=this.sourceCaches[g];if(x===void 0)return void this.fire(new o.j(new Error(`The source '${g}' does not exist in the map's style.`)));const T=x.getSource().type;T==="geojson"&&y?this.fire(new o.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):T!=="vector"||y?(r.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),x.setFeatureState(y,r.id,c)):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,c){this._checkLoaded();const g=r.source,y=this.sourceCaches[g];if(y===void 0)return void this.fire(new o.j(new Error(`The source '${g}' does not exist in the map's style.`)));const x=y.getSource().type,T=x==="vector"?r.sourceLayer:void 0;x!=="vector"||T?c&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new o.j(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(T,r.id,c):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const c=r.source,g=r.sourceLayer,y=this.sourceCaches[c];if(y!==void 0)return y.getSource().type!=="vector"||g?(r.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),y.getFeatureState(g,r.id)):void this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.j(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=o.aF(this.sourceCaches,x=>x.serialize()),c=this._serializeByIds(this._order),g=this.map.getTerrain()||void 0,y=this.stylesheet;return o.aG({version:y.version,name:y.name,metadata:y.metadata,light:y.light,center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,sprite:y.sprite,glyphs:y.glyphs,transition:y.transition,sources:r,layers:c,terrain:g},x=>x!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const c=T=>this._layers[T].type==="fill-extrusion",g={},y=[];for(let T=this._order.length-1;T>=0;T--){const u=this._order[T];if(c(u)){g[u]=T;for(const f of r){const _=f[u];if(_)for(const F of _)y.push(F)}}}y.sort((T,u)=>u.intersectionZ-T.intersectionZ);const x=[];for(let T=this._order.length-1;T>=0;T--){const u=this._order[T];if(c(u))for(let f=y.length-1;f>=0;f--){const _=y[f].feature;if(g[_.layer.id]<T)break;x.push(_),y.pop()}else for(const f of r){const _=f[u];if(_)for(const F of _)x.push(F.feature)}}return x}queryRenderedFeatures(r,c,g){c&&c.filter&&this._validate(o.x.filter,"queryRenderedFeatures.filter",c.filter,null,c);const y={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new o.j(new Error("parameters.layers must be an Array."))),[];for(const u of c.layers){const f=this._layers[u];if(!f)return this.fire(new o.j(new Error(`The layer '${u}' does not exist in the map's style and cannot be queried for features.`))),[];y[f.source]=!0}}const x=[];c.availableImages=this._availableImages;const T=this._serializedAllLayers();for(const u in this.sourceCaches)c.layers&&!y[u]||x.push(be(this.sourceCaches[u],this._layers,T,r,c,g));return this.placement&&x.push(function(u,f,_,F,E,k,D){const O={},z=k.queryRenderedSymbols(F),H=[];for(const X of Object.keys(z).map(Number))H.push(D[X]);H.sort(Te);for(const X of H){const ot=X.featureIndex.lookupSymbolFeatures(z[X.bucketInstanceId],f,X.bucketIndex,X.sourceLayerIndex,E.filter,E.layers,E.availableImages,u);for(const Z in ot){const st=O[Z]=O[Z]||[],mt=ot[Z];mt.sort((gt,ut)=>{const ft=X.featureSortOrder;if(ft){const zt=ft.indexOf(gt.featureIndex);return ft.indexOf(ut.featureIndex)-zt}return ut.featureIndex-gt.featureIndex});for(const gt of mt)st.push(gt)}}for(const X in O)O[X].forEach(ot=>{const Z=ot.feature,st=_[u[X].source].getFeatureState(Z.layer["source-layer"],Z.id);Z.source=Z.layer.source,Z.layer["source-layer"]&&(Z.sourceLayer=Z.layer["source-layer"]),Z.state=st});return O}(this._layers,T,this.sourceCaches,r,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(r,c){c&&c.filter&&this._validate(o.x.filter,"querySourceFeatures.filter",c.filter,null,c);const g=this.sourceCaches[r];return g?function(y,x){const T=y.getRenderableIds().map(_=>y.getTileByID(_)),u=[],f={};for(let _=0;_<T.length;_++){const F=T[_],E=F.tileID.canonical.key;f[E]||(f[E]=!0,F.querySourceFeatures(u,x))}return u}(g,c):[]}getLight(){return this.light.getLight()}setLight(r,c={}){this._checkLoaded();const g=this.light.getLight();let y=!1;for(const T in r)if(!o.aE(r[T],g[T])){y=!0;break}if(!y)return;const x={now:U.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,c),this.light.updateTransitions(x)}_validate(r,c,g,y,x={}){return(!x||x.validate!==!1)&&sa(this,r.call(o.x,o.e({key:c,style:this.serialize(),value:g,styleSpec:o.v},y)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Xe().off(wr,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const g=this.sourceCaches[c];g.setEventedParent(null),g.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const c in this.sourceCaches)this.sourceCaches[c].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,c,g,y,x=!1){let T=!1,u=!1;const f={};for(const _ of this._order){const F=this._layers[_];if(F.type!=="symbol")continue;if(!f[F.source]){const k=this.sourceCaches[F.source];f[F.source]=k.getRenderableIds(!0).map(D=>k.getTileByID(D)).sort((D,O)=>O.tileID.overscaledZ-D.tileID.overscaledZ||(D.tileID.isLessThan(O.tileID)?-1:1))}const E=this.crossTileSymbolIndex.addLayer(F,f[F.source],r.center.lng);T=T||E}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||g===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(U.now(),r.zoom))&&(this.pauseablePlacement=new Vl(r,this.map.terrain,this._order,x,c,g,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,f),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(U.now()),u=!0),T&&this.pauseablePlacement.placement.setStale()),u||T)for(const _ of this._order){const F=this._layers[_];F.type==="symbol"&&this.placement.updateLayerOpacities(F,f[F.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(U.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,c){return o._(this,void 0,void 0,function*(){const g=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const y=this.sourceCaches[c.source];return y&&y.setDependencies(c.tileID.key,c.type,c.icons),g})}getGlyphs(r,c){return o._(this,void 0,void 0,function*(){const g=yield this.glyphManager.getGlyphs(c.stacks),y=this.sourceCaches[c.source];return y&&y.setDependencies(c.tileID.key,c.type,[""]),g})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,c={}){this._checkLoaded(),r&&this._validate(o.x.glyphs,"glyphs",r,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,c,g={},y){this._checkLoaded();const x=[{id:r,url:c}],T=[...Rt(this.stylesheet.sprite),...x];this._validate(o.x.sprite,"sprite",T,null,g)||(this.stylesheet.sprite=T,this._loadSprite(x,!0,y))}removeSprite(r){this._checkLoaded();const c=Rt(this.stylesheet.sprite);if(c.find(g=>g.id===r)){if(this._spritesImagesIds[r])for(const g of this._spritesImagesIds[r])this.imageManager.removeImage(g),this._changedImages[g]=!0;c.splice(c.findIndex(g=>g.id===r),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}else this.fire(new o.j(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return Rt(this.stylesheet.sprite)}setSprite(r,c={},g){this._checkLoaded(),r&&this._validate(o.x.sprite,"sprite",r,null,c)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,g):(this._unloadSprite(),g&&g(null)))}}var Ki=o.X([{name:"a_pos",type:"Int16",components:2}]),Ya="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const en={prelude:$r(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:$r(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:$r(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:$r(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:$r("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:$r(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:$r(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:$r("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:$r("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:$r("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:$r(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:$r(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:$r(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:$r(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:$r(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:$r(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:$r(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:$r(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:$r(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:$r(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:$r(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:$r(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:$r(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:$r(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:$r(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:$r(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:$r("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Ya),terrainDepth:$r("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Ya),terrainCoords:$r("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Ya)};function $r(b,r){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=r.match(/attribute ([\w]+) ([\w]+)/g),y=b.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=x?x.concat(y):y,u={};return{fragmentSource:b=b.replace(c,(f,_,F,E,k)=>(u[k]=!0,_==="define"?`
#ifndef HAS_UNIFORM_u_${k}
varying ${F} ${E} ${k};
#else
uniform ${F} ${E} u_${k};
#endif
`:`
#ifdef HAS_UNIFORM_u_${k}
    ${F} ${E} ${k} = u_${k};
#endif
`)),vertexSource:r=r.replace(c,(f,_,F,E,k)=>{const D=E==="float"?"vec2":"vec4",O=k.match(/color/)?"color":D;return u[k]?_==="define"?`
#ifndef HAS_UNIFORM_u_${k}
uniform lowp float u_${k}_t;
attribute ${F} ${D} a_${k};
varying ${F} ${E} ${k};
#else
uniform ${F} ${E} u_${k};
#endif
`:O==="vec4"?`
#ifndef HAS_UNIFORM_u_${k}
    ${k} = a_${k};
#else
    ${F} ${E} ${k} = u_${k};
#endif
`:`
#ifndef HAS_UNIFORM_u_${k}
    ${k} = unpack_mix_${O}(a_${k}, u_${k}_t);
#else
    ${F} ${E} ${k} = u_${k};
#endif
`:_==="define"?`
#ifndef HAS_UNIFORM_u_${k}
uniform lowp float u_${k}_t;
attribute ${F} ${D} a_${k};
#else
uniform ${F} ${E} u_${k};
#endif
`:O==="vec4"?`
#ifndef HAS_UNIFORM_u_${k}
    ${F} ${E} ${k} = a_${k};
#else
    ${F} ${E} ${k} = u_${k};
#endif
`:`
#ifndef HAS_UNIFORM_u_${k}
    ${F} ${E} ${k} = unpack_mix_${O}(a_${k}, u_${k}_t);
#else
    ${F} ${E} ${k} = u_${k};
#endif
`}),staticAttributes:g,staticUniforms:T}}class Ro{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,c,g,y,x,T,u,f,_){this.context=r;let F=this.boundPaintVertexBuffers.length!==y.length;for(let E=0;!F&&E<y.length;E++)this.boundPaintVertexBuffers[E]!==y[E]&&(F=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==g||F||this.boundIndexBuffer!==x||this.boundVertexOffset!==T||this.boundDynamicVertexBuffer!==u||this.boundDynamicVertexBuffer2!==f||this.boundDynamicVertexBuffer3!==_?this.freshBind(c,g,y,x,T,u,f,_):(r.bindVertexArray.set(this.vao),u&&u.bind(),x&&x.dynamicDraw&&x.bind(),f&&f.bind(),_&&_.bind())}freshBind(r,c,g,y,x,T,u,f){const _=r.numAttributes,F=this.context,E=F.gl;this.vao&&this.destroy(),this.vao=F.createVertexArray(),F.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=y,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=T,this.boundDynamicVertexBuffer2=u,this.boundDynamicVertexBuffer3=f,c.enableAttributes(E,r);for(const k of g)k.enableAttributes(E,r);T&&T.enableAttributes(E,r),u&&u.enableAttributes(E,r),f&&f.enableAttributes(E,r),c.bind(),c.setVertexAttribPointers(E,r,x);for(const k of g)k.bind(),k.setVertexAttribPointers(E,r,x);T&&(T.bind(),T.setVertexAttribPointers(E,r,x)),y&&y.bind(),u&&(u.bind(),u.setVertexAttribPointers(E,r,x)),f&&(f.bind(),f.setVertexAttribPointers(E,r,x)),F.currentNumAttributes=_}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Ja(b){const r=[];for(let c=0;c<b.length;c++){if(b[c]===null)continue;const g=b[c].split(" ");r.push(g.pop())}return r}class dA{constructor(r,c,g,y,x,T){const u=r.gl;this.program=u.createProgram();const f=Ja(c.staticAttributes),_=g?g.getBinderAttributes():[],F=f.concat(_),E=en.prelude.staticUniforms?Ja(en.prelude.staticUniforms):[],k=c.staticUniforms?Ja(c.staticUniforms):[],D=g?g.getBinderUniforms():[],O=E.concat(k).concat(D),z=[];for(const gt of O)z.indexOf(gt)<0&&z.push(gt);const H=g?g.defines():[];x&&H.push("#define OVERDRAW_INSPECTOR;"),T&&H.push("#define TERRAIN3D;");const X=H.concat(en.prelude.fragmentSource,c.fragmentSource).join(`
`),ot=H.concat(en.prelude.vertexSource,c.vertexSource).join(`
`),Z=u.createShader(u.FRAGMENT_SHADER);if(u.isContextLost())return void(this.failedToCreate=!0);if(u.shaderSource(Z,X),u.compileShader(Z),!u.getShaderParameter(Z,u.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${u.getShaderInfoLog(Z)}`);u.attachShader(this.program,Z);const st=u.createShader(u.VERTEX_SHADER);if(u.isContextLost())return void(this.failedToCreate=!0);if(u.shaderSource(st,ot),u.compileShader(st),!u.getShaderParameter(st,u.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${u.getShaderInfoLog(st)}`);u.attachShader(this.program,st),this.attributes={};const mt={};this.numAttributes=F.length;for(let gt=0;gt<this.numAttributes;gt++)F[gt]&&(u.bindAttribLocation(this.program,gt,F[gt]),this.attributes[F[gt]]=gt);if(u.linkProgram(this.program),!u.getProgramParameter(this.program,u.LINK_STATUS))throw new Error(`Program failed to link: ${u.getProgramInfoLog(this.program)}`);u.deleteShader(st),u.deleteShader(Z);for(let gt=0;gt<z.length;gt++){const ut=z[gt];if(ut&&!mt[ut]){const ft=u.getUniformLocation(this.program,ut);ft&&(mt[ut]=ft)}}this.fixedUniforms=y(r,mt),this.terrainUniforms=((gt,ut)=>({u_depth:new o.aH(gt,ut.u_depth),u_terrain:new o.aH(gt,ut.u_terrain),u_terrain_dim:new o.aI(gt,ut.u_terrain_dim),u_terrain_matrix:new o.aJ(gt,ut.u_terrain_matrix),u_terrain_unpack:new o.aK(gt,ut.u_terrain_unpack),u_terrain_exaggeration:new o.aI(gt,ut.u_terrain_exaggeration)}))(r,mt),this.binderUniforms=g?g.getUniforms(r,mt):[]}draw(r,c,g,y,x,T,u,f,_,F,E,k,D,O,z,H,X,ot){const Z=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(g),r.setStencilMode(y),r.setColorMode(x),r.setCullFace(T),f){r.activeTexture.set(Z.TEXTURE2),Z.bindTexture(Z.TEXTURE_2D,f.depthTexture),r.activeTexture.set(Z.TEXTURE3),Z.bindTexture(Z.TEXTURE_2D,f.texture);for(const mt in this.terrainUniforms)this.terrainUniforms[mt].set(f[mt])}for(const mt in this.fixedUniforms)this.fixedUniforms[mt].set(u[mt]);z&&z.setUniforms(r,this.binderUniforms,D,{zoom:O});let st=0;switch(c){case Z.LINES:st=2;break;case Z.TRIANGLES:st=3;break;case Z.LINE_STRIP:st=1}for(const mt of k.get()){const gt=mt.vaos||(mt.vaos={});(gt[_]||(gt[_]=new Ro)).bind(r,this,F,z?z.getPaintVertexBuffers():[],E,mt.vertexOffset,H,X,ot),Z.drawElements(c,mt.primitiveLength*st,Z.UNSIGNED_SHORT,mt.primitiveOffset*st*2)}}}function pA(b,r,c){const g=1/ar(c,1,r.transform.tileZoom),y=Math.pow(2,c.tileID.overscaledZ),x=c.tileSize*Math.pow(2,r.transform.tileZoom)/y,T=x*(c.tileID.canonical.x+c.tileID.wrap*y),u=x*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[g,b.fromScale,b.toScale],u_fade:b.t,u_pixel_coord_upper:[T>>16,u>>16],u_pixel_coord_lower:[65535&T,65535&u]}}const to=(b,r,c,g)=>{const y=r.style.light,x=y.properties.get("position"),T=[x.x,x.y,x.z],u=function(){var _=new o.A(9);return o.A!=Float32Array&&(_[1]=0,_[2]=0,_[3]=0,_[5]=0,_[6]=0,_[7]=0),_[0]=1,_[4]=1,_[8]=1,_}();y.properties.get("anchor")==="viewport"&&function(_,F){var E=Math.sin(F),k=Math.cos(F);_[0]=k,_[1]=E,_[2]=0,_[3]=-E,_[4]=k,_[5]=0,_[6]=0,_[7]=0,_[8]=1}(u,-r.transform.angle),function(_,F,E){var k=F[0],D=F[1],O=F[2];_[0]=k*E[0]+D*E[3]+O*E[6],_[1]=k*E[1]+D*E[4]+O*E[7],_[2]=k*E[2]+D*E[5]+O*E[8]}(T,T,u);const f=y.properties.get("color");return{u_matrix:b,u_lightpos:T,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[f.r,f.g,f.b],u_vertical_gradient:+c,u_opacity:g}},il=(b,r,c,g,y,x,T)=>o.e(to(b,r,c,g),pA(x,r,T),{u_height_factor:-Math.pow(2,y.overscaledZ)/T.tileSize/8}),eo=b=>({u_matrix:b}),zo=(b,r,c,g)=>o.e(eo(b),pA(c,r,g)),fA=(b,r)=>({u_matrix:b,u_world:r}),Ho=(b,r,c,g,y)=>o.e(zo(b,r,c,g),{u_world:y}),xa=(b,r,c,g)=>{const y=b.transform;let x,T;if(g.paint.get("circle-pitch-alignment")==="map"){const u=ar(c,1,y.zoom);x=!0,T=[u,u]}else x=!1,T=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+(g.paint.get("circle-pitch-scale")==="map"),u_matrix:b.translatePosMatrix(r.posMatrix,c,g.paint.get("circle-translate"),g.paint.get("circle-translate-anchor")),u_pitch_with_map:+x,u_device_pixel_ratio:b.pixelRatio,u_extrude_scale:T}},gA=(b,r,c)=>({u_matrix:b,u_inv_matrix:r,u_camera_to_center_distance:c.cameraToCenterDistance,u_viewport_size:[c.width,c.height]}),ro=(b,r,c=1)=>({u_matrix:b,u_color:r,u_overlay:0,u_overlay_scale:c}),nl=b=>({u_matrix:b}),Di=(b,r,c,g)=>({u_matrix:b,u_extrude_scale:ar(r,1,c),u_intensity:g});function mA(b,r){const c=Math.pow(2,r.canonical.z),g=r.canonical.y;return[new o.Y(0,g/c).toLngLat().lat,new o.Y(0,(g+1)/c).toLngLat().lat]}const on=(b,r,c,g)=>{const y=b.transform;return{u_matrix:vA(b,r,c,g),u_ratio:1/ar(r,1,y.zoom),u_device_pixel_ratio:b.pixelRatio,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},fr=(b,r,c,g,y)=>o.e(on(b,r,c,y),{u_image:0,u_image_height:g}),sl=(b,r,c,g,y)=>{const x=b.transform,T=ys(r,x);return{u_matrix:vA(b,r,c,y),u_texsize:r.imageAtlasTexture.size,u_ratio:1/ar(r,1,x.zoom),u_device_pixel_ratio:b.pixelRatio,u_image:0,u_scale:[T,g.fromScale,g.toScale],u_fade:g.t,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},yA=(b,r,c,g,y,x)=>{const T=b.lineAtlas,u=ys(r,b.transform),f=c.layout.get("line-cap")==="round",_=T.getDash(g.from,f),F=T.getDash(g.to,f),E=_.width*y.fromScale,k=F.width*y.toScale;return o.e(on(b,r,c,x),{u_patternscale_a:[u/E,-_.height/2],u_patternscale_b:[u/k,-F.height/2],u_sdfgamma:T.width/(256*Math.min(E,k)*b.pixelRatio)/2,u_image:0,u_tex_y_a:_.y,u_tex_y_b:F.y,u_mix:y.t})};function ys(b,r){return 1/ar(b,1,r.tileZoom)}function vA(b,r,c,g){return b.translatePosMatrix(g?g.posMatrix:r.tileID.posMatrix,r,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const Ba=(b,r,c,g,y)=>{return{u_matrix:b,u_tl_parent:r,u_scale_parent:c,u_buffer_scale:1,u_fade_t:g.mix,u_opacity:g.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(T=y.paint.get("raster-saturation"),T>0?1-1/(1.001-T):-T),u_contrast_factor:(x=y.paint.get("raster-contrast"),x>0?1/(1-x):1+x),u_spin_weights:wA(y.paint.get("raster-hue-rotate"))};var x,T};function wA(b){b*=Math.PI/180;const r=Math.sin(b),c=Math.cos(b);return[(2*c+1)/3,(-Math.sqrt(3)*r-c+1)/3,(Math.sqrt(3)*r-c+1)/3]}const _A=(b,r,c,g,y,x,T,u,f,_,F,E,k,D)=>{const O=T.transform;return{u_is_size_zoom_constant:+(b==="constant"||b==="source"),u_is_size_feature_constant:+(b==="constant"||b==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:O.cameraToCenterDistance,u_pitch:O.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:O.width/O.height,u_fade_change:T.options.fadeDuration?T.symbolFadeChange:1,u_matrix:u,u_label_plane_matrix:f,u_coord_matrix:_,u_is_text:+E,u_pitch_with_map:+g,u_is_along_line:y,u_is_variable_anchor:x,u_texsize:k,u_texture:0,u_translation:F,u_pitched_scale:D}},jl=(b,r,c,g,y,x,T,u,f,_,F,E,k,D,O)=>{const z=T.transform;return o.e(_A(b,r,c,g,y,x,T,u,f,_,F,E,k,O),{u_gamma_scale:g?Math.cos(z._pitch)*z.cameraToCenterDistance:1,u_device_pixel_ratio:T.pixelRatio,u_is_halo:+D})},kc=(b,r,c,g,y,x,T,u,f,_,F,E,k,D)=>o.e(jl(b,r,c,g,y,x,T,u,f,_,F,!0,E,!0,D),{u_texsize_icon:k,u_texture_icon:1}),Dc=(b,r,c)=>({u_matrix:b,u_opacity:r,u_color:c}),al=(b,r,c,g,y,x)=>o.e(function(T,u,f,_){const F=f.imageManager.getPattern(T.from.toString()),E=f.imageManager.getPattern(T.to.toString()),{width:k,height:D}=f.imageManager.getPixelSize(),O=Math.pow(2,_.tileID.overscaledZ),z=_.tileSize*Math.pow(2,f.transform.tileZoom)/O,H=z*(_.tileID.canonical.x+_.tileID.wrap*O),X=z*_.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:F.tl,u_pattern_br_a:F.br,u_pattern_tl_b:E.tl,u_pattern_br_b:E.br,u_texsize:[k,D],u_mix:u.t,u_pattern_size_a:F.displaySize,u_pattern_size_b:E.displaySize,u_scale_a:u.fromScale,u_scale_b:u.toScale,u_tile_units_to_pixels:1/ar(_,1,f.transform.tileZoom),u_pixel_coord_upper:[H>>16,X>>16],u_pixel_coord_lower:[65535&H,65535&X]}}(g,x,c,y),{u_matrix:b,u_opacity:r}),aa={fillExtrusion:(b,r)=>({u_matrix:new o.aJ(b,r.u_matrix),u_lightpos:new o.aL(b,r.u_lightpos),u_lightintensity:new o.aI(b,r.u_lightintensity),u_lightcolor:new o.aL(b,r.u_lightcolor),u_vertical_gradient:new o.aI(b,r.u_vertical_gradient),u_opacity:new o.aI(b,r.u_opacity)}),fillExtrusionPattern:(b,r)=>({u_matrix:new o.aJ(b,r.u_matrix),u_lightpos:new o.aL(b,r.u_lightpos),u_lightintensity:new o.aI(b,r.u_lightintensity),u_lightcolor:new o.aL(b,r.u_lightcolor),u_vertical_gradient:new o.aI(b,r.u_vertical_gradient),u_height_factor:new o.aI(b,r.u_height_factor),u_image:new o.aH(b,r.u_image),u_texsize:new o.aM(b,r.u_texsize),u_pixel_coord_upper:new o.aM(b,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.aM(b,r.u_pixel_coord_lower),u_scale:new o.aL(b,r.u_scale),u_fade:new o.aI(b,r.u_fade),u_opacity:new o.aI(b,r.u_opacity)}),fill:(b,r)=>({u_matrix:new o.aJ(b,r.u_matrix)}),fillPattern:(b,r)=>({u_matrix:new o.aJ(b,r.u_matrix),u_image:new o.aH(b,r.u_image),u_texsize:new o.aM(b,r.u_texsize),u_pixel_coord_upper:new o.aM(b,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.aM(b,r.u_pixel_coord_lower),u_scale:new o.aL(b,r.u_scale),u_fade:new o.aI(b,r.u_fade)}),fillOutline:(b,r)=>({u_matrix:new o.aJ(b,r.u_matrix),u_world:new o.aM(b,r.u_world)}),fillOutlinePattern:(b,r)=>({u_matrix:new o.aJ(b,r.u_matrix),u_world:new o.aM(b,r.u_world),u_image:new o.aH(b,r.u_image),u_texsize:new o.aM(b,r.u_texsize),u_pixel_coord_upper:new o.aM(b,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.aM(b,r.u_pixel_coord_lower),u_scale:new o.aL(b,r.u_scale),u_fade:new o.aI(b,r.u_fade)}),circle:(b,r)=>({u_camera_to_center_distance:new o.aI(b,r.u_camera_to_center_distance),u_scale_with_map:new o.aH(b,r.u_scale_with_map),u_pitch_with_map:new o.aH(b,r.u_pitch_with_map),u_extrude_scale:new o.aM(b,r.u_extrude_scale),u_device_pixel_ratio:new o.aI(b,r.u_device_pixel_ratio),u_matrix:new o.aJ(b,r.u_matrix)}),collisionBox:(b,r)=>({u_matrix:new o.aJ(b,r.u_matrix),u_pixel_extrude_scale:new o.aM(b,r.u_pixel_extrude_scale)}),collisionCircle:(b,r)=>({u_matrix:new o.aJ(b,r.u_matrix),u_inv_matrix:new o.aJ(b,r.u_inv_matrix),u_camera_to_center_distance:new o.aI(b,r.u_camera_to_center_distance),u_viewport_size:new o.aM(b,r.u_viewport_size)}),debug:(b,r)=>({u_color:new o.aN(b,r.u_color),u_matrix:new o.aJ(b,r.u_matrix),u_overlay:new o.aH(b,r.u_overlay),u_overlay_scale:new o.aI(b,r.u_overlay_scale)}),clippingMask:(b,r)=>({u_matrix:new o.aJ(b,r.u_matrix)}),heatmap:(b,r)=>({u_extrude_scale:new o.aI(b,r.u_extrude_scale),u_intensity:new o.aI(b,r.u_intensity),u_matrix:new o.aJ(b,r.u_matrix)}),heatmapTexture:(b,r)=>({u_matrix:new o.aJ(b,r.u_matrix),u_world:new o.aM(b,r.u_world),u_image:new o.aH(b,r.u_image),u_color_ramp:new o.aH(b,r.u_color_ramp),u_opacity:new o.aI(b,r.u_opacity)}),hillshade:(b,r)=>({u_matrix:new o.aJ(b,r.u_matrix),u_image:new o.aH(b,r.u_image),u_latrange:new o.aM(b,r.u_latrange),u_light:new o.aM(b,r.u_light),u_shadow:new o.aN(b,r.u_shadow),u_highlight:new o.aN(b,r.u_highlight),u_accent:new o.aN(b,r.u_accent)}),hillshadePrepare:(b,r)=>({u_matrix:new o.aJ(b,r.u_matrix),u_image:new o.aH(b,r.u_image),u_dimension:new o.aM(b,r.u_dimension),u_zoom:new o.aI(b,r.u_zoom),u_unpack:new o.aK(b,r.u_unpack)}),line:(b,r)=>({u_matrix:new o.aJ(b,r.u_matrix),u_ratio:new o.aI(b,r.u_ratio),u_device_pixel_ratio:new o.aI(b,r.u_device_pixel_ratio),u_units_to_pixels:new o.aM(b,r.u_units_to_pixels)}),lineGradient:(b,r)=>({u_matrix:new o.aJ(b,r.u_matrix),u_ratio:new o.aI(b,r.u_ratio),u_device_pixel_ratio:new o.aI(b,r.u_device_pixel_ratio),u_units_to_pixels:new o.aM(b,r.u_units_to_pixels),u_image:new o.aH(b,r.u_image),u_image_height:new o.aI(b,r.u_image_height)}),linePattern:(b,r)=>({u_matrix:new o.aJ(b,r.u_matrix),u_texsize:new o.aM(b,r.u_texsize),u_ratio:new o.aI(b,r.u_ratio),u_device_pixel_ratio:new o.aI(b,r.u_device_pixel_ratio),u_image:new o.aH(b,r.u_image),u_units_to_pixels:new o.aM(b,r.u_units_to_pixels),u_scale:new o.aL(b,r.u_scale),u_fade:new o.aI(b,r.u_fade)}),lineSDF:(b,r)=>({u_matrix:new o.aJ(b,r.u_matrix),u_ratio:new o.aI(b,r.u_ratio),u_device_pixel_ratio:new o.aI(b,r.u_device_pixel_ratio),u_units_to_pixels:new o.aM(b,r.u_units_to_pixels),u_patternscale_a:new o.aM(b,r.u_patternscale_a),u_patternscale_b:new o.aM(b,r.u_patternscale_b),u_sdfgamma:new o.aI(b,r.u_sdfgamma),u_image:new o.aH(b,r.u_image),u_tex_y_a:new o.aI(b,r.u_tex_y_a),u_tex_y_b:new o.aI(b,r.u_tex_y_b),u_mix:new o.aI(b,r.u_mix)}),raster:(b,r)=>({u_matrix:new o.aJ(b,r.u_matrix),u_tl_parent:new o.aM(b,r.u_tl_parent),u_scale_parent:new o.aI(b,r.u_scale_parent),u_buffer_scale:new o.aI(b,r.u_buffer_scale),u_fade_t:new o.aI(b,r.u_fade_t),u_opacity:new o.aI(b,r.u_opacity),u_image0:new o.aH(b,r.u_image0),u_image1:new o.aH(b,r.u_image1),u_brightness_low:new o.aI(b,r.u_brightness_low),u_brightness_high:new o.aI(b,r.u_brightness_high),u_saturation_factor:new o.aI(b,r.u_saturation_factor),u_contrast_factor:new o.aI(b,r.u_contrast_factor),u_spin_weights:new o.aL(b,r.u_spin_weights)}),symbolIcon:(b,r)=>({u_is_size_zoom_constant:new o.aH(b,r.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aH(b,r.u_is_size_feature_constant),u_size_t:new o.aI(b,r.u_size_t),u_size:new o.aI(b,r.u_size),u_camera_to_center_distance:new o.aI(b,r.u_camera_to_center_distance),u_pitch:new o.aI(b,r.u_pitch),u_rotate_symbol:new o.aH(b,r.u_rotate_symbol),u_aspect_ratio:new o.aI(b,r.u_aspect_ratio),u_fade_change:new o.aI(b,r.u_fade_change),u_matrix:new o.aJ(b,r.u_matrix),u_label_plane_matrix:new o.aJ(b,r.u_label_plane_matrix),u_coord_matrix:new o.aJ(b,r.u_coord_matrix),u_is_text:new o.aH(b,r.u_is_text),u_pitch_with_map:new o.aH(b,r.u_pitch_with_map),u_is_along_line:new o.aH(b,r.u_is_along_line),u_is_variable_anchor:new o.aH(b,r.u_is_variable_anchor),u_texsize:new o.aM(b,r.u_texsize),u_texture:new o.aH(b,r.u_texture),u_translation:new o.aM(b,r.u_translation),u_pitched_scale:new o.aI(b,r.u_pitched_scale)}),symbolSDF:(b,r)=>({u_is_size_zoom_constant:new o.aH(b,r.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aH(b,r.u_is_size_feature_constant),u_size_t:new o.aI(b,r.u_size_t),u_size:new o.aI(b,r.u_size),u_camera_to_center_distance:new o.aI(b,r.u_camera_to_center_distance),u_pitch:new o.aI(b,r.u_pitch),u_rotate_symbol:new o.aH(b,r.u_rotate_symbol),u_aspect_ratio:new o.aI(b,r.u_aspect_ratio),u_fade_change:new o.aI(b,r.u_fade_change),u_matrix:new o.aJ(b,r.u_matrix),u_label_plane_matrix:new o.aJ(b,r.u_label_plane_matrix),u_coord_matrix:new o.aJ(b,r.u_coord_matrix),u_is_text:new o.aH(b,r.u_is_text),u_pitch_with_map:new o.aH(b,r.u_pitch_with_map),u_is_along_line:new o.aH(b,r.u_is_along_line),u_is_variable_anchor:new o.aH(b,r.u_is_variable_anchor),u_texsize:new o.aM(b,r.u_texsize),u_texture:new o.aH(b,r.u_texture),u_gamma_scale:new o.aI(b,r.u_gamma_scale),u_device_pixel_ratio:new o.aI(b,r.u_device_pixel_ratio),u_is_halo:new o.aH(b,r.u_is_halo),u_translation:new o.aM(b,r.u_translation),u_pitched_scale:new o.aI(b,r.u_pitched_scale)}),symbolTextAndIcon:(b,r)=>({u_is_size_zoom_constant:new o.aH(b,r.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aH(b,r.u_is_size_feature_constant),u_size_t:new o.aI(b,r.u_size_t),u_size:new o.aI(b,r.u_size),u_camera_to_center_distance:new o.aI(b,r.u_camera_to_center_distance),u_pitch:new o.aI(b,r.u_pitch),u_rotate_symbol:new o.aH(b,r.u_rotate_symbol),u_aspect_ratio:new o.aI(b,r.u_aspect_ratio),u_fade_change:new o.aI(b,r.u_fade_change),u_matrix:new o.aJ(b,r.u_matrix),u_label_plane_matrix:new o.aJ(b,r.u_label_plane_matrix),u_coord_matrix:new o.aJ(b,r.u_coord_matrix),u_is_text:new o.aH(b,r.u_is_text),u_pitch_with_map:new o.aH(b,r.u_pitch_with_map),u_is_along_line:new o.aH(b,r.u_is_along_line),u_is_variable_anchor:new o.aH(b,r.u_is_variable_anchor),u_texsize:new o.aM(b,r.u_texsize),u_texsize_icon:new o.aM(b,r.u_texsize_icon),u_texture:new o.aH(b,r.u_texture),u_texture_icon:new o.aH(b,r.u_texture_icon),u_gamma_scale:new o.aI(b,r.u_gamma_scale),u_device_pixel_ratio:new o.aI(b,r.u_device_pixel_ratio),u_is_halo:new o.aH(b,r.u_is_halo),u_translation:new o.aM(b,r.u_translation),u_pitched_scale:new o.aI(b,r.u_pitched_scale)}),background:(b,r)=>({u_matrix:new o.aJ(b,r.u_matrix),u_opacity:new o.aI(b,r.u_opacity),u_color:new o.aN(b,r.u_color)}),backgroundPattern:(b,r)=>({u_matrix:new o.aJ(b,r.u_matrix),u_opacity:new o.aI(b,r.u_opacity),u_image:new o.aH(b,r.u_image),u_pattern_tl_a:new o.aM(b,r.u_pattern_tl_a),u_pattern_br_a:new o.aM(b,r.u_pattern_br_a),u_pattern_tl_b:new o.aM(b,r.u_pattern_tl_b),u_pattern_br_b:new o.aM(b,r.u_pattern_br_b),u_texsize:new o.aM(b,r.u_texsize),u_mix:new o.aI(b,r.u_mix),u_pattern_size_a:new o.aM(b,r.u_pattern_size_a),u_pattern_size_b:new o.aM(b,r.u_pattern_size_b),u_scale_a:new o.aI(b,r.u_scale_a),u_scale_b:new o.aI(b,r.u_scale_b),u_pixel_coord_upper:new o.aM(b,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.aM(b,r.u_pixel_coord_lower),u_tile_units_to_pixels:new o.aI(b,r.u_tile_units_to_pixels)}),terrain:(b,r)=>({u_matrix:new o.aJ(b,r.u_matrix),u_texture:new o.aH(b,r.u_texture),u_ele_delta:new o.aI(b,r.u_ele_delta)}),terrainDepth:(b,r)=>({u_matrix:new o.aJ(b,r.u_matrix),u_ele_delta:new o.aI(b,r.u_ele_delta)}),terrainCoords:(b,r)=>({u_matrix:new o.aJ(b,r.u_matrix),u_texture:new o.aH(b,r.u_texture),u_terrain_coords_id:new o.aI(b,r.u_terrain_coords_id),u_ele_delta:new o.aI(b,r.u_ele_delta)})};class oa{constructor(r,c,g){this.context=r;const y=r.gl;this.buffer=y.createBuffer(),this.dynamicDraw=!!g,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const bA={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ca{constructor(r,c,g,y){this.length=c.length,this.attributes=g,this.itemSize=c.bytesPerElement,this.dynamicDraw=y,this.context=r;const x=r.gl;this.buffer=x.createBuffer(),r.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,c){for(let g=0;g<this.attributes.length;g++){const y=c.attributes[this.attributes[g].name];y!==void 0&&r.enableVertexAttribArray(y)}}setVertexAttribPointers(r,c,g){for(let y=0;y<this.attributes.length;y++){const x=this.attributes[y],T=c.attributes[x.name];T!==void 0&&r.vertexAttribPointer(T,x.components,r[bA[x.type]],!1,this.itemSize,x.offset+this.itemSize*(g||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Fa=new WeakMap;function An(b){var r;if(Fa.has(b))return Fa.get(b);{const c=(r=b.getParameter(b.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return Fa.set(b,c),c}}class Wr{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class xA extends Wr{getDefault(){return o.aP.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class io extends Wr{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class no extends Wr{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class Sa extends Wr{getDefault(){return[!0,!0,!0,!0]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class zs extends Wr{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class Nc extends Wr{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class is extends Wr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const c=this.current;(r.func!==c.func||r.ref!==c.ref||r.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class Hs extends Wr{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class BA extends Wr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=r,this.dirty=!1}}class Vo extends Wr{getDefault(){return[0,1]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class Kl extends Wr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=r,this.dirty=!1}}class so extends Wr{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class $l extends Wr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.BLEND):c.disable(c.BLEND),this.current=r,this.dirty=!1}}class CA extends Wr{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class FA extends Wr{getDefault(){return o.aP.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class ol extends Wr{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class vs extends Wr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=r,this.dirty=!1}}class SA extends Wr{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class Al extends Wr{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class ql extends Wr{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class Gl extends Wr{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class Aa extends Wr{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class jo extends Wr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class ao extends Wr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class oo extends Wr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class ll extends Wr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class M extends Wr{getDefault(){return null}set(r){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class J extends Wr{getDefault(){return null}set(r){var c;if(r===this.current&&!this.dirty)return;const g=this.gl;An(g)?g.bindVertexArray(r):(c=g.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class Ct extends Wr{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class Dt extends Wr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class Zt extends Wr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class ue extends Wr{constructor(r,c){super(r),this.context=r,this.parent=c}getDefault(){return null}}class we extends ue{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class Ke extends ue{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class yr extends ue{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Pr{constructor(r,c,g,y,x){this.context=r,this.width=c,this.height=g;const T=r.gl,u=this.framebuffer=T.createFramebuffer();if(this.colorAttachment=new we(r,u),y)this.depthAttachment=x?new yr(r,u):new Ke(r,u);else if(x)throw new Error("Stencil cannot be set without depth");if(T.checkFramebufferStatus(T.FRAMEBUFFER)!==T.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,c=this.colorAttachment.get();if(c&&r.deleteTexture(c),this.depthAttachment){const g=this.depthAttachment.get();g&&r.deleteRenderbuffer(g)}r.deleteFramebuffer(this.framebuffer)}}class or{constructor(r,c,g){this.blendFunction=r,this.blendColor=c,this.mask=g}}or.Replace=[1,0],or.disabled=new or(or.Replace,o.aP.transparent,[!1,!1,!1,!1]),or.unblended=new or(or.Replace,o.aP.transparent,[!0,!0,!0,!0]),or.alphaBlended=new or([1,771],o.aP.transparent,[!0,!0,!0,!0]);class qr{constructor(r){var c,g;if(this.gl=r,this.clearColor=new xA(this),this.clearDepth=new io(this),this.clearStencil=new no(this),this.colorMask=new Sa(this),this.depthMask=new zs(this),this.stencilMask=new Nc(this),this.stencilFunc=new is(this),this.stencilOp=new Hs(this),this.stencilTest=new BA(this),this.depthRange=new Vo(this),this.depthTest=new Kl(this),this.depthFunc=new so(this),this.blend=new $l(this),this.blendFunc=new CA(this),this.blendColor=new FA(this),this.blendEquation=new ol(this),this.cullFace=new vs(this),this.cullFaceSide=new SA(this),this.frontFace=new Al(this),this.program=new ql(this),this.activeTexture=new Gl(this),this.viewport=new Aa(this),this.bindFramebuffer=new jo(this),this.bindRenderbuffer=new ao(this),this.bindTexture=new oo(this),this.bindVertexBuffer=new ll(this),this.bindElementBuffer=new M(this),this.bindVertexArray=new J(this),this.pixelStoreUnpack=new Ct(this),this.pixelStoreUnpackPremultiplyAlpha=new Dt(this),this.pixelStoreUnpackFlipY=new Zt(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),An(r)){this.HALF_FLOAT=r.HALF_FLOAT;const y=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=r.RGBA16F)!==null&&c!==void 0?c:y==null?void 0:y.RGBA16F_EXT,this.RGB16F=(g=r.RGB16F)!==null&&g!==void 0?g:y==null?void 0:y.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const y=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=y==null?void 0:y.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,c){return new oa(this,r,c)}createVertexBuffer(r,c,g){return new Ca(this,r,c,g)}createRenderbuffer(r,c,g){const y=this.gl,x=y.createRenderbuffer();return this.bindRenderbuffer.set(x),y.renderbufferStorage(y.RENDERBUFFER,r,c,g),this.bindRenderbuffer.set(null),x}createFramebuffer(r,c,g,y){return new Pr(this,r,c,g,y)}clear({color:r,depth:c,stencil:g}){const y=this.gl;let x=0;r&&(x|=y.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(x|=y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),g!==void 0&&(x|=y.STENCIL_BUFFER_BIT,this.clearStencil.set(g),this.stencilMask.set(255)),y.clear(x)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){o.aE(r.blendFunction,or.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return An(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var c;return An(this.gl)?this.gl.deleteVertexArray(r):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class er{constructor(r,c,g){this.func=r,this.mask=c,this.range=g}}er.ReadOnly=!1,er.ReadWrite=!0,er.disabled=new er(519,er.ReadOnly,[0,1]);const _i=7680;class Mr{constructor(r,c,g,y,x,T){this.test=r,this.ref=c,this.mask=g,this.fail=y,this.depthFail=x,this.pass=T}}Mr.disabled=new Mr({func:519,mask:0},0,0,_i,_i,_i);class Nr{constructor(r,c,g){this.enable=r,this.mode=c,this.frontFace=g}}let Hi;function ws(b,r,c,g,y){const x=b.context,T=x.gl,u=b.useProgram("collisionBox"),f=[];let _=0,F=0;for(let X=0;X<g.length;X++){const ot=g[X],Z=r.getTile(ot).getBucket(c);if(!Z)continue;const st=y?Z.textCollisionBox:Z.iconCollisionBox,mt=Z.collisionCircleArray;if(mt.length>0){const gt=o.F();o.aQ(gt,Z.placementInvProjMatrix,b.transform.glCoordMatrix),o.aQ(gt,gt,Z.placementViewportMatrix),f.push({circleArray:mt,circleOffset:F,transform:ot.posMatrix,invTransform:gt,coord:ot}),_+=mt.length/4,F=_}st&&u.draw(x,T.LINES,er.disabled,Mr.disabled,b.colorModeForRenderPass(),Nr.disabled,{u_matrix:ot.posMatrix,u_pixel_extrude_scale:[1/(E=b.transform).width,1/E.height]},b.style.map.terrain&&b.style.map.terrain.getTerrainData(ot),c.id,st.layoutVertexBuffer,st.indexBuffer,st.segments,null,b.transform.zoom,null,null,st.collisionVertexBuffer)}var E;if(!y||!f.length)return;const k=b.useProgram("collisionCircle"),D=new o.aR;D.resize(4*_),D._trim();let O=0;for(const X of f)for(let ot=0;ot<X.circleArray.length/4;ot++){const Z=4*ot,st=X.circleArray[Z+0],mt=X.circleArray[Z+1],gt=X.circleArray[Z+2],ut=X.circleArray[Z+3];D.emplace(O++,st,mt,gt,ut,0),D.emplace(O++,st,mt,gt,ut,1),D.emplace(O++,st,mt,gt,ut,2),D.emplace(O++,st,mt,gt,ut,3)}(!Hi||Hi.length<2*_)&&(Hi=function(X){const ot=2*X,Z=new o.aT;Z.resize(ot),Z._trim();for(let st=0;st<ot;st++){const mt=6*st;Z.uint16[mt+0]=4*st+0,Z.uint16[mt+1]=4*st+1,Z.uint16[mt+2]=4*st+2,Z.uint16[mt+3]=4*st+2,Z.uint16[mt+4]=4*st+3,Z.uint16[mt+5]=4*st+0}return Z}(_));const z=x.createIndexBuffer(Hi,!0),H=x.createVertexBuffer(D,o.aS.members,!0);for(const X of f){const ot=gA(X.transform,X.invTransform,b.transform);k.draw(x,T.TRIANGLES,er.disabled,Mr.disabled,b.colorModeForRenderPass(),Nr.disabled,ot,b.style.map.terrain&&b.style.map.terrain.getTerrainData(X.coord),c.id,H,z,o.$.simpleSegment(0,2*X.circleOffset,X.circleArray.length,X.circleArray.length/2),null,b.transform.zoom,null,null,null)}H.destroy(),z.destroy()}Nr.disabled=new Nr(!1,1029,2305),Nr.backCCW=new Nr(!0,1029,2305);const zn=o.an(new Float32Array(16));function Ia(b,r,c,g,y,x){const{horizontalAlign:T,verticalAlign:u}=o.au(b);return new o.P((-(T-.5)*r/y+g[0])*x,(-(u-.5)*c/y+g[1])*x)}function cl(b,r,c,g,y,x){const T=r.tileAnchorPoint.add(new o.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let u=g.mult(x);return c||(u=u.rotate(-y)),Dr(T.add(u),r.labelPlaneMatrix,r.getElevation).point}if(c){const u=vt(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(b),f=Math.atan(u.y/u.x)+(u.x<0?Math.PI:0);return b.add(g.rotate(f))}return b.add(g)}function Ao(b,r,c,g,y,x,T,u,f,_,F,E,k,D){const O=b.text.placedSymbolArray,z=b.text.dynamicLayoutVertexArray,H=b.icon.dynamicLayoutVertexArray,X={};z.clear();for(let ot=0;ot<O.length;ot++){const Z=O.get(ot),st=Z.hidden||!Z.crossTileID||b.allowVerticalPlacement&&!Z.placedOrientation?null:g[Z.crossTileID];if(st){const mt=new o.P(Z.anchorX,Z.anchorY),gt={getElevation:D,width:y.width,height:y.height,labelPlaneMatrix:x,lineVertexArray:null,pitchWithMap:c,projection:F,projectionCache:null,tileAnchorPoint:mt,translation:E,unwrappedTileID:k},ut=c?Dr(mt,T,D):vt(mt.x,mt.y,gt),ft=pt(y.cameraToCenterDistance,ut.signedDistanceFromCamera);let zt=o.ai(b.textSizeData,f,Z)*ft/o.ap;c&&(zt*=b.tilePixelRatio/u);const{width:Kt,height:Mt,anchor:ee,textOffset:oe,textBoxScale:_e}=st,re=Ia(ee,Kt,Mt,oe,_e,zt),ye=F.getPitchedTextCorrection(y,mt.add(new o.P(E[0],E[1])),k),Oe=cl(ut.point,gt,r,re,y.angle,ye),hr=b.allowVerticalPlacement&&Z.placedOrientation===o.ah.vertical?Math.PI/2:0;for(let He=0;He<Z.numGlyphs;He++)o.aj(z,Oe,hr);_&&Z.associatedIconIndex>=0&&(X[Z.associatedIconIndex]={shiftedAnchor:Oe,angle:hr})}else Ee(Z.numGlyphs,z)}if(_){H.clear();const ot=b.icon.placedSymbolArray;for(let Z=0;Z<ot.length;Z++){const st=ot.get(Z);if(st.hidden)Ee(st.numGlyphs,H);else{const mt=X[Z];if(mt)for(let gt=0;gt<st.numGlyphs;gt++)o.aj(H,mt.shiftedAnchor,mt.angle);else Ee(st.numGlyphs,H)}}b.icon.dynamicLayoutVertexBuffer.updateData(H)}b.text.dynamicLayoutVertexBuffer.updateData(z)}function lo(b,r,c){return c.iconsInText&&r?"symbolTextAndIcon":b?"symbolSDF":"symbolIcon"}function la(b,r,c,g,y,x,T,u,f,_,F,E){const k=b.context,D=k.gl,O=b.transform,z=tn(),H=u==="map",X=f==="map",ot=u!=="viewport"&&c.layout.get("symbol-placement")!=="point",Z=H&&!X&&!ot,st=!X&&ot,mt=!c.layout.get("symbol-sort-key").isConstant();let gt=!1;const ut=b.depthModeForSublayer(0,er.ReadOnly),ft=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),zt=[],Kt=z.getCircleRadiusCorrection(O);for(const Mt of g){const ee=r.getTile(Mt),oe=ee.getBucket(c);if(!oe)continue;const _e=y?oe.text:oe.icon;if(!_e||!_e.segments.get().length||!_e.hasVisibleVertices)continue;const re=_e.programConfigurations.get(c.id),ye=y||oe.sdfIcons,Oe=y?oe.textSizeData:oe.iconSizeData,hr=X||O.pitch!==0,He=b.useProgram(lo(ye,y,oe),re),rr=o.ag(Oe,O.zoom),_r=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Mt);let mr,ei,Rr,Xr,oi=[0,0],Qr=null;if(y)ei=ee.glyphAtlasTexture,Rr=D.LINEAR,mr=ee.glyphAtlasTexture.size,oe.iconsInText&&(oi=ee.imageAtlasTexture.size,Qr=ee.imageAtlasTexture,Xr=hr||b.options.rotating||b.options.zooming||Oe.kind==="composite"||Oe.kind==="camera"?D.LINEAR:D.NEAREST);else{const xi=c.layout.get("icon-size").constantOr(0)!==1||oe.iconsNeedLinear;ei=ee.imageAtlasTexture,Rr=ye||b.options.rotating||b.options.zooming||xi||hr?D.LINEAR:D.NEAREST,mr=ee.imageAtlasTexture.size}const Ai=ar(ee,1,b.transform.zoom),Li=st?Mt.posMatrix:zn,Ei=Fi(Li,X,H,b.transform,Ai),Gi=zr(Li,X,H,b.transform,Ai),Wi=zr(Mt.posMatrix,X,H,b.transform,Ai),un=z.translatePosition(b.transform,ee,x,T),os=ft&&oe.hasTextData(),Xi=c.layout.get("icon-text-fit")!=="none"&&os&&oe.hasIconData();if(ot){const xi=b.style.map.terrain?(Yo,Ni)=>b.style.map.terrain.getElevation(Mt,Yo,Ni):null,Da=c.layout.get("text-rotation-alignment")==="map";q(oe,Mt.posMatrix,b,y,Ei,Wi,X,_,Da,z,Mt.toUnwrapped(),O.width,O.height,un,xi)}const bi=Mt.posMatrix,xn=y&&ft||Xi,As=ot||xn?zn:Ei,ls=Gi,Hr=ye&&c.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let hn;hn=ye?oe.iconsInText?kc(Oe.kind,rr,Z,X,ot,xn,b,bi,As,ls,un,mr,oi,Kt):jl(Oe.kind,rr,Z,X,ot,xn,b,bi,As,ls,un,y,mr,!0,Kt):_A(Oe.kind,rr,Z,X,ot,xn,b,bi,As,ls,un,y,mr,Kt);const rn={program:He,buffers:_e,uniformValues:hn,atlasTexture:ei,atlasTextureIcon:Qr,atlasInterpolation:Rr,atlasInterpolationIcon:Xr,isSDF:ye,hasHalo:Hr};if(mt&&oe.canOverlap){gt=!0;const xi=_e.segments.get();for(const Da of xi)zt.push({segments:new o.$([Da]),sortKey:Da.sortKey,state:rn,terrainData:_r})}else zt.push({segments:_e.segments,sortKey:0,state:rn,terrainData:_r})}gt&&zt.sort((Mt,ee)=>Mt.sortKey-ee.sortKey);for(const Mt of zt){const ee=Mt.state;if(k.activeTexture.set(D.TEXTURE0),ee.atlasTexture.bind(ee.atlasInterpolation,D.CLAMP_TO_EDGE),ee.atlasTextureIcon&&(k.activeTexture.set(D.TEXTURE1),ee.atlasTextureIcon&&ee.atlasTextureIcon.bind(ee.atlasInterpolationIcon,D.CLAMP_TO_EDGE)),ee.isSDF){const oe=ee.uniformValues;ee.hasHalo&&(oe.u_is_halo=1,co(ee.buffers,Mt.segments,c,b,ee.program,ut,F,E,oe,Mt.terrainData)),oe.u_is_halo=0}co(ee.buffers,Mt.segments,c,b,ee.program,ut,F,E,ee.uniformValues,Mt.terrainData)}}function co(b,r,c,g,y,x,T,u,f,_){const F=g.context;y.draw(F,F.gl.TRIANGLES,x,T,u,Nr.disabled,f,_,c.id,b.layoutVertexBuffer,b.indexBuffer,r,c.paint,g.transform.zoom,b.programConfigurations.get(c.id),b.dynamicLayoutVertexBuffer,b.opacityVertexBuffer)}function _s(b,r,c,g,y){if(!c||!g||!g.imageAtlas)return;const x=g.imageAtlas.patternPositions;let T=x[c.to.toString()],u=x[c.from.toString()];if(!T&&u&&(T=u),!u&&T&&(u=T),!T||!u){const f=y.getPaintProperty(r);T=x[f],u=x[f]}T&&u&&b.setConstantPatternPositions(T,u)}function bs(b,r,c,g,y,x,T){const u=b.context.gl,f="fill-pattern",_=c.paint.get(f),F=_&&_.constantOr(1),E=c.getCrossfadeParameters();let k,D,O,z,H;T?(D=F&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",k=u.LINES):(D=F?"fillPattern":"fill",k=u.TRIANGLES);const X=_.constantOr(null);for(const ot of g){const Z=r.getTile(ot);if(F&&!Z.patternsLoaded())continue;const st=Z.getBucket(c);if(!st)continue;const mt=st.programConfigurations.get(c.id),gt=b.useProgram(D,mt),ut=b.style.map.terrain&&b.style.map.terrain.getTerrainData(ot);F&&(b.context.activeTexture.set(u.TEXTURE0),Z.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),mt.updatePaintBuffers(E)),_s(mt,f,X,Z,c);const ft=ut?ot:null,zt=b.translatePosMatrix(ft?ft.posMatrix:ot.posMatrix,Z,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(T){z=st.indexBuffer2,H=st.segments2;const Kt=[u.drawingBufferWidth,u.drawingBufferHeight];O=D==="fillOutlinePattern"&&F?Ho(zt,b,E,Z,Kt):fA(zt,Kt)}else z=st.indexBuffer,H=st.segments,O=F?zo(zt,b,E,Z):eo(zt);gt.draw(b.context,k,y,b.stencilModeForClipping(ot),x,Nr.disabled,O,ut,c.id,st.layoutVertexBuffer,z,H,c.paint,b.transform.zoom,mt)}}function ci(b,r,c,g,y,x,T){const u=b.context,f=u.gl,_="fill-extrusion-pattern",F=c.paint.get(_),E=F.constantOr(1),k=c.getCrossfadeParameters(),D=c.paint.get("fill-extrusion-opacity"),O=F.constantOr(null);for(const z of g){const H=r.getTile(z),X=H.getBucket(c);if(!X)continue;const ot=b.style.map.terrain&&b.style.map.terrain.getTerrainData(z),Z=X.programConfigurations.get(c.id),st=b.useProgram(E?"fillExtrusionPattern":"fillExtrusion",Z);E&&(b.context.activeTexture.set(f.TEXTURE0),H.imageAtlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE),Z.updatePaintBuffers(k)),_s(Z,_,O,H,c);const mt=b.translatePosMatrix(z.posMatrix,H,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),gt=c.paint.get("fill-extrusion-vertical-gradient"),ut=E?il(mt,b,gt,D,z,k,H):to(mt,b,gt,D);st.draw(u,u.gl.TRIANGLES,y,x,T,Nr.backCCW,ut,ot,c.id,X.layoutVertexBuffer,X.indexBuffer,X.segments,c.paint,b.transform.zoom,Z,b.style.map.terrain&&X.centroidVertexBuffer)}}function Ko(b,r,c,g,y,x,T){const u=b.context,f=u.gl,_=c.fbo;if(!_)return;const F=b.useProgram("hillshade"),E=b.style.map.terrain&&b.style.map.terrain.getTerrainData(r);u.activeTexture.set(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,_.colorAttachment.get()),F.draw(u,f.TRIANGLES,y,x,T,Nr.disabled,((k,D,O,z)=>{const H=O.paint.get("hillshade-shadow-color"),X=O.paint.get("hillshade-highlight-color"),ot=O.paint.get("hillshade-accent-color");let Z=O.paint.get("hillshade-illumination-direction")*(Math.PI/180);O.paint.get("hillshade-illumination-anchor")==="viewport"&&(Z-=k.transform.angle);const st=!k.options.moving;return{u_matrix:z?z.posMatrix:k.transform.calculatePosMatrix(D.tileID.toUnwrapped(),st),u_image:0,u_latrange:mA(0,D.tileID),u_light:[O.paint.get("hillshade-exaggeration"),Z],u_shadow:H,u_highlight:X,u_accent:ot}})(b,c,g,E?r:null),E,g.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments)}function $o(b,r,c,g,y,x){const T=b.context,u=T.gl,f=r.dem;if(f&&f.data){const _=f.dim,F=f.stride,E=f.getPixels();if(T.activeTexture.set(u.TEXTURE1),T.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||b.getTileTexture(F),r.demTexture){const D=r.demTexture;D.update(E,{premultiply:!1}),D.bind(u.NEAREST,u.CLAMP_TO_EDGE)}else r.demTexture=new At(T,E,u.RGBA,{premultiply:!1}),r.demTexture.bind(u.NEAREST,u.CLAMP_TO_EDGE);T.activeTexture.set(u.TEXTURE0);let k=r.fbo;if(!k){const D=new At(T,{width:_,height:_,data:null},u.RGBA);D.bind(u.LINEAR,u.CLAMP_TO_EDGE),k=r.fbo=T.createFramebuffer(_,_,!0,!1),k.colorAttachment.set(D.texture)}T.bindFramebuffer.set(k.framebuffer),T.viewport.set([0,0,_,_]),b.useProgram("hillshadePrepare").draw(T,u.TRIANGLES,g,y,x,Nr.disabled,((D,O)=>{const z=O.stride,H=o.F();return o.aO(H,0,o.W,-o.W,0,0,1),o.H(H,H,[0,-o.W,0]),{u_matrix:H,u_image:1,u_dimension:[z,z],u_zoom:D.overscaledZ,u_unpack:O.getUnpackVector()}})(r.tileID,f),null,c.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function uo(b,r,c,g,y,x){const T=g.paint.get("raster-fade-duration");if(!x&&T>0){const u=U.now(),f=(u-b.timeAdded)/T,_=r?(u-r.timeAdded)/T:-1,F=c.getSource(),E=y.coveringZoomLevel({tileSize:F.tileSize,roundZoom:F.roundZoom}),k=!r||Math.abs(r.tileID.overscaledZ-E)>Math.abs(b.tileID.overscaledZ-E),D=k&&b.refreshedUponExpiration?1:o.ac(k?f:1-_,0,1);return b.refreshedUponExpiration&&f>=1&&(b.refreshedUponExpiration=!1),r?{opacity:1,mix:1-D}:{opacity:D,mix:0}}return{opacity:1,mix:0}}const Vs=new o.aP(1,0,0,1),bn=new o.aP(0,1,0,1),IA=new o.aP(0,0,1,1),Ea=new o.aP(1,0,1,1),qo=new o.aP(0,1,1,1);function ns(b,r,c,g){Ks(b,0,r+c/2,b.transform.width,c,g)}function js(b,r,c,g){Ks(b,r-c/2,0,c,b.transform.height,g)}function Ks(b,r,c,g,y,x){const T=b.context,u=T.gl;u.enable(u.SCISSOR_TEST),u.scissor(r*b.pixelRatio,c*b.pixelRatio,g*b.pixelRatio,y*b.pixelRatio),T.clear({color:x}),u.disable(u.SCISSOR_TEST)}function Wl(b,r,c){const g=b.context,y=g.gl,x=c.posMatrix,T=b.useProgram("debug"),u=er.disabled,f=Mr.disabled,_=b.colorModeForRenderPass(),F="$debug",E=b.style.map.terrain&&b.style.map.terrain.getTerrainData(c);g.activeTexture.set(y.TEXTURE0);const k=r.getTileByID(c.key).latestRawTileData,D=Math.floor((k&&k.byteLength||0)/1024),O=r.getTile(c).tileSize,z=512/Math.min(O,512)*(c.overscaledZ/b.transform.zoom)*.5;let H=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(H+=` => ${c.overscaledZ}`),function(X,ot){X.initDebugOverlayCanvas();const Z=X.debugOverlayCanvas,st=X.context.gl,mt=X.debugOverlayCanvas.getContext("2d");mt.clearRect(0,0,Z.width,Z.height),mt.shadowColor="white",mt.shadowBlur=2,mt.lineWidth=1.5,mt.strokeStyle="white",mt.textBaseline="top",mt.font="bold 36px Open Sans, sans-serif",mt.fillText(ot,5,5),mt.strokeText(ot,5,5),X.debugOverlayTexture.update(Z),X.debugOverlayTexture.bind(st.LINEAR,st.CLAMP_TO_EDGE)}(b,`${H} ${D}kB`),T.draw(g,y.TRIANGLES,u,f,or.alphaBlended,Nr.disabled,ro(x,o.aP.transparent,z),null,F,b.debugBuffer,b.quadTriangleIndexBuffer,b.debugSegments),T.draw(g,y.LINE_STRIP,u,f,_,Nr.disabled,ro(x,o.aP.red),E,F,b.debugBuffer,b.tileBorderIndexBuffer,b.debugSegments)}function $s(b,r,c){const g=b.context,y=g.gl,x=b.colorModeForRenderPass(),T=new er(y.LEQUAL,er.ReadWrite,b.depthRangeFor3D),u=b.useProgram("terrain"),f=r.getTerrainMesh();g.bindFramebuffer.set(null),g.viewport.set([0,0,b.width,b.height]);for(const _ of c){const F=b.renderToTexture.getTexture(_),E=r.getTerrainData(_.tileID);g.activeTexture.set(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,F.texture);const k={u_matrix:b.transform.calculatePosMatrix(_.tileID.toUnwrapped()),u_texture:0,u_ele_delta:r.getMeshFrameDelta(b.transform.zoom)};u.draw(g,y.TRIANGLES,T,Mr.disabled,x,Nr.backCCW,k,E,"terrain",f.vertexBuffer,f.indexBuffer,f.segments)}}class Lr{constructor(r,c){this.context=new qr(r),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=he.maxUnderzooming+he.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new wi}resize(r,c,g){if(this.width=Math.floor(r*g),this.height=Math.floor(c*g),this.pixelRatio=g,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style._order)this.style._layers[y].resize()}setup(){const r=this.context,c=new o.aW;c.emplaceBack(0,0),c.emplaceBack(o.W,0),c.emplaceBack(0,o.W),c.emplaceBack(o.W,o.W),this.tileExtentBuffer=r.createVertexBuffer(c,Ki.members),this.tileExtentSegments=o.$.simpleSegment(0,0,4,2);const g=new o.aW;g.emplaceBack(0,0),g.emplaceBack(o.W,0),g.emplaceBack(0,o.W),g.emplaceBack(o.W,o.W),this.debugBuffer=r.createVertexBuffer(g,Ki.members),this.debugSegments=o.$.simpleSegment(0,0,4,5);const y=new o.Z;y.emplaceBack(0,0,0,0),y.emplaceBack(o.W,0,o.W,0),y.emplaceBack(0,o.W,0,o.W),y.emplaceBack(o.W,o.W,o.W,o.W),this.rasterBoundsBuffer=r.createVertexBuffer(y,ge.members),this.rasterBoundsSegments=o.$.simpleSegment(0,0,4,2);const x=new o.aW;x.emplaceBack(0,0),x.emplaceBack(1,0),x.emplaceBack(0,1),x.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(x,Ki.members),this.viewportSegments=o.$.simpleSegment(0,0,4,2);const T=new o.aX;T.emplaceBack(0),T.emplaceBack(1),T.emplaceBack(3),T.emplaceBack(2),T.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(T);const u=new o.aY;u.emplaceBack(0,1,2),u.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(u);const f=this.context.gl;this.stencilClearMode=new Mr({func:f.ALWAYS,mask:0},0,255,f.ZERO,f.ZERO,f.ZERO)}clearStencil(){const r=this.context,c=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const g=o.F();o.aO(g,0,this.width,this.height,0,0,1),o.J(g,g,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,c.TRIANGLES,er.disabled,this.stencilClearMode,or.disabled,Nr.disabled,nl(g),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,c){if(this.currentStencilSource===r.source||!r.isTileClipped()||!c||!c.length)return;this.currentStencilSource=r.source;const g=this.context,y=g.gl;this.nextStencilID+c.length>256&&this.clearStencil(),g.setColorMode(or.disabled),g.setDepthMode(er.disabled);const x=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const T of c){const u=this._tileClippingMaskIDs[T.key]=this.nextStencilID++,f=this.style.map.terrain&&this.style.map.terrain.getTerrainData(T);x.draw(g,y.TRIANGLES,er.disabled,new Mr({func:y.ALWAYS,mask:0},u,255,y.KEEP,y.KEEP,y.REPLACE),or.disabled,Nr.disabled,nl(T.posMatrix),f,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,c=this.context.gl;return new Mr({func:c.NOTEQUAL,mask:255},r,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(r){const c=this.context.gl;return new Mr({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(r){const c=this.context.gl,g=r.sort((T,u)=>u.overscaledZ-T.overscaledZ),y=g[g.length-1].overscaledZ,x=g[0].overscaledZ-y+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const T={};for(let u=0;u<x;u++)T[u+y]=new Mr({func:c.GEQUAL,mask:255},u+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=x,[T,g]}return[{[y]:Mr.disabled},g]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new or([r.CONSTANT_COLOR,r.ONE],new o.aP(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?or.unblended:or.alphaBlended}depthModeForSublayer(r,c,g){if(!this.opaquePassEnabledForLayer())return er.disabled;const y=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new er(g||this.context.gl.LEQUAL,c,[y,y])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,c){this.style=r,this.options=c,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(U.now()),this.imageManager.beginFrame();const g=this.style._order,y=this.style.sourceCaches,x={},T={},u={};for(const f in y){const _=y[f];_.used&&_.prepare(this.context),x[f]=_.getVisibleCoordinates(),T[f]=x[f].slice().reverse(),u[f]=_.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let f=0;f<g.length;f++)if(this.style._layers[g[f]].is3D()){this.opaquePassCutoff=f;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const f of g){const _=this.style._layers[f];if(!_.hasOffscreenPass()||_.isHidden(this.transform.zoom))continue;const F=T[_.source];(_.type==="custom"||F.length)&&this.renderLayer(this,y[_.source],_,F)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?o.aP.black:o.aP.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=g.length-1;this.currentLayer>=0;this.currentLayer--){const f=this.style._layers[g[this.currentLayer]],_=y[f.source],F=x[f.source];this._renderTileClippingMasks(f,F),this.renderLayer(this,_,f,F)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<g.length;this.currentLayer++){const f=this.style._layers[g[this.currentLayer]],_=y[f.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(f))continue;const F=(f.type==="symbol"?u:T)[f.source];this._renderTileClippingMasks(f,x[f.source]),this.renderLayer(this,_,f,F)}if(this.options.showTileBoundaries){const f=function(_,F){let E=null;const k=Object.values(_._layers).flatMap(H=>H.source&&!H.isHidden(F)?[_.sourceCaches[H.source]]:[]),D=k.filter(H=>H.getSource().type==="vector"),O=k.filter(H=>H.getSource().type!=="vector"),z=H=>{(!E||E.getSource().maxzoom<H.getSource().maxzoom)&&(E=H)};return D.forEach(H=>z(H)),E||O.forEach(H=>z(H)),E}(this.style,this.transform.zoom);f&&function(_,F,E){for(let k=0;k<E.length;k++)Wl(_,F,E[k])}(this,f,f.getVisibleCoordinates())}this.options.showPadding&&function(f){const _=f.transform.padding;ns(f,f.transform.height-(_.top||0),3,Vs),ns(f,_.bottom||0,3,bn),js(f,_.left||0,3,IA),js(f,f.transform.width-(_.right||0),3,Ea);const F=f.transform.centerPoint;(function(E,k,D,O){Ks(E,k-1,D-10,2,20,O),Ks(E,k-10,D-1,20,2,O)})(f,F.x,f.transform.height-F.y,qo)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,g=this.transform.modelViewProjectionMatrix;let y=this.terrainFacilitator.dirty;y||(y=r?!o.aZ(c,g):!o.a_(c,g)),y||(y=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),y&&(o.a$(c,g),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(x,T){const u=x.context,f=u.gl,_=or.unblended,F=new er(f.LEQUAL,er.ReadWrite,[0,1]),E=T.getTerrainMesh(),k=T.sourceCache.getRenderableTiles(),D=x.useProgram("terrainDepth");u.bindFramebuffer.set(T.getFramebuffer("depth").framebuffer),u.viewport.set([0,0,x.width/devicePixelRatio,x.height/devicePixelRatio]),u.clear({color:o.aP.transparent,depth:1});for(const O of k){const z=T.getTerrainData(O.tileID),H={u_matrix:x.transform.calculatePosMatrix(O.tileID.toUnwrapped()),u_ele_delta:T.getMeshFrameDelta(x.transform.zoom)};D.draw(u,f.TRIANGLES,F,Mr.disabled,_,Nr.backCCW,H,z,"terrain",E.vertexBuffer,E.indexBuffer,E.segments)}u.bindFramebuffer.set(null),u.viewport.set([0,0,x.width,x.height])}(this,this.style.map.terrain),function(x,T){const u=x.context,f=u.gl,_=or.unblended,F=new er(f.LEQUAL,er.ReadWrite,[0,1]),E=T.getTerrainMesh(),k=T.getCoordsTexture(),D=T.sourceCache.getRenderableTiles(),O=x.useProgram("terrainCoords");u.bindFramebuffer.set(T.getFramebuffer("coords").framebuffer),u.viewport.set([0,0,x.width/devicePixelRatio,x.height/devicePixelRatio]),u.clear({color:o.aP.transparent,depth:1}),T.coordsIndex=[];for(const z of D){const H=T.getTerrainData(z.tileID);u.activeTexture.set(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,k.texture);const X={u_matrix:x.transform.calculatePosMatrix(z.tileID.toUnwrapped()),u_terrain_coords_id:(255-T.coordsIndex.length)/255,u_texture:0,u_ele_delta:T.getMeshFrameDelta(x.transform.zoom)};O.draw(u,f.TRIANGLES,F,Mr.disabled,_,Nr.backCCW,X,H,"terrain",E.vertexBuffer,E.indexBuffer,E.segments),T.coordsIndex.push(z.tileID.key)}u.bindFramebuffer.set(null),u.viewport.set([0,0,x.width,x.height])}(this,this.style.map.terrain))}renderLayer(r,c,g,y){if(!g.isHidden(this.transform.zoom)&&(g.type==="background"||g.type==="custom"||(y||[]).length))switch(this.id=g.id,g.type){case"symbol":(function(x,T,u,f,_){if(x.renderPass!=="translucent")return;const F=Mr.disabled,E=x.colorModeForRenderPass();(u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(k,D,O,z,H,X,ot,Z,st){const mt=D.transform,gt=tn(),ut=H==="map",ft=X==="map";for(const zt of k){const Kt=z.getTile(zt),Mt=Kt.getBucket(O);if(!Mt||!Mt.text||!Mt.text.segments.get().length)continue;const ee=o.ag(Mt.textSizeData,mt.zoom),oe=ar(Kt,1,D.transform.zoom),_e=Fi(zt.posMatrix,ft,ut,D.transform,oe),re=O.layout.get("icon-text-fit")!=="none"&&Mt.hasIconData();if(ee){const ye=Math.pow(2,mt.zoom-Kt.tileID.overscaledZ),Oe=D.style.map.terrain?(He,rr)=>D.style.map.terrain.getElevation(zt,He,rr):null,hr=gt.translatePosition(mt,Kt,ot,Z);Ao(Mt,ut,ft,st,mt,_e,zt.posMatrix,ye,ee,re,gt,hr,zt.toUnwrapped(),Oe)}}}(f,x,u,T,u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),_),u.paint.get("icon-opacity").constantOr(1)!==0&&la(x,T,u,f,!1,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),u.layout.get("icon-rotation-alignment"),u.layout.get("icon-pitch-alignment"),u.layout.get("icon-keep-upright"),F,E),u.paint.get("text-opacity").constantOr(1)!==0&&la(x,T,u,f,!0,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),u.layout.get("text-keep-upright"),F,E),T.map.showCollisionBoxes&&(ws(x,T,u,f,!0),ws(x,T,u,f,!1))})(r,c,g,y,this.style.placement.variableOffsets);break;case"circle":(function(x,T,u,f){if(x.renderPass!=="translucent")return;const _=u.paint.get("circle-opacity"),F=u.paint.get("circle-stroke-width"),E=u.paint.get("circle-stroke-opacity"),k=!u.layout.get("circle-sort-key").isConstant();if(_.constantOr(1)===0&&(F.constantOr(1)===0||E.constantOr(1)===0))return;const D=x.context,O=D.gl,z=x.depthModeForSublayer(0,er.ReadOnly),H=Mr.disabled,X=x.colorModeForRenderPass(),ot=[];for(let Z=0;Z<f.length;Z++){const st=f[Z],mt=T.getTile(st),gt=mt.getBucket(u);if(!gt)continue;const ut=gt.programConfigurations.get(u.id),ft=x.useProgram("circle",ut),zt=gt.layoutVertexBuffer,Kt=gt.indexBuffer,Mt=x.style.map.terrain&&x.style.map.terrain.getTerrainData(st),ee={programConfiguration:ut,program:ft,layoutVertexBuffer:zt,indexBuffer:Kt,uniformValues:xa(x,st,mt,u),terrainData:Mt};if(k){const oe=gt.segments.get();for(const _e of oe)ot.push({segments:new o.$([_e]),sortKey:_e.sortKey,state:ee})}else ot.push({segments:gt.segments,sortKey:0,state:ee})}k&&ot.sort((Z,st)=>Z.sortKey-st.sortKey);for(const Z of ot){const{programConfiguration:st,program:mt,layoutVertexBuffer:gt,indexBuffer:ut,uniformValues:ft,terrainData:zt}=Z.state;mt.draw(D,O.TRIANGLES,z,H,X,Nr.disabled,ft,zt,u.id,gt,ut,Z.segments,u.paint,x.transform.zoom,st)}})(r,c,g,y);break;case"heatmap":(function(x,T,u,f){if(u.paint.get("heatmap-opacity")!==0)if(x.renderPass==="offscreen"){const _=x.context,F=_.gl,E=Mr.disabled,k=new or([F.ONE,F.ONE],o.aP.transparent,[!0,!0,!0,!0]);(function(D,O,z){const H=D.gl;D.activeTexture.set(H.TEXTURE1),D.viewport.set([0,0,O.width/4,O.height/4]);let X=z.heatmapFbo;if(X)H.bindTexture(H.TEXTURE_2D,X.colorAttachment.get()),D.bindFramebuffer.set(X.framebuffer);else{const ot=H.createTexture();H.bindTexture(H.TEXTURE_2D,ot),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_S,H.CLAMP_TO_EDGE),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_T,H.CLAMP_TO_EDGE),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MIN_FILTER,H.LINEAR),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MAG_FILTER,H.LINEAR),X=z.heatmapFbo=D.createFramebuffer(O.width/4,O.height/4,!1,!1),function(Z,st,mt,gt){var ut,ft;const zt=Z.gl,Kt=(ut=Z.HALF_FLOAT)!==null&&ut!==void 0?ut:zt.UNSIGNED_BYTE,Mt=(ft=Z.RGBA16F)!==null&&ft!==void 0?ft:zt.RGBA;zt.texImage2D(zt.TEXTURE_2D,0,Mt,st.width/4,st.height/4,0,zt.RGBA,Kt,null),gt.colorAttachment.set(mt)}(D,O,ot,X)}})(_,x,u),_.clear({color:o.aP.transparent});for(let D=0;D<f.length;D++){const O=f[D];if(T.hasRenderableParent(O))continue;const z=T.getTile(O),H=z.getBucket(u);if(!H)continue;const X=H.programConfigurations.get(u.id),ot=x.useProgram("heatmap",X),{zoom:Z}=x.transform;ot.draw(_,F.TRIANGLES,er.disabled,E,k,Nr.disabled,Di(O.posMatrix,z,Z,u.paint.get("heatmap-intensity")),null,u.id,H.layoutVertexBuffer,H.indexBuffer,H.segments,u.paint,x.transform.zoom,X)}_.viewport.set([0,0,x.width,x.height])}else x.renderPass==="translucent"&&(x.context.setColorMode(x.colorModeForRenderPass()),function(_,F){const E=_.context,k=E.gl,D=F.heatmapFbo;if(!D)return;E.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,D.colorAttachment.get()),E.activeTexture.set(k.TEXTURE1);let O=F.colorRampTexture;O||(O=F.colorRampTexture=new At(E,F.colorRamp,k.RGBA)),O.bind(k.LINEAR,k.CLAMP_TO_EDGE),_.useProgram("heatmapTexture").draw(E,k.TRIANGLES,er.disabled,Mr.disabled,_.colorModeForRenderPass(),Nr.disabled,((z,H,X,ot)=>{const Z=o.F();o.aO(Z,0,z.width,z.height,0,0,1);const st=z.context.gl;return{u_matrix:Z,u_world:[st.drawingBufferWidth,st.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:H.paint.get("heatmap-opacity")}})(_,F),null,F.id,_.viewportBuffer,_.quadTriangleIndexBuffer,_.viewportSegments,F.paint,_.transform.zoom)}(x,u))})(r,c,g,y);break;case"line":(function(x,T,u,f){if(x.renderPass!=="translucent")return;const _=u.paint.get("line-opacity"),F=u.paint.get("line-width");if(_.constantOr(1)===0||F.constantOr(1)===0)return;const E=x.depthModeForSublayer(0,er.ReadOnly),k=x.colorModeForRenderPass(),D=u.paint.get("line-dasharray"),O=u.paint.get("line-pattern"),z=O.constantOr(1),H=u.paint.get("line-gradient"),X=u.getCrossfadeParameters(),ot=z?"linePattern":D?"lineSDF":H?"lineGradient":"line",Z=x.context,st=Z.gl;let mt=!0;for(const gt of f){const ut=T.getTile(gt);if(z&&!ut.patternsLoaded())continue;const ft=ut.getBucket(u);if(!ft)continue;const zt=ft.programConfigurations.get(u.id),Kt=x.context.program.get(),Mt=x.useProgram(ot,zt),ee=mt||Mt.program!==Kt,oe=x.style.map.terrain&&x.style.map.terrain.getTerrainData(gt),_e=O.constantOr(null);if(_e&&ut.imageAtlas){const Oe=ut.imageAtlas,hr=Oe.patternPositions[_e.to.toString()],He=Oe.patternPositions[_e.from.toString()];hr&&He&&zt.setConstantPatternPositions(hr,He)}const re=oe?gt:null,ye=z?sl(x,ut,u,X,re):D?yA(x,ut,u,D,X,re):H?fr(x,ut,u,ft.lineClipsArray.length,re):on(x,ut,u,re);if(z)Z.activeTexture.set(st.TEXTURE0),ut.imageAtlasTexture.bind(st.LINEAR,st.CLAMP_TO_EDGE),zt.updatePaintBuffers(X);else if(D&&(ee||x.lineAtlas.dirty))Z.activeTexture.set(st.TEXTURE0),x.lineAtlas.bind(Z);else if(H){const Oe=ft.gradients[u.id];let hr=Oe.texture;if(u.gradientVersion!==Oe.version){let He=256;if(u.stepInterpolant){const rr=T.getSource().maxzoom,_r=gt.canonical.z===rr?Math.ceil(1<<x.transform.maxZoom-gt.canonical.z):1;He=o.ac(o.aU(ft.maxLineLength/o.W*1024*_r),256,Z.maxTextureSize)}Oe.gradient=o.aV({expression:u.gradientExpression(),evaluationKey:"lineProgress",resolution:He,image:Oe.gradient||void 0,clips:ft.lineClipsArray}),Oe.texture?Oe.texture.update(Oe.gradient):Oe.texture=new At(Z,Oe.gradient,st.RGBA),Oe.version=u.gradientVersion,hr=Oe.texture}Z.activeTexture.set(st.TEXTURE0),hr.bind(u.stepInterpolant?st.NEAREST:st.LINEAR,st.CLAMP_TO_EDGE)}Mt.draw(Z,st.TRIANGLES,E,x.stencilModeForClipping(gt),k,Nr.disabled,ye,oe,u.id,ft.layoutVertexBuffer,ft.indexBuffer,ft.segments,u.paint,x.transform.zoom,zt,ft.layoutVertexBuffer2),mt=!1}})(r,c,g,y);break;case"fill":(function(x,T,u,f){const _=u.paint.get("fill-color"),F=u.paint.get("fill-opacity");if(F.constantOr(1)===0)return;const E=x.colorModeForRenderPass(),k=u.paint.get("fill-pattern"),D=x.opaquePassEnabledForLayer()&&!k.constantOr(1)&&_.constantOr(o.aP.transparent).a===1&&F.constantOr(0)===1?"opaque":"translucent";if(x.renderPass===D){const O=x.depthModeForSublayer(1,x.renderPass==="opaque"?er.ReadWrite:er.ReadOnly);bs(x,T,u,f,O,E,!1)}if(x.renderPass==="translucent"&&u.paint.get("fill-antialias")){const O=x.depthModeForSublayer(u.getPaintProperty("fill-outline-color")?2:0,er.ReadOnly);bs(x,T,u,f,O,E,!0)}})(r,c,g,y);break;case"fill-extrusion":(function(x,T,u,f){const _=u.paint.get("fill-extrusion-opacity");if(_!==0&&x.renderPass==="translucent"){const F=new er(x.context.gl.LEQUAL,er.ReadWrite,x.depthRangeFor3D);if(_!==1||u.paint.get("fill-extrusion-pattern").constantOr(1))ci(x,T,u,f,F,Mr.disabled,or.disabled),ci(x,T,u,f,F,x.stencilModeFor3D(),x.colorModeForRenderPass());else{const E=x.colorModeForRenderPass();ci(x,T,u,f,F,Mr.disabled,E)}}})(r,c,g,y);break;case"hillshade":(function(x,T,u,f){if(x.renderPass!=="offscreen"&&x.renderPass!=="translucent")return;const _=x.context,F=x.depthModeForSublayer(0,er.ReadOnly),E=x.colorModeForRenderPass(),[k,D]=x.renderPass==="translucent"?x.stencilConfigForOverlap(f):[{},f];for(const O of D){const z=T.getTile(O);z.needsHillshadePrepare!==void 0&&z.needsHillshadePrepare&&x.renderPass==="offscreen"?$o(x,z,u,F,Mr.disabled,E):x.renderPass==="translucent"&&Ko(x,O,z,u,F,k[O.overscaledZ],E)}_.viewport.set([0,0,x.width,x.height])})(r,c,g,y);break;case"raster":(function(x,T,u,f){if(x.renderPass!=="translucent"||u.paint.get("raster-opacity")===0||!f.length)return;const _=x.context,F=_.gl,E=T.getSource(),k=x.useProgram("raster"),D=x.colorModeForRenderPass(),[O,z]=E instanceof Se?[{},f]:x.stencilConfigForOverlap(f),H=z[z.length-1].overscaledZ,X=!x.options.moving;for(const ot of z){const Z=x.depthModeForSublayer(ot.overscaledZ-H,u.paint.get("raster-opacity")===1?er.ReadWrite:er.ReadOnly,F.LESS),st=T.getTile(ot);st.registerFadeDuration(u.paint.get("raster-fade-duration"));const mt=T.findLoadedParent(ot,0),gt=T.findLoadedSibling(ot),ut=uo(st,mt||gt||null,T,u,x.transform,x.style.map.terrain);let ft,zt;const Kt=u.paint.get("raster-resampling")==="nearest"?F.NEAREST:F.LINEAR;_.activeTexture.set(F.TEXTURE0),st.texture.bind(Kt,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),_.activeTexture.set(F.TEXTURE1),mt?(mt.texture.bind(Kt,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),ft=Math.pow(2,mt.tileID.overscaledZ-st.tileID.overscaledZ),zt=[st.tileID.canonical.x*ft%1,st.tileID.canonical.y*ft%1]):st.texture.bind(Kt,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST);const Mt=x.style.map.terrain&&x.style.map.terrain.getTerrainData(ot),ee=Mt?ot:null,oe=ee?ee.posMatrix:x.transform.calculatePosMatrix(ot.toUnwrapped(),X),_e=Ba(oe,zt||[0,0],ft||1,ut,u);E instanceof Se?k.draw(_,F.TRIANGLES,Z,Mr.disabled,D,Nr.disabled,_e,Mt,u.id,E.boundsBuffer,x.quadTriangleIndexBuffer,E.boundsSegments):k.draw(_,F.TRIANGLES,Z,O[ot.overscaledZ],D,Nr.disabled,_e,Mt,u.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments)}})(r,c,g,y);break;case"background":(function(x,T,u,f){const _=u.paint.get("background-color"),F=u.paint.get("background-opacity");if(F===0)return;const E=x.context,k=E.gl,D=x.transform,O=D.tileSize,z=u.paint.get("background-pattern");if(x.isPatternMissing(z))return;const H=!z&&_.a===1&&F===1&&x.opaquePassEnabledForLayer()?"opaque":"translucent";if(x.renderPass!==H)return;const X=Mr.disabled,ot=x.depthModeForSublayer(0,H==="opaque"?er.ReadWrite:er.ReadOnly),Z=x.colorModeForRenderPass(),st=x.useProgram(z?"backgroundPattern":"background"),mt=f||D.coveringTiles({tileSize:O,terrain:x.style.map.terrain});z&&(E.activeTexture.set(k.TEXTURE0),x.imageManager.bind(x.context));const gt=u.getCrossfadeParameters();for(const ut of mt){const ft=f?ut.posMatrix:x.transform.calculatePosMatrix(ut.toUnwrapped()),zt=z?al(ft,F,x,z,{tileID:ut,tileSize:O},gt):Dc(ft,F,_),Kt=x.style.map.terrain&&x.style.map.terrain.getTerrainData(ut);st.draw(E,k.TRIANGLES,ot,X,Z,Nr.disabled,zt,Kt,u.id,x.tileExtentBuffer,x.quadTriangleIndexBuffer,x.tileExtentSegments)}})(r,0,g,y);break;case"custom":(function(x,T,u){const f=x.context,_=u.implementation;if(x.renderPass==="offscreen"){const F=_.prerender;F&&(x.setCustomLayerDefaults(),f.setColorMode(x.colorModeForRenderPass()),F.call(_,f.gl,x.transform.customLayerMatrix()),f.setDirty(),x.setBaseState())}else if(x.renderPass==="translucent"){x.setCustomLayerDefaults(),f.setColorMode(x.colorModeForRenderPass()),f.setStencilMode(Mr.disabled);const F=_.renderingMode==="3d"?new er(x.context.gl.LEQUAL,er.ReadWrite,x.depthRangeFor3D):x.depthModeForSublayer(0,er.ReadOnly);f.setDepthMode(F),_.render(f.gl,x.transform.customLayerMatrix()),f.setDirty(),x.setBaseState(),f.bindFramebuffer.set(null)}})(r,0,g)}}translatePosMatrix(r,c,g,y,x){if(!g[0]&&!g[1])return r;const T=x?y==="map"?this.transform.angle:0:y==="viewport"?-this.transform.angle:0;if(T){const _=Math.sin(T),F=Math.cos(T);g=[g[0]*F-g[1]*_,g[0]*_+g[1]*F]}const u=[x?g[0]:ar(c,g[0],this.transform.zoom),x?g[1]:ar(c,g[1],this.transform.zoom),0],f=new Float32Array(16);return o.H(f,r,u),f}saveTileTexture(r){const c=this._tileTextures[r.size[0]];c?c.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const c=this._tileTextures[r];return c&&c.length>0?c.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const c=this.imageManager.getPattern(r.from.toString()),g=this.imageManager.getPattern(r.to.toString());return!c||!g}useProgram(r,c){this.cache=this.cache||{};const g=r+(c?c.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[g]||(this.cache[g]=new dA(this.context,en[r],c,aa[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[g]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new At(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:c}=this.context.gl;return this.width!==r||this.height!==c}}class In{constructor(r,c){this.points=r,this.planes=c}static fromInvProjectionMatrix(r,c,g){const y=Math.pow(2,g),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(u=>{const f=1/(u=o.af([],u,r))[3]/c*y;return o.b0(u,u,[f,f,1/u[3],f])}),T=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(u=>{const f=function(k,D){var O=D[0],z=D[1],H=D[2],X=O*O+z*z+H*H;return X>0&&(X=1/Math.sqrt(X)),k[0]=D[0]*X,k[1]=D[1]*X,k[2]=D[2]*X,k}([],function(k,D,O){var z=D[0],H=D[1],X=D[2],ot=O[0],Z=O[1],st=O[2];return k[0]=H*st-X*Z,k[1]=X*ot-z*st,k[2]=z*Z-H*ot,k}([],Ft([],x[u[0]],x[u[1]]),Ft([],x[u[2]],x[u[1]]))),_=-((F=f)[0]*(E=x[u[1]])[0]+F[1]*E[1]+F[2]*E[2]);var F,E;return f.concat(_)});return new In(x,T)}}class qs{constructor(r,c){this.min=r,this.max=c,this.center=function(g,y,x){return g[0]=.5*y[0],g[1]=.5*y[1],g[2]=.5*y[2],g}([],function(g,y,x){return g[0]=y[0]+x[0],g[1]=y[1]+x[1],g[2]=y[2]+x[2],g}([],this.min,this.max))}quadrant(r){const c=[r%2==0,r<2],g=Tt(this.min),y=Tt(this.max);for(let x=0;x<c.length;x++)g[x]=c[x]?this.min[x]:this.center[x],y[x]=c[x]?this.center[x]:this.max[x];return y[2]=this.max[2],new qs(g,y)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const c=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let g=!0;for(let y=0;y<r.planes.length;y++){const x=r.planes[y];let T=0;for(let u=0;u<c.length;u++)o.b1(x,c[u])>=0&&T++;if(T===0)return 0;T!==c.length&&(g=!1)}if(g)return 2;for(let y=0;y<3;y++){let x=Number.MAX_VALUE,T=-Number.MAX_VALUE;for(let u=0;u<r.points.length;u++){const f=r.points[u][y]-this.min[y];x=Math.min(x,f),T=Math.max(T,f)}if(T<0||x>this.max[y]-this.min[y])return 0}return 1}}class Hn{constructor(r=0,c=0,g=0,y=0){if(isNaN(r)||r<0||isNaN(c)||c<0||isNaN(g)||g<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=c,this.left=g,this.right=y}interpolate(r,c,g){return c.top!=null&&r.top!=null&&(this.top=o.z.number(r.top,c.top,g)),c.bottom!=null&&r.bottom!=null&&(this.bottom=o.z.number(r.bottom,c.bottom,g)),c.left!=null&&r.left!=null&&(this.left=o.z.number(r.left,c.left,g)),c.right!=null&&r.right!=null&&(this.right=o.z.number(r.right,c.right,g)),this}getCenter(r,c){const g=o.ac((this.left+r-this.right)/2,0,r),y=o.ac((this.top+c-this.bottom)/2,0,c);return new o.P(g,y)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new Hn(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Vn=85.051129;class ho{constructor(r,c,g,y,x){this.tileSize=512,this._renderWorldCopies=x===void 0||!!x,this._minZoom=r||0,this._maxZoom=c||22,this._minPitch=g??0,this._maxPitch=y??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.M(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Hn,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){const r=new ho(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this.minElevationForCurrentTile=r.minElevationForCurrentTile,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const c=-o.b2(r,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=function(){var g=new o.A(4);return o.A!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g}(),function(g,y,x){var T=y[0],u=y[1],f=y[2],_=y[3],F=Math.sin(x),E=Math.cos(x);g[0]=T*E+f*F,g[1]=u*E+_*F,g[2]=T*-F+f*E,g[3]=u*-F+_*E}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const c=o.ac(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const c=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.tileZoom=Math.max(0,Math.floor(c)),this.scale=this.zoomScale(c),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,c,g){this._unmodified=!1,this._edgeInsets.interpolate(r,c,g),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const c=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(r){const c=[new o.b3(0,r)];if(this._renderWorldCopies){const g=this.pointCoordinate(new o.P(0,0)),y=this.pointCoordinate(new o.P(this.width,0)),x=this.pointCoordinate(new o.P(this.width,this.height)),T=this.pointCoordinate(new o.P(0,this.height)),u=Math.floor(Math.min(g.x,y.x,x.x,T.x)),f=Math.floor(Math.max(g.x,y.x,x.x,T.x)),_=1;for(let F=u-_;F<=f+_;F++)F!==0&&c.push(new o.b3(F,r))}return c}coveringTiles(r){var c,g;let y=this.coveringZoomLevel(r);const x=y;if(r.minzoom!==void 0&&y<r.minzoom)return[];r.maxzoom!==void 0&&y>r.maxzoom&&(y=r.maxzoom);const T=this.pointCoordinate(this.getCameraPoint()),u=o.Y.fromLngLat(this.center),f=Math.pow(2,y),_=[f*T.x,f*T.y,0],F=[f*u.x,f*u.y,0],E=In.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,y);let k=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(k=y);const D=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,O=Z=>({aabb:new qs([Z*f,0,0],[(Z+1)*f,f,0]),zoom:0,x:0,y:0,wrap:Z,fullyVisible:!1}),z=[],H=[],X=y,ot=r.reparseOverscaled?x:y;if(this._renderWorldCopies)for(let Z=1;Z<=3;Z++)z.push(O(-Z)),z.push(O(Z));for(z.push(O(0));z.length>0;){const Z=z.pop(),st=Z.x,mt=Z.y;let gt=Z.fullyVisible;if(!gt){const Mt=Z.aabb.intersects(E);if(Mt===0)continue;gt=Mt===2}const ut=r.terrain?_:F,ft=Z.aabb.distanceX(ut),zt=Z.aabb.distanceY(ut),Kt=Math.max(Math.abs(ft),Math.abs(zt));if(Z.zoom===X||Kt>D+(1<<X-Z.zoom)-2&&Z.zoom>=k){const Mt=X-Z.zoom,ee=_[0]-.5-(st<<Mt),oe=_[1]-.5-(mt<<Mt);H.push({tileID:new o.Q(Z.zoom===X?ot:Z.zoom,Z.wrap,Z.zoom,st,mt),distanceSq:yt([F[0]-.5-st,F[1]-.5-mt]),tileDistanceToCamera:Math.sqrt(ee*ee+oe*oe)})}else for(let Mt=0;Mt<4;Mt++){const ee=(st<<1)+Mt%2,oe=(mt<<1)+(Mt>>1),_e=Z.zoom+1;let re=Z.aabb.quadrant(Mt);if(r.terrain){const ye=new o.Q(_e,Z.wrap,_e,ee,oe),Oe=r.terrain.getMinMaxElevation(ye),hr=(c=Oe.minElevation)!==null&&c!==void 0?c:this.elevation,He=(g=Oe.maxElevation)!==null&&g!==void 0?g:this.elevation;re=new qs([re.min[0],re.min[1],hr],[re.max[0],re.max[1],He])}z.push({aabb:re,zoom:_e,x:ee,y:oe,wrap:Z.wrap,fullyVisible:gt})}}return H.sort((Z,st)=>Z.distanceSq-st.distanceSq).map(Z=>Z.tileID)}resize(r,c){this.width=r,this.height=c,this.pixelsToGLUnits=[2/r,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const c=o.ac(r.lat,-85.051129,Vn);return new o.P(o.N(r.lng)*this.worldSize,o.O(c)*this.worldSize)}unproject(r){return new o.Y(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const c=this.elevation,g=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,y=this.pointLocation(this.centerPoint,r),x=r.getElevationForLngLatZoom(y,this.tileZoom);if(!(this.elevation-x))return;const T=g+c-x,u=Math.cos(this._pitch)*this.cameraToCenterDistance/T/o.b4(1,y.lat),f=this.scaleZoom(u/this.tileSize);this._elevation=x,this._center=y,this.zoom=f}setLocationAtPoint(r,c){const g=this.pointCoordinate(c),y=this.pointCoordinate(this.centerPoint),x=this.locationCoordinate(r),T=new o.Y(x.x-(g.x-y.x),x.y-(g.y-y.y));this.center=this.coordinateLocation(T),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,c){return c?this.coordinatePoint(this.locationCoordinate(r),c.getElevationForLngLatZoom(r,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,c){return this.coordinateLocation(this.pointCoordinate(r,c))}locationCoordinate(r){return o.Y.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,c){if(c){const k=c.pointCoordinate(r);if(k!=null)return k}const g=[r.x,r.y,0,1],y=[r.x,r.y,1,1];o.af(g,g,this.pixelMatrixInverse),o.af(y,y,this.pixelMatrixInverse);const x=g[3],T=y[3],u=g[1]/x,f=y[1]/T,_=g[2]/x,F=y[2]/T,E=_===F?0:(0-_)/(F-_);return new o.Y(o.z.number(g[0]/x,y[0]/T,E)/this.worldSize,o.z.number(u,f,E)/this.worldSize)}coordinatePoint(r,c=0,g=this.pixelMatrix){const y=[r.x*this.worldSize,r.y*this.worldSize,c,1];return o.af(y,y,g),new o.P(y[0]/y[3],y[1]/y[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new Qe().extend(this.pointLocation(new o.P(0,r))).extend(this.pointLocation(new o.P(this.width,r))).extend(this.pointLocation(new o.P(this.width,this.height))).extend(this.pointLocation(new o.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Qe([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Vn])}calculatePosMatrix(r,c=!1){const g=r.key,y=c?this._alignedPosMatrixCache:this._posMatrixCache;if(y[g])return y[g];const x=r.canonical,T=this.worldSize/this.zoomScale(x.z),u=x.x+Math.pow(2,x.z)*r.wrap,f=o.an(new Float64Array(16));return o.H(f,f,[u*T,x.y*T,0]),o.J(f,f,[T/o.W,T/o.W,1]),o.K(f,c?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,f),y[g]=new Float32Array(f),y[g]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(r,c){c=o.ac(+c,this.minZoom,this.maxZoom);const g={center:new o.M(r.lng,r.lat),zoom:c};let y=this.lngRange;if(!this._renderWorldCopies&&y===null){const Z=179.9999999999;y=[-Z,Z]}const x=this.tileSize*this.zoomScale(g.zoom);let T=0,u=x,f=0,_=x,F=0,E=0;const{x:k,y:D}=this.size;if(this.latRange){const Z=this.latRange;T=o.O(Z[1])*x,u=o.O(Z[0])*x,u-T<D&&(F=D/(u-T))}y&&(f=o.b2(o.N(y[0])*x,0,x),_=o.b2(o.N(y[1])*x,0,x),_<f&&(_+=x),_-f<k&&(E=k/(_-f)));const{x:O,y:z}=this.project.call({worldSize:x},r);let H,X;const ot=Math.max(E||0,F||0);if(ot){const Z=new o.P(E?(_+f)/2:O,F?(u+T)/2:z);return g.center=this.unproject.call({worldSize:x},Z).wrap(),g.zoom+=this.scaleZoom(ot),g}if(this.latRange){const Z=D/2;z-Z<T&&(X=T+Z),z+Z>u&&(X=u-Z)}if(y){const Z=(f+_)/2;let st=O;this._renderWorldCopies&&(st=o.b2(O,Z-x/2,Z+x/2));const mt=k/2;st-mt<f&&(H=f+mt),st+mt>_&&(H=_-mt)}if(H!==void 0||X!==void 0){const Z=new o.P(H??O,X??z);g.center=this.unproject.call({worldSize:x},Z).wrap()}return g}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:c,zoom:g}=this.getConstrained(this.center,this.zoom);this.center=c,this.zoom=g,this._unmodified=r,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,c=this.point.x,g=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=o.b4(1,this.center.lat)*this.worldSize;let y=o.an(new Float64Array(16));o.J(y,y,[this.width/2,-this.height/2,1]),o.H(y,y,[1,-1,0]),this.labelPlaneMatrix=y,y=o.an(new Float64Array(16)),o.J(y,y,[1,-1,1]),o.H(y,y,[-1,-1,0]),o.J(y,y,[2/this.width,2/this.height,1]),this.glCoordMatrix=y;const x=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),T=Math.min(this.elevation,this.minElevationForCurrentTile),u=x-T*this._pixelPerMeter/Math.cos(this._pitch),f=T<0?u:x,_=Math.PI/2+this._pitch,F=this._fov*(.5+r.y/this.height),E=Math.sin(F)*f/Math.sin(o.ac(Math.PI-_-F,.01,Math.PI-.01)),k=this.getHorizon(),D=2*Math.atan(k/this.cameraToCenterDistance)*(.5+r.y/(2*k)),O=Math.sin(D)*f/Math.sin(o.ac(Math.PI-_-D,.01,Math.PI-.01)),z=Math.min(E,O),H=1.01*(Math.cos(Math.PI/2-this._pitch)*z+f),X=this.height/50;y=new Float64Array(16),o.b5(y,this._fov,this.width/this.height,X,H),y[8]=2*-r.x/this.width,y[9]=2*r.y/this.height,o.J(y,y,[1,-1,1]),o.H(y,y,[0,0,-this.cameraToCenterDistance]),o.b6(y,y,this._pitch),o.ad(y,y,this.angle),o.H(y,y,[-c,-g,0]),this.mercatorMatrix=o.J([],y,[this.worldSize,this.worldSize,this.worldSize]),o.J(y,y,[1,1,this._pixelPerMeter]),this.pixelMatrix=o.K(new Float64Array(16),this.labelPlaneMatrix,y),o.H(y,y,[0,0,-this.elevation]),this.modelViewProjectionMatrix=y,this.invModelViewProjectionMatrix=o.as([],y),this.pixelMatrix3D=o.K(new Float64Array(16),this.labelPlaneMatrix,y);const ot=this.width%2/2,Z=this.height%2/2,st=Math.cos(this.angle),mt=Math.sin(this.angle),gt=c-Math.round(c)+st*ot+mt*Z,ut=g-Math.round(g)+st*Z+mt*ot,ft=new Float64Array(y);if(o.H(ft,ft,[gt>.5?gt-1:gt,ut>.5?ut-1:ut,0]),this.alignedModelViewProjectionMatrix=ft,y=o.as(new Float64Array(16),this.pixelMatrix),!y)throw new Error("failed to invert matrix");this.pixelMatrixInverse=y,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new o.P(0,0)),c=[r.x*this.worldSize,r.y*this.worldSize,0,1];return o.af(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(0,r))}getCameraQueryGeometry(r){const c=this.getCameraPoint();if(r.length===1)return[r[0],c];{let g=c.x,y=c.y,x=c.x,T=c.y;for(const u of r)g=Math.min(g,u.x),y=Math.min(y,u.y),x=Math.max(x,u.x),T=Math.max(T,u.y);return[new o.P(g,y),new o.P(x,y),new o.P(x,T),new o.P(g,T),new o.P(g,y)]}}lngLatToCameraDepth(r,c){const g=this.locationCoordinate(r),y=[g.x*this.worldSize,g.y*this.worldSize,c,1];return o.af(y,y,this.modelViewProjectionMatrix),y[2]/y[3]}}function xs(b,r){let c,g=!1,y=null,x=null;const T=()=>{y=null,g&&(b.apply(x,c),y=setTimeout(T,r),g=!1)};return(...u)=>(g=!0,x=this,c=u,y||T(),y)}class po{constructor(r){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let g;return c.split("&").map(y=>y.split("=")).forEach(y=>{y[0]===this._hashName&&(g=y)}),(g&&g[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(c.length>=3&&!c.some(g=>isNaN(g))){const g=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:g,pitch:+(c[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,c)}catch{}},this._updateHash=xs(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(r){const c=this._map.getCenter(),g=Math.round(100*this._map.getZoom())/100,y=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,y),T=Math.round(c.lng*x)/x,u=Math.round(c.lat*x)/x,f=this._map.getBearing(),_=this._map.getPitch();let F="";if(F+=r?`/${T}/${u}/${g}`:`${g}/${u}/${T}`,(f||_)&&(F+="/"+Math.round(10*f)/10),_&&(F+=`/${Math.round(_)}`),this._hashName){const E=this._hashName;let k=!1;const D=window.location.hash.slice(1).split("&").map(O=>{const z=O.split("=")[0];return z===E?(k=!0,`${z}=${F}`):O}).filter(O=>O);return k||D.push(`${E}=${F}`),`#${D.join("&")}`}return`#${F}`}}const fo={linearity:.3,easing:o.b7(0,0,.3,1)},ca=o.e({deceleration:2500,maxSpeed:1400},fo),jn=o.e({deceleration:20,maxSpeed:1400},fo),Bs=o.e({deceleration:1e3,maxSpeed:360},fo),Ta=o.e({deceleration:1e3,maxSpeed:90},fo);class go{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:U.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,c=U.now();for(;r.length>0&&c-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)c.zoom+=x.zoomDelta||0,c.bearing+=x.bearingDelta||0,c.pitch+=x.pitchDelta||0,x.panDelta&&c.pan._add(x.panDelta),x.around&&(c.around=x.around),x.pinchAround&&(c.pinchAround=x.pinchAround);const g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(c.pan.mag()){const x=Kn(c.pan.mag(),g,o.e({},ca,r||{}));y.offset=c.pan.mult(x.amount/c.pan.mag()),y.center=this._map.transform.center,Gs(y,x)}if(c.zoom){const x=Kn(c.zoom,g,jn);y.zoom=this._map.transform.zoom+x.amount,Gs(y,x)}if(c.bearing){const x=Kn(c.bearing,g,Bs);y.bearing=this._map.transform.bearing+o.ac(x.amount,-179,179),Gs(y,x)}if(c.pitch){const x=Kn(c.pitch,g,Ta);y.pitch=this._map.transform.pitch+x.amount,Gs(y,x)}if(y.zoom||y.bearing){const x=c.pinchAround===void 0?c.around:c.pinchAround;y.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),o.e(y,{noMoveStart:!0})}}function Gs(b,r){(!b.duration||b.duration<r.duration)&&(b.duration=r.duration,b.easing=r.easing)}function Kn(b,r,c){const{maxSpeed:g,linearity:y,deceleration:x}=c,T=o.ac(b*y/(r/1e3),-g,g),u=Math.abs(T)/(x*y);return{easing:c.easing,duration:1e3*u,amount:T*(u/2)}}class $i extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,g,y={}){const x=Q.mousePos(c.getCanvas(),g),T=c.unproject(x);super(r,o.e({point:x,lngLat:T,originalEvent:g},y)),this._defaultPrevented=!1,this.target=c}}class ln extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,g){const y=r==="touchend"?g.changedTouches:g.touches,x=Q.touchPos(c.getCanvasContainer(),y),T=x.map(f=>c.unproject(f)),u=x.reduce((f,_,F,E)=>f.add(_.div(E.length)),new o.P(0,0));super(r,{points:x,point:u,lngLats:T,lngLat:c.unproject(u),originalEvent:g}),this._defaultPrevented=!1}}class ua extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,g){super(r,{originalEvent:g}),this._defaultPrevented=!1}}class ai{constructor(r,c){this._map=r,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new ua(r.type,this._map,r))}mousedown(r,c){return this._mousedownPos=c,this._firePreventable(new $i(r.type,this._map,r))}mouseup(r){this._map.fire(new $i(r.type,this._map,r))}click(r,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new $i(r.type,this._map,r))}dblclick(r){return this._firePreventable(new $i(r.type,this._map,r))}mouseover(r){this._map.fire(new $i(r.type,this._map,r))}mouseout(r){this._map.fire(new $i(r.type,this._map,r))}touchstart(r){return this._firePreventable(new ln(r.type,this._map,r))}touchmove(r){this._map.fire(new ln(r.type,this._map,r))}touchend(r){this._map.fire(new ln(r.type,this._map,r))}touchcancel(r){this._map.fire(new ln(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class fi{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new $i(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new $i("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new $i(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class gi{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(o.P.convert(r),this._map.terrain)}}class Pi{constructor(r,c){this._map=r,this._tr=new gi(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,c){this.isEnabled()&&r.shiftKey&&r.button===0&&(Q.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(r,c){if(!this._active)return;const g=c;if(this._lastPos.equals(g)||!this._box&&g.dist(this._startPos)<this._clickTolerance)return;const y=this._startPos;this._lastPos=g,this._box||(this._box=Q.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const x=Math.min(y.x,g.x),T=Math.max(y.x,g.x),u=Math.min(y.y,g.y),f=Math.max(y.y,g.y);Q.setTransform(this._box,`translate(${x}px,${u}px)`),this._box.style.width=T-x+"px",this._box.style.height=f-u+"px"}mouseupWindow(r,c){if(!this._active||r.button!==0)return;const g=this._startPos,y=c;if(this.reset(),Q.suppressClick(),g.x!==y.x||g.y!==y.y)return this._map.fire(new o.k("boxzoomend",{originalEvent:r})),{cameraAnimation:x=>x.fitScreenCoordinates(g,y,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(Q.remove(this._box),this._box=null),Q.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,c){return this._map.fire(new o.k(r,{originalEvent:c}))}}function ss(b,r){if(b.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${b.length}, points ${r.length}`);const c={};for(let g=0;g<b.length;g++)c[b[g].identifier]=r[g];return c}class Ua{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,c,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),g.length===this.numTouches&&(this.centroid=function(y){const x=new o.P(0,0);for(const T of y)x._add(T);return x.div(y.length)}(c),this.touches=ss(g,c)))}touchmove(r,c,g){if(this.aborted||!this.centroid)return;const y=ss(g,c);for(const x in this.touches){const T=y[x];(!T||T.dist(this.touches[x])>30)&&(this.aborted=!0)}}touchend(r,c,g){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){const y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class Pa{constructor(r){this.singleTap=new Ua(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,c,g){this.singleTap.touchstart(r,c,g)}touchmove(r,c,g){this.singleTap.touchmove(r,c,g)}touchend(r,c,g){const y=this.singleTap.touchend(r,c,g);if(y){const x=r.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(y)<30;if(x&&T||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class Go{constructor(r){this._tr=new gi(r),this._zoomIn=new Pa({numTouches:1,numTaps:2}),this._zoomOut=new Pa({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,c,g){this._zoomIn.touchstart(r,c,g),this._zoomOut.touchstart(r,c,g)}touchmove(r,c,g){this._zoomIn.touchmove(r,c,g),this._zoomOut.touchmove(r,c,g)}touchend(r,c,g){const y=this._zoomIn.touchend(r,c,g),x=this._zoomOut.touchend(r,c,g),T=this._tr;return y?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:u=>u.easeTo({duration:300,zoom:T.zoom+1,around:T.unproject(y)},{originalEvent:r})}):x?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:u=>u.easeTo({duration:300,zoom:T.zoom-1,around:T.unproject(x)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class mo{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const c=this._moveFunction(...r);if(c.bearingDelta||c.pitchDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(r,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=c.length?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,c){if(!this.isEnabled())return;const g=this._lastPoint;if(!g)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const y=c.length?c[0]:c;return!this._moved&&y.dist(g)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=y,this._move(g,y))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&Q.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const $u={0:1,2:2};class ul{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const c=Q.mouseButton(r);this._eventButton=c}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(c,g){const y=$u[g];return c.buttons===void 0||(c.buttons&y)!==y}(r,this._eventButton)}isValidEndEvent(r){return Q.mouseButton(r)===this._eventButton}}class Ii{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const ha=b=>{b.mousedown=b.dragStart,b.mousemoveWindow=b.dragMove,b.mouseup=b.dragEnd,b.contextmenu=r=>{r.preventDefault()}},$n=({enable:b,clickTolerance:r,bearingDegreesPerPixelMoved:c=.8})=>{const g=new ul({checkCorrectEvent:y=>Q.mouseButton(y)===0&&y.ctrlKey||Q.mouseButton(y)===2});return new mo({clickTolerance:r,move:(y,x)=>({bearingDelta:(x.x-y.x)*c}),moveStateManager:g,enable:b,assignEvents:ha})},EA=({enable:b,clickTolerance:r,pitchDegreesPerPixelMoved:c=-.5})=>{const g=new ul({checkCorrectEvent:y=>Q.mouseButton(y)===0&&y.ctrlKey||Q.mouseButton(y)===2});return new mo({clickTolerance:r,move:(y,x)=>({pitchDelta:(x.y-y.y)*c}),moveStateManager:g,enable:b,assignEvents:ha})};class TA{constructor(r,c){this._clickTolerance=r.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(r,c,g){return this._calculateTransform(r,c,g)}touchmove(r,c,g){if(this._active&&!(g.length<this.minTouchs()))return r.preventDefault(),this._calculateTransform(r,c,g)}touchend(r,c,g){this._calculateTransform(r,c,g),this._active&&g.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,c,g){g.length>0&&(this._active=!0);const y=ss(g,c),x=new o.P(0,0),T=new o.P(0,0);let u=0;for(const _ in y){const F=y[_],E=this._touches[_];E&&(x._add(F),T._add(F.sub(E)),u++,y[_]=F)}if(this._touches=y,u<this.minTouchs()||!T.mag())return;const f=T.div(u);return this._sum._add(f),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(u),panDelta:f}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class En{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,c,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([c[0],c[1]]))}touchmove(r,c,g){if(!this._firstTwoTouches)return;r.preventDefault();const[y,x]=this._firstTwoTouches,T=qi(g,c,y),u=qi(g,c,x);if(!T||!u)return;const f=this._aroundCenter?null:T.add(u).div(2);return this._move([T,u],f,r)}touchend(r,c,g){if(!this._firstTwoTouches)return;const[y,x]=this._firstTwoTouches,T=qi(g,c,y),u=qi(g,c,x);T&&u||(this._active&&Q.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function qi(b,r,c){for(let g=0;g<b.length;g++)if(b[g].identifier===c)return r[g]}function La(b,r){return Math.log(b/r)/Math.LN2}class Wo extends En{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,c){const g=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(La(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:La(this._distance,g),pinchAround:c}}}function Xl(b,r){return 180*b.angleWith(r)/Math.PI}class UA extends En{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,c,g){const y=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Xl(this._vector,y),pinchAround:c}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const c=25/(Math.PI*this._minDiameter)*360,g=Xl(r,this._startVector);return Math.abs(g)<c}}function Xo(b){return Math.abs(b.y)>Math.abs(b.x)}class hl extends En{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,c,g){super.touchstart(r,c,g),this._currentTouchCount=g.length}_start(r){this._lastPoints=r,Xo(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,c,g){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const y=r[0].sub(this._lastPoints[0]),x=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(y,x,g.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(y.y+x.y)/2*-.5}):void 0}gestureBeginsVertically(r,c,g){if(this._valid!==void 0)return this._valid;const y=r.mag()>=2,x=c.mag()>=2;if(!y&&!x)return;if(!y||!x)return this._firstMove===void 0&&(this._firstMove=g),g-this._firstMove<100&&void 0;const T=r.y>0==c.y>0;return Xo(r)&&Xo(c)&&T}}const Oc={panStep:100,bearingStep:15,pitchStep:10};class da{constructor(r){this._tr=new gi(r);const c=Oc;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let c=0,g=0,y=0,x=0,T=0;switch(r.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:r.shiftKey?g=-1:(r.preventDefault(),x=-1);break;case 39:r.shiftKey?g=1:(r.preventDefault(),x=1);break;case 38:r.shiftKey?y=1:(r.preventDefault(),T=-1);break;case 40:r.shiftKey?y=-1:(r.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(g=0,y=0),{cameraAnimation:u=>{const f=this._tr;u.easeTo({duration:300,easeId:"keyboardHandler",easing:Zl,zoom:c?Math.round(f.zoom)+c*(r.shiftKey?2:1):f.zoom,bearing:f.bearing+g*this._bearingStep,pitch:f.pitch+y*this._pitchStep,offset:[-x*this._panStep,-T*this._panStep],center:f.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Zl(b){return b*(2-b)}const PA=4.000244140625;class dl{constructor(r,c){this._onTimeout=g=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(g)},this._map=r,this._tr=new gi(r),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(r){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!r[this._map.cooperativeGestures._bypassKey])return;let c=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const g=U.now(),y=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,c!==0&&c%PA==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(y*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),r.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=r,this._delta-=c,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=Q.mousePos(this._map.getCanvas(),r),g=this._tr;this._around=c.y>g.transform.height/2-g.transform.getHorizon()?o.M.convert(this._aroundCenter?g.center:g.unproject(c)):o.M.convert(g.center),this._aroundPoint=g.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const u=this._type==="wheel"&&Math.abs(this._delta)>PA?this._wheelZoomRate:this._defaultZoomRate;let f=2/(1+Math.exp(-Math.abs(this._delta*u)));this._delta<0&&f!==0&&(f=1/f);const _=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(_*f))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,g=this._startZoom,y=this._easing;let x,T=!1;if(this._type==="wheel"&&g&&y){const u=Math.min((U.now()-this._lastWheelEventTime)/200,1),f=y(u);x=o.z.number(g,c,f),u<1?this._frameId||(this._frameId=!0):T=!0}else x=c,T=!0;return this._active=!0,T&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!T,zoomDelta:x-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let c=o.b8;if(this._prevEase){const g=this._prevEase,y=(U.now()-g.start)/g.duration,x=g.easing(y+.01)-g.easing(y),T=.27/Math.sqrt(x*x+1e-4)*.01,u=Math.sqrt(.0729-T*T);c=o.b7(T,u,.25,1)}return this._prevEase={start:U.now(),duration:r,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Rc{constructor(r,c){this._clickZoom=r,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class qu{constructor(r){this._tr=new gi(r),this.reset()}reset(){this._active=!1}dblclick(r,c){return r.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class zc{constructor(){this._tap=new Pa({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,c,g){if(!this._swipePoint)if(this._tapTime){const y=c[0],x=r.timeStamp-this._tapTime<500,T=this._tapPoint.dist(y)<30;x&&T?g.length>0&&(this._swipePoint=y,this._swipeTouch=g[0].identifier):this.reset()}else this._tap.touchstart(r,c,g)}touchmove(r,c,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;const y=c[0],x=y.y-this._swipePoint.y;return this._swipePoint=y,r.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(r,c,g)}touchend(r,c,g){if(this._tapTime)this._swipePoint&&g.length===0&&this.reset();else{const y=this._tap.touchend(r,c,g);y&&(this._tapTime=r.timeStamp,this._tapPoint=y)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hc{constructor(r,c,g){this._el=r,this._mousePan=c,this._touchPan=g}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class LA{constructor(r,c,g){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=c,this._mousePitch=g}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Vc{constructor(r,c,g,y){this._el=r,this._touchZoom=c,this._touchRotate=g,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Cs{constructor(r,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=Q.create("div","maplibregl-cooperative-gesture-screen",r);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const g=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),y=document.createElement("div");y.className="maplibregl-desktop-message",y.textContent=c,this._container.appendChild(y);const x=document.createElement("div");x.className="maplibregl-mobile-message",x.textContent=g,this._container.appendChild(x),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(Q.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(r){this._onCooperativeGesture(r.touches.length===1)}wheel(r){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!r[this._bypassKey])}_onCooperativeGesture(r){this._enabled&&r&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const as=b=>b.zoom||b.drag||b.pitch||b.rotate;class Yl extends o.k{}function qn(b){return b.panDelta&&b.panDelta.mag()||b.zoomDelta||b.bearingDelta||b.pitchDelta}class Qa{constructor(r,c){this.handleWindowEvent=y=>{this.handleEvent(y,`${y.type}Window`)},this.handleEvent=(y,x)=>{if(y.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const T=y.type==="renderFrame"?void 0:y,u={needsRenderFrame:!1},f={},_={},F=y.touches,E=F?this._getMapTouches(F):void 0,k=E?Q.touchPos(this._map.getCanvas(),E):Q.mousePos(this._map.getCanvas(),y);for(const{handlerName:z,handler:H,allowed:X}of this._handlers){if(!H.isEnabled())continue;let ot;this._blockedByActive(_,X,z)?H.reset():H[x||y.type]&&(ot=H[x||y.type](y,k,E),this.mergeHandlerResult(u,f,ot,z,T),ot&&ot.needsRenderFrame&&this._triggerRenderFrame()),(ot||H.isActive())&&(_[z]=H)}const D={};for(const z in this._previousActiveHandlers)_[z]||(D[z]=T);this._previousActiveHandlers=_,(Object.keys(D).length||qn(u))&&(this._changes.push([u,f,D]),this._triggerRenderFrame()),(Object.keys(_).length||qn(u))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:O}=u;O&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],O(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new go(r),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[window,"blur",void 0]];for(const[y,x,T]of this._listeners)Q.addEventListener(y,x,y===document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[r,c,g]of this._listeners)Q.removeEventListener(r,c,r===document?this.handleWindowEvent:this.handleEvent,g)}_addDefaultHandlers(r){const c=this._map,g=c.getCanvasContainer();this._add("mapEvent",new ai(c,r));const y=c.boxZoom=new Pi(c,r);this._add("boxZoom",y),r.interactive&&r.boxZoom&&y.enable();const x=c.cooperativeGestures=new Cs(c,r.cooperativeGestures);this._add("cooperativeGestures",x),r.cooperativeGestures&&x.enable();const T=new Go(c),u=new qu(c);c.doubleClickZoom=new Rc(u,T),this._add("tapZoom",T),this._add("clickZoom",u),r.interactive&&r.doubleClickZoom&&c.doubleClickZoom.enable();const f=new zc;this._add("tapDragZoom",f);const _=c.touchPitch=new hl(c);this._add("touchPitch",_),r.interactive&&r.touchPitch&&c.touchPitch.enable(r.touchPitch);const F=$n(r),E=EA(r);c.dragRotate=new LA(r,F,E),this._add("mouseRotate",F,["mousePitch"]),this._add("mousePitch",E,["mouseRotate"]),r.interactive&&r.dragRotate&&c.dragRotate.enable();const k=(({enable:ot,clickTolerance:Z})=>{const st=new ul({checkCorrectEvent:mt=>Q.mouseButton(mt)===0&&!mt.ctrlKey});return new mo({clickTolerance:Z,move:(mt,gt)=>({around:gt,panDelta:gt.sub(mt)}),activateOnStart:!0,moveStateManager:st,enable:ot,assignEvents:ha})})(r),D=new TA(r,c);c.dragPan=new Hc(g,k,D),this._add("mousePan",k),this._add("touchPan",D,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&c.dragPan.enable(r.dragPan);const O=new UA,z=new Wo;c.touchZoomRotate=new Vc(g,z,O,f),this._add("touchRotate",O,["touchPan","touchZoom"]),this._add("touchZoom",z,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&c.touchZoomRotate.enable(r.touchZoomRotate);const H=c.scrollZoom=new dl(c,()=>this._triggerRenderFrame());this._add("scrollZoom",H,["mousePan"]),r.interactive&&r.scrollZoom&&c.scrollZoom.enable(r.scrollZoom);const X=c.keyboard=new da(c);this._add("keyboard",X),r.interactive&&r.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new fi(c))}_add(r,c,g){this._handlers.push({handlerName:r,handler:c,allowed:g}),this._handlersById[r]=c}stop(r){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!as(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,c,g){for(const y in r)if(y!==g&&(!c||c.indexOf(y)<0))return!0;return!1}_getMapTouches(r){const c=[];for(const g of r)this._el.contains(g.target)&&c.push(g);return c}mergeHandlerResult(r,c,g,y,x){if(!g)return;o.e(r,g);const T={handlerName:y,originalEvent:g.originalEvent||x};g.zoomDelta!==void 0&&(c.zoom=T),g.panDelta!==void 0&&(c.drag=T),g.pitchDelta!==void 0&&(c.pitch=T),g.bearingDelta!==void 0&&(c.rotate=T)}_applyChanges(){const r={},c={},g={};for(const[y,x,T]of this._changes)y.panDelta&&(r.panDelta=(r.panDelta||new o.P(0,0))._add(y.panDelta)),y.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+y.pitchDelta),y.around!==void 0&&(r.around=y.around),y.pinchAround!==void 0&&(r.pinchAround=y.pinchAround),y.noInertia&&(r.noInertia=y.noInertia),o.e(c,x),o.e(g,T);this._updateMapTransform(r,c,g),this._changes=[]}_updateMapTransform(r,c,g){const y=this._map,x=y._getTransformForUpdate(),T=y.terrain;if(!(qn(r)||T&&this._terrainMovement))return this._fireEvents(c,g,!0);let{panDelta:u,zoomDelta:f,bearingDelta:_,pitchDelta:F,around:E,pinchAround:k}=r;k!==void 0&&(E=k),y._stop(!0),E=E||y.transform.centerPoint;const D=x.pointLocation(u?E.sub(u):E);_&&(x.bearing+=_),F&&(x.pitch+=F),f&&(x.zoom+=f),T?this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?x.center=x.pointLocation(x.centerPoint.sub(u)):x.setLocationAtPoint(D,E):(this._terrainMovement=!0,this._map._elevationFreeze=!0,x.setLocationAtPoint(D,E)):x.setLocationAtPoint(D,E),y._applyUpdatedTransform(x),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(c,g,!0)}_fireEvents(r,c,g){const y=as(this._eventsInProgress),x=as(r),T={};for(const E in r){const{originalEvent:k}=r[E];this._eventsInProgress[E]||(T[`${E}start`]=k),this._eventsInProgress[E]=r[E]}!y&&x&&this._fireEvent("movestart",x.originalEvent);for(const E in T)this._fireEvent(E,T[E]);x&&this._fireEvent("move",x.originalEvent);for(const E in r){const{originalEvent:k}=r[E];this._fireEvent(E,k)}const u={};let f;for(const E in this._eventsInProgress){const{handlerName:k,originalEvent:D}=this._eventsInProgress[E];this._handlersById[k].isActive()||(delete this._eventsInProgress[E],f=c[k]||D,u[`${E}end`]=f)}for(const E in u)this._fireEvent(E,u[E]);const _=as(this._eventsInProgress),F=(y||x)&&!_;if(F&&this._terrainMovement&&(this._map._elevationFreeze=!1,this._terrainMovement=!1,this._map.transform.recalculateZoom(this._map.terrain)),g&&F){this._updatingCamera=!0;const E=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),k=D=>D!==0&&-this._bearingSnap<D&&D<this._bearingSnap;!E||!E.essential&&U.prefersReducedMotion?(this._map.fire(new o.k("moveend",{originalEvent:f})),k(this._map.getBearing())&&this._map.resetNorth()):(k(E.bearing||this._map.getBearing())&&(E.bearing=0),E.freezeElevation=!0,this._map.easeTo(E,{originalEvent:f})),this._updatingCamera=!1}}_fireEvent(r,c){this._map.fire(new o.k(r,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new Yl("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class ld extends o.E{constructor(r,c){super(),this._renderFrameCallback=()=>{const g=Math.min((U.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(g)),g<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=c.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new o.M(this.transform.center.lng,this.transform.center.lat)}setCenter(r,c){return this.jumpTo({center:r},c)}panBy(r,c,g){return r=o.P.convert(r).mult(-1),this.panTo(this.transform.center,o.e({offset:r},c),g)}panTo(r,c,g){return this.easeTo(o.e({center:r},c),g)}getZoom(){return this.transform.zoom}setZoom(r,c){return this.jumpTo({zoom:r},c),this}zoomTo(r,c,g){return this.easeTo(o.e({zoom:r},c),g)}zoomIn(r,c){return this.zoomTo(this.getZoom()+1,r,c),this}zoomOut(r,c){return this.zoomTo(this.getZoom()-1,r,c),this}getBearing(){return this.transform.bearing}setBearing(r,c){return this.jumpTo({bearing:r},c),this}getPadding(){return this.transform.padding}setPadding(r,c){return this.jumpTo({padding:r},c),this}rotateTo(r,c,g){return this.easeTo(o.e({bearing:r},c),g)}resetNorth(r,c){return this.rotateTo(0,o.e({duration:1e3},r),c),this}resetNorthPitch(r,c){return this.easeTo(o.e({bearing:0,pitch:0,duration:1e3},r),c),this}snapToNorth(r,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,c):this}getPitch(){return this.transform.pitch}setPitch(r,c){return this.jumpTo({pitch:r},c),this}cameraForBounds(r,c){r=Qe.convert(r);const g=c&&c.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),g,c)}_cameraForBoxAndBearing(r,c,g,y){const x={top:0,bottom:0,right:0,left:0};if(typeof(y=o.e({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){const Mt=y.padding;y.padding={top:Mt,bottom:Mt,right:Mt,left:Mt}}y.padding=o.e(x,y.padding);const T=this.transform,u=T.padding,f=new Qe(r,c),_=T.project(f.getNorthWest()),F=T.project(f.getNorthEast()),E=T.project(f.getSouthEast()),k=T.project(f.getSouthWest()),D=o.b9(-g),O=_.rotate(D),z=F.rotate(D),H=E.rotate(D),X=k.rotate(D),ot=new o.P(Math.max(O.x,z.x,X.x,H.x),Math.max(O.y,z.y,X.y,H.y)),Z=new o.P(Math.min(O.x,z.x,X.x,H.x),Math.min(O.y,z.y,X.y,H.y)),st=ot.sub(Z),mt=(T.width-(u.left+u.right+y.padding.left+y.padding.right))/st.x,gt=(T.height-(u.top+u.bottom+y.padding.top+y.padding.bottom))/st.y;if(gt<0||mt<0)return void o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const ut=Math.min(T.scaleZoom(T.scale*Math.min(mt,gt)),y.maxZoom),ft=o.P.convert(y.offset),zt=new o.P((y.padding.left-y.padding.right)/2,(y.padding.top-y.padding.bottom)/2).rotate(o.b9(g)),Kt=ft.add(zt).mult(T.scale/T.zoomScale(ut));return{center:T.unproject(_.add(E).div(2).sub(Kt)),zoom:ut,bearing:g}}fitBounds(r,c,g){return this._fitInternal(this.cameraForBounds(r,c),c,g)}fitScreenCoordinates(r,c,g,y,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.P.convert(r)),this.transform.pointLocation(o.P.convert(c)),g,y),y,x)}_fitInternal(r,c,g){return r?(delete(c=o.e(r,c)).padding,c.linear?this.easeTo(c,g):this.flyTo(c,g)):this}jumpTo(r,c){this.stop();const g=this._getTransformForUpdate();let y=!1,x=!1,T=!1;return"zoom"in r&&g.zoom!==+r.zoom&&(y=!0,g.zoom=+r.zoom),r.center!==void 0&&(g.center=o.M.convert(r.center)),"bearing"in r&&g.bearing!==+r.bearing&&(x=!0,g.bearing=+r.bearing),"pitch"in r&&g.pitch!==+r.pitch&&(T=!0,g.pitch=+r.pitch),r.padding==null||g.isPaddingEqual(r.padding)||(g.padding=r.padding),this._applyUpdatedTransform(g),this.fire(new o.k("movestart",c)).fire(new o.k("move",c)),y&&this.fire(new o.k("zoomstart",c)).fire(new o.k("zoom",c)).fire(new o.k("zoomend",c)),x&&this.fire(new o.k("rotatestart",c)).fire(new o.k("rotate",c)).fire(new o.k("rotateend",c)),T&&this.fire(new o.k("pitchstart",c)).fire(new o.k("pitch",c)).fire(new o.k("pitchend",c)),this.fire(new o.k("moveend",c))}calculateCameraOptionsFromTo(r,c,g,y=0){const x=o.Y.fromLngLat(r,c),T=o.Y.fromLngLat(g,y),u=T.x-x.x,f=T.y-x.y,_=T.z-x.z,F=Math.hypot(u,f,_);if(F===0)throw new Error("Can't calculate camera options with same From and To");const E=Math.hypot(u,f),k=this.transform.scaleZoom(this.transform.cameraToCenterDistance/F/this.transform.tileSize),D=180*Math.atan2(u,-f)/Math.PI;let O=180*Math.acos(E/F)/Math.PI;return O=_<0?90-O:90+O,{center:T.toLngLat(),zoom:k,pitch:O,bearing:D}}easeTo(r,c){var g;this._stop(!1,r.easeId),((r=o.e({offset:[0,0],duration:500,easing:o.b8},r)).animate===!1||!r.essential&&U.prefersReducedMotion)&&(r.duration=0);const y=this._getTransformForUpdate(),x=this.getZoom(),T=this.getBearing(),u=this.getPitch(),f=this.getPadding(),_="bearing"in r?this._normalizeBearing(r.bearing,T):T,F="pitch"in r?+r.pitch:u,E="padding"in r?r.padding:y.padding,k=o.P.convert(r.offset);let D=y.centerPoint.add(k);const O=y.pointLocation(D),{center:z,zoom:H}=y.getConstrained(o.M.convert(r.center||O),(g=r.zoom)!==null&&g!==void 0?g:x);this._normalizeCenter(z);const X=y.project(O),ot=y.project(z).sub(X),Z=y.zoomScale(H-x);let st,mt;r.around&&(st=o.M.convert(r.around),mt=y.locationPoint(st));const gt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||H!==x,this._rotating=this._rotating||T!==_,this._pitching=this._pitching||F!==u,this._padding=!y.isPaddingEqual(E),this._easeId=r.easeId,this._prepareEase(c,r.noMoveStart,gt),this.terrain&&this._prepareElevation(z),this._ease(ut=>{if(this._zooming&&(y.zoom=o.z.number(x,H,ut)),this._rotating&&(y.bearing=o.z.number(T,_,ut)),this._pitching&&(y.pitch=o.z.number(u,F,ut)),this._padding&&(y.interpolatePadding(f,E,ut),D=y.centerPoint.add(k)),this.terrain&&!r.freezeElevation&&this._updateElevation(ut),st)y.setLocationAtPoint(st,mt);else{const ft=y.zoomScale(y.zoom-x),zt=H>x?Math.min(2,Z):Math.max(.5,Z),Kt=Math.pow(zt,1-ut),Mt=y.unproject(X.add(ot.mult(ut*Kt)).mult(ft));y.setLocationAtPoint(y.renderWorldCopies?Mt.wrap():Mt,D)}this._applyUpdatedTransform(y),this._fireMoveEvents(c)},ut=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(c,ut)},r),this}_prepareEase(r,c,g={}){this._moving=!0,c||g.moving||this.fire(new o.k("movestart",r)),this._zooming&&!g.zooming&&this.fire(new o.k("zoomstart",r)),this._rotating&&!g.rotating&&this.fire(new o.k("rotatestart",r)),this._pitching&&!g.pitching&&this.fire(new o.k("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&c!==this._elevationTarget){const g=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(g-(c-(g*r+this._elevationStart))/(1-r)),this._elevationTarget=c}this.transform.elevation=o.z.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(r){if(!this.transformCameraUpdate)return;const c=r.clone(),{center:g,zoom:y,pitch:x,bearing:T,elevation:u}=this.transformCameraUpdate(c);g&&(c.center=g),y!==void 0&&(c.zoom=y),x!==void 0&&(c.pitch=x),T!==void 0&&(c.bearing=T),u!==void 0&&(c.elevation=u),this.transform.apply(c)}_fireMoveEvents(r){this.fire(new o.k("move",r)),this._zooming&&this.fire(new o.k("zoom",r)),this._rotating&&this.fire(new o.k("rotate",r)),this._pitching&&this.fire(new o.k("pitch",r))}_afterEase(r,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const g=this._zooming,y=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new o.k("zoomend",r)),y&&this.fire(new o.k("rotateend",r)),x&&this.fire(new o.k("pitchend",r)),this.fire(new o.k("moveend",r))}flyTo(r,c){var g;if(!r.essential&&U.prefersReducedMotion){const ye=o.L(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ye,c)}this.stop(),r=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.b8},r);const y=this._getTransformForUpdate(),x=this.getZoom(),T=this.getBearing(),u=this.getPitch(),f=this.getPadding(),_="bearing"in r?this._normalizeBearing(r.bearing,T):T,F="pitch"in r?+r.pitch:u,E="padding"in r?r.padding:y.padding,k=o.P.convert(r.offset);let D=y.centerPoint.add(k);const O=y.pointLocation(D),{center:z,zoom:H}=y.getConstrained(o.M.convert(r.center||O),(g=r.zoom)!==null&&g!==void 0?g:x);this._normalizeCenter(z);const X=y.zoomScale(H-x),ot=y.project(O),Z=y.project(z).sub(ot);let st=r.curve;const mt=Math.max(y.width,y.height),gt=mt/X,ut=Z.mag();if("minZoom"in r){const ye=o.ac(Math.min(r.minZoom,x,H),y.minZoom,y.maxZoom),Oe=mt/y.zoomScale(ye-x);st=Math.sqrt(Oe/ut*2)}const ft=st*st;function zt(ye){const Oe=(gt*gt-mt*mt+(ye?-1:1)*ft*ft*ut*ut)/(2*(ye?gt:mt)*ft*ut);return Math.log(Math.sqrt(Oe*Oe+1)-Oe)}function Kt(ye){return(Math.exp(ye)-Math.exp(-ye))/2}function Mt(ye){return(Math.exp(ye)+Math.exp(-ye))/2}const ee=zt(!1);let oe=function(ye){return Mt(ee)/Mt(ee+st*ye)},_e=function(ye){return mt*((Mt(ee)*(Kt(Oe=ee+st*ye)/Mt(Oe))-Kt(ee))/ft)/ut;var Oe},re=(zt(!0)-ee)/st;if(Math.abs(ut)<1e-6||!isFinite(re)){if(Math.abs(mt-gt)<1e-6)return this.easeTo(r,c);const ye=gt<mt?-1:1;re=Math.abs(Math.log(gt/mt))/st,_e=()=>0,oe=Oe=>Math.exp(ye*st*Oe)}return r.duration="duration"in r?+r.duration:1e3*re/("screenSpeed"in r?+r.screenSpeed/st:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=T!==_,this._pitching=F!==u,this._padding=!y.isPaddingEqual(E),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(z),this._ease(ye=>{const Oe=ye*re,hr=1/oe(Oe);y.zoom=ye===1?H:x+y.scaleZoom(hr),this._rotating&&(y.bearing=o.z.number(T,_,ye)),this._pitching&&(y.pitch=o.z.number(u,F,ye)),this._padding&&(y.interpolatePadding(f,E,ye),D=y.centerPoint.add(k)),this.terrain&&!r.freezeElevation&&this._updateElevation(ye);const He=ye===1?z:y.unproject(ot.add(Z.mult(_e(Oe))).mult(hr));y.setLocationAtPoint(y.renderWorldCopies?He.wrap():He,D),this._applyUpdatedTransform(y),this._fireMoveEvents(c)},()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(c)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,c){var g;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const y=this._onEaseEnd;delete this._onEaseEnd,y.call(this,c)}return r||(g=this.handlers)===null||g===void 0||g.stop(!1),this}_ease(r,c,g){g.animate===!1||g.duration===0?(r(1),c()):(this._easeStart=U.now(),this._easeOptions=g,this._onEaseFrame=r,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,c){r=o.b2(r,-180,180);const g=Math.abs(r-c);return Math.abs(r-360-c)<g&&(r-=360),Math.abs(r+360-c)<g&&(r+=360),r}_normalizeCenter(r){const c=this.transform;if(!c.renderWorldCopies||c.lngRange)return;const g=r.lng-c.center.lng;r.lng+=g>180?-360:g<-180?360:0}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(o.M.convert(r),this.transform.tileZoom)-this.transform.elevation:null}}const Gu={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class jc{constructor(r=Gu){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=Q.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=Q.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Q.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){Q.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,c){const g=this._map._getUIString(`AttributionControl.${c}`);r.title=g,r.setAttribute("aria-label",g)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(y=>typeof y!="string"?"":y)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}const c=this._map.style.sourceCaches;for(const y in c){const x=c[y];if(x.used||x.usedForTerrain){const T=x.getSource();T.attribution&&r.indexOf(T.attribution)<0&&r.push(T.attribution)}}r=r.filter(y=>String(y).trim()),r.sort((y,x)=>y.length-x.length),r=r.filter((y,x)=>{for(let T=x+1;T<r.length;T++)if(r[T].indexOf(y)>=0)return!1;return!0});const g=r.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,r.length?(this._innerContainer.innerHTML=g,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Kc{constructor(r={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const g=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&g.classList.add("maplibregl-compact"):g.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=Q.create("div","maplibregl-ctrl");const c=Q.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){Q.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class pl{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const c=++this._id;return this._queue.push({callback:r,id:c,cancelled:!1}),c}remove(r){const c=this._currentlyRunning,g=c?this._queue.concat(c):this._queue;for(const y of g)if(y.id===r)return void(y.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const g of c)if(!g.cancelled&&(g.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var yo=o.X([{name:"a_pos3d",type:"Int16",components:3}]);class Ve extends o.E{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,c){this.sourceCache.update(r,c),this._renderableTilesKeys=[];const g={};for(const y of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c}))g[y.key]=!0,this._renderableTilesKeys.push(y.key),this._tiles[y.key]||(y.posMatrix=new Float64Array(16),o.aO(y.posMatrix,0,o.W,0,o.W,0,1),this._tiles[y.key]=new ur(y,this.tileSize));for(const y in this._tiles)g[y]||delete this._tiles[y]}freeRtt(r){for(const c in this._tiles){const g=this._tiles[c];(!r||g.tileID.equals(r)||g.tileID.isChildOf(r)||r.isChildOf(g.tileID))&&(g.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const c={};for(const g of this._renderableTilesKeys){const y=this._tiles[g].tileID;if(y.canonical.equals(r.canonical)){const x=r.clone();x.posMatrix=new Float64Array(16),o.aO(x.posMatrix,0,o.W,0,o.W,0,1),c[g]=x}else if(y.canonical.isChildOf(r.canonical)){const x=r.clone();x.posMatrix=new Float64Array(16);const T=y.canonical.z-r.canonical.z,u=y.canonical.x-(y.canonical.x>>T<<T),f=y.canonical.y-(y.canonical.y>>T<<T),_=o.W>>T;o.aO(x.posMatrix,0,_,0,_,0,1),o.H(x.posMatrix,x.posMatrix,[-u*_,-f*_,0]),c[g]=x}else if(r.canonical.isChildOf(y.canonical)){const x=r.clone();x.posMatrix=new Float64Array(16);const T=r.canonical.z-y.canonical.z,u=r.canonical.x-(r.canonical.x>>T<<T),f=r.canonical.y-(r.canonical.y>>T<<T),_=o.W>>T;o.aO(x.posMatrix,0,o.W,0,o.W,0,1),o.H(x.posMatrix,x.posMatrix,[u*_,f*_,0]),o.J(x.posMatrix,x.posMatrix,[1/2**T,1/2**T,0]),c[g]=x}}return c}getSourceTile(r,c){const g=this.sourceCache._source;let y=r.overscaledZ-this.deltaZoom;if(y>g.maxzoom&&(y=g.maxzoom),y<g.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(y).key);let x=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!x||!x.dem)&&c)for(;y>=g.minzoom&&(!x||!x.dem);)x=this.sourceCache.getTileByID(r.scaledTo(y--).key);return x}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(c=>c.timeAdded>=r)}}class Ma{constructor(r,c,g){this.painter=r,this.sourceCache=new Ve(c),this.options=g,this.exaggeration=typeof g.exaggeration=="number"?g.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,c,g,y=o.W){var x;if(!(c>=0&&c<y&&g>=0&&g<y))return 0;const T=this.getTerrainData(r),u=(x=T.tile)===null||x===void 0?void 0:x.dem;if(!u)return 0;const f=function(O,z,H){var X=z[0],ot=z[1];return O[0]=H[0]*X+H[4]*ot+H[12],O[1]=H[1]*X+H[5]*ot+H[13],O}([],[c/y*o.W,g/y*o.W],T.u_terrain_matrix),_=[f[0]*u.dim,f[1]*u.dim],F=Math.floor(_[0]),E=Math.floor(_[1]),k=_[0]-F,D=_[1]-E;return u.get(F,E)*(1-k)*(1-D)+u.get(F+1,E)*k*(1-D)+u.get(F,E+1)*(1-k)*D+u.get(F+1,E+1)*k*D}getElevationForLngLatZoom(r,c){const{tileID:g,mercatorX:y,mercatorY:x}=this._getOverscaledTileIDFromLngLatZoom(r,c);return this.getElevation(g,y%o.W,x%o.W,o.W)}getElevation(r,c,g,y=o.W){return this.getDEMElevation(r,c,g,y)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const y=this.painter.context,x=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new At(y,x,y.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new At(y,new o.R({width:1,height:1}),y.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.an([])}const c=this.sourceCache.getSourceTile(r,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const y=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new At(y,c.dem.getPixels(),y.gl.RGBA,{premultiply:!1}),c.demTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const g=c&&c+c.tileID.key+r.key;if(g&&!this._demMatrixCache[g]){const y=this.sourceCache.sourceCache._source.maxzoom;let x=r.canonical.z-c.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=y?x=r.canonical.z-y:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const T=r.canonical.x-(r.canonical.x>>x<<x),u=r.canonical.y-(r.canonical.y>>x<<x),f=o.ba(new Float64Array(16),[1/(o.W<<x),1/(o.W<<x),0]);o.H(f,f,[T*o.W,u*o.W,0]),this._demMatrixCache[r.key]={matrix:f,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:g?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(r){const c=this.painter,g=c.width/devicePixelRatio,y=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===g&&this._fbo.height===y||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new At(c.context,{width:g,height:y,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new At(c.context,{width:g,height:y,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(g,y,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,g,y))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let x=0,T=0;x<this._coordsTextureSize;x++)for(let u=0;u<this._coordsTextureSize;u++,T+=4)c[T+0]=255&u,c[T+1]=255&x,c[T+2]=u>>8<<4|x>>8,c[T+3]=0;const g=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),y=new At(r,g,r.gl.RGBA,{premultiply:!1});return y.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=y,y}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),g=this.painter.context,y=g.gl,x=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),T=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),u=Math.round(this.painter.height/devicePixelRatio);g.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),y.readPixels(x,u-T-1,1,1,y.RGBA,y.UNSIGNED_BYTE,c),g.bindFramebuffer.set(null);const f=c[0]+(c[2]>>4<<8),_=c[1]+((15&c[2])<<8),F=this.coordsIndex[255-c[3]],E=F&&this.sourceCache.getTileByID(F);if(!E)return null;const k=this._coordsTextureSize,D=(1<<E.tileID.canonical.z)*k;return new o.Y((E.tileID.canonical.x*k+f)/D+E.tileID.wrap,(E.tileID.canonical.y*k+_)/D,this.getElevation(E.tileID,f,_,k))}depthAtPoint(r){const c=new Uint8Array(4),g=this.painter.context,y=g.gl;return g.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),y.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,y.RGBA,y.UNSIGNED_BYTE,c),g.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,c=new o.bb,g=new o.aY,y=this.meshSize,x=o.W/y,T=y*y;for(let E=0;E<=y;E++)for(let k=0;k<=y;k++)c.emplaceBack(k*x,E*x,0);for(let E=0;E<T;E+=y+1)for(let k=0;k<y;k++)g.emplaceBack(k+E,y+k+E+1,y+k+E+2),g.emplaceBack(k+E,y+k+E+2,k+E+1);const u=c.length,f=u+2*(y+1);for(const E of[0,1])for(let k=0;k<=y;k++)for(const D of[0,1])c.emplaceBack(k*x,E*o.W,D);for(let E=0;E<2*y;E+=2)g.emplaceBack(f+E,f+E+1,f+E+3),g.emplaceBack(f+E,f+E+3,f+E+2),g.emplaceBack(u+E,u+E+3,u+E+1),g.emplaceBack(u+E,u+E+2,u+E+3);const _=c.length,F=_+2*(y+1);for(const E of[0,1])for(let k=0;k<=y;k++)for(const D of[0,1])c.emplaceBack(E*o.W,k*x,D);for(let E=0;E<2*y;E+=2)g.emplaceBack(_+E,_+E+1,_+E+3),g.emplaceBack(_+E,_+E+3,_+E+2),g.emplaceBack(F+E,F+E+3,F+E+1),g.emplaceBack(F+E,F+E+2,F+E+3);return this._mesh={indexBuffer:r.createIndexBuffer(g),vertexBuffer:r.createVertexBuffer(c,yo.members),segments:o.$.simpleSegment(0,0,c.length,g.length)},this._mesh}getMeshFrameDelta(r){return 2*Math.PI*o.bc/Math.pow(2,r)/5}getMinTileElevationForLngLatZoom(r,c){var g;const{tileID:y}=this._getOverscaledTileIDFromLngLatZoom(r,c);return(g=this.getMinMaxElevation(y).minElevation)!==null&&g!==void 0?g:0}getMinMaxElevation(r){const c=this.getTerrainData(r).tile,g={minElevation:null,maxElevation:null};return c&&c.dem&&(g.minElevation=c.dem.min*this.exaggeration,g.maxElevation=c.dem.max*this.exaggeration),g}_getOverscaledTileIDFromLngLatZoom(r,c){const g=o.Y.fromLngLat(r.wrap()),y=(1<<c)*o.W,x=g.x*y,T=g.y*y,u=Math.floor(x/o.W),f=Math.floor(T/o.W);return{tileID:new o.Q(c,0,c,u,f),mercatorX:x,mercatorY:T}}}class Mn{constructor(r,c,g){this._context=r,this._size=c,this._tileSize=g,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),g=new At(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return g.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(g.texture),{id:r,fbo:c,texture:g,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>r.id!==c),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const cn={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Wu{constructor(r,c){this.painter=r,this.terrain=c,this.pool=new Mn(r.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(g=>!r._layers[g].isHidden(c)),this._coordsDescendingInv={};for(const g in r.sourceCaches){this._coordsDescendingInv[g]={};const y=r.sourceCaches[g].getVisibleCoordinates();for(const x of y){const T=this.terrain.sourceCache.getTerrainCoords(x);for(const u in T)this._coordsDescendingInv[g][u]||(this._coordsDescendingInv[g][u]=[]),this._coordsDescendingInv[g][u].push(T[u])}}this._coordsDescendingInvStr={};for(const g of r._order){const y=r._layers[g],x=y.source;if(cn[y.type]&&!this._coordsDescendingInvStr[x]){this._coordsDescendingInvStr[x]={};for(const T in this._coordsDescendingInv[x])this._coordsDescendingInvStr[x][T]=this._coordsDescendingInv[x][T].map(u=>u.key).sort().join()}}for(const g of this._renderableTiles)for(const y in this._coordsDescendingInvStr){const x=this._coordsDescendingInvStr[y][g.tileID.key];x&&x!==g.rttCoords[y]&&(g.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const c=r.type,g=this.painter,y=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(cn[c]&&(this._prevType&&cn[this._prevType]||this._stacks.push([]),this._prevType=c,this._stacks[this._stacks.length-1].push(r.id),!y))return!0;if(cn[this._prevType]||cn[c]&&y){this._prevType=c;const x=this._stacks.length-1,T=this._stacks[x]||[];for(const u of this._renderableTiles){if(this.pool.isFull()&&($s(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(u),u.rtt[x]){const _=this.pool.getObjectForId(u.rtt[x].id);if(_.stamp===u.rtt[x].stamp){this.pool.useObject(_);continue}}const f=this.pool.getOrCreateFreeObject();this.pool.useObject(f),this.pool.stampObject(f),u.rtt[x]={id:f.id,stamp:f.stamp},g.context.bindFramebuffer.set(f.fbo.framebuffer),g.context.clear({color:o.aP.transparent,stencil:0}),g.currentStencilSource=void 0;for(let _=0;_<T.length;_++){const F=g.style._layers[T[_]],E=F.source?this._coordsDescendingInv[F.source][u.tileID.key]:[u.tileID];g.context.viewport.set([0,0,f.fbo.width,f.fbo.height]),g._renderTileClippingMasks(F,E),g.renderLayer(g,g.style.sourceCaches[F.source],F,E),F.source&&(u.rttCoords[F.source]=this._coordsDescendingInvStr[F.source][u.tileID.key])}}return $s(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),cn[c]}return!1}}const Ne={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},pa=v,Fs={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Gu,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Xu=b=>{b.touchstart=b.dragStart,b.touchmoveWindow=b.dragMove,b.touchend=b.dragEnd},$c={showCompass:!0,showZoom:!0,visualizePitch:!1};class qc{constructor(r,c,g=!1){this.mousedown=T=>{this.startMouse(o.e({},T,{ctrlKey:!0,preventDefault:()=>T.preventDefault()}),Q.mousePos(this.element,T)),Q.addEventListener(window,"mousemove",this.mousemove),Q.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=T=>{this.moveMouse(T,Q.mousePos(this.element,T))},this.mouseup=T=>{this.mouseRotate.dragEnd(T),this.mousePitch&&this.mousePitch.dragEnd(T),this.offTemp()},this.touchstart=T=>{T.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Q.touchPos(this.element,T.targetTouches)[0],this.startTouch(T,this._startPos),Q.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),Q.addEventListener(window,"touchend",this.touchend))},this.touchmove=T=>{T.targetTouches.length!==1?this.reset():(this._lastPos=Q.touchPos(this.element,T.targetTouches)[0],this.moveTouch(T,this._lastPos))},this.touchend=T=>{T.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const y=r.dragRotate._mouseRotate.getClickTolerance(),x=r.dragRotate._mousePitch.getClickTolerance();this.element=c,this.mouseRotate=$n({clickTolerance:y,enable:!0}),this.touchRotate=(({enable:T,clickTolerance:u,bearingDegreesPerPixelMoved:f=.8})=>{const _=new Ii;return new mo({clickTolerance:u,move:(F,E)=>({bearingDelta:(E.x-F.x)*f}),moveStateManager:_,enable:T,assignEvents:Xu})})({clickTolerance:y,enable:!0}),this.map=r,g&&(this.mousePitch=EA({clickTolerance:x,enable:!0}),this.touchPitch=(({enable:T,clickTolerance:u,pitchDegreesPerPixelMoved:f=-.5})=>{const _=new Ii;return new mo({clickTolerance:u,move:(F,E)=>({pitchDelta:(E.y-F.y)*f}),moveStateManager:_,enable:T,assignEvents:Xu})})({clickTolerance:x,enable:!0})),Q.addEventListener(c,"mousedown",this.mousedown),Q.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),Q.addEventListener(c,"touchcancel",this.reset)}startMouse(r,c){this.mouseRotate.dragStart(r,c),this.mousePitch&&this.mousePitch.dragStart(r,c),Q.disableDrag()}startTouch(r,c){this.touchRotate.dragStart(r,c),this.touchPitch&&this.touchPitch.dragStart(r,c),Q.disableDrag()}moveMouse(r,c){const g=this.map,{bearingDelta:y}=this.mouseRotate.dragMove(r,c)||{};if(y&&g.setBearing(g.getBearing()+y),this.mousePitch){const{pitchDelta:x}=this.mousePitch.dragMove(r,c)||{};x&&g.setPitch(g.getPitch()+x)}}moveTouch(r,c){const g=this.map,{bearingDelta:y}=this.touchRotate.dragMove(r,c)||{};if(y&&g.setBearing(g.getBearing()+y),this.touchPitch){const{pitchDelta:x}=this.touchPitch.dragMove(r,c)||{};x&&g.setPitch(g.getPitch()+x)}}off(){const r=this.element;Q.removeEventListener(r,"mousedown",this.mousedown),Q.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),Q.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),Q.removeEventListener(window,"touchend",this.touchend),Q.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){Q.enableDrag(),Q.removeEventListener(window,"mousemove",this.mousemove),Q.removeEventListener(window,"mouseup",this.mouseup),Q.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),Q.removeEventListener(window,"touchend",this.touchend)}}let ka;function Gc(b,r,c){const g=new o.M(b.lng,b.lat);if(b=new o.M(b.lng,b.lat),r){const y=new o.M(b.lng-360,b.lat),x=new o.M(b.lng+360,b.lat),T=c.locationPoint(b).distSqr(r);c.locationPoint(y).distSqr(r)<T?b=y:c.locationPoint(x).distSqr(r)<T&&(b=x)}for(;Math.abs(b.lng-c.center.lng)>180;){const y=c.locationPoint(b);if(y.x>=0&&y.y>=0&&y.x<=c.width&&y.y<=c.height)break;b.lng>c.center.lng?b.lng-=360:b.lng+=360}return b.lng!==g.lng&&c.locationPoint(b).y>c.height/2-c.getHorizon()?b:g}const Jl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function vo(b,r,c){const g=b.classList;for(const y in Jl)g.remove(`maplibregl-${c}-anchor-${y}`);g.add(`maplibregl-${c}-anchor-${r}`)}class ti extends o.E{constructor(r){if(super(),this._onKeyPress=c=>{const g=c.code,y=c.charCode||c.keyCode;g!=="Space"&&g!=="Enter"&&y!==32&&y!==13||this.togglePopup()},this._onMapClick=c=>{const g=c.originalEvent.target,y=this._element;this._popup&&(g===y||y.contains(g))&&this.togglePopup()},this._update=c=>{var g;if(!this._map)return;const y=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!y)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Gc(this._lngLat,this._flatPos,this._map.transform):(g=this._lngLat)===null||g===void 0?void 0:g.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let x="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?x=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(x=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let T="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?T="rotateX(0deg)":this._pitchAlignment==="map"&&(T=`rotateX(${this._map.getPitch()}deg)`),c&&c.type!=="moveend"||(this._pos=this._pos.round()),Q.setTransform(this._element,`${Jl[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${T} ${x}`),U.frameAsync(new AbortController).then(()=>{this._updateOpacity(c&&c.type==="moveend")}).catch(()=>{})},this._onMove=c=>{if(!this._isDragging){const g=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=g}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.k("dragstart"))),this.fire(new o.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.k("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=o.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=Q.create("div");const c=Q.createNS("http://www.w3.org/2000/svg","svg"),g=41,y=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${g}px`),c.setAttributeNS(null,"width",`${y}px`),c.setAttributeNS(null,"viewBox",`0 0 ${y} ${g}`);const x=Q.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"stroke","none"),x.setAttributeNS(null,"stroke-width","1"),x.setAttributeNS(null,"fill","none"),x.setAttributeNS(null,"fill-rule","evenodd");const T=Q.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"fill-rule","nonzero");const u=Q.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"transform","translate(3.0, 29.0)"),u.setAttributeNS(null,"fill","#000000");const f=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const X of f){const ot=Q.createNS("http://www.w3.org/2000/svg","ellipse");ot.setAttributeNS(null,"opacity","0.04"),ot.setAttributeNS(null,"cx","10.5"),ot.setAttributeNS(null,"cy","5.80029008"),ot.setAttributeNS(null,"rx",X.rx),ot.setAttributeNS(null,"ry",X.ry),u.appendChild(ot)}const _=Q.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"fill",this._color);const F=Q.createNS("http://www.w3.org/2000/svg","path");F.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),_.appendChild(F);const E=Q.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"opacity","0.25"),E.setAttributeNS(null,"fill","#000000");const k=Q.createNS("http://www.w3.org/2000/svg","path");k.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),E.appendChild(k);const D=Q.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"transform","translate(6.0, 7.0)"),D.setAttributeNS(null,"fill","#FFFFFF");const O=Q.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"transform","translate(8.0, 8.0)");const z=Q.createNS("http://www.w3.org/2000/svg","circle");z.setAttributeNS(null,"fill","#000000"),z.setAttributeNS(null,"opacity","0.25"),z.setAttributeNS(null,"cx","5.5"),z.setAttributeNS(null,"cy","5.5"),z.setAttributeNS(null,"r","5.4999962");const H=Q.createNS("http://www.w3.org/2000/svg","circle");H.setAttributeNS(null,"fill","#FFFFFF"),H.setAttributeNS(null,"cx","5.5"),H.setAttributeNS(null,"cy","5.5"),H.setAttributeNS(null,"r","5.4999962"),O.appendChild(z),O.appendChild(H),T.appendChild(u),T.appendChild(_),T.appendChild(E),T.appendChild(D),T.appendChild(O),c.appendChild(T),c.setAttributeNS(null,"height",g*this._scale+"px"),c.setAttributeNS(null,"width",y*this._scale+"px"),this._element.appendChild(c),this._offset=o.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),vo(this._element,this._anchor,"marker"),r&&r.className)for(const c of r.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),Q.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=o.M.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const y=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var c,g;if(!(!((c=this._map)===null||c===void 0)&&c.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const y=this._map,x=y.terrain.depthAtPoint(this._pos),T=y.terrain.getElevationForLngLatZoom(this._lngLat,y.transform.tileZoom);if(y.transform.lngLatToCameraDepth(this._lngLat,T)-x<.006)return void(this._element.style.opacity=this._opacity);const u=-this._offset.y/y.transform._pixelPerMeter,f=Math.sin(y.getPitch()*Math.PI/180)*u,_=y.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),F=y.transform.lngLatToCameraDepth(this._lngLat,T+f)-_>.006;!((g=this._popup)===null||g===void 0)&&g.isOpen()&&F&&this._popup.remove(),this._element.style.opacity=F?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=o.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,c){return r===void 0&&c===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const Zo={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let fa=0,wo=!1;const Wc={maxWidth:100,unit:"metric"};function Xc(b,r,c){const g=c&&c.maxWidth||100,y=b._container.clientHeight/2,x=b.unproject([0,y]),T=b.unproject([g,y]),u=x.distanceTo(T);if(c&&c.unit==="imperial"){const f=3.2808*u;f>5280?QA(r,g,f/5280,b._getUIString("ScaleControl.Miles")):QA(r,g,f,b._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?QA(r,g,u/1852,b._getUIString("ScaleControl.NauticalMiles")):u>=1e3?QA(r,g,u/1e3,b._getUIString("ScaleControl.Kilometers")):QA(r,g,u,b._getUIString("ScaleControl.Meters"))}function QA(b,r,c,g){const y=function(x){const T=Math.pow(10,`${Math.floor(x)}`.length-1);let u=x/T;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:u>=1?1:function(f){const _=Math.pow(10,Math.ceil(-Math.log(f)/Math.LN10));return Math.round(f*_)/_}(u),T*u}(c);b.style.width=r*(y/c)+"px",b.innerHTML=`${y}&nbsp;${g}`}const ga={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},tc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ye(b){if(b){if(typeof b=="number"){const r=Math.round(Math.abs(b)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,b),"top-left":new o.P(r,r),"top-right":new o.P(-r,r),bottom:new o.P(0,-b),"bottom-left":new o.P(r,-r),"bottom-right":new o.P(-r,-r),left:new o.P(b,0),right:new o.P(-b,0)}}if(b instanceof o.P||Array.isArray(b)){const r=o.P.convert(b);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:o.P.convert(b.center||[0,0]),top:o.P.convert(b.top||[0,0]),"top-left":o.P.convert(b["top-left"]||[0,0]),"top-right":o.P.convert(b["top-right"]||[0,0]),bottom:o.P.convert(b.bottom||[0,0]),"bottom-left":o.P.convert(b["bottom-left"]||[0,0]),"bottom-right":o.P.convert(b["bottom-right"]||[0,0]),left:o.P.convert(b.left||[0,0]),right:o.P.convert(b.right||[0,0])}}return Ye(new o.P(0,0))}const gr=v;p.AJAXError=o.bf,p.Evented=o.E,p.LngLat=o.M,p.MercatorCoordinate=o.Y,p.Point=o.P,p.addProtocol=o.bg,p.config=o.a,p.removeProtocol=o.bh,p.AttributionControl=jc,p.BoxZoomHandler=Pi,p.CanvasSource=Ge,p.CooperativeGesturesHandler=Cs,p.DoubleClickZoomHandler=Rc,p.DragPanHandler=Hc,p.DragRotateHandler=LA,p.EdgeInsets=Hn,p.FullscreenControl=class extends o.E{constructor(b={}){super(),this._onFullscreenChange=()=>{var r;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=c==null?void 0:c.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,b&&b.container&&(b.container instanceof HTMLElement?this._container=b.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(b){return this._map=b,this._container||(this._container=this._map.getContainer()),this._controlContainer=Q.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){Q.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const b=this._fullscreenButton=Q.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);Q.create("span","maplibregl-ctrl-icon",b).setAttribute("aria-hidden","true"),b.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const b=this._getTitle();this._fullscreenButton.setAttribute("aria-label",b),this._fullscreenButton.title=b}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},p.GeoJSONSource=ce,p.GeolocateControl=class extends o.E{constructor(b){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new o.k("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.k("geolocate",r)),this._finish()}},this._updateCamera=r=>{const c=new o.M(r.coords.longitude,r.coords.latitude),g=r.coords.accuracy,y=this._map.getBearing(),x=o.e({bearing:y},this.options.fitBoundsOptions),T=Qe.fromLngLat(c,g);this._map.fitBounds(T,x,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const c=new o.M(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&wo)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.k("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=r=>{if(this._map){if(this._container.addEventListener("contextmenu",c=>c.preventDefault()),this._geolocateButton=Q.create("button","maplibregl-ctrl-geolocate",this._container),Q.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",r===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Q.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new ti({element:this._dotElement}),this._circleElement=Q.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ti({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.k("trackuserlocationend")),this.fire(new o.k("userlocationlostfocus")))})}},this.options=o.e({},Zo,b)}onAdd(b){return this._map=b,this._container=Q.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(){return o._(this,arguments,void 0,function*(r=!1){if(ka!==void 0&&!r)return ka;if(window.navigator.permissions===void 0)return ka=!!window.navigator.geolocation,ka;try{ka=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{ka=!!window.navigator.geolocation}return ka})}().then(r=>this._setupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),Q.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,fa=0,wo=!1}_isOutOfMapMaxBounds(b){const r=this._map.getMaxBounds(),c=b.coords;return r&&(c.longitude<r.getWest()||c.longitude>r.getEast()||c.latitude<r.getSouth()||c.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const b=this._map.getBounds(),r=b.getSouthEast(),c=b.getNorthEast(),g=r.distanceTo(c),y=Math.ceil(this._accuracy/(g/this._map._container.clientHeight)*2);this._circleElement.style.width=`${y}px`,this._circleElement.style.height=`${y}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":fa--,wo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.k("trackuserlocationstart")),this.fire(new o.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let b;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),fa++,fa>1?(b={maximumAge:6e5,timeout:0},wo=!0):(b=this.options.positionOptions,wo=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,b)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},p.Hash=po,p.ImageSource=Se,p.KeyboardHandler=da,p.LngLatBounds=Qe,p.LogoControl=Kc,p.Map=class extends ld{constructor(b){o.bd.mark(o.be.create);const r=Object.assign(Object.assign({},Fs),b);if(r.minZoom!=null&&r.maxZoom!=null&&r.minZoom>r.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(r.minPitch!=null&&r.maxPitch!=null&&r.minPitch>r.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(r.minPitch!=null&&r.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(r.maxPitch!=null&&r.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new ho(r.minZoom,r.maxZoom,r.minPitch,r.maxPitch,r.renderWorldCopies),{bearingSnap:r.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new pl,this._controls=[],this._mapId=o.a3(),this._contextLost=c=>{c.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.k("webglcontextlost",{originalEvent:c}))},this._contextRestored=c=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.k("webglcontextrestored",{originalEvent:c}))},this._onMapScroll=c=>{if(c.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=r.interactive,this._maxTileCacheSize=r.maxTileCacheSize,this._maxTileCacheZoomLevels=r.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=r.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=r.preserveDrawingBuffer===!0,this._antialias=r.antialias===!0,this._trackResize=r.trackResize===!0,this._bearingSnap=r.bearingSnap,this._refreshExpiredTiles=r.refreshExpiredTiles===!0,this._fadeDuration=r.fadeDuration,this._crossSourceCollisions=r.crossSourceCollisions===!0,this._collectResourceTiming=r.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Ne),r.locale),this._clickTolerance=r.clickTolerance,this._overridePixelRatio=r.pixelRatio,this._maxCanvasSize=r.maxCanvasSize,this.transformCameraUpdate=r.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=r.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ht.addThrottleControl(()=>this.isMoving()),this._requestManager=new St(r.transformRequest),typeof r.container=="string"){if(this._container=document.getElementById(r.container),!this._container)throw new Error(`Container '${r.container}' not found.`)}else{if(!(r.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=r.container}if(r.maxBounds&&this.setMaxBounds(r.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let c=!1;const g=xs(y=>{this._trackResize&&!this._removed&&this.resize(y)._update()},50);this._resizeObserver=new ResizeObserver(y=>{c?g(y):c=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Qa(this,r),this._hash=r.hash&&new po(typeof r.hash=="string"&&r.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:r.center,zoom:r.zoom,bearing:r.bearing,pitch:r.pitch}),r.bounds&&(this.resize(),this.fitBounds(r.bounds,o.e({},r.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=r.localIdeographFontFamily,this._validateStyle=r.validateStyle,r.style&&this.setStyle(r.style,{localIdeographFontFamily:r.localIdeographFontFamily}),r.attributionControl&&this.addControl(new jc(typeof r.attributionControl=="boolean"?void 0:r.attributionControl)),r.maplibreLogo&&this.addControl(new Kc,r.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",c=>{this._update(c.dataType==="style"),this.fire(new o.k(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new o.k(`${c.dataType}dataloading`,c))}),this.on("dataabort",c=>{this.fire(new o.k("sourcedataabort",c))})}_getMapId(){return this._mapId}addControl(b,r){if(r===void 0&&(r=b.getDefaultPosition?b.getDefaultPosition():"top-right"),!b||!b.onAdd)return this.fire(new o.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=b.onAdd(this);this._controls.push(b);const g=this._controlPositions[r];return r.indexOf("bottom")!==-1?g.insertBefore(c,g.firstChild):g.appendChild(c),this}removeControl(b){if(!b||!b.onRemove)return this.fire(new o.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(b);return r>-1&&this._controls.splice(r,1),b.onRemove(this),this}hasControl(b){return this._controls.indexOf(b)>-1}calculateCameraOptionsFromTo(b,r,c,g){return g==null&&this.terrain&&(g=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(b,r,c,g)}resize(b){var r;const c=this._containerDimensions(),g=c[0],y=c[1],x=this._getClampedPixelRatio(g,y);if(this._resizeCanvas(g,y,x),this.painter.resize(g,y,x),this.painter.overLimit()){const u=this.painter.context.gl;this._maxCanvasSize=[u.drawingBufferWidth,u.drawingBufferHeight];const f=this._getClampedPixelRatio(g,y);this._resizeCanvas(g,y,f),this.painter.resize(g,y,f)}this.transform.resize(g,y),(r=this._requestedCameraState)===null||r===void 0||r.resize(g,y);const T=!this._moving;return T&&(this.stop(),this.fire(new o.k("movestart",b)).fire(new o.k("move",b))),this.fire(new o.k("resize",b)),T&&this.fire(new o.k("moveend",b)),this}_getClampedPixelRatio(b,r){const{0:c,1:g}=this._maxCanvasSize,y=this.getPixelRatio(),x=b*y,T=r*y;return Math.min(x>c?c/x:1,T>g?g/T:1)*y}getPixelRatio(){var b;return(b=this._overridePixelRatio)!==null&&b!==void 0?b:devicePixelRatio}setPixelRatio(b){this._overridePixelRatio=b,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(b){return this.transform.setMaxBounds(Qe.convert(b)),this._update()}setMinZoom(b){if((b=b??-2)>=-2&&b<=this.transform.maxZoom)return this.transform.minZoom=b,this._update(),this.getZoom()<b&&this.setZoom(b),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(b){if((b=b??22)>=this.transform.minZoom)return this.transform.maxZoom=b,this._update(),this.getZoom()>b&&this.setZoom(b),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(b){if((b=b??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(b>=0&&b<=this.transform.maxPitch)return this.transform.minPitch=b,this._update(),this.getPitch()<b&&this.setPitch(b),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(b){if((b=b??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(b>=this.transform.minPitch)return this.transform.maxPitch=b,this._update(),this.getPitch()>b&&this.setPitch(b),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(b){return this.transform.renderWorldCopies=b,this._update()}project(b){return this.transform.locationPoint(o.M.convert(b),this.style&&this.terrain)}unproject(b){return this.transform.pointLocation(o.P.convert(b),this.terrain)}isMoving(){var b;return this._moving||((b=this.handlers)===null||b===void 0?void 0:b.isMoving())}isZooming(){var b;return this._zooming||((b=this.handlers)===null||b===void 0?void 0:b.isZooming())}isRotating(){var b;return this._rotating||((b=this.handlers)===null||b===void 0?void 0:b.isRotating())}_createDelegatedListener(b,r,c){if(b==="mouseenter"||b==="mouseover"){let g=!1;return{layer:r,listener:c,delegates:{mousemove:x=>{const T=this.getLayer(r)?this.queryRenderedFeatures(x.point,{layers:[r]}):[];T.length?g||(g=!0,c.call(this,new $i(b,this,x.originalEvent,{features:T}))):g=!1},mouseout:()=>{g=!1}}}}if(b==="mouseleave"||b==="mouseout"){let g=!1;return{layer:r,listener:c,delegates:{mousemove:T=>{(this.getLayer(r)?this.queryRenderedFeatures(T.point,{layers:[r]}):[]).length?g=!0:g&&(g=!1,c.call(this,new $i(b,this,T.originalEvent)))},mouseout:T=>{g&&(g=!1,c.call(this,new $i(b,this,T.originalEvent)))}}}}{const g=y=>{const x=this.getLayer(r)?this.queryRenderedFeatures(y.point,{layers:[r]}):[];x.length&&(y.features=x,c.call(this,y),delete y.features)};return{layer:r,listener:c,delegates:{[b]:g}}}}on(b,r,c){if(c===void 0)return super.on(b,r);const g=this._createDelegatedListener(b,r,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[b]=this._delegatedListeners[b]||[],this._delegatedListeners[b].push(g);for(const y in g.delegates)this.on(y,g.delegates[y]);return this}once(b,r,c){if(c===void 0)return super.once(b,r);const g=this._createDelegatedListener(b,r,c);for(const y in g.delegates)this.once(y,g.delegates[y]);return this}off(b,r,c){return c===void 0?super.off(b,r):(this._delegatedListeners&&this._delegatedListeners[b]&&(g=>{const y=this._delegatedListeners[b];for(let x=0;x<y.length;x++){const T=y[x];if(T.layer===r&&T.listener===c){for(const u in T.delegates)this.off(u,T.delegates[u]);return y.splice(x,1),this}}})(),this)}queryRenderedFeatures(b,r){if(!this.style)return[];let c;const g=b instanceof o.P||Array.isArray(b),y=g?b:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(g?{}:b)||{},y instanceof o.P||typeof y[0]=="number")c=[o.P.convert(y)];else{const x=o.P.convert(y[0]),T=o.P.convert(y[1]);c=[x,new o.P(T.x,x.y),T,new o.P(x.x,T.y),x]}return this.style.queryRenderedFeatures(c,r,this.transform)}querySourceFeatures(b,r){return this.style.querySourceFeatures(b,r)}setStyle(b,r){return(r=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&b?(this._diffStyle(b,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(b,r))}setTransformRequest(b){return this._requestManager.setTransformRequest(b),this}_getUIString(b){const r=this._locale[b];if(r==null)throw new Error(`Missing UI string '${b}'`);return r}_updateStyle(b,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(b,r));const c=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!b)),b?(this.style=new hA(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof b=="string"?this.style.loadURL(b,r,c):this.style.loadJSON(b,r,c),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new hA(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(b,r){if(typeof b=="string"){const c=this._requestManager.transformRequest(b,"Style");o.h(c,new AbortController).then(g=>{this._updateDiff(g.data,r)}).catch(g=>{g&&this.fire(new o.j(g))})}else typeof b=="object"&&this._updateDiff(b,r)}_updateDiff(b,r){try{this.style.setState(b,r)&&this._update(!0)}catch(c){o.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(b,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(b,r){return this._lazyInitEmptyStyle(),this.style.addSource(b,r),this._update(!0)}isSourceLoaded(b){const r=this.style&&this.style.sourceCaches[b];if(r!==void 0)return r.loaded();this.fire(new o.j(new Error(`There is no source with ID '${b}'`)))}setTerrain(b){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),b){const r=this.style.sourceCaches[b.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${b.source}`);this.terrain===null&&r.reload();for(const c in this.style._layers){const g=this.style._layers[c];g.type==="hillshade"&&g.source===b.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Ma(this.painter,r,b),this.painter.renderToTexture=new Wu(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==b.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new o.k("terrain",{terrain:b})),this}getTerrain(){var b,r;return(r=(b=this.terrain)===null||b===void 0?void 0:b.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const b=this.style&&this.style.sourceCaches;for(const r in b){const c=b[r]._tiles;for(const g in c){const y=c[g];if(y.state!=="loaded"&&y.state!=="errored")return!1}}return!0}removeSource(b){return this.style.removeSource(b),this._update(!0)}getSource(b){return this.style.getSource(b)}addImage(b,r,c={}){const{pixelRatio:g=1,sdf:y=!1,stretchX:x,stretchY:T,content:u,textFitWidth:f,textFitHeight:_}=c;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||o.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:F,height:E,data:k}=r,D=r;return this.style.addImage(b,{data:new o.R({width:F,height:E},new Uint8Array(k)),pixelRatio:g,stretchX:x,stretchY:T,content:u,textFitWidth:f,textFitHeight:_,sdf:y,version:0,userImage:D}),D.onAdd&&D.onAdd(this,b),this}}{const{width:F,height:E,data:k}=U.getImageData(r);this.style.addImage(b,{data:new o.R({width:F,height:E},k),pixelRatio:g,stretchX:x,stretchY:T,content:u,textFitWidth:f,textFitHeight:_,sdf:y,version:0})}}updateImage(b,r){const c=this.style.getImage(b);if(!c)return this.fire(new o.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const g=r instanceof HTMLImageElement||o.b(r)?U.getImageData(r):r,{width:y,height:x,data:T}=g;if(y===void 0||x===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==c.data.width||x!==c.data.height)return this.fire(new o.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const u=!(r instanceof HTMLImageElement||o.b(r));return c.data.replace(T,u),this.style.updateImage(b,c),this}getImage(b){return this.style.getImage(b)}hasImage(b){return b?!!this.style.getImage(b):(this.fire(new o.j(new Error("Missing required image id"))),!1)}removeImage(b){this.style.removeImage(b)}loadImage(b){return ht.getImage(this._requestManager.transformRequest(b,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(b,r){return this._lazyInitEmptyStyle(),this.style.addLayer(b,r),this._update(!0)}moveLayer(b,r){return this.style.moveLayer(b,r),this._update(!0)}removeLayer(b){return this.style.removeLayer(b),this._update(!0)}getLayer(b){return this.style.getLayer(b)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(b,r,c){return this.style.setLayerZoomRange(b,r,c),this._update(!0)}setFilter(b,r,c={}){return this.style.setFilter(b,r,c),this._update(!0)}getFilter(b){return this.style.getFilter(b)}setPaintProperty(b,r,c,g={}){return this.style.setPaintProperty(b,r,c,g),this._update(!0)}getPaintProperty(b,r){return this.style.getPaintProperty(b,r)}setLayoutProperty(b,r,c,g={}){return this.style.setLayoutProperty(b,r,c,g),this._update(!0)}getLayoutProperty(b,r){return this.style.getLayoutProperty(b,r)}setGlyphs(b,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(b,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(b,r,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(b,r,c,g=>{g||this._update(!0)}),this}removeSprite(b){return this._lazyInitEmptyStyle(),this.style.removeSprite(b),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(b,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(b,r,c=>{c||this._update(!0)}),this}setLight(b,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(b,r),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(b,r){return this.style.setFeatureState(b,r),this._update()}removeFeatureState(b,r){return this.style.removeFeatureState(b,r),this._update()}getFeatureState(b){return this.style.getFeatureState(b)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let b=0,r=0;return this._container&&(b=this._container.clientWidth||400,r=this._container.clientHeight||300),[b,r]}_setupContainer(){const b=this._container;b.classList.add("maplibregl-map");const r=this._canvasContainer=Q.create("div","maplibregl-canvas-container",b);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=Q.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),g=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],g);const y=this._controlContainer=Q.create("div","maplibregl-control-container",b),x=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(T=>{x[T]=Q.create("div",`maplibregl-ctrl-${T} `,y)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(b,r,c){this._canvas.width=Math.floor(c*b),this._canvas.height=Math.floor(c*r),this._canvas.style.width=`${b}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const b={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",g=>{r={requestedAttributes:b},g&&(r.statusMessage=g.statusMessage,r.type=g.type)},{once:!0});const c=this._canvas.getContext("webgl2",b)||this._canvas.getContext("webgl",b);if(!c){const g="Failed to initialize WebGL";throw r?(r.message=g,new Error(JSON.stringify(r))):new Error(g)}this.painter=new Lr(c,this.transform),P.testSupport(c)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(b){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||b,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(b){return this._update(),this._renderTaskQueue.add(b)}_cancelRenderFrame(b){this._renderTaskQueue.remove(b)}_render(b){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(b),this._removed)return;let c=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const y=this.transform.zoom,x=U.now();this.style.zoomHistory.update(y,x);const T=new o.a8(y,{now:x,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),u=T.crossFadingFactor();u===1&&u===this._crossFadingFactor||(c=!0,this._crossFadingFactor=u),this.style.update(T)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new o.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.bd.mark(o.be.load),this.fire(new o.k("load"))),this.style&&(this.style.hasTransitions()||c)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const g=this._sourcesDirty||this._styleDirty||this._placementDirty;return g||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.k("idle")),!this._loaded||this._fullyLoaded||g||(this._fullyLoaded=!0,o.bd.mark(o.be.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var b;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ht.removeThrottleControl(this._imageQueueHandle),(b=this._resizeObserver)===null||b===void 0||b.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r!=null&&r.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),Q.remove(this._canvasContainer),Q.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),o.bd.clearMetrics(),this._removed=!0,this.fire(new o.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,U.frameAsync(this._frameRequest).then(b=>{o.bd.frame(b),this._frameRequest=null,this._render(b)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(b){this._showTileBoundaries!==b&&(this._showTileBoundaries=b,this._update())}get showPadding(){return!!this._showPadding}set showPadding(b){this._showPadding!==b&&(this._showPadding=b,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(b){this._showCollisionBoxes!==b&&(this._showCollisionBoxes=b,b?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(b){this._showOverdrawInspector!==b&&(this._showOverdrawInspector=b,this._update())}get repaint(){return!!this._repaint}set repaint(b){this._repaint!==b&&(this._repaint=b,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(b){this._vertices=b,this._update()}get version(){return pa}getCameraTargetElevation(){return this.transform.elevation}},p.MapMouseEvent=$i,p.MapTouchEvent=ln,p.MapWheelEvent=ua,p.Marker=ti,p.NavigationControl=class{constructor(b){this._updateZoomButtons=()=>{const r=this._map.getZoom(),c=r===this._map.getMaxZoom(),g=r===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())},this._rotateCompassArrow=()=>{const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,c)=>{const g=this._map._getUIString(`NavigationControl.${c}`);r.title=g,r.setAttribute("aria-label",g)},this.options=o.e({},$c,b),this._container=Q.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),Q.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),Q.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=Q.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(b){return this._map=b,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new qc(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){Q.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(b,r){const c=Q.create("button",b,this._container);return c.type="button",c.addEventListener("click",r),c}},p.Popup=class extends o.E{constructor(b){super(),this.remove=()=>(this._content&&Q.remove(this._content),this._container&&(Q.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.k("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{var c;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=Q.create("div","maplibregl-popup",this._map.getContainer()),this._tip=Q.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const u of this.options.className.split(" "))this._container.classList.add(u);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Gc(this._lngLat,this._flatPos,this._map.transform):(c=this._lngLat)===null||c===void 0?void 0:c.wrap(),this._trackPointer&&!r)return;const g=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationPoint(this._lngLat));let y=this.options.anchor;const x=Ye(this.options.offset);if(!y){const u=this._container.offsetWidth,f=this._container.offsetHeight;let _;_=g.y+x.bottom.y<f?["top"]:g.y>this._map.transform.height-f?["bottom"]:[],g.x<u/2?_.push("left"):g.x>this._map.transform.width-u/2&&_.push("right"),y=_.length===0?"bottom":_.join("-")}let T=g.add(x[y]);this.options.subpixelPositioning||(T=T.round()),Q.setTransform(this._container,`${Jl[y]} translate(${T.x}px,${T.y}px)`),vo(this._container,y,"popup")},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(ga),b)}addTo(b){return this._map&&this.remove(),this._map=b,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(b){return this._lngLat=o.M.convert(b),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(b){return this.setDOMContent(document.createTextNode(b))}setHTML(b){const r=document.createDocumentFragment(),c=document.createElement("body");let g;for(c.innerHTML=b;g=c.firstChild,g;)r.appendChild(g);return this.setDOMContent(r)}getMaxWidth(){var b;return(b=this._container)===null||b===void 0?void 0:b.style.maxWidth}setMaxWidth(b){return this.options.maxWidth=b,this._update(),this}setDOMContent(b){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=Q.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(b),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(b){return this._container&&this._container.classList.add(b),this}removeClassName(b){return this._container&&this._container.classList.remove(b),this}setOffset(b){return this.options.offset=b,this._update(),this}toggleClassName(b){if(this._container)return this._container.classList.toggle(b)}setSubpixelPositioning(b){this.options.subpixelPositioning=b}_createCloseButton(){this.options.closeButton&&(this._closeButton=Q.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const b=this._container.querySelector(tc);b&&b.focus()}},p.RasterDEMTileSource=$e,p.RasterTileSource=dr,p.ScaleControl=class{constructor(b){this._onMove=()=>{Xc(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,Xc(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Wc),b)}getDefaultPosition(){return"bottom-left"}onAdd(b){return this._map=b,this._container=Q.create("div","maplibregl-ctrl maplibregl-ctrl-scale",b.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){Q.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},p.ScrollZoomHandler=dl,p.Style=hA,p.TerrainControl=class{constructor(b){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=b}onAdd(b){return this._map=b,this._container=Q.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=Q.create("button","maplibregl-ctrl-terrain",this._container),Q.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){Q.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},p.TwoFingersTouchPitchHandler=hl,p.TwoFingersTouchRotateHandler=UA,p.TwoFingersTouchZoomHandler=Wo,p.TwoFingersTouchZoomRotateHandler=Vc,p.VectorTileSource=nt,p.VideoSource=Ie,p.addSourceType=(b,r)=>o._(void 0,void 0,void 0,function*(){if(pr(b))throw new Error(`A source type called "${b}" already exists.`);((c,g)=>{Ze[c]=g})(b,r)}),p.clearPrewarmedResources=function(){const b=Et;b&&(b.isPreloaded()&&b.numActive()===1?(b.release(rt),Et=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},p.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},p.getRTLTextPluginStatus=function(){return Xe().getRTLTextPluginStatus()},p.getVersion=function(){return gr},p.getWorkerCount=function(){return dt.workerCount},p.getWorkerUrl=function(){return o.a.WORKER_URL},p.importScriptInWorkers=function(b){return se().broadcast("IS",b)},p.prewarm=function(){Ht().acquire(rt)},p.setMaxParallelImageRequests=function(b){o.a.MAX_PARALLEL_IMAGE_REQUESTS=b},p.setRTLTextPlugin=function(b,r){return Xe().setRTLTextPlugin(b,r)},p.setWorkerCount=function(b){dt.workerCount=b},p.setWorkerUrl=function(b){o.a.WORKER_URL=b}});var h=i;return h})})(qy);var WC=qy.exports,XC=Object.defineProperty,ZC=(n,t,i)=>t in n?XC(n,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[t]=i,ri=(n,t,i)=>ZC(n,typeof t!="symbol"?t+"":t,i);let YC=class{constructor(t){ri(this,"map"),ri(this,"width"),ri(this,"height"),ri(this,"svgCanvas"),ri(this,"xLine"),ri(this,"yLine"),ri(this,"color","#535353"),this.map=t,this.mapResize=this.mapResize.bind(this)}create(){this.updateValues(),this.map!==void 0?(this.map.on("resize",this.mapResize),this.createCanvas(this.map.getCanvasContainer())):console.error("map object is null")}updateValues(){var t,i;this.width=(t=this.map)==null?void 0:t.getCanvas().clientWidth,this.height=(i=this.map)==null?void 0:i.getCanvas().clientHeight}mapResize(){this.updateValues(),this.updateCanvas()}updateCanvas(){if(this.svgCanvas!==void 0&&this.yLine!==void 0&&this.xLine!==void 0&&this.width!==void 0&&this.height!==void 0){this.svgCanvas.setAttribute("width",`${this.width}px`),this.svgCanvas.setAttribute("height",`${this.height}px`);const t=this.width/2,i=this.height/2;this.yLine.setAttribute("x1",`${t}px`),this.yLine.setAttribute("y1","0px"),this.yLine.setAttribute("x2",`${t}px`),this.yLine.setAttribute("y2",`${this.height}px`),this.xLine.setAttribute("x1","0px"),this.xLine.setAttribute("y1",`${i}px`),this.xLine.setAttribute("x2",`${this.width}px`),this.xLine.setAttribute("y2",`${i}px`)}else console.error("element value is null")}createCanvas(t){if(this.width!==void 0&&this.height!==void 0){const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.style.position="relative",i.setAttribute("width",`${this.width}px`),i.setAttribute("height",`${this.height}px`);const s=this.width/2,l=this.height/2;this.yLine=i.appendChild(this.createLine(s,0,s,this.height,this.color,"2px")),this.xLine=i.appendChild(this.createLine(0,l,this.width,l,this.color,"2px")),t==null||t.appendChild(i),this.svgCanvas=i}}createLine(t,i,s,l,h,p){const o=document.createElementNS("http://www.w3.org/2000/svg","line");return o.setAttribute("x1",t),o.setAttribute("y1",i),o.setAttribute("x2",s),o.setAttribute("y2",l),o.setAttribute("stroke-dasharray","5,5"),o.setAttribute("stroke",h),o.setAttribute("stroke-width",p),o}destroy(){this.xLine!==void 0&&(this.xLine.remove(),this.xLine=void 0),this.yLine!==void 0&&(this.yLine.remove(),this.yLine=void 0),this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0),this.map!==void 0&&(this.map.off("resize",this.mapResize),this.map=void 0)}};const hg={72:72,96:96,200:200,300:300,400:400},rA={JPEG:"jpg",PNG:"png",PDF:"pdf",SVG:"svg"},ch={Landscape:"landscape",Portrait:"portrait"},xl={LARGE:[474,406.2],LANDSCAPE:[609.4,304.65],A2:[594,420],A3:[420,297],A4:[297,210],A5:[210,148],A6:[148,105],B2:[707,500],B3:[500,353],B4:[353,250],B5:[250,176],B6:[176,125]},hc={in:"in",mm:"mm"};let JC=class{constructor(t){ri(this,"map"),ri(this,"width"),ri(this,"height"),ri(this,"unit"),ri(this,"svgCanvas"),ri(this,"svgPath");var i,s,l;if(this.map=t,this.map===void 0)return;this.mapResize=this.mapResize.bind(this),this.map.on("resize",this.mapResize);const h=(i=this.map)==null?void 0:i.getCanvas().clientWidth,p=(s=this.map)==null?void 0:s.getCanvas().clientHeight,o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.style.position="absolute",o.style.top="0px",o.style.left="0px",o.setAttribute("width",`${h}px`),o.setAttribute("height",`${p}px`);const v=document.createElementNS("http://www.w3.org/2000/svg","path");v.setAttribute("style","fill:#888888;stroke-width:0"),v.setAttribute("fill-opacity","0.5"),o.append(v),(l=this.map)==null||l.getCanvasContainer().appendChild(o),this.svgCanvas=o,this.svgPath=v}mapResize(){this.generateCutOut()}updateArea(t,i){this.width=t,this.height=i,this.unit=hc.mm,this.generateCutOut()}generateCutOut(){var t,i;if(this.map===void 0||this.svgCanvas===void 0||this.svgPath===void 0)return;const s=this.toPixels(this.width),l=this.toPixels(this.height),h=(t=this.map)==null?void 0:t.getCanvas().clientWidth,p=(i=this.map)==null?void 0:i.getCanvas().clientHeight,o=h/2-s/2,v=o+s,C=p/2-l/2,I=C+l;this.svgCanvas.setAttribute("width",`${h}px`),this.svgCanvas.setAttribute("height",`${p}px`),this.svgPath.setAttribute("d",`M 0 0 L ${h} 0 L ${h} ${p} L 0 ${p} M ${o} ${C} L ${o} ${I} L ${v} ${I} L ${v} ${C}`)}destroy(){this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0),this.map!==void 0&&(this.map=void 0)}toPixels(t,i=96){return this.unit===hc.mm&&(i/=25.4),i*t}};const Gy={PageSize:"Page Size",PageOrientation:"Page Orientation",Format:"Format",DPI:"DPI",Generate:"Generate",LanguageName:"English",LanguageCode:"en"},t4={PageSize:"Taille de page",PageOrientation:"Orientation de la page",Format:"Format",DPI:"DPI",Generate:"Générer",LanguageName:"Français",LanguageCode:"fr"},e4={PageSize:"Sivukoko",PageOrientation:"Sivun suunta",Format:"Muoto",DPI:"DPI",Generate:"Generoi",LanguageName:"Suomalainen",LanguageCode:"fi"},r4={PageSize:"Papierformat",PageOrientation:"Papierausrichtung",Format:"Dateiformat",DPI:"Druckauflösung",Generate:"Erstellen",LanguageName:"Deutsch",LanguageCode:"de"},i4={PageSize:"Sidstorlek",PageOrientation:"Sidorientering",Format:"Format",DPI:"DPI",Generate:"Generera",LanguageName:"Svenska",LanguageCode:"sv"},n4={PageSize:"Tamaño de página",PageOrientation:"Orientación de página",Format:"Formato",DPI:"DPI",Generate:"Generar",LanguageName:"Española",LanguageCode:"es"},s4={PageSize:"Mida",PageOrientation:"Orientació",Format:"Format",DPI:"DPI",Generate:"Genera",LanguageName:"Catalan",LanguageCode:"ca"},a4={PageSize:"Kích thước trang",PageOrientation:"Loại trang",Format:"Định dạng",DPI:"Mật độ điểm ảnh (DPI)",Generate:"Tạo",LanguageName:"Tiếng Việt",LanguageCode:"vi"},o4={PageSize:"Розмір сторінки",PageOrientation:"Орієнтація сторінки",Format:"Формат",DPI:"DPI",Generate:"Згенерувати",LanguageName:"українська",LanguageCode:"uk"},A4={PageSize:"页面大小",PageOrientation:"页面方向",Format:"格式",DPI:"像素",Generate:"导出",LanguageName:"简体字",LanguageCode:"zhHans"},l4={PageSize:"頁面大小",PageOrientation:"頁面方向",Format:"格式",DPI:"像素",Generate:"導出",LanguageName:"繁体字",LanguageCode:"zhHant"},c4={PageSize:"ページサイズ",PageOrientation:"ページ方向",Format:"フォーマット",DPI:"DPI（解像度）",Generate:"出力",LanguageName:"日本語",LanguageCode:"ja"},u4={PageSize:"Tamanho da página",PageOrientation:"Orientação da página",Format:"Formato",DPI:"DPI",Generate:"Gerar",LanguageName:"Português",LanguageCode:"pt"},h4=[Gy,t4,e4,r4,i4,n4,s4,a4,o4,A4,l4,c4,u4],d4=n=>h4.find(t=>t.LanguageCode===n)??Gy;(function(n){var t={};function i(s){if(t[s])return t[s].exports;var l=t[s]={i:s,l:!1,exports:{}};return n[s].call(l.exports,l,l.exports,i),l.l=!0,l.exports}i.m=n,i.c=t,i.d=function(s,l,h){i.o(s,l)||Object.defineProperty(s,l,{enumerable:!0,get:h})},i.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,l){if(1&l&&(s=i(s)),8&l||4&l&&typeof s=="object"&&s&&s.__esModule)return s;var h=Object.create(null);if(i.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:s}),2&l&&typeof s!="string")for(var p in s)i.d(h,p,(function(o){return s[o]}).bind(null,p));return h},i.n=function(s){var l=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(l,"a",l),l},i.o=function(s,l){return Object.prototype.hasOwnProperty.call(s,l)},i.p="",i(i.s=0)})([function(n,t,i){n.exports=i(1)},function(n,t){function i(l,h){for(var p=0;p<h.length;p++){var o=h[p];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(l,o.key,o)}}var s=function(){function l(){(function(o,v){if(!(o instanceof v))throw new TypeError("Cannot call a class as a function")})(this,l),this.options={overlayBackgroundColor:"#666666",overlayOpacity:.6,spinnerIcon:"ball-circus",spinnerColor:"#000",spinnerSize:"3x",overlayIDName:"overlay",spinnerIDName:"spinner",offsetY:0,offsetX:0,lockScroll:!1,containerID:null,spinnerZIndex:99999,overlayZIndex:99998},this.stylesheetBaseURL="https://cdn.jsdelivr.net/npm/load-awesome@1.1.0/css/",this.spinner=null,this.spinnerStylesheetURL=null,this.numberOfEmptyDivForSpinner={"ball-8bits":16,"ball-atom":4,"ball-beat":3,"ball-circus":5,"ball-climbing-dot":1,"ball-clip-rotate":1,"ball-clip-rotate-multiple":2,"ball-clip-rotate-pulse":2,"ball-elastic-dots":5,"ball-fall":3,"ball-fussion":4,"ball-grid-beat":9,"ball-grid-pulse":9,"ball-newton-cradle":4,"ball-pulse":3,"ball-pulse-rise":5,"ball-pulse-sync":3,"ball-rotate":1,"ball-running-dots":5,"ball-scale":1,"ball-scale-multiple":3,"ball-scale-pulse":2,"ball-scale-ripple":1,"ball-scale-ripple-multiple":3,"ball-spin":8,"ball-spin-clockwise":8,"ball-spin-clockwise-fade":8,"ball-spin-clockwise-fade-rotating":8,"ball-spin-fade":8,"ball-spin-fade-rotating":8,"ball-spin-rotate":2,"ball-square-clockwise-spin":8,"ball-square-spin":8,"ball-triangle-path":3,"ball-zig-zag":2,"ball-zig-zag-deflect":2,cog:1,"cube-transition":2,fire:3,"line-scale":5,"line-scale-party":5,"line-scale-pulse-out":5,"line-scale-pulse-out-rapid":5,"line-spin-clockwise-fade":8,"line-spin-clockwise-fade-rotating":8,"line-spin-fade":8,"line-spin-fade-rotating":8,pacman:6,"square-jelly-box":2,"square-loader":1,"square-spin":1,timer:1,"triangle-skew-spin":1}}var h,p;return h=l,(p=[{key:"show",value:function(o){this.setOptions(o),this.addSpinnerStylesheet(),this.generateSpinnerElement(),this.options.lockScroll&&(document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden"),this.generateAndAddOverlayElement()}},{key:"hide",value:function(){this.options.lockScroll&&(document.body.style.overflow="",document.documentElement.style.overflow="");var o=document.getElementById("loading-overlay-stylesheet");o&&(o.disabled=!0,o.parentNode.removeChild(o),document.getElementById(this.options.overlayIDName).remove(),document.getElementById(this.options.spinnerIDName).remove())}},{key:"setOptions",value:function(o){if(o!==void 0)for(var v in o)this.options[v]=o[v]}},{key:"generateAndAddOverlayElement",value:function(){var o="50%";this.options.offsetX!==0&&(o="calc(50% + "+this.options.offsetX+")");var v="50%";if(this.options.offsetY!==0&&(v="calc(50% + "+this.options.offsetY+")"),this.options.containerID&&document.body.contains(document.getElementById(this.options.containerID))){var C='<div id="'.concat(this.options.overlayIDName,'" style="display: block !important; position: absolute; top: 0; left: 0; overflow: auto; opacity: ').concat(this.options.overlayOpacity,"; background: ").concat(this.options.overlayBackgroundColor,'; z-index: 50; width: 100%; height: 100%;"></div><div id="').concat(this.options.spinnerIDName,'" style="display: block !important; position: absolute; top: ').concat(v,"; left: ").concat(o,'; -webkit-transform: translate(-50%); -ms-transform: translate(-50%); transform: translate(-50%); z-index: 9999;">').concat(this.spinner,"</div>"),I=document.getElementById(this.options.containerID);return I.style.position="relative",void I.insertAdjacentHTML("beforeend",C)}var U='<div id="'.concat(this.options.overlayIDName,'" style="display: block !important; position: fixed; top: 0; left: 0; overflow: auto; opacity: ').concat(this.options.overlayOpacity,"; background: ").concat(this.options.overlayBackgroundColor,"; z-index: ").concat(this.options.overlayZIndex,'; width: 100%; height: 100%;"></div><div id="').concat(this.options.spinnerIDName,'" style="display: block !important; position: fixed; top: ').concat(v,"; left: ").concat(o,"; -webkit-transform: translate(-50%); -ms-transform: translate(-50%); transform: translate(-50%); z-index: ").concat(this.options.spinnerZIndex,';">').concat(this.spinner,"</div>");document.body.insertAdjacentHTML("beforeend",U)}},{key:"generateSpinnerElement",value:function(){var o=this,v=Object.keys(this.numberOfEmptyDivForSpinner).find(function(I){return I===o.options.spinnerIcon}),C=this.generateEmptyDivElement(this.numberOfEmptyDivForSpinner[v]);this.spinner='<div style="color: '.concat(this.options.spinnerColor,'" class="la-').concat(this.options.spinnerIcon," la-").concat(this.options.spinnerSize,'">').concat(C,"</div>")}},{key:"addSpinnerStylesheet",value:function(){this.setSpinnerStylesheetURL();var o=document.createElement("link");o.setAttribute("id","loading-overlay-stylesheet"),o.setAttribute("rel","stylesheet"),o.setAttribute("type","text/css"),o.setAttribute("href",this.spinnerStylesheetURL),document.getElementsByTagName("head")[0].appendChild(o)}},{key:"setSpinnerStylesheetURL",value:function(){this.spinnerStylesheetURL=this.stylesheetBaseURL+this.options.spinnerIcon+".min.css"}},{key:"generateEmptyDivElement",value:function(o){for(var v="",C=1;C<=o;C++)v+="<div></div>";return v}}])&&i(h.prototype,p),l}();window.JsLoadingOverlay=new s,n.exports=JsLoadingOverlay}]);function ii(n){"@babel/helpers - typeof";return ii=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ii(n)}var ta=Uint8Array,Qs=Uint16Array,uh=Uint32Array,Ud=new ta([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Pd=new ta([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),dg=new ta([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Wy=function(n,t){for(var i=new Qs(31),s=0;s<31;++s)i[s]=t+=1<<n[s-1];for(var l=new uh(i[30]),s=1;s<30;++s)for(var h=i[s];h<i[s+1];++h)l[h]=h-i[s]<<5|s;return[i,l]},Xy=Wy(Ud,2),Zy=Xy[0],pg=Xy[1];Zy[28]=258,pg[258]=28;for(var Yy=Wy(Pd,0),p4=Yy[0],Jy=Yy[1],fg=new Qs(32768),Ri=0;Ri<32768;++Ri){var Bl=(Ri&43690)>>>1|(Ri&21845)<<1;Bl=(Bl&52428)>>>2|(Bl&13107)<<2,Bl=(Bl&61680)>>>4|(Bl&3855)<<4,fg[Ri]=((Bl&65280)>>>8|(Bl&255)<<8)>>>1}for(var iA=function(n,t,i){for(var s=n.length,l=0,h=new Qs(t);l<s;++l)++h[n[l]-1];var p=new Qs(t);for(l=0;l<t;++l)p[l]=p[l-1]+h[l-1]<<1;var o;if(i){o=new Qs(1<<t);var v=15-t;for(l=0;l<s;++l)if(n[l])for(var C=l<<4|n[l],I=t-n[l],U=p[n[l]-1]++<<I,Q=U|(1<<I)-1;U<=Q;++U)o[fg[U]>>>v]=C}else for(o=new Qs(s),l=0;l<s;++l)o[l]=fg[p[n[l]-1]++]>>>15-n[l];return o},Cl=new ta(288),Ri=0;Ri<144;++Ri)Cl[Ri]=8;for(var Ri=144;Ri<256;++Ri)Cl[Ri]=9;for(var Ri=256;Ri<280;++Ri)Cl[Ri]=7;for(var Ri=280;Ri<288;++Ri)Cl[Ri]=8;for(var hh=new ta(32),Ri=0;Ri<32;++Ri)hh[Ri]=5;var f4=iA(Cl,9,0),g4=iA(Cl,9,1),m4=iA(hh,5,0),y4=iA(hh,5,1),gg=function(n){for(var t=n[0],i=1;i<n.length;++i)n[i]>t&&(t=n[i]);return t},Co=function(n,t,i){var s=t/8>>0;return(n[s]|n[s+1]<<8)>>>(t&7)&i},mg=function(n,t){var i=t/8>>0;return(n[i]|n[i+1]<<8|n[i+2]<<16)>>>(t&7)},yg=function(n){return(n/8>>0)+(n&7&&1)},tv=function(n,t,i){(i==null||i>n.length)&&(i=n.length);var s=new(n instanceof Qs?Qs:n instanceof uh?uh:ta)(i-t);return s.set(n.subarray(t,i)),s},v4=function(n,t,i){var s=n.length,l=!t||i,h=!i||i.i;i||(i={}),t||(t=new ta(s*3));var p=function(Nt){var Ht=t.length;if(Nt>Ht){var ie=new ta(Math.max(Ht*2,Nt));ie.set(t),t=ie}},o=i.f||0,v=i.p||0,C=i.b||0,I=i.l,U=i.d,Q=i.m,P=i.n,K=s*8;do{if(!I){i.f=o=Co(n,v,1);var V=Co(n,v+1,3);if(v+=3,V)if(V==1)I=g4,U=y4,Q=9,P=5;else if(V==2){var Y=Co(n,v,31)+257,$=Co(n,v+10,15)+4,it=Y+Co(n,v+5,31)+1;v+=14;for(var ht=new ta(it),St=new ta(19),Tt=0;Tt<$;++Tt)St[dg[Tt]]=Co(n,v+Tt*3,7);v+=$*3;var Lt=gg(St),Ft=(1<<Lt)-1;if(!h&&v+it*(Lt+7)>K)break;for(var yt=iA(St,Lt,1),Tt=0;Tt<it;){var Rt=yt[Co(n,v,Ft)];v+=Rt&15;var Wt=Rt>>>4;if(Wt<16)ht[Tt++]=Wt;else{var At=0,lt=0;for(Wt==16?(lt=3+Co(n,v,3),v+=2,At=ht[Tt-1]):Wt==17?(lt=3+Co(n,v,7),v+=3):Wt==18&&(lt=11+Co(n,v,127),v+=7);lt--;)ht[Tt++]=At}}var bt=ht.subarray(0,Y),wt=ht.subarray(Y);Q=gg(bt),P=gg(wt),I=iA(bt,Q,1),U=iA(wt,P,1)}else throw"invalid block type";else{var Wt=yg(v)+4,Xt=n[Wt-4]|n[Wt-3]<<8,Gt=Wt+Xt;if(Gt>s){if(h)throw"unexpected EOF";break}l&&p(C+Xt),t.set(n.subarray(Wt,Gt),C),i.b=C+=Xt,i.p=v=Gt*8;continue}if(v>K)throw"unexpected EOF"}l&&p(C+131072);for(var Yt=(1<<Q)-1,qt=(1<<P)-1,te=Q+P+18;h||v+te<K;){var At=I[mg(n,v)&Yt],Jt=At>>>4;if(v+=At&15,v>K)throw"unexpected EOF";if(!At)throw"invalid length/literal";if(Jt<256)t[C++]=Jt;else if(Jt==256){I=null;break}else{var me=Jt-254;if(Jt>264){var Tt=Jt-257,rt=Ud[Tt];me=Co(n,v,(1<<rt)-1)+Zy[Tt],v+=rt}var dt=U[mg(n,v)&qt],Bt=dt>>>4;if(!dt)throw"invalid distance";v+=dt&15;var wt=p4[Bt];if(Bt>3){var rt=Pd[Bt];wt+=mg(n,v)&(1<<rt)-1,v+=rt}if(v>K)throw"unexpected EOF";l&&p(C+131072);for(var Et=C+me;C<Et;C+=4)t[C]=t[C-wt],t[C+1]=t[C+1-wt],t[C+2]=t[C+2-wt],t[C+3]=t[C+3-wt];C=Et}}i.l=I,i.p=v,i.b=C,I&&(o=1,i.m=Q,i.d=U,i.n=P)}while(!o);return C==t.length?t:tv(t,0,C)},jA=function(n,t,i){i<<=t&7;var s=t/8>>0;n[s]|=i,n[s+1]|=i>>>8},dh=function(n,t,i){i<<=t&7;var s=t/8>>0;n[s]|=i,n[s+1]|=i>>>8,n[s+2]|=i>>>16},vg=function(n,t){for(var i=[],s=0;s<n.length;++s)n[s]&&i.push({s,f:n[s]});var l=i.length,h=i.slice();if(!l)return[new ta(0),0];if(l==1){var p=new ta(i[0].s+1);return p[i[0].s]=1,[p,1]}i.sort(function(Tt,Lt){return Tt.f-Lt.f}),i.push({s:-1,f:25001});var o=i[0],v=i[1],C=0,I=1,U=2;for(i[0]={s:-1,f:o.f+v.f,l:o,r:v};I!=l-1;)o=i[i[C].f<i[U].f?C++:U++],v=i[C!=I&&i[C].f<i[U].f?C++:U++],i[I++]={s:-1,f:o.f+v.f,l:o,r:v};for(var Q=h[0].s,s=1;s<l;++s)h[s].s>Q&&(Q=h[s].s);var P=new Qs(Q+1),K=wg(i[I-1],P,0);if(K>t){var s=0,V=0,Y=K-t,$=1<<Y;for(h.sort(function(Lt,Ft){return P[Ft.s]-P[Lt.s]||Lt.f-Ft.f});s<l;++s){var it=h[s].s;if(P[it]>t)V+=$-(1<<K-P[it]),P[it]=t;else break}for(V>>>=Y;V>0;){var ht=h[s].s;P[ht]<t?V-=1<<t-P[ht]++-1:++s}for(;s>=0&&V;--s){var St=h[s].s;P[St]==t&&(--P[St],++V)}K=t}return[new ta(P),K]},wg=function(n,t,i){return n.s==-1?Math.max(wg(n.l,t,i+1),wg(n.r,t,i+1)):t[n.s]=i},ev=function(n){for(var t=n.length;t&&!n[--t];);for(var i=new Qs(++t),s=0,l=n[0],h=1,p=function(v){i[s++]=v},o=1;o<=t;++o)if(n[o]==l&&o!=t)++h;else{if(!l&&h>2){for(;h>138;h-=138)p(32754);h>2&&(p(h>10?h-11<<5|28690:h-3<<5|12305),h=0)}else if(h>3){for(p(l),--h;h>6;h-=6)p(8304);h>2&&(p(h-3<<5|8208),h=0)}for(;h--;)p(l);h=1,l=n[o]}return[i.subarray(0,s),t]},ph=function(n,t){for(var i=0,s=0;s<t.length;++s)i+=n[s]*t[s];return i},_g=function(n,t,i){var s=i.length,l=yg(t+2);n[l]=s&255,n[l+1]=s>>>8,n[l+2]=n[l]^255,n[l+3]=n[l+1]^255;for(var h=0;h<s;++h)n[l+h+4]=i[h];return(l+4+s)*8},rv=function(n,t,i,s,l,h,p,o,v,C,I){jA(t,I++,i),++l[256];for(var U=vg(l,15),Q=U[0],P=U[1],K=vg(h,15),V=K[0],Y=K[1],$=ev(Q),it=$[0],ht=$[1],St=ev(V),Tt=St[0],Lt=St[1],Ft=new Qs(19),yt=0;yt<it.length;++yt)Ft[it[yt]&31]++;for(var yt=0;yt<Tt.length;++yt)Ft[Tt[yt]&31]++;for(var Rt=vg(Ft,7),Wt=Rt[0],At=Rt[1],lt=19;lt>4&&!Wt[dg[lt-1]];--lt);var bt=C+5<<3,wt=ph(l,Cl)+ph(h,hh)+p,Xt=ph(l,Q)+ph(h,V)+p+14+3*lt+ph(Ft,Wt)+(2*Ft[16]+3*Ft[17]+7*Ft[18]);if(bt<=wt&&bt<=Xt)return _g(t,I,n.subarray(v,v+C));var Gt,Yt,qt,te;if(jA(t,I,1+(Xt<wt)),I+=2,Xt<wt){Gt=iA(Q,P,0),Yt=Q,qt=iA(V,Y,0),te=V;var Jt=iA(Wt,At,0);jA(t,I,ht-257),jA(t,I+5,Lt-1),jA(t,I+10,lt-4),I+=14;for(var yt=0;yt<lt;++yt)jA(t,I+3*yt,Wt[dg[yt]]);I+=3*lt;for(var me=[it,Tt],rt=0;rt<2;++rt)for(var dt=me[rt],yt=0;yt<dt.length;++yt){var Bt=dt[yt]&31;jA(t,I,Jt[Bt]),I+=Wt[Bt],Bt>15&&(jA(t,I,dt[yt]>>>5&127),I+=dt[yt]>>>12)}}else Gt=f4,Yt=Cl,qt=m4,te=hh;for(var yt=0;yt<o;++yt)if(s[yt]>255){var Bt=s[yt]>>>18&31;dh(t,I,Gt[Bt+257]),I+=Yt[Bt+257],Bt>7&&(jA(t,I,s[yt]>>>23&31),I+=Ud[Bt]);var Et=s[yt]&31;dh(t,I,qt[Et]),I+=te[Et],Et>3&&(dh(t,I,s[yt]>>>5&8191),I+=Pd[Et])}else dh(t,I,Gt[s[yt]]),I+=Yt[s[yt]];return dh(t,I,Gt[256]),I+Yt[256]},w4=new uh([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),_4=function(n,t,i,s,l,h){var p=n.length,o=new ta(s+p+5*(1+Math.floor(p/7e3))+l),v=o.subarray(s,o.length-l),C=0;if(!t||p<8)for(var I=0;I<=p;I+=65535){var U=I+65535;U<p?C=_g(v,C,n.subarray(I,U)):(v[I]=h,C=_g(v,C,n.subarray(I,p)))}else{for(var Q=w4[t-1],P=Q>>>13,K=Q&8191,V=(1<<i)-1,Y=new Qs(32768),$=new Qs(V+1),it=Math.ceil(i/3),ht=2*it,St=function(Qe){return(n[Qe]^n[Qe+1]<<it^n[Qe+2]<<ht)&V},Tt=new uh(25e3),Lt=new Qs(288),Ft=new Qs(32),yt=0,Rt=0,I=0,Wt=0,At=0,lt=0;I<p;++I){var bt=St(I),wt=I&32767,Xt=$[bt];if(Y[wt]=Xt,$[bt]=wt,At<=I){var Gt=p-I;if((yt>7e3||Wt>24576)&&Gt>423){C=rv(n,v,0,Tt,Lt,Ft,Rt,Wt,lt,I-lt,C),Wt=yt=Rt=0,lt=I;for(var Yt=0;Yt<286;++Yt)Lt[Yt]=0;for(var Yt=0;Yt<30;++Yt)Ft[Yt]=0}var qt=2,te=0,Jt=K,me=wt-Xt&32767;if(Gt>2&&bt==St(I-me))for(var rt=Math.min(P,Gt)-1,dt=Math.min(32767,I),Bt=Math.min(258,Gt);me<=dt&&--Jt&&wt!=Xt;){if(n[I+qt]==n[I+qt-me]){for(var Et=0;Et<Bt&&n[I+Et]==n[I+Et-me];++Et);if(Et>qt){if(qt=Et,te=me,Et>rt)break;for(var Nt=Math.min(me,Et-2),Ht=0,Yt=0;Yt<Nt;++Yt){var ie=I-me+Yt+32768&32767,se=Y[ie],Ce=ie-se+32768&32767;Ce>Ht&&(Ht=Ce,Xt=ie)}}}wt=Xt,Xt=Y[wt],me+=wt-Xt+32768&32767}if(te){Tt[Wt++]=268435456|pg[qt]<<18|Jy[te];var be=pg[qt]&31,Te=Jy[te]&31;Rt+=Ud[be]+Pd[Te],++Lt[257+be],++Ft[Te],At=I+qt,++yt}else Tt[Wt++]=n[I],++Lt[n[I]]}}C=rv(n,v,h,Tt,Lt,Ft,Rt,Wt,lt,I-lt,C)}return tv(o,0,s+yg(C)+l)},b4=function(){var n=1,t=0;return{p:function(i){for(var s=n,l=t,h=i.length,p=0;p!=h;){for(var o=Math.min(p+5552,h);p<o;++p)s+=i[p],l+=s;s%=65521,l%=65521}n=s,t=l},d:function(){return(n>>>8<<16|(t&255)<<8|t>>>8)+((n&255)<<23)*2}}},x4=function(n,t,i,s,l){return _4(n,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):12+t.mem,i,s,!l)},B4=function(n,t,i){for(;i;++t)n[t]=i,i>>>=8},C4=function(n,t){var i=t.level,s=i==0?0:i<6?1:i==9?3:2;n[0]=120,n[1]=s<<6|(s?32-2*s:1)},F4=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function bg(n,t){t===void 0&&(t={});var i=b4();i.p(n);var s=x4(n,t,2,4);return C4(s,t),B4(s,s.length-4,i.d()),s}function S4(n,t){return v4((F4(n),n.subarray(2,-4)),t)}/** @license
 *
 * jsPDF - PDF Document creation from JavaScript
 * Version 2.5.1 Built on 2022-01-28T15:37:57.791Z
 *                      CommitID 00000000
 *
 * Copyright (c) 2010-2021 James Hall <james@parall.ax>, https://github.com/MrRio/jsPDF
 *               2015-2021 yWorks GmbH, http://www.yworks.com
 *               2015-2021 Lukas Holländer <lukas.hollaender@yworks.com>, https://github.com/HackbrettXXX
 *               2016-2018 Aras Abbasi <aras.abbasi@gmail.com>
 *               2010 Aaron Spike, https://github.com/acspike
 *               2012 Willow Systems Corporation, https://github.com/willowsystems
 *               2012 Pablo Hess, https://github.com/pablohess
 *               2012 Florian Jenett, https://github.com/fjenett
 *               2013 Warren Weckesser, https://github.com/warrenweckesser
 *               2013 Youssef Beddad, https://github.com/lifof
 *               2013 Lee Driscoll, https://github.com/lsdriscoll
 *               2013 Stefan Slonevskiy, https://github.com/stefslon
 *               2013 Jeremy Morel, https://github.com/jmorel
 *               2013 Christoph Hartmann, https://github.com/chris-rock
 *               2014 Juan Pablo Gaviria, https://github.com/juanpgaviria
 *               2014 James Makes, https://github.com/dollaruw
 *               2014 Diego Casorran, https://github.com/diegocr
 *               2014 Steven Spungin, https://github.com/Flamenco
 *               2014 Kenneth Glassey, https://github.com/Gavvers
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * Contributor(s):
 *    siefkenj, ahwolf, rickygu, Midnith, saintclair, eaparango,
 *    kim3er, mfo, alnorth, Flamenco
 */var Er=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function xg(){Er.console&&typeof Er.console.log=="function"&&Er.console.log.apply(Er.console,arguments)}var Ui={log:xg,warn:function(n){Er.console&&(typeof Er.console.warn=="function"?Er.console.warn.apply(Er.console,arguments):xg.call(null,arguments))},error:function(n){Er.console&&(typeof Er.console.error=="function"?Er.console.error.apply(Er.console,arguments):xg(n))}};function Bg(n,t,i){var s=new XMLHttpRequest;s.open("GET",n),s.responseType="blob",s.onload=function(){dc(s.response,t,i)},s.onerror=function(){Ui.error("could not download file")},s.send()}function iv(n){var t=new XMLHttpRequest;t.open("HEAD",n,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Ld(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(t)}}var fh,Cg,dc=Er.saveAs||((typeof window>"u"?"undefined":ii(window))!=="object"||window!==Er?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,t,i){var s=Er.URL||Er.webkitURL,l=document.createElement("a");t=t||n.name||"download",l.download=t,l.rel="noopener",typeof n=="string"?(l.href=n,l.origin!==location.origin?iv(l.href)?Bg(n,t,i):Ld(l,l.target="_blank"):Ld(l)):(l.href=s.createObjectURL(n),setTimeout(function(){s.revokeObjectURL(l.href)},4e4),setTimeout(function(){Ld(l)},0))}:"msSaveOrOpenBlob"in navigator?function(n,t,i){if(t=t||n.name||"download",typeof n=="string")if(iv(n))Bg(n,t,i);else{var s=document.createElement("a");s.href=n,s.target="_blank",setTimeout(function(){Ld(s)})}else navigator.msSaveOrOpenBlob(function(l,h){return h===void 0?h={autoBom:!1}:ii(h)!=="object"&&(Ui.warn("Deprecated: Expected third argument to be a object"),h={autoBom:!h}),h.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\uFEFF",l],{type:l.type}):l}(n,i),t)}:function(n,t,i,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof n=="string")return Bg(n,t,i);var l=n.type==="application/octet-stream",h=/constructor/i.test(Er.HTMLElement)||Er.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||l&&h)&&(typeof FileReader>"u"?"undefined":ii(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var I=o.result;I=p?I:I.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=I:location=I,s=null},o.readAsDataURL(n)}else{var v=Er.URL||Er.webkitURL,C=v.createObjectURL(n);s?s.location=C:location.href=C,s=null,setTimeout(function(){v.revokeObjectURL(C)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function nv(n){var t;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var i=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],s=0;s<i.length;s++){var l=i[s].re,h=i[s].process,p=l.exec(n);p&&(t=h(p),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),v=this.g.toString(16),C=this.b.toString(16);return o.length==1&&(o="0"+o),v.length==1&&(v="0"+v),C.length==1&&(C="0"+C),"#"+o+v+C}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Fg(n,t){var i=n[0],s=n[1],l=n[2],h=n[3];i=hs(i,s,l,h,t[0],7,-680876936),h=hs(h,i,s,l,t[1],12,-389564586),l=hs(l,h,i,s,t[2],17,606105819),s=hs(s,l,h,i,t[3],22,-1044525330),i=hs(i,s,l,h,t[4],7,-176418897),h=hs(h,i,s,l,t[5],12,1200080426),l=hs(l,h,i,s,t[6],17,-1473231341),s=hs(s,l,h,i,t[7],22,-45705983),i=hs(i,s,l,h,t[8],7,1770035416),h=hs(h,i,s,l,t[9],12,-1958414417),l=hs(l,h,i,s,t[10],17,-42063),s=hs(s,l,h,i,t[11],22,-1990404162),i=hs(i,s,l,h,t[12],7,1804603682),h=hs(h,i,s,l,t[13],12,-40341101),l=hs(l,h,i,s,t[14],17,-1502002290),i=ds(i,s=hs(s,l,h,i,t[15],22,1236535329),l,h,t[1],5,-165796510),h=ds(h,i,s,l,t[6],9,-1069501632),l=ds(l,h,i,s,t[11],14,643717713),s=ds(s,l,h,i,t[0],20,-373897302),i=ds(i,s,l,h,t[5],5,-701558691),h=ds(h,i,s,l,t[10],9,38016083),l=ds(l,h,i,s,t[15],14,-660478335),s=ds(s,l,h,i,t[4],20,-405537848),i=ds(i,s,l,h,t[9],5,568446438),h=ds(h,i,s,l,t[14],9,-1019803690),l=ds(l,h,i,s,t[3],14,-187363961),s=ds(s,l,h,i,t[8],20,1163531501),i=ds(i,s,l,h,t[13],5,-1444681467),h=ds(h,i,s,l,t[2],9,-51403784),l=ds(l,h,i,s,t[7],14,1735328473),i=ps(i,s=ds(s,l,h,i,t[12],20,-1926607734),l,h,t[5],4,-378558),h=ps(h,i,s,l,t[8],11,-2022574463),l=ps(l,h,i,s,t[11],16,1839030562),s=ps(s,l,h,i,t[14],23,-35309556),i=ps(i,s,l,h,t[1],4,-1530992060),h=ps(h,i,s,l,t[4],11,1272893353),l=ps(l,h,i,s,t[7],16,-155497632),s=ps(s,l,h,i,t[10],23,-1094730640),i=ps(i,s,l,h,t[13],4,681279174),h=ps(h,i,s,l,t[0],11,-358537222),l=ps(l,h,i,s,t[3],16,-722521979),s=ps(s,l,h,i,t[6],23,76029189),i=ps(i,s,l,h,t[9],4,-640364487),h=ps(h,i,s,l,t[12],11,-421815835),l=ps(l,h,i,s,t[15],16,530742520),i=fs(i,s=ps(s,l,h,i,t[2],23,-995338651),l,h,t[0],6,-198630844),h=fs(h,i,s,l,t[7],10,1126891415),l=fs(l,h,i,s,t[14],15,-1416354905),s=fs(s,l,h,i,t[5],21,-57434055),i=fs(i,s,l,h,t[12],6,1700485571),h=fs(h,i,s,l,t[3],10,-1894986606),l=fs(l,h,i,s,t[10],15,-1051523),s=fs(s,l,h,i,t[1],21,-2054922799),i=fs(i,s,l,h,t[8],6,1873313359),h=fs(h,i,s,l,t[15],10,-30611744),l=fs(l,h,i,s,t[6],15,-1560198380),s=fs(s,l,h,i,t[13],21,1309151649),i=fs(i,s,l,h,t[4],6,-145523070),h=fs(h,i,s,l,t[11],10,-1120210379),l=fs(l,h,i,s,t[2],15,718787259),s=fs(s,l,h,i,t[9],21,-343485551),n[0]=Fl(i,n[0]),n[1]=Fl(s,n[1]),n[2]=Fl(l,n[2]),n[3]=Fl(h,n[3])}function Qd(n,t,i,s,l,h){return t=Fl(Fl(t,n),Fl(s,h)),Fl(t<<l|t>>>32-l,i)}function hs(n,t,i,s,l,h,p){return Qd(t&i|~t&s,n,t,l,h,p)}function ds(n,t,i,s,l,h,p){return Qd(t&s|i&~s,n,t,l,h,p)}function ps(n,t,i,s,l,h,p){return Qd(t^i^s,n,t,l,h,p)}function fs(n,t,i,s,l,h,p){return Qd(i^(t|~s),n,t,l,h,p)}function sv(n){var t,i=n.length,s=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=n.length;t+=64)Fg(s,I4(n.substring(t-64,t)));n=n.substring(t-64);var l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<n.length;t++)l[t>>2]|=n.charCodeAt(t)<<(t%4<<3);if(l[t>>2]|=128<<(t%4<<3),t>55)for(Fg(s,l),t=0;t<16;t++)l[t]=0;return l[14]=8*i,Fg(s,l),s}function I4(n){var t,i=[];for(t=0;t<64;t+=4)i[t>>2]=n.charCodeAt(t)+(n.charCodeAt(t+1)<<8)+(n.charCodeAt(t+2)<<16)+(n.charCodeAt(t+3)<<24);return i}fh=Er.atob.bind(Er),Cg=Er.btoa.bind(Er);var av="0123456789abcdef".split("");function E4(n){for(var t="",i=0;i<4;i++)t+=av[n>>8*i+4&15]+av[n>>8*i&15];return t}function T4(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Sg(n){return sv(n).map(T4).join("")}var U4=function(n){for(var t=0;t<n.length;t++)n[t]=E4(n[t]);return n.join("")}(sv("hello"))!="5d41402abc4b2a76b9719d911017c592";function Fl(n,t){if(U4){var i=(65535&n)+(65535&t);return(n>>16)+(t>>16)+(i>>16)<<16|65535&i}return n+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Ig(n,t){var i,s,l,h;if(n!==i){for(var p=(l=n,h=1+(256/n.length>>0),new Array(h+1).join(l)),o=[],v=0;v<256;v++)o[v]=v;var C=0;for(v=0;v<256;v++){var I=o[v];C=(C+I+p.charCodeAt(v))%256,o[v]=o[C],o[C]=I}i=n,s=o}else o=s;var U=t.length,Q=0,P=0,K="";for(v=0;v<U;v++)P=(P+(I=o[Q=(Q+1)%256]))%256,o[Q]=o[P],o[P]=I,p=o[(o[Q]+o[P])%256],K+=String.fromCharCode(t.charCodeAt(v)^p);return K}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var ov={print:4,modify:8,copy:16,"annot-forms":32};function au(n,t,i,s){this.v=1,this.r=2;var l=192;n.forEach(function(o){if(ov.perm!==void 0)throw new Error("Invalid permission: "+o);l+=ov[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var h=(t+this.padding).substr(0,32),p=(i+this.padding).substr(0,32);this.O=this.processOwnerPassword(h,p),this.P=-(1+(255^l)),this.encryptionKey=Sg(h+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=Ig(this.encryptionKey,this.padding)}function ou(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var t="",i=n.length,s=0;s<i;s++){var l=n.charCodeAt(s);l<33||l===35||l===37||l===40||l===41||l===47||l===60||l===62||l===91||l===93||l===123||l===125||l>126?t+="#"+("0"+l.toString(16)).slice(-2):t+=n[s]}return t}function Av(n){if(ii(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(i,s,l){if(l=l||!1,typeof i!="string"||typeof s!="function"||typeof l!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(i)||(t[i]={});var h=Math.random().toString(35);return t[i][h]=[s,!!l],h},this.unsubscribe=function(i){for(var s in t)if(t[s][i])return delete t[s][i],Object.keys(t[s]).length===0&&delete t[s],!0;return!1},this.publish=function(i){if(t.hasOwnProperty(i)){var s=Array.prototype.slice.call(arguments,1),l=[];for(var h in t[i]){var p=t[i][h];try{p[0].apply(n,s)}catch(o){Er.console&&Ui.error("jsPDF PubSub Error",o.message,o)}p[1]&&l.push(h)}l.length&&l.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Md(n){if(!(this instanceof Md))return new Md(n);var t="opacity,stroke-opacity".split(",");for(var i in n)n.hasOwnProperty(i)&&t.indexOf(i)>=0&&(this[i]=n[i]);this.id="",this.objectNumber=-1}function lv(n,t){this.gState=n,this.matrix=t,this.id="",this.objectNumber=-1}function pc(n,t,i,s,l){if(!(this instanceof pc))return new pc(n,t,i,s,l);this.type=n==="axial"?2:3,this.coords=t,this.colors=i,lv.call(this,s,l)}function Au(n,t,i,s,l){if(!(this instanceof Au))return new Au(n,t,i,s,l);this.boundingBox=n,this.xStep=t,this.yStep=i,this.stream="",this.cloneIndex=0,lv.call(this,s,l)}function Tr(n){var t,i=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],l=arguments[2],h=arguments[3],p=[],o=1,v=16,C="S",I=null;ii(n=n||{})==="object"&&(i=n.orientation,s=n.unit||s,l=n.format||l,h=n.compress||n.compressPdf||h,(I=n.encryption||null)!==null&&(I.userPassword=I.userPassword||"",I.ownerPassword=I.ownerPassword||"",I.userPermissions=I.userPermissions||[]),o=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(t=n.precision),n.floatPrecision!==void 0&&(v=n.floatPrecision),C=n.defaultPathOperation||"S"),p=n.filters||(h===!0?["FlateEncode"]:p),s=s||"mm",i=(""+(i||"P")).toLowerCase();var U=n.putOnlyUsedFonts||!1,Q={},P={internal:{},__private__:{}};P.__private__.PubSub=Av;var K="1.3",V=P.__private__.getPdfVersion=function(){return K};P.__private__.setPdfVersion=function(M){K=M};var Y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};P.__private__.getPageFormats=function(){return Y};var $=P.__private__.getPageFormat=function(M){return Y[M]};l=l||"a4";var it={COMPAT:"compat",ADVANCED:"advanced"},ht=it.COMPAT;function St(){this.saveGraphicsState(),nt(new vt(Ue,0,0,-Ue,0,oo()*Ue).toString()+" cm"),this.setFontSize(this.getFontSize()/Ue),C="n",ht=it.ADVANCED}function Tt(){this.restoreGraphicsState(),C="S",ht=it.COMPAT}var Lt=P.__private__.combineFontStyleAndFontWeight=function(M,J){if(M=="bold"&&J=="normal"||M=="bold"&&J==400||M=="normal"&&J=="italic"||M=="bold"&&J=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return J&&(M=J==400||J==="normal"?M==="italic"?"italic":"normal":J!=700&&J!=="bold"||M!=="normal"?(J==700?"bold":J)+""+M:"bold"),M};P.advancedAPI=function(M){var J=ht===it.COMPAT;return J&&St.call(this),typeof M!="function"||(M(this),J&&Tt.call(this)),this},P.compatAPI=function(M){var J=ht===it.ADVANCED;return J&&Tt.call(this),typeof M!="function"||(M(this),J&&St.call(this)),this},P.isAdvancedAPI=function(){return ht===it.ADVANCED};var Ft,yt=function(M){if(ht!==it.ADVANCED)throw new Error(M+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Rt=P.roundToPrecision=P.__private__.roundToPrecision=function(M,J){var Ct=t||J;if(isNaN(M)||isNaN(Ct))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return M.toFixed(Ct).replace(/0+$/,"")};Ft=P.hpf=P.__private__.hpf=typeof v=="number"?function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.hpf");return Rt(M,v)}:v==="smart"?function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.hpf");return Rt(M,M>-1&&M<1?16:5)}:function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.hpf");return Rt(M,16)};var Wt=P.f2=P.__private__.f2=function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.f2");return Rt(M,2)},At=P.__private__.f3=function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.f3");return Rt(M,3)},lt=P.scale=P.__private__.scale=function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.scale");return ht===it.COMPAT?M*Ue:ht===it.ADVANCED?M:void 0},bt=function(M){return ht===it.COMPAT?oo()-M:ht===it.ADVANCED?M:void 0},wt=function(M){return lt(bt(M))};P.__private__.setPrecision=P.setPrecision=function(M){typeof parseInt(M,10)=="number"&&(t=parseInt(M,10))};var Xt,Gt="00000000000000000000000000000000",Yt=P.__private__.getFileId=function(){return Gt},qt=P.__private__.setFileId=function(M){return Gt=M!==void 0&&/^[a-fA-F0-9]{32}$/.test(M)?M.toUpperCase():Gt.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),I!==null&&(Di=new au(I.userPermissions,I.userPassword,I.ownerPassword,Gt)),Gt};P.setFileId=function(M){return qt(M),this},P.getFileId=function(){return Yt()};var te=P.__private__.convertDateToPDFDate=function(M){var J=M.getTimezoneOffset(),Ct=J<0?"+":"-",Dt=Math.floor(Math.abs(J/60)),Zt=Math.abs(J%60),ue=[Ct,Bt(Dt),"'",Bt(Zt),"'"].join("");return["D:",M.getFullYear(),Bt(M.getMonth()+1),Bt(M.getDate()),Bt(M.getHours()),Bt(M.getMinutes()),Bt(M.getSeconds()),ue].join("")},Jt=P.__private__.convertPDFDateToDate=function(M){var J=parseInt(M.substr(2,4),10),Ct=parseInt(M.substr(6,2),10)-1,Dt=parseInt(M.substr(8,2),10),Zt=parseInt(M.substr(10,2),10),ue=parseInt(M.substr(12,2),10),we=parseInt(M.substr(14,2),10);return new Date(J,Ct,Dt,Zt,ue,we,0)},me=P.__private__.setCreationDate=function(M){var J;if(M===void 0&&(M=new Date),M instanceof Date)J=te(M);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(M))throw new Error("Invalid argument passed to jsPDF.setCreationDate");J=M}return Xt=J},rt=P.__private__.getCreationDate=function(M){var J=Xt;return M==="jsDate"&&(J=Jt(Xt)),J};P.setCreationDate=function(M){return me(M),this},P.getCreationDate=function(M){return rt(M)};var dt,Bt=P.__private__.padd2=function(M){return("0"+parseInt(M)).slice(-2)},Et=P.__private__.padd2Hex=function(M){return("00"+(M=M.toString())).substr(M.length)},Nt=0,Ht=[],ie=[],se=0,Ce=[],be=[],Te=!1,Le=ie,Qe=function(){Nt=0,se=0,ie=[],Ht=[],Ce=[],ar=Ee(),Br=Ee()};P.__private__.setCustomOutputDestination=function(M){Te=!0,Le=M};var le=function(M){Te||(Le=M)};P.__private__.resetCustomOutputDestination=function(){Te=!1,Le=ie};var nt=P.__private__.out=function(M){return M=M.toString(),se+=M.length+1,Le.push(M),Le},dr=P.__private__.write=function(M){return nt(arguments.length===1?M.toString():Array.prototype.join.call(arguments," "))},$e=P.__private__.getArrayBuffer=function(M){for(var J=M.length,Ct=new ArrayBuffer(J),Dt=new Uint8Array(Ct);J--;)Dt[J]=M.charCodeAt(J);return Ct},ce=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];P.__private__.getStandardFonts=function(){return ce};var ge=n.fontSize||16;P.__private__.setFontSize=P.setFontSize=function(M){return ge=ht===it.ADVANCED?M/Ue:M,this};var Se,Ie=P.__private__.getFontSize=P.getFontSize=function(){return ht===it.COMPAT?ge:ge*Ue},Ge=n.R2L||!1;P.__private__.setR2L=P.setR2L=function(M){return Ge=M,this},P.__private__.getR2L=P.getR2L=function(){return Ge};var Ze,pr=P.__private__.setZoomMode=function(M){var J=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(M))Se=M;else if(isNaN(M)){if(J.indexOf(M)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+M+'" is not recognized.');Se=M}else Se=parseInt(M,10)};P.__private__.getZoomMode=function(){return Se};var wr,Sr=P.__private__.setPageMode=function(M){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(M)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+M+'" is not recognized.');Ze=M};P.__private__.getPageMode=function(){return Ze};var pe=P.__private__.setLayoutMode=function(M){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(M)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+M+'" is not recognized.');wr=M};P.__private__.getLayoutMode=function(){return wr},P.__private__.setDisplayMode=P.setDisplayMode=function(M,J,Ct){return pr(M),pe(J),Sr(Ct),this};var Xe={title:"",subject:"",author:"",keywords:"",creator:""};P.__private__.getDocumentProperty=function(M){if(Object.keys(Xe).indexOf(M)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Xe[M]},P.__private__.getDocumentProperties=function(){return Xe},P.__private__.setDocumentProperties=P.setProperties=P.setDocumentProperties=function(M){for(var J in Xe)Xe.hasOwnProperty(J)&&M[J]&&(Xe[J]=M[J]);return this},P.__private__.setDocumentProperty=function(M,J){if(Object.keys(Xe).indexOf(M)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Xe[M]=J};var ur,Ue,Jr,he,sr,Me={},xr={},Gr=[],ke={},Fi={},zr={},Dr={},pt=null,G=0,q=[],tt=new Av(P),_t=n.hotfixes||[],Pt={},kt={},Ot=[],vt=function M(J,Ct,Dt,Zt,ue,we){if(!(this instanceof M))return new M(J,Ct,Dt,Zt,ue,we);isNaN(J)&&(J=1),isNaN(Ct)&&(Ct=0),isNaN(Dt)&&(Dt=0),isNaN(Zt)&&(Zt=1),isNaN(ue)&&(ue=0),isNaN(we)&&(we=0),this._matrix=[J,Ct,Dt,Zt,ue,we]};Object.defineProperty(vt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(M){this._matrix[0]=M}}),Object.defineProperty(vt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(M){this._matrix[1]=M}}),Object.defineProperty(vt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(M){this._matrix[2]=M}}),Object.defineProperty(vt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(M){this._matrix[3]=M}}),Object.defineProperty(vt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(M){this._matrix[4]=M}}),Object.defineProperty(vt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(M){this._matrix[5]=M}}),Object.defineProperty(vt.prototype,"a",{get:function(){return this._matrix[0]},set:function(M){this._matrix[0]=M}}),Object.defineProperty(vt.prototype,"b",{get:function(){return this._matrix[1]},set:function(M){this._matrix[1]=M}}),Object.defineProperty(vt.prototype,"c",{get:function(){return this._matrix[2]},set:function(M){this._matrix[2]=M}}),Object.defineProperty(vt.prototype,"d",{get:function(){return this._matrix[3]},set:function(M){this._matrix[3]=M}}),Object.defineProperty(vt.prototype,"e",{get:function(){return this._matrix[4]},set:function(M){this._matrix[4]=M}}),Object.defineProperty(vt.prototype,"f",{get:function(){return this._matrix[5]},set:function(M){this._matrix[5]=M}}),Object.defineProperty(vt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(vt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(vt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(vt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),vt.prototype.join=function(M){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Ft).join(M)},vt.prototype.multiply=function(M){var J=M.sx*this.sx+M.shy*this.shx,Ct=M.sx*this.shy+M.shy*this.sy,Dt=M.shx*this.sx+M.sy*this.shx,Zt=M.shx*this.shy+M.sy*this.sy,ue=M.tx*this.sx+M.ty*this.shx+this.tx,we=M.tx*this.shy+M.ty*this.sy+this.ty;return new vt(J,Ct,Dt,Zt,ue,we)},vt.prototype.decompose=function(){var M=this.sx,J=this.shy,Ct=this.shx,Dt=this.sy,Zt=this.tx,ue=this.ty,we=Math.sqrt(M*M+J*J),Ke=(M/=we)*Ct+(J/=we)*Dt;Ct-=M*Ke,Dt-=J*Ke;var yr=Math.sqrt(Ct*Ct+Dt*Dt);return Ke/=yr,M*(Dt/=yr)<J*(Ct/=yr)&&(M=-M,J=-J,Ke=-Ke,we=-we),{scale:new vt(we,0,0,yr,0,0),translate:new vt(1,0,0,1,Zt,ue),rotate:new vt(M,J,-J,M,0,0),skew:new vt(1,0,Ke,1,0,0)}},vt.prototype.toString=function(M){return this.join(" ")},vt.prototype.inversed=function(){var M=this.sx,J=this.shy,Ct=this.shx,Dt=this.sy,Zt=this.tx,ue=this.ty,we=1/(M*Dt-J*Ct),Ke=Dt*we,yr=-J*we,Pr=-Ct*we,or=M*we;return new vt(Ke,yr,Pr,or,-Ke*Zt-Pr*ue,-yr*Zt-or*ue)},vt.prototype.applyToPoint=function(M){var J=M.x*this.sx+M.y*this.shx+this.tx,Ct=M.x*this.shy+M.y*this.sy+this.ty;return new vs(J,Ct)},vt.prototype.applyToRectangle=function(M){var J=this.applyToPoint(M),Ct=this.applyToPoint(new vs(M.x+M.w,M.y+M.h));return new SA(J.x,J.y,Ct.x-J.x,Ct.y-J.y)},vt.prototype.clone=function(){var M=this.sx,J=this.shy,Ct=this.shx,Dt=this.sy,Zt=this.tx,ue=this.ty;return new vt(M,J,Ct,Dt,Zt,ue)},P.Matrix=vt;var jt=P.matrixMult=function(M,J){return J.multiply(M)},de=new vt(1,0,0,1,0,0);P.unitMatrix=P.identityMatrix=de;var ae=function(M,J){if(!Fi[M]){var Ct=(J instanceof pc?"Sh":"P")+(Object.keys(ke).length+1).toString(10);J.id=Ct,Fi[M]=Ct,ke[Ct]=J,tt.publish("addPattern",J)}};P.ShadingPattern=pc,P.TilingPattern=Au,P.addShadingPattern=function(M,J){return yt("addShadingPattern()"),ae(M,J),this},P.beginTilingPattern=function(M){yt("beginTilingPattern()"),ql(M.boundingBox[0],M.boundingBox[1],M.boundingBox[2]-M.boundingBox[0],M.boundingBox[3]-M.boundingBox[1],M.matrix)},P.endTilingPattern=function(M,J){yt("endTilingPattern()"),J.stream=be[dt].join(`
`),ae(M,J),tt.publish("endTilingPattern",J),Ot.pop().restore()};var ne=P.__private__.newObject=function(){var M=Ee();return Re(M,!0),M},Ee=P.__private__.newObjectDeferred=function(){return Nt++,Ht[Nt]=function(){return se},Nt},Re=function(M,J){return J=typeof J=="boolean"&&J,Ht[M]=se,J&&nt(M+" 0 obj"),M},Fr=P.__private__.newAdditionalObject=function(){var M={objId:Ee(),content:""};return Ce.push(M),M},ar=Ee(),Br=Ee(),Ur=P.__private__.decodeColorString=function(M){var J=M.split(" ");if(J.length!==2||J[1]!=="g"&&J[1]!=="G")J.length===5&&(J[4]==="k"||J[4]==="K")&&(J=[(1-J[0])*(1-J[3]),(1-J[1])*(1-J[3]),(1-J[2])*(1-J[3]),"r"]);else{var Ct=parseFloat(J[0]);J=[Ct,Ct,Ct,"r"]}for(var Dt="#",Zt=0;Zt<3;Zt++)Dt+=("0"+Math.floor(255*parseFloat(J[Zt])).toString(16)).slice(-2);return Dt},Ir=P.__private__.encodeColorString=function(M){var J;typeof M=="string"&&(M={ch1:M});var Ct=M.ch1,Dt=M.ch2,Zt=M.ch3,ue=M.ch4,we=M.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ct=="string"&&Ct.charAt(0)!=="#"){var Ke=new nv(Ct);if(Ke.ok)Ct=Ke.toHex();else if(!/^\d*\.?\d*$/.test(Ct))throw new Error('Invalid color "'+Ct+'" passed to jsPDF.encodeColorString.')}if(typeof Ct=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ct)&&(Ct="#"+Ct[1]+Ct[1]+Ct[2]+Ct[2]+Ct[3]+Ct[3]),typeof Ct=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ct)){var yr=parseInt(Ct.substr(1),16);Ct=yr>>16&255,Dt=yr>>8&255,Zt=255&yr}if(Dt===void 0||ue===void 0&&Ct===Dt&&Dt===Zt)if(typeof Ct=="string")J=Ct+" "+we[0];else switch(M.precision){case 2:J=Wt(Ct/255)+" "+we[0];break;case 3:default:J=At(Ct/255)+" "+we[0]}else if(ue===void 0||ii(ue)==="object"){if(ue&&!isNaN(ue.a)&&ue.a===0)return J=["1.","1.","1.",we[1]].join(" ");if(typeof Ct=="string")J=[Ct,Dt,Zt,we[1]].join(" ");else switch(M.precision){case 2:J=[Wt(Ct/255),Wt(Dt/255),Wt(Zt/255),we[1]].join(" ");break;default:case 3:J=[At(Ct/255),At(Dt/255),At(Zt/255),we[1]].join(" ")}}else if(typeof Ct=="string")J=[Ct,Dt,Zt,ue,we[2]].join(" ");else switch(M.precision){case 2:J=[Wt(Ct),Wt(Dt),Wt(Zt),Wt(ue),we[2]].join(" ");break;case 3:default:J=[At(Ct),At(Dt),At(Zt),At(ue),we[2]].join(" ")}return J},Zr=P.__private__.getFilters=function(){return p},cr=P.__private__.putStream=function(M){var J=(M=M||{}).data||"",Ct=M.filters||Zr(),Dt=M.alreadyAppliedFilters||[],Zt=M.addLength1||!1,ue=J.length,we=M.objectId,Ke=function(Nr){return Nr};if(I!==null&&we===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");I!==null&&(Ke=Di.encryptor(we,0));var yr={};Ct===!0&&(Ct=["FlateEncode"]);var Pr=M.additionalKeyValues||[],or=(yr=Tr.API.processDataByFilters!==void 0?Tr.API.processDataByFilters(J,Ct):{data:J,reverseChain:[]}).reverseChain+(Array.isArray(Dt)?Dt.join(" "):Dt.toString());if(yr.data.length!==0&&(Pr.push({key:"Length",value:yr.data.length}),Zt===!0&&Pr.push({key:"Length1",value:ue})),or.length!=0)if(or.split("/").length-1==1)Pr.push({key:"Filter",value:or});else{Pr.push({key:"Filter",value:"["+or+"]"});for(var qr=0;qr<Pr.length;qr+=1)if(Pr[qr].key==="DecodeParms"){for(var er=[],_i=0;_i<yr.reverseChain.split("/").length-1;_i+=1)er.push("null");er.push(Pr[qr].value),Pr[qr].value="["+er.join(" ")+"]"}}nt("<<");for(var Mr=0;Mr<Pr.length;Mr++)nt("/"+Pr[Mr].key+" "+Pr[Mr].value);nt(">>"),yr.data.length!==0&&(nt("stream"),nt(Ke(yr.data)),nt("endstream"))},jr=P.__private__.putPage=function(M){var J=M.number,Ct=M.data,Dt=M.objId,Zt=M.contentsObjId;Re(Dt,!0),nt("<</Type /Page"),nt("/Parent "+M.rootDictionaryObjId+" 0 R"),nt("/Resources "+M.resourceDictionaryObjId+" 0 R"),nt("/MediaBox ["+parseFloat(Ft(M.mediaBox.bottomLeftX))+" "+parseFloat(Ft(M.mediaBox.bottomLeftY))+" "+Ft(M.mediaBox.topRightX)+" "+Ft(M.mediaBox.topRightY)+"]"),M.cropBox!==null&&nt("/CropBox ["+Ft(M.cropBox.bottomLeftX)+" "+Ft(M.cropBox.bottomLeftY)+" "+Ft(M.cropBox.topRightX)+" "+Ft(M.cropBox.topRightY)+"]"),M.bleedBox!==null&&nt("/BleedBox ["+Ft(M.bleedBox.bottomLeftX)+" "+Ft(M.bleedBox.bottomLeftY)+" "+Ft(M.bleedBox.topRightX)+" "+Ft(M.bleedBox.topRightY)+"]"),M.trimBox!==null&&nt("/TrimBox ["+Ft(M.trimBox.bottomLeftX)+" "+Ft(M.trimBox.bottomLeftY)+" "+Ft(M.trimBox.topRightX)+" "+Ft(M.trimBox.topRightY)+"]"),M.artBox!==null&&nt("/ArtBox ["+Ft(M.artBox.bottomLeftX)+" "+Ft(M.artBox.bottomLeftY)+" "+Ft(M.artBox.topRightX)+" "+Ft(M.artBox.topRightY)+"]"),typeof M.userUnit=="number"&&M.userUnit!==1&&nt("/UserUnit "+M.userUnit),tt.publish("putPage",{objId:Dt,pageContext:q[J],pageNumber:J,page:Ct}),nt("/Contents "+Zt+" 0 R"),nt(">>"),nt("endobj");var ue=Ct.join(`
`);return ht===it.ADVANCED&&(ue+=`
Q`),Re(Zt,!0),cr({data:ue,filters:Zr(),objectId:Zt}),nt("endobj"),Dt},ni=P.__private__.putPages=function(){var M,J,Ct=[];for(M=1;M<=G;M++)q[M].objId=Ee(),q[M].contentsObjId=Ee();for(M=1;M<=G;M++)Ct.push(jr({number:M,data:be[M],objId:q[M].objId,contentsObjId:q[M].contentsObjId,mediaBox:q[M].mediaBox,cropBox:q[M].cropBox,bleedBox:q[M].bleedBox,trimBox:q[M].trimBox,artBox:q[M].artBox,userUnit:q[M].userUnit,rootDictionaryObjId:ar,resourceDictionaryObjId:Br}));Re(ar,!0),nt("<</Type /Pages");var Dt="/Kids [";for(J=0;J<G;J++)Dt+=Ct[J]+" 0 R ";nt(Dt+"]"),nt("/Count "+G),nt(">>"),nt("endobj"),tt.publish("postPutPages")},zi=function(M){tt.publish("putFont",{font:M,out:nt,newObject:ne,putStream:cr}),M.isAlreadyPutted!==!0&&(M.objectNumber=ne(),nt("<<"),nt("/Type /Font"),nt("/BaseFont /"+ou(M.postScriptName)),nt("/Subtype /Type1"),typeof M.encoding=="string"&&nt("/Encoding /"+M.encoding),nt("/FirstChar 32"),nt("/LastChar 255"),nt(">>"),nt("endobj"))},Ut=function(){for(var M in Me)Me.hasOwnProperty(M)&&(U===!1||U===!0&&Q.hasOwnProperty(M))&&zi(Me[M])},Fe=function(M){M.objectNumber=ne();var J=[];J.push({key:"Type",value:"/XObject"}),J.push({key:"Subtype",value:"/Form"}),J.push({key:"BBox",value:"["+[Ft(M.x),Ft(M.y),Ft(M.x+M.width),Ft(M.y+M.height)].join(" ")+"]"}),J.push({key:"Matrix",value:"["+M.matrix.toString()+"]"});var Ct=M.pages[1].join(`
`);cr({data:Ct,additionalKeyValues:J,objectId:M.objectNumber}),nt("endobj")},xe=function(){for(var M in Pt)Pt.hasOwnProperty(M)&&Fe(Pt[M])},Kr=function(M,J){var Ct,Dt=[],Zt=1/(J-1);for(Ct=0;Ct<1;Ct+=Zt)Dt.push(Ct);if(Dt.push(1),M[0].offset!=0){var ue={offset:0,color:M[0].color};M.unshift(ue)}if(M[M.length-1].offset!=1){var we={offset:1,color:M[M.length-1].color};M.push(we)}for(var Ke="",yr=0,Pr=0;Pr<Dt.length;Pr++){for(Ct=Dt[Pr];Ct>M[yr+1].offset;)yr++;var or=M[yr].offset,qr=(Ct-or)/(M[yr+1].offset-or),er=M[yr].color,_i=M[yr+1].color;Ke+=Et(Math.round((1-qr)*er[0]+qr*_i[0]).toString(16))+Et(Math.round((1-qr)*er[1]+qr*_i[1]).toString(16))+Et(Math.round((1-qr)*er[2]+qr*_i[2]).toString(16))}return Ke.trim()},vr=function(M,J){J||(J=21);var Ct=ne(),Dt=Kr(M.colors,J),Zt=[];Zt.push({key:"FunctionType",value:"0"}),Zt.push({key:"Domain",value:"[0.0 1.0]"}),Zt.push({key:"Size",value:"["+J+"]"}),Zt.push({key:"BitsPerSample",value:"8"}),Zt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Zt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),cr({data:Dt,additionalKeyValues:Zt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ct}),nt("endobj"),M.objectNumber=ne(),nt("<< /ShadingType "+M.type),nt("/ColorSpace /DeviceRGB");var ue="/Coords ["+Ft(parseFloat(M.coords[0]))+" "+Ft(parseFloat(M.coords[1]))+" ";M.type===2?ue+=Ft(parseFloat(M.coords[2]))+" "+Ft(parseFloat(M.coords[3])):ue+=Ft(parseFloat(M.coords[2]))+" "+Ft(parseFloat(M.coords[3]))+" "+Ft(parseFloat(M.coords[4]))+" "+Ft(parseFloat(M.coords[5])),nt(ue+="]"),M.matrix&&nt("/Matrix ["+M.matrix.toString()+"]"),nt("/Function "+Ct+" 0 R"),nt("/Extend [true true]"),nt(">>"),nt("endobj")},Ji=function(M,J){var Ct=Ee(),Dt=ne();J.push({resourcesOid:Ct,objectOid:Dt}),M.objectNumber=Dt;var Zt=[];Zt.push({key:"Type",value:"/Pattern"}),Zt.push({key:"PatternType",value:"1"}),Zt.push({key:"PaintType",value:"1"}),Zt.push({key:"TilingType",value:"1"}),Zt.push({key:"BBox",value:"["+M.boundingBox.map(Ft).join(" ")+"]"}),Zt.push({key:"XStep",value:Ft(M.xStep)}),Zt.push({key:"YStep",value:Ft(M.yStep)}),Zt.push({key:"Resources",value:Ct+" 0 R"}),M.matrix&&Zt.push({key:"Matrix",value:"["+M.matrix.toString()+"]"}),cr({data:M.stream,additionalKeyValues:Zt,objectId:M.objectNumber}),nt("endobj")},si=function(M){var J;for(J in ke)ke.hasOwnProperty(J)&&(ke[J]instanceof pc?vr(ke[J]):ke[J]instanceof Au&&Ji(ke[J],M))},yi=function(M){for(var J in M.objectNumber=ne(),nt("<<"),M)switch(J){case"opacity":nt("/ca "+Wt(M[J]));break;case"stroke-opacity":nt("/CA "+Wt(M[J]))}nt(">>"),nt("endobj")},li=function(){var M;for(M in zr)zr.hasOwnProperty(M)&&yi(zr[M])},Si=function(){for(var M in nt("/XObject <<"),Pt)Pt.hasOwnProperty(M)&&Pt[M].objectNumber>=0&&nt("/"+M+" "+Pt[M].objectNumber+" 0 R");tt.publish("putXobjectDict"),nt(">>")},tn=function(){Di.oid=ne(),nt("<<"),nt("/Filter /Standard"),nt("/V "+Di.v),nt("/R "+Di.r),nt("/U <"+Di.toHexString(Di.U)+">"),nt("/O <"+Di.toHexString(Di.O)+">"),nt("/P "+Di.P),nt(">>"),nt("endobj")},Ln=function(){for(var M in nt("/Font <<"),Me)Me.hasOwnProperty(M)&&(U===!1||U===!0&&Q.hasOwnProperty(M))&&nt("/"+M+" "+Me[M].objectNumber+" 0 R");nt(">>")},Vl=function(){if(Object.keys(ke).length>0){for(var M in nt("/Shading <<"),ke)ke.hasOwnProperty(M)&&ke[M]instanceof pc&&ke[M].objectNumber>=0&&nt("/"+M+" "+ke[M].objectNumber+" 0 R");tt.publish("putShadingPatternDict"),nt(">>")}},Rn=function(M){if(Object.keys(ke).length>0){for(var J in nt("/Pattern <<"),ke)ke.hasOwnProperty(J)&&ke[J]instanceof P.TilingPattern&&ke[J].objectNumber>=0&&ke[J].objectNumber<M&&nt("/"+J+" "+ke[J].objectNumber+" 0 R");tt.publish("putTilingPatternDict"),nt(">>")}},ki=function(){if(Object.keys(zr).length>0){var M;for(M in nt("/ExtGState <<"),zr)zr.hasOwnProperty(M)&&zr[M].objectNumber>=0&&nt("/"+M+" "+zr[M].objectNumber+" 0 R");tt.publish("putGStateDict"),nt(">>")}},vi=function(M){Re(M.resourcesOid,!0),nt("<<"),nt("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ln(),Vl(),Rn(M.objectOid),ki(),Si(),nt(">>"),nt("endobj")},na=function(){var M=[];Ut(),li(),xe(),si(M),tt.publish("putResources"),M.forEach(vi),vi({resourcesOid:Br,objectOid:Number.MAX_SAFE_INTEGER}),tt.publish("postPutResources")},wi=function(){tt.publish("putAdditionalObjects");for(var M=0;M<Ce.length;M++){var J=Ce[M];Re(J.objId,!0),nt(J.content),nt("endobj")}tt.publish("postPutAdditionalObjects")},sa=function(M){xr[M.fontName]=xr[M.fontName]||{},xr[M.fontName][M.fontStyle]=M.id},Qn=function(M,J,Ct,Dt,Zt){var ue={id:"F"+(Object.keys(Me).length+1).toString(10),postScriptName:M,fontName:J,fontStyle:Ct,encoding:Dt,isStandardFont:Zt||!1,metadata:{}};return tt.publish("addFont",{font:ue,instance:this}),Me[ue.id]=ue,sa(ue),ue.id},hA=function(M){for(var J=0,Ct=ce.length;J<Ct;J++){var Dt=Qn.call(this,M[J][0],M[J][1],M[J][2],ce[J][3],!0);U===!1&&(Q[Dt]=!0);var Zt=M[J][0].split("-");sa({id:Dt,fontName:Zt[0],fontStyle:Zt[1]||""})}tt.publish("addFonts",{fonts:Me,dictionary:xr})},Ki=function(M){return M.foo=function(){try{return M.apply(this,arguments)}catch(Dt){var J=Dt.stack||"";~J.indexOf(" at ")&&(J=J.split(" at ")[1]);var Ct="Error in function "+J.split(`
`)[0].split("<")[0]+": "+Dt.message;if(!Er.console)throw new Error(Ct);Er.console.error(Ct,Dt),Er.alert&&alert(Ct)}},M.foo.bar=M,M.foo},Ya=function(M,J){var Ct,Dt,Zt,ue,we,Ke,yr,Pr,or;if(Zt=(J=J||{}).sourceEncoding||"Unicode",we=J.outputEncoding,(J.autoencode||we)&&Me[ur].metadata&&Me[ur].metadata[Zt]&&Me[ur].metadata[Zt].encoding&&(ue=Me[ur].metadata[Zt].encoding,!we&&Me[ur].encoding&&(we=Me[ur].encoding),!we&&ue.codePages&&(we=ue.codePages[0]),typeof we=="string"&&(we=ue[we]),we)){for(yr=!1,Ke=[],Ct=0,Dt=M.length;Ct<Dt;Ct++)(Pr=we[M.charCodeAt(Ct)])?Ke.push(String.fromCharCode(Pr)):Ke.push(M[Ct]),Ke[Ct].charCodeAt(0)>>8&&(yr=!0);M=Ke.join("")}for(Ct=M.length;yr===void 0&&Ct!==0;)M.charCodeAt(Ct-1)>>8&&(yr=!0),Ct--;if(!yr)return M;for(Ke=J.noBOM?[]:[254,255],Ct=0,Dt=M.length;Ct<Dt;Ct++){if((or=(Pr=M.charCodeAt(Ct))>>8)>>8)throw new Error("Character at position "+Ct+" of string '"+M+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ke.push(or),Ke.push(Pr-(or<<8))}return String.fromCharCode.apply(void 0,Ke)},en=P.__private__.pdfEscape=P.pdfEscape=function(M,J){return Ya(M,J).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},$r=P.__private__.beginPage=function(M){be[++G]=[],q[G]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(M[0]),topRightY:Number(M[1])}},dA(G),le(be[dt])},Ro=function(M,J){var Ct,Dt,Zt;switch(i=J||i,typeof M=="string"&&(Ct=$(M.toLowerCase()),Array.isArray(Ct)&&(Dt=Ct[0],Zt=Ct[1])),Array.isArray(M)&&(Dt=M[0]*Ue,Zt=M[1]*Ue),isNaN(Dt)&&(Dt=l[0],Zt=l[1]),(Dt>14400||Zt>14400)&&(Ui.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Dt=Math.min(14400,Dt),Zt=Math.min(14400,Zt)),l=[Dt,Zt],i.substr(0,1)){case"l":Zt>Dt&&(l=[Zt,Dt]);break;case"p":Dt>Zt&&(l=[Zt,Dt])}$r(l),Wr(Fa),nt(Hs),CA!==0&&nt(CA+" J"),FA!==0&&nt(FA+" j"),tt.publish("addPage",{pageNumber:G})},Ja=function(M){M>0&&M<=G&&(be.splice(M,1),q.splice(M,1),G--,dt>G&&(dt=G),this.setPage(dt))},dA=function(M){M>0&&M<=G&&(dt=M)},pA=P.__private__.getNumberOfPages=P.getNumberOfPages=function(){return be.length-1},to=function(M,J,Ct){var Dt,Zt=void 0;return Ct=Ct||{},M=M!==void 0?M:Me[ur].fontName,J=J!==void 0?J:Me[ur].fontStyle,Dt=M.toLowerCase(),xr[Dt]!==void 0&&xr[Dt][J]!==void 0?Zt=xr[Dt][J]:xr[M]!==void 0&&xr[M][J]!==void 0?Zt=xr[M][J]:Ct.disableWarning===!1&&Ui.warn("Unable to look up font label for font '"+M+"', '"+J+"'. Refer to getFontList() for available fonts."),Zt||Ct.noFallback||(Zt=xr.times[J])==null&&(Zt=xr.times.normal),Zt},il=P.__private__.putInfo=function(){var M=ne(),J=function(Dt){return Dt};for(var Ct in I!==null&&(J=Di.encryptor(M,0)),nt("<<"),nt("/Producer ("+en(J("jsPDF "+Tr.version))+")"),Xe)Xe.hasOwnProperty(Ct)&&Xe[Ct]&&nt("/"+Ct.substr(0,1).toUpperCase()+Ct.substr(1)+" ("+en(J(Xe[Ct]))+")");nt("/CreationDate ("+en(J(Xt))+")"),nt(">>"),nt("endobj")},eo=P.__private__.putCatalog=function(M){var J=(M=M||{}).rootDictionaryObjId||ar;switch(ne(),nt("<<"),nt("/Type /Catalog"),nt("/Pages "+J+" 0 R"),Se||(Se="fullwidth"),Se){case"fullwidth":nt("/OpenAction [3 0 R /FitH null]");break;case"fullheight":nt("/OpenAction [3 0 R /FitV null]");break;case"fullpage":nt("/OpenAction [3 0 R /Fit]");break;case"original":nt("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ct=""+Se;Ct.substr(Ct.length-1)==="%"&&(Se=parseInt(Se)/100),typeof Se=="number"&&nt("/OpenAction [3 0 R /XYZ null null "+Wt(Se)+"]")}switch(wr||(wr="continuous"),wr){case"continuous":nt("/PageLayout /OneColumn");break;case"single":nt("/PageLayout /SinglePage");break;case"two":case"twoleft":nt("/PageLayout /TwoColumnLeft");break;case"tworight":nt("/PageLayout /TwoColumnRight")}Ze&&nt("/PageMode /"+Ze),tt.publish("putCatalog"),nt(">>"),nt("endobj")},zo=P.__private__.putTrailer=function(){nt("trailer"),nt("<<"),nt("/Size "+(Nt+1)),nt("/Root "+Nt+" 0 R"),nt("/Info "+(Nt-1)+" 0 R"),I!==null&&nt("/Encrypt "+Di.oid+" 0 R"),nt("/ID [ <"+Gt+"> <"+Gt+"> ]"),nt(">>")},fA=P.__private__.putHeader=function(){nt("%PDF-"+K),nt("%ºß¬à")},Ho=P.__private__.putXRef=function(){var M="0000000000";nt("xref"),nt("0 "+(Nt+1)),nt("0000000000 65535 f ");for(var J=1;J<=Nt;J++)typeof Ht[J]=="function"?nt((M+Ht[J]()).slice(-10)+" 00000 n "):Ht[J]!==void 0?nt((M+Ht[J]).slice(-10)+" 00000 n "):nt("0000000000 00000 n ")},xa=P.__private__.buildDocument=function(){Qe(),le(ie),tt.publish("buildDocument"),fA(),ni(),wi(),na(),I!==null&&tn(),il(),eo();var M=se;return Ho(),zo(),nt("startxref"),nt(""+M),nt("%%EOF"),le(be[dt]),ie.join(`
`)},gA=P.__private__.getBlob=function(M){return new Blob([$e(M)],{type:"application/pdf"})},ro=P.output=P.__private__.output=Ki(function(M,J){switch(typeof(J=J||{})=="string"?J={filename:J}:J.filename=J.filename||"generated.pdf",M){case void 0:return xa();case"save":P.save(J.filename);break;case"arraybuffer":return $e(xa());case"blob":return gA(xa());case"bloburi":case"bloburl":if(Er.URL!==void 0&&typeof Er.URL.createObjectURL=="function")return Er.URL&&Er.URL.createObjectURL(gA(xa()))||void 0;Ui.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ct="",Dt=xa();try{Ct=Cg(Dt)}catch{Ct=Cg(unescape(encodeURIComponent(Dt)))}return"data:application/pdf;filename="+J.filename+";base64,"+Ct;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Er)==="[object Window]"){var Zt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ue=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';J.pdfObjectUrl&&(Zt=J.pdfObjectUrl,ue="");var we='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Zt+'"'+ue+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(J)+");<\/script></body></html>",Ke=Er.open();return Ke!==null&&Ke.document.write(we),Ke}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Er)==="[object Window]"){var yr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(J.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+J.filename+'" width="500px" height="400px" /></body></html>',Pr=Er.open();if(Pr!==null){Pr.document.write(yr);var or=this;Pr.document.documentElement.querySelector("#pdfViewer").onload=function(){Pr.document.title=J.filename,Pr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(or.output("bloburl"))}}return Pr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Er)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var qr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",J)+'"></iframe></body></html>',er=Er.open();if(er!==null&&(er.document.write(qr),er.document.title=J.filename),er||typeof safari>"u")return er;break;case"datauri":case"dataurl":return Er.document.location.href=this.output("datauristring",J);default:return null}}),nl=function(M){return Array.isArray(_t)===!0&&_t.indexOf(M)>-1};switch(s){case"pt":Ue=1;break;case"mm":Ue=72/25.4;break;case"cm":Ue=72/2.54;break;case"in":Ue=72;break;case"px":Ue=nl("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ue=12;break;case"ex":Ue=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);Ue=s}var Di=null;me(),qt();var mA=function(M){return I!==null?Di.encryptor(M,0):function(J){return J}},on=P.__private__.getPageInfo=P.getPageInfo=function(M){if(isNaN(M)||M%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:q[M].objId,pageNumber:M,pageContext:q[M]}},fr=P.__private__.getPageInfoByObjId=function(M){if(isNaN(M)||M%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var J in q)if(q[J].objId===M)break;return on(J)},sl=P.__private__.getCurrentPageInfo=P.getCurrentPageInfo=function(){return{objId:q[dt].objId,pageNumber:dt,pageContext:q[dt]}};P.addPage=function(){return Ro.apply(this,arguments),this},P.setPage=function(){return dA.apply(this,arguments),le.call(this,be[dt]),this},P.insertPage=function(M){return this.addPage(),this.movePage(dt,M),this},P.movePage=function(M,J){var Ct,Dt;if(M>J){Ct=be[M],Dt=q[M];for(var Zt=M;Zt>J;Zt--)be[Zt]=be[Zt-1],q[Zt]=q[Zt-1];be[J]=Ct,q[J]=Dt,this.setPage(J)}else if(M<J){Ct=be[M],Dt=q[M];for(var ue=M;ue<J;ue++)be[ue]=be[ue+1],q[ue]=q[ue+1];be[J]=Ct,q[J]=Dt,this.setPage(J)}return this},P.deletePage=function(){return Ja.apply(this,arguments),this},P.__private__.text=P.text=function(M,J,Ct,Dt,Zt){var ue,we,Ke,yr,Pr,or,qr,er,_i,Mr=(Dt=Dt||{}).scope||this;if(typeof M=="number"&&typeof J=="number"&&(typeof Ct=="string"||Array.isArray(Ct))){var Nr=Ct;Ct=J,J=M,M=Nr}if(arguments[3]instanceof vt?(yt("The transform parameter of text() with a Matrix value"),_i=Zt):(Ke=arguments[4],yr=arguments[5],ii(qr=arguments[3])==="object"&&qr!==null||(typeof Ke=="string"&&(yr=Ke,Ke=null),typeof qr=="string"&&(yr=qr,qr=null),typeof qr=="number"&&(Ke=qr,qr=null),Dt={flags:qr,angle:Ke,align:yr})),isNaN(J)||isNaN(Ct)||M==null)throw new Error("Invalid arguments passed to jsPDF.text");if(M.length===0)return Mr;var Hi="",ws=!1,zn=typeof Dt.lineHeightFactor=="number"?Dt.lineHeightFactor:Ca,Ia=Mr.internal.scaleFactor;function cl(ai){return ai=ai.split("	").join(Array(Dt.TabLen||9).join(" ")),en(ai,qr)}function Ao(ai){for(var fi,gi=ai.concat(),Pi=[],ss=gi.length;ss--;)typeof(fi=gi.shift())=="string"?Pi.push(fi):Array.isArray(ai)&&(fi.length===1||fi[1]===void 0&&fi[2]===void 0)?Pi.push(fi[0]):Pi.push([fi[0],fi[1],fi[2]]);return Pi}function lo(ai,fi){var gi;if(typeof ai=="string")gi=fi(ai)[0];else if(Array.isArray(ai)){for(var Pi,ss,Ua=ai.concat(),Pa=[],Go=Ua.length;Go--;)typeof(Pi=Ua.shift())=="string"?Pa.push(fi(Pi)[0]):Array.isArray(Pi)&&typeof Pi[0]=="string"&&(ss=fi(Pi[0],Pi[1],Pi[2]),Pa.push([ss[0],ss[1],ss[2]]));gi=Pa}return gi}var la=!1,co=!0;if(typeof M=="string")la=!0;else if(Array.isArray(M)){var _s=M.concat();we=[];for(var bs,ci=_s.length;ci--;)(typeof(bs=_s.shift())!="string"||Array.isArray(bs)&&typeof bs[0]!="string")&&(co=!1);la=co}if(la===!1)throw new Error('Type of text must be string or Array. "'+M+'" is not recognized.');typeof M=="string"&&(M=M.match(/[\r?\n]/)?M.split(/\r\n|\r|\n/g):[M]);var Ko=ge/Mr.internal.scaleFactor,$o=Ko*(zn-1);switch(Dt.baseline){case"bottom":Ct-=$o;break;case"top":Ct+=Ko-$o;break;case"hanging":Ct+=Ko-2*$o;break;case"middle":Ct+=Ko/2-$o}if((or=Dt.maxWidth||0)>0&&(typeof M=="string"?M=Mr.splitTextToSize(M,or):Object.prototype.toString.call(M)==="[object Array]"&&(M=M.reduce(function(ai,fi){return ai.concat(Mr.splitTextToSize(fi,or))},[]))),ue={text:M,x:J,y:Ct,options:Dt,mutex:{pdfEscape:en,activeFontKey:ur,fonts:Me,activeFontSize:ge}},tt.publish("preProcessText",ue),M=ue.text,Ke=(Dt=ue.options).angle,!(_i instanceof vt)&&Ke&&typeof Ke=="number"){Ke*=Math.PI/180,Dt.rotationDirection===0&&(Ke=-Ke),ht===it.ADVANCED&&(Ke=-Ke);var uo=Math.cos(Ke),Vs=Math.sin(Ke);_i=new vt(uo,Vs,-Vs,uo,0,0)}else Ke&&Ke instanceof vt&&(_i=Ke);ht!==it.ADVANCED||_i||(_i=de),(Pr=Dt.charSpace||so)!==void 0&&(Hi+=Ft(lt(Pr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(er=Dt.horizontalScale)!==void 0&&(Hi+=Ft(100*er)+` Tz
`),Dt.lang;var bn=-1,IA=Dt.renderingMode!==void 0?Dt.renderingMode:Dt.stroke,Ea=Mr.internal.getCurrentPageInfo().pageContext;switch(IA){case 0:case!1:case"fill":bn=0;break;case 1:case!0:case"stroke":bn=1;break;case 2:case"fillThenStroke":bn=2;break;case 3:case"invisible":bn=3;break;case 4:case"fillAndAddForClipping":bn=4;break;case 5:case"strokeAndAddPathForClipping":bn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":bn=6;break;case 7:case"addToPathForClipping":bn=7}var qo=Ea.usedRenderingMode!==void 0?Ea.usedRenderingMode:-1;bn!==-1?Hi+=bn+` Tr
`:qo!==-1&&(Hi+=`0 Tr
`),bn!==-1&&(Ea.usedRenderingMode=bn),yr=Dt.align||"left";var ns,js=ge*zn,Ks=Mr.internal.pageSize.getWidth(),Wl=Me[ur];Pr=Dt.charSpace||so,or=Dt.maxWidth||0,qr=Object.assign({autoencode:!0,noBOM:!0},Dt.flags);var $s=[];if(Object.prototype.toString.call(M)==="[object Array]"){var Lr;we=Ao(M),yr!=="left"&&(ns=we.map(function(ai){return Mr.getStringUnitWidth(ai,{font:Wl,charSpace:Pr,fontSize:ge,doKerning:!1})*ge/Ia}));var In,qs=0;if(yr==="right"){J-=ns[0],M=[],ci=we.length;for(var Hn=0;Hn<ci;Hn++)Hn===0?(In=Sa(J),Lr=zs(Ct)):(In=lt(qs-ns[Hn]),Lr=-js),M.push([we[Hn],In,Lr]),qs=ns[Hn]}else if(yr==="center"){J-=ns[0]/2,M=[],ci=we.length;for(var Vn=0;Vn<ci;Vn++)Vn===0?(In=Sa(J),Lr=zs(Ct)):(In=lt((qs-ns[Vn])/2),Lr=-js),M.push([we[Vn],In,Lr]),qs=ns[Vn]}else if(yr==="left"){M=[],ci=we.length;for(var ho=0;ho<ci;ho++)M.push(we[ho])}else{if(yr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');M=[],ci=we.length,or=or!==0?or:Ks;for(var xs=0;xs<ci;xs++)Lr=xs===0?zs(Ct):-js,In=xs===0?Sa(J):0,xs<ci-1?$s.push(Ft(lt((or-ns[xs])/(we[xs].split(" ").length-1)))):$s.push(0),M.push([we[xs],In,Lr])}}var po=typeof Dt.R2L=="boolean"?Dt.R2L:Ge;po===!0&&(M=lo(M,function(ai,fi,gi){return[ai.split("").reverse().join(""),fi,gi]})),ue={text:M,x:J,y:Ct,options:Dt,mutex:{pdfEscape:en,activeFontKey:ur,fonts:Me,activeFontSize:ge}},tt.publish("postProcessText",ue),M=ue.text,ws=ue.mutex.isHex||!1;var fo=Me[ur].encoding;fo!=="WinAnsiEncoding"&&fo!=="StandardEncoding"||(M=lo(M,function(ai,fi,gi){return[cl(ai),fi,gi]})),we=Ao(M),M=[];for(var ca,jn,Bs,Ta=0,go=1,Gs=Array.isArray(we[0])?go:Ta,Kn="",$i=function(ai,fi,gi){var Pi="";return gi instanceof vt?(gi=typeof Dt.angle=="number"?jt(gi,new vt(1,0,0,1,ai,fi)):jt(new vt(1,0,0,1,ai,fi),gi),ht===it.ADVANCED&&(gi=jt(new vt(1,0,0,-1,0,0),gi)),Pi=gi.join(" ")+` Tm
`):Pi=Ft(ai)+" "+Ft(fi)+` Td
`,Pi},ln=0;ln<we.length;ln++){switch(Kn="",Gs){case go:Bs=(ws?"<":"(")+we[ln][0]+(ws?">":")"),ca=parseFloat(we[ln][1]),jn=parseFloat(we[ln][2]);break;case Ta:Bs=(ws?"<":"(")+we[ln]+(ws?">":")"),ca=Sa(J),jn=zs(Ct)}$s!==void 0&&$s[ln]!==void 0&&(Kn=$s[ln]+` Tw
`),ln===0?M.push(Kn+$i(ca,jn,_i)+Bs):Gs===Ta?M.push(Kn+Bs):Gs===go&&M.push(Kn+$i(ca,jn,_i)+Bs)}M=Gs===Ta?M.join(` Tj
T* `):M.join(` Tj
`),M+=` Tj
`;var ua=`BT
/`;return ua+=ur+" "+ge+` Tf
`,ua+=Ft(ge*zn)+` TL
`,ua+=Vo+`
`,ua+=Hi,ua+=M,nt(ua+="ET"),Q[ur]=!0,Mr};var yA=P.__private__.clip=P.clip=function(M){return nt(M==="evenodd"?"W*":"W"),this};P.clipEvenOdd=function(){return yA("evenodd")},P.__private__.discardPath=P.discardPath=function(){return nt("n"),this};var ys=P.__private__.isValidStyle=function(M){var J=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(M)!==-1&&(J=!0),J};P.__private__.setDefaultPathOperation=P.setDefaultPathOperation=function(M){return ys(M)&&(C=M),this};var vA=P.__private__.getStyle=P.getStyle=function(M){var J=C;switch(M){case"D":case"S":J="S";break;case"F":J="f";break;case"FD":case"DF":J="B";break;case"f":case"f*":case"B":case"B*":J=M}return J},Ba=P.close=function(){return nt("h"),this};P.stroke=function(){return nt("S"),this},P.fill=function(M){return wA("f",M),this},P.fillEvenOdd=function(M){return wA("f*",M),this},P.fillStroke=function(M){return wA("B",M),this},P.fillStrokeEvenOdd=function(M){return wA("B*",M),this};var wA=function(M,J){ii(J)==="object"?kc(J,M):nt(M)},_A=function(M){M===null||ht===it.ADVANCED&&M===void 0||(M=vA(M),nt(M))};function jl(M,J,Ct,Dt,Zt){var ue=new Au(J||this.boundingBox,Ct||this.xStep,Dt||this.yStep,this.gState,Zt||this.matrix);ue.stream=this.stream;var we=M+"$$"+this.cloneIndex+++"$$";return ae(we,ue),ue}var kc=function(M,J){var Ct=Fi[M.key],Dt=ke[Ct];if(Dt instanceof pc)nt("q"),nt(Dc(J)),Dt.gState&&P.setGState(Dt.gState),nt(M.matrix.toString()+" cm"),nt("/"+Ct+" sh"),nt("Q");else if(Dt instanceof Au){var Zt=new vt(1,0,0,-1,0,oo());M.matrix&&(Zt=Zt.multiply(M.matrix||de),Ct=jl.call(Dt,M.key,M.boundingBox,M.xStep,M.yStep,Zt).id),nt("q"),nt("/Pattern cs"),nt("/"+Ct+" scn"),Dt.gState&&P.setGState(Dt.gState),nt(J),nt("Q")}},Dc=function(M){switch(M){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},al=P.moveTo=function(M,J){return nt(Ft(lt(M))+" "+Ft(wt(J))+" m"),this},aa=P.lineTo=function(M,J){return nt(Ft(lt(M))+" "+Ft(wt(J))+" l"),this},oa=P.curveTo=function(M,J,Ct,Dt,Zt,ue){return nt([Ft(lt(M)),Ft(wt(J)),Ft(lt(Ct)),Ft(wt(Dt)),Ft(lt(Zt)),Ft(wt(ue)),"c"].join(" ")),this};P.__private__.line=P.line=function(M,J,Ct,Dt,Zt){if(isNaN(M)||isNaN(J)||isNaN(Ct)||isNaN(Dt)||!ys(Zt))throw new Error("Invalid arguments passed to jsPDF.line");return ht===it.COMPAT?this.lines([[Ct-M,Dt-J]],M,J,[1,1],Zt||"S"):this.lines([[Ct-M,Dt-J]],M,J,[1,1]).stroke()},P.__private__.lines=P.lines=function(M,J,Ct,Dt,Zt,ue){var we,Ke,yr,Pr,or,qr,er,_i,Mr,Nr,Hi,ws;if(typeof M=="number"&&(ws=Ct,Ct=J,J=M,M=ws),Dt=Dt||[1,1],ue=ue||!1,isNaN(J)||isNaN(Ct)||!Array.isArray(M)||!Array.isArray(Dt)||!ys(Zt)||typeof ue!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(al(J,Ct),we=Dt[0],Ke=Dt[1],Pr=M.length,Nr=J,Hi=Ct,yr=0;yr<Pr;yr++)(or=M[yr]).length===2?(Nr=or[0]*we+Nr,Hi=or[1]*Ke+Hi,aa(Nr,Hi)):(qr=or[0]*we+Nr,er=or[1]*Ke+Hi,_i=or[2]*we+Nr,Mr=or[3]*Ke+Hi,Nr=or[4]*we+Nr,Hi=or[5]*Ke+Hi,oa(qr,er,_i,Mr,Nr,Hi));return ue&&Ba(),_A(Zt),this},P.path=function(M){for(var J=0;J<M.length;J++){var Ct=M[J],Dt=Ct.c;switch(Ct.op){case"m":al(Dt[0],Dt[1]);break;case"l":aa(Dt[0],Dt[1]);break;case"c":oa.apply(this,Dt);break;case"h":Ba()}}return this},P.__private__.rect=P.rect=function(M,J,Ct,Dt,Zt){if(isNaN(M)||isNaN(J)||isNaN(Ct)||isNaN(Dt)||!ys(Zt))throw new Error("Invalid arguments passed to jsPDF.rect");return ht===it.COMPAT&&(Dt=-Dt),nt([Ft(lt(M)),Ft(wt(J)),Ft(lt(Ct)),Ft(lt(Dt)),"re"].join(" ")),_A(Zt),this},P.__private__.triangle=P.triangle=function(M,J,Ct,Dt,Zt,ue,we){if(isNaN(M)||isNaN(J)||isNaN(Ct)||isNaN(Dt)||isNaN(Zt)||isNaN(ue)||!ys(we))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ct-M,Dt-J],[Zt-Ct,ue-Dt],[M-Zt,J-ue]],M,J,[1,1],we,!0),this},P.__private__.roundedRect=P.roundedRect=function(M,J,Ct,Dt,Zt,ue,we){if(isNaN(M)||isNaN(J)||isNaN(Ct)||isNaN(Dt)||isNaN(Zt)||isNaN(ue)||!ys(we))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ke=4/3*(Math.SQRT2-1);return Zt=Math.min(Zt,.5*Ct),ue=Math.min(ue,.5*Dt),this.lines([[Ct-2*Zt,0],[Zt*Ke,0,Zt,ue-ue*Ke,Zt,ue],[0,Dt-2*ue],[0,ue*Ke,-Zt*Ke,ue,-Zt,ue],[2*Zt-Ct,0],[-Zt*Ke,0,-Zt,-ue*Ke,-Zt,-ue],[0,2*ue-Dt],[0,-ue*Ke,Zt*Ke,-ue,Zt,-ue]],M+Zt,J,[1,1],we,!0),this},P.__private__.ellipse=P.ellipse=function(M,J,Ct,Dt,Zt){if(isNaN(M)||isNaN(J)||isNaN(Ct)||isNaN(Dt)||!ys(Zt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ue=4/3*(Math.SQRT2-1)*Ct,we=4/3*(Math.SQRT2-1)*Dt;return al(M+Ct,J),oa(M+Ct,J-we,M+ue,J-Dt,M,J-Dt),oa(M-ue,J-Dt,M-Ct,J-we,M-Ct,J),oa(M-Ct,J+we,M-ue,J+Dt,M,J+Dt),oa(M+ue,J+Dt,M+Ct,J+we,M+Ct,J),_A(Zt),this},P.__private__.circle=P.circle=function(M,J,Ct,Dt){if(isNaN(M)||isNaN(J)||isNaN(Ct)||!ys(Dt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(M,J,Ct,Ct,Dt)},P.setFont=function(M,J,Ct){return Ct&&(J=Lt(J,Ct)),ur=to(M,J,{disableWarning:!1}),this};var bA=P.__private__.getFont=P.getFont=function(){return Me[to.apply(P,arguments)]};P.__private__.getFontList=P.getFontList=function(){var M,J,Ct={};for(M in xr)if(xr.hasOwnProperty(M))for(J in Ct[M]=[],xr[M])xr[M].hasOwnProperty(J)&&Ct[M].push(J);return Ct},P.addFont=function(M,J,Ct,Dt,Zt){var ue=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ue.indexOf(arguments[3])!==-1?Zt=arguments[3]:arguments[3]&&ue.indexOf(arguments[3])==-1&&(Ct=Lt(Ct,Dt)),Zt=Zt||"Identity-H",Qn.call(this,M,J,Ct,Zt)};var Ca,Fa=n.lineWidth||.200025,An=P.__private__.getLineWidth=P.getLineWidth=function(){return Fa},Wr=P.__private__.setLineWidth=P.setLineWidth=function(M){return Fa=M,nt(Ft(lt(M))+" w"),this};P.__private__.setLineDash=Tr.API.setLineDash=Tr.API.setLineDashPattern=function(M,J){if(M=M||[],J=J||0,isNaN(J)||!Array.isArray(M))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return M=M.map(function(Ct){return Ft(lt(Ct))}).join(" "),J=Ft(lt(J)),nt("["+M+"] "+J+" d"),this};var xA=P.__private__.getLineHeight=P.getLineHeight=function(){return ge*Ca};P.__private__.getLineHeight=P.getLineHeight=function(){return ge*Ca};var io=P.__private__.setLineHeightFactor=P.setLineHeightFactor=function(M){return typeof(M=M||1.15)=="number"&&(Ca=M),this},no=P.__private__.getLineHeightFactor=P.getLineHeightFactor=function(){return Ca};io(n.lineHeight);var Sa=P.__private__.getHorizontalCoordinate=function(M){return lt(M)},zs=P.__private__.getVerticalCoordinate=function(M){return ht===it.ADVANCED?M:q[dt].mediaBox.topRightY-q[dt].mediaBox.bottomLeftY-lt(M)},Nc=P.__private__.getHorizontalCoordinateString=P.getHorizontalCoordinateString=function(M){return Ft(Sa(M))},is=P.__private__.getVerticalCoordinateString=P.getVerticalCoordinateString=function(M){return Ft(zs(M))},Hs=n.strokeColor||"0 G";P.__private__.getStrokeColor=P.getDrawColor=function(){return Ur(Hs)},P.__private__.setStrokeColor=P.setDrawColor=function(M,J,Ct,Dt){return Hs=Ir({ch1:M,ch2:J,ch3:Ct,ch4:Dt,pdfColorType:"draw",precision:2}),nt(Hs),this};var BA=n.fillColor||"0 g";P.__private__.getFillColor=P.getFillColor=function(){return Ur(BA)},P.__private__.setFillColor=P.setFillColor=function(M,J,Ct,Dt){return BA=Ir({ch1:M,ch2:J,ch3:Ct,ch4:Dt,pdfColorType:"fill",precision:2}),nt(BA),this};var Vo=n.textColor||"0 g",Kl=P.__private__.getTextColor=P.getTextColor=function(){return Ur(Vo)};P.__private__.setTextColor=P.setTextColor=function(M,J,Ct,Dt){return Vo=Ir({ch1:M,ch2:J,ch3:Ct,ch4:Dt,pdfColorType:"text",precision:3}),this};var so=n.charSpace,$l=P.__private__.getCharSpace=P.getCharSpace=function(){return parseFloat(so||0)};P.__private__.setCharSpace=P.setCharSpace=function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return so=M,this};var CA=0;P.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},P.__private__.setLineCap=P.setLineCap=function(M){var J=P.CapJoinStyles[M];if(J===void 0)throw new Error("Line cap style of '"+M+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return CA=J,nt(J+" J"),this};var FA=0;P.__private__.setLineJoin=P.setLineJoin=function(M){var J=P.CapJoinStyles[M];if(J===void 0)throw new Error("Line join style of '"+M+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return FA=J,nt(J+" j"),this},P.__private__.setLineMiterLimit=P.__private__.setMiterLimit=P.setLineMiterLimit=P.setMiterLimit=function(M){if(M=M||0,isNaN(M))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return nt(Ft(lt(M))+" M"),this},P.GState=Md,P.setGState=function(M){(M=typeof M=="string"?zr[Dr[M]]:ol(null,M)).equals(pt)||(nt("/"+M.id+" gs"),pt=M)};var ol=function(M,J){if(!M||!Dr[M]){var Ct=!1;for(var Dt in zr)if(zr.hasOwnProperty(Dt)&&zr[Dt].equals(J)){Ct=!0;break}if(Ct)J=zr[Dt];else{var Zt="GS"+(Object.keys(zr).length+1).toString(10);zr[Zt]=J,J.id=Zt}return M&&(Dr[M]=J.id),tt.publish("addGState",J),J}};P.addGState=function(M,J){return ol(M,J),this},P.saveGraphicsState=function(){return nt("q"),Gr.push({key:ur,size:ge,color:Vo}),this},P.restoreGraphicsState=function(){nt("Q");var M=Gr.pop();return ur=M.key,ge=M.size,Vo=M.color,pt=null,this},P.setCurrentTransformationMatrix=function(M){return nt(M.toString()+" cm"),this},P.comment=function(M){return nt("#"+M),this};var vs=function(M,J){var Ct=M||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ct},set:function(ue){isNaN(ue)||(Ct=parseFloat(ue))}});var Dt=J||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Dt},set:function(ue){isNaN(ue)||(Dt=parseFloat(ue))}});var Zt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Zt},set:function(ue){Zt=ue.toString()}}),this},SA=function(M,J,Ct,Dt){vs.call(this,M,J),this.type="rect";var Zt=Ct||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Zt},set:function(we){isNaN(we)||(Zt=parseFloat(we))}});var ue=Dt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ue},set:function(we){isNaN(we)||(ue=parseFloat(we))}}),this},Al=function(){this.page=G,this.currentPage=dt,this.pages=be.slice(0),this.pagesContext=q.slice(0),this.x=Jr,this.y=he,this.matrix=sr,this.width=jo(dt),this.height=oo(dt),this.outputDestination=Le,this.id="",this.objectNumber=-1};Al.prototype.restore=function(){G=this.page,dt=this.currentPage,q=this.pagesContext,be=this.pages,Jr=this.x,he=this.y,sr=this.matrix,ao(dt,this.width),ll(dt,this.height),Le=this.outputDestination};var ql=function(M,J,Ct,Dt,Zt){Ot.push(new Al),G=dt=0,be=[],Jr=M,he=J,sr=Zt,$r([Ct,Dt])},Gl=function(M){if(kt[M])Ot.pop().restore();else{var J=new Al,Ct="Xo"+(Object.keys(Pt).length+1).toString(10);J.id=Ct,kt[M]=Ct,Pt[Ct]=J,tt.publish("addFormObject",J),Ot.pop().restore()}};for(var Aa in P.beginFormObject=function(M,J,Ct,Dt,Zt){return ql(M,J,Ct,Dt,Zt),this},P.endFormObject=function(M){return Gl(M),this},P.doFormObject=function(M,J){var Ct=Pt[kt[M]];return nt("q"),nt(J.toString()+" cm"),nt("/"+Ct.id+" Do"),nt("Q"),this},P.getFormObject=function(M){var J=Pt[kt[M]];return{x:J.x,y:J.y,width:J.width,height:J.height,matrix:J.matrix}},P.save=function(M,J){return M=M||"generated.pdf",(J=J||{}).returnPromise=J.returnPromise||!1,J.returnPromise===!1?(dc(gA(xa()),M),typeof dc.unload=="function"&&Er.setTimeout&&setTimeout(dc.unload,911),this):new Promise(function(Ct,Dt){try{var Zt=dc(gA(xa()),M);typeof dc.unload=="function"&&Er.setTimeout&&setTimeout(dc.unload,911),Ct(Zt)}catch(ue){Dt(ue.message)}})},Tr.API)Tr.API.hasOwnProperty(Aa)&&(Aa==="events"&&Tr.API.events.length?function(M,J){var Ct,Dt,Zt;for(Zt=J.length-1;Zt!==-1;Zt--)Ct=J[Zt][0],Dt=J[Zt][1],M.subscribe.apply(M,[Ct].concat(typeof Dt=="function"?[Dt]:Dt))}(tt,Tr.API.events):P[Aa]=Tr.API[Aa]);var jo=P.getPageWidth=function(M){return(q[M=M||dt].mediaBox.topRightX-q[M].mediaBox.bottomLeftX)/Ue},ao=P.setPageWidth=function(M,J){q[M].mediaBox.topRightX=J*Ue+q[M].mediaBox.bottomLeftX},oo=P.getPageHeight=function(M){return(q[M=M||dt].mediaBox.topRightY-q[M].mediaBox.bottomLeftY)/Ue},ll=P.setPageHeight=function(M,J){q[M].mediaBox.topRightY=J*Ue+q[M].mediaBox.bottomLeftY};return P.internal={pdfEscape:en,getStyle:vA,getFont:bA,getFontSize:Ie,getCharSpace:$l,getTextColor:Kl,getLineHeight:xA,getLineHeightFactor:no,getLineWidth:An,write:dr,getHorizontalCoordinate:Sa,getVerticalCoordinate:zs,getCoordinateString:Nc,getVerticalCoordinateString:is,collections:{},newObject:ne,newAdditionalObject:Fr,newObjectDeferred:Ee,newObjectDeferredBegin:Re,getFilters:Zr,putStream:cr,events:tt,scaleFactor:Ue,pageSize:{getWidth:function(){return jo(dt)},setWidth:function(M){ao(dt,M)},getHeight:function(){return oo(dt)},setHeight:function(M){ll(dt,M)}},encryptionOptions:I,encryption:Di,getEncryptor:mA,output:ro,getNumberOfPages:pA,pages:be,out:nt,f2:Wt,f3:At,getPageInfo:on,getPageInfoByObjId:fr,getCurrentPageInfo:sl,getPDFVersion:V,Point:vs,Rectangle:SA,Matrix:vt,hasHotfix:nl},Object.defineProperty(P.internal.pageSize,"width",{get:function(){return jo(dt)},set:function(M){ao(dt,M)},enumerable:!0,configurable:!0}),Object.defineProperty(P.internal.pageSize,"height",{get:function(){return oo(dt)},set:function(M){ll(dt,M)},enumerable:!0,configurable:!0}),hA.call(P,ce),ur="F1",Ro(l,i),tt.publish("initialized"),P}au.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},au.prototype.toHexString=function(n){return n.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},au.prototype.hexToBytes=function(n){for(var t=[],i=0;i<n.length;i+=2)t.push(String.fromCharCode(parseInt(n.substr(i,2),16)));return t.join("")},au.prototype.processOwnerPassword=function(n,t){return Ig(Sg(t).substr(0,5),n)},au.prototype.encryptor=function(n,t){var i=Sg(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&t,t>>8&255)).substr(0,10);return function(s){return Ig(i,s)}},Md.prototype.equals=function(n){var t,i="id,objectNumber,equals";if(!n||ii(n)!==ii(this))return!1;var s=0;for(t in this)if(!(i.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!n.hasOwnProperty(t)||this[t]!==n[t])return!1;s++}for(t in n)n.hasOwnProperty(t)&&i.indexOf(t)<0&&s--;return s===0},Tr.API={events:[]},Tr.version="2.5.1";var sn=Tr.API,Eg=1,fc=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},lu=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},kr=function(n){return n.toFixed(2)},Sl=function(n){return n.toFixed(5)};sn.__acroform__={};var ea=function(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n},cv=function(n){return n*Eg},nA=function(n){var t=new hv,i=Ar.internal.getHeight(n)||0,s=Ar.internal.getWidth(n)||0;return t.BBox=[0,0,Number(kr(s)),Number(kr(i))],t},P4=sn.__acroform__.setBit=function(n,t){if(n=n||0,t=t||0,isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<t},L4=sn.__acroform__.clearBit=function(n,t){if(n=n||0,t=t||0,isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<t)},Q4=sn.__acroform__.getBit=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<t?1:0},dn=sn.__acroform__.getBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Q4(n,t-1)},pn=sn.__acroform__.setBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return P4(n,t-1)},fn=sn.__acroform__.clearBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return L4(n,t-1)},M4=sn.__acroform__.calculateCoordinates=function(n,t){var i=t.internal.getHorizontalCoordinate,s=t.internal.getVerticalCoordinate,l=n[0],h=n[1],p=n[2],o=n[3],v={};return v.lowerLeft_X=i(l)||0,v.lowerLeft_Y=s(h+o)||0,v.upperRight_X=i(l+p)||0,v.upperRight_Y=s(h)||0,[Number(kr(v.lowerLeft_X)),Number(kr(v.lowerLeft_Y)),Number(kr(v.upperRight_X)),Number(kr(v.upperRight_Y))]},k4=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var t=[],i=n._V||n.DV,s=Tg(n,i),l=n.scope.internal.getFont(n.fontName,n.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(n.scope.__private__.encodeColorString(n.color)),t.push("/"+l+" "+kr(s.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC");var h=nA(n);return h.scope=n.scope,h.stream=t.join(`
`),h}},Tg=function(n,t){var i=n.fontSize===0?n.maxFontSize:n.fontSize,s={text:"",fontSize:""},l=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");l=n.multiline?l.map(function(At){return At.split(`
`)}):l.map(function(At){return[At]});var h=i,p=Ar.internal.getHeight(n)||0;p=p<0?-p:p;var o=Ar.internal.getWidth(n)||0;o=o<0?-o:o;var v=function(At,lt,bt){if(At+1<l.length){var wt=lt+" "+l[At+1][0];return kd(wt,n,bt).width<=o-4}return!1};h++;t:for(;h>0;){t="",h--;var C,I,U=kd("3",n,h).height,Q=n.multiline?p-h:(p-U)/2,P=Q+=2,K=0,V=0,Y=0;if(h<=0){t=`(...) Tj
`,t+="% Width of Text: "+kd(t,n,h=12).width+", FieldWidth:"+o+`
`;break}for(var $="",it=0,ht=0;ht<l.length;ht++)if(l.hasOwnProperty(ht)){var St=!1;if(l[ht].length!==1&&Y!==l[ht].length-1){if((U+2)*(it+2)+2>p)continue t;$+=l[ht][Y],St=!0,V=ht,ht--}else{$=($+=l[ht][Y]+" ").substr($.length-1)==" "?$.substr(0,$.length-1):$;var Tt=parseInt(ht),Lt=v(Tt,$,h),Ft=ht>=l.length-1;if(Lt&&!Ft){$+=" ",Y=0;continue}if(Lt||Ft){if(Ft)V=Tt;else if(n.multiline&&(U+2)*(it+2)+2>p)continue t}else{if(!n.multiline||(U+2)*(it+2)+2>p)continue t;V=Tt}}for(var yt="",Rt=K;Rt<=V;Rt++){var Wt=l[Rt];if(n.multiline){if(Rt===V){yt+=Wt[Y]+" ",Y=(Y+1)%Wt.length;continue}if(Rt===K){yt+=Wt[Wt.length-1]+" ";continue}}yt+=Wt[0]+" "}switch(yt=yt.substr(yt.length-1)==" "?yt.substr(0,yt.length-1):yt,I=kd(yt,n,h).width,n.textAlign){case"right":C=o-I-2;break;case"center":C=(o-I)/2;break;case"left":default:C=2}t+=kr(C)+" "+kr(P)+` Td
`,t+="("+fc(yt)+`) Tj
`,t+=-kr(C)+` 0 Td
`,P=-(h+2),I=0,K=St?V:V+1,it++,$=""}break}return s.text=t,s.fontSize=h,s},kd=function(n,t,i){var s=t.scope.internal.getFont(t.fontName,t.fontStyle),l=t.scope.getStringUnitWidth(n,{font:s,fontSize:parseFloat(i),charSpace:0})*parseFloat(i);return{height:t.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(i),charSpace:0})*parseFloat(i)*1.5,width:l}},D4={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},N4=function(n,t){var i={type:"reference",object:n};t.internal.getPageInfo(n.page).pageContext.annotations.find(function(s){return s.type===i.type&&s.object===i.object})===void 0&&t.internal.getPageInfo(n.page).pageContext.annotations.push(i)},O4=function(n,t){for(var i in n)if(n.hasOwnProperty(i)){var s=i,l=n[i];t.internal.newObjectDeferredBegin(l.objId,!0),ii(l)==="object"&&typeof l.putStream=="function"&&l.putStream(),delete n[s]}},R4=function(n,t){if(t.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Fo.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(D4)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Eg=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new dv,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(i){i.internal.events.unsubscribe(i.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete i.internal.acroformPlugin.acroFormDictionaryRoot._eventID,i.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(i){i.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=i.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var l in s)if(s.hasOwnProperty(l)){var h=s[l];h.objId=void 0,h.hasAnnotation&&N4(h,i)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(i){if(i.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");i.internal.write("/AcroForm "+i.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(i){(function(s,l){var h=!s;for(var p in s||(l.internal.newObjectDeferredBegin(l.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),l.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||l.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(p)){var o=s[p],v=[],C=o.Rect;if(o.Rect&&(o.Rect=M4(o.Rect,l)),l.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Ar.createDefaultAppearanceStream(o),ii(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(v=o.getKeyValueListForStream()),o.Rect=C,o.hasAppearanceStream&&!o.appearanceStreamContent){var I=k4(o);v.push({key:"AP",value:"<</N "+I+">>"}),l.internal.acroformPlugin.xForms.push(I)}if(o.appearanceStreamContent){var U="";for(var Q in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(Q)){var P=o.appearanceStreamContent[Q];if(U+="/"+Q+" ",U+="<<",Object.keys(P).length>=1||Array.isArray(P)){for(var p in P)if(P.hasOwnProperty(p)){var K=P[p];typeof K=="function"&&(K=K.call(l,o)),U+="/"+p+" "+K+" ",l.internal.acroformPlugin.xForms.indexOf(K)>=0||l.internal.acroformPlugin.xForms.push(K)}}else typeof(K=P)=="function"&&(K=K.call(l,o)),U+="/"+p+" "+K,l.internal.acroformPlugin.xForms.indexOf(K)>=0||l.internal.acroformPlugin.xForms.push(K);U+=">>"}v.push({key:"AP",value:`<<
`+U+">>"})}l.internal.putStream({additionalKeyValues:v,objectId:o.objId}),l.internal.out("endobj")}h&&O4(l.internal.acroformPlugin.xForms,l)})(i,n)}),n.internal.acroformPlugin.isInitialized=!0}},uv=sn.__acroform__.arrayToPdfArray=function(n,t,i){var s=function(p){return p};if(Array.isArray(n)){for(var l="[",h=0;h<n.length;h++)switch(h!==0&&(l+=" "),ii(n[h])){case"boolean":case"number":case"object":l+=n[h].toString();break;case"string":n[h].substr(0,1)!=="/"?(t!==void 0&&i&&(s=i.internal.getEncryptor(t)),l+="("+fc(s(n[h].toString()))+")"):l+=n[h].toString()}return l+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Ug=function(n,t,i){var s=function(l){return l};return t!==void 0&&i&&(s=i.internal.getEncryptor(t)),(n=n||"").toString(),n="("+fc(s(n))+")"},sA=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};sA.prototype.toString=function(){return this.objId+" 0 R"},sA.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},sA.prototype.getKeyValueListForStream=function(){var n=[],t=Object.getOwnPropertyNames(this).filter(function(h){return h!="content"&&h!="appearanceStreamContent"&&h!="scope"&&h!="objId"&&h.substring(0,1)!="_"});for(var i in t)if(Object.getOwnPropertyDescriptor(this,t[i]).configurable===!1){var s=t[i],l=this[s];l&&(Array.isArray(l)?n.push({key:s,value:uv(l,this.objId,this.scope)}):l instanceof sA?(l.scope=this.scope,n.push({key:s,value:l.objId+" 0 R"})):typeof l!="function"&&n.push({key:s,value:l}))}return n};var hv=function(){sA.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(i){n=i.trim()},get:function(){return n||null}})};ea(hv,sA);var dv=function(){sA.call(this);var n,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var i=function(s){return s};return this.scope&&(i=this.scope.internal.getEncryptor(this.objId)),"("+fc(i(n))+")"}},set:function(i){n=i}})};ea(dv,sA);var Fo=function n(){sA.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function($){if(isNaN($))throw new Error('Invalid value "'+$+'" for attribute F supplied.');t=$}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!dn(t,3)},set:function($){$?this.F=pn(t,3):this.F=fn(t,3)}});var i=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return i},set:function($){if(isNaN($))throw new Error('Invalid value "'+$+'" for attribute Ff supplied.');i=$}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function($){s=$!==void 0?$:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function($){s[0]=$}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function($){s[1]=$}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function($){s[2]=$}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function($){s[3]=$}});var l="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return l},set:function($){switch($){case"/Btn":case"/Tx":case"/Ch":case"/Sig":l=$;break;default:throw new Error('Invalid value "'+$+'" for attribute FT supplied.')}}});var h=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!h||h.length<1){if(this instanceof Od)return;h="FieldObject"+n.FieldNum++}var $=function(it){return it};return this.scope&&($=this.scope.internal.getEncryptor(this.objId)),"("+fc($(h))+")"},set:function($){h=$.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return h},set:function($){h=$}});var p="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return p},set:function($){p=$}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function($){o=$}});var v=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return v},set:function($){v=$}});var C=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return C===void 0?50/Eg:C},set:function($){C=$}});var I="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return I},set:function($){I=$}});var U="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!U||this instanceof Od||this instanceof gc))return Ug(U,this.objId,this.scope)},set:function($){$=$.toString(),U=$}});var Q=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(Q)return this instanceof Dn?Q:Ug(Q,this.objId,this.scope)},set:function($){$=$.toString(),Q=this instanceof Dn?$:$.substr(0,1)==="("?lu($.substr(1,$.length-2)):lu($)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Dn?lu(Q.substr(1,Q.length-1)):Q},set:function($){$=$.toString(),Q=this instanceof Dn?"/"+$:$}});var P=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(P)return P},set:function($){this.V=$}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(P)return this instanceof Dn?P:Ug(P,this.objId,this.scope)},set:function($){$=$.toString(),P=this instanceof Dn?$:$.substr(0,1)==="("?lu($.substr(1,$.length-2)):lu($)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Dn?lu(P.substr(1,P.length-1)):P},set:function($){$=$.toString(),P=this instanceof Dn?"/"+$:$}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var K,V=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return V},set:function($){$=!!$,V=$}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(K)return K},set:function($){K=$}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,1)},set:function($){$?this.Ff=pn(this.Ff,1):this.Ff=fn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,2)},set:function($){$?this.Ff=pn(this.Ff,2):this.Ff=fn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,3)},set:function($){$?this.Ff=pn(this.Ff,3):this.Ff=fn(this.Ff,3)}});var Y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(Y!==null)return Y},set:function($){if([0,1,2].indexOf($)===-1)throw new Error('Invalid value "'+$+'" for attribute Q supplied.');Y=$}}),Object.defineProperty(this,"textAlign",{get:function(){var $;switch(Y){case 0:default:$="left";break;case 1:$="center";break;case 2:$="right"}return $},configurable:!0,enumerable:!0,set:function($){switch($){case"right":case 2:Y=2;break;case"center":case 1:Y=1;break;case"left":case 0:default:Y=0}}})};ea(Fo,sA);var cu=function(){Fo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(i){n=i}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return uv(t,this.objId,this.scope)},set:function(i){var s,l;l=[],typeof(s=i)=="string"&&(l=function(h,p,o){o||(o=1);for(var v,C=[];v=p.exec(h);)C.push(v[o]);return C}(s,/\((.*?)\)/g)),t=l}}),this.getOptions=function(){return t},this.setOptions=function(i){t=i,this.sort&&t.sort()},this.addOption=function(i){i=(i=i||"").toString(),t.push(i),this.sort&&t.sort()},this.removeOption=function(i,s){for(s=s||!1,i=(i=i||"").toString();t.indexOf(i)!==-1&&(t.splice(t.indexOf(i),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,18)},set:function(i){i?this.Ff=pn(this.Ff,18):this.Ff=fn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,19)},set:function(i){this.combo===!0&&(i?this.Ff=pn(this.Ff,19):this.Ff=fn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,20)},set:function(i){i?(this.Ff=pn(this.Ff,20),t.sort()):this.Ff=fn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,22)},set:function(i){i?this.Ff=pn(this.Ff,22):this.Ff=fn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,23)},set:function(i){i?this.Ff=pn(this.Ff,23):this.Ff=fn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,27)},set:function(i){i?this.Ff=pn(this.Ff,27):this.Ff=fn(this.Ff,27)}}),this.hasAppearanceStream=!1};ea(cu,Fo);var uu=function(){cu.call(this),this.fontName="helvetica",this.combo=!1};ea(uu,cu);var hu=function(){uu.call(this),this.combo=!0};ea(hu,uu);var Dd=function(){hu.call(this),this.edit=!0};ea(Dd,hu);var Dn=function(){Fo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,15)},set:function(i){i?this.Ff=pn(this.Ff,15):this.Ff=fn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,16)},set:function(i){i?this.Ff=pn(this.Ff,16):this.Ff=fn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,17)},set:function(i){i?this.Ff=pn(this.Ff,17):this.Ff=fn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,26)},set:function(i){i?this.Ff=pn(this.Ff,26):this.Ff=fn(this.Ff,26)}});var n,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(h){return h};if(this.scope&&(i=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var s,l=[];for(s in l.push("<<"),t)l.push("/"+s+" ("+fc(i(t[s]))+")");return l.push(">>"),l.join(`
`)}},set:function(i){ii(i)==="object"&&(t=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(i){typeof i=="string"&&(t.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}})};ea(Dn,Fo);var Nd=function(){Dn.call(this),this.pushButton=!0};ea(Nd,Dn);var du=function(){Dn.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t!==void 0?t:[]}})};ea(du,Dn);var Od=function(){var n,t;Fo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(l){n=l}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(l){t=l}});var i,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var l=function(o){return o};this.scope&&(l=this.scope.internal.getEncryptor(this.objId));var h,p=[];for(h in p.push("<<"),s)p.push("/"+h+" ("+fc(l(s[h]))+")");return p.push(">>"),p.join(`
`)},set:function(l){ii(l)==="object"&&(s=l)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(l){typeof l=="string"&&(s.CA=l)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return i},set:function(l){i=l}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return i.substr(1,i.length-1)},set:function(l){i="/"+l}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ar.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ea(Od,Fo),du.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var i=this.Kids[t];i.appearanceStreamContent=n.createAppearanceStream(i.optionName),i.caption=n.getCA()}},du.prototype.createOption=function(n){var t=new Od;return t.Parent=this,t.optionName=n,this.Kids.push(t),z4.call(this.scope,t),t};var Rd=function(){Dn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ar.CheckBox.createAppearanceStream()};ea(Rd,Dn);var gc=function(){Fo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,13)},set:function(t){t?this.Ff=pn(this.Ff,13):this.Ff=fn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,21)},set:function(t){t?this.Ff=pn(this.Ff,21):this.Ff=fn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,23)},set:function(t){t?this.Ff=pn(this.Ff,23):this.Ff=fn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,24)},set:function(t){t?this.Ff=pn(this.Ff,24):this.Ff=fn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,25)},set:function(t){t?this.Ff=pn(this.Ff,25):this.Ff=fn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,26)},set:function(t){t?this.Ff=pn(this.Ff,26):this.Ff=fn(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){Number.isInteger(t)&&(n=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ea(gc,Fo);var zd=function(){gc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!dn(this.Ff,14)},set:function(n){n?this.Ff=pn(this.Ff,14):this.Ff=fn(this.Ff,14)}}),this.password=!0};ea(zd,gc);var Ar={CheckBox:{createAppearanceStream:function(){return{N:{On:Ar.CheckBox.YesNormal},D:{On:Ar.CheckBox.YesPushDown,Off:Ar.CheckBox.OffPushDown}}},YesPushDown:function(n){var t=nA(n);t.scope=n.scope;var i=[],s=n.scope.internal.getFont(n.fontName,n.fontStyle).id,l=n.scope.__private__.encodeColorString(n.color),h=Tg(n,n.caption);return i.push("0.749023 g"),i.push("0 0 "+kr(Ar.internal.getWidth(n))+" "+kr(Ar.internal.getHeight(n))+" re"),i.push("f"),i.push("BMC"),i.push("q"),i.push("0 0 1 rg"),i.push("/"+s+" "+kr(h.fontSize)+" Tf "+l),i.push("BT"),i.push(h.text),i.push("ET"),i.push("Q"),i.push("EMC"),t.stream=i.join(`
`),t},YesNormal:function(n){var t=nA(n);t.scope=n.scope;var i=n.scope.internal.getFont(n.fontName,n.fontStyle).id,s=n.scope.__private__.encodeColorString(n.color),l=[],h=Ar.internal.getHeight(n),p=Ar.internal.getWidth(n),o=Tg(n,n.caption);return l.push("1 g"),l.push("0 0 "+kr(p)+" "+kr(h)+" re"),l.push("f"),l.push("q"),l.push("0 0 1 rg"),l.push("0 0 "+kr(p-1)+" "+kr(h-1)+" re"),l.push("W"),l.push("n"),l.push("0 g"),l.push("BT"),l.push("/"+i+" "+kr(o.fontSize)+" Tf "+s),l.push(o.text),l.push("ET"),l.push("Q"),t.stream=l.join(`
`),t},OffPushDown:function(n){var t=nA(n);t.scope=n.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+kr(Ar.internal.getWidth(n))+" "+kr(Ar.internal.getHeight(n))+" re"),i.push("f"),t.stream=i.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(n){var t={D:{Off:Ar.RadioButton.Circle.OffPushDown},N:{}};return t.N[n]=Ar.RadioButton.Circle.YesNormal,t.D[n]=Ar.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(n){var t=nA(n);t.scope=n.scope;var i=[],s=Ar.internal.getWidth(n)<=Ar.internal.getHeight(n)?Ar.internal.getWidth(n)/4:Ar.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var l=Ar.internal.Bezier_C,h=Number((s*l).toFixed(5));return i.push("q"),i.push("1 0 0 1 "+Sl(Ar.internal.getWidth(n)/2)+" "+Sl(Ar.internal.getHeight(n)/2)+" cm"),i.push(s+" 0 m"),i.push(s+" "+h+" "+h+" "+s+" 0 "+s+" c"),i.push("-"+h+" "+s+" -"+s+" "+h+" -"+s+" 0 c"),i.push("-"+s+" -"+h+" -"+h+" -"+s+" 0 -"+s+" c"),i.push(h+" -"+s+" "+s+" -"+h+" "+s+" 0 c"),i.push("f"),i.push("Q"),t.stream=i.join(`
`),t},YesPushDown:function(n){var t=nA(n);t.scope=n.scope;var i=[],s=Ar.internal.getWidth(n)<=Ar.internal.getHeight(n)?Ar.internal.getWidth(n)/4:Ar.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var l=Number((2*s).toFixed(5)),h=Number((l*Ar.internal.Bezier_C).toFixed(5)),p=Number((s*Ar.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+Sl(Ar.internal.getWidth(n)/2)+" "+Sl(Ar.internal.getHeight(n)/2)+" cm"),i.push(l+" 0 m"),i.push(l+" "+h+" "+h+" "+l+" 0 "+l+" c"),i.push("-"+h+" "+l+" -"+l+" "+h+" -"+l+" 0 c"),i.push("-"+l+" -"+h+" -"+h+" -"+l+" 0 -"+l+" c"),i.push(h+" -"+l+" "+l+" -"+h+" "+l+" 0 c"),i.push("f"),i.push("Q"),i.push("0 g"),i.push("q"),i.push("1 0 0 1 "+Sl(Ar.internal.getWidth(n)/2)+" "+Sl(Ar.internal.getHeight(n)/2)+" cm"),i.push(s+" 0 m"),i.push(s+" "+p+" "+p+" "+s+" 0 "+s+" c"),i.push("-"+p+" "+s+" -"+s+" "+p+" -"+s+" 0 c"),i.push("-"+s+" -"+p+" -"+p+" -"+s+" 0 -"+s+" c"),i.push(p+" -"+s+" "+s+" -"+p+" "+s+" 0 c"),i.push("f"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(n){var t=nA(n);t.scope=n.scope;var i=[],s=Ar.internal.getWidth(n)<=Ar.internal.getHeight(n)?Ar.internal.getWidth(n)/4:Ar.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var l=Number((2*s).toFixed(5)),h=Number((l*Ar.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+Sl(Ar.internal.getWidth(n)/2)+" "+Sl(Ar.internal.getHeight(n)/2)+" cm"),i.push(l+" 0 m"),i.push(l+" "+h+" "+h+" "+l+" 0 "+l+" c"),i.push("-"+h+" "+l+" -"+l+" "+h+" -"+l+" 0 c"),i.push("-"+l+" -"+h+" -"+h+" -"+l+" 0 -"+l+" c"),i.push(h+" -"+l+" "+l+" -"+h+" "+l+" 0 c"),i.push("f"),i.push("Q"),t.stream=i.join(`
`),t}},Cross:{createAppearanceStream:function(n){var t={D:{Off:Ar.RadioButton.Cross.OffPushDown},N:{}};return t.N[n]=Ar.RadioButton.Cross.YesNormal,t.D[n]=Ar.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(n){var t=nA(n);t.scope=n.scope;var i=[],s=Ar.internal.calculateCross(n);return i.push("q"),i.push("1 1 "+kr(Ar.internal.getWidth(n)-2)+" "+kr(Ar.internal.getHeight(n)-2)+" re"),i.push("W"),i.push("n"),i.push(kr(s.x1.x)+" "+kr(s.x1.y)+" m"),i.push(kr(s.x2.x)+" "+kr(s.x2.y)+" l"),i.push(kr(s.x4.x)+" "+kr(s.x4.y)+" m"),i.push(kr(s.x3.x)+" "+kr(s.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join(`
`),t},YesPushDown:function(n){var t=nA(n);t.scope=n.scope;var i=Ar.internal.calculateCross(n),s=[];return s.push("0.749023 g"),s.push("0 0 "+kr(Ar.internal.getWidth(n))+" "+kr(Ar.internal.getHeight(n))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+kr(Ar.internal.getWidth(n)-2)+" "+kr(Ar.internal.getHeight(n)-2)+" re"),s.push("W"),s.push("n"),s.push(kr(i.x1.x)+" "+kr(i.x1.y)+" m"),s.push(kr(i.x2.x)+" "+kr(i.x2.y)+" l"),s.push(kr(i.x4.x)+" "+kr(i.x4.y)+" m"),s.push(kr(i.x3.x)+" "+kr(i.x3.y)+" l"),s.push("s"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(n){var t=nA(n);t.scope=n.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+kr(Ar.internal.getWidth(n))+" "+kr(Ar.internal.getHeight(n))+" re"),i.push("f"),t.stream=i.join(`
`),t}}},createDefaultAppearanceStream:function(n){var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color);return"/"+t+" "+n.fontSize+" Tf "+i}};Ar.internal={Bezier_C:.551915024494,calculateCross:function(n){var t=Ar.internal.getWidth(n),i=Ar.internal.getHeight(n),s=Math.min(t,i);return{x1:{x:(t-s)/2,y:(i-s)/2+s},x2:{x:(t-s)/2+s,y:(i-s)/2},x3:{x:(t-s)/2,y:(i-s)/2},x4:{x:(t-s)/2+s,y:(i-s)/2+s}}}},Ar.internal.getWidth=function(n){var t=0;return ii(n)==="object"&&(t=cv(n.Rect[2])),t},Ar.internal.getHeight=function(n){var t=0;return ii(n)==="object"&&(t=cv(n.Rect[3])),t};var z4=sn.addField=function(n){if(R4(this,n),!(n instanceof Fo))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=n).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};sn.AcroFormChoiceField=cu,sn.AcroFormListBox=uu,sn.AcroFormComboBox=hu,sn.AcroFormEditBox=Dd,sn.AcroFormButton=Dn,sn.AcroFormPushButton=Nd,sn.AcroFormRadioButton=du,sn.AcroFormCheckBox=Rd,sn.AcroFormTextField=gc,sn.AcroFormPasswordField=zd,sn.AcroFormAppearance=Ar,sn.AcroForm={ChoiceField:cu,ListBox:uu,ComboBox:hu,EditBox:Dd,Button:Dn,PushButton:Nd,RadioButton:du,CheckBox:Rd,TextField:gc,PasswordField:zd,Appearance:Ar},Tr.AcroForm={ChoiceField:cu,ListBox:uu,ComboBox:hu,EditBox:Dd,Button:Dn,PushButton:Nd,RadioButton:du,CheckBox:Rd,TextField:gc,PasswordField:zd,Appearance:Ar};function pv(n){return n.reduce(function(t,i,s){return t[i]=s,t},{})}(function(n){n.__addimage__={};var t="UNKNOWN",i={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=n.__addimage__.getImageFileTypeByImageData=function(At,lt){var bt,wt,Xt,Gt,Yt,qt=t;if((lt=lt||t)==="RGBA"||At.data!==void 0&&At.data instanceof Uint8ClampedArray&&"height"in At&&"width"in At)return"RGBA";if(Lt(At))for(Yt in i)for(Xt=i[Yt],bt=0;bt<Xt.length;bt+=1){for(Gt=!0,wt=0;wt<Xt[bt].length;wt+=1)if(Xt[bt][wt]!==void 0&&Xt[bt][wt]!==At[wt]){Gt=!1;break}if(Gt===!0){qt=Yt;break}}else for(Yt in i)for(Xt=i[Yt],bt=0;bt<Xt.length;bt+=1){for(Gt=!0,wt=0;wt<Xt[bt].length;wt+=1)if(Xt[bt][wt]!==void 0&&Xt[bt][wt]!==At.charCodeAt(wt)){Gt=!1;break}if(Gt===!0){qt=Yt;break}}return qt===t&&lt!==t&&(qt=lt),qt},l=function At(lt){for(var bt=this.internal.write,wt=this.internal.putStream,Xt=(0,this.internal.getFilters)();Xt.indexOf("FlateEncode")!==-1;)Xt.splice(Xt.indexOf("FlateEncode"),1);lt.objectId=this.internal.newObject();var Gt=[];if(Gt.push({key:"Type",value:"/XObject"}),Gt.push({key:"Subtype",value:"/Image"}),Gt.push({key:"Width",value:lt.width}),Gt.push({key:"Height",value:lt.height}),lt.colorSpace===Y.INDEXED?Gt.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(lt.palette.length/3-1)+" "+("sMask"in lt&&lt.sMask!==void 0?lt.objectId+2:lt.objectId+1)+" 0 R]"}):(Gt.push({key:"ColorSpace",value:"/"+lt.colorSpace}),lt.colorSpace===Y.DEVICE_CMYK&&Gt.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Gt.push({key:"BitsPerComponent",value:lt.bitsPerComponent}),"decodeParameters"in lt&&lt.decodeParameters!==void 0&&Gt.push({key:"DecodeParms",value:"<<"+lt.decodeParameters+">>"}),"transparency"in lt&&Array.isArray(lt.transparency)){for(var Yt="",qt=0,te=lt.transparency.length;qt<te;qt++)Yt+=lt.transparency[qt]+" "+lt.transparency[qt]+" ";Gt.push({key:"Mask",value:"["+Yt+"]"})}lt.sMask!==void 0&&Gt.push({key:"SMask",value:lt.objectId+1+" 0 R"});var Jt=lt.filter!==void 0?["/"+lt.filter]:void 0;if(wt({data:lt.data,additionalKeyValues:Gt,alreadyAppliedFilters:Jt,objectId:lt.objectId}),bt("endobj"),"sMask"in lt&&lt.sMask!==void 0){var me="/Predictor "+lt.predictor+" /Colors 1 /BitsPerComponent "+lt.bitsPerComponent+" /Columns "+lt.width,rt={width:lt.width,height:lt.height,colorSpace:"DeviceGray",bitsPerComponent:lt.bitsPerComponent,decodeParameters:me,data:lt.sMask};"filter"in lt&&(rt.filter=lt.filter),At.call(this,rt)}if(lt.colorSpace===Y.INDEXED){var dt=this.internal.newObject();wt({data:yt(new Uint8Array(lt.palette)),objectId:dt}),bt("endobj")}},h=function(){var At=this.internal.collections.addImage_images;for(var lt in At)l.call(this,At[lt])},p=function(){var At,lt=this.internal.collections.addImage_images,bt=this.internal.write;for(var wt in lt)bt("/I"+(At=lt[wt]).index,At.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",h),this.internal.events.subscribe("putXobjectDict",p))},v=function(){var At=this.internal.collections.addImage_images;return o.call(this),At},C=function(){return Object.keys(this.internal.collections.addImage_images).length},I=function(At){return typeof n["process"+At.toUpperCase()]=="function"},U=function(At){return ii(At)==="object"&&At.nodeType===1},Q=function(At,lt){if(At.nodeName==="IMG"&&At.hasAttribute("src")){var bt=""+At.getAttribute("src");if(bt.indexOf("data:image/")===0)return fh(unescape(bt).split("base64,").pop());var wt=n.loadFile(bt,!0);if(wt!==void 0)return wt}if(At.nodeName==="CANVAS"){if(At.width===0||At.height===0)throw new Error("Given canvas must have data. Canvas width: "+At.width+", height: "+At.height);var Xt;switch(lt){case"PNG":Xt="image/png";break;case"WEBP":Xt="image/webp";break;case"JPEG":case"JPG":default:Xt="image/jpeg"}return fh(At.toDataURL(Xt,1).split("base64,").pop())}},P=function(At){var lt=this.internal.collections.addImage_images;if(lt){for(var bt in lt)if(At===lt[bt].alias)return lt[bt]}},K=function(At,lt,bt){return At||lt||(At=-96,lt=-96),At<0&&(At=-1*bt.width*72/At/this.internal.scaleFactor),lt<0&&(lt=-1*bt.height*72/lt/this.internal.scaleFactor),At===0&&(At=lt*bt.width/bt.height),lt===0&&(lt=At*bt.height/bt.width),[At,lt]},V=function(At,lt,bt,wt,Xt,Gt){var Yt=K.call(this,bt,wt,Xt),qt=this.internal.getCoordinateString,te=this.internal.getVerticalCoordinateString,Jt=v.call(this);if(bt=Yt[0],wt=Yt[1],Jt[Xt.index]=Xt,Gt){Gt*=Math.PI/180;var me=Math.cos(Gt),rt=Math.sin(Gt),dt=function(Et){return Et.toFixed(4)},Bt=[dt(me),dt(rt),dt(-1*rt),dt(me),0,0,"cm"]}this.internal.write("q"),Gt?(this.internal.write([1,"0","0",1,qt(At),te(lt+wt),"cm"].join(" ")),this.internal.write(Bt.join(" ")),this.internal.write([qt(bt),"0","0",qt(wt),"0","0","cm"].join(" "))):this.internal.write([qt(bt),"0","0",qt(wt),qt(At),te(lt+wt),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Xt.index+" Do"),this.internal.write("Q")},Y=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var $=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},it=n.__addimage__.sHashCode=function(At){var lt,bt,wt=0;if(typeof At=="string")for(bt=At.length,lt=0;lt<bt;lt++)wt=(wt<<5)-wt+At.charCodeAt(lt),wt|=0;else if(Lt(At))for(bt=At.byteLength/2,lt=0;lt<bt;lt++)wt=(wt<<5)-wt+At[lt],wt|=0;return wt},ht=n.__addimage__.validateStringAsBase64=function(At){(At=At||"").toString().trim();var lt=!0;return At.length===0&&(lt=!1),At.length%4!=0&&(lt=!1),/^[A-Za-z0-9+/]+$/.test(At.substr(0,At.length-2))===!1&&(lt=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(At.substr(-2))===!1&&(lt=!1),lt},St=n.__addimage__.extractImageFromDataUrl=function(At){var lt=(At=At||"").split("base64,"),bt=null;if(lt.length===2){var wt=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(lt[0]);Array.isArray(wt)&&(bt={mimeType:wt[1],charset:wt[2],data:lt[1]})}return bt},Tt=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(At){return Tt()&&At instanceof ArrayBuffer};var Lt=n.__addimage__.isArrayBufferView=function(At){return Tt()&&typeof Uint32Array<"u"&&(At instanceof Int8Array||At instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&At instanceof Uint8ClampedArray||At instanceof Int16Array||At instanceof Uint16Array||At instanceof Int32Array||At instanceof Uint32Array||At instanceof Float32Array||At instanceof Float64Array)},Ft=n.__addimage__.binaryStringToUint8Array=function(At){for(var lt=At.length,bt=new Uint8Array(lt),wt=0;wt<lt;wt++)bt[wt]=At.charCodeAt(wt);return bt},yt=n.__addimage__.arrayBufferToBinaryString=function(At){for(var lt="",bt=Lt(At)?At:new Uint8Array(At),wt=0;wt<bt.length;wt+=8192)lt+=String.fromCharCode.apply(null,bt.subarray(wt,wt+8192));return lt};n.addImage=function(){var At,lt,bt,wt,Xt,Gt,Yt,qt,te;if(typeof arguments[1]=="number"?(lt=t,bt=arguments[1],wt=arguments[2],Xt=arguments[3],Gt=arguments[4],Yt=arguments[5],qt=arguments[6],te=arguments[7]):(lt=arguments[1],bt=arguments[2],wt=arguments[3],Xt=arguments[4],Gt=arguments[5],Yt=arguments[6],qt=arguments[7],te=arguments[8]),ii(At=arguments[0])==="object"&&!U(At)&&"imageData"in At){var Jt=At;At=Jt.imageData,lt=Jt.format||lt||t,bt=Jt.x||bt||0,wt=Jt.y||wt||0,Xt=Jt.w||Jt.width||Xt,Gt=Jt.h||Jt.height||Gt,Yt=Jt.alias||Yt,qt=Jt.compression||qt,te=Jt.rotation||Jt.angle||te}var me=this.internal.getFilters();if(qt===void 0&&me.indexOf("FlateEncode")!==-1&&(qt="SLOW"),isNaN(bt)||isNaN(wt))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var rt=Rt.call(this,At,lt,Yt,qt);return V.call(this,bt,wt,Xt,Gt,rt,te),this};var Rt=function(At,lt,bt,wt){var Xt,Gt,Yt;if(typeof At=="string"&&s(At)===t){At=unescape(At);var qt=Wt(At,!1);(qt!==""||(qt=n.loadFile(At,!0))!==void 0)&&(At=qt)}if(U(At)&&(At=Q(At,lt)),lt=s(At,lt),!I(lt))throw new Error("addImage does not support files of type '"+lt+"', please ensure that a plugin for '"+lt+"' support is added.");if(((Yt=bt)==null||Yt.length===0)&&(bt=function(te){return typeof te=="string"||Lt(te)?it(te):Lt(te.data)?it(te.data):null}(At)),(Xt=P.call(this,bt))||(Tt()&&(At instanceof Uint8Array||lt==="RGBA"||(Gt=At,At=Ft(At))),Xt=this["process"+lt.toUpperCase()](At,C.call(this),bt,function(te){return te&&typeof te=="string"&&(te=te.toUpperCase()),te in n.image_compression?te:$.NONE}(wt),Gt)),!Xt)throw new Error("An unknown error occurred whilst processing the image.");return Xt},Wt=n.__addimage__.convertBase64ToBinaryString=function(At,lt){var bt;lt=typeof lt!="boolean"||lt;var wt,Xt="";if(typeof At=="string"){wt=(bt=St(At))!==null?bt.data:At;try{Xt=fh(wt)}catch(Gt){if(lt)throw ht(wt)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Gt.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Xt};n.getImageProperties=function(At){var lt,bt,wt="";if(U(At)&&(At=Q(At)),typeof At=="string"&&s(At)===t&&((wt=Wt(At,!1))===""&&(wt=n.loadFile(At)||""),At=wt),bt=s(At),!I(bt))throw new Error("addImage does not support files of type '"+bt+"', please ensure that a plugin for '"+bt+"' support is added.");if(!Tt()||At instanceof Uint8Array||(At=Ft(At)),!(lt=this["process"+bt.toUpperCase()](At)))throw new Error("An unknown error occurred whilst processing the image");return lt.fileType=bt,lt}})(Tr.API),function(n){var t=function(i){if(i!==void 0&&i!="")return!0};Tr.API.events.push(["addPage",function(i){this.internal.getPageInfo(i.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(i){for(var s,l,h,p=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,v=this.internal.getPageInfoByObjId(i.objId),C=i.pageContext.annotations,I=!1,U=0;U<C.length&&!I;U++)switch((s=C[U]).type){case"link":(t(s.options.url)||t(s.options.pageNumber))&&(I=!0);break;case"reference":case"text":case"freetext":I=!0}if(I!=0){this.internal.write("/Annots [");for(var Q=0;Q<C.length;Q++){s=C[Q];var P=this.internal.pdfEscape,K=this.internal.getEncryptor(i.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var V=this.internal.newAdditionalObject(),Y=this.internal.newAdditionalObject(),$=this.internal.getEncryptor(V.objId),it=s.title||"Note";h="<</Type /Annot /Subtype /Text "+(l="/Rect ["+p(s.bounds.x)+" "+o(s.bounds.y+s.bounds.h)+" "+p(s.bounds.x+s.bounds.w)+" "+o(s.bounds.y)+"] ")+"/Contents ("+P($(s.contents))+")",h+=" /Popup "+Y.objId+" 0 R",h+=" /P "+v.objId+" 0 R",h+=" /T ("+P($(it))+") >>",V.content=h;var ht=V.objId+" 0 R";h="<</Type /Annot /Subtype /Popup "+(l="/Rect ["+p(s.bounds.x+30)+" "+o(s.bounds.y+s.bounds.h)+" "+p(s.bounds.x+s.bounds.w+30)+" "+o(s.bounds.y)+"] ")+" /Parent "+ht,s.open&&(h+=" /Open true"),h+=" >>",Y.content=h,this.internal.write(V.objId,"0 R",Y.objId,"0 R");break;case"freetext":l="/Rect ["+p(s.bounds.x)+" "+o(s.bounds.y)+" "+p(s.bounds.x+s.bounds.w)+" "+o(s.bounds.y+s.bounds.h)+"] ";var St=s.color||"#000000";h="<</Type /Annot /Subtype /FreeText "+l+"/Contents ("+P(K(s.contents))+")",h+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+St+")",h+=" /Border [0 0 0]",h+=" >>",this.internal.write(h);break;case"link":if(s.options.name){var Tt=this.annotations._nameMap[s.options.name];s.options.pageNumber=Tt.page,s.options.top=Tt.y}else s.options.top||(s.options.top=0);if(l="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",h="",s.options.url)h="<</Type /Annot /Subtype /Link "+l+"/Border [0 0 0] /A <</S /URI /URI ("+P(K(s.options.url))+") >>";else if(s.options.pageNumber)switch(h="<</Type /Annot /Subtype /Link "+l+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":h+=" /Fit]";break;case"FitH":h+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,h+=" /FitV "+s.options.left+"]";break;case"XYZ":default:var Lt=o(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),h+=" /XYZ "+s.options.left+" "+Lt+" "+s.options.zoom+"]"}h!=""&&(h+=" >>",this.internal.write(h))}}this.internal.write("]")}}]),n.createAnnotation=function(i){var s=this.internal.getCurrentPageInfo();switch(i.type){case"link":this.link(i.bounds.x,i.bounds.y,i.bounds.w,i.bounds.h,i);break;case"text":case"freetext":s.pageContext.annotations.push(i)}},n.link=function(i,s,l,h,p){var o=this.internal.getCurrentPageInfo(),v=this.internal.getCoordinateString,C=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:v(i),y:C(s),w:v(i+l),h:C(s+h)},options:p,type:"link"})},n.textWithLink=function(i,s,l,h){var p,o,v=this.getTextWidth(i),C=this.internal.getLineHeight()/this.internal.scaleFactor;if(h.maxWidth!==void 0){o=h.maxWidth;var I=this.splitTextToSize(i,o).length;p=Math.ceil(C*I)}else o=v,p=C;return this.text(i,s,l,h),l+=.2*C,h.align==="center"&&(s-=v/2),h.align==="right"&&(s-=v),this.link(s,l-C,o,p,h),v},n.getTextWidth=function(i){var s=this.internal.getFontSize();return this.getStringUnitWidth(i)*s/this.internal.scaleFactor}}(Tr.API),function(n){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},i={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},l=[1570,1571,1573,1575];n.__arabicParser__={};var h=n.__arabicParser__.isInArabicSubstitutionA=function(V){return t[V.charCodeAt(0)]!==void 0},p=n.__arabicParser__.isArabicLetter=function(V){return typeof V=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(V)},o=n.__arabicParser__.isArabicEndLetter=function(V){return p(V)&&h(V)&&t[V.charCodeAt(0)].length<=2},v=n.__arabicParser__.isArabicAlfLetter=function(V){return p(V)&&l.indexOf(V.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(V){return p(V)&&h(V)&&t[V.charCodeAt(0)].length>=1};var C=n.__arabicParser__.arabicLetterHasFinalForm=function(V){return p(V)&&h(V)&&t[V.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(V){return p(V)&&h(V)&&t[V.charCodeAt(0)].length>=3};var I=n.__arabicParser__.arabicLetterHasMedialForm=function(V){return p(V)&&h(V)&&t[V.charCodeAt(0)].length==4},U=n.__arabicParser__.resolveLigatures=function(V){var Y=0,$=i,it="",ht=0;for(Y=0;Y<V.length;Y+=1)$[V.charCodeAt(Y)]!==void 0?(ht++,typeof($=$[V.charCodeAt(Y)])=="number"&&(it+=String.fromCharCode($),$=i,ht=0),Y===V.length-1&&($=i,it+=V.charAt(Y-(ht-1)),Y-=ht-1,ht=0)):($=i,it+=V.charAt(Y-ht),Y-=ht,ht=0);return it};n.__arabicParser__.isArabicDiacritic=function(V){return V!==void 0&&s[V.charCodeAt(0)]!==void 0};var Q=n.__arabicParser__.getCorrectForm=function(V,Y,$){return p(V)?h(V)===!1?-1:!C(V)||!p(Y)&&!p($)||!p($)&&o(Y)||o(V)&&!p(Y)||o(V)&&v(Y)||o(V)&&o(Y)?0:I(V)&&p(Y)&&!o(Y)&&p($)&&C($)?3:o(V)||!p($)?1:2:-1},P=function(V){var Y=0,$=0,it=0,ht="",St="",Tt="",Lt=(V=V||"").split("\\s+"),Ft=[];for(Y=0;Y<Lt.length;Y+=1){for(Ft.push(""),$=0;$<Lt[Y].length;$+=1)ht=Lt[Y][$],St=Lt[Y][$-1],Tt=Lt[Y][$+1],p(ht)?(it=Q(ht,St,Tt),Ft[Y]+=it!==-1?String.fromCharCode(t[ht.charCodeAt(0)][it]):ht):Ft[Y]+=ht;Ft[Y]=U(Ft[Y])}return Ft.join(" ")},K=n.__arabicParser__.processArabic=n.processArabic=function(){var V,Y=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,$=[];if(Array.isArray(Y)){var it=0;for($=[],it=0;it<Y.length;it+=1)Array.isArray(Y[it])?$.push([P(Y[it][0]),Y[it][1],Y[it][2]]):$.push([P(Y[it])]);V=$}else V=P(Y);return typeof arguments[0]=="string"?V:(arguments[0].text=V,arguments[0])};n.events.push(["preProcessText",K])}(Tr.API),Tr.API.autoPrint=function(n){var t;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(n){var t=function(){var i=void 0;Object.defineProperty(this,"pdf",{get:function(){return i},set:function(o){i=o}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var l=300;Object.defineProperty(this,"height",{get:function(){return l},set:function(o){l=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=l+1)}});var h=[];Object.defineProperty(this,"childNodes",{get:function(){return h},set:function(o){h=o}});var p={};Object.defineProperty(this,"style",{get:function(){return p},set:function(o){p=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(i,s){var l;if((i=i||"2d")!=="2d")return null;for(l in s)this.pdf.context2d.hasOwnProperty(l)&&(this.pdf.context2d[l]=s[l]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Tr.API),function(n){var t={left:0,top:0,bottom:0,right:0},i=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),l.call(this))},l=function(){this.internal.__cell__.lastCell=new h,this.internal.__cell__.pages=1},h=function(){var v=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return v},set:function(V){v=V}});var C=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return C},set:function(V){C=V}});var I=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return I},set:function(V){I=V}});var U=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return U},set:function(V){U=V}});var Q=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return Q},set:function(V){Q=V}});var P=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return P},set:function(V){P=V}});var K=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return K},set:function(V){K=V}}),this};h.prototype.clone=function(){return new h(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},h.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(v){return s.call(this),this.internal.__cell__.headerFunction=typeof v=="function"?v:void 0,this},n.getTextDimensions=function(v,C){s.call(this);var I=(C=C||{}).fontSize||this.getFontSize(),U=C.font||this.getFont(),Q=C.scaleFactor||this.internal.scaleFactor,P=0,K=0,V=0,Y=this;if(!Array.isArray(v)&&typeof v!="string"){if(typeof v!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");v=String(v)}var $=C.maxWidth;$>0?typeof v=="string"?v=this.splitTextToSize(v,$):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(ht,St){return ht.concat(Y.splitTextToSize(St,$))},[])):v=Array.isArray(v)?v:[v];for(var it=0;it<v.length;it++)P<(V=this.getStringUnitWidth(v[it],{font:U})*I)&&(P=V);return P!==0&&(K=v.length),{w:P/=Q,h:Math.max((K*I*this.getLineHeightFactor()-I*(this.getLineHeightFactor()-1))/Q,0)}},n.cellAddPage=function(){s.call(this),this.addPage();var v=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new h(v.left,v.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var p=n.cell=function(){var v;v=arguments[0]instanceof h?arguments[0]:new h(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),s.call(this);var C=this.internal.__cell__.lastCell,I=this.internal.__cell__.padding,U=this.internal.__cell__.margins||t,Q=this.internal.__cell__.tableHeaderRow,P=this.internal.__cell__.printHeaders;return C.lineNumber!==void 0&&(C.lineNumber===v.lineNumber?(v.x=(C.x||0)+(C.width||0),v.y=C.y||0):C.y+C.height+v.height+U.bottom>this.getPageHeight()?(this.cellAddPage(),v.y=U.top,P&&Q&&(this.printHeaderRow(v.lineNumber,!0),v.y+=Q[0].height)):v.y=C.y+C.height||v.y),v.text[0]!==void 0&&(this.rect(v.x,v.y,v.width,v.height,i===!0?"FD":void 0),v.align==="right"?this.text(v.text,v.x+v.width-I,v.y+I,{align:"right",baseline:"top"}):v.align==="center"?this.text(v.text,v.x+v.width/2,v.y+I,{align:"center",baseline:"top",maxWidth:v.width-I-I}):this.text(v.text,v.x+I,v.y+I,{align:"left",baseline:"top",maxWidth:v.width-I-I})),this.internal.__cell__.lastCell=v,this};n.table=function(v,C,I,U,Q){if(s.call(this),!I)throw new Error("No data for PDF table.");var P,K,V,Y,$=[],it=[],ht=[],St={},Tt={},Lt=[],Ft=[],yt=(Q=Q||{}).autoSize||!1,Rt=Q.printHeaders!==!1,Wt=Q.css&&Q.css["font-size"]!==void 0?16*Q.css["font-size"]:Q.fontSize||12,At=Q.margins||Object.assign({width:this.getPageWidth()},t),lt=typeof Q.padding=="number"?Q.padding:3,bt=Q.headerBackgroundColor||"#c8c8c8",wt=Q.headerTextColor||"#000";if(l.call(this),this.internal.__cell__.printHeaders=Rt,this.internal.__cell__.margins=At,this.internal.__cell__.table_font_size=Wt,this.internal.__cell__.padding=lt,this.internal.__cell__.headerBackgroundColor=bt,this.internal.__cell__.headerTextColor=wt,this.setFontSize(Wt),U==null)it=$=Object.keys(I[0]),ht=$.map(function(){return"left"});else if(Array.isArray(U)&&ii(U[0])==="object")for($=U.map(function(Jt){return Jt.name}),it=U.map(function(Jt){return Jt.prompt||Jt.name||""}),ht=U.map(function(Jt){return Jt.align||"left"}),P=0;P<U.length;P+=1)Tt[U[P].name]=U[P].width*(19.049976/25.4);else Array.isArray(U)&&typeof U[0]=="string"&&(it=$=U,ht=$.map(function(){return"left"}));if(yt||Array.isArray(U)&&typeof U[0]=="string")for(P=0;P<$.length;P+=1){for(St[Y=$[P]]=I.map(function(Jt){return Jt[Y]}),this.setFont(void 0,"bold"),Lt.push(this.getTextDimensions(it[P],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),K=St[Y],this.setFont(void 0,"normal"),V=0;V<K.length;V+=1)Lt.push(this.getTextDimensions(K[V],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Tt[Y]=Math.max.apply(null,Lt)+lt+lt,Lt=[]}if(Rt){var Xt={};for(P=0;P<$.length;P+=1)Xt[$[P]]={},Xt[$[P]].text=it[P],Xt[$[P]].align=ht[P];var Gt=o.call(this,Xt,Tt);Ft=$.map(function(Jt){return new h(v,C,Tt[Jt],Gt,Xt[Jt].text,void 0,Xt[Jt].align)}),this.setTableHeaderRow(Ft),this.printHeaderRow(1,!1)}var Yt=U.reduce(function(Jt,me){return Jt[me.name]=me.align,Jt},{});for(P=0;P<I.length;P+=1){"rowStart"in Q&&Q.rowStart instanceof Function&&Q.rowStart({row:P,data:I[P]},this);var qt=o.call(this,I[P],Tt);for(V=0;V<$.length;V+=1){var te=I[P][$[V]];"cellStart"in Q&&Q.cellStart instanceof Function&&Q.cellStart({row:P,col:V,data:te},this),p.call(this,new h(v,C,Tt[$[V]],qt,te,P+2,Yt[$[V]]))}}return this.internal.__cell__.table_x=v,this.internal.__cell__.table_y=C,this};var o=function(v,C){var I=this.internal.__cell__.padding,U=this.internal.__cell__.table_font_size,Q=this.internal.scaleFactor;return Object.keys(v).map(function(P){var K=v[P];return this.splitTextToSize(K.hasOwnProperty("text")?K.text:K,C[P]-I-I)},this).map(function(P){return this.getLineHeightFactor()*P.length*U/Q+I+I},this).reduce(function(P,K){return Math.max(P,K)},0)};n.setTableHeaderRow=function(v){s.call(this),this.internal.__cell__.tableHeaderRow=v},n.printHeaderRow=function(v,C){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var I;if(i=!0,typeof this.internal.__cell__.headerFunction=="function"){var U=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new h(U[0],U[1],U[2],U[3],void 0,-1)}this.setFont(void 0,"bold");for(var Q=[],P=0;P<this.internal.__cell__.tableHeaderRow.length;P+=1){I=this.internal.__cell__.tableHeaderRow[P].clone(),C&&(I.y=this.internal.__cell__.margins.top||0,Q.push(I)),I.lineNumber=v;var K=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),p.call(this,I),this.setTextColor(K)}Q.length>0&&this.setTableHeaderRow(Q),this.setFont(void 0,"normal"),i=!1}}(Tr.API);var fv={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},gv=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Pg=pv(gv),mv=[100,200,300,400,500,600,700,800,900],H4=pv(mv);function Lg(n){var t=n.family.replace(/"|'/g,"").toLowerCase(),i=function(h){return fv[h=h||"normal"]?h:"normal"}(n.style),s=function(h){if(!h)return 400;if(typeof h=="number")return h>=100&&h<=900&&h%100==0?h:400;if(/^\d00$/.test(h))return parseInt(h);switch(h){case"bold":return 700;case"normal":default:return 400}}(n.weight),l=function(h){return typeof Pg[h=h||"normal"]=="number"?h:"normal"}(n.stretch);return{family:t,style:i,weight:s,stretch:l,src:n.src||[],ref:n.ref||{name:t,style:[l,i,s].join(" ")}}}function yv(n,t,i,s){var l;for(l=i;l>=0&&l<t.length;l+=s)if(n[t[l]])return n[t[l]];for(l=i;l>=0&&l<t.length;l-=s)if(n[t[l]])return n[t[l]]}var V4={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},vv={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function wv(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function j4(n,t,i){for(var s=(i=i||{}).defaultFontFamily||"times",l=Object.assign({},V4,i.genericFontFamilies||{}),h=null,p=null,o=0;o<t.length;++o)if(l[(h=Lg(t[o])).family]&&(h.family=l[h.family]),n.hasOwnProperty(h.family)){p=n[h.family];break}if(!(p=p||n[s]))throw new Error("Could not find a font-family for the rule '"+wv(h)+"' and default family '"+s+"'.");if(p=function(v,C){if(C[v])return C[v];var I=Pg[v],U=I<=Pg.normal?-1:1,Q=yv(C,gv,I,U);if(!Q)throw new Error("Could not find a matching font-stretch value for "+v);return Q}(h.stretch,p),p=function(v,C){if(C[v])return C[v];for(var I=fv[v],U=0;U<I.length;++U)if(C[I[U]])return C[I[U]];throw new Error("Could not find a matching font-style for "+v)}(h.style,p),!(p=function(v,C){if(C[v])return C[v];if(v===400&&C[500])return C[500];if(v===500&&C[400])return C[400];var I=H4[v],U=yv(C,mv,I,v<400?-1:1);if(!U)throw new Error("Could not find a matching font-weight for value "+v);return U}(h.weight,p)))throw new Error("Failed to resolve a font for the rule '"+wv(h)+"'.");return p}function _v(n){return n.trimLeft()}function K4(n,t){for(var i=0;i<n.length;){if(n.charAt(i)===t)return[n.substring(0,i),n.substring(i+1)];i+=1}return null}function $4(n){var t=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],n.substring(t[0].length)]}var Hd,bv,xv,Bv=["times"];(function(n){var t,i,s,l,h,p,o,v,C,I=function(rt){return rt=rt||{},this.isStrokeTransparent=rt.isStrokeTransparent||!1,this.strokeOpacity=rt.strokeOpacity||1,this.strokeStyle=rt.strokeStyle||"#000000",this.fillStyle=rt.fillStyle||"#000000",this.isFillTransparent=rt.isFillTransparent||!1,this.fillOpacity=rt.fillOpacity||1,this.font=rt.font||"10px sans-serif",this.textBaseline=rt.textBaseline||"alphabetic",this.textAlign=rt.textAlign||"left",this.lineWidth=rt.lineWidth||1,this.lineJoin=rt.lineJoin||"miter",this.lineCap=rt.lineCap||"butt",this.path=rt.path||[],this.transform=rt.transform!==void 0?rt.transform.clone():new v,this.globalCompositeOperation=rt.globalCompositeOperation||"normal",this.globalAlpha=rt.globalAlpha||1,this.clip_path=rt.clip_path||[],this.currentPoint=rt.currentPoint||new p,this.miterLimit=rt.miterLimit||10,this.lastPoint=rt.lastPoint||new p,this.lineDashOffset=rt.lineDashOffset||0,this.lineDash=rt.lineDash||[],this.margin=rt.margin||[0,0,0,0],this.prevPageLastElemOffset=rt.prevPageLastElemOffset||0,this.ignoreClearRect=typeof rt.ignoreClearRect!="boolean"||rt.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new U(this),t=this.internal.f2,i=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,l=this.internal.getHorizontalCoordinate,h=this.internal.getVerticalCoordinate,p=this.internal.Point,o=this.internal.Rectangle,v=this.internal.Matrix,C=new I}]);var U=function(rt){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var dt=rt;Object.defineProperty(this,"pdf",{get:function(){return dt}});var Bt=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Bt},set:function(le){Bt=!!le}});var Et=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Et},set:function(le){Et=!!le}});var Nt=0;Object.defineProperty(this,"posX",{get:function(){return Nt},set:function(le){isNaN(le)||(Nt=le)}});var Ht=0;Object.defineProperty(this,"posY",{get:function(){return Ht},set:function(le){isNaN(le)||(Ht=le)}}),Object.defineProperty(this,"margin",{get:function(){return C.margin},set:function(le){var nt;typeof le=="number"?nt=[le,le,le,le]:((nt=new Array(4))[0]=le[0],nt[1]=le.length>=2?le[1]:nt[0],nt[2]=le.length>=3?le[2]:nt[0],nt[3]=le.length>=4?le[3]:nt[1]),C.margin=nt}});var ie=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ie},set:function(le){ie=le}});var se=0;Object.defineProperty(this,"lastBreak",{get:function(){return se},set:function(le){se=le}});var Ce=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ce},set:function(le){Ce=le}}),Object.defineProperty(this,"ctx",{get:function(){return C},set:function(le){le instanceof I&&(C=le)}}),Object.defineProperty(this,"path",{get:function(){return C.path},set:function(le){C.path=le}});var be=[];Object.defineProperty(this,"ctxStack",{get:function(){return be},set:function(le){be=le}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(le){var nt;nt=Q(le),this.ctx.fillStyle=nt.style,this.ctx.isFillTransparent=nt.a===0,this.ctx.fillOpacity=nt.a,this.pdf.setFillColor(nt.r,nt.g,nt.b,{a:nt.a}),this.pdf.setTextColor(nt.r,nt.g,nt.b,{a:nt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(le){var nt=Q(le);this.ctx.strokeStyle=nt.style,this.ctx.isStrokeTransparent=nt.a===0,this.ctx.strokeOpacity=nt.a,nt.a===0?this.pdf.setDrawColor(255,255,255):(nt.a,this.pdf.setDrawColor(nt.r,nt.g,nt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(le){["butt","round","square"].indexOf(le)!==-1&&(this.ctx.lineCap=le,this.pdf.setLineCap(le))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(le){isNaN(le)||(this.ctx.lineWidth=le,this.pdf.setLineWidth(le))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(le){["bevel","round","miter"].indexOf(le)!==-1&&(this.ctx.lineJoin=le,this.pdf.setLineJoin(le))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(le){isNaN(le)||(this.ctx.miterLimit=le,this.pdf.setMiterLimit(le))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(le){this.ctx.textBaseline=le}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(le){["right","end","center","left","start"].indexOf(le)!==-1&&(this.ctx.textAlign=le)}});var Te=null;function Le(le,nt){if(Te===null){var dr=function($e){var ce=[];return Object.keys($e).forEach(function(ge){$e[ge].forEach(function(Se){var Ie=null;switch(Se){case"bold":Ie={family:ge,weight:"bold"};break;case"italic":Ie={family:ge,style:"italic"};break;case"bolditalic":Ie={family:ge,weight:"bold",style:"italic"};break;case"":case"normal":Ie={family:ge}}Ie!==null&&(Ie.ref={name:ge,style:Se},ce.push(Ie))})}),ce}(le.getFontList());Te=function($e){for(var ce={},ge=0;ge<$e.length;++ge){var Se=Lg($e[ge]),Ie=Se.family,Ge=Se.stretch,Ze=Se.style,pr=Se.weight;ce[Ie]=ce[Ie]||{},ce[Ie][Ge]=ce[Ie][Ge]||{},ce[Ie][Ge][Ze]=ce[Ie][Ge][Ze]||{},ce[Ie][Ge][Ze][pr]=Se}return ce}(dr.concat(nt))}return Te}var Qe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Qe},set:function(le){Te=null,Qe=le}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(le){var nt;if(this.ctx.font=le,(nt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(le))!==null){var dr=nt[1],$e=(nt[2],nt[3]),ce=nt[4],ge=(nt[5],nt[6]),Se=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ce)[2];ce=Math.floor(Se==="px"?parseFloat(ce)*this.pdf.internal.scaleFactor:Se==="em"?parseFloat(ce)*this.pdf.getFontSize():parseFloat(ce)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ce);var Ie=function(Xe){var ur,Ue,Jr=[],he=Xe.trim();if(he==="")return Bv;if(he in vv)return[vv[he]];for(;he!=="";){switch(Ue=null,ur=(he=_v(he)).charAt(0)){case'"':case"'":Ue=K4(he.substring(1),ur);break;default:Ue=$4(he)}if(Ue===null||(Jr.push(Ue[0]),(he=_v(Ue[1]))!==""&&he.charAt(0)!==","))return Bv;he=he.replace(/^,/,"")}return Jr}(ge);if(this.fontFaces){var Ge=j4(Le(this.pdf,this.fontFaces),Ie.map(function(Xe){return{family:Xe,stretch:"normal",weight:$e,style:dr}}));this.pdf.setFont(Ge.ref.name,Ge.ref.style)}else{var Ze="";($e==="bold"||parseInt($e,10)>=700||dr==="bold")&&(Ze="bold"),dr==="italic"&&(Ze+="italic"),Ze.length===0&&(Ze="normal");for(var pr="",wr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Sr=0;Sr<Ie.length;Sr++){if(this.pdf.internal.getFont(Ie[Sr],Ze,{noFallback:!0,disableWarning:!0})!==void 0){pr=Ie[Sr];break}if(Ze==="bolditalic"&&this.pdf.internal.getFont(Ie[Sr],"bold",{noFallback:!0,disableWarning:!0})!==void 0)pr=Ie[Sr],Ze="bold";else if(this.pdf.internal.getFont(Ie[Sr],"normal",{noFallback:!0,disableWarning:!0})!==void 0){pr=Ie[Sr],Ze="normal";break}}if(pr===""){for(var pe=0;pe<Ie.length;pe++)if(wr[Ie[pe]]){pr=wr[Ie[pe]];break}}pr=pr===""?"Times":pr,this.pdf.setFont(pr,Ze)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(le){this.ctx.globalCompositeOperation=le}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(le){this.ctx.globalAlpha=le}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(le){this.ctx.lineDashOffset=le,me.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(le){this.ctx.lineDash=le,me.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(le){this.ctx.ignoreClearRect=!!le}})};U.prototype.setLineDash=function(rt){this.lineDash=rt},U.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},U.prototype.fill=function(){St.call(this,"fill",!1)},U.prototype.stroke=function(){St.call(this,"stroke",!1)},U.prototype.beginPath=function(){this.path=[{type:"begin"}]},U.prototype.moveTo=function(rt,dt){if(isNaN(rt)||isNaN(dt))throw Ui.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Bt=this.ctx.transform.applyToPoint(new p(rt,dt));this.path.push({type:"mt",x:Bt.x,y:Bt.y}),this.ctx.lastPoint=new p(rt,dt)},U.prototype.closePath=function(){var rt=new p(0,0),dt=0;for(dt=this.path.length-1;dt!==-1;dt--)if(this.path[dt].type==="begin"&&ii(this.path[dt+1])==="object"&&typeof this.path[dt+1].x=="number"){rt=new p(this.path[dt+1].x,this.path[dt+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new p(rt.x,rt.y)},U.prototype.lineTo=function(rt,dt){if(isNaN(rt)||isNaN(dt))throw Ui.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Bt=this.ctx.transform.applyToPoint(new p(rt,dt));this.path.push({type:"lt",x:Bt.x,y:Bt.y}),this.ctx.lastPoint=new p(Bt.x,Bt.y)},U.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),St.call(this,null,!0)},U.prototype.quadraticCurveTo=function(rt,dt,Bt,Et){if(isNaN(Bt)||isNaN(Et)||isNaN(rt)||isNaN(dt))throw Ui.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Nt=this.ctx.transform.applyToPoint(new p(Bt,Et)),Ht=this.ctx.transform.applyToPoint(new p(rt,dt));this.path.push({type:"qct",x1:Ht.x,y1:Ht.y,x:Nt.x,y:Nt.y}),this.ctx.lastPoint=new p(Nt.x,Nt.y)},U.prototype.bezierCurveTo=function(rt,dt,Bt,Et,Nt,Ht){if(isNaN(Nt)||isNaN(Ht)||isNaN(rt)||isNaN(dt)||isNaN(Bt)||isNaN(Et))throw Ui.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ie=this.ctx.transform.applyToPoint(new p(Nt,Ht)),se=this.ctx.transform.applyToPoint(new p(rt,dt)),Ce=this.ctx.transform.applyToPoint(new p(Bt,Et));this.path.push({type:"bct",x1:se.x,y1:se.y,x2:Ce.x,y2:Ce.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new p(ie.x,ie.y)},U.prototype.arc=function(rt,dt,Bt,Et,Nt,Ht){if(isNaN(rt)||isNaN(dt)||isNaN(Bt)||isNaN(Et)||isNaN(Nt))throw Ui.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ht=!!Ht,!this.ctx.transform.isIdentity){var ie=this.ctx.transform.applyToPoint(new p(rt,dt));rt=ie.x,dt=ie.y;var se=this.ctx.transform.applyToPoint(new p(0,Bt)),Ce=this.ctx.transform.applyToPoint(new p(0,0));Bt=Math.sqrt(Math.pow(se.x-Ce.x,2)+Math.pow(se.y-Ce.y,2))}Math.abs(Nt-Et)>=2*Math.PI&&(Et=0,Nt=2*Math.PI),this.path.push({type:"arc",x:rt,y:dt,radius:Bt,startAngle:Et,endAngle:Nt,counterclockwise:Ht})},U.prototype.arcTo=function(rt,dt,Bt,Et,Nt){throw new Error("arcTo not implemented.")},U.prototype.rect=function(rt,dt,Bt,Et){if(isNaN(rt)||isNaN(dt)||isNaN(Bt)||isNaN(Et))throw Ui.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(rt,dt),this.lineTo(rt+Bt,dt),this.lineTo(rt+Bt,dt+Et),this.lineTo(rt,dt+Et),this.lineTo(rt,dt),this.lineTo(rt+Bt,dt),this.lineTo(rt,dt)},U.prototype.fillRect=function(rt,dt,Bt,Et){if(isNaN(rt)||isNaN(dt)||isNaN(Bt)||isNaN(Et))throw Ui.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!P.call(this)){var Nt={};this.lineCap!=="butt"&&(Nt.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Nt.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(rt,dt,Bt,Et),this.fill(),Nt.hasOwnProperty("lineCap")&&(this.lineCap=Nt.lineCap),Nt.hasOwnProperty("lineJoin")&&(this.lineJoin=Nt.lineJoin)}},U.prototype.strokeRect=function(rt,dt,Bt,Et){if(isNaN(rt)||isNaN(dt)||isNaN(Bt)||isNaN(Et))throw Ui.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");K.call(this)||(this.beginPath(),this.rect(rt,dt,Bt,Et),this.stroke())},U.prototype.clearRect=function(rt,dt,Bt,Et){if(isNaN(rt)||isNaN(dt)||isNaN(Bt)||isNaN(Et))throw Ui.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(rt,dt,Bt,Et))},U.prototype.save=function(rt){rt=typeof rt!="boolean"||rt;for(var dt=this.pdf.internal.getCurrentPageInfo().pageNumber,Bt=0;Bt<this.pdf.internal.getNumberOfPages();Bt++)this.pdf.setPage(Bt+1),this.pdf.internal.out("q");if(this.pdf.setPage(dt),rt){this.ctx.fontSize=this.pdf.internal.getFontSize();var Et=new I(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Et}},U.prototype.restore=function(rt){rt=typeof rt!="boolean"||rt;for(var dt=this.pdf.internal.getCurrentPageInfo().pageNumber,Bt=0;Bt<this.pdf.internal.getNumberOfPages();Bt++)this.pdf.setPage(Bt+1),this.pdf.internal.out("Q");this.pdf.setPage(dt),rt&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},U.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var Q=function(rt){var dt,Bt,Et,Nt;if(rt.isCanvasGradient===!0&&(rt=rt.getColor()),!rt)return{r:0,g:0,b:0,a:0,style:rt};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(rt))dt=0,Bt=0,Et=0,Nt=0;else{var Ht=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(rt);if(Ht!==null)dt=parseInt(Ht[1]),Bt=parseInt(Ht[2]),Et=parseInt(Ht[3]),Nt=1;else if((Ht=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(rt))!==null)dt=parseInt(Ht[1]),Bt=parseInt(Ht[2]),Et=parseInt(Ht[3]),Nt=parseFloat(Ht[4]);else{if(Nt=1,typeof rt=="string"&&rt.charAt(0)!=="#"){var ie=new nv(rt);rt=ie.ok?ie.toHex():"#000000"}rt.length===4?(dt=rt.substring(1,2),dt+=dt,Bt=rt.substring(2,3),Bt+=Bt,Et=rt.substring(3,4),Et+=Et):(dt=rt.substring(1,3),Bt=rt.substring(3,5),Et=rt.substring(5,7)),dt=parseInt(dt,16),Bt=parseInt(Bt,16),Et=parseInt(Et,16)}}return{r:dt,g:Bt,b:Et,a:Nt,style:rt}},P=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},K=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};U.prototype.fillText=function(rt,dt,Bt,Et){if(isNaN(dt)||isNaN(Bt)||typeof rt!="string")throw Ui.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Et=isNaN(Et)?void 0:Et,!P.call(this)){var Nt=qt(this.ctx.transform.rotation),Ht=this.ctx.transform.scaleX;lt.call(this,{text:rt,x:dt,y:Bt,scale:Ht,angle:Nt,align:this.textAlign,maxWidth:Et})}},U.prototype.strokeText=function(rt,dt,Bt,Et){if(isNaN(dt)||isNaN(Bt)||typeof rt!="string")throw Ui.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!K.call(this)){Et=isNaN(Et)?void 0:Et;var Nt=qt(this.ctx.transform.rotation),Ht=this.ctx.transform.scaleX;lt.call(this,{text:rt,x:dt,y:Bt,scale:Ht,renderingMode:"stroke",angle:Nt,align:this.textAlign,maxWidth:Et})}},U.prototype.measureText=function(rt){if(typeof rt!="string")throw Ui.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var dt=this.pdf,Bt=this.pdf.internal.scaleFactor,Et=dt.internal.getFontSize(),Nt=dt.getStringUnitWidth(rt)*Et/dt.internal.scaleFactor,Ht=function(ie){var se=(ie=ie||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return se}}),this};return new Ht({width:Nt*=Math.round(96*Bt/72*1e4)/1e4})},U.prototype.scale=function(rt,dt){if(isNaN(rt)||isNaN(dt))throw Ui.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Bt=new v(rt,0,0,dt,0,0);this.ctx.transform=this.ctx.transform.multiply(Bt)},U.prototype.rotate=function(rt){if(isNaN(rt))throw Ui.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var dt=new v(Math.cos(rt),Math.sin(rt),-Math.sin(rt),Math.cos(rt),0,0);this.ctx.transform=this.ctx.transform.multiply(dt)},U.prototype.translate=function(rt,dt){if(isNaN(rt)||isNaN(dt))throw Ui.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Bt=new v(1,0,0,1,rt,dt);this.ctx.transform=this.ctx.transform.multiply(Bt)},U.prototype.transform=function(rt,dt,Bt,Et,Nt,Ht){if(isNaN(rt)||isNaN(dt)||isNaN(Bt)||isNaN(Et)||isNaN(Nt)||isNaN(Ht))throw Ui.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ie=new v(rt,dt,Bt,Et,Nt,Ht);this.ctx.transform=this.ctx.transform.multiply(ie)},U.prototype.setTransform=function(rt,dt,Bt,Et,Nt,Ht){rt=isNaN(rt)?1:rt,dt=isNaN(dt)?0:dt,Bt=isNaN(Bt)?0:Bt,Et=isNaN(Et)?1:Et,Nt=isNaN(Nt)?0:Nt,Ht=isNaN(Ht)?0:Ht,this.ctx.transform=new v(rt,dt,Bt,Et,Nt,Ht)};var V=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};U.prototype.drawImage=function(rt,dt,Bt,Et,Nt,Ht,ie,se,Ce){var be=this.pdf.getImageProperties(rt),Te=1,Le=1,Qe=1,le=1;Et!==void 0&&se!==void 0&&(Qe=se/Et,le=Ce/Nt,Te=be.width/Et*se/Et,Le=be.height/Nt*Ce/Nt),Ht===void 0&&(Ht=dt,ie=Bt,dt=0,Bt=0),Et!==void 0&&se===void 0&&(se=Et,Ce=Nt),Et===void 0&&se===void 0&&(se=be.width,Ce=be.height);for(var nt,dr=this.ctx.transform.decompose(),$e=qt(dr.rotate.shx),ce=new v,ge=(ce=(ce=(ce=ce.multiply(dr.translate)).multiply(dr.skew)).multiply(dr.scale)).applyToRectangle(new o(Ht-dt*Qe,ie-Bt*le,Et*Te,Nt*Le)),Se=Y.call(this,ge),Ie=[],Ge=0;Ge<Se.length;Ge+=1)Ie.indexOf(Se[Ge])===-1&&Ie.push(Se[Ge]);if(ht(Ie),this.autoPaging)for(var Ze=Ie[0],pr=Ie[Ie.length-1],wr=Ze;wr<pr+1;wr++){this.pdf.setPage(wr);var Sr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],pe=wr===1?this.posY+this.margin[0]:this.margin[0],Xe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ur=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ue=wr===1?0:Xe+(wr-2)*ur;if(this.ctx.clip_path.length!==0){var Jr=this.path;nt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=it(nt,this.posX+this.margin[3],-Ue+pe+this.ctx.prevPageLastElemOffset),Tt.call(this,"fill",!0),this.path=Jr}var he=JSON.parse(JSON.stringify(ge));he=it([he],this.posX+this.margin[3],-Ue+pe+this.ctx.prevPageLastElemOffset)[0];var sr=(wr>Ze||wr<pr)&&V.call(this);sr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Sr,ur,null).clip().discardPath()),this.pdf.addImage(rt,"JPEG",he.x,he.y,he.w,he.h,null,null,$e),sr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(rt,"JPEG",ge.x,ge.y,ge.w,ge.h,null,null,$e)};var Y=function(rt,dt,Bt){var Et=[];dt=dt||this.pdf.internal.pageSize.width,Bt=Bt||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Nt=this.posY+this.ctx.prevPageLastElemOffset;switch(rt.type){default:case"mt":case"lt":Et.push(Math.floor((rt.y+Nt)/Bt)+1);break;case"arc":Et.push(Math.floor((rt.y+Nt-rt.radius)/Bt)+1),Et.push(Math.floor((rt.y+Nt+rt.radius)/Bt)+1);break;case"qct":var Ht=te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,rt.x1,rt.y1,rt.x,rt.y);Et.push(Math.floor((Ht.y+Nt)/Bt)+1),Et.push(Math.floor((Ht.y+Ht.h+Nt)/Bt)+1);break;case"bct":var ie=Jt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,rt.x1,rt.y1,rt.x2,rt.y2,rt.x,rt.y);Et.push(Math.floor((ie.y+Nt)/Bt)+1),Et.push(Math.floor((ie.y+ie.h+Nt)/Bt)+1);break;case"rect":Et.push(Math.floor((rt.y+Nt)/Bt)+1),Et.push(Math.floor((rt.y+rt.h+Nt)/Bt)+1)}for(var se=0;se<Et.length;se+=1)for(;this.pdf.internal.getNumberOfPages()<Et[se];)$.call(this);return Et},$=function(){var rt=this.fillStyle,dt=this.strokeStyle,Bt=this.font,Et=this.lineCap,Nt=this.lineWidth,Ht=this.lineJoin;this.pdf.addPage(),this.fillStyle=rt,this.strokeStyle=dt,this.font=Bt,this.lineCap=Et,this.lineWidth=Nt,this.lineJoin=Ht},it=function(rt,dt,Bt){for(var Et=0;Et<rt.length;Et++)switch(rt[Et].type){case"bct":rt[Et].x2+=dt,rt[Et].y2+=Bt;case"qct":rt[Et].x1+=dt,rt[Et].y1+=Bt;case"mt":case"lt":case"arc":default:rt[Et].x+=dt,rt[Et].y+=Bt}return rt},ht=function(rt){return rt.sort(function(dt,Bt){return dt-Bt})},St=function(rt,dt){for(var Bt,Et,Nt=this.fillStyle,Ht=this.strokeStyle,ie=this.lineCap,se=this.lineWidth,Ce=Math.abs(se*this.ctx.transform.scaleX),be=this.lineJoin,Te=JSON.parse(JSON.stringify(this.path)),Le=JSON.parse(JSON.stringify(this.path)),Qe=[],le=0;le<Le.length;le++)if(Le[le].x!==void 0)for(var nt=Y.call(this,Le[le]),dr=0;dr<nt.length;dr+=1)Qe.indexOf(nt[dr])===-1&&Qe.push(nt[dr]);for(var $e=0;$e<Qe.length;$e++)for(;this.pdf.internal.getNumberOfPages()<Qe[$e];)$.call(this);if(ht(Qe),this.autoPaging)for(var ce=Qe[0],ge=Qe[Qe.length-1],Se=ce;Se<ge+1;Se++){this.pdf.setPage(Se),this.fillStyle=Nt,this.strokeStyle=Ht,this.lineCap=ie,this.lineWidth=Ce,this.lineJoin=be;var Ie=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ge=Se===1?this.posY+this.margin[0]:this.margin[0],Ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],pr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],wr=Se===1?0:Ze+(Se-2)*pr;if(this.ctx.clip_path.length!==0){var Sr=this.path;Bt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=it(Bt,this.posX+this.margin[3],-wr+Ge+this.ctx.prevPageLastElemOffset),Tt.call(this,rt,!0),this.path=Sr}if(Et=JSON.parse(JSON.stringify(Te)),this.path=it(Et,this.posX+this.margin[3],-wr+Ge+this.ctx.prevPageLastElemOffset),dt===!1||Se===0){var pe=(Se>ce||Se<ge)&&V.call(this);pe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ie,pr,null).clip().discardPath()),Tt.call(this,rt,dt),pe&&this.pdf.restoreGraphicsState()}this.lineWidth=se}else this.lineWidth=Ce,Tt.call(this,rt,dt),this.lineWidth=se;this.path=Te},Tt=function(rt,dt){if((rt!=="stroke"||dt||!K.call(this))&&(rt==="stroke"||dt||!P.call(this))){for(var Bt,Et,Nt=[],Ht=this.path,ie=0;ie<Ht.length;ie++){var se=Ht[ie];switch(se.type){case"begin":Nt.push({begin:!0});break;case"close":Nt.push({close:!0});break;case"mt":Nt.push({start:se,deltas:[],abs:[]});break;case"lt":var Ce=Nt.length;if(Ht[ie-1]&&!isNaN(Ht[ie-1].x)&&(Bt=[se.x-Ht[ie-1].x,se.y-Ht[ie-1].y],Ce>0)){for(;Ce>=0;Ce--)if(Nt[Ce-1].close!==!0&&Nt[Ce-1].begin!==!0){Nt[Ce-1].deltas.push(Bt),Nt[Ce-1].abs.push(se);break}}break;case"bct":Bt=[se.x1-Ht[ie-1].x,se.y1-Ht[ie-1].y,se.x2-Ht[ie-1].x,se.y2-Ht[ie-1].y,se.x-Ht[ie-1].x,se.y-Ht[ie-1].y],Nt[Nt.length-1].deltas.push(Bt);break;case"qct":var be=Ht[ie-1].x+2/3*(se.x1-Ht[ie-1].x),Te=Ht[ie-1].y+2/3*(se.y1-Ht[ie-1].y),Le=se.x+2/3*(se.x1-se.x),Qe=se.y+2/3*(se.y1-se.y),le=se.x,nt=se.y;Bt=[be-Ht[ie-1].x,Te-Ht[ie-1].y,Le-Ht[ie-1].x,Qe-Ht[ie-1].y,le-Ht[ie-1].x,nt-Ht[ie-1].y],Nt[Nt.length-1].deltas.push(Bt);break;case"arc":Nt.push({deltas:[],abs:[],arc:!0}),Array.isArray(Nt[Nt.length-1].abs)&&Nt[Nt.length-1].abs.push(se)}}Et=dt?null:rt==="stroke"?"stroke":"fill";for(var dr=!1,$e=0;$e<Nt.length;$e++)if(Nt[$e].arc)for(var ce=Nt[$e].abs,ge=0;ge<ce.length;ge++){var Se=ce[ge];Se.type==="arc"?yt.call(this,Se.x,Se.y,Se.radius,Se.startAngle,Se.endAngle,Se.counterclockwise,void 0,dt,!dr):bt.call(this,Se.x,Se.y),dr=!0}else if(Nt[$e].close===!0)this.pdf.internal.out("h"),dr=!1;else if(Nt[$e].begin!==!0){var Ie=Nt[$e].start.x,Ge=Nt[$e].start.y;wt.call(this,Nt[$e].deltas,Ie,Ge),dr=!0}Et&&Rt.call(this,Et),dt&&Wt.call(this)}},Lt=function(rt){var dt=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Bt=dt*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return rt-Bt;case"top":return rt+dt-Bt;case"hanging":return rt+dt-2*Bt;case"middle":return rt+dt/2-Bt;case"ideographic":return rt;case"alphabetic":default:return rt}},Ft=function(rt){return rt+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};U.prototype.createLinearGradient=function(){var rt=function(){};return rt.colorStops=[],rt.addColorStop=function(dt,Bt){this.colorStops.push([dt,Bt])},rt.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},rt.isCanvasGradient=!0,rt},U.prototype.createPattern=function(){return this.createLinearGradient()},U.prototype.createRadialGradient=function(){return this.createLinearGradient()};var yt=function(rt,dt,Bt,Et,Nt,Ht,ie,se,Ce){for(var be=Gt.call(this,Bt,Et,Nt,Ht),Te=0;Te<be.length;Te++){var Le=be[Te];Te===0&&(Ce?At.call(this,Le.x1+rt,Le.y1+dt):bt.call(this,Le.x1+rt,Le.y1+dt)),Xt.call(this,rt,dt,Le.x2,Le.y2,Le.x3,Le.y3,Le.x4,Le.y4)}se?Wt.call(this):Rt.call(this,ie)},Rt=function(rt){switch(rt){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Wt=function(){this.pdf.clip(),this.pdf.discardPath()},At=function(rt,dt){this.pdf.internal.out(i(rt)+" "+s(dt)+" m")},lt=function(rt){var dt;switch(rt.align){case"right":case"end":dt="right";break;case"center":dt="center";break;case"left":case"start":default:dt="left"}var Bt=this.pdf.getTextDimensions(rt.text),Et=Lt.call(this,rt.y),Nt=Ft.call(this,Et)-Bt.h,Ht=this.ctx.transform.applyToPoint(new p(rt.x,Et)),ie=this.ctx.transform.decompose(),se=new v;se=(se=(se=se.multiply(ie.translate)).multiply(ie.skew)).multiply(ie.scale);for(var Ce,be,Te,Le=this.ctx.transform.applyToRectangle(new o(rt.x,Et,Bt.w,Bt.h)),Qe=se.applyToRectangle(new o(rt.x,Nt,Bt.w,Bt.h)),le=Y.call(this,Qe),nt=[],dr=0;dr<le.length;dr+=1)nt.indexOf(le[dr])===-1&&nt.push(le[dr]);if(ht(nt),this.autoPaging)for(var $e=nt[0],ce=nt[nt.length-1],ge=$e;ge<ce+1;ge++){this.pdf.setPage(ge);var Se=ge===1?this.posY+this.margin[0]:this.margin[0],Ie=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ge=this.pdf.internal.pageSize.height-this.margin[2],Ze=Ge-this.margin[0],pr=this.pdf.internal.pageSize.width-this.margin[1],wr=pr-this.margin[3],Sr=ge===1?0:Ie+(ge-2)*Ze;if(this.ctx.clip_path.length!==0){var pe=this.path;Ce=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=it(Ce,this.posX+this.margin[3],-1*Sr+Se),Tt.call(this,"fill",!0),this.path=pe}var Xe=it([JSON.parse(JSON.stringify(Qe))],this.posX+this.margin[3],-Sr+Se+this.ctx.prevPageLastElemOffset)[0];rt.scale>=.01&&(be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(be*rt.scale),Te=this.lineWidth,this.lineWidth=Te*rt.scale);var ur=this.autoPaging!=="text";if(ur||Xe.y+Xe.h<=Ge){if(ur||Xe.y>=Se&&Xe.x<=pr){var Ue=ur?rt.text:this.pdf.splitTextToSize(rt.text,rt.maxWidth||pr-Xe.x)[0],Jr=it([JSON.parse(JSON.stringify(Le))],this.posX+this.margin[3],-Sr+Se+this.ctx.prevPageLastElemOffset)[0],he=ur&&(ge>$e||ge<ce)&&V.call(this);he&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],wr,Ze,null).clip().discardPath()),this.pdf.text(Ue,Jr.x,Jr.y,{angle:rt.angle,align:dt,renderingMode:rt.renderingMode}),he&&this.pdf.restoreGraphicsState()}}else Xe.y<Ge&&(this.ctx.prevPageLastElemOffset+=Ge-Xe.y);rt.scale>=.01&&(this.pdf.setFontSize(be),this.lineWidth=Te)}else rt.scale>=.01&&(be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(be*rt.scale),Te=this.lineWidth,this.lineWidth=Te*rt.scale),this.pdf.text(rt.text,Ht.x+this.posX,Ht.y+this.posY,{angle:rt.angle,align:dt,renderingMode:rt.renderingMode,maxWidth:rt.maxWidth}),rt.scale>=.01&&(this.pdf.setFontSize(be),this.lineWidth=Te)},bt=function(rt,dt,Bt,Et){Bt=Bt||0,Et=Et||0,this.pdf.internal.out(i(rt+Bt)+" "+s(dt+Et)+" l")},wt=function(rt,dt,Bt){return this.pdf.lines(rt,dt,Bt,null,null)},Xt=function(rt,dt,Bt,Et,Nt,Ht,ie,se){this.pdf.internal.out([t(l(Bt+rt)),t(h(Et+dt)),t(l(Nt+rt)),t(h(Ht+dt)),t(l(ie+rt)),t(h(se+dt)),"c"].join(" "))},Gt=function(rt,dt,Bt,Et){for(var Nt=2*Math.PI,Ht=Math.PI/2;dt>Bt;)dt-=Nt;var ie=Math.abs(Bt-dt);ie<Nt&&Et&&(ie=Nt-ie);for(var se=[],Ce=Et?-1:1,be=dt;ie>1e-5;){var Te=be+Ce*Math.min(ie,Ht);se.push(Yt.call(this,rt,be,Te)),ie-=Math.abs(Te-be),be=Te}return se},Yt=function(rt,dt,Bt){var Et=(Bt-dt)/2,Nt=rt*Math.cos(Et),Ht=rt*Math.sin(Et),ie=Nt,se=-Ht,Ce=ie*ie+se*se,be=Ce+ie*Nt+se*Ht,Te=4/3*(Math.sqrt(2*Ce*be)-be)/(ie*Ht-se*Nt),Le=ie-Te*se,Qe=se+Te*ie,le=Le,nt=-Qe,dr=Et+dt,$e=Math.cos(dr),ce=Math.sin(dr);return{x1:rt*Math.cos(dt),y1:rt*Math.sin(dt),x2:Le*$e-Qe*ce,y2:Le*ce+Qe*$e,x3:le*$e-nt*ce,y3:le*ce+nt*$e,x4:rt*Math.cos(Bt),y4:rt*Math.sin(Bt)}},qt=function(rt){return 180*rt/Math.PI},te=function(rt,dt,Bt,Et,Nt,Ht){var ie=rt+.5*(Bt-rt),se=dt+.5*(Et-dt),Ce=Nt+.5*(Bt-Nt),be=Ht+.5*(Et-Ht),Te=Math.min(rt,Nt,ie,Ce),Le=Math.max(rt,Nt,ie,Ce),Qe=Math.min(dt,Ht,se,be),le=Math.max(dt,Ht,se,be);return new o(Te,Qe,Le-Te,le-Qe)},Jt=function(rt,dt,Bt,Et,Nt,Ht,ie,se){var Ce,be,Te,Le,Qe,le,nt,dr,$e,ce,ge,Se,Ie,Ge,Ze=Bt-rt,pr=Et-dt,wr=Nt-Bt,Sr=Ht-Et,pe=ie-Nt,Xe=se-Ht;for(be=0;be<41;be++)$e=(nt=(Te=rt+(Ce=be/40)*Ze)+Ce*((Qe=Bt+Ce*wr)-Te))+Ce*(Qe+Ce*(Nt+Ce*pe-Qe)-nt),ce=(dr=(Le=dt+Ce*pr)+Ce*((le=Et+Ce*Sr)-Le))+Ce*(le+Ce*(Ht+Ce*Xe-le)-dr),be==0?(ge=$e,Se=ce,Ie=$e,Ge=ce):(ge=Math.min(ge,$e),Se=Math.min(Se,ce),Ie=Math.max(Ie,$e),Ge=Math.max(Ge,ce));return new o(Math.round(ge),Math.round(Se),Math.round(Ie-ge),Math.round(Ge-Se))},me=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var rt,dt,Bt=(rt=this.ctx.lineDash,dt=this.ctx.lineDashOffset,JSON.stringify({lineDash:rt,lineDashOffset:dt}));this.prevLineDash!==Bt&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Bt)}}})(Tr.API),function(n){var t=function(h){var p,o,v,C,I,U,Q,P,K,V;for(o=[],v=0,C=(h+=p="\0\0\0\0".slice(h.length%4||4)).length;C>v;v+=4)(I=(h.charCodeAt(v)<<24)+(h.charCodeAt(v+1)<<16)+(h.charCodeAt(v+2)<<8)+h.charCodeAt(v+3))!==0?(U=(I=((I=((I=((I=(I-(V=I%85))/85)-(K=I%85))/85)-(P=I%85))/85)-(Q=I%85))/85)%85,o.push(U+33,Q+33,P+33,K+33,V+33)):o.push(122);return function(Y,$){for(var it=$;it>0;it--)Y.pop()}(o,p.length),String.fromCharCode.apply(String,o)+"~>"},i=function(h){var p,o,v,C,I,U=String,Q="length",P=255,K="charCodeAt",V="slice",Y="replace";for(h[V](-2),h=h[V](0,-2)[Y](/\s/g,"")[Y]("z","!!!!!"),v=[],C=0,I=(h+=p="uuuuu"[V](h[Q]%5||5))[Q];I>C;C+=5)o=52200625*(h[K](C)-33)+614125*(h[K](C+1)-33)+7225*(h[K](C+2)-33)+85*(h[K](C+3)-33)+(h[K](C+4)-33),v.push(P&o>>24,P&o>>16,P&o>>8,P&o);return function($,it){for(var ht=it;ht>0;ht--)$.pop()}(v,p[Q]),U.fromCharCode.apply(U,v)},s=function(h){var p=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((h=h.replace(/\s/g,"")).indexOf(">")!==-1&&(h=h.substr(0,h.indexOf(">"))),h.length%2&&(h+="0"),p.test(h)===!1)return"";for(var o="",v=0;v<h.length;v+=2)o+=String.fromCharCode("0x"+(h[v]+h[v+1]));return o},l=function(h){for(var p=new Uint8Array(h.length),o=h.length;o--;)p[o]=h.charCodeAt(o);return h=(p=bg(p)).reduce(function(v,C){return v+String.fromCharCode(C)},"")};n.processDataByFilters=function(h,p){var o=0,v=h||"",C=[];for(typeof(p=p||[])=="string"&&(p=[p]),o=0;o<p.length;o+=1)switch(p[o]){case"ASCII85Decode":case"/ASCII85Decode":v=i(v),C.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":v=t(v),C.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":v=s(v),C.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":v=v.split("").map(function(I){return("0"+I.charCodeAt().toString(16)).slice(-2)}).join("")+">",C.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":v=l(v),C.push("/FlateDecode");break;default:throw new Error('The filter: "'+p[o]+'" is not implemented')}return{data:v,reverseChain:C.reverse().join(" ")}}}(Tr.API),function(n){n.loadFile=function(t,i,s){return function(l,h,p){h=h!==!1,p=typeof p=="function"?p:function(){};var o=void 0;try{o=function(v,C,I){var U=new XMLHttpRequest,Q=0,P=function(K){var V=K.length,Y=[],$=String.fromCharCode;for(Q=0;Q<V;Q+=1)Y.push($(255&K.charCodeAt(Q)));return Y.join("")};if(U.open("GET",v,!C),U.overrideMimeType("text/plain; charset=x-user-defined"),C===!1&&(U.onload=function(){U.status===200?I(P(this.responseText)):I(void 0)}),U.send(null),C&&U.status===200)return P(U.responseText)}(l,h,p)}catch{}return o}(t,i,s)},n.loadImageFile=n.loadFile}(Tr.API),function(n){function t(){return(Er.html2canvas?Promise.resolve(Er.html2canvas):Promise.resolve().then(()=>OT)).catch(function(p){return Promise.reject(new Error("Could not load html2canvas: "+p))}).then(function(p){return p.default?p.default:p})}function i(){return(Er.DOMPurify?Promise.resolve(Er.DOMPurify):Promise.resolve().then(()=>fU)).catch(function(p){return Promise.reject(new Error("Could not load dompurify: "+p))}).then(function(p){return p.default?p.default:p})}var s=function(p){var o=ii(p);return o==="undefined"?"undefined":o==="string"||p instanceof String?"string":o==="number"||p instanceof Number?"number":o==="function"||p instanceof Function?"function":p&&p.constructor===Array?"array":p&&p.nodeType===1?"element":o==="object"?"object":"unknown"},l=function(p,o){var v=document.createElement(p);for(var C in o.className&&(v.className=o.className),o.innerHTML&&o.dompurify&&(v.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)v.style[C]=o.style[C];return v},h=function p(o){var v=Object.assign(p.convert(Promise.resolve()),JSON.parse(JSON.stringify(p.template))),C=p.convert(Promise.resolve(),v);return C=(C=C.setProgress(1,p,1,[p])).set(o)};(h.prototype=Object.create(Promise.prototype)).constructor=h,h.convert=function(p,o){return p.__proto__=o||h.prototype,p},h.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},h.prototype.from=function(p,o){return this.then(function(){switch(o=o||function(v){switch(s(v)){case"string":return"string";case"element":return v.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(p)){case"string":return this.then(i).then(function(v){return this.set({src:l("div",{innerHTML:p,dompurify:v})})});case"element":return this.set({src:p});case"canvas":return this.set({canvas:p});case"img":return this.set({img:p});default:return this.error("Unknown source type.")}})},h.prototype.to=function(p){switch(p){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},h.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var p={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function v(C,I){for(var U=C.nodeType===3?document.createTextNode(C.nodeValue):C.cloneNode(!1),Q=C.firstChild;Q;Q=Q.nextSibling)I!==!0&&Q.nodeType===1&&Q.nodeName==="SCRIPT"||U.appendChild(v(Q,I));return C.nodeType===1&&(C.nodeName==="CANVAS"?(U.width=C.width,U.height=C.height,U.getContext("2d").drawImage(C,0,0)):C.nodeName!=="TEXTAREA"&&C.nodeName!=="SELECT"||(U.value=C.value),U.addEventListener("load",function(){U.scrollTop=C.scrollTop,U.scrollLeft=C.scrollLeft},!0)),U}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(p.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=l("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=l("div",{className:"html2pdf__container",style:p}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(l("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},h.prototype.toCanvas=function(){var p=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(p).then(t).then(function(o){var v=Object.assign({},this.opt.html2canvas);return delete v.onrendered,o(this.prop.container,v)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},h.prototype.toContext2d=function(){var p=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(p).then(t).then(function(o){var v=this.opt.jsPDF,C=this.opt.fontFaces,I=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,U=Object.assign({async:!0,allowTaint:!0,scale:I,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete U.onrendered,v.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,v.context2d.posX=this.opt.x,v.context2d.posY=this.opt.y,v.context2d.margin=this.opt.margin,v.context2d.fontFaces=C,C)for(var Q=0;Q<C.length;++Q){var P=C[Q],K=P.src.find(function(V){return V.format==="truetype"});K&&v.addFont(K.url,P.ref.name,P.ref.style)}return U.windowHeight=U.windowHeight||0,U.windowHeight=U.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):U.windowHeight,v.context2d.save(!0),o(this.prop.container,U)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},h.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var p=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=p})},h.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},h.prototype.output=function(p,o,v){return(v=v||"pdf").toLowerCase()==="img"||v.toLowerCase()==="image"?this.outputImg(p,o):this.outputPdf(p,o)},h.prototype.outputPdf=function(p,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(p,o)})},h.prototype.outputImg=function(p){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(p){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+p+'" is not supported.'}})},h.prototype.save=function(p){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(p?{filename:p}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},h.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},h.prototype.set=function(p){if(s(p)!=="object")return this;var o=Object.keys(p||{}).map(function(v){if(v in h.template.prop)return function(){this.prop[v]=p[v]};switch(v){case"margin":return this.setMargin.bind(this,p.margin);case"jsPDF":return function(){return this.opt.jsPDF=p.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,p.pageSize);default:return function(){this.opt[v]=p[v]}}},this);return this.then(function(){return this.thenList(o)})},h.prototype.get=function(p,o){return this.then(function(){var v=p in h.template.prop?this.prop[p]:this.opt[p];return o?o(v):v})},h.prototype.setMargin=function(p){return this.then(function(){switch(s(p)){case"number":p=[p,p,p,p];case"array":if(p.length===2&&(p=[p[0],p[1],p[0],p[1]]),p.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=p}).then(this.setPageSize)},h.prototype.setPageSize=function(p){function o(v,C){return Math.floor(v*C/72*96)}return this.then(function(){(p=p||Tr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(p.inner={width:p.width-this.opt.margin[1]-this.opt.margin[3],height:p.height-this.opt.margin[0]-this.opt.margin[2]},p.inner.px={width:o(p.inner.width,p.k),height:o(p.inner.height,p.k)},p.inner.ratio=p.inner.height/p.inner.width),this.prop.pageSize=p})},h.prototype.setProgress=function(p,o,v,C){return p!=null&&(this.progress.val=p),o!=null&&(this.progress.state=o),v!=null&&(this.progress.n=v),C!=null&&(this.progress.stack=C),this.progress.ratio=this.progress.val/this.progress.state,this},h.prototype.updateProgress=function(p,o,v,C){return this.setProgress(p?this.progress.val+p:null,o||null,v?this.progress.n+v:null,C?this.progress.stack.concat(C):null)},h.prototype.then=function(p,o){var v=this;return this.thenCore(p,o,function(C,I){return v.updateProgress(null,null,1,[C]),Promise.prototype.then.call(this,function(U){return v.updateProgress(null,C),U}).then(C,I).then(function(U){return v.updateProgress(1),U})})},h.prototype.thenCore=function(p,o,v){v=v||Promise.prototype.then,p&&(p=p.bind(this)),o&&(o=o.bind(this));var C=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:h.convert(Object.assign({},this),Promise.prototype),I=v.call(C,p,o);return h.convert(I,this.__proto__)},h.prototype.thenExternal=function(p,o){return Promise.prototype.then.call(this,p,o)},h.prototype.thenList=function(p){var o=this;return p.forEach(function(v){o=o.thenCore(v)}),o},h.prototype.catch=function(p){p&&(p=p.bind(this));var o=Promise.prototype.catch.call(this,p);return h.convert(o,this)},h.prototype.catchExternal=function(p){return Promise.prototype.catch.call(this,p)},h.prototype.error=function(p){return this.then(function(){throw new Error(p)})},h.prototype.using=h.prototype.set,h.prototype.saveAs=h.prototype.save,h.prototype.export=h.prototype.output,h.prototype.run=h.prototype.then,Tr.getPageSize=function(p,o,v){if(ii(p)==="object"){var C=p;p=C.orientation,o=C.unit||o,v=C.format||v}o=o||"mm",v=v||"a4",p=(""+(p||"P")).toLowerCase();var I,U=(""+v).toLowerCase(),Q={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":I=1;break;case"mm":I=72/25.4;break;case"cm":I=72/2.54;break;case"in":I=72;break;case"px":I=.75;break;case"pc":case"em":I=12;break;case"ex":I=6;break;default:throw"Invalid unit: "+o}var P,K=0,V=0;if(Q.hasOwnProperty(U))K=Q[U][1]/I,V=Q[U][0]/I;else try{K=v[1],V=v[0]}catch{throw new Error("Invalid format: "+v)}if(p==="p"||p==="portrait")p="p",V>K&&(P=V,V=K,K=P);else{if(p!=="l"&&p!=="landscape")throw"Invalid orientation: "+p;p="l",K>V&&(P=V,V=K,K=P)}return{width:V,height:K,unit:o,k:I,orientation:p}},n.html=function(p,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(Lg):null;var v=new h(o);return o.worker?v:v.from(p).doCallback()}}(Tr.API),Tr.API.addJS=function(n){return xv=n,this.internal.events.subscribe("postPutResources",function(){Hd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Hd+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),bv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+xv+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Hd!==void 0&&bv!==void 0&&this.internal.out("/Names <</JavaScript "+Hd+" 0 R>>")}),this},function(n){var t;n.events.push(["postPutResources",function(){var i=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var l=i.outline.render().split(/\r\n/),h=0;h<l.length;h++){var p=l[h],o=s.exec(p);if(o!=null){var v=o[1];i.internal.newObjectDeferredBegin(v,!1)}i.internal.write(p)}if(this.outline.createNamedDestinations){var C=this.internal.pages.length,I=[];for(h=0;h<C;h++){var U=i.internal.newObject();I.push(U);var Q=i.internal.getPageInfo(h+1);i.internal.write("<< /D["+Q.objId+" 0 R /XYZ null null null]>> endobj")}var P=i.internal.newObject();for(i.internal.write("<< /Names [ "),h=0;h<I.length;h++)i.internal.write("(page_"+(h+1)+")"+I[h]+" 0 R");i.internal.write(" ] >>","endobj"),t=i.internal.newObject(),i.internal.write("<< /Dests "+P+" 0 R"),i.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),n.events.push(["initialized",function(){var i=this;i.outline={createNamedDestinations:!1,root:{children:[]}},i.outline.add=function(s,l,h){var p={title:l,options:h,children:[]};return s==null&&(s=this.root),s.children.push(p),p},i.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=i,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},i.outline.genIds_r=function(s){s.id=i.internal.newObjectDeferred();for(var l=0;l<s.children.length;l++)this.genIds_r(s.children[l])},i.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},i.outline.renderItems=function(s){for(var l=this.ctx.pdf.internal.getVerticalCoordinateString,h=0;h<s.children.length;h++){var p=s.children[h];this.objStart(p),this.line("/Title "+this.makeString(p.title)),this.line("/Parent "+this.makeRef(s)),h>0&&this.line("/Prev "+this.makeRef(s.children[h-1])),h<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[h+1])),p.children.length>0&&(this.line("/First "+this.makeRef(p.children[0])),this.line("/Last "+this.makeRef(p.children[p.children.length-1])));var o=this.count=this.count_r({count:0},p);if(o>0&&this.line("/Count "+o),p.options&&p.options.pageNumber){var v=i.internal.getPageInfo(p.options.pageNumber);this.line("/Dest ["+v.objId+" 0 R /XYZ 0 "+l(0)+" 0]")}this.objEnd()}for(var C=0;C<s.children.length;C++)this.renderItems(s.children[C])},i.outline.line=function(s){this.ctx.val+=s+`\r
`},i.outline.makeRef=function(s){return s.id+" 0 R"},i.outline.makeString=function(s){return"("+i.internal.pdfEscape(s)+")"},i.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},i.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},i.outline.count_r=function(s,l){for(var h=0;h<l.children.length;h++)s.count++,this.count_r(s,l.children[h]);return s.count}}])}(Tr.API),function(n){var t=[192,193,194,195,196,197,198,199];n.processJPEG=function(i,s,l,h,p,o){var v,C=this.decode.DCT_DECODE,I=null;if(typeof i=="string"||this.__addimage__.isArrayBuffer(i)||this.__addimage__.isArrayBufferView(i)){switch(i=p||i,i=this.__addimage__.isArrayBuffer(i)?new Uint8Array(i):i,(v=function(U){for(var Q,P=256*U.charCodeAt(4)+U.charCodeAt(5),K=U.length,V={width:0,height:0,numcomponents:1},Y=4;Y<K;Y+=2){if(Y+=P,t.indexOf(U.charCodeAt(Y+1))!==-1){Q=256*U.charCodeAt(Y+5)+U.charCodeAt(Y+6),V={width:256*U.charCodeAt(Y+7)+U.charCodeAt(Y+8),height:Q,numcomponents:U.charCodeAt(Y+9)};break}P=256*U.charCodeAt(Y+2)+U.charCodeAt(Y+3)}return V}(i=this.__addimage__.isArrayBufferView(i)?this.__addimage__.arrayBufferToBinaryString(i):i)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}I={data:i,width:v.width,height:v.height,colorSpace:o,bitsPerComponent:8,filter:C,index:s,alias:l}}return I}}(Tr.API);var pu,Vd,Cv,Fv,Sv,q4=function(){var n,t,i;function s(h){var p,o,v,C,I,U,Q,P,K,V,Y,$,it,ht;for(this.data=h,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},U=null;;){switch(p=this.readUInt32(),K=(function(){var St,Tt;for(Tt=[],St=0;St<4;++St)Tt.push(String.fromCharCode(this.data[this.pos++]));return Tt}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(p);break;case"fcTL":U&&this.animation.frames.push(U),this.pos+=4,U={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},I=this.readUInt16(),C=this.readUInt16()||100,U.delay=1e3*I/C,U.disposeOp=this.data[this.pos++],U.blendOp=this.data[this.pos++],U.data=[];break;case"IDAT":case"fdAT":for(K==="fdAT"&&(this.pos+=4,p-=4),h=(U!=null?U.data:void 0)||this.imgData,$=0;0<=p?$<p:$>p;0<=p?++$:--$)h.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(v=this.palette.length/3,this.transparency.indexed=this.read(p),this.transparency.indexed.length>v)throw new Error("More transparent colors than palette size");if((V=v-this.transparency.indexed.length)>0)for(it=0;0<=V?it<V:it>V;0<=V?++it:--it)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(p)[0];break;case 2:this.transparency.rgb=this.read(p)}break;case"tEXt":Q=(Y=this.read(p)).indexOf(0),P=String.fromCharCode.apply(String,Y.slice(0,Q)),this.text[P]=String.fromCharCode.apply(String,Y.slice(Q+1));break;case"IEND":return U&&this.animation.frames.push(U),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(ht=this.colorType)===4||ht===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=p}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}s.prototype.read=function(h){var p,o;for(o=[],p=0;0<=h?p<h:p>h;0<=h?++p:--p)o.push(this.data[this.pos++]);return o},s.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.decodePixels=function(h){var p=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*p),v=0,C=this;if(h==null&&(h=this.imgData),h.length===0)return new Uint8Array(0);function I(U,Q,P,K){var V,Y,$,it,ht,St,Tt,Lt,Ft,yt,Rt,Wt,At,lt,bt,wt,Xt,Gt,Yt,qt,te,Jt=Math.ceil((C.width-U)/P),me=Math.ceil((C.height-Q)/K),rt=C.width==Jt&&C.height==me;for(lt=p*Jt,Wt=rt?o:new Uint8Array(lt*me),St=h.length,At=0,Y=0;At<me&&v<St;){switch(h[v++]){case 0:for(it=Xt=0;Xt<lt;it=Xt+=1)Wt[Y++]=h[v++];break;case 1:for(it=Gt=0;Gt<lt;it=Gt+=1)V=h[v++],ht=it<p?0:Wt[Y-p],Wt[Y++]=(V+ht)%256;break;case 2:for(it=Yt=0;Yt<lt;it=Yt+=1)V=h[v++],$=(it-it%p)/p,bt=At&&Wt[(At-1)*lt+$*p+it%p],Wt[Y++]=(bt+V)%256;break;case 3:for(it=qt=0;qt<lt;it=qt+=1)V=h[v++],$=(it-it%p)/p,ht=it<p?0:Wt[Y-p],bt=At&&Wt[(At-1)*lt+$*p+it%p],Wt[Y++]=(V+Math.floor((ht+bt)/2))%256;break;case 4:for(it=te=0;te<lt;it=te+=1)V=h[v++],$=(it-it%p)/p,ht=it<p?0:Wt[Y-p],At===0?bt=wt=0:(bt=Wt[(At-1)*lt+$*p+it%p],wt=$&&Wt[(At-1)*lt+($-1)*p+it%p]),Tt=ht+bt-wt,Lt=Math.abs(Tt-ht),yt=Math.abs(Tt-bt),Rt=Math.abs(Tt-wt),Ft=Lt<=yt&&Lt<=Rt?ht:yt<=Rt?bt:wt,Wt[Y++]=(V+Ft)%256;break;default:throw new Error("Invalid filter algorithm: "+h[v-1])}if(!rt){var dt=((Q+At*K)*C.width+U)*p,Bt=At*lt;for(it=0;it<Jt;it+=1){for(var Et=0;Et<p;Et+=1)o[dt++]=Wt[Bt++];dt+=(P-1)*p}}At++}}return h=S4(h),C.interlaceMethod==1?(I(0,0,8,8),I(4,0,8,8),I(0,4,4,8),I(2,0,4,4),I(0,2,2,4),I(1,0,2,2),I(0,1,1,2)):I(0,0,1,1),o},s.prototype.decodePalette=function(){var h,p,o,v,C,I,U,Q,P;for(o=this.palette,I=this.transparency.indexed||[],C=new Uint8Array((I.length||0)+o.length),v=0,h=0,p=U=0,Q=o.length;U<Q;p=U+=3)C[v++]=o[p],C[v++]=o[p+1],C[v++]=o[p+2],C[v++]=(P=I[h++])!=null?P:255;return C},s.prototype.copyToImageData=function(h,p){var o,v,C,I,U,Q,P,K,V,Y,$;if(v=this.colors,V=null,o=this.hasAlphaChannel,this.palette.length&&(V=($=this._decodedPalette)!=null?$:this._decodedPalette=this.decodePalette(),v=4,o=!0),K=(C=h.data||h).length,U=V||p,I=Q=0,v===1)for(;I<K;)P=V?4*p[I/4]:Q,Y=U[P++],C[I++]=Y,C[I++]=Y,C[I++]=Y,C[I++]=o?U[P++]:255,Q=P;else for(;I<K;)P=V?4*p[I/4]:Q,C[I++]=U[P++],C[I++]=U[P++],C[I++]=U[P++],C[I++]=o?U[P++]:255,Q=P},s.prototype.decode=function(){var h;return h=new Uint8Array(this.width*this.height*4),this.copyToImageData(h,this.decodePixels()),h};var l=function(){if(Object.prototype.toString.call(Er)==="[object Window]"){try{t=Er.document.createElement("canvas"),i=t.getContext("2d")}catch{return!1}return!0}return!1};return l(),n=function(h){var p;if(l()===!0)return i.width=h.width,i.height=h.height,i.clearRect(0,0,h.width,h.height),i.putImageData(h,0,0),(p=new Image).src=t.toDataURL(),p;throw new Error("This method requires a Browser with Canvas-capability.")},s.prototype.decodeFrames=function(h){var p,o,v,C,I,U,Q,P;if(this.animation){for(P=[],o=I=0,U=(Q=this.animation.frames).length;I<U;o=++I)p=Q[o],v=h.createImageData(p.width,p.height),C=this.decodePixels(new Uint8Array(p.data)),this.copyToImageData(v,C),p.imageData=v,P.push(p.image=n(v));return P}},s.prototype.renderFrame=function(h,p){var o,v,C;return o=(v=this.animation.frames)[p],C=v[p-1],p===0&&h.clearRect(0,0,this.width,this.height),(C!=null?C.disposeOp:void 0)===1?h.clearRect(C.xOffset,C.yOffset,C.width,C.height):(C!=null?C.disposeOp:void 0)===2&&h.putImageData(C.imageData,C.xOffset,C.yOffset),o.blendOp===0&&h.clearRect(o.xOffset,o.yOffset,o.width,o.height),h.drawImage(o.image,o.xOffset,o.yOffset)},s.prototype.animate=function(h){var p,o,v,C,I,U,Q=this;return o=0,U=this.animation,C=U.numFrames,v=U.frames,I=U.numPlays,(p=function(){var P,K;if(P=o++%C,K=v[P],Q.renderFrame(h,P),C>1&&o/C<I)return Q.animation._timeout=setTimeout(p,K.delay)})()},s.prototype.stopAnimation=function(){var h;return clearTimeout((h=this.animation)!=null?h._timeout:void 0)},s.prototype.render=function(h){var p,o;return h._png&&h._png.stopAnimation(),h._png=this,h.width=this.width,h.height=this.height,p=h.getContext("2d"),this.animation?(this.decodeFrames(p),this.animate(p)):(o=p.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),p.putImageData(o,0,0))},s}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function G4(n){var t=0;if(n[t++]!==71||n[t++]!==73||n[t++]!==70||n[t++]!==56||(n[t++]+1&253)!=56||n[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var i=n[t++]|n[t++]<<8,s=n[t++]|n[t++]<<8,l=n[t++],h=l>>7,p=1<<(7&l)+1;n[t++],n[t++];var o=null,v=null;h&&(o=t,v=p,t+=3*p);var C=!0,I=[],U=0,Q=null,P=0,K=null;for(this.width=i,this.height=s;C&&t<n.length;)switch(n[t++]){case 33:switch(n[t++]){case 255:if(n[t]!==11||n[t+1]==78&&n[t+2]==69&&n[t+3]==84&&n[t+4]==83&&n[t+5]==67&&n[t+6]==65&&n[t+7]==80&&n[t+8]==69&&n[t+9]==50&&n[t+10]==46&&n[t+11]==48&&n[t+12]==3&&n[t+13]==1&&n[t+16]==0)t+=14,K=n[t++]|n[t++]<<8,t++;else for(t+=12;;){if(!((At=n[t++])>=0))throw Error("Invalid block size");if(At===0)break;t+=At}break;case 249:if(n[t++]!==4||n[t+4]!==0)throw new Error("Invalid graphics extension block.");var V=n[t++];U=n[t++]|n[t++]<<8,Q=n[t++],!(1&V)&&(Q=null),P=V>>2&7,t++;break;case 254:for(;;){if(!((At=n[t++])>=0))throw Error("Invalid block size");if(At===0)break;t+=At}break;default:throw new Error("Unknown graphic control label: 0x"+n[t-1].toString(16))}break;case 44:var Y=n[t++]|n[t++]<<8,$=n[t++]|n[t++]<<8,it=n[t++]|n[t++]<<8,ht=n[t++]|n[t++]<<8,St=n[t++],Tt=St>>6&1,Lt=1<<(7&St)+1,Ft=o,yt=v,Rt=!1;St>>7&&(Rt=!0,Ft=t,yt=Lt,t+=3*Lt);var Wt=t;for(t++;;){var At;if(!((At=n[t++])>=0))throw Error("Invalid block size");if(At===0)break;t+=At}I.push({x:Y,y:$,width:it,height:ht,has_local_palette:Rt,palette_offset:Ft,palette_size:yt,data_offset:Wt,data_length:t-Wt,transparent_index:Q,interlaced:!!Tt,delay:U,disposal:P});break;case 59:C=!1;break;default:throw new Error("Unknown gif block: 0x"+n[t-1].toString(16))}this.numFrames=function(){return I.length},this.loopCount=function(){return K},this.frameInfo=function(lt){if(lt<0||lt>=I.length)throw new Error("Frame index out of range.");return I[lt]},this.decodeAndBlitFrameBGRA=function(lt,bt){var wt=this.frameInfo(lt),Xt=wt.width*wt.height,Gt=new Uint8Array(Xt);Iv(n,wt.data_offset,Gt,Xt);var Yt=wt.palette_offset,qt=wt.transparent_index;qt===null&&(qt=256);var te=wt.width,Jt=i-te,me=te,rt=4*(wt.y*i+wt.x),dt=4*((wt.y+wt.height)*i+wt.x),Bt=rt,Et=4*Jt;wt.interlaced===!0&&(Et+=4*i*7);for(var Nt=8,Ht=0,ie=Gt.length;Ht<ie;++Ht){var se=Gt[Ht];if(me===0&&(me=te,(Bt+=Et)>=dt&&(Et=4*Jt+4*i*(Nt-1),Bt=rt+(te+Jt)*(Nt<<1),Nt>>=1)),se===qt)Bt+=4;else{var Ce=n[Yt+3*se],be=n[Yt+3*se+1],Te=n[Yt+3*se+2];bt[Bt++]=Te,bt[Bt++]=be,bt[Bt++]=Ce,bt[Bt++]=255}--me}},this.decodeAndBlitFrameRGBA=function(lt,bt){var wt=this.frameInfo(lt),Xt=wt.width*wt.height,Gt=new Uint8Array(Xt);Iv(n,wt.data_offset,Gt,Xt);var Yt=wt.palette_offset,qt=wt.transparent_index;qt===null&&(qt=256);var te=wt.width,Jt=i-te,me=te,rt=4*(wt.y*i+wt.x),dt=4*((wt.y+wt.height)*i+wt.x),Bt=rt,Et=4*Jt;wt.interlaced===!0&&(Et+=4*i*7);for(var Nt=8,Ht=0,ie=Gt.length;Ht<ie;++Ht){var se=Gt[Ht];if(me===0&&(me=te,(Bt+=Et)>=dt&&(Et=4*Jt+4*i*(Nt-1),Bt=rt+(te+Jt)*(Nt<<1),Nt>>=1)),se===qt)Bt+=4;else{var Ce=n[Yt+3*se],be=n[Yt+3*se+1],Te=n[Yt+3*se+2];bt[Bt++]=Ce,bt[Bt++]=be,bt[Bt++]=Te,bt[Bt++]=255}--me}}}function Iv(n,t,i,s){for(var l=n[t++],h=1<<l,p=h+1,o=p+1,v=l+1,C=(1<<v)-1,I=0,U=0,Q=0,P=n[t++],K=new Int32Array(4096),V=null;;){for(;I<16&&P!==0;)U|=n[t++]<<I,I+=8,P===1?P=n[t++]:--P;if(I<v)break;var Y=U&C;if(U>>=v,I-=v,Y!==h){if(Y===p)break;for(var $=Y<o?Y:V,it=0,ht=$;ht>h;)ht=K[ht]>>8,++it;var St=ht;if(Q+it+($!==Y?1:0)>s)return void Ui.log("Warning, gif stream longer than expected.");i[Q++]=St;var Tt=Q+=it;for($!==Y&&(i[Q++]=St),ht=$;it--;)ht=K[ht],i[--Tt]=255&ht,ht>>=8;V!==null&&o<4096&&(K[o++]=V<<8|St,o>=C+1&&v<12&&(++v,C=C<<1|1)),V=Y}else o=p+1,C=(1<<(v=l+1))-1,V=null}return Q!==s&&Ui.log("Warning, gif stream shorter than expected."),i}/**
	 * @license
	  Copyright (c) 2008, Adobe Systems Incorporated
	  All rights reserved.

	  Redistribution and use in source and binary forms, with or without 
	  modification, are permitted provided that the following conditions are
	  met:

	  * Redistributions of source code must retain the above copyright notice, 
	    this list of conditions and the following disclaimer.
	  
	  * Redistributions in binary form must reproduce the above copyright
	    notice, this list of conditions and the following disclaimer in the 
	    documentation and/or other materials provided with the distribution.
	  
	  * Neither the name of Adobe Systems Incorporated nor the names of its 
	    contributors may be used to endorse or promote products derived from 
	    this software without specific prior written permission.

	  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
	  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
	  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
	  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
	  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
	  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
	  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
	  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
	  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
	  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
	  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/function Qg(n){var t,i,s,l,h,p=Math.floor,o=new Array(64),v=new Array(64),C=new Array(64),I=new Array(64),U=new Array(65535),Q=new Array(65535),P=new Array(64),K=new Array(64),V=[],Y=0,$=7,it=new Array(64),ht=new Array(64),St=new Array(64),Tt=new Array(256),Lt=new Array(2048),Ft=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],yt=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Rt=[0,1,2,3,4,5,6,7,8,9,10,11],Wt=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],At=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],lt=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],bt=[0,1,2,3,4,5,6,7,8,9,10,11],wt=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Xt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Gt(rt,dt){for(var Bt=0,Et=0,Nt=new Array,Ht=1;Ht<=16;Ht++){for(var ie=1;ie<=rt[Ht];ie++)Nt[dt[Et]]=[],Nt[dt[Et]][0]=Bt,Nt[dt[Et]][1]=Ht,Et++,Bt++;Bt*=2}return Nt}function Yt(rt){for(var dt=rt[0],Bt=rt[1]-1;Bt>=0;)dt&1<<Bt&&(Y|=1<<$),Bt--,--$<0&&(Y==255?(qt(255),qt(0)):qt(Y),$=7,Y=0)}function qt(rt){V.push(rt)}function te(rt){qt(rt>>8&255),qt(255&rt)}function Jt(rt,dt,Bt,Et,Nt){for(var Ht,ie=Nt[0],se=Nt[240],Ce=function(ce,ge){var Se,Ie,Ge,Ze,pr,wr,Sr,pe,Xe,ur,Ue=0;for(Xe=0;Xe<8;++Xe){Se=ce[Ue],Ie=ce[Ue+1],Ge=ce[Ue+2],Ze=ce[Ue+3],pr=ce[Ue+4],wr=ce[Ue+5],Sr=ce[Ue+6];var Jr=Se+(pe=ce[Ue+7]),he=Se-pe,sr=Ie+Sr,Me=Ie-Sr,xr=Ge+wr,Gr=Ge-wr,ke=Ze+pr,Fi=Ze-pr,zr=Jr+ke,Dr=Jr-ke,pt=sr+xr,G=sr-xr;ce[Ue]=zr+pt,ce[Ue+4]=zr-pt;var q=.707106781*(G+Dr);ce[Ue+2]=Dr+q,ce[Ue+6]=Dr-q;var tt=.382683433*((zr=Fi+Gr)-(G=Me+he)),_t=.5411961*zr+tt,Pt=1.306562965*G+tt,kt=.707106781*(pt=Gr+Me),Ot=he+kt,vt=he-kt;ce[Ue+5]=vt+_t,ce[Ue+3]=vt-_t,ce[Ue+1]=Ot+Pt,ce[Ue+7]=Ot-Pt,Ue+=8}for(Ue=0,Xe=0;Xe<8;++Xe){Se=ce[Ue],Ie=ce[Ue+8],Ge=ce[Ue+16],Ze=ce[Ue+24],pr=ce[Ue+32],wr=ce[Ue+40],Sr=ce[Ue+48];var jt=Se+(pe=ce[Ue+56]),de=Se-pe,ae=Ie+Sr,ne=Ie-Sr,Ee=Ge+wr,Re=Ge-wr,Fr=Ze+pr,ar=Ze-pr,Br=jt+Fr,Ur=jt-Fr,Ir=ae+Ee,Zr=ae-Ee;ce[Ue]=Br+Ir,ce[Ue+32]=Br-Ir;var cr=.707106781*(Zr+Ur);ce[Ue+16]=Ur+cr,ce[Ue+48]=Ur-cr;var jr=.382683433*((Br=ar+Re)-(Zr=ne+de)),ni=.5411961*Br+jr,zi=1.306562965*Zr+jr,Ut=.707106781*(Ir=Re+ne),Fe=de+Ut,xe=de-Ut;ce[Ue+40]=xe+ni,ce[Ue+24]=xe-ni,ce[Ue+8]=Fe+zi,ce[Ue+56]=Fe-zi,Ue++}for(Xe=0;Xe<64;++Xe)ur=ce[Xe]*ge[Xe],P[Xe]=ur>0?ur+.5|0:ur-.5|0;return P}(rt,dt),be=0;be<64;++be)K[Ft[be]]=Ce[be];var Te=K[0]-Bt;Bt=K[0],Te==0?Yt(Et[0]):(Yt(Et[Q[Ht=32767+Te]]),Yt(U[Ht]));for(var Le=63;Le>0&&K[Le]==0;)Le--;if(Le==0)return Yt(ie),Bt;for(var Qe,le=1;le<=Le;){for(var nt=le;K[le]==0&&le<=Le;)++le;var dr=le-nt;if(dr>=16){Qe=dr>>4;for(var $e=1;$e<=Qe;++$e)Yt(se);dr&=15}Ht=32767+K[le],Yt(Nt[(dr<<4)+Q[Ht]]),Yt(U[Ht]),le++}return Le!=63&&Yt(ie),Bt}function me(rt){rt=Math.min(Math.max(rt,1),100),h!=rt&&(function(dt){for(var Bt=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Et=0;Et<64;Et++){var Nt=p((Bt[Et]*dt+50)/100);Nt=Math.min(Math.max(Nt,1),255),o[Ft[Et]]=Nt}for(var Ht=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ie=0;ie<64;ie++){var se=p((Ht[ie]*dt+50)/100);se=Math.min(Math.max(se,1),255),v[Ft[ie]]=se}for(var Ce=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],be=0,Te=0;Te<8;Te++)for(var Le=0;Le<8;Le++)C[be]=1/(o[Ft[be]]*Ce[Te]*Ce[Le]*8),I[be]=1/(v[Ft[be]]*Ce[Te]*Ce[Le]*8),be++}(rt<50?Math.floor(5e3/rt):Math.floor(200-2*rt)),h=rt)}this.encode=function(rt,dt){dt&&me(dt),V=new Array,Y=0,$=7,te(65496),te(65504),te(16),qt(74),qt(70),qt(73),qt(70),qt(0),qt(1),qt(1),qt(0),te(1),te(1),qt(0),qt(0),function(){te(65499),te(132),qt(0);for(var Ie=0;Ie<64;Ie++)qt(o[Ie]);qt(1);for(var Ge=0;Ge<64;Ge++)qt(v[Ge])}(),function(Ie,Ge){te(65472),te(17),qt(8),te(Ge),te(Ie),qt(3),qt(1),qt(17),qt(0),qt(2),qt(17),qt(1),qt(3),qt(17),qt(1)}(rt.width,rt.height),function(){te(65476),te(418),qt(0);for(var Ie=0;Ie<16;Ie++)qt(yt[Ie+1]);for(var Ge=0;Ge<=11;Ge++)qt(Rt[Ge]);qt(16);for(var Ze=0;Ze<16;Ze++)qt(Wt[Ze+1]);for(var pr=0;pr<=161;pr++)qt(At[pr]);qt(1);for(var wr=0;wr<16;wr++)qt(lt[wr+1]);for(var Sr=0;Sr<=11;Sr++)qt(bt[Sr]);qt(17);for(var pe=0;pe<16;pe++)qt(wt[pe+1]);for(var Xe=0;Xe<=161;Xe++)qt(Xt[Xe])}(),te(65498),te(12),qt(3),qt(1),qt(0),qt(2),qt(17),qt(3),qt(17),qt(0),qt(63),qt(0);var Bt=0,Et=0,Nt=0;Y=0,$=7,this.encode.displayName="_encode_";for(var Ht,ie,se,Ce,be,Te,Le,Qe,le,nt=rt.data,dr=rt.width,$e=rt.height,ce=4*dr,ge=0;ge<$e;){for(Ht=0;Ht<ce;){for(be=ce*ge+Ht,Le=-1,Qe=0,le=0;le<64;le++)Te=be+(Qe=le>>3)*ce+(Le=4*(7&le)),ge+Qe>=$e&&(Te-=ce*(ge+1+Qe-$e)),Ht+Le>=ce&&(Te-=Ht+Le-ce+4),ie=nt[Te++],se=nt[Te++],Ce=nt[Te++],it[le]=(Lt[ie]+Lt[se+256>>0]+Lt[Ce+512>>0]>>16)-128,ht[le]=(Lt[ie+768>>0]+Lt[se+1024>>0]+Lt[Ce+1280>>0]>>16)-128,St[le]=(Lt[ie+1280>>0]+Lt[se+1536>>0]+Lt[Ce+1792>>0]>>16)-128;Bt=Jt(it,C,Bt,t,s),Et=Jt(ht,I,Et,i,l),Nt=Jt(St,I,Nt,i,l),Ht+=32}ge+=8}if($>=0){var Se=[];Se[1]=$+1,Se[0]=(1<<$+1)-1,Yt(Se)}return te(65497),new Uint8Array(V)},n=n||50,function(){for(var rt=String.fromCharCode,dt=0;dt<256;dt++)Tt[dt]=rt(dt)}(),t=Gt(yt,Rt),i=Gt(lt,bt),s=Gt(Wt,At),l=Gt(wt,Xt),function(){for(var rt=1,dt=2,Bt=1;Bt<=15;Bt++){for(var Et=rt;Et<dt;Et++)Q[32767+Et]=Bt,U[32767+Et]=[],U[32767+Et][1]=Bt,U[32767+Et][0]=Et;for(var Nt=-(dt-1);Nt<=-rt;Nt++)Q[32767+Nt]=Bt,U[32767+Nt]=[],U[32767+Nt][1]=Bt,U[32767+Nt][0]=dt-1+Nt;rt<<=1,dt<<=1}}(),function(){for(var rt=0;rt<256;rt++)Lt[rt]=19595*rt,Lt[rt+256>>0]=38470*rt,Lt[rt+512>>0]=7471*rt+32768,Lt[rt+768>>0]=-11059*rt,Lt[rt+1024>>0]=-21709*rt,Lt[rt+1280>>0]=32768*rt+8421375,Lt[rt+1536>>0]=-27439*rt,Lt[rt+1792>>0]=-5329*rt}(),me(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function So(n,t){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Ev(n){function t(yt){if(!yt)throw Error("assert :P")}function i(yt,Rt,Wt){for(var At=0;4>At;At++)if(yt[Rt+At]!=Wt.charCodeAt(At))return!0;return!1}function s(yt,Rt,Wt,At,lt){for(var bt=0;bt<lt;bt++)yt[Rt+bt]=Wt[At+bt]}function l(yt,Rt,Wt,At){for(var lt=0;lt<At;lt++)yt[Rt+lt]=Wt}function h(yt){return new Int32Array(yt)}function p(yt,Rt){for(var Wt=[],At=0;At<yt;At++)Wt.push(new Rt);return Wt}function o(yt,Rt){var Wt=[];return function At(lt,bt,wt){for(var Xt=wt[bt],Gt=0;Gt<Xt&&(lt.push(wt.length>bt+1?[]:new Rt),!(wt.length<bt+1));Gt++)At(lt[Gt],bt+1,wt)}(Wt,0,yt),Wt}var v=function(){var yt=this;function Rt(u,f){for(var _=1<<f-1>>>0;u&_;)_>>>=1;return _?(u&_-1)+_:u}function Wt(u,f,_,F,E){t(!(F%_));do u[f+(F-=_)]=E;while(0<F)}function At(u,f,_,F,E){if(t(2328>=E),512>=E)var k=h(512);else if((k=h(E))==null)return 0;return function(D,O,z,H,X,ot){var Z,st,mt=O,gt=1<<z,ut=h(16),ft=h(16);for(t(X!=0),t(H!=null),t(D!=null),t(0<z),st=0;st<X;++st){if(15<H[st])return 0;++ut[H[st]]}if(ut[0]==X)return 0;for(ft[1]=0,Z=1;15>Z;++Z){if(ut[Z]>1<<Z)return 0;ft[Z+1]=ft[Z]+ut[Z]}for(st=0;st<X;++st)Z=H[st],0<H[st]&&(ot[ft[Z]++]=st);if(ft[15]==1)return(H=new lt).g=0,H.value=ot[0],Wt(D,mt,1,gt,H),gt;var zt,Kt=-1,Mt=gt-1,ee=0,oe=1,_e=1,re=1<<z;for(st=0,Z=1,X=2;Z<=z;++Z,X<<=1){if(oe+=_e<<=1,0>(_e-=ut[Z]))return 0;for(;0<ut[Z];--ut[Z])(H=new lt).g=Z,H.value=ot[st++],Wt(D,mt+ee,X,re,H),ee=Rt(ee,Z)}for(Z=z+1,X=2;15>=Z;++Z,X<<=1){if(oe+=_e<<=1,0>(_e-=ut[Z]))return 0;for(;0<ut[Z];--ut[Z]){if(H=new lt,(ee&Mt)!=Kt){for(mt+=re,zt=1<<(Kt=Z)-z;15>Kt&&!(0>=(zt-=ut[Kt]));)++Kt,zt<<=1;gt+=re=1<<(zt=Kt-z),D[O+(Kt=ee&Mt)].g=zt+z,D[O+Kt].value=mt-O-Kt}H.g=Z-z,H.value=ot[st++],Wt(D,mt+(ee>>z),X,re,H),ee=Rt(ee,Z)}}return oe!=2*ft[15]-1?0:gt}(u,f,_,F,E,k)}function lt(){this.value=this.g=0}function bt(){this.value=this.g=0}function wt(){this.G=p(5,lt),this.H=h(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=p(ci,bt)}function Xt(u,f,_,F){t(u!=null),t(f!=null),t(2147483648>F),u.Ca=254,u.I=0,u.b=-8,u.Ka=0,u.oa=f,u.pa=_,u.Jd=f,u.Yc=_+F,u.Zc=4<=F?_+F-4+1:_,Ht(u)}function Gt(u,f){for(var _=0;0<f--;)_|=se(u,128)<<f;return _}function Yt(u,f){var _=Gt(u,f);return ie(u)?-_:_}function qt(u,f,_,F){var E,k=0;for(t(u!=null),t(f!=null),t(4294967288>F),u.Sb=F,u.Ra=0,u.u=0,u.h=0,4<F&&(F=4),E=0;E<F;++E)k+=f[_+E]<<8*E;u.Ra=k,u.bb=F,u.oa=f,u.pa=_}function te(u){for(;8<=u.u&&u.bb<u.Sb;)u.Ra>>>=8,u.Ra+=u.oa[u.pa+u.bb]<<uo-8>>>0,++u.bb,u.u-=8;Bt(u)&&(u.h=1,u.u=0)}function Jt(u,f){if(t(0<=f),!u.h&&f<=$o){var _=dt(u)&Ko[f];return u.u+=f,te(u),_}return u.h=1,u.u=0}function me(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function rt(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function dt(u){return u.Ra>>>(u.u&uo-1)>>>0}function Bt(u){return t(u.bb<=u.Sb),u.h||u.bb==u.Sb&&u.u>uo}function Et(u,f){u.u=f,u.h=Bt(u)}function Nt(u){u.u>=Vs&&(t(u.u>=Vs),te(u))}function Ht(u){t(u!=null&&u.oa!=null),u.pa<u.Zc?(u.I=(u.oa[u.pa++]|u.I<<8)>>>0,u.b+=8):(t(u!=null&&u.oa!=null),u.pa<u.Yc?(u.b+=8,u.I=u.oa[u.pa++]|u.I<<8):u.Ka?u.b=0:(u.I<<=8,u.b+=8,u.Ka=1))}function ie(u){return Gt(u,1)}function se(u,f){var _=u.Ca;0>u.b&&Ht(u);var F=u.b,E=_*f>>>8,k=(u.I>>>F>E)+0;for(k?(_-=E,u.I-=E+1<<F>>>0):_=E+1,F=_,E=0;256<=F;)E+=8,F>>=8;return F=7^E+bn[F],u.b-=F,u.Ca=(_<<F)-1,k}function Ce(u,f,_){u[f+0]=_>>24&255,u[f+1]=_>>16&255,u[f+2]=_>>8&255,u[f+3]=_>>0&255}function be(u,f){return u[f+0]<<0|u[f+1]<<8}function Te(u,f){return be(u,f)|u[f+2]<<16}function Le(u,f){return be(u,f)|be(u,f+2)<<16}function Qe(u,f){var _=1<<f;return t(u!=null),t(0<f),u.X=h(_),u.X==null?0:(u.Mb=32-f,u.Xa=f,1)}function le(u,f){t(u!=null),t(f!=null),t(u.Xa==f.Xa),s(f.X,0,u.X,0,1<<f.Xa)}function nt(){this.X=[],this.Xa=this.Mb=0}function dr(u,f,_,F){t(_!=null),t(F!=null);var E=_[0],k=F[0];return E==0&&(E=(u*k+f/2)/f),k==0&&(k=(f*E+u/2)/u),0>=E||0>=k?0:(_[0]=E,F[0]=k,1)}function $e(u,f){return u+(1<<f)-1>>>f}function ce(u,f){return((4278255360&u)+(4278255360&f)>>>0&4278255360)+((16711935&u)+(16711935&f)>>>0&16711935)>>>0}function ge(u,f){yt[f]=function(_,F,E,k,D,O,z){var H;for(H=0;H<D;++H){var X=yt[u](O[z+H-1],E,k+H);O[z+H]=ce(_[F+H],X)}}}function Se(){this.ud=this.hd=this.jd=0}function Ie(u,f){return((4278124286&(u^f))>>>1)+(u&f)>>>0}function Ge(u){return 0<=u&&256>u?u:0>u?0:255<u?255:void 0}function Ze(u,f){return Ge(u+(u-f+.5>>1))}function pr(u,f,_){return Math.abs(f-_)-Math.abs(u-_)}function wr(u,f,_,F,E,k,D){for(F=k[D-1],_=0;_<E;++_)k[D+_]=F=ce(u[f+_],F)}function Sr(u,f,_,F,E){var k;for(k=0;k<_;++k){var D=u[f+k],O=D>>8&255,z=16711935&(z=(z=16711935&D)+((O<<16)+O));F[E+k]=(4278255360&D)+z>>>0}}function pe(u,f){f.jd=u>>0&255,f.hd=u>>8&255,f.ud=u>>16&255}function Xe(u,f,_,F,E,k){var D;for(D=0;D<F;++D){var O=f[_+D],z=O>>>8,H=O,X=255&(X=(X=O>>>16)+((u.jd<<24>>24)*(z<<24>>24)>>>5));H=255&(H=(H=H+((u.hd<<24>>24)*(z<<24>>24)>>>5))+((u.ud<<24>>24)*(X<<24>>24)>>>5)),E[k+D]=(4278255360&O)+(X<<16)+H}}function ur(u,f,_,F,E){yt[f]=function(k,D,O,z,H,X,ot,Z,st){for(z=ot;z<Z;++z)for(ot=0;ot<st;++ot)H[X++]=E(O[F(k[D++])])},yt[u]=function(k,D,O,z,H,X,ot){var Z=8>>k.b,st=k.Ea,mt=k.K[0],gt=k.w;if(8>Z)for(k=(1<<k.b)-1,gt=(1<<Z)-1;D<O;++D){var ut,ft=0;for(ut=0;ut<st;++ut)ut&k||(ft=F(z[H++])),X[ot++]=E(mt[ft&gt]),ft>>=Z}else yt["VP8LMapColor"+_](z,H,mt,gt,X,ot,D,O,st)}}function Ue(u,f,_,F,E){for(_=f+_;f<_;){var k=u[f++];F[E++]=k>>16&255,F[E++]=k>>8&255,F[E++]=k>>0&255}}function Jr(u,f,_,F,E){for(_=f+_;f<_;){var k=u[f++];F[E++]=k>>16&255,F[E++]=k>>8&255,F[E++]=k>>0&255,F[E++]=k>>24&255}}function he(u,f,_,F,E){for(_=f+_;f<_;){var k=(D=u[f++])>>16&240|D>>12&15,D=D>>0&240|D>>28&15;F[E++]=k,F[E++]=D}}function sr(u,f,_,F,E){for(_=f+_;f<_;){var k=(D=u[f++])>>16&248|D>>13&7,D=D>>5&224|D>>3&31;F[E++]=k,F[E++]=D}}function Me(u,f,_,F,E){for(_=f+_;f<_;){var k=u[f++];F[E++]=k>>0&255,F[E++]=k>>8&255,F[E++]=k>>16&255}}function xr(u,f,_,F,E,k){if(k==0)for(_=f+_;f<_;)Ce(F,((k=u[f++])[0]>>24|k[1]>>8&65280|k[2]<<8&16711680|k[3]<<24)>>>0),E+=32;else s(F,E,u,f,_)}function Gr(u,f){yt[f][0]=yt[u+"0"],yt[f][1]=yt[u+"1"],yt[f][2]=yt[u+"2"],yt[f][3]=yt[u+"3"],yt[f][4]=yt[u+"4"],yt[f][5]=yt[u+"5"],yt[f][6]=yt[u+"6"],yt[f][7]=yt[u+"7"],yt[f][8]=yt[u+"8"],yt[f][9]=yt[u+"9"],yt[f][10]=yt[u+"10"],yt[f][11]=yt[u+"11"],yt[f][12]=yt[u+"12"],yt[f][13]=yt[u+"13"],yt[f][14]=yt[u+"0"],yt[f][15]=yt[u+"0"]}function ke(u){return u==da||u==Zl||u==PA||u==dl}function Fi(){this.eb=[],this.size=this.A=this.fb=0}function zr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Dr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Fi,this.f.kb=new zr,this.sd=null}function pt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function G(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function q(u){return alert("todo:WebPSamplerProcessPlane"),u.T}function tt(u,f){var _=u.T,F=f.ba.f.RGBA,E=F.eb,k=F.fb+u.ka*F.A,D=Fs[f.ba.S],O=u.y,z=u.O,H=u.f,X=u.N,ot=u.ea,Z=u.W,st=f.cc,mt=f.dc,gt=f.Mc,ut=f.Nc,ft=u.ka,zt=u.ka+u.T,Kt=u.U,Mt=Kt+1>>1;for(ft==0?D(O,z,null,null,H,X,ot,Z,H,X,ot,Z,E,k,null,null,Kt):(D(f.ec,f.fc,O,z,st,mt,gt,ut,H,X,ot,Z,E,k-F.A,E,k,Kt),++_);ft+2<zt;ft+=2)st=H,mt=X,gt=ot,ut=Z,X+=u.Rc,Z+=u.Rc,k+=2*F.A,D(O,(z+=2*u.fa)-u.fa,O,z,st,mt,gt,ut,H,X,ot,Z,E,k-F.A,E,k,Kt);return z+=u.fa,u.j+zt<u.o?(s(f.ec,f.fc,O,z,Kt),s(f.cc,f.dc,H,X,Mt),s(f.Mc,f.Nc,ot,Z,Mt),_--):1&zt||D(O,z,null,null,H,X,ot,Z,H,X,ot,Z,E,k+F.A,null,null,Kt),_}function _t(u,f,_){var F=u.F,E=[u.J];if(F!=null){var k=u.U,D=f.ba.S,O=D==Xo||D==PA;f=f.ba.f.RGBA;var z=[0],H=u.ka;z[0]=u.T,u.Kb&&(H==0?--z[0]:(--H,E[0]-=u.width),u.j+u.ka+u.T==u.o&&(z[0]=u.o-u.j-H));var X=f.eb;H=f.fb+H*f.A,u=Go(F,E[0],u.width,k,z,X,H+(O?0:3),f.A),t(_==z),u&&ke(D)&&Ua(X,H,O,k,z,f.A)}return 0}function Pt(u){var f=u.ma,_=f.ba.S,F=11>_,E=_==Wo||_==UA||_==Xo||_==hl||_==12||ke(_);if(f.memory=null,f.Ib=null,f.Jb=null,f.Nd=null,!co(f.Oa,u,E?11:12))return 0;if(E&&ke(_)&&we(),u.da)alert("todo:use_scaling");else{if(F){if(f.Ib=q,u.Kb){if(_=u.U+1>>1,f.memory=h(u.U+2*_),f.memory==null)return 0;f.ec=f.memory,f.fc=0,f.cc=f.ec,f.dc=f.fc+u.U,f.Mc=f.cc,f.Nc=f.dc+_,f.Ib=tt,we()}}else alert("todo:EmitYUV");E&&(f.Jb=_t,F&&Zt())}if(F&&!QA){for(u=0;256>u;++u)ga[u]=89858*(u-128)+Zo>>ti,gr[u]=-22014*(u-128)+Zo,Ye[u]=-45773*(u-128),tc[u]=113618*(u-128)+Zo>>ti;for(u=fa;u<wo;++u)f=76283*(u-16)+Zo>>ti,b[u-fa]=zn(f,255),r[u-fa]=zn(f+8>>4,15);QA=1}return 1}function kt(u){var f=u.ma,_=u.U,F=u.T;return t(!(1&u.ka)),0>=_||0>=F?0:(_=f.Ib(u,f),f.Jb!=null&&f.Jb(u,f,_),f.Dc+=_,1)}function Ot(u){u.ma.memory=null}function vt(u,f,_,F){return Jt(u,8)!=47?0:(f[0]=Jt(u,14)+1,_[0]=Jt(u,14)+1,F[0]=Jt(u,1),Jt(u,3)!=0?0:!u.h)}function jt(u,f){if(4>u)return u+1;var _=u-2>>1;return(2+(1&u)<<_)+Jt(f,_)+1}function de(u,f){return 120<f?f-120:1<=(_=((_=Vc[f-1])>>4)*u+(8-(15&_)))?_:1;var _}function ae(u,f,_){var F=dt(_),E=u[f+=255&F].g-8;return 0<E&&(Et(_,_.u+8),F=dt(_),f+=u[f].value,f+=F&(1<<E)-1),Et(_,_.u+u[f].g),u[f].value}function ne(u,f,_){return _.g+=u.g,_.value+=u.value<<f>>>0,t(8>=_.g),u.g}function Ee(u,f,_){var F=u.xc;return t((f=F==0?0:u.vc[u.md*(_>>F)+(f>>F)])<u.Wb),u.Ya[f]}function Re(u,f,_,F){var E=u.ab,k=u.c*f,D=u.C;f=D+f;var O=_,z=F;for(F=u.Ta,_=u.Ua;0<E--;){var H=u.gc[E],X=D,ot=f,Z=O,st=z,mt=(z=F,O=_,H.Ea);switch(t(X<ot),t(ot<=H.nc),H.hc){case 2:qo(Z,st,(ot-X)*mt,z,O);break;case 0:var gt=X,ut=ot,ft=z,zt=O,Kt=(re=H).Ea;gt==0&&(IA(Z,st,null,null,1,ft,zt),wr(Z,st+1,0,0,Kt-1,ft,zt+1),st+=Kt,zt+=Kt,++gt);for(var Mt=1<<re.b,ee=Mt-1,oe=$e(Kt,re.b),_e=re.K,re=re.w+(gt>>re.b)*oe;gt<ut;){var ye=_e,Oe=re,hr=1;for(Ea(Z,st,ft,zt-Kt,1,ft,zt);hr<Kt;){var He=(hr&~ee)+Mt;He>Kt&&(He=Kt),(0,$s[ye[Oe++]>>8&15])(Z,st+ +hr,ft,zt+hr-Kt,He-hr,ft,zt+hr),hr=He}st+=Kt,zt+=Kt,++gt&ee||(re+=oe)}ot!=H.nc&&s(z,O-mt,z,O+(ot-X-1)*mt,mt);break;case 1:for(mt=Z,ut=st,Kt=(Z=H.Ea)-(zt=Z&~(ft=(st=1<<H.b)-1)),gt=$e(Z,H.b),Mt=H.K,H=H.w+(X>>H.b)*gt;X<ot;){for(ee=Mt,oe=H,_e=new Se,re=ut+zt,ye=ut+Z;ut<re;)pe(ee[oe++],_e),Lr(_e,mt,ut,st,z,O),ut+=st,O+=st;ut<ye&&(pe(ee[oe++],_e),Lr(_e,mt,ut,Kt,z,O),ut+=Kt,O+=Kt),++X&ft||(H+=gt)}break;case 3:if(Z==z&&st==O&&0<H.b){for(ut=z,Z=mt=O+(ot-X)*mt-(zt=(ot-X)*$e(H.Ea,H.b)),st=z,ft=O,gt=[],zt=(Kt=zt)-1;0<=zt;--zt)gt[zt]=st[ft+zt];for(zt=Kt-1;0<=zt;--zt)ut[Z+zt]=gt[zt];ns(H,X,ot,z,mt,z,O)}else ns(H,X,ot,Z,st,z,O)}O=F,z=_}z!=_&&s(F,_,O,z,k)}function Fr(u,f){var _=u.V,F=u.Ba+u.c*u.C,E=f-u.C;if(t(f<=u.l.o),t(16>=E),0<E){var k=u.l,D=u.Ta,O=u.Ua,z=k.width;if(Re(u,E,_,F),E=O=[O],t((_=u.C)<(F=f)),t(k.v<k.va),F>k.o&&(F=k.o),_<k.j){var H=k.j-_;_=k.j,E[0]+=H*z}if(_>=F?_=0:(E[0]+=4*k.v,k.ka=_-k.j,k.U=k.va-k.v,k.T=F-_,_=1),_){if(O=O[0],11>(_=u.ca).S){var X=_.f.RGBA,ot=(F=_.S,E=k.U,k=k.T,H=X.eb,X.A),Z=k;for(X=X.fb+u.Ma*X.A;0<Z--;){var st=D,mt=O,gt=E,ut=H,ft=X;switch(F){case La:In(st,mt,gt,ut,ft);break;case Wo:qs(st,mt,gt,ut,ft);break;case da:qs(st,mt,gt,ut,ft),Ua(ut,ft,0,gt,1,0);break;case Xl:ho(st,mt,gt,ut,ft);break;case UA:xr(st,mt,gt,ut,ft,1);break;case Zl:xr(st,mt,gt,ut,ft,1),Ua(ut,ft,0,gt,1,0);break;case Xo:xr(st,mt,gt,ut,ft,0);break;case PA:xr(st,mt,gt,ut,ft,0),Ua(ut,ft,1,gt,1,0);break;case hl:Hn(st,mt,gt,ut,ft);break;case dl:Hn(st,mt,gt,ut,ft),Pa(ut,ft,gt,1,0);break;case Oc:Vn(st,mt,gt,ut,ft);break;default:t(0)}O+=z,X+=ot}u.Ma+=k}else alert("todo:EmitRescaledRowsYUVA");t(u.Ma<=_.height)}}u.C=f,t(u.C<=u.i)}function ar(u){var f;if(0<u.ua)return 0;for(f=0;f<u.Wb;++f){var _=u.Ya[f].G,F=u.Ya[f].H;if(0<_[1][F[1]+0].g||0<_[2][F[2]+0].g||0<_[3][F[3]+0].g)return 0}return 1}function Br(u,f,_,F,E,k){if(u.Z!=0){var D=u.qd,O=u.rd;for(t(pa[u.Z]!=null);f<_;++f)pa[u.Z](D,O,F,E,F,E,k),D=F,O=E,E+=k;u.qd=D,u.rd=O}}function Ur(u,f){var _=u.l.ma,F=_.Z==0||_.Z==1?u.l.j:u.C;if(F=u.C<F?F:u.C,t(f<=u.l.o),f>F){var E=u.l.width,k=_.ca,D=_.tb+E*F,O=u.V,z=u.Ba+u.c*F,H=u.gc;t(u.ab==1),t(H[0].hc==3),Ks(H[0],F,f,O,z,k,D),Br(_,F,f,k,D,E)}u.C=u.Ma=f}function Ir(u,f,_,F,E,k,D){var O=u.$/F,z=u.$%F,H=u.m,X=u.s,ot=_+u.$,Z=ot;E=_+F*E;var st=_+F*k,mt=280+X.ua,gt=u.Pb?O:16777216,ut=0<X.ua?X.Wa:null,ft=X.wc,zt=ot<st?Ee(X,z,O):null;t(u.C<k),t(st<=E);var Kt=!1;t:for(;;){for(;Kt||ot<st;){var Mt=0;if(O>=gt){var ee=ot-_;t((gt=u).Pb),gt.wd=gt.m,gt.xd=ee,0<gt.s.ua&&le(gt.s.Wa,gt.s.vb),gt=O+as}if(z&ft||(zt=Ee(X,z,O)),t(zt!=null),zt.Qb&&(f[ot]=zt.qb,Kt=!0),!Kt)if(Nt(H),zt.jc){Mt=H,ee=f;var oe=ot,_e=zt.pd[dt(Mt)&ci-1];t(zt.jc),256>_e.g?(Et(Mt,Mt.u+_e.g),ee[oe]=_e.value,Mt=0):(Et(Mt,Mt.u+_e.g-256),t(256<=_e.value),Mt=_e.value),Mt==0&&(Kt=!0)}else Mt=ae(zt.G[0],zt.H[0],H);if(H.h)break;if(Kt||256>Mt){if(!Kt)if(zt.nd)f[ot]=(zt.qb|Mt<<8)>>>0;else{if(Nt(H),Kt=ae(zt.G[1],zt.H[1],H),Nt(H),ee=ae(zt.G[2],zt.H[2],H),oe=ae(zt.G[3],zt.H[3],H),H.h)break;f[ot]=(oe<<24|Kt<<16|Mt<<8|ee)>>>0}if(Kt=!1,++ot,++z>=F&&(z=0,++O,D!=null&&O<=k&&!(O%16)&&D(u,O),ut!=null))for(;Z<ot;)Mt=f[Z++],ut.X[(506832829*Mt&4294967295)>>>ut.Mb]=Mt}else if(280>Mt){if(Mt=jt(Mt-256,H),ee=ae(zt.G[4],zt.H[4],H),Nt(H),ee=de(F,ee=jt(ee,H)),H.h)break;if(ot-_<ee||E-ot<Mt)break t;for(oe=0;oe<Mt;++oe)f[ot+oe]=f[ot+oe-ee];for(ot+=Mt,z+=Mt;z>=F;)z-=F,++O,D!=null&&O<=k&&!(O%16)&&D(u,O);if(t(ot<=E),z&ft&&(zt=Ee(X,z,O)),ut!=null)for(;Z<ot;)Mt=f[Z++],ut.X[(506832829*Mt&4294967295)>>>ut.Mb]=Mt}else{if(!(Mt<mt))break t;for(Kt=Mt-280,t(ut!=null);Z<ot;)Mt=f[Z++],ut.X[(506832829*Mt&4294967295)>>>ut.Mb]=Mt;Mt=ot,t(!(Kt>>>(ee=ut).Xa)),f[Mt]=ee.X[Kt],Kt=!0}Kt||t(H.h==Bt(H))}if(u.Pb&&H.h&&ot<E)t(u.m.h),u.a=5,u.m=u.wd,u.$=u.xd,0<u.s.ua&&le(u.s.vb,u.s.Wa);else{if(H.h)break t;D!=null&&D(u,O>k?k:O),u.a=0,u.$=ot-_}return 1}return u.a=3,0}function Zr(u){t(u!=null),u.vc=null,u.yc=null,u.Ya=null;var f=u.Wa;f!=null&&(f.X=null),u.vb=null,t(u!=null)}function cr(){var u=new Gl;return u==null?null:(u.a=0,u.xb=Ne,Gr("Predictor","VP8LPredictors"),Gr("Predictor","VP8LPredictors_C"),Gr("PredictorAdd","VP8LPredictorsAdd"),Gr("PredictorAdd","VP8LPredictorsAdd_C"),qo=Sr,Lr=Xe,In=Ue,qs=Jr,Hn=he,Vn=sr,ho=Me,yt.VP8LMapColor32b=js,yt.VP8LMapColor8b=Wl,u)}function jr(u,f,_,F,E){var k=1,D=[u],O=[f],z=F.m,H=F.s,X=null,ot=0;t:for(;;){if(_)for(;k&&Jt(z,1);){var Z=D,st=O,mt=F,gt=1,ut=mt.m,ft=mt.gc[mt.ab],zt=Jt(ut,2);if(mt.Oc&1<<zt)k=0;else{switch(mt.Oc|=1<<zt,ft.hc=zt,ft.Ea=Z[0],ft.nc=st[0],ft.K=[null],++mt.ab,t(4>=mt.ab),zt){case 0:case 1:ft.b=Jt(ut,3)+2,gt=jr($e(ft.Ea,ft.b),$e(ft.nc,ft.b),0,mt,ft.K),ft.K=ft.K[0];break;case 3:var Kt,Mt=Jt(ut,8)+1,ee=16<Mt?0:4<Mt?1:2<Mt?2:3;if(Z[0]=$e(ft.Ea,ee),ft.b=ee,Kt=gt=jr(Mt,1,0,mt,ft.K)){var oe,_e=Mt,re=ft,ye=1<<(8>>re.b),Oe=h(ye);if(Oe==null)Kt=0;else{var hr=re.K[0],He=re.w;for(Oe[0]=re.K[0][0],oe=1;oe<1*_e;++oe)Oe[oe]=ce(hr[He+oe],Oe[oe-1]);for(;oe<4*ye;++oe)Oe[oe]=0;re.K[0]=null,re.K[0]=Oe,Kt=1}}gt=Kt;break;case 2:break;default:t(0)}k=gt}}if(D=D[0],O=O[0],k&&Jt(z,1)&&!(k=1<=(ot=Jt(z,4))&&11>=ot)){F.a=3;break t}var rr;if(rr=k)e:{var _r,mr,ei,Rr=F,Xr=D,oi=O,Qr=ot,Ai=_,Li=Rr.m,Ei=Rr.s,Gi=[null],Wi=1,un=0,os=Cs[Qr];r:for(;;){if(Ai&&Jt(Li,1)){var Xi=Jt(Li,3)+2,bi=$e(Xr,Xi),xn=$e(oi,Xi),As=bi*xn;if(!jr(bi,xn,0,Rr,Gi))break r;for(Gi=Gi[0],Ei.xc=Xi,_r=0;_r<As;++_r){var ls=Gi[_r]>>8&65535;Gi[_r]=ls,ls>=Wi&&(Wi=ls+1)}}if(Li.h)break r;for(mr=0;5>mr;++mr){var Hr=zc[mr];!mr&&0<Qr&&(Hr+=1<<Qr),un<Hr&&(un=Hr)}var hn=p(Wi*os,lt),rn=Wi,xi=p(rn,wt);if(xi==null)var Da=null;else t(65536>=rn),Da=xi;var Yo=h(un);if(Da==null||Yo==null||hn==null){Rr.a=1;break r}var Ni=hn;for(_r=ei=0;_r<Wi;++_r){var Ss=Da[_r],Na=Ss.G,Oa=Ss.H,Ra=0,fl=1,ec=0;for(mr=0;5>mr;++mr){Hr=zc[mr],Na[mr]=Ni,Oa[mr]=ei,!mr&&0<Qr&&(Hr+=1<<Qr);n:{var MA,gl=Hr,Jo=Rr,ma=Yo,Of=Ni,cd=ei,rc=0,Is=Jo.m,Zu=Jt(Is,1);if(l(ma,0,0,gl),Zu){var Rf=Jt(Is,1)+1,zf=Jt(Is,1),Hf=Jt(Is,zf==0?1:8);ma[Hf]=1,Rf==2&&(ma[Hf=Jt(Is,8)]=1);var ic=1}else{var nc=h(19),ml=Jt(Is,4)+4;if(19<ml){Jo.a=3;var ya=0;break n}for(MA=0;MA<ml;++MA)nc[LA[MA]]=Jt(Is,3);var Ws=void 0,va=void 0,ud=Jo,yl=nc,Yu=gl,hd=ma,Oi=0,_o=ud.m,dd=8,kA=p(128,lt);i:for(;At(kA,0,7,yl,19);){if(Jt(_o,1)){var vl=2+2*Jt(_o,3);if((Ws=2+Jt(_o,vl))>Yu)break i}else Ws=Yu;for(va=0;va<Yu&&Ws--;){Nt(_o);var Zc=kA[0+(127&dt(_o))];Et(_o,_o.u+Zc.g);var DA=Zc.value;if(16>DA)hd[va++]=DA,DA!=0&&(dd=DA);else{var Vf=DA==16,jf=DA-16,Kf=qu[jf],$f=Jt(_o,Rc[jf])+Kf;if(va+$f>Yu)break i;for(var pd=Vf?dd:0;0<$f--;)hd[va++]=pd}}Oi=1;break i}Oi||(ud.a=3),ic=Oi}(ic=ic&&!Is.h)&&(rc=At(Of,cd,8,ma,gl)),ic&&rc!=0?ya=rc:(Jo.a=3,ya=0)}if(ya==0)break r;if(fl&&Hc[mr]==1&&(fl=Ni[ei].g==0),Ra+=Ni[ei].g,ei+=ya,3>=mr){var Yc,Jc=Yo[0];for(Yc=1;Yc<Hr;++Yc)Yo[Yc]>Jc&&(Jc=Yo[Yc]);ec+=Jc}}if(Ss.nd=fl,Ss.Qb=0,fl&&(Ss.qb=(Na[3][Oa[3]+0].value<<24|Na[1][Oa[1]+0].value<<16|Na[2][Oa[2]+0].value)>>>0,Ra==0&&256>Na[0][Oa[0]+0].value&&(Ss.Qb=1,Ss.qb+=Na[0][Oa[0]+0].value<<8)),Ss.jc=!Ss.Qb&&6>ec,Ss.jc){var tu,bo=Ss;for(tu=0;tu<ci;++tu){var Xs=tu,NA=bo.pd[Xs],OA=bo.G[0][bo.H[0]+Xs];256<=OA.value?(NA.g=OA.g+256,NA.value=OA.value):(NA.g=0,NA.value=0,Xs>>=ne(OA,8,NA),Xs>>=ne(bo.G[1][bo.H[1]+Xs],16,NA),Xs>>=ne(bo.G[2][bo.H[2]+Xs],0,NA),ne(bo.G[3][bo.H[3]+Xs],24,NA))}}}Ei.vc=Gi,Ei.Wb=Wi,Ei.Ya=Da,Ei.yc=hn,rr=1;break e}rr=0}if(!(k=rr)){F.a=3;break t}if(0<ot){if(H.ua=1<<ot,!Qe(H.Wa,ot)){F.a=1,k=0;break t}}else H.ua=0;var sc=F,eu=D,qf=O,Ju=sc.s,fd=Ju.xc;if(sc.c=eu,sc.i=qf,Ju.md=$e(eu,fd),Ju.wc=fd==0?-1:(1<<fd)-1,_){F.xb=Wu;break t}if((X=h(D*O))==null){F.a=1,k=0;break t}k=(k=Ir(F,X,0,D,O,O,null))&&!z.h;break t}return k?(E!=null?E[0]=X:(t(X==null),t(_)),F.$=0,_||Zr(H)):Zr(H),k}function ni(u,f){var _=u.c*u.i,F=_+f+16*f;return t(u.c<=f),u.V=h(F),u.V==null?(u.Ta=null,u.Ua=0,u.a=1,0):(u.Ta=u.V,u.Ua=u.Ba+_+f,1)}function zi(u,f){var _=u.C,F=f-_,E=u.V,k=u.Ba+u.c*_;for(t(f<=u.l.o);0<F;){var D=16<F?16:F,O=u.l.ma,z=u.l.width,H=z*D,X=O.ca,ot=O.tb+z*_,Z=u.Ta,st=u.Ua;Re(u,D,E,k),mo(Z,st,X,ot,H),Br(O,_,_+D,X,ot,z),F-=D,E+=D*u.c,_+=D}t(_==f),u.C=u.Ma=f}function Ut(){this.ub=this.yd=this.td=this.Rb=0}function Fe(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function xe(){this.Fb=this.Bb=this.Cb=0,this.Zb=h(4),this.Lb=h(4)}function Kr(){this.Yb=function(){var u=[];return function f(_,F,E){for(var k=E[F],D=0;D<k&&(_.push(E.length>F+1?[]:0),!(E.length<F+1));D++)f(_[D],F+1,E)}(u,0,[3,11]),u}()}function vr(){this.jb=h(3),this.Wc=o([4,8],Kr),this.Xc=o([4,17],Kr)}function Ji(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new h(4),this.od=new h(4)}function si(){this.ld=this.La=this.dd=this.tc=0}function yi(){this.Na=this.la=0}function li(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Si(){this.ad=h(384),this.Za=0,this.Ob=h(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function tn(){this.uc=this.M=this.Nb=0,this.wa=Array(new si),this.Y=0,this.ya=Array(new Si),this.aa=0,this.l=new Rn}function Ln(){this.y=h(16),this.f=h(8),this.ea=h(8)}function Vl(){this.cb=this.a=0,this.sc="",this.m=new me,this.Od=new Ut,this.Kc=new Fe,this.ed=new Ji,this.Qa=new xe,this.Ic=this.$c=this.Aa=0,this.D=new tn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=p(8,me),this.ia=0,this.pb=p(4,li),this.Pa=new vr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ln),this.Hd=0,this.rb=Array(new yi),this.sb=0,this.wa=Array(new si),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Si),this.L=this.aa=0,this.gd=o([4,2],si),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Rn(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ki(){var u=new Vl;return u!=null&&(u.a=0,u.sc="OK",u.cb=0,u.Xb=0,Qa||(Qa=sa)),u}function vi(u,f,_){return u.a==0&&(u.a=f,u.sc=_,u.cb=0),0}function na(u,f,_){return 3<=_&&u[f+0]==157&&u[f+1]==1&&u[f+2]==42}function wi(u,f){if(u==null)return 0;if(u.a=0,u.sc="OK",f==null)return vi(u,2,"null VP8Io passed to VP8GetHeaders()");var _=f.data,F=f.w,E=f.ha;if(4>E)return vi(u,7,"Truncated header.");var k=_[F+0]|_[F+1]<<8|_[F+2]<<16,D=u.Od;if(D.Rb=!(1&k),D.td=k>>1&7,D.yd=k>>4&1,D.ub=k>>5,3<D.td)return vi(u,3,"Incorrect keyframe parameters.");if(!D.yd)return vi(u,4,"Frame not displayable.");F+=3,E-=3;var O=u.Kc;if(D.Rb){if(7>E)return vi(u,7,"cannot parse picture header");if(!na(_,F,E))return vi(u,3,"Bad code word");O.c=16383&(_[F+4]<<8|_[F+3]),O.Td=_[F+4]>>6,O.i=16383&(_[F+6]<<8|_[F+5]),O.Ud=_[F+6]>>6,F+=7,E-=7,u.za=O.c+15>>4,u.Ub=O.i+15>>4,f.width=O.c,f.height=O.i,f.Da=0,f.j=0,f.v=0,f.va=f.width,f.o=f.height,f.da=0,f.ib=f.width,f.hb=f.height,f.U=f.width,f.T=f.height,l((k=u.Pa).jb,0,255,k.jb.length),t((k=u.Qa)!=null),k.Cb=0,k.Bb=0,k.Fb=1,l(k.Zb,0,0,k.Zb.length),l(k.Lb,0,0,k.Lb)}if(D.ub>E)return vi(u,7,"bad partition length");Xt(k=u.m,_,F,D.ub),F+=D.ub,E-=D.ub,D.Rb&&(O.Ld=ie(k),O.Kd=ie(k)),O=u.Qa;var z,H=u.Pa;if(t(k!=null),t(O!=null),O.Cb=ie(k),O.Cb){if(O.Bb=ie(k),ie(k)){for(O.Fb=ie(k),z=0;4>z;++z)O.Zb[z]=ie(k)?Yt(k,7):0;for(z=0;4>z;++z)O.Lb[z]=ie(k)?Yt(k,6):0}if(O.Bb)for(z=0;3>z;++z)H.jb[z]=ie(k)?Gt(k,8):255}else O.Bb=0;if(k.Ka)return vi(u,3,"cannot parse segment header");if((O=u.ed).zd=ie(k),O.Tb=Gt(k,6),O.wb=Gt(k,3),O.Pc=ie(k),O.Pc&&ie(k)){for(H=0;4>H;++H)ie(k)&&(O.vd[H]=Yt(k,6));for(H=0;4>H;++H)ie(k)&&(O.od[H]=Yt(k,6))}if(u.L=O.Tb==0?0:O.zd?1:2,k.Ka)return vi(u,3,"cannot parse filter header");var X=E;if(E=z=F,F=z+X,O=X,u.Xb=(1<<Gt(u.m,2))-1,X<3*(H=u.Xb))_=7;else{for(z+=3*H,O-=3*H,X=0;X<H;++X){var ot=_[E+0]|_[E+1]<<8|_[E+2]<<16;ot>O&&(ot=O),Xt(u.Jc[+X],_,z,ot),z+=ot,O-=ot,E+=3}Xt(u.Jc[+H],_,z,O),_=z<F?0:5}if(_!=0)return vi(u,_,"cannot parse partitions");for(_=Gt(z=u.m,7),E=ie(z)?Yt(z,4):0,F=ie(z)?Yt(z,4):0,O=ie(z)?Yt(z,4):0,H=ie(z)?Yt(z,4):0,z=ie(z)?Yt(z,4):0,X=u.Qa,ot=0;4>ot;++ot){if(X.Cb){var Z=X.Zb[ot];X.Fb||(Z+=_)}else{if(0<ot){u.pb[ot]=u.pb[0];continue}Z=_}var st=u.pb[ot];st.Sc[0]=Yl[zn(Z+E,127)],st.Sc[1]=qn[zn(Z+0,127)],st.Eb[0]=2*Yl[zn(Z+F,127)],st.Eb[1]=101581*qn[zn(Z+O,127)]>>16,8>st.Eb[1]&&(st.Eb[1]=8),st.Qc[0]=Yl[zn(Z+H,117)],st.Qc[1]=qn[zn(Z+z,127)],st.lc=Z+z}if(!D.Rb)return vi(u,4,"Not a key frame.");for(ie(k),D=u.Pa,_=0;4>_;++_){for(E=0;8>E;++E)for(F=0;3>F;++F)for(O=0;11>O;++O)H=se(k,yo[_][E][F][O])?Gt(k,8):Kc[_][E][F][O],D.Wc[_][E].Yb[F][O]=H;for(E=0;17>E;++E)D.Xc[_][E]=D.Wc[_][Ve[E]]}return u.kc=ie(k),u.kc&&(u.Bd=Gt(k,8)),u.cb=1}function sa(u,f,_,F,E,k,D){var O=f[E].Yb[_];for(_=0;16>E;++E){if(!se(u,O[_+0]))return E;for(;!se(u,O[_+1]);)if(O=f[++E].Yb[0],_=0,E==16)return 16;var z=f[E+1].Yb;if(se(u,O[_+2])){var H=u,X=0;if(se(H,(Z=O)[(ot=_)+3]))if(se(H,Z[ot+6])){for(O=0,ot=2*(X=se(H,Z[ot+8]))+(Z=se(H,Z[ot+9+X])),X=0,Z=ld[ot];Z[O];++O)X+=X+se(H,Z[O]);X+=3+(8<<ot)}else se(H,Z[ot+7])?(X=7+2*se(H,165),X+=se(H,145)):X=5+se(H,159);else X=se(H,Z[ot+4])?3+se(H,Z[ot+5]):2;O=z[2]}else X=1,O=z[1];z=D+Gu[E],0>(H=u).b&&Ht(H);var ot,Z=H.b,st=(ot=H.Ca>>1)-(H.I>>Z)>>31;--H.b,H.Ca+=st,H.Ca|=1,H.I-=(ot+1&st)<<Z,k[z]=((X^st)-st)*F[(0<E)+0]}return 16}function Qn(u){var f=u.rb[u.sb-1];f.la=0,f.Na=0,l(u.zc,0,0,u.zc.length),u.ja=0}function hA(u,f){if(u==null)return 0;if(f==null)return vi(u,2,"NULL VP8Io parameter in VP8Decode().");if(!u.cb&&!wi(u,f))return 0;if(t(u.cb),f.ac==null||f.ac(f)){f.ob&&(u.L=0);var _=g[u.L];if(u.L==2?(u.yb=0,u.zb=0):(u.yb=f.v-_>>4,u.zb=f.j-_>>4,0>u.yb&&(u.yb=0),0>u.zb&&(u.zb=0)),u.Va=f.o+15+_>>4,u.Hb=f.va+15+_>>4,u.Hb>u.za&&(u.Hb=u.za),u.Va>u.Ub&&(u.Va=u.Ub),0<u.L){var F=u.ed;for(_=0;4>_;++_){var E;if(u.Qa.Cb){var k=u.Qa.Lb[_];u.Qa.Fb||(k+=F.Tb)}else k=F.Tb;for(E=0;1>=E;++E){var D=u.gd[_][E],O=k;if(F.Pc&&(O+=F.vd[0],E&&(O+=F.od[0])),0<(O=0>O?0:63<O?63:O)){var z=O;0<F.wb&&(z=4<F.wb?z>>2:z>>1)>9-F.wb&&(z=9-F.wb),1>z&&(z=1),D.dd=z,D.tc=2*O+z,D.ld=40<=O?2:15<=O?1:0}else D.tc=0;D.La=E}}}_=0}else vi(u,6,"Frame setup failed"),_=u.a;if(_=_==0){if(_){u.$c=0,0<u.Aa||(u.Ic=x);t:{_=u.Ic,F=4*(z=u.za);var H=32*z,X=z+1,ot=0<u.L?z*(0<u.Aa?2:1):0,Z=(u.Aa==2?2:1)*z;if((D=F+832+(E=3*(16*_+g[u.L])/2*H)+(k=u.Fa!=null&&0<u.Fa.length?u.Kc.c*u.Kc.i:0))!=D)_=0;else{if(D>u.Vb){if(u.Vb=0,u.Ec=h(D),u.Fc=0,u.Ec==null){_=vi(u,1,"no memory during frame initialization.");break t}u.Vb=D}D=u.Ec,O=u.Fc,u.Ac=D,u.Bc=O,O+=F,u.Gd=p(H,Ln),u.Hd=0,u.rb=p(X+1,yi),u.sb=1,u.wa=ot?p(ot,si):null,u.Y=0,u.D.Nb=0,u.D.wa=u.wa,u.D.Y=u.Y,0<u.Aa&&(u.D.Y+=z),t(!0),u.oc=D,u.pc=O,O+=832,u.ya=p(Z,Si),u.aa=0,u.D.ya=u.ya,u.D.aa=u.aa,u.Aa==2&&(u.D.aa+=z),u.R=16*z,u.B=8*z,z=(H=g[u.L])*u.R,H=H/2*u.B,u.sa=D,u.ta=O+z,u.qa=u.sa,u.ra=u.ta+16*_*u.R+H,u.Ha=u.qa,u.Ia=u.ra+8*_*u.B+H,u.$c=0,O+=E,u.mb=k?D:null,u.nb=k?O:null,t(O+k<=u.Fc+u.Vb),Qn(u),l(u.Ac,u.Bc,0,F),_=1}}if(_){if(f.ka=0,f.y=u.sa,f.O=u.ta,f.f=u.qa,f.N=u.ra,f.ea=u.Ha,f.Vd=u.Ia,f.fa=u.R,f.Rc=u.B,f.F=null,f.J=0,!$n){for(_=-255;255>=_;++_)$u[255+_]=0>_?-_:_;for(_=-1020;1020>=_;++_)ul[1020+_]=-128>_?-128:127<_?127:_;for(_=-112;112>=_;++_)Ii[112+_]=-16>_?-16:15<_?15:_;for(_=-255;510>=_;++_)ha[255+_]=0>_?0:255<_?255:_;$n=1}xs=il,po=Ja,ca=dA,jn=pA,Bs=to,fo=Ro,Ta=BA,go=Vo,Gs=$l,Kn=CA,$i=Kl,ln=so,ua=FA,ai=ol,fi=no,gi=Sa,Pi=zs,ss=Nc,Mn[0]=ys,Mn[1]=zo,Mn[2]=sl,Mn[3]=yA,Mn[4]=vA,Mn[5]=wA,Mn[6]=Ba,Mn[7]=_A,Mn[8]=kc,Mn[9]=jl,Ma[0]=nl,Ma[1]=Ho,Ma[2]=xa,Ma[3]=gA,Ma[4]=Di,Ma[5]=mA,Ma[6]=on,cn[0]=oa,cn[1]=fA,cn[2]=Dc,cn[3]=al,cn[4]=Ca,cn[5]=bA,cn[6]=Fa,_=1}else _=0}_&&(_=function(st,mt){for(st.M=0;st.M<st.Va;++st.M){var gt,ut=st.Jc[st.M&st.Xb],ft=st.m,zt=st;for(gt=0;gt<zt.za;++gt){var Kt=ft,Mt=zt,ee=Mt.Ac,oe=Mt.Bc+4*gt,_e=Mt.zc,re=Mt.ya[Mt.aa+gt];if(Mt.Qa.Bb?re.$b=se(Kt,Mt.Pa.jb[0])?2+se(Kt,Mt.Pa.jb[2]):se(Kt,Mt.Pa.jb[1]):re.$b=0,Mt.kc&&(re.Ad=se(Kt,Mt.Bd)),re.Za=!se(Kt,145)+0,re.Za){var ye=re.Ob,Oe=0;for(Mt=0;4>Mt;++Mt){var hr,He=_e[0+Mt];for(hr=0;4>hr;++hr){He=pl[ee[oe+hr]][He];for(var rr=jc[se(Kt,He[0])];0<rr;)rr=jc[2*rr+se(Kt,He[rr])];He=-rr,ee[oe+hr]=He}s(ye,Oe,ee,oe,4),Oe+=4,_e[0+Mt]=He}}else He=se(Kt,156)?se(Kt,128)?1:3:se(Kt,163)?2:0,re.Ob[0]=He,l(ee,oe,He,4),l(_e,0,He,4);re.Dd=se(Kt,142)?se(Kt,114)?se(Kt,183)?1:3:2:0}if(zt.m.Ka)return vi(st,7,"Premature end-of-partition0 encountered.");for(;st.ja<st.za;++st.ja){if(zt=ut,Kt=(ft=st).rb[ft.sb-1],ee=ft.rb[ft.sb+ft.ja],gt=ft.ya[ft.aa+ft.ja],oe=ft.kc?gt.Ad:0)Kt.la=ee.la=0,gt.Za||(Kt.Na=ee.Na=0),gt.Hc=0,gt.Gc=0,gt.ia=0;else{var _r,mr;if(Kt=ee,ee=zt,oe=ft.Pa.Xc,_e=ft.ya[ft.aa+ft.ja],re=ft.pb[_e.$b],Mt=_e.ad,ye=0,Oe=ft.rb[ft.sb-1],He=hr=0,l(Mt,ye,0,384),_e.Za)var ei=0,Rr=oe[3];else{rr=h(16);var Xr=Kt.Na+Oe.Na;if(Xr=Qa(ee,oe[1],Xr,re.Eb,0,rr,0),Kt.Na=Oe.Na=(0<Xr)+0,1<Xr)xs(rr,0,Mt,ye);else{var oi=rr[0]+3>>3;for(rr=0;256>rr;rr+=16)Mt[ye+rr]=oi}ei=1,Rr=oe[0]}var Qr=15&Kt.la,Ai=15&Oe.la;for(rr=0;4>rr;++rr){var Li=1&Ai;for(oi=mr=0;4>oi;++oi)Qr=Qr>>1|(Li=(Xr=Qa(ee,Rr,Xr=Li+(1&Qr),re.Sc,ei,Mt,ye))>ei)<<7,mr=mr<<2|(3<Xr?3:1<Xr?2:Mt[ye+0]!=0),ye+=16;Qr>>=4,Ai=Ai>>1|Li<<7,hr=(hr<<8|mr)>>>0}for(Rr=Qr,ei=Ai>>4,_r=0;4>_r;_r+=2){for(mr=0,Qr=Kt.la>>4+_r,Ai=Oe.la>>4+_r,rr=0;2>rr;++rr){for(Li=1&Ai,oi=0;2>oi;++oi)Xr=Li+(1&Qr),Qr=Qr>>1|(Li=0<(Xr=Qa(ee,oe[2],Xr,re.Qc,0,Mt,ye)))<<3,mr=mr<<2|(3<Xr?3:1<Xr?2:Mt[ye+0]!=0),ye+=16;Qr>>=2,Ai=Ai>>1|Li<<5}He|=mr<<4*_r,Rr|=Qr<<4<<_r,ei|=(240&Ai)<<_r}Kt.la=Rr,Oe.la=ei,_e.Hc=hr,_e.Gc=He,_e.ia=43690&He?0:re.ia,oe=!(hr|He)}if(0<ft.L&&(ft.wa[ft.Y+ft.ja]=ft.gd[gt.$b][gt.Za],ft.wa[ft.Y+ft.ja].La|=!oe),zt.Ka)return vi(st,7,"Premature end-of-file encountered.")}if(Qn(st),ft=mt,zt=1,gt=(ut=st).D,Kt=0<ut.L&&ut.M>=ut.zb&&ut.M<=ut.Va,ut.Aa==0)t:{if(gt.M=ut.M,gt.uc=Kt,lo(ut,gt),zt=1,gt=(mr=ut.D).Nb,Kt=(He=g[ut.L])*ut.R,ee=He/2*ut.B,rr=16*gt*ut.R,oi=8*gt*ut.B,oe=ut.sa,_e=ut.ta-Kt+rr,re=ut.qa,Mt=ut.ra-ee+oi,ye=ut.Ha,Oe=ut.Ia-ee+oi,Ai=(Qr=mr.M)==0,hr=Qr>=ut.Va-1,ut.Aa==2&&lo(ut,mr),mr.uc)for(Li=(Xr=ut).D.M,t(Xr.D.uc),mr=Xr.yb;mr<Xr.Hb;++mr){ei=mr,Rr=Li;var Ei=(Gi=(Hr=Xr).D).Nb;_r=Hr.R;var Gi=Gi.wa[Gi.Y+ei],Wi=Hr.sa,un=Hr.ta+16*Ei*_r+16*ei,os=Gi.dd,Xi=Gi.tc;if(Xi!=0)if(t(3<=Xi),Hr.L==1)0<ei&&gi(Wi,un,_r,Xi+4),Gi.La&&ss(Wi,un,_r,Xi),0<Rr&&fi(Wi,un,_r,Xi+4),Gi.La&&Pi(Wi,un,_r,Xi);else{var bi=Hr.B,xn=Hr.qa,As=Hr.ra+8*Ei*bi+8*ei,ls=Hr.Ha,Hr=Hr.Ia+8*Ei*bi+8*ei;Ei=Gi.ld,0<ei&&(go(Wi,un,_r,Xi+4,os,Ei),Kn(xn,As,ls,Hr,bi,Xi+4,os,Ei)),Gi.La&&(ln(Wi,un,_r,Xi,os,Ei),ai(xn,As,ls,Hr,bi,Xi,os,Ei)),0<Rr&&(Ta(Wi,un,_r,Xi+4,os,Ei),Gs(xn,As,ls,Hr,bi,Xi+4,os,Ei)),Gi.La&&($i(Wi,un,_r,Xi,os,Ei),ua(xn,As,ls,Hr,bi,Xi,os,Ei))}}if(ut.ia&&alert("todo:DitherRow"),ft.put!=null){if(mr=16*Qr,Qr=16*(Qr+1),Ai?(ft.y=ut.sa,ft.O=ut.ta+rr,ft.f=ut.qa,ft.N=ut.ra+oi,ft.ea=ut.Ha,ft.W=ut.Ia+oi):(mr-=He,ft.y=oe,ft.O=_e,ft.f=re,ft.N=Mt,ft.ea=ye,ft.W=Oe),hr||(Qr-=He),Qr>ft.o&&(Qr=ft.o),ft.F=null,ft.J=null,ut.Fa!=null&&0<ut.Fa.length&&mr<Qr&&(ft.J=ll(ut,ft,mr,Qr-mr),ft.F=ut.mb,ft.F==null&&ft.F.length==0)){zt=vi(ut,3,"Could not decode alpha data.");break t}mr<ft.j&&(He=ft.j-mr,mr=ft.j,t(!(1&He)),ft.O+=ut.R*He,ft.N+=ut.B*(He>>1),ft.W+=ut.B*(He>>1),ft.F!=null&&(ft.J+=ft.width*He)),mr<Qr&&(ft.O+=ft.v,ft.N+=ft.v>>1,ft.W+=ft.v>>1,ft.F!=null&&(ft.J+=ft.v),ft.ka=mr-ft.j,ft.U=ft.va-ft.v,ft.T=Qr-mr,zt=ft.put(ft))}gt+1!=ut.Ic||hr||(s(ut.sa,ut.ta-Kt,oe,_e+16*ut.R,Kt),s(ut.qa,ut.ra-ee,re,Mt+8*ut.B,ee),s(ut.Ha,ut.Ia-ee,ye,Oe+8*ut.B,ee))}if(!zt)return vi(st,6,"Output aborted.")}return 1}(u,f)),f.bc!=null&&f.bc(f),_&=1}return _?(u.cb=0,_):0}function Ki(u,f,_,F,E){E=u[f+_+32*F]+(E>>3),u[f+_+32*F]=-256&E?0>E?0:255:E}function Ya(u,f,_,F,E,k){Ki(u,f,0,_,F+E),Ki(u,f,1,_,F+k),Ki(u,f,2,_,F-k),Ki(u,f,3,_,F-E)}function en(u){return(20091*u>>16)+u}function $r(u,f,_,F){var E,k=0,D=h(16);for(E=0;4>E;++E){var O=u[f+0]+u[f+8],z=u[f+0]-u[f+8],H=(35468*u[f+4]>>16)-en(u[f+12]),X=en(u[f+4])+(35468*u[f+12]>>16);D[k+0]=O+X,D[k+1]=z+H,D[k+2]=z-H,D[k+3]=O-X,k+=4,f++}for(E=k=0;4>E;++E)O=(u=D[k+0]+4)+D[k+8],z=u-D[k+8],H=(35468*D[k+4]>>16)-en(D[k+12]),Ki(_,F,0,0,O+(X=en(D[k+4])+(35468*D[k+12]>>16))),Ki(_,F,1,0,z+H),Ki(_,F,2,0,z-H),Ki(_,F,3,0,O-X),k++,F+=32}function Ro(u,f,_,F){var E=u[f+0]+4,k=35468*u[f+4]>>16,D=en(u[f+4]),O=35468*u[f+1]>>16;Ya(_,F,0,E+D,u=en(u[f+1]),O),Ya(_,F,1,E+k,u,O),Ya(_,F,2,E-k,u,O),Ya(_,F,3,E-D,u,O)}function Ja(u,f,_,F,E){$r(u,f,_,F),E&&$r(u,f+16,_,F+4)}function dA(u,f,_,F){po(u,f+0,_,F,1),po(u,f+32,_,F+128,1)}function pA(u,f,_,F){var E;for(u=u[f+0]+4,E=0;4>E;++E)for(f=0;4>f;++f)Ki(_,F,f,E,u)}function to(u,f,_,F){u[f+0]&&jn(u,f+0,_,F),u[f+16]&&jn(u,f+16,_,F+4),u[f+32]&&jn(u,f+32,_,F+128),u[f+48]&&jn(u,f+48,_,F+128+4)}function il(u,f,_,F){var E,k=h(16);for(E=0;4>E;++E){var D=u[f+0+E]+u[f+12+E],O=u[f+4+E]+u[f+8+E],z=u[f+4+E]-u[f+8+E],H=u[f+0+E]-u[f+12+E];k[0+E]=D+O,k[8+E]=D-O,k[4+E]=H+z,k[12+E]=H-z}for(E=0;4>E;++E)D=(u=k[0+4*E]+3)+k[3+4*E],O=k[1+4*E]+k[2+4*E],z=k[1+4*E]-k[2+4*E],H=u-k[3+4*E],_[F+0]=D+O>>3,_[F+16]=H+z>>3,_[F+32]=D-O>>3,_[F+48]=H-z>>3,F+=64}function eo(u,f,_){var F,E=f-32,k=En,D=255-u[E-1];for(F=0;F<_;++F){var O,z=k,H=D+u[f-1];for(O=0;O<_;++O)u[f+O]=z[H+u[E+O]];f+=32}}function zo(u,f){eo(u,f,4)}function fA(u,f){eo(u,f,8)}function Ho(u,f){eo(u,f,16)}function xa(u,f){var _;for(_=0;16>_;++_)s(u,f+32*_,u,f-32,16)}function gA(u,f){var _;for(_=16;0<_;--_)l(u,f,u[f-1],16),f+=32}function ro(u,f,_){var F;for(F=0;16>F;++F)l(f,_+32*F,u,16)}function nl(u,f){var _,F=16;for(_=0;16>_;++_)F+=u[f-1+32*_]+u[f+_-32];ro(F>>5,u,f)}function Di(u,f){var _,F=8;for(_=0;16>_;++_)F+=u[f-1+32*_];ro(F>>4,u,f)}function mA(u,f){var _,F=8;for(_=0;16>_;++_)F+=u[f+_-32];ro(F>>4,u,f)}function on(u,f){ro(128,u,f)}function fr(u,f,_){return u+2*f+_+2>>2}function sl(u,f){var _,F=f-32;for(F=new Uint8Array([fr(u[F-1],u[F+0],u[F+1]),fr(u[F+0],u[F+1],u[F+2]),fr(u[F+1],u[F+2],u[F+3]),fr(u[F+2],u[F+3],u[F+4])]),_=0;4>_;++_)s(u,f+32*_,F,0,F.length)}function yA(u,f){var _=u[f-1],F=u[f-1+32],E=u[f-1+64],k=u[f-1+96];Ce(u,f+0,16843009*fr(u[f-1-32],_,F)),Ce(u,f+32,16843009*fr(_,F,E)),Ce(u,f+64,16843009*fr(F,E,k)),Ce(u,f+96,16843009*fr(E,k,k))}function ys(u,f){var _,F=4;for(_=0;4>_;++_)F+=u[f+_-32]+u[f-1+32*_];for(F>>=3,_=0;4>_;++_)l(u,f+32*_,F,4)}function vA(u,f){var _=u[f-1+0],F=u[f-1+32],E=u[f-1+64],k=u[f-1-32],D=u[f+0-32],O=u[f+1-32],z=u[f+2-32],H=u[f+3-32];u[f+0+96]=fr(F,E,u[f-1+96]),u[f+1+96]=u[f+0+64]=fr(_,F,E),u[f+2+96]=u[f+1+64]=u[f+0+32]=fr(k,_,F),u[f+3+96]=u[f+2+64]=u[f+1+32]=u[f+0+0]=fr(D,k,_),u[f+3+64]=u[f+2+32]=u[f+1+0]=fr(O,D,k),u[f+3+32]=u[f+2+0]=fr(z,O,D),u[f+3+0]=fr(H,z,O)}function Ba(u,f){var _=u[f+1-32],F=u[f+2-32],E=u[f+3-32],k=u[f+4-32],D=u[f+5-32],O=u[f+6-32],z=u[f+7-32];u[f+0+0]=fr(u[f+0-32],_,F),u[f+1+0]=u[f+0+32]=fr(_,F,E),u[f+2+0]=u[f+1+32]=u[f+0+64]=fr(F,E,k),u[f+3+0]=u[f+2+32]=u[f+1+64]=u[f+0+96]=fr(E,k,D),u[f+3+32]=u[f+2+64]=u[f+1+96]=fr(k,D,O),u[f+3+64]=u[f+2+96]=fr(D,O,z),u[f+3+96]=fr(O,z,z)}function wA(u,f){var _=u[f-1+0],F=u[f-1+32],E=u[f-1+64],k=u[f-1-32],D=u[f+0-32],O=u[f+1-32],z=u[f+2-32],H=u[f+3-32];u[f+0+0]=u[f+1+64]=k+D+1>>1,u[f+1+0]=u[f+2+64]=D+O+1>>1,u[f+2+0]=u[f+3+64]=O+z+1>>1,u[f+3+0]=z+H+1>>1,u[f+0+96]=fr(E,F,_),u[f+0+64]=fr(F,_,k),u[f+0+32]=u[f+1+96]=fr(_,k,D),u[f+1+32]=u[f+2+96]=fr(k,D,O),u[f+2+32]=u[f+3+96]=fr(D,O,z),u[f+3+32]=fr(O,z,H)}function _A(u,f){var _=u[f+0-32],F=u[f+1-32],E=u[f+2-32],k=u[f+3-32],D=u[f+4-32],O=u[f+5-32],z=u[f+6-32],H=u[f+7-32];u[f+0+0]=_+F+1>>1,u[f+1+0]=u[f+0+64]=F+E+1>>1,u[f+2+0]=u[f+1+64]=E+k+1>>1,u[f+3+0]=u[f+2+64]=k+D+1>>1,u[f+0+32]=fr(_,F,E),u[f+1+32]=u[f+0+96]=fr(F,E,k),u[f+2+32]=u[f+1+96]=fr(E,k,D),u[f+3+32]=u[f+2+96]=fr(k,D,O),u[f+3+64]=fr(D,O,z),u[f+3+96]=fr(O,z,H)}function jl(u,f){var _=u[f-1+0],F=u[f-1+32],E=u[f-1+64],k=u[f-1+96];u[f+0+0]=_+F+1>>1,u[f+2+0]=u[f+0+32]=F+E+1>>1,u[f+2+32]=u[f+0+64]=E+k+1>>1,u[f+1+0]=fr(_,F,E),u[f+3+0]=u[f+1+32]=fr(F,E,k),u[f+3+32]=u[f+1+64]=fr(E,k,k),u[f+3+64]=u[f+2+64]=u[f+0+96]=u[f+1+96]=u[f+2+96]=u[f+3+96]=k}function kc(u,f){var _=u[f-1+0],F=u[f-1+32],E=u[f-1+64],k=u[f-1+96],D=u[f-1-32],O=u[f+0-32],z=u[f+1-32],H=u[f+2-32];u[f+0+0]=u[f+2+32]=_+D+1>>1,u[f+0+32]=u[f+2+64]=F+_+1>>1,u[f+0+64]=u[f+2+96]=E+F+1>>1,u[f+0+96]=k+E+1>>1,u[f+3+0]=fr(O,z,H),u[f+2+0]=fr(D,O,z),u[f+1+0]=u[f+3+32]=fr(_,D,O),u[f+1+32]=u[f+3+64]=fr(F,_,D),u[f+1+64]=u[f+3+96]=fr(E,F,_),u[f+1+96]=fr(k,E,F)}function Dc(u,f){var _;for(_=0;8>_;++_)s(u,f+32*_,u,f-32,8)}function al(u,f){var _;for(_=0;8>_;++_)l(u,f,u[f-1],8),f+=32}function aa(u,f,_){var F;for(F=0;8>F;++F)l(f,_+32*F,u,8)}function oa(u,f){var _,F=8;for(_=0;8>_;++_)F+=u[f+_-32]+u[f-1+32*_];aa(F>>4,u,f)}function bA(u,f){var _,F=4;for(_=0;8>_;++_)F+=u[f+_-32];aa(F>>3,u,f)}function Ca(u,f){var _,F=4;for(_=0;8>_;++_)F+=u[f-1+32*_];aa(F>>3,u,f)}function Fa(u,f){aa(128,u,f)}function An(u,f,_){var F=u[f-_],E=u[f+0],k=3*(E-F)+EA[1020+u[f-2*_]-u[f+_]],D=TA[112+(k+4>>3)];u[f-_]=En[255+F+TA[112+(k+3>>3)]],u[f+0]=En[255+E-D]}function Wr(u,f,_,F){var E=u[f+0],k=u[f+_];return qi[255+u[f-2*_]-u[f-_]]>F||qi[255+k-E]>F}function xA(u,f,_,F){return 4*qi[255+u[f-_]-u[f+0]]+qi[255+u[f-2*_]-u[f+_]]<=F}function io(u,f,_,F,E){var k=u[f-3*_],D=u[f-2*_],O=u[f-_],z=u[f+0],H=u[f+_],X=u[f+2*_],ot=u[f+3*_];return 4*qi[255+O-z]+qi[255+D-H]>F?0:qi[255+u[f-4*_]-k]<=E&&qi[255+k-D]<=E&&qi[255+D-O]<=E&&qi[255+ot-X]<=E&&qi[255+X-H]<=E&&qi[255+H-z]<=E}function no(u,f,_,F){var E=2*F+1;for(F=0;16>F;++F)xA(u,f+F,_,E)&&An(u,f+F,_)}function Sa(u,f,_,F){var E=2*F+1;for(F=0;16>F;++F)xA(u,f+F*_,1,E)&&An(u,f+F*_,1)}function zs(u,f,_,F){var E;for(E=3;0<E;--E)no(u,f+=4*_,_,F)}function Nc(u,f,_,F){var E;for(E=3;0<E;--E)Sa(u,f+=4,_,F)}function is(u,f,_,F,E,k,D,O){for(k=2*k+1;0<E--;){if(io(u,f,_,k,D))if(Wr(u,f,_,O))An(u,f,_);else{var z=u,H=f,X=_,ot=z[H-2*X],Z=z[H-X],st=z[H+0],mt=z[H+X],gt=z[H+2*X],ut=27*(zt=EA[1020+3*(st-Z)+EA[1020+ot-mt]])+63>>7,ft=18*zt+63>>7,zt=9*zt+63>>7;z[H-3*X]=En[255+z[H-3*X]+zt],z[H-2*X]=En[255+ot+ft],z[H-X]=En[255+Z+ut],z[H+0]=En[255+st-ut],z[H+X]=En[255+mt-ft],z[H+2*X]=En[255+gt-zt]}f+=F}}function Hs(u,f,_,F,E,k,D,O){for(k=2*k+1;0<E--;){if(io(u,f,_,k,D))if(Wr(u,f,_,O))An(u,f,_);else{var z=u,H=f,X=_,ot=z[H-X],Z=z[H+0],st=z[H+X],mt=TA[112+((gt=3*(Z-ot))+4>>3)],gt=TA[112+(gt+3>>3)],ut=mt+1>>1;z[H-2*X]=En[255+z[H-2*X]+ut],z[H-X]=En[255+ot+gt],z[H+0]=En[255+Z-mt],z[H+X]=En[255+st-ut]}f+=F}}function BA(u,f,_,F,E,k){is(u,f,_,1,16,F,E,k)}function Vo(u,f,_,F,E,k){is(u,f,1,_,16,F,E,k)}function Kl(u,f,_,F,E,k){var D;for(D=3;0<D;--D)Hs(u,f+=4*_,_,1,16,F,E,k)}function so(u,f,_,F,E,k){var D;for(D=3;0<D;--D)Hs(u,f+=4,1,_,16,F,E,k)}function $l(u,f,_,F,E,k,D,O){is(u,f,E,1,8,k,D,O),is(_,F,E,1,8,k,D,O)}function CA(u,f,_,F,E,k,D,O){is(u,f,1,E,8,k,D,O),is(_,F,1,E,8,k,D,O)}function FA(u,f,_,F,E,k,D,O){Hs(u,f+4*E,E,1,8,k,D,O),Hs(_,F+4*E,E,1,8,k,D,O)}function ol(u,f,_,F,E,k,D,O){Hs(u,f+4,1,E,8,k,D,O),Hs(_,F+4,1,E,8,k,D,O)}function vs(){this.ba=new Dr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new G,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function SA(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Al(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ql(){this.ua=0,this.Wa=new nt,this.vb=new nt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new wt,this.yc=new lt}function Gl(){this.xb=this.a=0,this.l=new Rn,this.ca=new Dr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new rt,this.Pb=0,this.wd=new rt,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ql,this.ab=0,this.gc=p(4,Al),this.Oc=0}function Aa(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Rn,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function jo(u,f,_,F,E,k,D){for(u=u==null?0:u[f+0],f=0;f<D;++f)E[k+f]=u+_[F+f]&255,u=E[k+f]}function ao(u,f,_,F,E,k,D){var O;if(u==null)jo(null,null,_,F,E,k,D);else for(O=0;O<D;++O)E[k+O]=u[f+O]+_[F+O]&255}function oo(u,f,_,F,E,k,D){if(u==null)jo(null,null,_,F,E,k,D);else{var O,z=u[f+0],H=z,X=z;for(O=0;O<D;++O)H=X+(z=u[f+O])-H,X=_[F+O]+(-256&H?0>H?0:255:H)&255,H=z,E[k+O]=X}}function ll(u,f,_,F){var E=f.width,k=f.o;if(t(u!=null&&f!=null),0>_||0>=F||_+F>k)return null;if(!u.Cc){if(u.ga==null){var D;if(u.ga=new Aa,(D=u.ga==null)||(D=f.width*f.o,t(u.Gb.length==0),u.Gb=h(D),u.Uc=0,u.Gb==null?D=0:(u.mb=u.Gb,u.nb=u.Uc,u.rc=null,D=1),D=!D),!D){D=u.ga;var O=u.Fa,z=u.P,H=u.qc,X=u.mb,ot=u.nb,Z=z+1,st=H-1,mt=D.l;if(t(O!=null&&X!=null&&f!=null),pa[0]=null,pa[1]=jo,pa[2]=ao,pa[3]=oo,D.ca=X,D.tb=ot,D.c=f.width,D.i=f.height,t(0<D.c&&0<D.i),1>=H)f=0;else if(D.$a=O[z+0]>>0&3,D.Z=O[z+0]>>2&3,D.Lc=O[z+0]>>4&3,z=O[z+0]>>6&3,0>D.$a||1<D.$a||4<=D.Z||1<D.Lc||z)f=0;else if(mt.put=kt,mt.ac=Pt,mt.bc=Ot,mt.ma=D,mt.width=f.width,mt.height=f.height,mt.Da=f.Da,mt.v=f.v,mt.va=f.va,mt.j=f.j,mt.o=f.o,D.$a)t:{t(D.$a==1),f=cr();e:for(;;){if(f==null){f=0;break t}if(t(D!=null),D.mc=f,f.c=D.c,f.i=D.i,f.l=D.l,f.l.ma=D,f.l.width=D.c,f.l.height=D.i,f.a=0,qt(f.m,O,Z,st),!jr(D.c,D.i,1,f,null)||(f.ab==1&&f.gc[0].hc==3&&ar(f.s)?(D.ic=1,O=f.c*f.i,f.Ta=null,f.Ua=0,f.V=h(O),f.Ba=0,f.V==null?(f.a=1,f=0):f=1):(D.ic=0,f=ni(f,D.c)),!f))break e;f=1;break t}D.mc=null,f=0}else f=st>=D.c*D.i;D=!f}if(D)return null;u.ga.Lc!=1?u.Ga=0:F=k-_}t(u.ga!=null),t(_+F<=k);t:{if(f=(O=u.ga).c,k=O.l.o,O.$a==0){if(Z=u.rc,st=u.Vc,mt=u.Fa,z=u.P+1+_*f,H=u.mb,X=u.nb+_*f,t(z<=u.P+u.qc),O.Z!=0)for(t(pa[O.Z]!=null),D=0;D<F;++D)pa[O.Z](Z,st,mt,z,H,X,f),Z=H,st=X,X+=f,z+=f;else for(D=0;D<F;++D)s(H,X,mt,z,f),Z=H,st=X,X+=f,z+=f;u.rc=Z,u.Vc=st}else{if(t(O.mc!=null),f=_+F,t((D=O.mc)!=null),t(f<=D.i),D.C>=f)f=1;else if(O.ic||Zt(),O.ic){O=D.V,Z=D.Ba,st=D.c;var gt=D.i,ut=(mt=1,z=D.$/st,H=D.$%st,X=D.m,ot=D.s,D.$),ft=st*gt,zt=st*f,Kt=ot.wc,Mt=ut<zt?Ee(ot,H,z):null;t(ut<=ft),t(f<=gt),t(ar(ot));e:for(;;){for(;!X.h&&ut<zt;){if(H&Kt||(Mt=Ee(ot,H,z)),t(Mt!=null),Nt(X),256>(gt=ae(Mt.G[0],Mt.H[0],X)))O[Z+ut]=gt,++ut,++H>=st&&(H=0,++z<=f&&!(z%16)&&Ur(D,z));else{if(!(280>gt)){mt=0;break e}gt=jt(gt-256,X);var ee,oe=ae(Mt.G[4],Mt.H[4],X);if(Nt(X),!(ut>=(oe=de(st,oe=jt(oe,X)))&&ft-ut>=gt)){mt=0;break e}for(ee=0;ee<gt;++ee)O[Z+ut+ee]=O[Z+ut+ee-oe];for(ut+=gt,H+=gt;H>=st;)H-=st,++z<=f&&!(z%16)&&Ur(D,z);ut<zt&&H&Kt&&(Mt=Ee(ot,H,z))}t(X.h==Bt(X))}Ur(D,z>f?f:z);break e}!mt||X.h&&ut<ft?(mt=0,D.a=X.h?5:3):D.$=ut,f=mt}else f=Ir(D,D.V,D.Ba,D.c,D.i,f,zi);if(!f){F=0;break t}}_+F>=k&&(u.Cc=1),F=1}if(!F)return null;if(u.Cc&&((F=u.ga)!=null&&(F.mc=null),u.ga=null,0<u.Ga))return alert("todo:WebPDequantizeLevels"),null}return u.nb+_*E}function M(u,f,_,F,E,k){for(;0<E--;){var D,O=u,z=f+(_?1:0),H=u,X=f+(_?0:3);for(D=0;D<F;++D){var ot=H[X+4*D];ot!=255&&(ot*=32897,O[z+4*D+0]=O[z+4*D+0]*ot>>23,O[z+4*D+1]=O[z+4*D+1]*ot>>23,O[z+4*D+2]=O[z+4*D+2]*ot>>23)}f+=k}}function J(u,f,_,F,E){for(;0<F--;){var k;for(k=0;k<_;++k){var D=u[f+2*k+0],O=15&(H=u[f+2*k+1]),z=4369*O,H=(240&H|H>>4)*z>>16;u[f+2*k+0]=(240&D|D>>4)*z>>16&240|(15&D|D<<4)*z>>16>>4&15,u[f+2*k+1]=240&H|O}f+=E}}function Ct(u,f,_,F,E,k,D,O){var z,H,X=255;for(H=0;H<E;++H){for(z=0;z<F;++z){var ot=u[f+z];k[D+4*z]=ot,X&=ot}f+=_,D+=O}return X!=255}function Dt(u,f,_,F,E){var k;for(k=0;k<E;++k)_[F+k]=u[f+k]>>8}function Zt(){Ua=M,Pa=J,Go=Ct,mo=Dt}function ue(u,f,_){yt[u]=function(F,E,k,D,O,z,H,X,ot,Z,st,mt,gt,ut,ft,zt,Kt){var Mt,ee=Kt-1>>1,oe=O[z+0]|H[X+0]<<16,_e=ot[Z+0]|st[mt+0]<<16;t(F!=null);var re=3*oe+_e+131074>>2;for(f(F[E+0],255&re,re>>16,gt,ut),k!=null&&(re=3*_e+oe+131074>>2,f(k[D+0],255&re,re>>16,ft,zt)),Mt=1;Mt<=ee;++Mt){var ye=O[z+Mt]|H[X+Mt]<<16,Oe=ot[Z+Mt]|st[mt+Mt]<<16,hr=oe+ye+_e+Oe+524296,He=hr+2*(ye+_e)>>3;re=He+oe>>1,oe=(hr=hr+2*(oe+Oe)>>3)+ye>>1,f(F[E+2*Mt-1],255&re,re>>16,gt,ut+(2*Mt-1)*_),f(F[E+2*Mt-0],255&oe,oe>>16,gt,ut+(2*Mt-0)*_),k!=null&&(re=hr+_e>>1,oe=He+Oe>>1,f(k[D+2*Mt-1],255&re,re>>16,ft,zt+(2*Mt-1)*_),f(k[D+2*Mt+0],255&oe,oe>>16,ft,zt+(2*Mt+0)*_)),oe=ye,_e=Oe}1&Kt||(re=3*oe+_e+131074>>2,f(F[E+Kt-1],255&re,re>>16,gt,ut+(Kt-1)*_),k!=null&&(re=3*_e+oe+131074>>2,f(k[D+Kt-1],255&re,re>>16,ft,zt+(Kt-1)*_)))}}function we(){Fs[La]=Xu,Fs[Wo]=qc,Fs[Xl]=$c,Fs[UA]=ka,Fs[Xo]=Gc,Fs[hl]=Jl,Fs[Oc]=vo,Fs[da]=qc,Fs[Zl]=ka,Fs[PA]=Gc,Fs[dl]=Jl}function Ke(u){return u&~Xc?0>u?0:255:u>>Wc}function yr(u,f){return Ke((19077*u>>8)+(26149*f>>8)-14234)}function Pr(u,f,_){return Ke((19077*u>>8)-(6419*f>>8)-(13320*_>>8)+8708)}function or(u,f){return Ke((19077*u>>8)+(33050*f>>8)-17685)}function qr(u,f,_,F,E){F[E+0]=yr(u,_),F[E+1]=Pr(u,f,_),F[E+2]=or(u,f)}function er(u,f,_,F,E){F[E+0]=or(u,f),F[E+1]=Pr(u,f,_),F[E+2]=yr(u,_)}function _i(u,f,_,F,E){var k=Pr(u,f,_);f=k<<3&224|or(u,f)>>3,F[E+0]=248&yr(u,_)|k>>5,F[E+1]=f}function Mr(u,f,_,F,E){var k=240&or(u,f)|15;F[E+0]=240&yr(u,_)|Pr(u,f,_)>>4,F[E+1]=k}function Nr(u,f,_,F,E){F[E+0]=255,qr(u,f,_,F,E+1)}function Hi(u,f,_,F,E){er(u,f,_,F,E),F[E+3]=255}function ws(u,f,_,F,E){qr(u,f,_,F,E),F[E+3]=255}function zn(u,f){return 0>u?0:u>f?f:u}function Ia(u,f,_){yt[u]=function(F,E,k,D,O,z,H,X,ot){for(var Z=X+(-2&ot)*_;X!=Z;)f(F[E+0],k[D+0],O[z+0],H,X),f(F[E+1],k[D+0],O[z+0],H,X+_),E+=2,++D,++z,X+=2*_;1&ot&&f(F[E+0],k[D+0],O[z+0],H,X)}}function cl(u,f,_){return _==0?u==0?f==0?6:5:f==0?4:0:_}function Ao(u,f,_,F,E){switch(u>>>30){case 3:po(f,_,F,E,0);break;case 2:fo(f,_,F,E);break;case 1:jn(f,_,F,E)}}function lo(u,f){var _,F,E=f.M,k=f.Nb,D=u.oc,O=u.pc+40,z=u.oc,H=u.pc+584,X=u.oc,ot=u.pc+600;for(_=0;16>_;++_)D[O+32*_-1]=129;for(_=0;8>_;++_)z[H+32*_-1]=129,X[ot+32*_-1]=129;for(0<E?D[O-1-32]=z[H-1-32]=X[ot-1-32]=129:(l(D,O-32-1,127,21),l(z,H-32-1,127,9),l(X,ot-32-1,127,9)),F=0;F<u.za;++F){var Z=f.ya[f.aa+F];if(0<F){for(_=-1;16>_;++_)s(D,O+32*_-4,D,O+32*_+12,4);for(_=-1;8>_;++_)s(z,H+32*_-4,z,H+32*_+4,4),s(X,ot+32*_-4,X,ot+32*_+4,4)}var st=u.Gd,mt=u.Hd+F,gt=Z.ad,ut=Z.Hc;if(0<E&&(s(D,O-32,st[mt].y,0,16),s(z,H-32,st[mt].f,0,8),s(X,ot-32,st[mt].ea,0,8)),Z.Za){var ft=D,zt=O-32+16;for(0<E&&(F>=u.za-1?l(ft,zt,st[mt].y[15],4):s(ft,zt,st[mt+1].y,0,4)),_=0;4>_;_++)ft[zt+128+_]=ft[zt+256+_]=ft[zt+384+_]=ft[zt+0+_];for(_=0;16>_;++_,ut<<=2)ft=D,zt=O+c[_],Mn[Z.Ob[_]](ft,zt),Ao(ut,gt,16*+_,ft,zt)}else if(ft=cl(F,E,Z.Ob[0]),Ma[ft](D,O),ut!=0)for(_=0;16>_;++_,ut<<=2)Ao(ut,gt,16*+_,D,O+c[_]);for(_=Z.Gc,ft=cl(F,E,Z.Dd),cn[ft](z,H),cn[ft](X,ot),ut=gt,ft=z,zt=H,255&(Z=_>>0)&&(170&Z?ca(ut,256,ft,zt):Bs(ut,256,ft,zt)),Z=X,ut=ot,255&(_>>=8)&&(170&_?ca(gt,320,Z,ut):Bs(gt,320,Z,ut)),E<u.Ub-1&&(s(st[mt].y,0,D,O+480,16),s(st[mt].f,0,z,H+224,8),s(st[mt].ea,0,X,ot+224,8)),_=8*k*u.B,st=u.sa,mt=u.ta+16*F+16*k*u.R,gt=u.qa,Z=u.ra+8*F+_,ut=u.Ha,ft=u.Ia+8*F+_,_=0;16>_;++_)s(st,mt+_*u.R,D,O+32*_,16);for(_=0;8>_;++_)s(gt,Z+_*u.B,z,H+32*_,8),s(ut,ft+_*u.B,X,ot+32*_,8)}}function la(u,f,_,F,E,k,D,O,z){var H=[0],X=[0],ot=0,Z=z!=null?z.kd:0,st=z??new SA;if(u==null||12>_)return 7;st.data=u,st.w=f,st.ha=_,f=[f],_=[_],st.gb=[st.gb];t:{var mt=f,gt=_,ut=st.gb;if(t(u!=null),t(gt!=null),t(ut!=null),ut[0]=0,12<=gt[0]&&!i(u,mt[0],"RIFF")){if(i(u,mt[0]+8,"WEBP")){ut=3;break t}var ft=Le(u,mt[0]+4);if(12>ft||4294967286<ft){ut=3;break t}if(Z&&ft>gt[0]-8){ut=7;break t}ut[0]=ft,mt[0]+=12,gt[0]-=12}ut=0}if(ut!=0)return ut;for(ft=0<st.gb[0],_=_[0];;){t:{var zt=u;gt=f,ut=_;var Kt=H,Mt=X,ee=mt=[0];if((re=ot=[ot])[0]=0,8>ut[0])ut=7;else{if(!i(zt,gt[0],"VP8X")){if(Le(zt,gt[0]+4)!=10){ut=3;break t}if(18>ut[0]){ut=7;break t}var oe=Le(zt,gt[0]+8),_e=1+Te(zt,gt[0]+12);if(2147483648<=_e*(zt=1+Te(zt,gt[0]+15))){ut=3;break t}ee!=null&&(ee[0]=oe),Kt!=null&&(Kt[0]=_e),Mt!=null&&(Mt[0]=zt),gt[0]+=18,ut[0]-=18,re[0]=1}ut=0}}if(ot=ot[0],mt=mt[0],ut!=0)return ut;if(gt=!!(2&mt),!ft&&ot)return 3;if(k!=null&&(k[0]=!!(16&mt)),D!=null&&(D[0]=gt),O!=null&&(O[0]=0),D=H[0],mt=X[0],ot&&gt&&z==null){ut=0;break}if(4>_){ut=7;break}if(ft&&ot||!ft&&!ot&&!i(u,f[0],"ALPH")){_=[_],st.na=[st.na],st.P=[st.P],st.Sa=[st.Sa];t:{oe=u,ut=f,ft=_;var re=st.gb;Kt=st.na,Mt=st.P,ee=st.Sa,_e=22,t(oe!=null),t(ft!=null),zt=ut[0];var ye=ft[0];for(t(Kt!=null),t(ee!=null),Kt[0]=null,Mt[0]=null,ee[0]=0;;){if(ut[0]=zt,ft[0]=ye,8>ye){ut=7;break t}var Oe=Le(oe,zt+4);if(4294967286<Oe){ut=3;break t}var hr=8+Oe+1&-2;if(_e+=hr,0<re&&_e>re){ut=3;break t}if(!i(oe,zt,"VP8 ")||!i(oe,zt,"VP8L")){ut=0;break t}if(ye[0]<hr){ut=7;break t}i(oe,zt,"ALPH")||(Kt[0]=oe,Mt[0]=zt+8,ee[0]=Oe),zt+=hr,ye-=hr}}if(_=_[0],st.na=st.na[0],st.P=st.P[0],st.Sa=st.Sa[0],ut!=0)break}_=[_],st.Ja=[st.Ja],st.xa=[st.xa];t:if(re=u,ut=f,ft=_,Kt=st.gb[0],Mt=st.Ja,ee=st.xa,oe=ut[0],zt=!i(re,oe,"VP8 "),_e=!i(re,oe,"VP8L"),t(re!=null),t(ft!=null),t(Mt!=null),t(ee!=null),8>ft[0])ut=7;else{if(zt||_e){if(re=Le(re,oe+4),12<=Kt&&re>Kt-12){ut=3;break t}if(Z&&re>ft[0]-8){ut=7;break t}Mt[0]=re,ut[0]+=8,ft[0]-=8,ee[0]=_e}else ee[0]=5<=ft[0]&&re[oe+0]==47&&!(re[oe+4]>>5),Mt[0]=ft[0];ut=0}if(_=_[0],st.Ja=st.Ja[0],st.xa=st.xa[0],f=f[0],ut!=0)break;if(4294967286<st.Ja)return 3;if(O==null||gt||(O[0]=st.xa?2:1),D=[D],mt=[mt],st.xa){if(5>_){ut=7;break}O=D,Z=mt,gt=k,u==null||5>_?u=0:5<=_&&u[f+0]==47&&!(u[f+4]>>5)?(ft=[0],re=[0],Kt=[0],qt(Mt=new rt,u,f,_),vt(Mt,ft,re,Kt)?(O!=null&&(O[0]=ft[0]),Z!=null&&(Z[0]=re[0]),gt!=null&&(gt[0]=Kt[0]),u=1):u=0):u=0}else{if(10>_){ut=7;break}O=mt,u==null||10>_||!na(u,f+3,_-3)?u=0:(Z=u[f+0]|u[f+1]<<8|u[f+2]<<16,gt=16383&(u[f+7]<<8|u[f+6]),u=16383&(u[f+9]<<8|u[f+8]),1&Z||3<(Z>>1&7)||!(Z>>4&1)||Z>>5>=st.Ja||!gt||!u?u=0:(D&&(D[0]=gt),O&&(O[0]=u),u=1))}if(!u||(D=D[0],mt=mt[0],ot&&(H[0]!=D||X[0]!=mt)))return 3;z!=null&&(z[0]=st,z.offset=f-z.w,t(4294967286>f-z.w),t(z.offset==z.ha-_));break}return ut==0||ut==7&&ot&&z==null?(k!=null&&(k[0]|=st.na!=null&&0<st.na.length),F!=null&&(F[0]=D),E!=null&&(E[0]=mt),0):ut}function co(u,f,_){var F=f.width,E=f.height,k=0,D=0,O=F,z=E;if(f.Da=u!=null&&0<u.Da,f.Da&&(O=u.cd,z=u.bd,k=u.v,D=u.j,11>_||(k&=-2,D&=-2),0>k||0>D||0>=O||0>=z||k+O>F||D+z>E))return 0;if(f.v=k,f.j=D,f.va=k+O,f.o=D+z,f.U=O,f.T=z,f.da=u!=null&&0<u.da,f.da){if(!dr(O,z,_=[u.ib],k=[u.hb]))return 0;f.ib=_[0],f.hb=k[0]}return f.ob=u!=null&&u.ob,f.Kb=u==null||!u.Sd,f.da&&(f.ob=f.ib<3*F/4&&f.hb<3*E/4,f.Kb=0),1}function _s(u){if(u==null)return 2;if(11>u.S){var f=u.f.RGBA;f.fb+=(u.height-1)*f.A,f.A=-f.A}else f=u.f.kb,u=u.height,f.O+=(u-1)*f.fa,f.fa=-f.fa,f.N+=(u-1>>1)*f.Ab,f.Ab=-f.Ab,f.W+=(u-1>>1)*f.Db,f.Db=-f.Db,f.F!=null&&(f.J+=(u-1)*f.lb,f.lb=-f.lb);return 0}function bs(u,f,_,F){if(F==null||0>=u||0>=f)return 2;if(_!=null){if(_.Da){var E=_.cd,k=_.bd,D=-2&_.v,O=-2&_.j;if(0>D||0>O||0>=E||0>=k||D+E>u||O+k>f)return 2;u=E,f=k}if(_.da){if(!dr(u,f,E=[_.ib],k=[_.hb]))return 2;u=E[0],f=k[0]}}F.width=u,F.height=f;t:{var z=F.width,H=F.height;if(u=F.S,0>=z||0>=H||!(u>=La&&13>u))u=2;else{if(0>=F.Rd&&F.sd==null){D=k=E=f=0;var X=(O=z*T[u])*H;if(11>u||(k=(H+1)/2*(f=(z+1)/2),u==12&&(D=(E=z)*H)),(H=h(X+2*k+D))==null){u=1;break t}F.sd=H,11>u?((z=F.f.RGBA).eb=H,z.fb=0,z.A=O,z.size=X):((z=F.f.kb).y=H,z.O=0,z.fa=O,z.Fd=X,z.f=H,z.N=0+X,z.Ab=f,z.Cd=k,z.ea=H,z.W=0+X+k,z.Db=f,z.Ed=k,u==12&&(z.F=H,z.J=0+X+2*k),z.Tc=D,z.lb=E)}if(f=1,E=F.S,k=F.width,D=F.height,E>=La&&13>E)if(11>E)u=F.f.RGBA,f&=(O=Math.abs(u.A))*(D-1)+k<=u.size,f&=O>=k*T[E],f&=u.eb!=null;else{u=F.f.kb,O=(k+1)/2,X=(D+1)/2,z=Math.abs(u.fa),H=Math.abs(u.Ab);var ot=Math.abs(u.Db),Z=Math.abs(u.lb),st=Z*(D-1)+k;f&=z*(D-1)+k<=u.Fd,f&=H*(X-1)+O<=u.Cd,f=(f&=ot*(X-1)+O<=u.Ed)&z>=k&H>=O&ot>=O,f&=u.y!=null,f&=u.f!=null,f&=u.ea!=null,E==12&&(f&=Z>=k,f&=st<=u.Tc,f&=u.F!=null)}else f=0;u=f?0:2}}return u!=0||_!=null&&_.fd&&(u=_s(F)),u}var ci=64,Ko=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],$o=24,uo=32,Vs=8,bn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ge("Predictor0","PredictorAdd0"),yt.Predictor0=function(){return 4278190080},yt.Predictor1=function(u){return u},yt.Predictor2=function(u,f,_){return f[_+0]},yt.Predictor3=function(u,f,_){return f[_+1]},yt.Predictor4=function(u,f,_){return f[_-1]},yt.Predictor5=function(u,f,_){return Ie(Ie(u,f[_+1]),f[_+0])},yt.Predictor6=function(u,f,_){return Ie(u,f[_-1])},yt.Predictor7=function(u,f,_){return Ie(u,f[_+0])},yt.Predictor8=function(u,f,_){return Ie(f[_-1],f[_+0])},yt.Predictor9=function(u,f,_){return Ie(f[_+0],f[_+1])},yt.Predictor10=function(u,f,_){return Ie(Ie(u,f[_-1]),Ie(f[_+0],f[_+1]))},yt.Predictor11=function(u,f,_){var F=f[_+0];return 0>=pr(F>>24&255,u>>24&255,(f=f[_-1])>>24&255)+pr(F>>16&255,u>>16&255,f>>16&255)+pr(F>>8&255,u>>8&255,f>>8&255)+pr(255&F,255&u,255&f)?F:u},yt.Predictor12=function(u,f,_){var F=f[_+0];return(Ge((u>>24&255)+(F>>24&255)-((f=f[_-1])>>24&255))<<24|Ge((u>>16&255)+(F>>16&255)-(f>>16&255))<<16|Ge((u>>8&255)+(F>>8&255)-(f>>8&255))<<8|Ge((255&u)+(255&F)-(255&f)))>>>0},yt.Predictor13=function(u,f,_){var F=f[_-1];return(Ze((u=Ie(u,f[_+0]))>>24&255,F>>24&255)<<24|Ze(u>>16&255,F>>16&255)<<16|Ze(u>>8&255,F>>8&255)<<8|Ze(u>>0&255,F>>0&255))>>>0};var IA=yt.PredictorAdd0;yt.PredictorAdd1=wr,ge("Predictor2","PredictorAdd2"),ge("Predictor3","PredictorAdd3"),ge("Predictor4","PredictorAdd4"),ge("Predictor5","PredictorAdd5"),ge("Predictor6","PredictorAdd6"),ge("Predictor7","PredictorAdd7"),ge("Predictor8","PredictorAdd8"),ge("Predictor9","PredictorAdd9"),ge("Predictor10","PredictorAdd10"),ge("Predictor11","PredictorAdd11"),ge("Predictor12","PredictorAdd12"),ge("Predictor13","PredictorAdd13");var Ea=yt.PredictorAdd2;ur("ColorIndexInverseTransform","MapARGB","32b",function(u){return u>>8&255},function(u){return u}),ur("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(u){return u},function(u){return u>>8&255});var qo,ns=yt.ColorIndexInverseTransform,js=yt.MapARGB,Ks=yt.VP8LColorIndexInverseTransformAlpha,Wl=yt.MapAlpha,$s=yt.VP8LPredictorsAdd=[];$s.length=16,(yt.VP8LPredictors=[]).length=16,(yt.VP8LPredictorsAdd_C=[]).length=16,(yt.VP8LPredictors_C=[]).length=16;var Lr,In,qs,Hn,Vn,ho,xs,po,fo,ca,jn,Bs,Ta,go,Gs,Kn,$i,ln,ua,ai,fi,gi,Pi,ss,Ua,Pa,Go,mo,$u=h(511),ul=h(2041),Ii=h(225),ha=h(767),$n=0,EA=ul,TA=Ii,En=ha,qi=$u,La=0,Wo=1,Xl=2,UA=3,Xo=4,hl=5,Oc=6,da=7,Zl=8,PA=9,dl=10,Rc=[2,3,7],qu=[3,3,11],zc=[280,256,256,256,40],Hc=[0,1,1,1,0],LA=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Vc=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Cs=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],as=8,Yl=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],qn=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Qa=null,ld=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Gu=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],jc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Kc=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],pl=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],yo=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Ve=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ma=[],Mn=[],cn=[],Wu=1,Ne=2,pa=[],Fs=[];ue("UpsampleRgbLinePair",qr,3),ue("UpsampleBgrLinePair",er,3),ue("UpsampleRgbaLinePair",ws,4),ue("UpsampleBgraLinePair",Hi,4),ue("UpsampleArgbLinePair",Nr,4),ue("UpsampleRgba4444LinePair",Mr,2),ue("UpsampleRgb565LinePair",_i,2);var Xu=yt.UpsampleRgbLinePair,$c=yt.UpsampleBgrLinePair,qc=yt.UpsampleRgbaLinePair,ka=yt.UpsampleBgraLinePair,Gc=yt.UpsampleArgbLinePair,Jl=yt.UpsampleRgba4444LinePair,vo=yt.UpsampleRgb565LinePair,ti=16,Zo=1<<ti-1,fa=-227,wo=482,Wc=6,Xc=(256<<Wc)-1,QA=0,ga=h(256),tc=h(256),Ye=h(256),gr=h(256),b=h(wo-fa),r=h(wo-fa);Ia("YuvToRgbRow",qr,3),Ia("YuvToBgrRow",er,3),Ia("YuvToRgbaRow",ws,4),Ia("YuvToBgraRow",Hi,4),Ia("YuvToArgbRow",Nr,4),Ia("YuvToRgba4444Row",Mr,2),Ia("YuvToRgb565Row",_i,2);var c=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],g=[0,2,8],y=[8,7,6,4,4,2,2,2,1,1,1,1],x=1;this.WebPDecodeRGBA=function(u,f,_,F,E){var k=Wo,D=new vs,O=new Dr;D.ba=O,O.S=k,O.width=[O.width],O.height=[O.height];var z=O.width,H=O.height,X=new pt;if(X==null||u==null)var ot=2;else t(X!=null),ot=la(u,f,_,X.width,X.height,X.Pd,X.Qd,X.format,null);if(ot!=0?z=0:(z!=null&&(z[0]=X.width[0]),H!=null&&(H[0]=X.height[0]),z=1),z){O.width=O.width[0],O.height=O.height[0],F!=null&&(F[0]=O.width),E!=null&&(E[0]=O.height);t:{if(F=new Rn,(E=new SA).data=u,E.w=f,E.ha=_,E.kd=1,f=[0],t(E!=null),((u=la(E.data,E.w,E.ha,null,null,null,f,null,E))==0||u==7)&&f[0]&&(u=4),(f=u)==0){if(t(D!=null),F.data=E.data,F.w=E.w+E.offset,F.ha=E.ha-E.offset,F.put=kt,F.ac=Pt,F.bc=Ot,F.ma=D,E.xa){if((u=cr())==null){D=1;break t}if(function(Z,st){var mt=[0],gt=[0],ut=[0];e:for(;;){if(Z==null)return 0;if(st==null)return Z.a=2,0;if(Z.l=st,Z.a=0,qt(Z.m,st.data,st.w,st.ha),!vt(Z.m,mt,gt,ut)){Z.a=3;break e}if(Z.xb=Ne,st.width=mt[0],st.height=gt[0],!jr(mt[0],gt[0],1,Z,null))break e;return 1}return t(Z.a!=0),0}(u,F)){if(F=(f=bs(F.width,F.height,D.Oa,D.ba))==0){e:{F=u;r:for(;;){if(F==null){F=0;break e}if(t(F.s.yc!=null),t(F.s.Ya!=null),t(0<F.s.Wb),t((_=F.l)!=null),t((E=_.ma)!=null),F.xb!=0){if(F.ca=E.ba,F.tb=E.tb,t(F.ca!=null),!co(E.Oa,_,UA)){F.a=2;break r}if(!ni(F,_.width)||_.da)break r;if((_.da||ke(F.ca.S))&&Zt(),11>F.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),F.ca.f.kb.F!=null&&Zt()),F.Pb&&0<F.s.ua&&F.s.vb.X==null&&!Qe(F.s.vb,F.s.Wa.Xa)){F.a=1;break r}F.xb=0}if(!Ir(F,F.V,F.Ba,F.c,F.i,_.o,Fr))break r;E.Dc=F.Ma,F=1;break e}t(F.a!=0),F=0}F=!F}F&&(f=u.a)}else f=u.a}else{if((u=new ki)==null){D=1;break t}if(u.Fa=E.na,u.P=E.P,u.qc=E.Sa,wi(u,F)){if((f=bs(F.width,F.height,D.Oa,D.ba))==0){if(u.Aa=0,_=D.Oa,t((E=u)!=null),_!=null){if(0<(z=0>(z=_.Md)?0:100<z?255:255*z/100)){for(H=X=0;4>H;++H)12>(ot=E.pb[H]).lc&&(ot.ia=z*y[0>ot.lc?0:ot.lc]>>3),X|=ot.ia;X&&(alert("todo:VP8InitRandom"),E.ia=1)}E.Ga=_.Id,100<E.Ga?E.Ga=100:0>E.Ga&&(E.Ga=0)}hA(u,F)||(f=u.a)}}else f=u.a}f==0&&D.Oa!=null&&D.Oa.fd&&(f=_s(D.ba))}D=f}k=D!=0?null:11>k?O.f.RGBA.eb:O.f.kb.y}else k=null;return k};var T=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function C(yt,Rt){for(var Wt="",At=0;At<4;At++)Wt+=String.fromCharCode(yt[Rt++]);return Wt}function I(yt,Rt){return(yt[Rt+0]<<0|yt[Rt+1]<<8|yt[Rt+2]<<16)>>>0}function U(yt,Rt){return(yt[Rt+0]<<0|yt[Rt+1]<<8|yt[Rt+2]<<16|yt[Rt+3]<<24)>>>0}new v;var Q=[0],P=[0],K=[],V=new v,Y=n,$=function(yt,Rt){var Wt={},At=0,lt=!1,bt=0,wt=0;if(Wt.frames=[],!function(dt,Bt,Et,Nt){for(var Ht=0;Ht<Nt;Ht++)if(dt[Bt+Ht]!=Et.charCodeAt(Ht))return!0;return!1}(yt,Rt,"RIFF",4)){var Xt,Gt;for(U(yt,Rt+=4),Rt+=8;Rt<yt.length;){var Yt=C(yt,Rt),qt=U(yt,Rt+=4);Rt+=4;var te=qt+(1&qt);switch(Yt){case"VP8 ":case"VP8L":Wt.frames[At]===void 0&&(Wt.frames[At]={}),(rt=Wt.frames[At]).src_off=lt?wt:Rt-8,rt.src_size=bt+qt+8,At++,lt&&(lt=!1,bt=0,wt=0);break;case"VP8X":(rt=Wt.header={}).feature_flags=yt[Rt];var Jt=Rt+4;rt.canvas_width=1+I(yt,Jt),Jt+=3,rt.canvas_height=1+I(yt,Jt),Jt+=3;break;case"ALPH":lt=!0,bt=te+8,wt=Rt-8;break;case"ANIM":(rt=Wt.header).bgcolor=U(yt,Rt),Jt=Rt+4,rt.loop_count=(Xt=yt)[(Gt=Jt)+0]<<0|Xt[Gt+1]<<8,Jt+=2;break;case"ANMF":var me,rt;(rt=Wt.frames[At]={}).offset_x=2*I(yt,Rt),Rt+=3,rt.offset_y=2*I(yt,Rt),Rt+=3,rt.width=1+I(yt,Rt),Rt+=3,rt.height=1+I(yt,Rt),Rt+=3,rt.duration=I(yt,Rt),Rt+=3,me=yt[Rt++],rt.dispose=1&me,rt.blend=me>>1&1}Yt!="ANMF"&&(Rt+=te)}return Wt}}(Y,0);$.response=Y,$.rgbaoutput=!0,$.dataurl=!1;var it=$.header?$.header:null,ht=$.frames?$.frames:null;if(it){it.loop_counter=it.loop_count,Q=[it.canvas_height],P=[it.canvas_width];for(var St=0;St<ht.length&&ht[St].blend!=0;St++);}var Tt=ht[0],Lt=V.WebPDecodeRGBA(Y,Tt.src_off,Tt.src_size,P,Q);Tt.rgba=Lt,Tt.imgwidth=P[0],Tt.imgheight=Q[0];for(var Ft=0;Ft<P[0]*Q[0]*4;Ft++)K[Ft]=Lt[Ft];return this.width=P,this.height=Q,this.data=K,this}(function(n){var t=function(){return typeof bg=="function"},i=function(Q,P,K,V){var Y=4,$=p;switch(V){case n.image_compression.FAST:Y=1,$=h;break;case n.image_compression.MEDIUM:Y=6,$=o;break;case n.image_compression.SLOW:Y=9,$=v}Q=s(Q,P,K,$);var it=bg(Q,{level:Y});return n.__addimage__.arrayBufferToBinaryString(it)},s=function(Q,P,K,V){for(var Y,$,it,ht=Q.length/P,St=new Uint8Array(Q.length+ht),Tt=I(),Lt=0;Lt<ht;Lt+=1){if(it=Lt*P,Y=Q.subarray(it,it+P),V)St.set(V(Y,K,$),it+Lt);else{for(var Ft,yt=Tt.length,Rt=[];Ft<yt;Ft+=1)Rt[Ft]=Tt[Ft](Y,K,$);var Wt=U(Rt.concat());St.set(Rt[Wt],it+Lt)}$=Y}return St},l=function(Q){var P=Array.apply([],Q);return P.unshift(0),P},h=function(Q,P){var K,V=[],Y=Q.length;V[0]=1;for(var $=0;$<Y;$+=1)K=Q[$-P]||0,V[$+1]=Q[$]-K+256&255;return V},p=function(Q,P,K){var V,Y=[],$=Q.length;Y[0]=2;for(var it=0;it<$;it+=1)V=K&&K[it]||0,Y[it+1]=Q[it]-V+256&255;return Y},o=function(Q,P,K){var V,Y,$=[],it=Q.length;$[0]=3;for(var ht=0;ht<it;ht+=1)V=Q[ht-P]||0,Y=K&&K[ht]||0,$[ht+1]=Q[ht]+256-(V+Y>>>1)&255;return $},v=function(Q,P,K){var V,Y,$,it,ht=[],St=Q.length;ht[0]=4;for(var Tt=0;Tt<St;Tt+=1)V=Q[Tt-P]||0,Y=K&&K[Tt]||0,$=K&&K[Tt-P]||0,it=C(V,Y,$),ht[Tt+1]=Q[Tt]-it+256&255;return ht},C=function(Q,P,K){if(Q===P&&P===K)return Q;var V=Math.abs(P-K),Y=Math.abs(Q-K),$=Math.abs(Q+P-K-K);return V<=Y&&V<=$?Q:Y<=$?P:K},I=function(){return[l,h,p,o,v]},U=function(Q){var P=Q.map(function(K){return K.reduce(function(V,Y){return V+Math.abs(Y)},0)});return P.indexOf(Math.min.apply(null,P))};n.processPNG=function(Q,P,K,V){var Y,$,it,ht,St,Tt,Lt,Ft,yt,Rt,Wt,At,lt,bt,wt,Xt=this.decode.FLATE_DECODE,Gt="";if(this.__addimage__.isArrayBuffer(Q)&&(Q=new Uint8Array(Q)),this.__addimage__.isArrayBufferView(Q)){if(Q=(it=new q4(Q)).imgData,$=it.bits,Y=it.colorSpace,St=it.colors,[4,6].indexOf(it.colorType)!==-1){if(it.bits===8){yt=(Ft=it.pixelBitlength==32?new Uint32Array(it.decodePixels().buffer):it.pixelBitlength==16?new Uint16Array(it.decodePixels().buffer):new Uint8Array(it.decodePixels().buffer)).length,Wt=new Uint8Array(yt*it.colors),Rt=new Uint8Array(yt);var Yt,qt=it.pixelBitlength-it.bits;for(bt=0,wt=0;bt<yt;bt++){for(lt=Ft[bt],Yt=0;Yt<qt;)Wt[wt++]=lt>>>Yt&255,Yt+=it.bits;Rt[bt]=lt>>>Yt&255}}if(it.bits===16){yt=(Ft=new Uint32Array(it.decodePixels().buffer)).length,Wt=new Uint8Array(yt*(32/it.pixelBitlength)*it.colors),Rt=new Uint8Array(yt*(32/it.pixelBitlength)),At=it.colors>1,bt=0,wt=0;for(var te=0;bt<yt;)lt=Ft[bt++],Wt[wt++]=lt>>>0&255,At&&(Wt[wt++]=lt>>>16&255,lt=Ft[bt++],Wt[wt++]=lt>>>0&255),Rt[te++]=lt>>>16&255;$=8}V!==n.image_compression.NONE&&t()?(Q=i(Wt,it.width*it.colors,it.colors,V),Lt=i(Rt,it.width,1,V)):(Q=Wt,Lt=Rt,Xt=void 0)}if(it.colorType===3&&(Y=this.color_spaces.INDEXED,Tt=it.palette,it.transparency.indexed)){var Jt=it.transparency.indexed,me=0;for(bt=0,yt=Jt.length;bt<yt;++bt)me+=Jt[bt];if((me/=255)===yt-1&&Jt.indexOf(0)!==-1)ht=[Jt.indexOf(0)];else if(me!==yt){for(Ft=it.decodePixels(),Rt=new Uint8Array(Ft.length),bt=0,yt=Ft.length;bt<yt;bt++)Rt[bt]=Jt[Ft[bt]];Lt=i(Rt,it.width,1)}}var rt=function(dt){var Bt;switch(dt){case n.image_compression.FAST:Bt=11;break;case n.image_compression.MEDIUM:Bt=13;break;case n.image_compression.SLOW:Bt=14;break;default:Bt=12}return Bt}(V);return Xt===this.decode.FLATE_DECODE&&(Gt="/Predictor "+rt+" "),Gt+="/Colors "+St+" /BitsPerComponent "+$+" /Columns "+it.width,(this.__addimage__.isArrayBuffer(Q)||this.__addimage__.isArrayBufferView(Q))&&(Q=this.__addimage__.arrayBufferToBinaryString(Q)),(Lt&&this.__addimage__.isArrayBuffer(Lt)||this.__addimage__.isArrayBufferView(Lt))&&(Lt=this.__addimage__.arrayBufferToBinaryString(Lt)),{alias:K,data:Q,index:P,filter:Xt,decodeParameters:Gt,transparency:ht,palette:Tt,sMask:Lt,predictor:rt,width:it.width,height:it.height,bitsPerComponent:$,colorSpace:Y}}}})(Tr.API),function(n){n.processGIF89A=function(t,i,s,l){var h=new G4(t),p=h.width,o=h.height,v=[];h.decodeAndBlitFrameRGBA(0,v);var C={data:v,width:p,height:o},I=new Qg(100).encode(C,100);return n.processJPEG.call(this,I,i,s,l)},n.processGIF87A=n.processGIF89A}(Tr.API),So.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var t=0;t<n;t++){var i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),h=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:l,green:s,blue:i,quad:h}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},So.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[n]()}catch(i){Ui.log("bit decode error:"+i)}},So.prototype.bit1=function(){var n,t=Math.ceil(this.width/8),i=t%4;for(n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,l=0;l<t;l++)for(var h=this.datav.getUint8(this.pos++,!0),p=s*this.width*4+8*l*4,o=0;o<8&&8*l+o<this.width;o++){var v=this.palette[h>>7-o&1];this.data[p+4*o]=v.blue,this.data[p+4*o+1]=v.green,this.data[p+4*o+2]=v.red,this.data[p+4*o+3]=255}i!==0&&(this.pos+=4-i)}},So.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),t=n%4,i=this.height-1;i>=0;i--){for(var s=this.bottom_up?i:this.height-1-i,l=0;l<n;l++){var h=this.datav.getUint8(this.pos++,!0),p=s*this.width*4+2*l*4,o=h>>4,v=15&h,C=this.palette[o];if(this.data[p]=C.blue,this.data[p+1]=C.green,this.data[p+2]=C.red,this.data[p+3]=255,2*l+1>=this.width)break;C=this.palette[v],this.data[p+4]=C.blue,this.data[p+4+1]=C.green,this.data[p+4+2]=C.red,this.data[p+4+3]=255}t!==0&&(this.pos+=4-t)}},So.prototype.bit8=function(){for(var n=this.width%4,t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var l=this.datav.getUint8(this.pos++,!0),h=i*this.width*4+4*s;if(l<this.palette.length){var p=this.palette[l];this.data[h]=p.red,this.data[h+1]=p.green,this.data[h+2]=p.blue,this.data[h+3]=255}else this.data[h]=255,this.data[h+1]=255,this.data[h+2]=255,this.data[h+3]=255}n!==0&&(this.pos+=4-n)}},So.prototype.bit15=function(){for(var n=this.width%3,t=parseInt("11111",2),i=this.height-1;i>=0;i--){for(var s=this.bottom_up?i:this.height-1-i,l=0;l<this.width;l++){var h=this.datav.getUint16(this.pos,!0);this.pos+=2;var p=(h&t)/t*255|0,o=(h>>5&t)/t*255|0,v=(h>>10&t)/t*255|0,C=h>>15?255:0,I=s*this.width*4+4*l;this.data[I]=v,this.data[I+1]=o,this.data[I+2]=p,this.data[I+3]=C}this.pos+=n}},So.prototype.bit16=function(){for(var n=this.width%3,t=parseInt("11111",2),i=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var l=this.bottom_up?s:this.height-1-s,h=0;h<this.width;h++){var p=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(p&t)/t*255|0,v=(p>>5&i)/i*255|0,C=(p>>11)/t*255|0,I=l*this.width*4+4*h;this.data[I]=C,this.data[I+1]=v,this.data[I+2]=o,this.data[I+3]=255}this.pos+=n}},So.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var t=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),h=this.datav.getUint8(this.pos++,!0),p=t*this.width*4+4*i;this.data[p]=h,this.data[p+1]=l,this.data[p+2]=s,this.data[p+3]=255}this.pos+=this.width%4}},So.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var t=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),h=this.datav.getUint8(this.pos++,!0),p=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*i;this.data[o]=h,this.data[o+1]=l,this.data[o+2]=s,this.data[o+3]=p}},So.prototype.getData=function(){return this.data},function(n){n.processBMP=function(t,i,s,l){var h=new So(t,!1),p=h.width,o=h.height,v={data:h.getData(),width:p,height:o},C=new Qg(100).encode(v,100);return n.processJPEG.call(this,C,i,s,l)}}(Tr.API),Ev.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(t,i,s,l){var h=new Ev(t),p=h.width,o=h.height,v={data:h.getData(),width:p,height:o},C=new Qg(100).encode(v,100);return n.processJPEG.call(this,C,i,s,l)}}(Tr.API),Tr.API.processRGBA=function(n,t,i){for(var s=n.data,l=s.length,h=new Uint8Array(l/4*3),p=new Uint8Array(l/4),o=0,v=0,C=0;C<l;C+=4){var I=s[C],U=s[C+1],Q=s[C+2],P=s[C+3];h[o++]=I,h[o++]=U,h[o++]=Q,p[v++]=P}var K=this.__addimage__.arrayBufferToBinaryString(h);return{alpha:this.__addimage__.arrayBufferToBinaryString(p),data:K,index:t,alias:i,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Tr.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},pu=Tr.API,Vd=pu.getCharWidthsArray=function(n,t){var i,s,l=(t=t||{}).font||this.internal.getFont(),h=t.fontSize||this.internal.getFontSize(),p=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:l.metadata.Unicode.widths,v=o.fof?o.fof:1,C=t.kerning?t.kerning:l.metadata.Unicode.kerning,I=C.fof?C.fof:1,U=t.doKerning!==!1,Q=0,P=n.length,K=0,V=o[0]||v,Y=[];for(i=0;i<P;i++)s=n.charCodeAt(i),typeof l.metadata.widthOfString=="function"?Y.push((l.metadata.widthOfGlyph(l.metadata.characterToGlyph(s))+p*(1e3/h)||0)/1e3):(Q=U&&ii(C[s])==="object"&&!isNaN(parseInt(C[s][K],10))?C[s][K]/I:0,Y.push((o[s]||V)/v+Q)),K=s;return Y},Cv=pu.getStringUnitWidth=function(n,t){var i=(t=t||{}).fontSize||this.internal.getFontSize(),s=t.font||this.internal.getFont(),l=t.charSpace||this.internal.getCharSpace();return pu.processArabic&&(n=pu.processArabic(n)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(n,i,l)/i:Vd.apply(this,arguments).reduce(function(h,p){return h+p},0)},Fv=function(n,t,i,s){for(var l=[],h=0,p=n.length,o=0;h!==p&&o+t[h]<i;)o+=t[h],h++;l.push(n.slice(0,h));var v=h;for(o=0;h!==p;)o+t[h]>s&&(l.push(n.slice(v,h)),o=0,v=h),o+=t[h],h++;return v!==h&&l.push(n.slice(v,h)),l},Sv=function(n,t,i){i||(i={});var s,l,h,p,o,v,C,I=[],U=[I],Q=i.textIndent||0,P=0,K=0,V=n.split(" "),Y=Vd.apply(this,[" ",i])[0];if(v=i.lineIndent===-1?V[0].length+2:i.lineIndent||0){var $=Array(v).join(" "),it=[];V.map(function(St){(St=St.split(/\s*\n/)).length>1?it=it.concat(St.map(function(Tt,Lt){return(Lt&&Tt.length?`
`:"")+Tt})):it.push(St[0])}),V=it,v=Cv.apply(this,[$,i])}for(h=0,p=V.length;h<p;h++){var ht=0;if(s=V[h],v&&s[0]==`
`&&(s=s.substr(1),ht=1),Q+P+(K=(l=Vd.apply(this,[s,i])).reduce(function(St,Tt){return St+Tt},0))>t||ht){if(K>t){for(o=Fv.apply(this,[s,l,t-(Q+P),t]),I.push(o.shift()),I=[o.pop()];o.length;)U.push([o.shift()]);K=l.slice(s.length-(I[0]?I[0].length:0)).reduce(function(St,Tt){return St+Tt},0)}else I=[s];U.push(I),Q=K+v,P=Y}else I.push(s),Q+=P+K,P=Y}return C=v?function(St,Tt){return(Tt?$:"")+St.join(" ")}:function(St){return St.join(" ")},U.map(C)},pu.splitTextToSize=function(n,t,i){var s,l=(i=i||{}).fontSize||this.internal.getFontSize(),h=(function(I){if(I.widths&&I.kerning)return{widths:I.widths,kerning:I.kerning};var U=this.internal.getFont(I.fontName,I.fontStyle);return U.metadata.Unicode?{widths:U.metadata.Unicode.widths||{0:1},kerning:U.metadata.Unicode.kerning||{}}:{font:U.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,i);s=Array.isArray(n)?n:String(n).split(/\r?\n/);var p=1*this.internal.scaleFactor*t/l;h.textIndent=i.textIndent?1*i.textIndent*this.internal.scaleFactor/l:0,h.lineIndent=i.lineIndent;var o,v,C=[];for(o=0,v=s.length;o<v;o++)C=C.concat(Sv.apply(this,[s[o],p,h]));return C},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",i={},s={},l=0;l<t.length;l++)i[t[l]]="0123456789abcdef"[l],s["0123456789abcdef"[l]]=t[l];var h=function(U){return"0x"+parseInt(U,10).toString(16)},p=n.__fontmetrics__.compress=function(U){var Q,P,K,V,Y=["{"];for(var $ in U){if(Q=U[$],isNaN(parseInt($,10))?P="'"+$+"'":($=parseInt($,10),P=(P=h($).slice(2)).slice(0,-1)+s[P.slice(-1)]),typeof Q=="number")Q<0?(K=h(Q).slice(3),V="-"):(K=h(Q).slice(2),V=""),K=V+K.slice(0,-1)+s[K.slice(-1)];else{if(ii(Q)!=="object")throw new Error("Don't know what to do with value type "+ii(Q)+".");K=p(Q)}Y.push(P+K)}return Y.push("}"),Y.join("")},o=n.__fontmetrics__.uncompress=function(U){if(typeof U!="string")throw new Error("Invalid argument passed to uncompress.");for(var Q,P,K,V,Y={},$=1,it=Y,ht=[],St="",Tt="",Lt=U.length-1,Ft=1;Ft<Lt;Ft+=1)(V=U[Ft])=="'"?Q?(K=Q.join(""),Q=void 0):Q=[]:Q?Q.push(V):V=="{"?(ht.push([it,K]),it={},K=void 0):V=="}"?((P=ht.pop())[0][P[1]]=it,K=void 0,it=P[0]):V=="-"?$=-1:K===void 0?i.hasOwnProperty(V)?(St+=i[V],K=parseInt(St,16)*$,$=1,St=""):St+=V:i.hasOwnProperty(V)?(Tt+=i[V],it[K]=parseInt(Tt,16)*$,$=1,K=void 0,Tt=""):Tt+=V;return Y},v={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},C={Unicode:{Courier:v,"Courier-Bold":v,"Courier-BoldOblique":v,"Courier-Oblique":v,Helvetica:v,"Helvetica-Bold":v,"Helvetica-BoldOblique":v,"Helvetica-Oblique":v,"Times-Roman":v,"Times-Bold":v,"Times-BoldItalic":v,"Times-Italic":v}},I={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(U){var Q=U.font,P=I.Unicode[Q.postScriptName];P&&(Q.metadata.Unicode={},Q.metadata.Unicode.widths=P.widths,Q.metadata.Unicode.kerning=P.kerning);var K=C.Unicode[Q.postScriptName];K&&(Q.metadata.Unicode.encoding=K,Q.encoding=K.codePages[0])}])}(Tr.API),function(n){var t=function(i){for(var s=i.length,l=new Uint8Array(s),h=0;h<s;h++)l[h]=i.charCodeAt(h);return l};n.API.events.push(["addFont",function(i){var s=void 0,l=i.font,h=i.instance;if(!l.isStandardFont){if(h===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+l.postScriptName+"').");if(typeof(s=h.existsFileInVFS(l.postScriptName)===!1?h.loadFile(l.postScriptName):h.getFileFromVFS(l.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+l.postScriptName+"').");(function(p,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(fh(o)),p.metadata=n.API.TTFFont.open(o),p.metadata.Unicode=p.metadata.Unicode||{encoding:{},kerning:{},widths:[]},p.metadata.glyIdsUsed=[0]})(l,s)}}])}(Tr),function(n){function t(){return(Er.canvg?Promise.resolve(Er.canvg):Promise.resolve().then(()=>l7)).catch(function(i){return Promise.reject(new Error("Could not load canvg: "+i))}).then(function(i){return i.default?i.default:i})}Tr.API.addSvgAsImage=function(i,s,l,h,p,o,v,C){if(isNaN(s)||isNaN(l))throw Ui.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(h)||isNaN(p))throw Ui.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var I=document.createElement("canvas");I.width=h,I.height=p;var U=I.getContext("2d");U.fillStyle="#fff",U.fillRect(0,0,I.width,I.height);var Q={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},P=this;return t().then(function(K){return K.fromString(U,i,Q)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(K){return K.render(Q)}).then(function(){P.addImage(I.toDataURL("image/jpeg",1),s,l,h,p,v,C)})}}(),Tr.API.putTotalPages=function(n){var t,i=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(n,"g"),i=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),i=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var l=0;l<this.internal.pages[s].length;l++)this.internal.pages[s][l]=this.internal.pages[s][l].replace(t,i);return this},Tr.API.viewerPreferences=function(n,t){var i;n=n||{},t=t||!1;var s,l,h,p={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(p),v=[],C=0,I=0,U=0;function Q(K,V){var Y,$=!1;for(Y=0;Y<K.length;Y+=1)K[Y]===V&&($=!0);return $}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(p)),this.internal.viewerpreferences.isSubscribed=!1),i=this.internal.viewerpreferences.configuration,n==="reset"||t===!0){var P=o.length;for(U=0;U<P;U+=1)i[o[U]].value=i[o[U]].defaultValue,i[o[U]].explicitSet=!1}if(ii(n)==="object"){for(l in n)if(h=n[l],Q(o,l)&&h!==void 0){if(i[l].type==="boolean"&&typeof h=="boolean")i[l].value=h;else if(i[l].type==="name"&&Q(i[l].valueSet,h))i[l].value=h;else if(i[l].type==="integer"&&Number.isInteger(h))i[l].value=h;else if(i[l].type==="array"){for(C=0;C<h.length;C+=1)if(s=!0,h[C].length===1&&typeof h[C][0]=="number")v.push(String(h[C]-1));else if(h[C].length>1){for(I=0;I<h[C].length;I+=1)typeof h[C][I]!="number"&&(s=!1);s===!0&&v.push([h[C][0]-1,h[C][1]-1].join(" "))}i[l].value="["+v.join(" ")+"]"}else i[l].value=i[l].defaultValue;i[l].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var K,V=[];for(K in i)i[K].explicitSet===!0&&(i[K].type==="name"?V.push("/"+K+" /"+i[K].value):V.push("/"+K+" "+i[K].value));V.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+V.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=i,this},function(n){var t=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',l=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),h=unescape(encodeURIComponent(s)),p=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),v=unescape(encodeURIComponent("</x:xmpmeta>")),C=h.length+p.length+o.length+l.length+v.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+C+" >>"),this.internal.write("stream"),this.internal.write(l+h+p+o+v),this.internal.write("endstream"),this.internal.write("endobj")},i=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(s,l){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:l||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",i),this.internal.events.subscribe("postPutResources",t)),this}}(Tr.API),function(n){var t=n.API,i=t.pdfEscape16=function(h,p){for(var o,v=p.metadata.Unicode.widths,C=["","0","00","000","0000"],I=[""],U=0,Q=h.length;U<Q;++U){if(o=p.metadata.characterToGlyph(h.charCodeAt(U)),p.metadata.glyIdsUsed.push(o),p.metadata.toUnicode[o]=h.charCodeAt(U),v.indexOf(o)==-1&&(v.push(o),v.push([parseInt(p.metadata.widthOfGlyph(o),10)])),o=="0")return I.join("");o=o.toString(16),I.push(C[4-o.length],o)}return I.join("")},s=function(h){var p,o,v,C,I,U,Q;for(I=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,v=[],U=0,Q=(o=Object.keys(h).sort(function(P,K){return P-K})).length;U<Q;U++)p=o[U],v.length>=100&&(I+=`
`+v.length+` beginbfchar
`+v.join(`
`)+`
endbfchar`,v=[]),h[p]!==void 0&&h[p]!==null&&typeof h[p].toString=="function"&&(C=("0000"+h[p].toString(16)).slice(-4),p=("0000"+(+p).toString(16)).slice(-4),v.push("<"+p+"><"+C+">"));return v.length&&(I+=`
`+v.length+` beginbfchar
`+v.join(`
`)+`
endbfchar
`),I+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(h){(function(p){var o=p.font,v=p.out,C=p.newObject,I=p.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="Identity-H"){for(var U=o.metadata.Unicode.widths,Q=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),P="",K=0;K<Q.length;K++)P+=String.fromCharCode(Q[K]);var V=C();I({data:P,addLength1:!0,objectId:V}),v("endobj");var Y=C();I({data:s(o.metadata.toUnicode),addLength1:!0,objectId:Y}),v("endobj");var $=C();v("<<"),v("/Type /FontDescriptor"),v("/FontName /"+ou(o.fontName)),v("/FontFile2 "+V+" 0 R"),v("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),v("/Flags "+o.metadata.flags),v("/StemV "+o.metadata.stemV),v("/ItalicAngle "+o.metadata.italicAngle),v("/Ascent "+o.metadata.ascender),v("/Descent "+o.metadata.decender),v("/CapHeight "+o.metadata.capHeight),v(">>"),v("endobj");var it=C();v("<<"),v("/Type /Font"),v("/BaseFont /"+ou(o.fontName)),v("/FontDescriptor "+$+" 0 R"),v("/W "+n.API.PDFObject.convert(U)),v("/CIDToGIDMap /Identity"),v("/DW 1000"),v("/Subtype /CIDFontType2"),v("/CIDSystemInfo"),v("<<"),v("/Supplement 0"),v("/Registry (Adobe)"),v("/Ordering ("+o.encoding+")"),v(">>"),v(">>"),v("endobj"),o.objectNumber=C(),v("<<"),v("/Type /Font"),v("/Subtype /Type0"),v("/ToUnicode "+Y+" 0 R"),v("/BaseFont /"+ou(o.fontName)),v("/Encoding /"+o.encoding),v("/DescendantFonts ["+it+" 0 R]"),v(">>"),v("endobj"),o.isAlreadyPutted=!0}})(h)}]),t.events.push(["putFont",function(h){(function(p){var o=p.font,v=p.out,C=p.newObject,I=p.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var U=o.metadata.rawData,Q="",P=0;P<U.length;P++)Q+=String.fromCharCode(U[P]);var K=C();I({data:Q,addLength1:!0,objectId:K}),v("endobj");var V=C();I({data:s(o.metadata.toUnicode),addLength1:!0,objectId:V}),v("endobj");var Y=C();v("<<"),v("/Descent "+o.metadata.decender),v("/CapHeight "+o.metadata.capHeight),v("/StemV "+o.metadata.stemV),v("/Type /FontDescriptor"),v("/FontFile2 "+K+" 0 R"),v("/Flags 96"),v("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),v("/FontName /"+ou(o.fontName)),v("/ItalicAngle "+o.metadata.italicAngle),v("/Ascent "+o.metadata.ascender),v(">>"),v("endobj"),o.objectNumber=C();for(var $=0;$<o.metadata.hmtx.widths.length;$++)o.metadata.hmtx.widths[$]=parseInt(o.metadata.hmtx.widths[$]*(1e3/o.metadata.head.unitsPerEm));v("<</Subtype/TrueType/Type/Font/ToUnicode "+V+" 0 R/BaseFont/"+ou(o.fontName)+"/FontDescriptor "+Y+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),v("endobj"),o.isAlreadyPutted=!0}})(h)}]);var l=function(h){var p,o=h.text||"",v=h.x,C=h.y,I=h.options||{},U=h.mutex||{},Q=U.pdfEscape,P=U.activeFontKey,K=U.fonts,V=P,Y="",$=0,it="",ht=K[V].encoding;if(K[V].encoding!=="Identity-H")return{text:o,x:v,y:C,options:I,mutex:U};for(it=o,V=P,Array.isArray(o)&&(it=o[0]),$=0;$<it.length;$+=1)K[V].metadata.hasOwnProperty("cmap")&&(p=K[V].metadata.cmap.unicode.codeMap[it[$].charCodeAt(0)]),p||it[$].charCodeAt(0)<256&&K[V].metadata.hasOwnProperty("Unicode")?Y+=it[$]:Y+="";var St="";return parseInt(V.slice(1))<14||ht==="WinAnsiEncoding"?St=Q(Y,V).split("").map(function(Tt){return Tt.charCodeAt(0).toString(16)}).join(""):ht==="Identity-H"&&(St=i(Y,K[V])),U.isHex=!0,{text:St,x:v,y:C,options:I,mutex:U}};t.events.push(["postProcessText",function(h){var p=h.text||"",o=[],v={text:p,x:h.x,y:h.y,options:h.options,mutex:h.mutex};if(Array.isArray(p)){var C=0;for(C=0;C<p.length;C+=1)Array.isArray(p[C])&&p[C].length===3?o.push([l(Object.assign({},v,{text:p[C][0]})).text,p[C][1],p[C][2]]):o.push(l(Object.assign({},v,{text:p[C]})).text);h.text=o}else h.text=l(Object.assign({},v,{text:p})).text}])}(Tr),function(n){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(i){return t.call(this),this.internal.vFS[i]!==void 0},n.addFileToVFS=function(i,s){return t.call(this),this.internal.vFS[i]=s,this},n.getFileFromVFS=function(i){return t.call(this),this.internal.vFS[i]!==void 0?this.internal.vFS[i]:null}}(Tr.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(s){var l,h,p,o,v,C,I,U=t,Q=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],P=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],K={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},V={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},Y=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],$=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),it=!1,ht=0;this.__bidiEngine__={};var St=function(At){var lt=At.charCodeAt(),bt=lt>>8,wt=V[bt];return wt!==void 0?U[256*wt+(255&lt)]:bt===252||bt===253?"AL":$.test(bt)?"L":bt===8?"R":"N"},Tt=function(At){for(var lt,bt=0;bt<At.length;bt++){if((lt=St(At.charAt(bt)))==="L")return!1;if(lt==="R")return!0}return!1},Lt=function(At,lt,bt,wt){var Xt,Gt,Yt,qt,te=lt[wt];switch(te){case"L":case"R":it=!1;break;case"N":case"AN":break;case"EN":it&&(te="AN");break;case"AL":it=!0,te="R";break;case"WS":te="N";break;case"CS":wt<1||wt+1>=lt.length||(Xt=bt[wt-1])!=="EN"&&Xt!=="AN"||(Gt=lt[wt+1])!=="EN"&&Gt!=="AN"?te="N":it&&(Gt="AN"),te=Gt===Xt?Gt:"N";break;case"ES":te=(Xt=wt>0?bt[wt-1]:"B")==="EN"&&wt+1<lt.length&&lt[wt+1]==="EN"?"EN":"N";break;case"ET":if(wt>0&&bt[wt-1]==="EN"){te="EN";break}if(it){te="N";break}for(Yt=wt+1,qt=lt.length;Yt<qt&&lt[Yt]==="ET";)Yt++;te=Yt<qt&&lt[Yt]==="EN"?"EN":"N";break;case"NSM":if(p&&!o){for(qt=lt.length,Yt=wt+1;Yt<qt&&lt[Yt]==="NSM";)Yt++;if(Yt<qt){var Jt=At[wt],me=Jt>=1425&&Jt<=2303||Jt===64286;if(Xt=lt[Yt],me&&(Xt==="R"||Xt==="AL")){te="R";break}}}te=wt<1||(Xt=lt[wt-1])==="B"?"N":bt[wt-1];break;case"B":it=!1,l=!0,te=ht;break;case"S":h=!0,te="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":it=!1;break;case"BN":te="N"}return te},Ft=function(At,lt,bt){var wt=At.split("");return bt&&yt(wt,bt,{hiLevel:ht}),wt.reverse(),lt&&lt.reverse(),wt.join("")},yt=function(At,lt,bt){var wt,Xt,Gt,Yt,qt,te=-1,Jt=At.length,me=0,rt=[],dt=ht?P:Q,Bt=[];for(it=!1,l=!1,h=!1,Xt=0;Xt<Jt;Xt++)Bt[Xt]=St(At[Xt]);for(Gt=0;Gt<Jt;Gt++){if(qt=me,rt[Gt]=Lt(At,Bt,rt,Gt),wt=240&(me=dt[qt][K[rt[Gt]]]),me&=15,lt[Gt]=Yt=dt[me][5],wt>0)if(wt===16){for(Xt=te;Xt<Gt;Xt++)lt[Xt]=1;te=-1}else te=-1;if(dt[me][6])te===-1&&(te=Gt);else if(te>-1){for(Xt=te;Xt<Gt;Xt++)lt[Xt]=Yt;te=-1}Bt[Gt]==="B"&&(lt[Gt]=0),bt.hiLevel|=Yt}h&&function(Et,Nt,Ht){for(var ie=0;ie<Ht;ie++)if(Et[ie]==="S"){Nt[ie]=ht;for(var se=ie-1;se>=0&&Et[se]==="WS";se--)Nt[se]=ht}}(Bt,lt,Jt)},Rt=function(At,lt,bt,wt,Xt){if(!(Xt.hiLevel<At)){if(At===1&&ht===1&&!l)return lt.reverse(),void(bt&&bt.reverse());for(var Gt,Yt,qt,te,Jt=lt.length,me=0;me<Jt;){if(wt[me]>=At){for(qt=me+1;qt<Jt&&wt[qt]>=At;)qt++;for(te=me,Yt=qt-1;te<Yt;te++,Yt--)Gt=lt[te],lt[te]=lt[Yt],lt[Yt]=Gt,bt&&(Gt=bt[te],bt[te]=bt[Yt],bt[Yt]=Gt);me=qt}me++}}},Wt=function(At,lt,bt){var wt=At.split(""),Xt={hiLevel:ht};return bt||(bt=[]),yt(wt,bt,Xt),function(Gt,Yt,qt){if(qt.hiLevel!==0&&I)for(var te,Jt=0;Jt<Gt.length;Jt++)Yt[Jt]===1&&(te=Y.indexOf(Gt[Jt]))>=0&&(Gt[Jt]=Y[te+1])}(wt,bt,Xt),Rt(2,wt,lt,bt,Xt),Rt(1,wt,lt,bt,Xt),wt.join("")};return this.__bidiEngine__.doBidiReorder=function(At,lt,bt){if(function(Xt,Gt){if(Gt)for(var Yt=0;Yt<Xt.length;Yt++)Gt[Yt]=Yt;o===void 0&&(o=Tt(Xt)),C===void 0&&(C=Tt(Xt))}(At,lt),p||!v||C)if(p&&v&&o^C)ht=o?1:0,At=Ft(At,lt,bt);else if(!p&&v&&C)ht=o?1:0,At=Wt(At,lt,bt),At=Ft(At,lt);else if(!p||o||v||C){if(p&&!v&&o^C)At=Ft(At,lt),o?(ht=0,At=Wt(At,lt,bt)):(ht=1,At=Wt(At,lt,bt),At=Ft(At,lt));else if(p&&o&&!v&&C)ht=1,At=Wt(At,lt,bt),At=Ft(At,lt);else if(!p&&!v&&o^C){var wt=I;o?(ht=1,At=Wt(At,lt,bt),ht=0,I=!1,At=Wt(At,lt,bt),I=wt):(ht=0,At=Wt(At,lt,bt),At=Ft(At,lt),ht=1,I=!1,At=Wt(At,lt,bt),I=wt,At=Ft(At,lt))}}else ht=0,At=Wt(At,lt,bt);else ht=o?1:0,At=Wt(At,lt,bt);return At},this.__bidiEngine__.setOptions=function(At){At&&(p=At.isInputVisual,v=At.isOutputVisual,o=At.isInputRtl,C=At.isOutputRtl,I=At.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],i=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(s){var l=s.text,h=(s.x,s.y,s.options||{}),p=(s.mutex,h.lang,[]);if(h.isInputVisual=typeof h.isInputVisual!="boolean"||h.isInputVisual,i.setOptions(h),Object.prototype.toString.call(l)==="[object Array]"){var o=0;for(p=[],o=0;o<l.length;o+=1)Object.prototype.toString.call(l[o])==="[object Array]"?p.push([i.doBidiReorder(l[o][0]),l[o][1],l[o][2]]):p.push([i.doBidiReorder(l[o])]);s.text=p}else s.text=i.doBidiReorder(l);i.setOptions({isInputVisual:!0})}])}(Tr),Tr.API.TTFFont=function(){function n(t){var i;if(this.rawData=t,i=this.contents=new Il(t),this.contents.pos=4,i.readString(4)==="ttcf")throw new Error("TTCF not supported.");i.pos=0,this.parse(),this.subset=new l3(this),this.registerTTF()}return n.open=function(t){return new n(t)},n.prototype.parse=function(){return this.directory=new W4(this.contents),this.head=new Z4(this),this.name=new r3(this),this.cmap=new Uv(this),this.toUnicode={},this.hhea=new Y4(this),this.maxp=new i3(this),this.hmtx=new n3(this),this.post=new t3(this),this.os2=new J4(this),this.loca=new A3(this),this.glyf=new s3(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var t,i,s,l,h;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var p,o,v,C;for(C=[],p=0,o=(v=this.bbox).length;p<o;p++)t=v[p],C.push(Math.round(t*this.scaleFactor));return C}).call(this),this.stemV=0,this.post.exists?(s=255&(l=this.post.italic_angle),32768&(i=l>>16)&&(i=-(1+(65535^i))),this.italicAngle=+(i+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(h=this.familyClass)===1||h===2||h===3||h===4||h===5||h===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(t){var i;return((i=this.cmap.unicode)!=null?i.codeMap[t]:void 0)||0},n.prototype.widthOfGlyph=function(t){var i;return i=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*i},n.prototype.widthOfString=function(t,i,s){var l,h,p,o;for(p=0,h=0,o=(t=""+t).length;0<=o?h<o:h>o;h=0<=o?++h:--h)l=t.charCodeAt(h),p+=this.widthOfGlyph(this.characterToGlyph(l))+s*(1e3/i)||0;return p*(i/1e3)},n.prototype.lineHeight=function(t,i){var s;return i==null&&(i=!1),s=i?this.lineGap:0,(this.ascender+s-this.decender)/1e3*t},n}();var Io,Il=function(){function n(t){this.data=t??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(t){return this.data[this.pos++]=t},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},n.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},n.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},n.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},n.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},n.prototype.readString=function(t){var i,s;for(s=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)s[i]=String.fromCharCode(this.readByte());return s.join("")},n.prototype.writeString=function(t){var i,s,l;for(l=[],i=0,s=t.length;0<=s?i<s:i>s;i=0<=s?++i:--i)l.push(this.writeByte(t.charCodeAt(i)));return l},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(t){return this.writeInt16(t)},n.prototype.readLongLong=function(){var t,i,s,l,h,p,o,v;return t=this.readByte(),i=this.readByte(),s=this.readByte(),l=this.readByte(),h=this.readByte(),p=this.readByte(),o=this.readByte(),v=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^i)+1099511627776*(255^s)+4294967296*(255^l)+16777216*(255^h)+65536*(255^p)+256*(255^o)+(255^v)+1):72057594037927940*t+281474976710656*i+1099511627776*s+4294967296*l+16777216*h+65536*p+256*o+v},n.prototype.writeLongLong=function(t){var i,s;return i=Math.floor(t/4294967296),s=4294967295&t,this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(t){return this.writeInt32(t)},n.prototype.read=function(t){var i,s;for(i=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)i.push(this.readByte());return i},n.prototype.write=function(t){var i,s,l,h;for(h=[],s=0,l=t.length;s<l;s++)i=t[s],h.push(this.writeByte(i));return h},n}(),W4=function(){var n;function t(i){var s,l,h;for(this.scalarType=i.readInt(),this.tableCount=i.readShort(),this.searchRange=i.readShort(),this.entrySelector=i.readShort(),this.rangeShift=i.readShort(),this.tables={},l=0,h=this.tableCount;0<=h?l<h:l>h;l=0<=h?++l:--l)s={tag:i.readString(4),checksum:i.readInt(),offset:i.readInt(),length:i.readInt()},this.tables[s.tag]=s}return t.prototype.encode=function(i){var s,l,h,p,o,v,C,I,U,Q,P,K,V;for(V in P=Object.keys(i).length,v=Math.log(2),U=16*Math.floor(Math.log(P)/v),p=Math.floor(U/v),I=16*P-U,(l=new Il).writeInt(this.scalarType),l.writeShort(P),l.writeShort(U),l.writeShort(p),l.writeShort(I),h=16*P,C=l.pos+h,o=null,K=[],i)for(Q=i[V],l.writeString(V),l.writeInt(n(Q)),l.writeInt(C),l.writeInt(Q.length),K=K.concat(Q),V==="head"&&(o=C),C+=Q.length;C%4;)K.push(0),C++;return l.write(K),s=2981146554-n(l.data),l.pos=o+8,l.writeUInt32(s),l.data},n=function(i){var s,l,h,p;for(i=Pv.call(i);i.length%4;)i.push(0);for(h=new Il(i),l=0,s=0,p=i.length;s<p;s=s+=4)l+=h.readUInt32();return 4294967295&l},t}(),X4={}.hasOwnProperty,aA=function(n,t){for(var i in t)X4.call(t,i)&&(n[i]=t[i]);function s(){this.constructor=n}return s.prototype=t.prototype,n.prototype=new s,n.__super__=t.prototype,n};Io=function(){function n(t){var i;this.file=t,i=this.file.directory.tables[this.tag],this.exists=!!i,i&&(this.offset=i.offset,this.length=i.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var Z4=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return aA(t,Io),t.prototype.tag="head",t.prototype.parse=function(i){return i.pos=this.offset,this.version=i.readInt(),this.revision=i.readInt(),this.checkSumAdjustment=i.readInt(),this.magicNumber=i.readInt(),this.flags=i.readShort(),this.unitsPerEm=i.readShort(),this.created=i.readLongLong(),this.modified=i.readLongLong(),this.xMin=i.readShort(),this.yMin=i.readShort(),this.xMax=i.readShort(),this.yMax=i.readShort(),this.macStyle=i.readShort(),this.lowestRecPPEM=i.readShort(),this.fontDirectionHint=i.readShort(),this.indexToLocFormat=i.readShort(),this.glyphDataFormat=i.readShort()},t.prototype.encode=function(i){var s;return(s=new Il).writeInt(this.version),s.writeInt(this.revision),s.writeInt(this.checkSumAdjustment),s.writeInt(this.magicNumber),s.writeShort(this.flags),s.writeShort(this.unitsPerEm),s.writeLongLong(this.created),s.writeLongLong(this.modified),s.writeShort(this.xMin),s.writeShort(this.yMin),s.writeShort(this.xMax),s.writeShort(this.yMax),s.writeShort(this.macStyle),s.writeShort(this.lowestRecPPEM),s.writeShort(this.fontDirectionHint),s.writeShort(i),s.writeShort(this.glyphDataFormat),s.data},t}(),Tv=function(){function n(t,i){var s,l,h,p,o,v,C,I,U,Q,P,K,V,Y,$,it,ht;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=i+t.readInt(),U=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(v=0;v<256;++v)this.codeMap[v]=t.readByte();break;case 4:for(P=t.readUInt16(),Q=P/2,t.pos+=6,h=function(){var St,Tt;for(Tt=[],v=St=0;0<=Q?St<Q:St>Q;v=0<=Q?++St:--St)Tt.push(t.readUInt16());return Tt}(),t.pos+=2,V=function(){var St,Tt;for(Tt=[],v=St=0;0<=Q?St<Q:St>Q;v=0<=Q?++St:--St)Tt.push(t.readUInt16());return Tt}(),C=function(){var St,Tt;for(Tt=[],v=St=0;0<=Q?St<Q:St>Q;v=0<=Q?++St:--St)Tt.push(t.readUInt16());return Tt}(),I=function(){var St,Tt;for(Tt=[],v=St=0;0<=Q?St<Q:St>Q;v=0<=Q?++St:--St)Tt.push(t.readUInt16());return Tt}(),l=(this.length-t.pos+this.offset)/2,o=function(){var St,Tt;for(Tt=[],v=St=0;0<=l?St<l:St>l;v=0<=l?++St:--St)Tt.push(t.readUInt16());return Tt}(),v=$=0,ht=h.length;$<ht;v=++$)for(Y=h[v],s=it=K=V[v];K<=Y?it<=Y:it>=Y;s=K<=Y?++it:--it)I[v]===0?p=s+C[v]:(p=o[I[v]/2+(s-K)-(Q-v)]||0)!==0&&(p+=C[v]),this.codeMap[s]=65535&p}t.pos=U}return n.encode=function(t,i){var s,l,h,p,o,v,C,I,U,Q,P,K,V,Y,$,it,ht,St,Tt,Lt,Ft,yt,Rt,Wt,At,lt,bt,wt,Xt,Gt,Yt,qt,te,Jt,me,rt,dt,Bt,Et,Nt,Ht,ie,se,Ce,be,Te;switch(wt=new Il,p=Object.keys(t).sort(function(Le,Qe){return Le-Qe}),i){case"macroman":for(V=0,Y=function(){var Le=[];for(K=0;K<256;++K)Le.push(0);return Le}(),it={0:0},h={},Xt=0,te=p.length;Xt<te;Xt++)it[se=t[l=p[Xt]]]==null&&(it[se]=++V),h[l]={old:t[l],new:it[t[l]]},Y[l]=it[t[l]];return wt.writeUInt16(1),wt.writeUInt16(0),wt.writeUInt32(12),wt.writeUInt16(0),wt.writeUInt16(262),wt.writeUInt16(0),wt.write(Y),{charMap:h,subtable:wt.data,maxGlyphID:V+1};case"unicode":for(lt=[],U=[],ht=0,it={},s={},$=C=null,Gt=0,Jt=p.length;Gt<Jt;Gt++)it[Tt=t[l=p[Gt]]]==null&&(it[Tt]=++ht),s[l]={old:Tt,new:it[Tt]},o=it[Tt]-l,$!=null&&o===C||($&&U.push($),lt.push(l),C=o),$=l;for($&&U.push($),U.push(65535),lt.push(65535),Wt=2*(Rt=lt.length),yt=2*Math.pow(Math.log(Rt)/Math.LN2,2),Q=Math.log(yt/2)/Math.LN2,Ft=2*Rt-yt,v=[],Lt=[],P=[],K=Yt=0,me=lt.length;Yt<me;K=++Yt){if(At=lt[K],I=U[K],At===65535){v.push(0),Lt.push(0);break}if(At-(bt=s[At].new)>=32768)for(v.push(0),Lt.push(2*(P.length+Rt-K)),l=qt=At;At<=I?qt<=I:qt>=I;l=At<=I?++qt:--qt)P.push(s[l].new);else v.push(bt-At),Lt.push(0)}for(wt.writeUInt16(3),wt.writeUInt16(1),wt.writeUInt32(12),wt.writeUInt16(4),wt.writeUInt16(16+8*Rt+2*P.length),wt.writeUInt16(0),wt.writeUInt16(Wt),wt.writeUInt16(yt),wt.writeUInt16(Q),wt.writeUInt16(Ft),Ht=0,rt=U.length;Ht<rt;Ht++)l=U[Ht],wt.writeUInt16(l);for(wt.writeUInt16(0),ie=0,dt=lt.length;ie<dt;ie++)l=lt[ie],wt.writeUInt16(l);for(Ce=0,Bt=v.length;Ce<Bt;Ce++)o=v[Ce],wt.writeUInt16(o);for(be=0,Et=Lt.length;be<Et;be++)St=Lt[be],wt.writeUInt16(St);for(Te=0,Nt=P.length;Te<Nt;Te++)V=P[Te],wt.writeUInt16(V);return{charMap:s,subtable:wt.data,maxGlyphID:ht+1}}},n}(),Uv=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return aA(t,Io),t.prototype.tag="cmap",t.prototype.parse=function(i){var s,l,h;for(i.pos=this.offset,this.version=i.readUInt16(),h=i.readUInt16(),this.tables=[],this.unicode=null,l=0;0<=h?l<h:l>h;l=0<=h?++l:--l)s=new Tv(i,this.offset),this.tables.push(s),s.isUnicode&&this.unicode==null&&(this.unicode=s);return!0},t.encode=function(i,s){var l,h;return s==null&&(s="macroman"),l=Tv.encode(i,s),(h=new Il).writeUInt16(0),h.writeUInt16(1),l.table=h.data.concat(l.subtable),l},t}(),Y4=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return aA(t,Io),t.prototype.tag="hhea",t.prototype.parse=function(i){return i.pos=this.offset,this.version=i.readInt(),this.ascender=i.readShort(),this.decender=i.readShort(),this.lineGap=i.readShort(),this.advanceWidthMax=i.readShort(),this.minLeftSideBearing=i.readShort(),this.minRightSideBearing=i.readShort(),this.xMaxExtent=i.readShort(),this.caretSlopeRise=i.readShort(),this.caretSlopeRun=i.readShort(),this.caretOffset=i.readShort(),i.pos+=8,this.metricDataFormat=i.readShort(),this.numberOfMetrics=i.readUInt16()},t}(),J4=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return aA(t,Io),t.prototype.tag="OS/2",t.prototype.parse=function(i){if(i.pos=this.offset,this.version=i.readUInt16(),this.averageCharWidth=i.readShort(),this.weightClass=i.readUInt16(),this.widthClass=i.readUInt16(),this.type=i.readShort(),this.ySubscriptXSize=i.readShort(),this.ySubscriptYSize=i.readShort(),this.ySubscriptXOffset=i.readShort(),this.ySubscriptYOffset=i.readShort(),this.ySuperscriptXSize=i.readShort(),this.ySuperscriptYSize=i.readShort(),this.ySuperscriptXOffset=i.readShort(),this.ySuperscriptYOffset=i.readShort(),this.yStrikeoutSize=i.readShort(),this.yStrikeoutPosition=i.readShort(),this.familyClass=i.readShort(),this.panose=function(){var s,l;for(l=[],s=0;s<10;++s)l.push(i.readByte());return l}(),this.charRange=function(){var s,l;for(l=[],s=0;s<4;++s)l.push(i.readInt());return l}(),this.vendorID=i.readString(4),this.selection=i.readShort(),this.firstCharIndex=i.readShort(),this.lastCharIndex=i.readShort(),this.version>0&&(this.ascent=i.readShort(),this.descent=i.readShort(),this.lineGap=i.readShort(),this.winAscent=i.readShort(),this.winDescent=i.readShort(),this.codePageRange=function(){var s,l;for(l=[],s=0;s<2;s=++s)l.push(i.readInt());return l}(),this.version>1))return this.xHeight=i.readShort(),this.capHeight=i.readShort(),this.defaultChar=i.readShort(),this.breakChar=i.readShort(),this.maxContext=i.readShort()},t}(),t3=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return aA(t,Io),t.prototype.tag="post",t.prototype.parse=function(i){var s,l,h;switch(i.pos=this.offset,this.format=i.readInt(),this.italicAngle=i.readInt(),this.underlinePosition=i.readShort(),this.underlineThickness=i.readShort(),this.isFixedPitch=i.readInt(),this.minMemType42=i.readInt(),this.maxMemType42=i.readInt(),this.minMemType1=i.readInt(),this.maxMemType1=i.readInt(),this.format){case 65536:break;case 131072:var p;for(l=i.readUInt16(),this.glyphNameIndex=[],p=0;0<=l?p<l:p>l;p=0<=l?++p:--p)this.glyphNameIndex.push(i.readUInt16());for(this.names=[],h=[];i.pos<this.offset+this.length;)s=i.readByte(),h.push(this.names.push(i.readString(s)));return h;case 151552:return l=i.readUInt16(),this.offsets=i.read(l);case 196608:break;case 262144:return this.map=(function(){var o,v,C;for(C=[],p=o=0,v=this.file.maxp.numGlyphs;0<=v?o<v:o>v;p=0<=v?++o:--o)C.push(i.readUInt32());return C}).call(this)}},t}(),e3=function(n,t){this.raw=n,this.length=n.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},r3=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return aA(t,Io),t.prototype.tag="name",t.prototype.parse=function(i){var s,l,h,p,o,v,C,I,U,Q,P;for(i.pos=this.offset,i.readShort(),s=i.readShort(),v=i.readShort(),l=[],p=0;0<=s?p<s:p>s;p=0<=s?++p:--p)l.push({platformID:i.readShort(),encodingID:i.readShort(),languageID:i.readShort(),nameID:i.readShort(),length:i.readShort(),offset:this.offset+v+i.readShort()});for(C={},p=U=0,Q=l.length;U<Q;p=++U)h=l[p],i.pos=h.offset,I=i.readString(h.length),o=new e3(I,h),C[P=h.nameID]==null&&(C[P]=[]),C[h.nameID].push(o);this.strings=C,this.copyright=C[0],this.fontFamily=C[1],this.fontSubfamily=C[2],this.uniqueSubfamily=C[3],this.fontName=C[4],this.version=C[5];try{this.postscriptName=C[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=C[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=C[7],this.manufacturer=C[8],this.designer=C[9],this.description=C[10],this.vendorUrl=C[11],this.designerUrl=C[12],this.license=C[13],this.licenseUrl=C[14],this.preferredFamily=C[15],this.preferredSubfamily=C[17],this.compatibleFull=C[18],this.sampleText=C[19]},t}(),i3=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return aA(t,Io),t.prototype.tag="maxp",t.prototype.parse=function(i){return i.pos=this.offset,this.version=i.readInt(),this.numGlyphs=i.readUInt16(),this.maxPoints=i.readUInt16(),this.maxContours=i.readUInt16(),this.maxCompositePoints=i.readUInt16(),this.maxComponentContours=i.readUInt16(),this.maxZones=i.readUInt16(),this.maxTwilightPoints=i.readUInt16(),this.maxStorage=i.readUInt16(),this.maxFunctionDefs=i.readUInt16(),this.maxInstructionDefs=i.readUInt16(),this.maxStackElements=i.readUInt16(),this.maxSizeOfInstructions=i.readUInt16(),this.maxComponentElements=i.readUInt16(),this.maxComponentDepth=i.readUInt16()},t}(),n3=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return aA(t,Io),t.prototype.tag="hmtx",t.prototype.parse=function(i){var s,l,h,p,o,v,C;for(i.pos=this.offset,this.metrics=[],s=0,v=this.file.hhea.numberOfMetrics;0<=v?s<v:s>v;s=0<=v?++s:--s)this.metrics.push({advance:i.readUInt16(),lsb:i.readInt16()});for(h=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var I,U;for(U=[],s=I=0;0<=h?I<h:I>h;s=0<=h?++I:--I)U.push(i.readInt16());return U}(),this.widths=(function(){var I,U,Q,P;for(P=[],I=0,U=(Q=this.metrics).length;I<U;I++)p=Q[I],P.push(p.advance);return P}).call(this),l=this.widths[this.widths.length-1],C=[],s=o=0;0<=h?o<h:o>h;s=0<=h?++o:--o)C.push(this.widths.push(l));return C},t.prototype.forGlyph=function(i){return i in this.metrics?this.metrics[i]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[i-this.metrics.length]}},t}(),Pv=[].slice,s3=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return aA(t,Io),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(i){var s,l,h,p,o,v,C,I,U,Q;return i in this.cache?this.cache[i]:(p=this.file.loca,s=this.file.contents,l=p.indexOf(i),(h=p.lengthOf(i))===0?this.cache[i]=null:(s.pos=this.offset+l,o=(v=new Il(s.read(h))).readShort(),I=v.readShort(),Q=v.readShort(),C=v.readShort(),U=v.readShort(),this.cache[i]=o===-1?new o3(v,I,Q,C,U):new a3(v,o,I,Q,C,U),this.cache[i]))},t.prototype.encode=function(i,s,l){var h,p,o,v,C;for(o=[],p=[],v=0,C=s.length;v<C;v++)h=i[s[v]],p.push(o.length),h&&(o=o.concat(h.encode(l)));return p.push(o.length),{table:o,offsets:p}},t}(),a3=function(){function n(t,i,s,l,h,p){this.raw=t,this.numberOfContours=i,this.xMin=s,this.yMin=l,this.xMax=h,this.yMax=p,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),o3=function(){function n(t,i,s,l,h){var p,o;for(this.raw=t,this.xMin=i,this.yMin=s,this.xMax=l,this.yMax=h,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],p=this.raw;o=p.readShort(),this.glyphOffsets.push(p.pos),this.glyphIDs.push(p.readUInt16()),32&o;)p.pos+=1&o?4:2,128&o?p.pos+=8:64&o?p.pos+=4:8&o&&(p.pos+=2)}return n.prototype.encode=function(){var t,i,s;for(i=new Il(Pv.call(this.raw.data)),t=0,s=this.glyphIDs.length;t<s;++t)i.pos=this.glyphOffsets[t];return i.data},n}(),A3=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return aA(t,Io),t.prototype.tag="loca",t.prototype.parse=function(i){var s,l;return i.pos=this.offset,s=this.file.head.indexToLocFormat,this.offsets=s===0?(function(){var h,p;for(p=[],l=0,h=this.length;l<h;l+=2)p.push(2*i.readUInt16());return p}).call(this):(function(){var h,p;for(p=[],l=0,h=this.length;l<h;l+=4)p.push(i.readUInt32());return p}).call(this)},t.prototype.indexOf=function(i){return this.offsets[i]},t.prototype.lengthOf=function(i){return this.offsets[i+1]-this.offsets[i]},t.prototype.encode=function(i,s){for(var l=new Uint32Array(this.offsets.length),h=0,p=0,o=0;o<l.length;++o)if(l[o]=h,p<s.length&&s[p]==o){++p,l[o]=h;var v=this.offsets[o],C=this.offsets[o+1]-v;C>0&&(h+=C)}for(var I=new Array(4*l.length),U=0;U<l.length;++U)I[4*U+3]=255&l[U],I[4*U+2]=(65280&l[U])>>8,I[4*U+1]=(16711680&l[U])>>16,I[4*U]=(4278190080&l[U])>>24;return I},t}(),l3=function(){function n(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var t,i,s,l,h;for(i in l=this.font.cmap.tables[0].codeMap,t={},h=this.subset)s=h[i],t[i]=l[s];return t},n.prototype.glyphsFor=function(t){var i,s,l,h,p,o,v;for(l={},p=0,o=t.length;p<o;p++)l[h=t[p]]=this.font.glyf.glyphFor(h);for(h in i=[],l)(s=l[h])!=null&&s.compound&&i.push.apply(i,s.glyphIDs);if(i.length>0)for(h in v=this.glyphsFor(i))s=v[h],l[h]=s;return l},n.prototype.encode=function(t,i){var s,l,h,p,o,v,C,I,U,Q,P,K,V,Y,$;for(l in s=Uv.encode(this.generateCmap(),"unicode"),p=this.glyphsFor(t),P={0:0},$=s.charMap)P[(v=$[l]).old]=v.new;for(K in Q=s.maxGlyphID,p)K in P||(P[K]=Q++);return I=function(it){var ht,St;for(ht in St={},it)St[it[ht]]=ht;return St}(P),U=Object.keys(I).sort(function(it,ht){return it-ht}),V=function(){var it,ht,St;for(St=[],it=0,ht=U.length;it<ht;it++)o=U[it],St.push(I[o]);return St}(),h=this.font.glyf.encode(p,V,P),C=this.font.loca.encode(h.offsets,V),Y={cmap:this.font.cmap.raw(),glyf:h.table,loca:C,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(i)},this.font.os2.exists&&(Y["OS/2"]=this.font.os2.raw()),this.font.directory.encode(Y)},n}();Tr.API.PDFObject=function(){var n;function t(){}return n=function(i,s){return(Array(s+1).join("0")+i).slice(-s)},t.convert=function(i){var s,l,h,p;if(Array.isArray(i))return"["+function(){var o,v,C;for(C=[],o=0,v=i.length;o<v;o++)s=i[o],C.push(t.convert(s));return C}().join(" ")+"]";if(typeof i=="string")return"/"+i;if(i!=null&&i.isString)return"("+i+")";if(i instanceof Date)return"(D:"+n(i.getUTCFullYear(),4)+n(i.getUTCMonth(),2)+n(i.getUTCDate(),2)+n(i.getUTCHours(),2)+n(i.getUTCMinutes(),2)+n(i.getUTCSeconds(),2)+"Z)";if({}.toString.call(i)==="[object Object]"){for(l in h=["<<"],i)p=i[l],h.push("/"+l+" "+t.convert(p));return h.push(">>"),h.join(`
`)}return""+i},t}();const jd={"circle-radius":8,"circle-color":"red","circle-stroke-width":1,"circle-stroke-color":"black"},gh={style:{textSize:16,textHaloColor:"#FFFFFF",textHaloWidth:.8,textColor:"#000000",fallbackTextFont:["Open Sans Regular"]},visibility:"visible",position:"bottom-right"},mh={image:'<svg width="800px" height="800px" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--gis" preserveAspectRatio="xMidYMid meet"><path d="M47.655 1.634l-35 95c-.828 2.24 1.659 4.255 3.68 2.98l33.667-21.228l33.666 21.228c2.02 1.271 4.503-.74 3.678-2.98l-35-95C51.907.514 51.163.006 50 .008c-1.163.001-1.99.65-2.345 1.626zm-.155 14.88v57.54L19.89 91.461z" fill="none" stroke="white" stroke-width="1.5"/><path d="M47.655 1.634l-35 95c-.828 2.24 1.659 4.255 3.68 2.98l33.667-21.228l33.666 21.228c2.02 1.271 4.503-.74 3.678-2.98l-35-95C51.907.514 51.163.006 50 .008c-1.163.001-1.99.65-2.345 1.626zm-.155 14.88v57.54L19.89 91.461z" fill="#000000" fill-rule="evenodd"></path></svg>',imageName:"gl-export-north-icon",imageSizeFraction:.05,visibility:"visible",position:"top-right"};let Lv=class{constructor(t,i=xl.A4,s=300,l=rA.PNG,h=hc.mm,p="map",o="maplibregl-marker",v=jd,C="maplibregl-ctrl-attrib-inner",I=gh,U=mh){ri(this,"map"),ri(this,"width"),ri(this,"height"),ri(this,"dpi"),ri(this,"format"),ri(this,"unit"),ri(this,"fileName"),ri(this,"markerClassName"),ri(this,"markerCirclePaint"),ri(this,"attributionClassName"),ri(this,"attributionOptions"),ri(this,"northIconOptions"),this.map=t,this.width=i[0],this.height=i[1],this.dpi=s,this.format=l,this.unit=h,this.fileName=p,this.markerClassName=o,this.markerCirclePaint=v,this.attributionClassName=C,this.attributionOptions=I,this.northIconOptions=U}renderMapPost(t){return t}getMarkers(){return this.map.getCanvasContainer().getElementsByClassName(this.markerClassName)}renderMarkers(t){const i=this.getMarkers();for(let s=0;s<i.length;s++){const l=i.item(s);if(!l)continue;const h=l.getAttribute("style");if(!h)continue;const p=/translate\(([^,]+)px,\s*([^,]+)px\)/,o=h.match(p);if(!o)continue;const v=parseInt(o[1]),C=parseInt(o[2]),I=this.map.unproject([v,C]),U=`point${s}`;t.addSource(U,{type:"geojson",data:{type:"Point",coordinates:[I.lng,I.lat]}}),t.addLayer({id:U,source:U,type:"circle",paint:this.markerCirclePaint})}return t}generate(){const t=this;JsLoadingOverlay.show({overlayBackgroundColor:"#5D5959",overlayOpacity:"0.6",spinnerIcon:"ball-spin",spinnerColor:"#2400FD",spinnerSize:"2x",overlayIDName:"overlay",spinnerIDName:"spinner",offsetX:0,offsetY:0,containerID:null,lockScroll:!1,overlayZIndex:9998,spinnerZIndex:9999});const i=window.devicePixelRatio;Object.defineProperty(window,"devicePixelRatio",{get(){return t.dpi/96}});const s=document.createElement("div");s.className="hidden-map",document.body.appendChild(s);const l=document.createElement("div");l.style.width=this.toPixels(this.width),l.style.height=this.toPixels(this.height),s.appendChild(l);const h=this.map.getStyle();if(h&&h.sources){const o=h.sources;Object.keys(o).forEach(v=>{const C=o[v];Object.keys(C).forEach(I=>{C[I]||delete C[I]})})}let p=this.getRenderedMap(l,h);this.addNorthIconToMap(p).then(()=>{p.once("idle",()=>{this.addAttributions(p)?p.once("idle",()=>{p=this.renderMapPost(p),this.getMarkers().length===0?this.exportImage(p,s,i):(p=this.renderMarkers(p),p.once("idle",()=>{this.exportImage(p,s,i)}))}):(p=this.renderMapPost(p),this.getMarkers().length===0?this.exportImage(p,s,i):(p=this.renderMarkers(p),p.once("idle",()=>{this.exportImage(p,s,i)})))})})}stripHtml(t){const i=document.createElement("div");return i.innerHTML=t,i.textContent||i.innerText||""}getIconWidth(t,i){const s=t.getContainer(),l=parseInt(s.style.width.replace("px",""));return parseInt(`${l*i}`)}getElementPosition(t,i,s=0){const l=t.getContainer();let h=0,p=0;switch(i){case"top-left":h=0+s,p=0+s;break;case"top-right":h=parseInt(l.style.width.replace("px",""))-s,p=0+s;break;case"bottom-left":h=0+s,p=parseInt(l.style.height.replace("px",""))-s;break;case"bottom-right":h=parseInt(l.style.width.replace("px",""))-s,p=parseInt(l.style.height.replace("px",""))-s;break}return[h,p]}addNorthIconImage(t){const i=this.getIconWidth(t,this.northIconOptions.imageSizeFraction??.08);return new Promise(s=>{const l=new Image(i,i);l.onload=()=>{this.northIconOptions.imageName&&t.addImage(this.northIconOptions.imageName,l),s()};function h(p){return"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(p)}this.northIconOptions.image&&(l.src=h(this.northIconOptions.image))})}addNorthIconToMap(t){let i=this.northIconOptions.visibility??"visible";return t.getZoom()<2&&this.width>this.height&&(i="none"),new Promise(s=>{this.addNorthIconImage(t).then(()=>{const l=this.getIconWidth(t,this.northIconOptions.imageSizeFraction??.08)*.8,h=this.getElementPosition(t,this.northIconOptions.position??"top-right",l),p=t.unproject(h),o=this.northIconOptions.imageName??"gl-export-north-icon";t.addSource(o,{type:"geojson",data:{type:"Feature",geometry:{type:"Point",coordinates:[p.lng,p.lat]},properties:{}}}),t.addLayer({id:o,source:o,type:"symbol",layout:{"icon-image":o,"icon-size":1,"icon-rotate":t.getBearing()*-1,"icon-allow-overlap":!0,"icon-ignore-placement":!0,visibility:i},paint:{}}),s()})})}addAttributions(t){var i;if(!this.map.getStyle().glyphs)return!1;const s=t.getContainer(),l=this.attributionOptions.position??"bottom-right",h=this.getElementPosition(t,l,5),p=h[0],o=t.unproject(h),v=s.getElementsByClassName(this.attributionClassName),C=[];if((v==null?void 0:v.length)>0){const Y=v.item(0);if(Y)for(let $=0;$<Y.children.length;$++){const it=Y.children.item($);it&&C.push(this.stripHtml(it.outerHTML))}}else{const Y=this.map.getStyle().sources;Object.keys(Y).forEach($=>{const it=Y[$];if("attribution"in it){const ht=it.attribution;C.push(this.stripHtml(ht))}})}if(C.length===0)return!1;const I=C.join(" | "),U="attribution";t.addSource(U,{type:"geojson",data:{type:"Feature",geometry:{type:"Point",coordinates:[o.lng,o.lat]},properties:{attribution:I}}});const Q=this.map.getStyle().layers.filter(Y=>Y.type==="symbol"&&Y.layout&&"text-font"in Y.layout),P=Q.length>0&&Q[0].layout?Q[0].layout["text-font"]:(i=this.attributionOptions.style)==null?void 0:i.fallbackTextFont;let K=this.attributionOptions.visibility??"visible";t.getZoom()<2&&this.width>this.height&&(K="none");const V=this.attributionOptions.style;return t.addLayer({id:U,source:U,type:"symbol",layout:{"text-field":["get","attribution"],"text-font":P,"text-max-width":parseInt(`${p/V.textSize}`),"text-anchor":l,"text-justify":["top-right","bottom-right"].includes(l)?"right":"left","text-size":V.textSize,"text-allow-overlap":!0,visibility:K},paint:{"text-halo-color":V.textHaloColor,"text-halo-width":V.textHaloWidth,"text-color":V.textColor}}),!0}exportImage(t,i,s){var l;const h=t.getCanvas(),p=`${this.fileName}.${this.format}`;switch(this.format){case rA.PNG:this.toPNG(h,p);break;case rA.JPEG:this.toJPEG(h,p);break;case rA.PDF:this.toPDF(t,p);break;case rA.SVG:this.toSVG(h,p);break;default:console.error(`Invalid file format: ${this.format}`);break}t.remove(),(l=i.parentNode)==null||l.removeChild(i),Object.defineProperty(window,"devicePixelRatio",{get(){return s}}),i.remove(),JsLoadingOverlay.hide()}toPNG(t,i){const s=document.createElement("a");s.href=t.toDataURL(),s.download=i,s.click(),s.remove()}toJPEG(t,i){const s=t.toDataURL("image/jpeg",.85),l=document.createElement("a");l.href=s,l.download=i,l.click(),l.remove()}toPDF(t,i){const s=t.getCanvas(),l=new Tr({orientation:this.width>this.height?"l":"p",unit:this.unit,compress:!0,format:[this.width,this.height]});l.addImage(s.toDataURL("image/png"),"png",0,0,this.width,this.height,void 0,"FAST");const{lng:h,lat:p}=t.getCenter();l.setProperties({title:t.getStyle().name,subject:`center: [${h}, ${p}], zoom: ${t.getZoom()}`,creator:"Mapbox GL Export Plugin",author:"(c)Mapbox, (c)OpenStreetMap"}),l.save(i)}toSVG(t,i){const s=t.toDataURL("image/png"),l=Number(this.toPixels(this.width,this.dpi).replace("px","")),h=Number(this.toPixels(this.height,this.dpi).replace("px","")),p=`
    <svg xmlns="http://www.w3.org/2000/svg" 
      xmlns:xlink="http://www.w3.org/1999/xlink" 
      version="1.1" 
      width="${l}" 
      height="${h}" 
      viewBox="0 0 ${l} ${h}" 
      xml:space="preserve">
        <image style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;"  
      xlink:href="${s}" width="${l}" height="${h}"></image>
    </svg>`,o=document.createElement("a");o.href=`data:application/xml,${encodeURIComponent(p)}`,o.download=i,o.click(),o.remove()}toPixels(t,i=96){return this.unit===hc.mm&&(i/=25.4),`${i*t}px`}},c3=class extends Lv{constructor(t,i=xl.A4,s=300,l=rA.PNG,h=hc.mm,p="map",o=jd,v=gh,C=mh){super(t,i,s,l,h,p,"maplibregl-marker",o,"maplibregl-ctrl-attrib-inner",v,C)}getRenderedMap(t,i){const s=new WC.Map({container:t,style:i,center:this.map.getCenter(),zoom:this.map.getZoom(),bearing:this.map.getBearing(),pitch:this.map.getPitch(),interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,transformRequest:this.map._requestManager._transformRequestFn});this.map.getTerrain()&&(s.setMaxPitch(85),s.setPitch(this.map.getPitch()));const l=(this.map.style.imageManager||{}).images||[];return Object.keys(l).forEach(h=>{l[h].data&&s.addImage(h,l[h].data)}),s}renderMapPost(t){const i=this.map.getTerrain();return i&&t.setTerrain({source:i.source,exaggeration:i.exaggeration}),t}},u3=class{constructor(t){ri(this,"controlContainer"),ri(this,"exportContainer"),ri(this,"crosshair"),ri(this,"printableArea"),ri(this,"map"),ri(this,"exportButton"),ri(this,"options",{PageSize:xl.A4,PageOrientation:ch.Landscape,Format:rA.PDF,DPI:hg[300],Crosshair:!1,PrintableArea:!1,Local:"en",AllowedSizes:Object.keys(xl),Filename:"map",markerCirclePaint:jd,attributionOptions:gh,northIconOptions:mh}),ri(this,"MAPLIB_CSS_PREFIX","maplibregl"),t&&(t.attributionOptions=Object.assign(gh,t.attributionOptions),t.northIconOptions=Object.assign(mh,t.northIconOptions),this.options=Object.assign(this.options,t)),this.onDocumentClick=this.onDocumentClick.bind(this)}getDefaultPosition(){return"top-right"}getTranslation(){const t=this.options.Local??"en";return d4(t)}onAdd(t){var i;this.map=t,this.controlContainer=document.createElement("div"),this.controlContainer.classList.add(`${this.MAPLIB_CSS_PREFIX}-ctrl`),this.controlContainer.classList.add(`${this.MAPLIB_CSS_PREFIX}-ctrl-group`),this.exportContainer=document.createElement("div"),this.exportContainer.classList.add(`${this.MAPLIB_CSS_PREFIX}-export-list`),this.exportButton=document.createElement("button"),this.exportButton.classList.add(`${this.MAPLIB_CSS_PREFIX}-ctrl-icon`),this.exportButton.classList.add(`${this.MAPLIB_CSS_PREFIX}-export-control`),this.exportButton.type="button",this.exportButton.addEventListener("click",()=>{this.exportButton.style.display="none",this.exportContainer.style.display="block",this.toggleCrosshair(!0),this.togglePrintableArea(!0)}),document.addEventListener("click",this.onDocumentClick),this.controlContainer.appendChild(this.exportButton),this.controlContainer.appendChild(this.exportContainer);const s=document.createElement("TABLE");s.className="print-table";const l={};(i=this.options.AllowedSizes)==null||i.forEach(I=>{xl[I]&&(l[I]=xl[I])});const h=this.createSelection(l,this.getTranslation().PageSize,"page-size",this.options.PageSize,(I,U)=>JSON.stringify(I[U]));s.appendChild(h);const p=this.createSelection(ch,this.getTranslation().PageOrientation,"page-orientation",this.options.PageOrientation,(I,U)=>I[U]);s.appendChild(p);const o=this.createSelection(rA,this.getTranslation().Format,"format-type",this.options.Format,(I,U)=>I[U]);s.appendChild(o);const v=this.createSelection(hg,this.getTranslation().DPI,"dpi-type",this.options.DPI,(I,U)=>I[U]);s.appendChild(v),this.exportContainer.appendChild(s);const C=document.createElement("button");return C.type="button",C.textContent=this.getTranslation().Generate,C.classList.add("generate-button"),C.addEventListener("click",()=>{const I=document.getElementById("mapbox-gl-export-page-size"),U=document.getElementById("mapbox-gl-export-page-orientation"),Q=document.getElementById("mapbox-gl-export-format-type"),P=document.getElementById("mapbox-gl-export-dpi-type"),K=U.value;let V=JSON.parse(I.value);K===ch.Portrait&&(V=V.reverse()),this.generateMap(t,V,Number(P.value),Q.value,hc.mm,this.options.Filename)}),this.exportContainer.appendChild(C),this.controlContainer}generateMap(t,i,s,l,h,p){new c3(t,i,s,l,h,p,this.options.markerCirclePaint,this.options.attributionOptions,this.options.northIconOptions).generate()}createSelection(t,i,s,l,h){const p=document.createElement("label");p.textContent=i;const o=document.createElement("select");o.setAttribute("id",`mapbox-gl-export-${s}`),o.style.width="100%",Object.keys(t).forEach(U=>{const Q=document.createElement("option");Q.setAttribute("value",h(t,U)),Q.appendChild(document.createTextNode(U)),Q.setAttribute("name",s),l===t[U]&&(Q.selected=!0),o.appendChild(Q)}),o.addEventListener("change",()=>{this.updatePrintableArea()});const v=document.createElement("TR"),C=document.createElement("TD"),I=document.createElement("TD");return C.appendChild(p),I.appendChild(o),v.appendChild(C),v.appendChild(I),v}onRemove(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.exportButton||(this.exportButton.removeEventListener("click",this.onDocumentClick),this.controlContainer.parentNode.removeChild(this.controlContainer),document.removeEventListener("click",this.onDocumentClick),this.crosshair!==void 0&&(this.crosshair.destroy(),this.crosshair=void 0),this.printableArea!==void 0&&(this.printableArea.destroy(),this.printableArea=void 0),this.map=void 0)}onDocumentClick(t){this.controlContainer&&!this.controlContainer.contains(t.target)&&this.exportContainer&&this.exportButton&&(this.exportContainer.style.display="none",this.exportButton.style.display="block",this.toggleCrosshair(!1),this.togglePrintableArea(!1))}toggleCrosshair(t){this.options.Crosshair===!0&&(t===!1?this.crosshair!==void 0&&(this.crosshair.destroy(),this.crosshair=void 0):(this.crosshair=new YC(this.map),this.crosshair.create()))}togglePrintableArea(t){this.options.PrintableArea===!0&&(t===!1?this.printableArea!==void 0&&(this.printableArea.destroy(),this.printableArea=void 0):(this.printableArea=new JC(this.map),this.updatePrintableArea()))}updatePrintableArea(){if(this.printableArea===void 0)return;const t=document.getElementById("mapbox-gl-export-page-size"),i=document.getElementById("mapbox-gl-export-page-orientation").value;let s=JSON.parse(t.value);i===ch.Portrait&&(s=s.reverse()),this.printableArea.updateArea(s[0],s[1])}};(function(n){var t={};function i(s){if(t[s])return t[s].exports;var l=t[s]={i:s,l:!1,exports:{}};return n[s].call(l.exports,l,l.exports,i),l.l=!0,l.exports}i.m=n,i.c=t,i.d=function(s,l,h){i.o(s,l)||Object.defineProperty(s,l,{enumerable:!0,get:h})},i.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,l){if(1&l&&(s=i(s)),8&l||4&l&&typeof s=="object"&&s&&s.__esModule)return s;var h=Object.create(null);if(i.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:s}),2&l&&typeof s!="string")for(var p in s)i.d(h,p,(function(o){return s[o]}).bind(null,p));return h},i.n=function(s){var l=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(l,"a",l),l},i.o=function(s,l){return Object.prototype.hasOwnProperty.call(s,l)},i.p="",i(i.s=0)})([function(n,t,i){n.exports=i(1)},function(n,t){function i(l,h){for(var p=0;p<h.length;p++){var o=h[p];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(l,o.key,o)}}var s=function(){function l(){(function(o,v){if(!(o instanceof v))throw new TypeError("Cannot call a class as a function")})(this,l),this.options={overlayBackgroundColor:"#666666",overlayOpacity:.6,spinnerIcon:"ball-circus",spinnerColor:"#000",spinnerSize:"3x",overlayIDName:"overlay",spinnerIDName:"spinner",offsetY:0,offsetX:0,lockScroll:!1,containerID:null,spinnerZIndex:99999,overlayZIndex:99998},this.stylesheetBaseURL="https://cdn.jsdelivr.net/npm/load-awesome@1.1.0/css/",this.spinner=null,this.spinnerStylesheetURL=null,this.numberOfEmptyDivForSpinner={"ball-8bits":16,"ball-atom":4,"ball-beat":3,"ball-circus":5,"ball-climbing-dot":1,"ball-clip-rotate":1,"ball-clip-rotate-multiple":2,"ball-clip-rotate-pulse":2,"ball-elastic-dots":5,"ball-fall":3,"ball-fussion":4,"ball-grid-beat":9,"ball-grid-pulse":9,"ball-newton-cradle":4,"ball-pulse":3,"ball-pulse-rise":5,"ball-pulse-sync":3,"ball-rotate":1,"ball-running-dots":5,"ball-scale":1,"ball-scale-multiple":3,"ball-scale-pulse":2,"ball-scale-ripple":1,"ball-scale-ripple-multiple":3,"ball-spin":8,"ball-spin-clockwise":8,"ball-spin-clockwise-fade":8,"ball-spin-clockwise-fade-rotating":8,"ball-spin-fade":8,"ball-spin-fade-rotating":8,"ball-spin-rotate":2,"ball-square-clockwise-spin":8,"ball-square-spin":8,"ball-triangle-path":3,"ball-zig-zag":2,"ball-zig-zag-deflect":2,cog:1,"cube-transition":2,fire:3,"line-scale":5,"line-scale-party":5,"line-scale-pulse-out":5,"line-scale-pulse-out-rapid":5,"line-spin-clockwise-fade":8,"line-spin-clockwise-fade-rotating":8,"line-spin-fade":8,"line-spin-fade-rotating":8,pacman:6,"square-jelly-box":2,"square-loader":1,"square-spin":1,timer:1,"triangle-skew-spin":1}}var h,p;return h=l,(p=[{key:"show",value:function(o){this.setOptions(o),this.addSpinnerStylesheet(),this.generateSpinnerElement(),this.options.lockScroll&&(document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden"),this.generateAndAddOverlayElement()}},{key:"hide",value:function(){this.options.lockScroll&&(document.body.style.overflow="",document.documentElement.style.overflow="");var o=document.getElementById("loading-overlay-stylesheet");o&&(o.disabled=!0,o.parentNode.removeChild(o),document.getElementById(this.options.overlayIDName).remove(),document.getElementById(this.options.spinnerIDName).remove())}},{key:"setOptions",value:function(o){if(o!==void 0)for(var v in o)this.options[v]=o[v]}},{key:"generateAndAddOverlayElement",value:function(){var o="50%";this.options.offsetX!==0&&(o="calc(50% + "+this.options.offsetX+")");var v="50%";if(this.options.offsetY!==0&&(v="calc(50% + "+this.options.offsetY+")"),this.options.containerID&&document.body.contains(document.getElementById(this.options.containerID))){var C='<div id="'.concat(this.options.overlayIDName,'" style="display: block !important; position: absolute; top: 0; left: 0; overflow: auto; opacity: ').concat(this.options.overlayOpacity,"; background: ").concat(this.options.overlayBackgroundColor,'; z-index: 50; width: 100%; height: 100%;"></div><div id="').concat(this.options.spinnerIDName,'" style="display: block !important; position: absolute; top: ').concat(v,"; left: ").concat(o,'; -webkit-transform: translate(-50%); -ms-transform: translate(-50%); transform: translate(-50%); z-index: 9999;">').concat(this.spinner,"</div>"),I=document.getElementById(this.options.containerID);return I.style.position="relative",void I.insertAdjacentHTML("beforeend",C)}var U='<div id="'.concat(this.options.overlayIDName,'" style="display: block !important; position: fixed; top: 0; left: 0; overflow: auto; opacity: ').concat(this.options.overlayOpacity,"; background: ").concat(this.options.overlayBackgroundColor,"; z-index: ").concat(this.options.overlayZIndex,'; width: 100%; height: 100%;"></div><div id="').concat(this.options.spinnerIDName,'" style="display: block !important; position: fixed; top: ').concat(v,"; left: ").concat(o,"; -webkit-transform: translate(-50%); -ms-transform: translate(-50%); transform: translate(-50%); z-index: ").concat(this.options.spinnerZIndex,';">').concat(this.spinner,"</div>");document.body.insertAdjacentHTML("beforeend",U)}},{key:"generateSpinnerElement",value:function(){var o=this,v=Object.keys(this.numberOfEmptyDivForSpinner).find(function(I){return I===o.options.spinnerIcon}),C=this.generateEmptyDivElement(this.numberOfEmptyDivForSpinner[v]);this.spinner='<div style="color: '.concat(this.options.spinnerColor,'" class="la-').concat(this.options.spinnerIcon," la-").concat(this.options.spinnerSize,'">').concat(C,"</div>")}},{key:"addSpinnerStylesheet",value:function(){this.setSpinnerStylesheetURL();var o=document.createElement("link");o.setAttribute("id","loading-overlay-stylesheet"),o.setAttribute("rel","stylesheet"),o.setAttribute("type","text/css"),o.setAttribute("href",this.spinnerStylesheetURL),document.getElementsByTagName("head")[0].appendChild(o)}},{key:"setSpinnerStylesheetURL",value:function(){this.spinnerStylesheetURL=this.stylesheetBaseURL+this.options.spinnerIcon+".min.css"}},{key:"generateEmptyDivElement",value:function(o){for(var v="",C=1;C<=o;C++)v+="<div></div>";return v}}])&&i(h.prototype,p),l}();window.JsLoadingOverlay=new s,n.exports=JsLoadingOverlay}]);class h3 extends Lv{constructor(i,s=xl.A4,l=300,h=rA.PNG,p=hc.mm,o="map",v=jd,C=gh,I=mh,U){super(i,s,l,h,p,o,"mapboxgl-marker",v,"mapboxgl-ctrl-attrib-inner",C,I);$y(this,"accesstoken");this.accesstoken=U}getRenderedMap(i,s){var p;const l=new Js.Map({accessToken:this.accesstoken||Js.accessToken,container:i,style:s,center:this.map.getCenter(),zoom:this.map.getZoom(),bearing:this.map.getBearing(),pitch:this.map.getPitch(),interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,transformRequest:this.map._requestManager._transformRequestFn}),h=(this.map.style.imageManager||{}).images||[];return h&&((p=Object.keys(h))==null?void 0:p.length)>0&&Object.keys(h).forEach(o=>{o&&h[o].data&&l.addImage(o,h[o].data)}),l}}class d3 extends u3{constructor(i){super(i);$y(this,"accessToken");this.MAPLIB_CSS_PREFIX="mapboxgl",this.accessToken=i.accessToken}generateMap(i,s,l,h,p,o){new h3(i,s,l,h,p,o,this.options.markerCirclePaint,this.options.attributionOptions,this.options.northIconOptions,this.accessToken).generate()}}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var Mg=function(n,t){return Mg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(i[l]=s[l])},Mg(n,t)};function Eo(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Mg(n,t);function i(){this.constructor=n}n.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}var kg=function(){return kg=Object.assign||function(n){for(var t,i=1,s=arguments.length;i<s;i++){t=arguments[i];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(n[l]=t[l])}return n},kg.apply(this,arguments)};function Ms(n,t,i,s){function l(h){return h instanceof i?h:new i(function(p){p(h)})}return new(i||(i=Promise))(function(h,p){function o(I){try{C(s.next(I))}catch(U){p(U)}}function v(I){try{C(s.throw(I))}catch(U){p(U)}}function C(I){I.done?h(I.value):l(I.value).then(o,v)}C((s=s.apply(n,[])).next())})}function gs(n,t){var i={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,l,h,p;return p={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function o(C){return function(I){return v([C,I])}}function v(C){if(s)throw new TypeError("Generator is already executing.");for(;i;)try{if(s=1,l&&(h=C[0]&2?l.return:C[0]?l.throw||((h=l.return)&&h.call(l),0):l.next)&&!(h=h.call(l,C[1])).done)return h;switch(l=0,h&&(C=[C[0]&2,h.value]),C[0]){case 0:case 1:h=C;break;case 4:return i.label++,{value:C[1],done:!1};case 5:i.label++,l=C[1],C=[0];continue;case 7:C=i.ops.pop(),i.trys.pop();continue;default:if(h=i.trys,!(h=h.length>0&&h[h.length-1])&&(C[0]===6||C[0]===2)){i=0;continue}if(C[0]===3&&(!h||C[1]>h[0]&&C[1]<h[3])){i.label=C[1];break}if(C[0]===6&&i.label<h[1]){i.label=h[1],h=C;break}if(h&&i.label<h[2]){i.label=h[2],i.ops.push(C);break}h[2]&&i.ops.pop(),i.trys.pop();continue}C=t.call(n,i)}catch(I){C=[6,I],l=0}finally{s=h=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}}function Kd(n,t,i){if(arguments.length===2)for(var s=0,l=t.length,h;s<l;s++)(h||!(s in t))&&(h||(h=Array.prototype.slice.call(t,0,s)),h[s]=t[s]);return n.concat(h||t)}for(var KA=function(){function n(t,i,s,l){this.left=t,this.top=i,this.width=s,this.height=l}return n.prototype.add=function(t,i,s,l){return new n(this.left+t,this.top+i,this.width+s,this.height+l)},n.fromClientRect=function(t,i){return new n(i.left+t.windowBounds.left,i.top+t.windowBounds.top,i.width,i.height)},n.fromDOMRectList=function(t,i){var s=Array.from(i).find(function(l){return l.width!==0});return s?new n(s.left+t.windowBounds.left,s.top+t.windowBounds.top,s.width,s.height):n.EMPTY},n.EMPTY=new n(0,0,0,0),n}(),$d=function(n,t){return KA.fromClientRect(n,t.getBoundingClientRect())},p3=function(n){var t=n.body,i=n.documentElement;if(!t||!i)throw new Error("Unable to get document size");var s=Math.max(Math.max(t.scrollWidth,i.scrollWidth),Math.max(t.offsetWidth,i.offsetWidth),Math.max(t.clientWidth,i.clientWidth)),l=Math.max(Math.max(t.scrollHeight,i.scrollHeight),Math.max(t.offsetHeight,i.offsetHeight),Math.max(t.clientHeight,i.clientHeight));return new KA(0,0,s,l)},qd=function(n){for(var t=[],i=0,s=n.length;i<s;){var l=n.charCodeAt(i++);if(l>=55296&&l<=56319&&i<s){var h=n.charCodeAt(i++);(h&64512)===56320?t.push(((l&1023)<<10)+(h&1023)+65536):(t.push(l),i--)}else t.push(l)}return t},gn=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var i=n.length;if(!i)return"";for(var s=[],l=-1,h="";++l<i;){var p=n[l];p<=65535?s.push(p):(p-=65536,s.push((p>>10)+55296,p%1024+56320)),(l+1===i||s.length>16384)&&(h+=String.fromCharCode.apply(String,s),s.length=0)}return h},Qv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f3=typeof Uint8Array>"u"?[]:new Uint8Array(256),Gd=0;Gd<Qv.length;Gd++)f3[Qv.charCodeAt(Gd)]=Gd;for(var Mv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",yh=typeof Uint8Array>"u"?[]:new Uint8Array(256),Wd=0;Wd<Mv.length;Wd++)yh[Mv.charCodeAt(Wd)]=Wd;for(var g3=function(n){var t=n.length*.75,i=n.length,s,l=0,h,p,o,v;n[n.length-1]==="="&&(t--,n[n.length-2]==="="&&t--);var C=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),I=Array.isArray(C)?C:new Uint8Array(C);for(s=0;s<i;s+=4)h=yh[n.charCodeAt(s)],p=yh[n.charCodeAt(s+1)],o=yh[n.charCodeAt(s+2)],v=yh[n.charCodeAt(s+3)],I[l++]=h<<2|p>>4,I[l++]=(p&15)<<4|o>>2,I[l++]=(o&3)<<6|v&63;return C},m3=function(n){for(var t=n.length,i=[],s=0;s<t;s+=2)i.push(n[s+1]<<8|n[s]);return i},y3=function(n){for(var t=n.length,i=[],s=0;s<t;s+=4)i.push(n[s+3]<<24|n[s+2]<<16|n[s+1]<<8|n[s]);return i},mc=5,Dg=11,Ng=2,v3=Dg-mc,kv=65536>>mc,w3=1<<mc,Og=w3-1,_3=1024>>mc,b3=kv+_3,x3=b3,B3=32,C3=x3+B3,F3=65536>>Dg,S3=1<<v3,I3=S3-1,Dv=function(n,t,i){return n.slice?n.slice(t,i):new Uint16Array(Array.prototype.slice.call(n,t,i))},E3=function(n,t,i){return n.slice?n.slice(t,i):new Uint32Array(Array.prototype.slice.call(n,t,i))},T3=function(n,t){var i=g3(n),s=Array.isArray(i)?y3(i):new Uint32Array(i),l=Array.isArray(i)?m3(i):new Uint16Array(i),h=24,p=Dv(l,h/2,s[4]/2),o=s[5]===2?Dv(l,(h+s[4])/2):E3(s,Math.ceil((h+s[4])/4));return new U3(s[0],s[1],s[2],s[3],p,o)},U3=function(){function n(t,i,s,l,h,p){this.initialValue=t,this.errorValue=i,this.highStart=s,this.highValueIndex=l,this.index=h,this.data=p}return n.prototype.get=function(t){var i;if(t>=0){if(t<55296||t>56319&&t<=65535)return i=this.index[t>>mc],i=(i<<Ng)+(t&Og),this.data[i];if(t<=65535)return i=this.index[kv+(t-55296>>mc)],i=(i<<Ng)+(t&Og),this.data[i];if(t<this.highStart)return i=C3-F3+(t>>Dg),i=this.index[i],i+=t>>mc&I3,i=this.index[i],i=(i<<Ng)+(t&Og),this.data[i];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),Nv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P3=typeof Uint8Array>"u"?[]:new Uint8Array(256),Xd=0;Xd<Nv.length;Xd++)P3[Nv.charCodeAt(Xd)]=Xd;var L3="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Ov=50,Q3=1,Rv=2,zv=3,M3=4,k3=5,Hv=7,Vv=8,jv=9,El=10,Rg=11,Kv=12,zg=13,D3=14,vh=15,Hg=16,Zd=17,wh=18,N3=19,$v=20,Vg=21,_h=22,jg=23,fu=24,_a=25,bh=26,xh=27,gu=28,O3=29,mu=30,R3=31,Yd=32,Jd=33,Kg=34,$g=35,qg=36,Bh=37,Gg=38,tp=39,ep=40,Wg=41,qv=42,z3=43,H3=[9001,65288],Gv="!",ks="×",rp="÷",Xg=T3(L3),$A=[mu,qg],Zg=[Q3,Rv,zv,k3],Wv=[El,Vv],Xv=[xh,bh],V3=Zg.concat(Wv),Zv=[Gg,tp,ep,Kg,$g],j3=[vh,zg],K3=function(n,t){t===void 0&&(t="strict");var i=[],s=[],l=[];return n.forEach(function(h,p){var o=Xg.get(h);if(o>Ov?(l.push(!0),o-=Ov):l.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(h)!==-1)return s.push(p),i.push(Hg);if(o===M3||o===Rg){if(p===0)return s.push(p),i.push(mu);var v=i[p-1];return V3.indexOf(v)===-1?(s.push(s[p-1]),i.push(v)):(s.push(p),i.push(mu))}if(s.push(p),o===R3)return i.push(t==="strict"?Vg:Bh);if(o===qv||o===O3)return i.push(mu);if(o===z3)return h>=131072&&h<=196605||h>=196608&&h<=262141?i.push(Bh):i.push(mu);i.push(o)}),[s,i,l]},Yg=function(n,t,i,s){var l=s[i];if(Array.isArray(n)?n.indexOf(l)!==-1:n===l)for(var h=i;h<=s.length;){h++;var p=s[h];if(p===t)return!0;if(p!==El)break}if(l===El)for(var h=i;h>0;){h--;var o=s[h];if(Array.isArray(n)?n.indexOf(o)!==-1:n===o)for(var v=i;v<=s.length;){v++;var p=s[v];if(p===t)return!0;if(p!==El)break}if(o!==El)break}return!1},Yv=function(n,t){for(var i=n;i>=0;){var s=t[i];if(s===El)i--;else return s}return 0},$3=function(n,t,i,s,l){if(i[s]===0)return ks;var h=s-1;if(Array.isArray(l)&&l[h]===!0)return ks;var p=h-1,o=h+1,v=t[h],C=p>=0?t[p]:0,I=t[o];if(v===Rv&&I===zv)return ks;if(Zg.indexOf(v)!==-1)return Gv;if(Zg.indexOf(I)!==-1||Wv.indexOf(I)!==-1)return ks;if(Yv(h,t)===Vv)return rp;if(Xg.get(n[h])===Rg||(v===Yd||v===Jd)&&Xg.get(n[o])===Rg||v===Hv||I===Hv||v===jv||[El,zg,vh].indexOf(v)===-1&&I===jv||[Zd,wh,N3,fu,gu].indexOf(I)!==-1||Yv(h,t)===_h||Yg(jg,_h,h,t)||Yg([Zd,wh],Vg,h,t)||Yg(Kv,Kv,h,t))return ks;if(v===El)return rp;if(v===jg||I===jg)return ks;if(I===Hg||v===Hg)return rp;if([zg,vh,Vg].indexOf(I)!==-1||v===D3||C===qg&&j3.indexOf(v)!==-1||v===gu&&I===qg||I===$v||$A.indexOf(I)!==-1&&v===_a||$A.indexOf(v)!==-1&&I===_a||v===xh&&[Bh,Yd,Jd].indexOf(I)!==-1||[Bh,Yd,Jd].indexOf(v)!==-1&&I===bh||$A.indexOf(v)!==-1&&Xv.indexOf(I)!==-1||Xv.indexOf(v)!==-1&&$A.indexOf(I)!==-1||[xh,bh].indexOf(v)!==-1&&(I===_a||[_h,vh].indexOf(I)!==-1&&t[o+1]===_a)||[_h,vh].indexOf(v)!==-1&&I===_a||v===_a&&[_a,gu,fu].indexOf(I)!==-1)return ks;if([_a,gu,fu,Zd,wh].indexOf(I)!==-1)for(var U=h;U>=0;){var Q=t[U];if(Q===_a)return ks;if([gu,fu].indexOf(Q)!==-1)U--;else break}if([xh,bh].indexOf(I)!==-1)for(var U=[Zd,wh].indexOf(v)!==-1?p:h;U>=0;){var Q=t[U];if(Q===_a)return ks;if([gu,fu].indexOf(Q)!==-1)U--;else break}if(Gg===v&&[Gg,tp,Kg,$g].indexOf(I)!==-1||[tp,Kg].indexOf(v)!==-1&&[tp,ep].indexOf(I)!==-1||[ep,$g].indexOf(v)!==-1&&I===ep||Zv.indexOf(v)!==-1&&[$v,bh].indexOf(I)!==-1||Zv.indexOf(I)!==-1&&v===xh||$A.indexOf(v)!==-1&&$A.indexOf(I)!==-1||v===fu&&$A.indexOf(I)!==-1||$A.concat(_a).indexOf(v)!==-1&&I===_h&&H3.indexOf(n[o])===-1||$A.concat(_a).indexOf(I)!==-1&&v===wh)return ks;if(v===Wg&&I===Wg){for(var P=i[h],K=1;P>0&&(P--,t[P]===Wg);)K++;if(K%2!==0)return ks}return v===Yd&&I===Jd?ks:rp},q3=function(n,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var i=K3(n,t.lineBreak),s=i[0],l=i[1],h=i[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(l=l.map(function(o){return[_a,mu,qv].indexOf(o)!==-1?Bh:o}));var p=t.wordBreak==="keep-all"?h.map(function(o,v){return o&&n[v]>=19968&&n[v]<=40959}):void 0;return[s,l,p]},G3=function(){function n(t,i,s,l){this.codePoints=t,this.required=i===Gv,this.start=s,this.end=l}return n.prototype.slice=function(){return gn.apply(void 0,this.codePoints.slice(this.start,this.end))},n}(),W3=function(n,t){var i=qd(n),s=q3(i,t),l=s[0],h=s[1],p=s[2],o=i.length,v=0,C=0;return{next:function(){if(C>=o)return{done:!0,value:null};for(var I=ks;C<o&&(I=$3(i,h,l,++C,p))===ks;);if(I!==ks||C===o){var U=new G3(i,I,v,C);return v=C,{value:U,done:!1}}return{done:!0,value:null}}}},X3=1,Z3=2,Ch=4,Jv=8,ip=10,tw=47,Fh=92,Y3=9,J3=32,np=34,Sh=61,tF=35,eF=36,rF=37,sp=39,ap=40,Ih=41,iF=95,ra=45,nF=33,sF=60,aF=62,oF=64,AF=91,lF=93,cF=61,uF=123,op=63,hF=125,ew=124,dF=126,pF=128,rw=65533,Jg=42,yc=43,fF=44,gF=58,mF=59,Eh=46,yF=0,vF=8,wF=11,_F=14,bF=31,xF=127,oA=-1,iw=48,nw=97,sw=101,BF=102,CF=117,FF=122,aw=65,ow=69,Aw=70,SF=85,IF=90,Ds=function(n){return n>=iw&&n<=57},EF=function(n){return n>=55296&&n<=57343},yu=function(n){return Ds(n)||n>=aw&&n<=Aw||n>=nw&&n<=BF},TF=function(n){return n>=nw&&n<=FF},UF=function(n){return n>=aw&&n<=IF},PF=function(n){return TF(n)||UF(n)},LF=function(n){return n>=pF},Ap=function(n){return n===ip||n===Y3||n===J3},lp=function(n){return PF(n)||LF(n)||n===iF},lw=function(n){return lp(n)||Ds(n)||n===ra},QF=function(n){return n>=yF&&n<=vF||n===wF||n>=_F&&n<=bF||n===xF},Tl=function(n,t){return n!==Fh?!1:t!==ip},cp=function(n,t,i){return n===ra?lp(t)||Tl(t,i):lp(n)?!0:!!(n===Fh&&Tl(n,t))},tm=function(n,t,i){return n===yc||n===ra?Ds(t)?!0:t===Eh&&Ds(i):Ds(n===Eh?t:n)},MF=function(n){var t=0,i=1;(n[t]===yc||n[t]===ra)&&(n[t]===ra&&(i=-1),t++);for(var s=[];Ds(n[t]);)s.push(n[t++]);var l=s.length?parseInt(gn.apply(void 0,s),10):0;n[t]===Eh&&t++;for(var h=[];Ds(n[t]);)h.push(n[t++]);var p=h.length,o=p?parseInt(gn.apply(void 0,h),10):0;(n[t]===ow||n[t]===sw)&&t++;var v=1;(n[t]===yc||n[t]===ra)&&(n[t]===ra&&(v=-1),t++);for(var C=[];Ds(n[t]);)C.push(n[t++]);var I=C.length?parseInt(gn.apply(void 0,C),10):0;return i*(l+o*Math.pow(10,-p))*Math.pow(10,v*I)},kF={type:2},DF={type:3},NF={type:4},OF={type:13},RF={type:8},zF={type:21},HF={type:9},VF={type:10},jF={type:11},KF={type:12},$F={type:14},up={type:23},qF={type:1},GF={type:25},WF={type:24},XF={type:26},ZF={type:27},YF={type:28},JF={type:29},tS={type:31},em={type:32},cw=function(){function n(){this._value=[]}return n.prototype.write=function(t){this._value=this._value.concat(qd(t))},n.prototype.read=function(){for(var t=[],i=this.consumeToken();i!==em;)t.push(i),i=this.consumeToken();return t},n.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case np:return this.consumeStringToken(np);case tF:var i=this.peekCodePoint(0),s=this.peekCodePoint(1),l=this.peekCodePoint(2);if(lw(i)||Tl(s,l)){var h=cp(i,s,l)?Z3:X3,p=this.consumeName();return{type:5,value:p,flags:h}}break;case eF:if(this.peekCodePoint(0)===Sh)return this.consumeCodePoint(),OF;break;case sp:return this.consumeStringToken(sp);case ap:return kF;case Ih:return DF;case Jg:if(this.peekCodePoint(0)===Sh)return this.consumeCodePoint(),$F;break;case yc:if(tm(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case fF:return NF;case ra:var o=t,v=this.peekCodePoint(0),C=this.peekCodePoint(1);if(tm(o,v,C))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(cp(o,v,C))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(v===ra&&C===aF)return this.consumeCodePoint(),this.consumeCodePoint(),WF;break;case Eh:if(tm(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case tw:if(this.peekCodePoint(0)===Jg)for(this.consumeCodePoint();;){var I=this.consumeCodePoint();if(I===Jg&&(I=this.consumeCodePoint(),I===tw))return this.consumeToken();if(I===oA)return this.consumeToken()}break;case gF:return XF;case mF:return ZF;case sF:if(this.peekCodePoint(0)===nF&&this.peekCodePoint(1)===ra&&this.peekCodePoint(2)===ra)return this.consumeCodePoint(),this.consumeCodePoint(),GF;break;case oF:var U=this.peekCodePoint(0),Q=this.peekCodePoint(1),P=this.peekCodePoint(2);if(cp(U,Q,P)){var p=this.consumeName();return{type:7,value:p}}break;case AF:return YF;case Fh:if(Tl(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case lF:return JF;case cF:if(this.peekCodePoint(0)===Sh)return this.consumeCodePoint(),RF;break;case uF:return jF;case hF:return KF;case CF:case SF:var K=this.peekCodePoint(0),V=this.peekCodePoint(1);return K===yc&&(yu(V)||V===op)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case ew:if(this.peekCodePoint(0)===Sh)return this.consumeCodePoint(),HF;if(this.peekCodePoint(0)===ew)return this.consumeCodePoint(),zF;break;case dF:if(this.peekCodePoint(0)===Sh)return this.consumeCodePoint(),VF;break;case oA:return em}return Ap(t)?(this.consumeWhiteSpace(),tS):Ds(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):lp(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:gn(t)}},n.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},n.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},n.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},n.prototype.consumeUnicodeRangeToken=function(){for(var t=[],i=this.consumeCodePoint();yu(i)&&t.length<6;)t.push(i),i=this.consumeCodePoint();for(var s=!1;i===op&&t.length<6;)t.push(i),i=this.consumeCodePoint(),s=!0;if(s){var l=parseInt(gn.apply(void 0,t.map(function(v){return v===op?iw:v})),16),h=parseInt(gn.apply(void 0,t.map(function(v){return v===op?Aw:v})),16);return{type:30,start:l,end:h}}var p=parseInt(gn.apply(void 0,t),16);if(this.peekCodePoint(0)===ra&&yu(this.peekCodePoint(1))){this.consumeCodePoint(),i=this.consumeCodePoint();for(var o=[];yu(i)&&o.length<6;)o.push(i),i=this.consumeCodePoint();var h=parseInt(gn.apply(void 0,o),16);return{type:30,start:p,end:h}}else return{type:30,start:p,end:p}},n.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===ap?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===ap?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},n.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===oA)return{type:22,value:""};var i=this.peekCodePoint(0);if(i===sp||i===np){var s=this.consumeStringToken(this.consumeCodePoint());return s.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===oA||this.peekCodePoint(0)===Ih)?(this.consumeCodePoint(),{type:22,value:s.value}):(this.consumeBadUrlRemnants(),up)}for(;;){var l=this.consumeCodePoint();if(l===oA||l===Ih)return{type:22,value:gn.apply(void 0,t)};if(Ap(l))return this.consumeWhiteSpace(),this.peekCodePoint(0)===oA||this.peekCodePoint(0)===Ih?(this.consumeCodePoint(),{type:22,value:gn.apply(void 0,t)}):(this.consumeBadUrlRemnants(),up);if(l===np||l===sp||l===ap||QF(l))return this.consumeBadUrlRemnants(),up;if(l===Fh)if(Tl(l,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),up;else t.push(l)}},n.prototype.consumeWhiteSpace=function(){for(;Ap(this.peekCodePoint(0));)this.consumeCodePoint()},n.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===Ih||t===oA)return;Tl(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},n.prototype.consumeStringSlice=function(t){for(var i=5e4,s="";t>0;){var l=Math.min(i,t);s+=gn.apply(void 0,this._value.splice(0,l)),t-=l}return this._value.shift(),s},n.prototype.consumeStringToken=function(t){var i="",s=0;do{var l=this._value[s];if(l===oA||l===void 0||l===t)return i+=this.consumeStringSlice(s),{type:0,value:i};if(l===ip)return this._value.splice(0,s),qF;if(l===Fh){var h=this._value[s+1];h!==oA&&h!==void 0&&(h===ip?(i+=this.consumeStringSlice(s),s=-1,this._value.shift()):Tl(l,h)&&(i+=this.consumeStringSlice(s),i+=gn(this.consumeEscapedCodePoint()),s=-1))}s++}while(!0)},n.prototype.consumeNumber=function(){var t=[],i=Ch,s=this.peekCodePoint(0);for((s===yc||s===ra)&&t.push(this.consumeCodePoint());Ds(this.peekCodePoint(0));)t.push(this.consumeCodePoint());s=this.peekCodePoint(0);var l=this.peekCodePoint(1);if(s===Eh&&Ds(l))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),i=Jv;Ds(this.peekCodePoint(0));)t.push(this.consumeCodePoint());s=this.peekCodePoint(0),l=this.peekCodePoint(1);var h=this.peekCodePoint(2);if((s===ow||s===sw)&&((l===yc||l===ra)&&Ds(h)||Ds(l)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),i=Jv;Ds(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[MF(t),i]},n.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),i=t[0],s=t[1],l=this.peekCodePoint(0),h=this.peekCodePoint(1),p=this.peekCodePoint(2);if(cp(l,h,p)){var o=this.consumeName();return{type:15,number:i,flags:s,unit:o}}return l===rF?(this.consumeCodePoint(),{type:16,number:i,flags:s}):{type:17,number:i,flags:s}},n.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(yu(t)){for(var i=gn(t);yu(this.peekCodePoint(0))&&i.length<6;)i+=gn(this.consumeCodePoint());Ap(this.peekCodePoint(0))&&this.consumeCodePoint();var s=parseInt(i,16);return s===0||EF(s)||s>1114111?rw:s}return t===oA?rw:t},n.prototype.consumeName=function(){for(var t="";;){var i=this.consumeCodePoint();if(lw(i))t+=gn(i);else if(Tl(i,this.peekCodePoint(0)))t+=gn(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(i),t}},n}(),uw=function(){function n(t){this._tokens=t}return n.create=function(t){var i=new cw;return i.write(t),new n(i.read())},n.parseValue=function(t){return n.create(t).parseComponentValue()},n.parseValues=function(t){return n.create(t).parseComponentValues()},n.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var i=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return i;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},n.prototype.parseComponentValues=function(){for(var t=[];;){var i=this.consumeComponentValue();if(i.type===32)return t;t.push(i),t.push()}},n.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},n.prototype.consumeSimpleBlock=function(t){for(var i={type:t,values:[]},s=this.consumeToken();;){if(s.type===32||rS(s,t))return i;this.reconsumeToken(s),i.values.push(this.consumeComponentValue()),s=this.consumeToken()}},n.prototype.consumeFunction=function(t){for(var i={name:t.value,values:[],type:18};;){var s=this.consumeToken();if(s.type===32||s.type===3)return i;this.reconsumeToken(s),i.values.push(this.consumeComponentValue())}},n.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?em:t},n.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},n}(),Th=function(n){return n.type===15},vu=function(n){return n.type===17},Ci=function(n){return n.type===20},eS=function(n){return n.type===0},rm=function(n,t){return Ci(n)&&n.value===t},hw=function(n){return n.type!==31},wu=function(n){return n.type!==31&&n.type!==4},AA=function(n){var t=[],i=[];return n.forEach(function(s){if(s.type===4){if(i.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(i),i=[];return}s.type!==31&&i.push(s)}),i.length&&t.push(i),t},rS=function(n,t){return t===11&&n.type===12||t===28&&n.type===29?!0:t===2&&n.type===3},Ul=function(n){return n.type===17||n.type===15},Cn=function(n){return n.type===16||Ul(n)},dw=function(n){return n.length>1?[n[0],n[1]]:[n[0]]},Jn={type:17,number:0,flags:Ch},im={type:16,number:50,flags:Ch},Pl={type:16,number:100,flags:Ch},Uh=function(n,t,i){var s=n[0],l=n[1];return[Qi(s,t),Qi(typeof l<"u"?l:s,i)]},Qi=function(n,t){if(n.type===16)return n.number/100*t;if(Th(n))switch(n.unit){case"rem":case"em":return 16*n.number;case"px":default:return n.number}return n.number},pw="deg",fw="grad",gw="rad",mw="turn",hp={name:"angle",parse:function(n,t){if(t.type===15)switch(t.unit){case pw:return Math.PI*t.number/180;case fw:return Math.PI/200*t.number;case gw:return t.number;case mw:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},yw=function(n){return n.type===15&&(n.unit===pw||n.unit===fw||n.unit===gw||n.unit===mw)},vw=function(n){var t=n.filter(Ci).map(function(i){return i.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Jn,Jn];case"to top":case"bottom":return $a(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Jn,Pl];case"to right":case"left":return $a(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Pl,Pl];case"to bottom":case"top":return $a(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Pl,Jn];case"to left":case"right":return $a(270)}return 0},$a=function(n){return Math.PI*n/180},Ll={name:"color",parse:function(n,t){if(t.type===18){var i=iS[t.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return i(n,t.values)}if(t.type===5){if(t.value.length===3){var s=t.value.substring(0,1),l=t.value.substring(1,2),h=t.value.substring(2,3);return Ml(parseInt(s+s,16),parseInt(l+l,16),parseInt(h+h,16),1)}if(t.value.length===4){var s=t.value.substring(0,1),l=t.value.substring(1,2),h=t.value.substring(2,3),p=t.value.substring(3,4);return Ml(parseInt(s+s,16),parseInt(l+l,16),parseInt(h+h,16),parseInt(p+p,16)/255)}if(t.value.length===6){var s=t.value.substring(0,2),l=t.value.substring(2,4),h=t.value.substring(4,6);return Ml(parseInt(s,16),parseInt(l,16),parseInt(h,16),1)}if(t.value.length===8){var s=t.value.substring(0,2),l=t.value.substring(2,4),h=t.value.substring(4,6),p=t.value.substring(6,8);return Ml(parseInt(s,16),parseInt(l,16),parseInt(h,16),parseInt(p,16)/255)}}if(t.type===20){var o=qA[t.value.toUpperCase()];if(typeof o<"u")return o}return qA.TRANSPARENT}},Ql=function(n){return(255&n)===0},Nn=function(n){var t=255&n,i=255&n>>8,s=255&n>>16,l=255&n>>24;return t<255?"rgba("+l+","+s+","+i+","+t/255+")":"rgb("+l+","+s+","+i+")"},Ml=function(n,t,i,s){return(n<<24|t<<16|i<<8|Math.round(s*255)<<0)>>>0},ww=function(n,t){if(n.type===17)return n.number;if(n.type===16){var i=t===3?1:255;return t===3?n.number/100*i:Math.round(n.number/100*i)}return 0},_w=function(n,t){var i=t.filter(wu);if(i.length===3){var s=i.map(ww),l=s[0],h=s[1],p=s[2];return Ml(l,h,p,1)}if(i.length===4){var o=i.map(ww),l=o[0],h=o[1],p=o[2],v=o[3];return Ml(l,h,p,v)}return 0};function nm(n,t,i){return i<0&&(i+=1),i>=1&&(i-=1),i<1/6?(t-n)*i*6+n:i<1/2?t:i<2/3?(t-n)*6*(2/3-i)+n:n}var bw=function(n,t){var i=t.filter(wu),s=i[0],l=i[1],h=i[2],p=i[3],o=(s.type===17?$a(s.number):hp.parse(n,s))/(Math.PI*2),v=Cn(l)?l.number/100:0,C=Cn(h)?h.number/100:0,I=typeof p<"u"&&Cn(p)?Qi(p,1):1;if(v===0)return Ml(C*255,C*255,C*255,1);var U=C<=.5?C*(v+1):C+v-C*v,Q=C*2-U,P=nm(Q,U,o+1/3),K=nm(Q,U,o),V=nm(Q,U,o-1/3);return Ml(P*255,K*255,V*255,I)},iS={hsl:bw,hsla:bw,rgb:_w,rgba:_w},Ph=function(n,t){return Ll.parse(n,uw.create(t).parseComponentValue())},qA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},nS={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(n,t){return t.map(function(i){if(Ci(i))switch(i.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},sS={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},dp=function(n,t){var i=Ll.parse(n,t[0]),s=t[1];return s&&Cn(s)?{color:i,stop:s}:{color:i,stop:null}},xw=function(n,t){var i=n[0],s=n[n.length-1];i.stop===null&&(i.stop=Jn),s.stop===null&&(s.stop=Pl);for(var l=[],h=0,p=0;p<n.length;p++){var o=n[p].stop;if(o!==null){var v=Qi(o,t);v>h?l.push(v):l.push(h),h=v}else l.push(null)}for(var C=null,p=0;p<l.length;p++){var I=l[p];if(I===null)C===null&&(C=p);else if(C!==null){for(var U=p-C,Q=l[C-1],P=(I-Q)/(U+1),K=1;K<=U;K++)l[C+K-1]=P*K;C=null}}return n.map(function(V,Y){var $=V.color;return{color:$,stop:Math.max(Math.min(1,l[Y]/t),0)}})},aS=function(n,t,i){var s=t/2,l=i/2,h=Qi(n[0],t)-s,p=l-Qi(n[1],i);return(Math.atan2(p,h)+Math.PI*2)%(Math.PI*2)},oS=function(n,t,i){var s=typeof n=="number"?n:aS(n,t,i),l=Math.abs(t*Math.sin(s))+Math.abs(i*Math.cos(s)),h=t/2,p=i/2,o=l/2,v=Math.sin(s-Math.PI/2)*o,C=Math.cos(s-Math.PI/2)*o;return[l,h-C,h+C,p-v,p+v]},To=function(n,t){return Math.sqrt(n*n+t*t)},Bw=function(n,t,i,s,l){var h=[[0,0],[0,t],[n,0],[n,t]];return h.reduce(function(p,o){var v=o[0],C=o[1],I=To(i-v,s-C);return(l?I<p.optimumDistance:I>p.optimumDistance)?{optimumCorner:o,optimumDistance:I}:p},{optimumDistance:l?1/0:-1/0,optimumCorner:null}).optimumCorner},AS=function(n,t,i,s,l){var h=0,p=0;switch(n.size){case 0:n.shape===0?h=p=Math.min(Math.abs(t),Math.abs(t-s),Math.abs(i),Math.abs(i-l)):n.shape===1&&(h=Math.min(Math.abs(t),Math.abs(t-s)),p=Math.min(Math.abs(i),Math.abs(i-l)));break;case 2:if(n.shape===0)h=p=Math.min(To(t,i),To(t,i-l),To(t-s,i),To(t-s,i-l));else if(n.shape===1){var o=Math.min(Math.abs(i),Math.abs(i-l))/Math.min(Math.abs(t),Math.abs(t-s)),v=Bw(s,l,t,i,!0),C=v[0],I=v[1];h=To(C-t,(I-i)/o),p=o*h}break;case 1:n.shape===0?h=p=Math.max(Math.abs(t),Math.abs(t-s),Math.abs(i),Math.abs(i-l)):n.shape===1&&(h=Math.max(Math.abs(t),Math.abs(t-s)),p=Math.max(Math.abs(i),Math.abs(i-l)));break;case 3:if(n.shape===0)h=p=Math.max(To(t,i),To(t,i-l),To(t-s,i),To(t-s,i-l));else if(n.shape===1){var o=Math.max(Math.abs(i),Math.abs(i-l))/Math.max(Math.abs(t),Math.abs(t-s)),U=Bw(s,l,t,i,!1),C=U[0],I=U[1];h=To(C-t,(I-i)/o),p=o*h}break}return Array.isArray(n.size)&&(h=Qi(n.size[0],s),p=n.size.length===2?Qi(n.size[1],l):h),[h,p]},lS=function(n,t){var i=$a(180),s=[];return AA(t).forEach(function(l,h){if(h===0){var p=l[0];if(p.type===20&&p.value==="to"){i=vw(l);return}else if(yw(p)){i=hp.parse(n,p);return}}var o=dp(n,l);s.push(o)}),{angle:i,stops:s,type:1}},pp=function(n,t){var i=$a(180),s=[];return AA(t).forEach(function(l,h){if(h===0){var p=l[0];if(p.type===20&&["top","left","right","bottom"].indexOf(p.value)!==-1){i=vw(l);return}else if(yw(p)){i=(hp.parse(n,p)+$a(270))%$a(360);return}}var o=dp(n,l);s.push(o)}),{angle:i,stops:s,type:1}},cS=function(n,t){var i=$a(180),s=[],l=1,h=0,p=3,o=[];return AA(t).forEach(function(v,C){var I=v[0];if(C===0){if(Ci(I)&&I.value==="linear"){l=1;return}else if(Ci(I)&&I.value==="radial"){l=2;return}}if(I.type===18){if(I.name==="from"){var U=Ll.parse(n,I.values[0]);s.push({stop:Jn,color:U})}else if(I.name==="to"){var U=Ll.parse(n,I.values[0]);s.push({stop:Pl,color:U})}else if(I.name==="color-stop"){var Q=I.values.filter(wu);if(Q.length===2){var U=Ll.parse(n,Q[1]),P=Q[0];vu(P)&&s.push({stop:{type:16,number:P.number*100,flags:P.flags},color:U})}}}}),l===1?{angle:(i+$a(180))%$a(360),stops:s,type:l}:{size:p,shape:h,stops:s,position:o,type:l}},Cw="closest-side",Fw="farthest-side",Sw="closest-corner",Iw="farthest-corner",Ew="circle",Tw="ellipse",Uw="cover",Pw="contain",uS=function(n,t){var i=0,s=3,l=[],h=[];return AA(t).forEach(function(p,o){var v=!0;if(o===0){var C=!1;v=p.reduce(function(U,Q){if(C)if(Ci(Q))switch(Q.value){case"center":return h.push(im),U;case"top":case"left":return h.push(Jn),U;case"right":case"bottom":return h.push(Pl),U}else(Cn(Q)||Ul(Q))&&h.push(Q);else if(Ci(Q))switch(Q.value){case Ew:return i=0,!1;case Tw:return i=1,!1;case"at":return C=!0,!1;case Cw:return s=0,!1;case Uw:case Fw:return s=1,!1;case Pw:case Sw:return s=2,!1;case Iw:return s=3,!1}else if(Ul(Q)||Cn(Q))return Array.isArray(s)||(s=[]),s.push(Q),!1;return U},v)}if(v){var I=dp(n,p);l.push(I)}}),{size:s,shape:i,stops:l,position:h,type:2}},fp=function(n,t){var i=0,s=3,l=[],h=[];return AA(t).forEach(function(p,o){var v=!0;if(o===0?v=p.reduce(function(I,U){if(Ci(U))switch(U.value){case"center":return h.push(im),!1;case"top":case"left":return h.push(Jn),!1;case"right":case"bottom":return h.push(Pl),!1}else if(Cn(U)||Ul(U))return h.push(U),!1;return I},v):o===1&&(v=p.reduce(function(I,U){if(Ci(U))switch(U.value){case Ew:return i=0,!1;case Tw:return i=1,!1;case Pw:case Cw:return s=0,!1;case Fw:return s=1,!1;case Sw:return s=2,!1;case Uw:case Iw:return s=3,!1}else if(Ul(U)||Cn(U))return Array.isArray(s)||(s=[]),s.push(U),!1;return I},v)),v){var C=dp(n,p);l.push(C)}}),{size:s,shape:i,stops:l,position:h,type:2}},hS=function(n){return n.type===1},dS=function(n){return n.type===2},sm={name:"image",parse:function(n,t){if(t.type===22){var i={url:t.value,type:0};return n.cache.addImage(t.value),i}if(t.type===18){var s=Lw[t.name];if(typeof s>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return s(n,t.values)}throw new Error("Unsupported image type "+t.type)}};function pS(n){return!(n.type===20&&n.value==="none")&&(n.type!==18||!!Lw[n.name])}var Lw={"linear-gradient":lS,"-moz-linear-gradient":pp,"-ms-linear-gradient":pp,"-o-linear-gradient":pp,"-webkit-linear-gradient":pp,"radial-gradient":uS,"-moz-radial-gradient":fp,"-ms-radial-gradient":fp,"-o-radial-gradient":fp,"-webkit-radial-gradient":fp,"-webkit-gradient":cS},fS={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(n,t){if(t.length===0)return[];var i=t[0];return i.type===20&&i.value==="none"?[]:t.filter(function(s){return wu(s)&&pS(s)}).map(function(s){return sm.parse(n,s)})}},gS={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(n,t){return t.map(function(i){if(Ci(i))switch(i.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},mS={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(n,t){return AA(t).map(function(i){return i.filter(Cn)}).map(dw)}},yS={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(n,t){return AA(t).map(function(i){return i.filter(Ci).map(function(s){return s.value}).join(" ")}).map(vS)}},vS=function(n){switch(n){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},_u;(function(n){n.AUTO="auto",n.CONTAIN="contain",n.COVER="cover"})(_u||(_u={}));var wS={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(n,t){return AA(t).map(function(i){return i.filter(_S)})}},_S=function(n){return Ci(n)||Cn(n)},gp=function(n){return{name:"border-"+n+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},bS=gp("top"),xS=gp("right"),BS=gp("bottom"),CS=gp("left"),mp=function(n){return{name:"border-radius-"+n,initialValue:"0 0",prefix:!1,type:1,parse:function(t,i){return dw(i.filter(Cn))}}},FS=mp("top-left"),SS=mp("top-right"),IS=mp("bottom-right"),ES=mp("bottom-left"),yp=function(n){return{name:"border-"+n+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,i){switch(i){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},TS=yp("top"),US=yp("right"),PS=yp("bottom"),LS=yp("left"),vp=function(n){return{name:"border-"+n+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,i){return Th(i)?i.number:0}}},QS=vp("top"),MS=vp("right"),kS=vp("bottom"),DS=vp("left"),NS={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},OS={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(n,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},RS={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(n,t){return t.filter(Ci).reduce(function(i,s){return i|zS(s.value)},0)}},zS=function(n){switch(n){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},HS={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(n,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},VS={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(n,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},wp;(function(n){n.NORMAL="normal",n.STRICT="strict"})(wp||(wp={}));var jS={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,t){switch(t){case"strict":return wp.STRICT;case"normal":default:return wp.NORMAL}}},KS={name:"line-height",initialValue:"normal",prefix:!1,type:4},Qw=function(n,t){return Ci(n)&&n.value==="normal"?1.2*t:n.type===17?t*n.number:Cn(n)?Qi(n,t):t},$S={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(n,t){return t.type===20&&t.value==="none"?null:sm.parse(n,t)}},qS={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(n,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},am={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(n,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},_p=function(n){return{name:"margin-"+n,initialValue:"0",prefix:!1,type:4}},GS=_p("top"),WS=_p("right"),XS=_p("bottom"),ZS=_p("left"),YS={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(n,t){return t.filter(Ci).map(function(i){switch(i.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},JS={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(n,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},bp=function(n){return{name:"padding-"+n,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},tI=bp("top"),eI=bp("right"),rI=bp("bottom"),iI=bp("left"),nI={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(n,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},sI={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(n,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},aI={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,t){return t.length===1&&rm(t[0],"none")?[]:AA(t).map(function(i){for(var s={color:qA.TRANSPARENT,offsetX:Jn,offsetY:Jn,blur:Jn},l=0,h=0;h<i.length;h++){var p=i[h];Ul(p)?(l===0?s.offsetX=p:l===1?s.offsetY=p:s.blur=p,l++):s.color=Ll.parse(n,p)}return s})}},oI={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(n,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},AI={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(n,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var i=uI[t.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return i(t.values)}return null}},lI=function(n){var t=n.filter(function(i){return i.type===17}).map(function(i){return i.number});return t.length===6?t:null},cI=function(n){var t=n.filter(function(v){return v.type===17}).map(function(v){return v.number}),i=t[0],s=t[1];t[2],t[3];var l=t[4],h=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var p=t[12],o=t[13];return t[14],t[15],t.length===16?[i,s,l,h,p,o]:null},uI={matrix:lI,matrix3d:cI},Mw={type:16,number:50,flags:Ch},hI=[Mw,Mw],dI={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(n,t){var i=t.filter(Cn);return i.length!==2?hI:[i[0],i[1]]}},pI={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(n,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Lh;(function(n){n.NORMAL="normal",n.BREAK_ALL="break-all",n.KEEP_ALL="keep-all"})(Lh||(Lh={}));for(var fI={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,t){switch(t){case"break-all":return Lh.BREAK_ALL;case"keep-all":return Lh.KEEP_ALL;case"normal":default:return Lh.NORMAL}}},gI={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(n,t){if(t.type===20)return{auto:!0,order:0};if(vu(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},kw={name:"time",parse:function(n,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},mI={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(n,t){return vu(t)?t.number:1}},yI={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},vI={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(n,t){return t.filter(Ci).map(function(i){switch(i.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(i){return i!==0})}},wI={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(n,t){var i=[],s=[];return t.forEach(function(l){switch(l.type){case 20:case 0:i.push(l.value);break;case 17:i.push(l.number.toString());break;case 4:s.push(i.join(" ")),i.length=0;break}}),i.length&&s.push(i.join(" ")),s.map(function(l){return l.indexOf(" ")===-1?l:"'"+l+"'"})}},_I={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},bI={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(n,t){if(vu(t))return t.number;if(Ci(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},xI={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(n,t){return t.filter(Ci).map(function(i){return i.value})}},BI={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(n,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Pn=function(n,t){return(n&t)!==0},CI={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(n,t){if(t.length===0)return[];var i=t[0];return i.type===20&&i.value==="none"?[]:t}},FI={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(n,t){if(t.length===0)return null;var i=t[0];if(i.type===20&&i.value==="none")return null;for(var s=[],l=t.filter(hw),h=0;h<l.length;h++){var p=l[h],o=l[h+1];if(p.type===20){var v=o&&vu(o)?o.number:1;s.push({counter:p.value,increment:v})}}return s}},SI={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(n,t){if(t.length===0)return[];for(var i=[],s=t.filter(hw),l=0;l<s.length;l++){var h=s[l],p=s[l+1];if(Ci(h)&&h.value!=="none"){var o=p&&vu(p)?p.number:0;i.push({counter:h.value,reset:o})}}return i}},II={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(n,t){return t.filter(Th).map(function(i){return kw.parse(n,i)})}},EI={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(n,t){if(t.length===0)return null;var i=t[0];if(i.type===20&&i.value==="none")return null;var s=[],l=t.filter(eS);if(l.length%2!==0)return null;for(var h=0;h<l.length;h+=2){var p=l[h].value,o=l[h+1].value;s.push({open:p,close:o})}return s}},Dw=function(n,t,i){if(!n)return"";var s=n[Math.min(t,n.length-1)];return s?i?s.open:s.close:""},TI={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,t){return t.length===1&&rm(t[0],"none")?[]:AA(t).map(function(i){for(var s={color:255,offsetX:Jn,offsetY:Jn,blur:Jn,spread:Jn,inset:!1},l=0,h=0;h<i.length;h++){var p=i[h];rm(p,"inset")?s.inset=!0:Ul(p)?(l===0?s.offsetX=p:l===1?s.offsetY=p:l===2?s.blur=p:s.spread=p,l++):s.color=Ll.parse(n,p)}return s})}},UI={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(n,t){var i=[0,1,2],s=[];return t.filter(Ci).forEach(function(l){switch(l.value){case"stroke":s.push(1);break;case"fill":s.push(0);break;case"markers":s.push(2);break}}),i.forEach(function(l){s.indexOf(l)===-1&&s.push(l)}),s}},PI={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},LI={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(n,t){return Th(t)?t.number:0}},QI=function(){function n(t,i){var s,l;this.animationDuration=tr(t,II,i.animationDuration),this.backgroundClip=tr(t,nS,i.backgroundClip),this.backgroundColor=tr(t,sS,i.backgroundColor),this.backgroundImage=tr(t,fS,i.backgroundImage),this.backgroundOrigin=tr(t,gS,i.backgroundOrigin),this.backgroundPosition=tr(t,mS,i.backgroundPosition),this.backgroundRepeat=tr(t,yS,i.backgroundRepeat),this.backgroundSize=tr(t,wS,i.backgroundSize),this.borderTopColor=tr(t,bS,i.borderTopColor),this.borderRightColor=tr(t,xS,i.borderRightColor),this.borderBottomColor=tr(t,BS,i.borderBottomColor),this.borderLeftColor=tr(t,CS,i.borderLeftColor),this.borderTopLeftRadius=tr(t,FS,i.borderTopLeftRadius),this.borderTopRightRadius=tr(t,SS,i.borderTopRightRadius),this.borderBottomRightRadius=tr(t,IS,i.borderBottomRightRadius),this.borderBottomLeftRadius=tr(t,ES,i.borderBottomLeftRadius),this.borderTopStyle=tr(t,TS,i.borderTopStyle),this.borderRightStyle=tr(t,US,i.borderRightStyle),this.borderBottomStyle=tr(t,PS,i.borderBottomStyle),this.borderLeftStyle=tr(t,LS,i.borderLeftStyle),this.borderTopWidth=tr(t,QS,i.borderTopWidth),this.borderRightWidth=tr(t,MS,i.borderRightWidth),this.borderBottomWidth=tr(t,kS,i.borderBottomWidth),this.borderLeftWidth=tr(t,DS,i.borderLeftWidth),this.boxShadow=tr(t,TI,i.boxShadow),this.color=tr(t,NS,i.color),this.direction=tr(t,OS,i.direction),this.display=tr(t,RS,i.display),this.float=tr(t,HS,i.cssFloat),this.fontFamily=tr(t,wI,i.fontFamily),this.fontSize=tr(t,_I,i.fontSize),this.fontStyle=tr(t,BI,i.fontStyle),this.fontVariant=tr(t,xI,i.fontVariant),this.fontWeight=tr(t,bI,i.fontWeight),this.letterSpacing=tr(t,VS,i.letterSpacing),this.lineBreak=tr(t,jS,i.lineBreak),this.lineHeight=tr(t,KS,i.lineHeight),this.listStyleImage=tr(t,$S,i.listStyleImage),this.listStylePosition=tr(t,qS,i.listStylePosition),this.listStyleType=tr(t,am,i.listStyleType),this.marginTop=tr(t,GS,i.marginTop),this.marginRight=tr(t,WS,i.marginRight),this.marginBottom=tr(t,XS,i.marginBottom),this.marginLeft=tr(t,ZS,i.marginLeft),this.opacity=tr(t,mI,i.opacity);var h=tr(t,YS,i.overflow);this.overflowX=h[0],this.overflowY=h[h.length>1?1:0],this.overflowWrap=tr(t,JS,i.overflowWrap),this.paddingTop=tr(t,tI,i.paddingTop),this.paddingRight=tr(t,eI,i.paddingRight),this.paddingBottom=tr(t,rI,i.paddingBottom),this.paddingLeft=tr(t,iI,i.paddingLeft),this.paintOrder=tr(t,UI,i.paintOrder),this.position=tr(t,sI,i.position),this.textAlign=tr(t,nI,i.textAlign),this.textDecorationColor=tr(t,yI,(s=i.textDecorationColor)!==null&&s!==void 0?s:i.color),this.textDecorationLine=tr(t,vI,(l=i.textDecorationLine)!==null&&l!==void 0?l:i.textDecoration),this.textShadow=tr(t,aI,i.textShadow),this.textTransform=tr(t,oI,i.textTransform),this.transform=tr(t,AI,i.transform),this.transformOrigin=tr(t,dI,i.transformOrigin),this.visibility=tr(t,pI,i.visibility),this.webkitTextStrokeColor=tr(t,PI,i.webkitTextStrokeColor),this.webkitTextStrokeWidth=tr(t,LI,i.webkitTextStrokeWidth),this.wordBreak=tr(t,fI,i.wordBreak),this.zIndex=tr(t,gI,i.zIndex)}return n.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},n.prototype.isTransparent=function(){return Ql(this.backgroundColor)},n.prototype.isTransformed=function(){return this.transform!==null},n.prototype.isPositioned=function(){return this.position!==0},n.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},n.prototype.isFloating=function(){return this.float!==0},n.prototype.isInlineLevel=function(){return Pn(this.display,4)||Pn(this.display,33554432)||Pn(this.display,268435456)||Pn(this.display,536870912)||Pn(this.display,67108864)||Pn(this.display,134217728)},n}(),MI=function(){function n(t,i){this.content=tr(t,CI,i.content),this.quotes=tr(t,EI,i.quotes)}return n}(),Nw=function(){function n(t,i){this.counterIncrement=tr(t,FI,i.counterIncrement),this.counterReset=tr(t,SI,i.counterReset)}return n}(),tr=function(n,t,i){var s=new cw,l=i!==null&&typeof i<"u"?i.toString():t.initialValue;s.write(l);var h=new uw(s.read());switch(t.type){case 2:var p=h.parseComponentValue();return t.parse(n,Ci(p)?p.value:t.initialValue);case 0:return t.parse(n,h.parseComponentValue());case 1:return t.parse(n,h.parseComponentValues());case 4:return h.parseComponentValue();case 3:switch(t.format){case"angle":return hp.parse(n,h.parseComponentValue());case"color":return Ll.parse(n,h.parseComponentValue());case"image":return sm.parse(n,h.parseComponentValue());case"length":var o=h.parseComponentValue();return Ul(o)?o:Jn;case"length-percentage":var v=h.parseComponentValue();return Cn(v)?v:Jn;case"time":return kw.parse(n,h.parseComponentValue())}break}},kI="data-html2canvas-debug",DI=function(n){var t=n.getAttribute(kI);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},om=function(n,t){var i=DI(n);return i===1||t===i},lA=function(){function n(t,i){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,om(i,3))debugger;this.styles=new QI(t,window.getComputedStyle(i,null)),wm(i)&&(this.styles.animationDuration.some(function(s){return s>0})&&(i.style.animationDuration="0s"),this.styles.transform!==null&&(i.style.transform="none")),this.bounds=$d(this.context,i),om(i,4)&&(this.flags|=16)}return n}(),NI="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Ow="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Qh=typeof Uint8Array>"u"?[]:new Uint8Array(256),xp=0;xp<Ow.length;xp++)Qh[Ow.charCodeAt(xp)]=xp;for(var OI=function(n){var t=n.length*.75,i=n.length,s,l=0,h,p,o,v;n[n.length-1]==="="&&(t--,n[n.length-2]==="="&&t--);var C=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),I=Array.isArray(C)?C:new Uint8Array(C);for(s=0;s<i;s+=4)h=Qh[n.charCodeAt(s)],p=Qh[n.charCodeAt(s+1)],o=Qh[n.charCodeAt(s+2)],v=Qh[n.charCodeAt(s+3)],I[l++]=h<<2|p>>4,I[l++]=(p&15)<<4|o>>2,I[l++]=(o&3)<<6|v&63;return C},RI=function(n){for(var t=n.length,i=[],s=0;s<t;s+=2)i.push(n[s+1]<<8|n[s]);return i},zI=function(n){for(var t=n.length,i=[],s=0;s<t;s+=4)i.push(n[s+3]<<24|n[s+2]<<16|n[s+1]<<8|n[s]);return i},vc=5,Am=11,lm=2,HI=Am-vc,Rw=65536>>vc,VI=1<<vc,cm=VI-1,jI=1024>>vc,KI=Rw+jI,$I=KI,qI=32,GI=$I+qI,WI=65536>>Am,XI=1<<HI,ZI=XI-1,zw=function(n,t,i){return n.slice?n.slice(t,i):new Uint16Array(Array.prototype.slice.call(n,t,i))},YI=function(n,t,i){return n.slice?n.slice(t,i):new Uint32Array(Array.prototype.slice.call(n,t,i))},JI=function(n,t){var i=OI(n),s=Array.isArray(i)?zI(i):new Uint32Array(i),l=Array.isArray(i)?RI(i):new Uint16Array(i),h=24,p=zw(l,h/2,s[4]/2),o=s[5]===2?zw(l,(h+s[4])/2):YI(s,Math.ceil((h+s[4])/4));return new tE(s[0],s[1],s[2],s[3],p,o)},tE=function(){function n(t,i,s,l,h,p){this.initialValue=t,this.errorValue=i,this.highStart=s,this.highValueIndex=l,this.index=h,this.data=p}return n.prototype.get=function(t){var i;if(t>=0){if(t<55296||t>56319&&t<=65535)return i=this.index[t>>vc],i=(i<<lm)+(t&cm),this.data[i];if(t<=65535)return i=this.index[Rw+(t-55296>>vc)],i=(i<<lm)+(t&cm),this.data[i];if(t<this.highStart)return i=GI-WI+(t>>Am),i=this.index[i],i+=t>>vc&ZI,i=this.index[i],i=(i<<lm)+(t&cm),this.data[i];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),Hw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",eE=typeof Uint8Array>"u"?[]:new Uint8Array(256),Bp=0;Bp<Hw.length;Bp++)eE[Hw.charCodeAt(Bp)]=Bp;var rE=1,um=2,hm=3,Vw=4,jw=5,iE=7,Kw=8,dm=9,pm=10,$w=11,qw=12,Gw=13,Ww=14,fm=15,nE=function(n){for(var t=[],i=0,s=n.length;i<s;){var l=n.charCodeAt(i++);if(l>=55296&&l<=56319&&i<s){var h=n.charCodeAt(i++);(h&64512)===56320?t.push(((l&1023)<<10)+(h&1023)+65536):(t.push(l),i--)}else t.push(l)}return t},sE=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var i=n.length;if(!i)return"";for(var s=[],l=-1,h="";++l<i;){var p=n[l];p<=65535?s.push(p):(p-=65536,s.push((p>>10)+55296,p%1024+56320)),(l+1===i||s.length>16384)&&(h+=String.fromCharCode.apply(String,s),s.length=0)}return h},aE=JI(NI),wc="×",Xw="÷",oE=function(n){return aE.get(n)},AE=function(n,t,i){var s=i-2,l=t[s],h=t[i-1],p=t[i];if(h===um&&p===hm)return wc;if(h===um||h===hm||h===Vw||p===um||p===hm||p===Vw)return Xw;if(h===Kw&&[Kw,dm,$w,qw].indexOf(p)!==-1||(h===$w||h===dm)&&(p===dm||p===pm)||(h===qw||h===pm)&&p===pm||p===Gw||p===jw||p===iE||h===rE)return wc;if(h===Gw&&p===Ww){for(;l===jw;)l=t[--s];if(l===Ww)return wc}if(h===fm&&p===fm){for(var o=0;l===fm;)o++,l=t[--s];if(o%2===0)return wc}return Xw},lE=function(n){var t=nE(n),i=t.length,s=0,l=0,h=t.map(oE);return{next:function(){if(s>=i)return{done:!0,value:null};for(var p=wc;s<i&&(p=AE(t,h,++s))===wc;);if(p!==wc||s===i){var o=sE.apply(null,t.slice(l,s));return l=s,{value:o,done:!1}}return{done:!0,value:null}}}},cE=function(n){for(var t=lE(n),i=[],s;!(s=t.next()).done;)s.value&&i.push(s.value.slice());return i},uE=function(n){var t=123;if(n.createRange){var i=n.createRange();if(i.getBoundingClientRect){var s=n.createElement("boundtest");s.style.height=t+"px",s.style.display="block",n.body.appendChild(s),i.selectNode(s);var l=i.getBoundingClientRect(),h=Math.round(l.height);if(n.body.removeChild(s),h===t)return!0}}return!1},hE=function(n){var t=n.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",n.body.appendChild(t);var i=n.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var s=t.firstChild,l=qd(s.data).map(function(v){return gn(v)}),h=0,p={},o=l.every(function(v,C){i.setStart(s,h),i.setEnd(s,h+v.length);var I=i.getBoundingClientRect();h+=v.length;var U=I.x>p.x||I.y>p.y;return p=I,C===0?!0:U});return n.body.removeChild(t),o},dE=function(){return typeof new Image().crossOrigin<"u"},pE=function(){return typeof new XMLHttpRequest().responseType=="string"},fE=function(n){var t=new Image,i=n.createElement("canvas"),s=i.getContext("2d");if(!s)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{s.drawImage(t,0,0),i.toDataURL()}catch{return!1}return!0},Zw=function(n){return n[0]===0&&n[1]===255&&n[2]===0&&n[3]===255},gE=function(n){var t=n.createElement("canvas"),i=100;t.width=i,t.height=i;var s=t.getContext("2d");if(!s)return Promise.reject(!1);s.fillStyle="rgb(0, 255, 0)",s.fillRect(0,0,i,i);var l=new Image,h=t.toDataURL();l.src=h;var p=gm(i,i,0,0,l);return s.fillStyle="red",s.fillRect(0,0,i,i),Yw(p).then(function(o){s.drawImage(o,0,0);var v=s.getImageData(0,0,i,i).data;s.fillStyle="red",s.fillRect(0,0,i,i);var C=n.createElement("div");return C.style.backgroundImage="url("+h+")",C.style.height=i+"px",Zw(v)?Yw(gm(i,i,0,0,C)):Promise.reject(!1)}).then(function(o){return s.drawImage(o,0,0),Zw(s.getImageData(0,0,i,i).data)}).catch(function(){return!1})},gm=function(n,t,i,s,l){var h="http://www.w3.org/2000/svg",p=document.createElementNS(h,"svg"),o=document.createElementNS(h,"foreignObject");return p.setAttributeNS(null,"width",n.toString()),p.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",i.toString()),o.setAttributeNS(null,"y",s.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),p.appendChild(o),o.appendChild(l),p},Yw=function(n){return new Promise(function(t,i){var s=new Image;s.onload=function(){return t(s)},s.onerror=i,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(n))})},ts={get SUPPORT_RANGE_BOUNDS(){var n=uE(document);return Object.defineProperty(ts,"SUPPORT_RANGE_BOUNDS",{value:n}),n},get SUPPORT_WORD_BREAKING(){var n=ts.SUPPORT_RANGE_BOUNDS&&hE(document);return Object.defineProperty(ts,"SUPPORT_WORD_BREAKING",{value:n}),n},get SUPPORT_SVG_DRAWING(){var n=fE(document);return Object.defineProperty(ts,"SUPPORT_SVG_DRAWING",{value:n}),n},get SUPPORT_FOREIGNOBJECT_DRAWING(){var n=typeof Array.from=="function"&&typeof window.fetch=="function"?gE(document):Promise.resolve(!1);return Object.defineProperty(ts,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:n}),n},get SUPPORT_CORS_IMAGES(){var n=dE();return Object.defineProperty(ts,"SUPPORT_CORS_IMAGES",{value:n}),n},get SUPPORT_RESPONSE_TYPE(){var n=pE();return Object.defineProperty(ts,"SUPPORT_RESPONSE_TYPE",{value:n}),n},get SUPPORT_CORS_XHR(){var n="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ts,"SUPPORT_CORS_XHR",{value:n}),n},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var n=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ts,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:n}),n}},Mh=function(){function n(t,i){this.text=t,this.bounds=i}return n}(),mE=function(n,t,i,s){var l=wE(t,i),h=[],p=0;return l.forEach(function(o){if(i.textDecorationLine.length||o.trim().length>0)if(ts.SUPPORT_RANGE_BOUNDS){var v=Jw(s,p,o.length).getClientRects();if(v.length>1){var C=mm(o),I=0;C.forEach(function(Q){h.push(new Mh(Q,KA.fromDOMRectList(n,Jw(s,I+p,Q.length).getClientRects()))),I+=Q.length})}else h.push(new Mh(o,KA.fromDOMRectList(n,v)))}else{var U=s.splitText(o.length);h.push(new Mh(o,yE(n,s))),s=U}else ts.SUPPORT_RANGE_BOUNDS||(s=s.splitText(o.length));p+=o.length}),h},yE=function(n,t){var i=t.ownerDocument;if(i){var s=i.createElement("html2canvaswrapper");s.appendChild(t.cloneNode(!0));var l=t.parentNode;if(l){l.replaceChild(s,t);var h=$d(n,s);return s.firstChild&&l.replaceChild(s.firstChild,s),h}}return KA.EMPTY},Jw=function(n,t,i){var s=n.ownerDocument;if(!s)throw new Error("Node has no owner document");var l=s.createRange();return l.setStart(n,t),l.setEnd(n,t+i),l},mm=function(n){if(ts.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(n)).map(function(i){return i.segment})}return cE(n)},vE=function(n,t){if(ts.SUPPORT_NATIVE_TEXT_SEGMENTATION){var i=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(i.segment(n)).map(function(s){return s.segment})}return bE(n,t)},wE=function(n,t){return t.letterSpacing!==0?mm(n):vE(n,t)},_E=[32,160,4961,65792,65793,4153,4241],bE=function(n,t){for(var i=W3(n,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),s=[],l,h=function(){if(l.value){var p=l.value.slice(),o=qd(p),v="";o.forEach(function(C){_E.indexOf(C)===-1?v+=gn(C):(v.length&&s.push(v),s.push(gn(C)),v="")}),v.length&&s.push(v)}};!(l=i.next()).done;)h();return s},xE=function(){function n(t,i,s){this.text=BE(i.data,s.textTransform),this.textBounds=mE(t,this.text,s,i)}return n}(),BE=function(n,t){switch(t){case 1:return n.toLowerCase();case 3:return n.replace(CE,FE);case 2:return n.toUpperCase();default:return n}},CE=/(^|\s|:|-|\(|\))([a-z])/g,FE=function(n,t,i){return n.length>0?t+i.toUpperCase():n},t2=function(n){Eo(t,n);function t(i,s){var l=n.call(this,i,s)||this;return l.src=s.currentSrc||s.src,l.intrinsicWidth=s.naturalWidth,l.intrinsicHeight=s.naturalHeight,l.context.cache.addImage(l.src),l}return t}(lA),e2=function(n){Eo(t,n);function t(i,s){var l=n.call(this,i,s)||this;return l.canvas=s,l.intrinsicWidth=s.width,l.intrinsicHeight=s.height,l}return t}(lA),r2=function(n){Eo(t,n);function t(i,s){var l=n.call(this,i,s)||this,h=new XMLSerializer,p=$d(i,s);return s.setAttribute("width",p.width+"px"),s.setAttribute("height",p.height+"px"),l.svg="data:image/svg+xml,"+encodeURIComponent(h.serializeToString(s)),l.intrinsicWidth=s.width.baseVal.value,l.intrinsicHeight=s.height.baseVal.value,l.context.cache.addImage(l.svg),l}return t}(lA),i2=function(n){Eo(t,n);function t(i,s){var l=n.call(this,i,s)||this;return l.value=s.value,l}return t}(lA),ym=function(n){Eo(t,n);function t(i,s){var l=n.call(this,i,s)||this;return l.start=s.start,l.reversed=typeof s.reversed=="boolean"&&s.reversed===!0,l}return t}(lA),SE=[{type:15,flags:0,unit:"px",number:3}],IE=[{type:16,flags:0,number:50}],EE=function(n){return n.width>n.height?new KA(n.left+(n.width-n.height)/2,n.top,n.height,n.height):n.width<n.height?new KA(n.left,n.top+(n.height-n.width)/2,n.width,n.width):n},TE=function(n){var t=n.type===UE?new Array(n.value.length+1).join("•"):n.value;return t.length===0?n.placeholder||"":t},Cp="checkbox",Fp="radio",UE="password",n2=707406591,vm=function(n){Eo(t,n);function t(i,s){var l=n.call(this,i,s)||this;switch(l.type=s.type.toLowerCase(),l.checked=s.checked,l.value=TE(s),(l.type===Cp||l.type===Fp)&&(l.styles.backgroundColor=3739148031,l.styles.borderTopColor=l.styles.borderRightColor=l.styles.borderBottomColor=l.styles.borderLeftColor=2779096575,l.styles.borderTopWidth=l.styles.borderRightWidth=l.styles.borderBottomWidth=l.styles.borderLeftWidth=1,l.styles.borderTopStyle=l.styles.borderRightStyle=l.styles.borderBottomStyle=l.styles.borderLeftStyle=1,l.styles.backgroundClip=[0],l.styles.backgroundOrigin=[0],l.bounds=EE(l.bounds)),l.type){case Cp:l.styles.borderTopRightRadius=l.styles.borderTopLeftRadius=l.styles.borderBottomRightRadius=l.styles.borderBottomLeftRadius=SE;break;case Fp:l.styles.borderTopRightRadius=l.styles.borderTopLeftRadius=l.styles.borderBottomRightRadius=l.styles.borderBottomLeftRadius=IE;break}return l}return t}(lA),s2=function(n){Eo(t,n);function t(i,s){var l=n.call(this,i,s)||this,h=s.options[s.selectedIndex||0];return l.value=h&&h.text||"",l}return t}(lA),a2=function(n){Eo(t,n);function t(i,s){var l=n.call(this,i,s)||this;return l.value=s.value,l}return t}(lA),o2=function(n){Eo(t,n);function t(i,s){var l=n.call(this,i,s)||this;l.src=s.src,l.width=parseInt(s.width,10)||0,l.height=parseInt(s.height,10)||0,l.backgroundColor=l.styles.backgroundColor;try{if(s.contentWindow&&s.contentWindow.document&&s.contentWindow.document.documentElement){l.tree=l2(i,s.contentWindow.document.documentElement);var h=s.contentWindow.document.documentElement?Ph(i,getComputedStyle(s.contentWindow.document.documentElement).backgroundColor):qA.TRANSPARENT,p=s.contentWindow.document.body?Ph(i,getComputedStyle(s.contentWindow.document.body).backgroundColor):qA.TRANSPARENT;l.backgroundColor=Ql(h)?Ql(p)?l.styles.backgroundColor:p:h}}catch{}return l}return t}(lA),PE=["OL","UL","MENU"],Sp=function(n,t,i,s){for(var l=t.firstChild,h=void 0;l;l=h)if(h=l.nextSibling,c2(l)&&l.data.trim().length>0)i.textNodes.push(new xE(n,l,i.styles));else if(bu(l))if(g2(l)&&l.assignedNodes)l.assignedNodes().forEach(function(o){return Sp(n,o,i,s)});else{var p=A2(n,l);p.styles.isVisible()&&(LE(l,p,s)?p.flags|=4:QE(p.styles)&&(p.flags|=2),PE.indexOf(l.tagName)!==-1&&(p.flags|=8),i.elements.push(p),l.slot,l.shadowRoot?Sp(n,l.shadowRoot,p,s):!Ep(l)&&!u2(l)&&!Tp(l)&&Sp(n,l,p,s))}},A2=function(n,t){return bm(t)?new t2(n,t):h2(t)?new e2(n,t):u2(t)?new r2(n,t):ME(t)?new i2(n,t):kE(t)?new ym(n,t):DE(t)?new vm(n,t):Tp(t)?new s2(n,t):Ep(t)?new a2(n,t):p2(t)?new o2(n,t):new lA(n,t)},l2=function(n,t){var i=A2(n,t);return i.flags|=4,Sp(n,t,i,i),i},LE=function(n,t,i){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||_m(n)&&i.styles.isTransparent()},QE=function(n){return n.isPositioned()||n.isFloating()},c2=function(n){return n.nodeType===Node.TEXT_NODE},bu=function(n){return n.nodeType===Node.ELEMENT_NODE},wm=function(n){return bu(n)&&typeof n.style<"u"&&!Ip(n)},Ip=function(n){return typeof n.className=="object"},ME=function(n){return n.tagName==="LI"},kE=function(n){return n.tagName==="OL"},DE=function(n){return n.tagName==="INPUT"},NE=function(n){return n.tagName==="HTML"},u2=function(n){return n.tagName==="svg"},_m=function(n){return n.tagName==="BODY"},h2=function(n){return n.tagName==="CANVAS"},d2=function(n){return n.tagName==="VIDEO"},bm=function(n){return n.tagName==="IMG"},p2=function(n){return n.tagName==="IFRAME"},f2=function(n){return n.tagName==="STYLE"},OE=function(n){return n.tagName==="SCRIPT"},Ep=function(n){return n.tagName==="TEXTAREA"},Tp=function(n){return n.tagName==="SELECT"},g2=function(n){return n.tagName==="SLOT"},m2=function(n){return n.tagName.indexOf("-")>0},RE=function(){function n(){this.counters={}}return n.prototype.getCounterValue=function(t){var i=this.counters[t];return i&&i.length?i[i.length-1]:1},n.prototype.getCounterValues=function(t){var i=this.counters[t];return i||[]},n.prototype.pop=function(t){var i=this;t.forEach(function(s){return i.counters[s].pop()})},n.prototype.parse=function(t){var i=this,s=t.counterIncrement,l=t.counterReset,h=!0;s!==null&&s.forEach(function(o){var v=i.counters[o.counter];v&&o.increment!==0&&(h=!1,v.length||v.push(1),v[Math.max(0,v.length-1)]+=o.increment)});var p=[];return h&&l.forEach(function(o){var v=i.counters[o.counter];p.push(o.counter),v||(v=i.counters[o.counter]=[]),v.push(o.reset)}),p},n}(),y2={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},v2={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},zE={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},HE={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},xu=function(n,t,i,s,l,h){return n<t||n>i?Dh(n,l,h.length>0):s.integers.reduce(function(p,o,v){for(;n>=o;)n-=o,p+=s.values[v];return p},"")+h},w2=function(n,t,i,s){var l="";do i||n--,l=s(n)+l,n/=t;while(n*t>=t);return l},mn=function(n,t,i,s,l){var h=i-t+1;return(n<0?"-":"")+(w2(Math.abs(n),h,s,function(p){return gn(Math.floor(p%h)+t)})+l)},_c=function(n,t,i){i===void 0&&(i=". ");var s=t.length;return w2(Math.abs(n),s,!1,function(l){return t[Math.floor(l%s)]})+i},Bu=1,kl=2,Dl=4,kh=8,GA=function(n,t,i,s,l,h){if(n<-9999||n>9999)return Dh(n,4,l.length>0);var p=Math.abs(n),o=l;if(p===0)return t[0]+o;for(var v=0;p>0&&v<=4;v++){var C=p%10;C===0&&Pn(h,Bu)&&o!==""?o=t[C]+o:C>1||C===1&&v===0||C===1&&v===1&&Pn(h,kl)||C===1&&v===1&&Pn(h,Dl)&&n>100||C===1&&v>1&&Pn(h,kh)?o=t[C]+(v>0?i[v-1]:"")+o:C===1&&v>0&&(o=i[v-1]+o),p=Math.floor(p/10)}return(n<0?s:"")+o},_2="十百千萬",b2="拾佰仟萬",x2="マイナス",xm="마이너스",Dh=function(n,t,i){var s=i?". ":"",l=i?"、":"",h=i?", ":"",p=i?" ":"";switch(t){case 0:return"•"+p;case 1:return"◦"+p;case 2:return"◾"+p;case 5:var o=mn(n,48,57,!0,s);return o.length<4?"0"+o:o;case 4:return _c(n,"〇一二三四五六七八九",l);case 6:return xu(n,1,3999,y2,3,s).toLowerCase();case 7:return xu(n,1,3999,y2,3,s);case 8:return mn(n,945,969,!1,s);case 9:return mn(n,97,122,!1,s);case 10:return mn(n,65,90,!1,s);case 11:return mn(n,1632,1641,!0,s);case 12:case 49:return xu(n,1,9999,v2,3,s);case 35:return xu(n,1,9999,v2,3,s).toLowerCase();case 13:return mn(n,2534,2543,!0,s);case 14:case 30:return mn(n,6112,6121,!0,s);case 15:return _c(n,"子丑寅卯辰巳午未申酉戌亥",l);case 16:return _c(n,"甲乙丙丁戊己庚辛壬癸",l);case 17:case 48:return GA(n,"零一二三四五六七八九",_2,"負",l,kl|Dl|kh);case 47:return GA(n,"零壹貳參肆伍陸柒捌玖",b2,"負",l,Bu|kl|Dl|kh);case 42:return GA(n,"零一二三四五六七八九",_2,"负",l,kl|Dl|kh);case 41:return GA(n,"零壹贰叁肆伍陆柒捌玖",b2,"负",l,Bu|kl|Dl|kh);case 26:return GA(n,"〇一二三四五六七八九","十百千万",x2,l,0);case 25:return GA(n,"零壱弐参四伍六七八九","拾百千万",x2,l,Bu|kl|Dl);case 31:return GA(n,"영일이삼사오육칠팔구","십백천만",xm,h,Bu|kl|Dl);case 33:return GA(n,"零一二三四五六七八九","十百千萬",xm,h,0);case 32:return GA(n,"零壹貳參四五六七八九","拾百千",xm,h,Bu|kl|Dl);case 18:return mn(n,2406,2415,!0,s);case 20:return xu(n,1,19999,HE,3,s);case 21:return mn(n,2790,2799,!0,s);case 22:return mn(n,2662,2671,!0,s);case 22:return xu(n,1,10999,zE,3,s);case 23:return _c(n,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return _c(n,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return mn(n,3302,3311,!0,s);case 28:return _c(n,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",l);case 29:return _c(n,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",l);case 34:return mn(n,3792,3801,!0,s);case 37:return mn(n,6160,6169,!0,s);case 38:return mn(n,4160,4169,!0,s);case 39:return mn(n,2918,2927,!0,s);case 40:return mn(n,1776,1785,!0,s);case 43:return mn(n,3046,3055,!0,s);case 44:return mn(n,3174,3183,!0,s);case 45:return mn(n,3664,3673,!0,s);case 46:return mn(n,3872,3881,!0,s);case 3:default:return mn(n,48,57,!0,s)}},B2="data-html2canvas-ignore",C2=function(){function n(t,i,s){if(this.context=t,this.options=s,this.scrolledElements=[],this.referenceElement=i,this.counters=new RE,this.quoteDepth=0,!i.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(i.ownerDocument.documentElement,!1)}return n.prototype.toIFrame=function(t,i){var s=this,l=VE(t,i);if(!l.contentWindow)return Promise.reject("Unable to find iframe window");var h=t.defaultView.pageXOffset,p=t.defaultView.pageYOffset,o=l.contentWindow,v=o.document,C=$E(l).then(function(){return Ms(s,void 0,void 0,function(){var I,U;return gs(this,function(Q){switch(Q.label){case 0:return this.scrolledElements.forEach(XE),o&&(o.scrollTo(i.left,i.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==i.top||o.scrollX!==i.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-i.left,o.scrollY-i.top,0,0))),I=this.options.onclone,U=this.clonedReferenceElement,typeof U>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:v.fonts&&v.fonts.ready?[4,v.fonts.ready]:[3,2];case 1:Q.sent(),Q.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,KE(v)]:[3,4];case 3:Q.sent(),Q.label=4;case 4:return typeof I=="function"?[2,Promise.resolve().then(function(){return I(v,U)}).then(function(){return l})]:[2,l]}})})});return v.open(),v.write(GE(document.doctype)+"<html></html>"),WE(this.referenceElement.ownerDocument,h,p),v.replaceChild(v.adoptNode(this.documentElement),v.documentElement),v.close(),C},n.prototype.createElementClone=function(t){if(om(t,2))debugger;if(h2(t))return this.createCanvasClone(t);if(d2(t))return this.createVideoClone(t);if(f2(t))return this.createStyleClone(t);var i=t.cloneNode(!1);return bm(i)&&(bm(t)&&t.currentSrc&&t.currentSrc!==t.src&&(i.src=t.currentSrc,i.srcset=""),i.loading==="lazy"&&(i.loading="eager")),m2(i)?this.createCustomElementClone(i):i},n.prototype.createCustomElementClone=function(t){var i=document.createElement("html2canvascustomelement");return Bm(t.style,i),i},n.prototype.createStyleClone=function(t){try{var i=t.sheet;if(i&&i.cssRules){var s=[].slice.call(i.cssRules,0).reduce(function(h,p){return p&&typeof p.cssText=="string"?h+p.cssText:h},""),l=t.cloneNode(!1);return l.textContent=s,l}}catch(h){if(this.context.logger.error("Unable to access cssRules property",h),h.name!=="SecurityError")throw h}return t.cloneNode(!1)},n.prototype.createCanvasClone=function(t){var i;if(this.options.inlineImages&&t.ownerDocument){var s=t.ownerDocument.createElement("img");try{return s.src=t.toDataURL(),s}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var l=t.cloneNode(!1);try{l.width=t.width,l.height=t.height;var h=t.getContext("2d"),p=l.getContext("2d");if(p)if(!this.options.allowTaint&&h)p.putImageData(h.getImageData(0,0,t.width,t.height),0,0);else{var o=(i=t.getContext("webgl2"))!==null&&i!==void 0?i:t.getContext("webgl");if(o){var v=o.getContextAttributes();(v==null?void 0:v.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}p.drawImage(t,0,0)}return l}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return l},n.prototype.createVideoClone=function(t){var i=t.ownerDocument.createElement("canvas");i.width=t.offsetWidth,i.height=t.offsetHeight;var s=i.getContext("2d");try{return s&&(s.drawImage(t,0,0,i.width,i.height),this.options.allowTaint||s.getImageData(0,0,i.width,i.height)),i}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var l=t.ownerDocument.createElement("canvas");return l.width=t.offsetWidth,l.height=t.offsetHeight,l},n.prototype.appendChildNode=function(t,i,s){(!bu(i)||!OE(i)&&!i.hasAttribute(B2)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(i)))&&(!this.options.copyStyles||!bu(i)||!f2(i))&&t.appendChild(this.cloneNode(i,s))},n.prototype.cloneChildNodes=function(t,i,s){for(var l=this,h=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;h;h=h.nextSibling)if(bu(h)&&g2(h)&&typeof h.assignedNodes=="function"){var p=h.assignedNodes();p.length&&p.forEach(function(o){return l.appendChildNode(i,o,s)})}else this.appendChildNode(i,h,s)},n.prototype.cloneNode=function(t,i){if(c2(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var s=t.ownerDocument.defaultView;if(s&&bu(t)&&(wm(t)||Ip(t))){var l=this.createElementClone(t);l.style.transitionProperty="none";var h=s.getComputedStyle(t),p=s.getComputedStyle(t,":before"),o=s.getComputedStyle(t,":after");this.referenceElement===t&&wm(l)&&(this.clonedReferenceElement=l),_m(l)&&JE(l);var v=this.counters.parse(new Nw(this.context,h)),C=this.resolvePseudoContent(t,l,p,Nh.BEFORE);m2(t)&&(i=!0),d2(t)||this.cloneChildNodes(t,l,i),C&&l.insertBefore(C,l.firstChild);var I=this.resolvePseudoContent(t,l,o,Nh.AFTER);return I&&l.appendChild(I),this.counters.pop(v),(h&&(this.options.copyStyles||Ip(t))&&!p2(t)||i)&&Bm(h,l),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([l,t.scrollLeft,t.scrollTop]),(Ep(t)||Tp(t))&&(Ep(l)||Tp(l))&&(l.value=t.value),l}return t.cloneNode(!1)},n.prototype.resolvePseudoContent=function(t,i,s,l){var h=this;if(s){var p=s.content,o=i.ownerDocument;if(!(!o||!p||p==="none"||p==="-moz-alt-content"||s.display==="none")){this.counters.parse(new Nw(this.context,s));var v=new MI(this.context,s),C=o.createElement("html2canvaspseudoelement");Bm(s,C),v.content.forEach(function(U){if(U.type===0)C.appendChild(o.createTextNode(U.value));else if(U.type===22){var Q=o.createElement("img");Q.src=U.value,Q.style.opacity="1",C.appendChild(Q)}else if(U.type===18){if(U.name==="attr"){var P=U.values.filter(Ci);P.length&&C.appendChild(o.createTextNode(t.getAttribute(P[0].value)||""))}else if(U.name==="counter"){var K=U.values.filter(wu),V=K[0],Y=K[1];if(V&&Ci(V)){var $=h.counters.getCounterValue(V.value),it=Y&&Ci(Y)?am.parse(h.context,Y.value):3;C.appendChild(o.createTextNode(Dh($,it,!1)))}}else if(U.name==="counters"){var ht=U.values.filter(wu),V=ht[0],St=ht[1],Y=ht[2];if(V&&Ci(V)){var Tt=h.counters.getCounterValues(V.value),Lt=Y&&Ci(Y)?am.parse(h.context,Y.value):3,Ft=St&&St.type===0?St.value:"",yt=Tt.map(function(At){return Dh(At,Lt,!1)}).join(Ft);C.appendChild(o.createTextNode(yt))}}}else if(U.type===20)switch(U.value){case"open-quote":C.appendChild(o.createTextNode(Dw(v.quotes,h.quoteDepth++,!0)));break;case"close-quote":C.appendChild(o.createTextNode(Dw(v.quotes,--h.quoteDepth,!1)));break;default:C.appendChild(o.createTextNode(U.value))}}),C.className=Cm+" "+Fm;var I=l===Nh.BEFORE?" "+Cm:" "+Fm;return Ip(i)?i.className.baseValue+=I:i.className+=I,C}}},n.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},n}(),Nh;(function(n){n[n.BEFORE=0]="BEFORE",n[n.AFTER=1]="AFTER"})(Nh||(Nh={}));var VE=function(n,t){var i=n.createElement("iframe");return i.className="html2canvas-container",i.style.visibility="hidden",i.style.position="fixed",i.style.left="-10000px",i.style.top="0px",i.style.border="0",i.width=t.width.toString(),i.height=t.height.toString(),i.scrolling="no",i.setAttribute(B2,"true"),n.body.appendChild(i),i},jE=function(n){return new Promise(function(t){if(n.complete){t();return}if(!n.src){t();return}n.onload=t,n.onerror=t})},KE=function(n){return Promise.all([].slice.call(n.images,0).map(jE))},$E=function(n){return new Promise(function(t,i){var s=n.contentWindow;if(!s)return i("No window assigned for iframe");var l=s.document;s.onload=n.onload=function(){s.onload=n.onload=null;var h=setInterval(function(){l.body.childNodes.length>0&&l.readyState==="complete"&&(clearInterval(h),t(n))},50)}})},qE=["all","d","content"],Bm=function(n,t){for(var i=n.length-1;i>=0;i--){var s=n.item(i);qE.indexOf(s)===-1&&t.style.setProperty(s,n.getPropertyValue(s))}return t},GE=function(n){var t="";return n&&(t+="<!DOCTYPE ",n.name&&(t+=n.name),n.internalSubset&&(t+=n.internalSubset),n.publicId&&(t+='"'+n.publicId+'"'),n.systemId&&(t+='"'+n.systemId+'"'),t+=">"),t},WE=function(n,t,i){n&&n.defaultView&&(t!==n.defaultView.pageXOffset||i!==n.defaultView.pageYOffset)&&n.defaultView.scrollTo(t,i)},XE=function(n){var t=n[0],i=n[1],s=n[2];t.scrollLeft=i,t.scrollTop=s},ZE=":before",YE=":after",Cm="___html2canvas___pseudoelement_before",Fm="___html2canvas___pseudoelement_after",F2=`{
    content: "" !important;
    display: none !important;
}`,JE=function(n){tT(n,"."+Cm+ZE+F2+`
         .`+Fm+YE+F2)},tT=function(n,t){var i=n.ownerDocument;if(i){var s=i.createElement("style");s.textContent=t,n.appendChild(s)}},S2=function(){function n(){}return n.getOrigin=function(t){var i=n._link;return i?(i.href=t,i.href=i.href,i.protocol+i.hostname+i.port):"about:blank"},n.isSameOrigin=function(t){return n.getOrigin(t)===n._origin},n.setContext=function(t){n._link=t.document.createElement("a"),n._origin=n.getOrigin(t.location.href)},n._origin="about:blank",n}(),eT=function(){function n(t,i){this.context=t,this._options=i,this._cache={}}return n.prototype.addImage=function(t){var i=Promise.resolve();return this.has(t)||(Im(t)||sT(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),i},n.prototype.match=function(t){return this._cache[t]},n.prototype.loadImage=function(t){return Ms(this,void 0,void 0,function(){var i,s,l,h,p=this;return gs(this,function(o){switch(o.label){case 0:return i=S2.isSameOrigin(t),s=!Sm(t)&&this._options.useCORS===!0&&ts.SUPPORT_CORS_IMAGES&&!i,l=!Sm(t)&&!i&&!Im(t)&&typeof this._options.proxy=="string"&&ts.SUPPORT_CORS_XHR&&!s,!i&&this._options.allowTaint===!1&&!Sm(t)&&!Im(t)&&!l&&!s?[2]:(h=t,l?[4,this.proxy(h)]:[3,2]);case 1:h=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(v,C){var I=new Image;I.onload=function(){return v(I)},I.onerror=C,(aT(h)||s)&&(I.crossOrigin="anonymous"),I.src=h,I.complete===!0&&setTimeout(function(){return v(I)},500),p._options.imageTimeout>0&&setTimeout(function(){return C("Timed out ("+p._options.imageTimeout+"ms) loading image")},p._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},n.prototype.has=function(t){return typeof this._cache[t]<"u"},n.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},n.prototype.proxy=function(t){var i=this,s=this._options.proxy;if(!s)throw new Error("No proxy defined");var l=t.substring(0,256);return new Promise(function(h,p){var o=ts.SUPPORT_RESPONSE_TYPE?"blob":"text",v=new XMLHttpRequest;v.onload=function(){if(v.status===200)if(o==="text")h(v.response);else{var U=new FileReader;U.addEventListener("load",function(){return h(U.result)},!1),U.addEventListener("error",function(Q){return p(Q)},!1),U.readAsDataURL(v.response)}else p("Failed to proxy resource "+l+" with status code "+v.status)},v.onerror=p;var C=s.indexOf("?")>-1?"&":"?";if(v.open("GET",""+s+C+"url="+encodeURIComponent(t)+"&responseType="+o),o!=="text"&&v instanceof XMLHttpRequest&&(v.responseType=o),i._options.imageTimeout){var I=i._options.imageTimeout;v.timeout=I,v.ontimeout=function(){return p("Timed out ("+I+"ms) proxying "+l)}}v.send()})},n}(),rT=/^data:image\/svg\+xml/i,iT=/^data:image\/.*;base64,/i,nT=/^data:image\/.*/i,sT=function(n){return ts.SUPPORT_SVG_DRAWING||!oT(n)},Sm=function(n){return nT.test(n)},aT=function(n){return iT.test(n)},Im=function(n){return n.substr(0,4)==="blob"},oT=function(n){return n.substr(-3).toLowerCase()==="svg"||rT.test(n)},We=function(){function n(t,i){this.type=0,this.x=t,this.y=i}return n.prototype.add=function(t,i){return new n(this.x+t,this.y+i)},n}(),Cu=function(n,t,i){return new We(n.x+(t.x-n.x)*i,n.y+(t.y-n.y)*i)},Up=function(){function n(t,i,s,l){this.type=1,this.start=t,this.startControl=i,this.endControl=s,this.end=l}return n.prototype.subdivide=function(t,i){var s=Cu(this.start,this.startControl,t),l=Cu(this.startControl,this.endControl,t),h=Cu(this.endControl,this.end,t),p=Cu(s,l,t),o=Cu(l,h,t),v=Cu(p,o,t);return i?new n(this.start,s,p,v):new n(v,o,h,this.end)},n.prototype.add=function(t,i){return new n(this.start.add(t,i),this.startControl.add(t,i),this.endControl.add(t,i),this.end.add(t,i))},n.prototype.reverse=function(){return new n(this.end,this.endControl,this.startControl,this.start)},n}(),qa=function(n){return n.type===1},AT=function(){function n(t){var i=t.styles,s=t.bounds,l=Uh(i.borderTopLeftRadius,s.width,s.height),h=l[0],p=l[1],o=Uh(i.borderTopRightRadius,s.width,s.height),v=o[0],C=o[1],I=Uh(i.borderBottomRightRadius,s.width,s.height),U=I[0],Q=I[1],P=Uh(i.borderBottomLeftRadius,s.width,s.height),K=P[0],V=P[1],Y=[];Y.push((h+v)/s.width),Y.push((K+U)/s.width),Y.push((p+V)/s.height),Y.push((C+Q)/s.height);var $=Math.max.apply(Math,Y);$>1&&(h/=$,p/=$,v/=$,C/=$,U/=$,Q/=$,K/=$,V/=$);var it=s.width-v,ht=s.height-Q,St=s.width-U,Tt=s.height-V,Lt=i.borderTopWidth,Ft=i.borderRightWidth,yt=i.borderBottomWidth,Rt=i.borderLeftWidth,Wt=Qi(i.paddingTop,t.bounds.width),At=Qi(i.paddingRight,t.bounds.width),lt=Qi(i.paddingBottom,t.bounds.width),bt=Qi(i.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=h>0||p>0?ji(s.left+Rt/3,s.top+Lt/3,h-Rt/3,p-Lt/3,di.TOP_LEFT):new We(s.left+Rt/3,s.top+Lt/3),this.topRightBorderDoubleOuterBox=h>0||p>0?ji(s.left+it,s.top+Lt/3,v-Ft/3,C-Lt/3,di.TOP_RIGHT):new We(s.left+s.width-Ft/3,s.top+Lt/3),this.bottomRightBorderDoubleOuterBox=U>0||Q>0?ji(s.left+St,s.top+ht,U-Ft/3,Q-yt/3,di.BOTTOM_RIGHT):new We(s.left+s.width-Ft/3,s.top+s.height-yt/3),this.bottomLeftBorderDoubleOuterBox=K>0||V>0?ji(s.left+Rt/3,s.top+Tt,K-Rt/3,V-yt/3,di.BOTTOM_LEFT):new We(s.left+Rt/3,s.top+s.height-yt/3),this.topLeftBorderDoubleInnerBox=h>0||p>0?ji(s.left+Rt*2/3,s.top+Lt*2/3,h-Rt*2/3,p-Lt*2/3,di.TOP_LEFT):new We(s.left+Rt*2/3,s.top+Lt*2/3),this.topRightBorderDoubleInnerBox=h>0||p>0?ji(s.left+it,s.top+Lt*2/3,v-Ft*2/3,C-Lt*2/3,di.TOP_RIGHT):new We(s.left+s.width-Ft*2/3,s.top+Lt*2/3),this.bottomRightBorderDoubleInnerBox=U>0||Q>0?ji(s.left+St,s.top+ht,U-Ft*2/3,Q-yt*2/3,di.BOTTOM_RIGHT):new We(s.left+s.width-Ft*2/3,s.top+s.height-yt*2/3),this.bottomLeftBorderDoubleInnerBox=K>0||V>0?ji(s.left+Rt*2/3,s.top+Tt,K-Rt*2/3,V-yt*2/3,di.BOTTOM_LEFT):new We(s.left+Rt*2/3,s.top+s.height-yt*2/3),this.topLeftBorderStroke=h>0||p>0?ji(s.left+Rt/2,s.top+Lt/2,h-Rt/2,p-Lt/2,di.TOP_LEFT):new We(s.left+Rt/2,s.top+Lt/2),this.topRightBorderStroke=h>0||p>0?ji(s.left+it,s.top+Lt/2,v-Ft/2,C-Lt/2,di.TOP_RIGHT):new We(s.left+s.width-Ft/2,s.top+Lt/2),this.bottomRightBorderStroke=U>0||Q>0?ji(s.left+St,s.top+ht,U-Ft/2,Q-yt/2,di.BOTTOM_RIGHT):new We(s.left+s.width-Ft/2,s.top+s.height-yt/2),this.bottomLeftBorderStroke=K>0||V>0?ji(s.left+Rt/2,s.top+Tt,K-Rt/2,V-yt/2,di.BOTTOM_LEFT):new We(s.left+Rt/2,s.top+s.height-yt/2),this.topLeftBorderBox=h>0||p>0?ji(s.left,s.top,h,p,di.TOP_LEFT):new We(s.left,s.top),this.topRightBorderBox=v>0||C>0?ji(s.left+it,s.top,v,C,di.TOP_RIGHT):new We(s.left+s.width,s.top),this.bottomRightBorderBox=U>0||Q>0?ji(s.left+St,s.top+ht,U,Q,di.BOTTOM_RIGHT):new We(s.left+s.width,s.top+s.height),this.bottomLeftBorderBox=K>0||V>0?ji(s.left,s.top+Tt,K,V,di.BOTTOM_LEFT):new We(s.left,s.top+s.height),this.topLeftPaddingBox=h>0||p>0?ji(s.left+Rt,s.top+Lt,Math.max(0,h-Rt),Math.max(0,p-Lt),di.TOP_LEFT):new We(s.left+Rt,s.top+Lt),this.topRightPaddingBox=v>0||C>0?ji(s.left+Math.min(it,s.width-Ft),s.top+Lt,it>s.width+Ft?0:Math.max(0,v-Ft),Math.max(0,C-Lt),di.TOP_RIGHT):new We(s.left+s.width-Ft,s.top+Lt),this.bottomRightPaddingBox=U>0||Q>0?ji(s.left+Math.min(St,s.width-Rt),s.top+Math.min(ht,s.height-yt),Math.max(0,U-Ft),Math.max(0,Q-yt),di.BOTTOM_RIGHT):new We(s.left+s.width-Ft,s.top+s.height-yt),this.bottomLeftPaddingBox=K>0||V>0?ji(s.left+Rt,s.top+Math.min(Tt,s.height-yt),Math.max(0,K-Rt),Math.max(0,V-yt),di.BOTTOM_LEFT):new We(s.left+Rt,s.top+s.height-yt),this.topLeftContentBox=h>0||p>0?ji(s.left+Rt+bt,s.top+Lt+Wt,Math.max(0,h-(Rt+bt)),Math.max(0,p-(Lt+Wt)),di.TOP_LEFT):new We(s.left+Rt+bt,s.top+Lt+Wt),this.topRightContentBox=v>0||C>0?ji(s.left+Math.min(it,s.width+Rt+bt),s.top+Lt+Wt,it>s.width+Rt+bt?0:v-Rt+bt,C-(Lt+Wt),di.TOP_RIGHT):new We(s.left+s.width-(Ft+At),s.top+Lt+Wt),this.bottomRightContentBox=U>0||Q>0?ji(s.left+Math.min(St,s.width-(Rt+bt)),s.top+Math.min(ht,s.height+Lt+Wt),Math.max(0,U-(Ft+At)),Q-(yt+lt),di.BOTTOM_RIGHT):new We(s.left+s.width-(Ft+At),s.top+s.height-(yt+lt)),this.bottomLeftContentBox=K>0||V>0?ji(s.left+Rt+bt,s.top+Tt,Math.max(0,K-(Rt+bt)),V-(yt+lt),di.BOTTOM_LEFT):new We(s.left+Rt+bt,s.top+s.height-(yt+lt))}return n}(),di;(function(n){n[n.TOP_LEFT=0]="TOP_LEFT",n[n.TOP_RIGHT=1]="TOP_RIGHT",n[n.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",n[n.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(di||(di={}));var ji=function(n,t,i,s,l){var h=4*((Math.sqrt(2)-1)/3),p=i*h,o=s*h,v=n+i,C=t+s;switch(l){case di.TOP_LEFT:return new Up(new We(n,C),new We(n,C-o),new We(v-p,t),new We(v,t));case di.TOP_RIGHT:return new Up(new We(n,t),new We(n+p,t),new We(v,C-o),new We(v,C));case di.BOTTOM_RIGHT:return new Up(new We(v,t),new We(v,t+o),new We(n+p,C),new We(n,C));case di.BOTTOM_LEFT:default:return new Up(new We(v,C),new We(v-p,C),new We(n,t+o),new We(n,t))}},Pp=function(n){return[n.topLeftBorderBox,n.topRightBorderBox,n.bottomRightBorderBox,n.bottomLeftBorderBox]},lT=function(n){return[n.topLeftContentBox,n.topRightContentBox,n.bottomRightContentBox,n.bottomLeftContentBox]},Lp=function(n){return[n.topLeftPaddingBox,n.topRightPaddingBox,n.bottomRightPaddingBox,n.bottomLeftPaddingBox]},cT=function(){function n(t,i,s){this.offsetX=t,this.offsetY=i,this.matrix=s,this.type=0,this.target=6}return n}(),Qp=function(){function n(t,i){this.path=t,this.target=i,this.type=1}return n}(),uT=function(){function n(t){this.opacity=t,this.type=2,this.target=6}return n}(),hT=function(n){return n.type===0},I2=function(n){return n.type===1},dT=function(n){return n.type===2},E2=function(n,t){return n.length===t.length?n.some(function(i,s){return i===t[s]}):!1},pT=function(n,t,i,s,l){return n.map(function(h,p){switch(p){case 0:return h.add(t,i);case 1:return h.add(t+s,i);case 2:return h.add(t+s,i+l);case 3:return h.add(t,i+l)}return h})},T2=function(){function n(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return n}(),U2=function(){function n(t,i){if(this.container=t,this.parent=i,this.effects=[],this.curves=new AT(this.container),this.container.styles.opacity<1&&this.effects.push(new uT(this.container.styles.opacity)),this.container.styles.transform!==null){var s=this.container.bounds.left+this.container.styles.transformOrigin[0].number,l=this.container.bounds.top+this.container.styles.transformOrigin[1].number,h=this.container.styles.transform;this.effects.push(new cT(s,l,h))}if(this.container.styles.overflowX!==0){var p=Pp(this.curves),o=Lp(this.curves);E2(p,o)?this.effects.push(new Qp(p,6)):(this.effects.push(new Qp(p,2)),this.effects.push(new Qp(o,4)))}}return n.prototype.getEffects=function(t){for(var i=[2,3].indexOf(this.container.styles.position)===-1,s=this.parent,l=this.effects.slice(0);s;){var h=s.effects.filter(function(v){return!I2(v)});if(i||s.container.styles.position!==0||!s.parent){if(l.unshift.apply(l,h),i=[2,3].indexOf(s.container.styles.position)===-1,s.container.styles.overflowX!==0){var p=Pp(s.curves),o=Lp(s.curves);E2(p,o)||l.unshift(new Qp(o,6))}}else l.unshift.apply(l,h);s=s.parent}return l.filter(function(v){return Pn(v.target,t)})},n}(),Em=function(n,t,i,s){n.container.elements.forEach(function(l){var h=Pn(l.flags,4),p=Pn(l.flags,2),o=new U2(l,n);Pn(l.styles.display,2048)&&s.push(o);var v=Pn(l.flags,8)?[]:s;if(h||p){var C=h||l.styles.isPositioned()?i:t,I=new T2(o);if(l.styles.isPositioned()||l.styles.opacity<1||l.styles.isTransformed()){var U=l.styles.zIndex.order;if(U<0){var Q=0;C.negativeZIndex.some(function(K,V){return U>K.element.container.styles.zIndex.order?(Q=V,!1):Q>0}),C.negativeZIndex.splice(Q,0,I)}else if(U>0){var P=0;C.positiveZIndex.some(function(K,V){return U>=K.element.container.styles.zIndex.order?(P=V+1,!1):P>0}),C.positiveZIndex.splice(P,0,I)}else C.zeroOrAutoZIndexOrTransformedOrOpacity.push(I)}else l.styles.isFloating()?C.nonPositionedFloats.push(I):C.nonPositionedInlineLevel.push(I);Em(o,I,h?I:i,v)}else l.styles.isInlineLevel()?t.inlineLevel.push(o):t.nonInlineLevel.push(o),Em(o,t,i,v);Pn(l.flags,8)&&P2(l,v)})},P2=function(n,t){for(var i=n instanceof ym?n.start:1,s=n instanceof ym?n.reversed:!1,l=0;l<t.length;l++){var h=t[l];h.container instanceof i2&&typeof h.container.value=="number"&&h.container.value!==0&&(i=h.container.value),h.listValue=Dh(i,h.container.styles.listStyleType,!0),i+=s?-1:1}},fT=function(n){var t=new U2(n,null),i=new T2(t),s=[];return Em(t,i,i,s),P2(t.container,s),i},L2=function(n,t){switch(t){case 0:return Ga(n.topLeftBorderBox,n.topLeftPaddingBox,n.topRightBorderBox,n.topRightPaddingBox);case 1:return Ga(n.topRightBorderBox,n.topRightPaddingBox,n.bottomRightBorderBox,n.bottomRightPaddingBox);case 2:return Ga(n.bottomRightBorderBox,n.bottomRightPaddingBox,n.bottomLeftBorderBox,n.bottomLeftPaddingBox);case 3:default:return Ga(n.bottomLeftBorderBox,n.bottomLeftPaddingBox,n.topLeftBorderBox,n.topLeftPaddingBox)}},gT=function(n,t){switch(t){case 0:return Ga(n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox,n.topRightBorderBox,n.topRightBorderDoubleOuterBox);case 1:return Ga(n.topRightBorderBox,n.topRightBorderDoubleOuterBox,n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox);case 2:return Ga(n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox,n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox);case 3:default:return Ga(n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox,n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox)}},mT=function(n,t){switch(t){case 0:return Ga(n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox,n.topRightBorderDoubleInnerBox,n.topRightPaddingBox);case 1:return Ga(n.topRightBorderDoubleInnerBox,n.topRightPaddingBox,n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox);case 2:return Ga(n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox,n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox);case 3:default:return Ga(n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox,n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox)}},yT=function(n,t){switch(t){case 0:return Mp(n.topLeftBorderStroke,n.topRightBorderStroke);case 1:return Mp(n.topRightBorderStroke,n.bottomRightBorderStroke);case 2:return Mp(n.bottomRightBorderStroke,n.bottomLeftBorderStroke);case 3:default:return Mp(n.bottomLeftBorderStroke,n.topLeftBorderStroke)}},Mp=function(n,t){var i=[];return qa(n)?i.push(n.subdivide(.5,!1)):i.push(n),qa(t)?i.push(t.subdivide(.5,!0)):i.push(t),i},Ga=function(n,t,i,s){var l=[];return qa(n)?l.push(n.subdivide(.5,!1)):l.push(n),qa(i)?l.push(i.subdivide(.5,!0)):l.push(i),qa(s)?l.push(s.subdivide(.5,!0).reverse()):l.push(s),qa(t)?l.push(t.subdivide(.5,!1).reverse()):l.push(t),l},Q2=function(n){var t=n.bounds,i=n.styles;return t.add(i.borderLeftWidth,i.borderTopWidth,-(i.borderRightWidth+i.borderLeftWidth),-(i.borderTopWidth+i.borderBottomWidth))},kp=function(n){var t=n.styles,i=n.bounds,s=Qi(t.paddingLeft,i.width),l=Qi(t.paddingRight,i.width),h=Qi(t.paddingTop,i.width),p=Qi(t.paddingBottom,i.width);return i.add(s+t.borderLeftWidth,h+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+s+l),-(t.borderTopWidth+t.borderBottomWidth+h+p))},vT=function(n,t){return n===0?t.bounds:n===2?kp(t):Q2(t)},wT=function(n,t){return n===0?t.bounds:n===2?kp(t):Q2(t)},Tm=function(n,t,i){var s=vT(Su(n.styles.backgroundOrigin,t),n),l=wT(Su(n.styles.backgroundClip,t),n),h=_T(Su(n.styles.backgroundSize,t),i,s),p=h[0],o=h[1],v=Uh(Su(n.styles.backgroundPosition,t),s.width-p,s.height-o),C=bT(Su(n.styles.backgroundRepeat,t),v,h,s,l),I=Math.round(s.left+v[0]),U=Math.round(s.top+v[1]);return[C,I,U,p,o]},Fu=function(n){return Ci(n)&&n.value===_u.AUTO},Dp=function(n){return typeof n=="number"},_T=function(n,t,i){var s=t[0],l=t[1],h=t[2],p=n[0],o=n[1];if(!p)return[0,0];if(Cn(p)&&o&&Cn(o))return[Qi(p,i.width),Qi(o,i.height)];var v=Dp(h);if(Ci(p)&&(p.value===_u.CONTAIN||p.value===_u.COVER)){if(Dp(h)){var C=i.width/i.height;return C<h!=(p.value===_u.COVER)?[i.width,i.width/h]:[i.height*h,i.height]}return[i.width,i.height]}var I=Dp(s),U=Dp(l),Q=I||U;if(Fu(p)&&(!o||Fu(o))){if(I&&U)return[s,l];if(!v&&!Q)return[i.width,i.height];if(Q&&v){var P=I?s:l*h,K=U?l:s/h;return[P,K]}var V=I?s:i.width,Y=U?l:i.height;return[V,Y]}if(v){var $=0,it=0;return Cn(p)?$=Qi(p,i.width):Cn(o)&&(it=Qi(o,i.height)),Fu(p)?$=it*h:(!o||Fu(o))&&(it=$/h),[$,it]}var ht=null,St=null;if(Cn(p)?ht=Qi(p,i.width):o&&Cn(o)&&(St=Qi(o,i.height)),ht!==null&&(!o||Fu(o))&&(St=I&&U?ht/s*l:i.height),St!==null&&Fu(p)&&(ht=I&&U?St/l*s:i.width),ht!==null&&St!==null)return[ht,St];throw new Error("Unable to calculate background-size for element")},Su=function(n,t){var i=n[t];return typeof i>"u"?n[0]:i},bT=function(n,t,i,s,l){var h=t[0],p=t[1],o=i[0],v=i[1];switch(n){case 2:return[new We(Math.round(s.left),Math.round(s.top+p)),new We(Math.round(s.left+s.width),Math.round(s.top+p)),new We(Math.round(s.left+s.width),Math.round(v+s.top+p)),new We(Math.round(s.left),Math.round(v+s.top+p))];case 3:return[new We(Math.round(s.left+h),Math.round(s.top)),new We(Math.round(s.left+h+o),Math.round(s.top)),new We(Math.round(s.left+h+o),Math.round(s.height+s.top)),new We(Math.round(s.left+h),Math.round(s.height+s.top))];case 1:return[new We(Math.round(s.left+h),Math.round(s.top+p)),new We(Math.round(s.left+h+o),Math.round(s.top+p)),new We(Math.round(s.left+h+o),Math.round(s.top+p+v)),new We(Math.round(s.left+h),Math.round(s.top+p+v))];default:return[new We(Math.round(l.left),Math.round(l.top)),new We(Math.round(l.left+l.width),Math.round(l.top)),new We(Math.round(l.left+l.width),Math.round(l.height+l.top)),new We(Math.round(l.left),Math.round(l.height+l.top))]}},xT="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",M2="Hidden Text",BT=function(){function n(t){this._data={},this._document=t}return n.prototype.parseMetrics=function(t,i){var s=this._document.createElement("div"),l=this._document.createElement("img"),h=this._document.createElement("span"),p=this._document.body;s.style.visibility="hidden",s.style.fontFamily=t,s.style.fontSize=i,s.style.margin="0",s.style.padding="0",s.style.whiteSpace="nowrap",p.appendChild(s),l.src=xT,l.width=1,l.height=1,l.style.margin="0",l.style.padding="0",l.style.verticalAlign="baseline",h.style.fontFamily=t,h.style.fontSize=i,h.style.margin="0",h.style.padding="0",h.appendChild(this._document.createTextNode(M2)),s.appendChild(h),s.appendChild(l);var o=l.offsetTop-h.offsetTop+2;s.removeChild(h),s.appendChild(this._document.createTextNode(M2)),s.style.lineHeight="normal",l.style.verticalAlign="super";var v=l.offsetTop-s.offsetTop+2;return p.removeChild(s),{baseline:o,middle:v}},n.prototype.getMetrics=function(t,i){var s=t+" "+i;return typeof this._data[s]>"u"&&(this._data[s]=this.parseMetrics(t,i)),this._data[s]},n}(),k2=function(){function n(t,i){this.context=t,this.options=i}return n}(),CT=1e4,FT=function(n){Eo(t,n);function t(i,s){var l=n.call(this,i,s)||this;return l._activeEffects=[],l.canvas=s.canvas?s.canvas:document.createElement("canvas"),l.ctx=l.canvas.getContext("2d"),s.canvas||(l.canvas.width=Math.floor(s.width*s.scale),l.canvas.height=Math.floor(s.height*s.scale),l.canvas.style.width=s.width+"px",l.canvas.style.height=s.height+"px"),l.fontMetrics=new BT(document),l.ctx.scale(l.options.scale,l.options.scale),l.ctx.translate(-s.x,-s.y),l.ctx.textBaseline="bottom",l._activeEffects=[],l.context.logger.debug("Canvas renderer initialized ("+s.width+"x"+s.height+") with scale "+s.scale),l}return t.prototype.applyEffects=function(i){for(var s=this;this._activeEffects.length;)this.popEffect();i.forEach(function(l){return s.applyEffect(l)})},t.prototype.applyEffect=function(i){this.ctx.save(),dT(i)&&(this.ctx.globalAlpha=i.opacity),hT(i)&&(this.ctx.translate(i.offsetX,i.offsetY),this.ctx.transform(i.matrix[0],i.matrix[1],i.matrix[2],i.matrix[3],i.matrix[4],i.matrix[5]),this.ctx.translate(-i.offsetX,-i.offsetY)),I2(i)&&(this.path(i.path),this.ctx.clip()),this._activeEffects.push(i)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(i){return Ms(this,void 0,void 0,function(){var s;return gs(this,function(l){switch(l.label){case 0:return s=i.element.container.styles,s.isVisible()?[4,this.renderStackContent(i)]:[3,2];case 1:l.sent(),l.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(i){return Ms(this,void 0,void 0,function(){return gs(this,function(s){switch(s.label){case 0:if(Pn(i.container.flags,16))debugger;return i.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(i)]:[3,3];case 1:return s.sent(),[4,this.renderNodeContent(i)];case 2:s.sent(),s.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(i,s,l){var h=this;if(s===0)this.ctx.fillText(i.text,i.bounds.left,i.bounds.top+l);else{var p=mm(i.text);p.reduce(function(o,v){return h.ctx.fillText(v,o,i.bounds.top+l),o+h.ctx.measureText(v).width},i.bounds.left)}},t.prototype.createFontStyle=function(i){var s=i.fontVariant.filter(function(p){return p==="normal"||p==="small-caps"}).join(""),l=UT(i.fontFamily).join(", "),h=Th(i.fontSize)?""+i.fontSize.number+i.fontSize.unit:i.fontSize.number+"px";return[[i.fontStyle,s,i.fontWeight,h,l].join(" "),l,h]},t.prototype.renderTextNode=function(i,s){return Ms(this,void 0,void 0,function(){var l,h,p,o,v,C,I,U,Q=this;return gs(this,function(P){return l=this.createFontStyle(s),h=l[0],p=l[1],o=l[2],this.ctx.font=h,this.ctx.direction=s.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",v=this.fontMetrics.getMetrics(p,o),C=v.baseline,I=v.middle,U=s.paintOrder,i.textBounds.forEach(function(K){U.forEach(function(V){switch(V){case 0:Q.ctx.fillStyle=Nn(s.color),Q.renderTextWithLetterSpacing(K,s.letterSpacing,C);var Y=s.textShadow;Y.length&&K.text.trim().length&&(Y.slice(0).reverse().forEach(function($){Q.ctx.shadowColor=Nn($.color),Q.ctx.shadowOffsetX=$.offsetX.number*Q.options.scale,Q.ctx.shadowOffsetY=$.offsetY.number*Q.options.scale,Q.ctx.shadowBlur=$.blur.number,Q.renderTextWithLetterSpacing(K,s.letterSpacing,C)}),Q.ctx.shadowColor="",Q.ctx.shadowOffsetX=0,Q.ctx.shadowOffsetY=0,Q.ctx.shadowBlur=0),s.textDecorationLine.length&&(Q.ctx.fillStyle=Nn(s.textDecorationColor||s.color),s.textDecorationLine.forEach(function($){switch($){case 1:Q.ctx.fillRect(K.bounds.left,Math.round(K.bounds.top+C),K.bounds.width,1);break;case 2:Q.ctx.fillRect(K.bounds.left,Math.round(K.bounds.top),K.bounds.width,1);break;case 3:Q.ctx.fillRect(K.bounds.left,Math.ceil(K.bounds.top+I),K.bounds.width,1);break}}));break;case 1:s.webkitTextStrokeWidth&&K.text.trim().length&&(Q.ctx.strokeStyle=Nn(s.webkitTextStrokeColor),Q.ctx.lineWidth=s.webkitTextStrokeWidth,Q.ctx.lineJoin=window.chrome?"miter":"round",Q.ctx.strokeText(K.text,K.bounds.left,K.bounds.top+C)),Q.ctx.strokeStyle="",Q.ctx.lineWidth=0,Q.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(i,s,l){if(l&&i.intrinsicWidth>0&&i.intrinsicHeight>0){var h=kp(i),p=Lp(s);this.path(p),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(l,0,0,i.intrinsicWidth,i.intrinsicHeight,h.left,h.top,h.width,h.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(i){return Ms(this,void 0,void 0,function(){var s,l,h,p,o,v,it,it,C,I,U,Q,St,P,K,Tt,V,Y,$,it,ht,St,Tt;return gs(this,function(Lt){switch(Lt.label){case 0:this.applyEffects(i.getEffects(4)),s=i.container,l=i.curves,h=s.styles,p=0,o=s.textNodes,Lt.label=1;case 1:return p<o.length?(v=o[p],[4,this.renderTextNode(v,h)]):[3,4];case 2:Lt.sent(),Lt.label=3;case 3:return p++,[3,1];case 4:if(!(s instanceof t2))return[3,8];Lt.label=5;case 5:return Lt.trys.push([5,7,,8]),[4,this.context.cache.match(s.src)];case 6:return it=Lt.sent(),this.renderReplacedElement(s,l,it),[3,8];case 7:return Lt.sent(),this.context.logger.error("Error loading image "+s.src),[3,8];case 8:if(s instanceof e2&&this.renderReplacedElement(s,l,s.canvas),!(s instanceof r2))return[3,12];Lt.label=9;case 9:return Lt.trys.push([9,11,,12]),[4,this.context.cache.match(s.svg)];case 10:return it=Lt.sent(),this.renderReplacedElement(s,l,it),[3,12];case 11:return Lt.sent(),this.context.logger.error("Error loading svg "+s.svg.substring(0,255)),[3,12];case 12:return s instanceof o2&&s.tree?(C=new t(this.context,{scale:this.options.scale,backgroundColor:s.backgroundColor,x:0,y:0,width:s.width,height:s.height}),[4,C.render(s.tree)]):[3,14];case 13:I=Lt.sent(),s.width&&s.height&&this.ctx.drawImage(I,0,0,s.width,s.height,s.bounds.left,s.bounds.top,s.bounds.width,s.bounds.height),Lt.label=14;case 14:if(s instanceof vm&&(U=Math.min(s.bounds.width,s.bounds.height),s.type===Cp?s.checked&&(this.ctx.save(),this.path([new We(s.bounds.left+U*.39363,s.bounds.top+U*.79),new We(s.bounds.left+U*.16,s.bounds.top+U*.5549),new We(s.bounds.left+U*.27347,s.bounds.top+U*.44071),new We(s.bounds.left+U*.39694,s.bounds.top+U*.5649),new We(s.bounds.left+U*.72983,s.bounds.top+U*.23),new We(s.bounds.left+U*.84,s.bounds.top+U*.34085),new We(s.bounds.left+U*.39363,s.bounds.top+U*.79)]),this.ctx.fillStyle=Nn(n2),this.ctx.fill(),this.ctx.restore()):s.type===Fp&&s.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(s.bounds.left+U/2,s.bounds.top+U/2,U/4,0,Math.PI*2,!0),this.ctx.fillStyle=Nn(n2),this.ctx.fill(),this.ctx.restore())),ST(s)&&s.value.length){switch(Q=this.createFontStyle(h),St=Q[0],P=Q[1],K=this.fontMetrics.getMetrics(St,P).baseline,this.ctx.font=St,this.ctx.fillStyle=Nn(h.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=ET(s.styles.textAlign),Tt=kp(s),V=0,s.styles.textAlign){case 1:V+=Tt.width/2;break;case 2:V+=Tt.width;break}Y=Tt.add(V,0,0,-Tt.height/2+1),this.ctx.save(),this.path([new We(Tt.left,Tt.top),new We(Tt.left+Tt.width,Tt.top),new We(Tt.left+Tt.width,Tt.top+Tt.height),new We(Tt.left,Tt.top+Tt.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Mh(s.value,Y),h.letterSpacing,K),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Pn(s.styles.display,2048))return[3,20];if(s.styles.listStyleImage===null)return[3,19];if($=s.styles.listStyleImage,$.type!==0)return[3,18];it=void 0,ht=$.url,Lt.label=15;case 15:return Lt.trys.push([15,17,,18]),[4,this.context.cache.match(ht)];case 16:return it=Lt.sent(),this.ctx.drawImage(it,s.bounds.left-(it.width+10),s.bounds.top),[3,18];case 17:return Lt.sent(),this.context.logger.error("Error loading list-style-image "+ht),[3,18];case 18:return[3,20];case 19:i.listValue&&s.styles.listStyleType!==-1&&(St=this.createFontStyle(h)[0],this.ctx.font=St,this.ctx.fillStyle=Nn(h.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Tt=new KA(s.bounds.left,s.bounds.top+Qi(s.styles.paddingTop,s.bounds.width),s.bounds.width,Qw(h.lineHeight,h.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Mh(i.listValue,Tt),h.letterSpacing,Qw(h.lineHeight,h.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),Lt.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(i){return Ms(this,void 0,void 0,function(){var s,l,$,h,p,$,o,v,$,C,I,$,U,Q,$,P,K,$,V,Y,$;return gs(this,function(it){switch(it.label){case 0:if(Pn(i.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(i.element)];case 1:it.sent(),s=0,l=i.negativeZIndex,it.label=2;case 2:return s<l.length?($=l[s],[4,this.renderStack($)]):[3,5];case 3:it.sent(),it.label=4;case 4:return s++,[3,2];case 5:return[4,this.renderNodeContent(i.element)];case 6:it.sent(),h=0,p=i.nonInlineLevel,it.label=7;case 7:return h<p.length?($=p[h],[4,this.renderNode($)]):[3,10];case 8:it.sent(),it.label=9;case 9:return h++,[3,7];case 10:o=0,v=i.nonPositionedFloats,it.label=11;case 11:return o<v.length?($=v[o],[4,this.renderStack($)]):[3,14];case 12:it.sent(),it.label=13;case 13:return o++,[3,11];case 14:C=0,I=i.nonPositionedInlineLevel,it.label=15;case 15:return C<I.length?($=I[C],[4,this.renderStack($)]):[3,18];case 16:it.sent(),it.label=17;case 17:return C++,[3,15];case 18:U=0,Q=i.inlineLevel,it.label=19;case 19:return U<Q.length?($=Q[U],[4,this.renderNode($)]):[3,22];case 20:it.sent(),it.label=21;case 21:return U++,[3,19];case 22:P=0,K=i.zeroOrAutoZIndexOrTransformedOrOpacity,it.label=23;case 23:return P<K.length?($=K[P],[4,this.renderStack($)]):[3,26];case 24:it.sent(),it.label=25;case 25:return P++,[3,23];case 26:V=0,Y=i.positiveZIndex,it.label=27;case 27:return V<Y.length?($=Y[V],[4,this.renderStack($)]):[3,30];case 28:it.sent(),it.label=29;case 29:return V++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(i){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(i.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(i){this.ctx.beginPath(),this.formatPath(i),this.ctx.closePath()},t.prototype.formatPath=function(i){var s=this;i.forEach(function(l,h){var p=qa(l)?l.start:l;h===0?s.ctx.moveTo(p.x,p.y):s.ctx.lineTo(p.x,p.y),qa(l)&&s.ctx.bezierCurveTo(l.startControl.x,l.startControl.y,l.endControl.x,l.endControl.y,l.end.x,l.end.y)})},t.prototype.renderRepeat=function(i,s,l,h){this.path(i),this.ctx.fillStyle=s,this.ctx.translate(l,h),this.ctx.fill(),this.ctx.translate(-l,-h)},t.prototype.resizeImage=function(i,s,l){var h;if(i.width===s&&i.height===l)return i;var p=(h=this.canvas.ownerDocument)!==null&&h!==void 0?h:document,o=p.createElement("canvas");o.width=Math.max(1,s),o.height=Math.max(1,l);var v=o.getContext("2d");return v.drawImage(i,0,0,i.width,i.height,0,0,s,l),o},t.prototype.renderBackgroundImage=function(i){return Ms(this,void 0,void 0,function(){var s,l,h,p,o,v;return gs(this,function(C){switch(C.label){case 0:s=i.styles.backgroundImage.length-1,l=function(I){var U,Q,P,Wt,Gt,Yt,bt,wt,yt,K,Wt,Gt,Yt,bt,wt,V,Y,$,it,ht,St,Tt,Lt,Ft,yt,Rt,Wt,At,lt,bt,wt,Xt,Gt,Yt,qt,te,Jt,me,rt,dt,Bt,Et;return gs(this,function(Nt){switch(Nt.label){case 0:if(I.type!==0)return[3,5];U=void 0,Q=I.url,Nt.label=1;case 1:return Nt.trys.push([1,3,,4]),[4,h.context.cache.match(Q)];case 2:return U=Nt.sent(),[3,4];case 3:return Nt.sent(),h.context.logger.error("Error loading background-image "+Q),[3,4];case 4:return U&&(P=Tm(i,s,[U.width,U.height,U.width/U.height]),Wt=P[0],Gt=P[1],Yt=P[2],bt=P[3],wt=P[4],yt=h.ctx.createPattern(h.resizeImage(U,bt,wt),"repeat"),h.renderRepeat(Wt,yt,Gt,Yt)),[3,6];case 5:hS(I)?(K=Tm(i,s,[null,null,null]),Wt=K[0],Gt=K[1],Yt=K[2],bt=K[3],wt=K[4],V=oS(I.angle,bt,wt),Y=V[0],$=V[1],it=V[2],ht=V[3],St=V[4],Tt=document.createElement("canvas"),Tt.width=bt,Tt.height=wt,Lt=Tt.getContext("2d"),Ft=Lt.createLinearGradient($,ht,it,St),xw(I.stops,Y).forEach(function(Ht){return Ft.addColorStop(Ht.stop,Nn(Ht.color))}),Lt.fillStyle=Ft,Lt.fillRect(0,0,bt,wt),bt>0&&wt>0&&(yt=h.ctx.createPattern(Tt,"repeat"),h.renderRepeat(Wt,yt,Gt,Yt))):dS(I)&&(Rt=Tm(i,s,[null,null,null]),Wt=Rt[0],At=Rt[1],lt=Rt[2],bt=Rt[3],wt=Rt[4],Xt=I.position.length===0?[im]:I.position,Gt=Qi(Xt[0],bt),Yt=Qi(Xt[Xt.length-1],wt),qt=AS(I,Gt,Yt,bt,wt),te=qt[0],Jt=qt[1],te>0&&Jt>0&&(me=h.ctx.createRadialGradient(At+Gt,lt+Yt,0,At+Gt,lt+Yt,te),xw(I.stops,te*2).forEach(function(Ht){return me.addColorStop(Ht.stop,Nn(Ht.color))}),h.path(Wt),h.ctx.fillStyle=me,te!==Jt?(rt=i.bounds.left+.5*i.bounds.width,dt=i.bounds.top+.5*i.bounds.height,Bt=Jt/te,Et=1/Bt,h.ctx.save(),h.ctx.translate(rt,dt),h.ctx.transform(1,0,0,Bt,0,0),h.ctx.translate(-rt,-dt),h.ctx.fillRect(At,Et*(lt-dt)+dt,bt,wt*Et),h.ctx.restore()):h.ctx.fill())),Nt.label=6;case 6:return s--,[2]}})},h=this,p=0,o=i.styles.backgroundImage.slice(0).reverse(),C.label=1;case 1:return p<o.length?(v=o[p],[5,l(v)]):[3,4];case 2:C.sent(),C.label=3;case 3:return p++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(i,s,l){return Ms(this,void 0,void 0,function(){return gs(this,function(h){return this.path(L2(l,s)),this.ctx.fillStyle=Nn(i),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(i,s,l,h){return Ms(this,void 0,void 0,function(){var p,o;return gs(this,function(v){switch(v.label){case 0:return s<3?[4,this.renderSolidBorder(i,l,h)]:[3,2];case 1:return v.sent(),[2];case 2:return p=gT(h,l),this.path(p),this.ctx.fillStyle=Nn(i),this.ctx.fill(),o=mT(h,l),this.path(o),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(i){return Ms(this,void 0,void 0,function(){var s,l,h,p,o,v,C,I,U=this;return gs(this,function(Q){switch(Q.label){case 0:return this.applyEffects(i.getEffects(2)),s=i.container.styles,l=!Ql(s.backgroundColor)||s.backgroundImage.length,h=[{style:s.borderTopStyle,color:s.borderTopColor,width:s.borderTopWidth},{style:s.borderRightStyle,color:s.borderRightColor,width:s.borderRightWidth},{style:s.borderBottomStyle,color:s.borderBottomColor,width:s.borderBottomWidth},{style:s.borderLeftStyle,color:s.borderLeftColor,width:s.borderLeftWidth}],p=IT(Su(s.backgroundClip,0),i.curves),l||s.boxShadow.length?(this.ctx.save(),this.path(p),this.ctx.clip(),Ql(s.backgroundColor)||(this.ctx.fillStyle=Nn(s.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(i.container)]):[3,2];case 1:Q.sent(),this.ctx.restore(),s.boxShadow.slice(0).reverse().forEach(function(P){U.ctx.save();var K=Pp(i.curves),V=P.inset?0:CT,Y=pT(K,-V+(P.inset?1:-1)*P.spread.number,(P.inset?1:-1)*P.spread.number,P.spread.number*(P.inset?-2:2),P.spread.number*(P.inset?-2:2));P.inset?(U.path(K),U.ctx.clip(),U.mask(Y)):(U.mask(K),U.ctx.clip(),U.path(Y)),U.ctx.shadowOffsetX=P.offsetX.number+V,U.ctx.shadowOffsetY=P.offsetY.number,U.ctx.shadowColor=Nn(P.color),U.ctx.shadowBlur=P.blur.number,U.ctx.fillStyle=P.inset?Nn(P.color):"rgba(0,0,0,1)",U.ctx.fill(),U.ctx.restore()}),Q.label=2;case 2:o=0,v=0,C=h,Q.label=3;case 3:return v<C.length?(I=C[v],I.style!==0&&!Ql(I.color)&&I.width>0?I.style!==2?[3,5]:[4,this.renderDashedDottedBorder(I.color,I.width,o,i.curves,2)]:[3,11]):[3,13];case 4:return Q.sent(),[3,11];case 5:return I.style!==3?[3,7]:[4,this.renderDashedDottedBorder(I.color,I.width,o,i.curves,3)];case 6:return Q.sent(),[3,11];case 7:return I.style!==4?[3,9]:[4,this.renderDoubleBorder(I.color,I.width,o,i.curves)];case 8:return Q.sent(),[3,11];case 9:return[4,this.renderSolidBorder(I.color,o,i.curves)];case 10:Q.sent(),Q.label=11;case 11:o++,Q.label=12;case 12:return v++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(i,s,l,h,p){return Ms(this,void 0,void 0,function(){var o,v,C,I,U,Q,P,K,V,Y,$,it,ht,St,Tt,Lt,Tt,Lt;return gs(this,function(Ft){return this.ctx.save(),o=yT(h,l),v=L2(h,l),p===2&&(this.path(v),this.ctx.clip()),qa(v[0])?(C=v[0].start.x,I=v[0].start.y):(C=v[0].x,I=v[0].y),qa(v[1])?(U=v[1].end.x,Q=v[1].end.y):(U=v[1].x,Q=v[1].y),l===0||l===2?P=Math.abs(C-U):P=Math.abs(I-Q),this.ctx.beginPath(),p===3?this.formatPath(o):this.formatPath(v.slice(0,2)),K=s<3?s*3:s*2,V=s<3?s*2:s,p===3&&(K=s,V=s),Y=!0,P<=K*2?Y=!1:P<=K*2+V?($=P/(2*K+V),K*=$,V*=$):(it=Math.floor((P+V)/(K+V)),ht=(P-it*K)/(it-1),St=(P-(it+1)*K)/it,V=St<=0||Math.abs(V-ht)<Math.abs(V-St)?ht:St),Y&&(p===3?this.ctx.setLineDash([0,K+V]):this.ctx.setLineDash([K,V])),p===3?(this.ctx.lineCap="round",this.ctx.lineWidth=s):this.ctx.lineWidth=s*2+1.1,this.ctx.strokeStyle=Nn(i),this.ctx.stroke(),this.ctx.setLineDash([]),p===2&&(qa(v[0])&&(Tt=v[3],Lt=v[0],this.ctx.beginPath(),this.formatPath([new We(Tt.end.x,Tt.end.y),new We(Lt.start.x,Lt.start.y)]),this.ctx.stroke()),qa(v[1])&&(Tt=v[1],Lt=v[2],this.ctx.beginPath(),this.formatPath([new We(Tt.end.x,Tt.end.y),new We(Lt.start.x,Lt.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(i){return Ms(this,void 0,void 0,function(){var s;return gs(this,function(l){switch(l.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Nn(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),s=fT(i),[4,this.renderStack(s)];case 1:return l.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(k2),ST=function(n){return n instanceof a2||n instanceof s2?!0:n instanceof vm&&n.type!==Fp&&n.type!==Cp},IT=function(n,t){switch(n){case 0:return Pp(t);case 2:return lT(t);case 1:default:return Lp(t)}},ET=function(n){switch(n){case 1:return"center";case 2:return"right";case 0:default:return"left"}},TT=["-apple-system","system-ui"],UT=function(n){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?n.filter(function(t){return TT.indexOf(t)===-1}):n},PT=function(n){Eo(t,n);function t(i,s){var l=n.call(this,i,s)||this;return l.canvas=s.canvas?s.canvas:document.createElement("canvas"),l.ctx=l.canvas.getContext("2d"),l.options=s,l.canvas.width=Math.floor(s.width*s.scale),l.canvas.height=Math.floor(s.height*s.scale),l.canvas.style.width=s.width+"px",l.canvas.style.height=s.height+"px",l.ctx.scale(l.options.scale,l.options.scale),l.ctx.translate(-s.x,-s.y),l.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+s.width+"x"+s.height+" at "+s.x+","+s.y+") with scale "+s.scale),l}return t.prototype.render=function(i){return Ms(this,void 0,void 0,function(){var s,l;return gs(this,function(h){switch(h.label){case 0:return s=gm(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,i),[4,LT(s)];case 1:return l=h.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Nn(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(l,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(k2),LT=function(n){return new Promise(function(t,i){var s=new Image;s.onload=function(){t(s)},s.onerror=i,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(n))})},QT=function(){function n(t){var i=t.id,s=t.enabled;this.id=i,this.enabled=s,this.start=Date.now()}return n.prototype.debug=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Kd([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},n.prototype.getTime=function(){return Date.now()-this.start},n.prototype.info=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Kd([this.id,this.getTime()+"ms"],t))},n.prototype.warn=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Kd([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},n.prototype.error=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Kd([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},n.instances={},n}(),MT=function(){function n(t,i){var s;this.windowBounds=i,this.instanceName="#"+n.instanceCount++,this.logger=new QT({id:this.instanceName,enabled:t.logging}),this.cache=(s=t.cache)!==null&&s!==void 0?s:new eT(this,t)}return n.instanceCount=1,n}(),kT=function(n,t){return t===void 0&&(t={}),DT(n,t)};typeof window<"u"&&S2.setContext(window);var DT=function(n,t){return Ms(void 0,void 0,void 0,function(){var i,s,l,h,p,o,v,C,I,U,Q,P,K,V,Y,$,it,ht,St,Tt,Ft,Lt,Ft,yt,Rt,Wt,At,lt,bt,wt,Xt,Gt,Yt,qt,te,Jt,me,rt,dt,Bt;return gs(this,function(Et){switch(Et.label){case 0:if(!n||typeof n!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(i=n.ownerDocument,!i)throw new Error("Element is not attached to a Document");if(s=i.defaultView,!s)throw new Error("Document is not attached to a Window");return l={allowTaint:(yt=t.allowTaint)!==null&&yt!==void 0?yt:!1,imageTimeout:(Rt=t.imageTimeout)!==null&&Rt!==void 0?Rt:15e3,proxy:t.proxy,useCORS:(Wt=t.useCORS)!==null&&Wt!==void 0?Wt:!1},h=kg({logging:(At=t.logging)!==null&&At!==void 0?At:!0,cache:t.cache},l),p={windowWidth:(lt=t.windowWidth)!==null&&lt!==void 0?lt:s.innerWidth,windowHeight:(bt=t.windowHeight)!==null&&bt!==void 0?bt:s.innerHeight,scrollX:(wt=t.scrollX)!==null&&wt!==void 0?wt:s.pageXOffset,scrollY:(Xt=t.scrollY)!==null&&Xt!==void 0?Xt:s.pageYOffset},o=new KA(p.scrollX,p.scrollY,p.windowWidth,p.windowHeight),v=new MT(h,o),C=(Gt=t.foreignObjectRendering)!==null&&Gt!==void 0?Gt:!1,I={allowTaint:(Yt=t.allowTaint)!==null&&Yt!==void 0?Yt:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:C,copyStyles:C},v.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),U=new C2(v,n,I),Q=U.clonedReferenceElement,Q?[4,U.toIFrame(i,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return P=Et.sent(),K=_m(Q)||NE(Q)?p3(Q.ownerDocument):$d(v,Q),V=K.width,Y=K.height,$=K.left,it=K.top,ht=NT(v,Q,t.backgroundColor),St={canvas:t.canvas,backgroundColor:ht,scale:(te=(qt=t.scale)!==null&&qt!==void 0?qt:s.devicePixelRatio)!==null&&te!==void 0?te:1,x:((Jt=t.x)!==null&&Jt!==void 0?Jt:0)+$,y:((me=t.y)!==null&&me!==void 0?me:0)+it,width:(rt=t.width)!==null&&rt!==void 0?rt:Math.ceil(V),height:(dt=t.height)!==null&&dt!==void 0?dt:Math.ceil(Y)},C?(v.logger.debug("Document cloned, using foreign object rendering"),Ft=new PT(v,St),[4,Ft.render(Q)]):[3,3];case 2:return Tt=Et.sent(),[3,5];case 3:return v.logger.debug("Document cloned, element located at "+$+","+it+" with size "+V+"x"+Y+" using computed rendering"),v.logger.debug("Starting DOM parsing"),Lt=l2(v,Q),ht===Lt.styles.backgroundColor&&(Lt.styles.backgroundColor=qA.TRANSPARENT),v.logger.debug("Starting renderer for element at "+St.x+","+St.y+" with size "+St.width+"x"+St.height),Ft=new FT(v,St),[4,Ft.render(Lt)];case 4:Tt=Et.sent(),Et.label=5;case 5:return(!((Bt=t.removeContainer)!==null&&Bt!==void 0)||Bt)&&(C2.destroy(P)||v.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),v.logger.debug("Finished rendering"),[2,Tt]}})})},NT=function(n,t,i){var s=t.ownerDocument,l=s.documentElement?Ph(n,getComputedStyle(s.documentElement).backgroundColor):qA.TRANSPARENT,h=s.body?Ph(n,getComputedStyle(s.body).backgroundColor):qA.TRANSPARENT,p=typeof i=="string"?Ph(n,i):i===null?qA.TRANSPARENT:4294967295;return t===s.documentElement?Ql(l)?Ql(h)?p:h:l:p};const OT=Object.freeze(Object.defineProperty({__proto__:null,default:kT},Symbol.toStringTag,{value:"Module"}));/*! @license DOMPurify 2.5.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.5/LICENSE */function Nl(n){"@babel/helpers - typeof";return Nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nl(n)}function Um(n,t){return Um=Object.setPrototypeOf||function(i,s){return i.__proto__=s,i},Um(n,t)}function RT(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Np(n,t,i){return RT()?Np=Reflect.construct:Np=function(s,l,h){var p=[null];p.push.apply(p,l);var o=Function.bind.apply(s,p),v=new o;return h&&Um(v,h.prototype),v},Np.apply(null,arguments)}function Uo(n){return zT(n)||HT(n)||VT(n)||jT()}function zT(n){if(Array.isArray(n))return Pm(n)}function HT(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function VT(n,t){if(n){if(typeof n=="string")return Pm(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Pm(n,t)}}function Pm(n,t){(t==null||t>n.length)&&(t=n.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=n[i];return s}function jT(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var KT=Object.hasOwnProperty,D2=Object.setPrototypeOf,$T=Object.isFrozen,qT=Object.getPrototypeOf,GT=Object.getOwnPropertyDescriptor,Ns=Object.freeze,Wa=Object.seal,WT=Object.create,N2=typeof Reflect<"u"&&Reflect,Op=N2.apply,Lm=N2.construct;Op||(Op=function(n,t,i){return n.apply(t,i)}),Ns||(Ns=function(n){return n}),Wa||(Wa=function(n){return n}),Lm||(Lm=function(n,t){return Np(n,Uo(t))});var XT=Xa(Array.prototype.forEach),O2=Xa(Array.prototype.pop),Oh=Xa(Array.prototype.push),Rp=Xa(String.prototype.toLowerCase),Qm=Xa(String.prototype.toString),R2=Xa(String.prototype.match),Po=Xa(String.prototype.replace),ZT=Xa(String.prototype.indexOf),YT=Xa(String.prototype.trim),es=Xa(RegExp.prototype.test),Mm=JT(TypeError);function Xa(n){return function(t){for(var i=arguments.length,s=new Array(i>1?i-1:0),l=1;l<i;l++)s[l-1]=arguments[l];return Op(n,t,s)}}function JT(n){return function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Lm(n,i)}}function Vr(n,t,i){var s;i=(s=i)!==null&&s!==void 0?s:Rp,D2&&D2(n,null);for(var l=t.length;l--;){var h=t[l];if(typeof h=="string"){var p=i(h);p!==h&&($T(t)||(t[l]=p),h=p)}n[h]=!0}return n}function bc(n){var t=WT(null),i;for(i in n)Op(KT,n,[i])===!0&&(t[i]=n[i]);return t}function zp(n,t){for(;n!==null;){var i=GT(n,t);if(i){if(i.get)return Xa(i.get);if(typeof i.value=="function")return Xa(i.value)}n=qT(n)}function s(l){return console.warn("fallback value for",l),null}return s}var z2=Ns(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),km=Ns(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Dm=Ns(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),tU=Ns(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Nm=Ns(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),eU=Ns(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),H2=Ns(["#text"]),V2=Ns(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Om=Ns(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),j2=Ns(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Hp=Ns(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),rU=Wa(/\{\{[\w\W]*|[\w\W]*\}\}/gm),iU=Wa(/<%[\w\W]*|[\w\W]*%>/gm),nU=Wa(/\${[\w\W]*}/gm),sU=Wa(/^data-[\-\w.\u00B7-\uFFFF]/),aU=Wa(/^aria-[\-\w]+$/),oU=Wa(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),AU=Wa(/^(?:\w+script|data):/i),lU=Wa(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),cU=Wa(/^html$/i),uU=Wa(/^[a-z][.\w]*(-[.\w]+)+$/i),hU=function(){return typeof window>"u"?null:window},dU=function(n,t){if(Nl(n)!=="object"||typeof n.createPolicy!="function")return null;var i=null,s="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(s)&&(i=t.currentScript.getAttribute(s));var l="dompurify"+(i?"#"+i:"");try{return n.createPolicy(l,{createHTML:function(h){return h},createScriptURL:function(h){return h}})}catch{return console.warn("TrustedTypes policy "+l+" could not be created."),null}};function K2(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:hU(),t=function(Ut){return K2(Ut)};if(t.version="2.5.5",t.removed=[],!n||!n.document||n.document.nodeType!==9)return t.isSupported=!1,t;var i=n.document,s=n.document,l=n.DocumentFragment,h=n.HTMLTemplateElement,p=n.Node,o=n.Element,v=n.NodeFilter,C=n.NamedNodeMap,I=C===void 0?n.NamedNodeMap||n.MozNamedAttrMap:C,U=n.HTMLFormElement,Q=n.DOMParser,P=n.trustedTypes,K=o.prototype,V=zp(K,"cloneNode"),Y=zp(K,"nextSibling"),$=zp(K,"childNodes"),it=zp(K,"parentNode");if(typeof h=="function"){var ht=s.createElement("template");ht.content&&ht.content.ownerDocument&&(s=ht.content.ownerDocument)}var St=dU(P,i),Tt=St?St.createHTML(""):"",Lt=s,Ft=Lt.implementation,yt=Lt.createNodeIterator,Rt=Lt.createDocumentFragment,Wt=Lt.getElementsByTagName,At=i.importNode,lt={};try{lt=bc(s).documentMode?s.documentMode:{}}catch{}var bt={};t.isSupported=typeof it=="function"&&Ft&&Ft.createHTMLDocument!==void 0&&lt!==9;var wt=rU,Xt=iU,Gt=nU,Yt=sU,qt=aU,te=AU,Jt=lU,me=uU,rt=oU,dt=null,Bt=Vr({},[].concat(Uo(z2),Uo(km),Uo(Dm),Uo(Nm),Uo(H2))),Et=null,Nt=Vr({},[].concat(Uo(V2),Uo(Om),Uo(j2),Uo(Hp))),Ht=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ie=null,se=null,Ce=!0,be=!0,Te=!1,Le=!0,Qe=!1,le=!0,nt=!1,dr=!1,$e=!1,ce=!1,ge=!1,Se=!1,Ie=!0,Ge=!1,Ze="user-content-",pr=!0,wr=!1,Sr={},pe=null,Xe=Vr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ur=null,Ue=Vr({},["audio","video","img","source","image","track"]),Jr=null,he=Vr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),sr="http://www.w3.org/1998/Math/MathML",Me="http://www.w3.org/2000/svg",xr="http://www.w3.org/1999/xhtml",Gr=xr,ke=!1,Fi=null,zr=Vr({},[sr,Me,xr],Qm),Dr,pt=["application/xhtml+xml","text/html"],G="text/html",q,tt=null,_t=s.createElement("form"),Pt=function(Ut){return Ut instanceof RegExp||Ut instanceof Function},kt=function(Ut){tt&&tt===Ut||((!Ut||Nl(Ut)!=="object")&&(Ut={}),Ut=bc(Ut),Dr=pt.indexOf(Ut.PARSER_MEDIA_TYPE)===-1?Dr=G:Dr=Ut.PARSER_MEDIA_TYPE,q=Dr==="application/xhtml+xml"?Qm:Rp,dt="ALLOWED_TAGS"in Ut?Vr({},Ut.ALLOWED_TAGS,q):Bt,Et="ALLOWED_ATTR"in Ut?Vr({},Ut.ALLOWED_ATTR,q):Nt,Fi="ALLOWED_NAMESPACES"in Ut?Vr({},Ut.ALLOWED_NAMESPACES,Qm):zr,Jr="ADD_URI_SAFE_ATTR"in Ut?Vr(bc(he),Ut.ADD_URI_SAFE_ATTR,q):he,ur="ADD_DATA_URI_TAGS"in Ut?Vr(bc(Ue),Ut.ADD_DATA_URI_TAGS,q):Ue,pe="FORBID_CONTENTS"in Ut?Vr({},Ut.FORBID_CONTENTS,q):Xe,ie="FORBID_TAGS"in Ut?Vr({},Ut.FORBID_TAGS,q):{},se="FORBID_ATTR"in Ut?Vr({},Ut.FORBID_ATTR,q):{},Sr="USE_PROFILES"in Ut?Ut.USE_PROFILES:!1,Ce=Ut.ALLOW_ARIA_ATTR!==!1,be=Ut.ALLOW_DATA_ATTR!==!1,Te=Ut.ALLOW_UNKNOWN_PROTOCOLS||!1,Le=Ut.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Qe=Ut.SAFE_FOR_TEMPLATES||!1,le=Ut.SAFE_FOR_XML!==!1,nt=Ut.WHOLE_DOCUMENT||!1,ce=Ut.RETURN_DOM||!1,ge=Ut.RETURN_DOM_FRAGMENT||!1,Se=Ut.RETURN_TRUSTED_TYPE||!1,$e=Ut.FORCE_BODY||!1,Ie=Ut.SANITIZE_DOM!==!1,Ge=Ut.SANITIZE_NAMED_PROPS||!1,pr=Ut.KEEP_CONTENT!==!1,wr=Ut.IN_PLACE||!1,rt=Ut.ALLOWED_URI_REGEXP||rt,Gr=Ut.NAMESPACE||xr,Ht=Ut.CUSTOM_ELEMENT_HANDLING||{},Ut.CUSTOM_ELEMENT_HANDLING&&Pt(Ut.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ht.tagNameCheck=Ut.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ut.CUSTOM_ELEMENT_HANDLING&&Pt(Ut.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ht.attributeNameCheck=Ut.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ut.CUSTOM_ELEMENT_HANDLING&&typeof Ut.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ht.allowCustomizedBuiltInElements=Ut.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Qe&&(be=!1),ge&&(ce=!0),Sr&&(dt=Vr({},Uo(H2)),Et=[],Sr.html===!0&&(Vr(dt,z2),Vr(Et,V2)),Sr.svg===!0&&(Vr(dt,km),Vr(Et,Om),Vr(Et,Hp)),Sr.svgFilters===!0&&(Vr(dt,Dm),Vr(Et,Om),Vr(Et,Hp)),Sr.mathMl===!0&&(Vr(dt,Nm),Vr(Et,j2),Vr(Et,Hp))),Ut.ADD_TAGS&&(dt===Bt&&(dt=bc(dt)),Vr(dt,Ut.ADD_TAGS,q)),Ut.ADD_ATTR&&(Et===Nt&&(Et=bc(Et)),Vr(Et,Ut.ADD_ATTR,q)),Ut.ADD_URI_SAFE_ATTR&&Vr(Jr,Ut.ADD_URI_SAFE_ATTR,q),Ut.FORBID_CONTENTS&&(pe===Xe&&(pe=bc(pe)),Vr(pe,Ut.FORBID_CONTENTS,q)),pr&&(dt["#text"]=!0),nt&&Vr(dt,["html","head","body"]),dt.table&&(Vr(dt,["tbody"]),delete ie.tbody),Ns&&Ns(Ut),tt=Ut)},Ot=Vr({},["mi","mo","mn","ms","mtext"]),vt=Vr({},["foreignobject","annotation-xml"]),jt=Vr({},["title","style","font","a","script"]),de=Vr({},km);Vr(de,Dm),Vr(de,tU);var ae=Vr({},Nm);Vr(ae,eU);var ne=function(Ut){var Fe=it(Ut);(!Fe||!Fe.tagName)&&(Fe={namespaceURI:Gr,tagName:"template"});var xe=Rp(Ut.tagName),Kr=Rp(Fe.tagName);return Fi[Ut.namespaceURI]?Ut.namespaceURI===Me?Fe.namespaceURI===xr?xe==="svg":Fe.namespaceURI===sr?xe==="svg"&&(Kr==="annotation-xml"||Ot[Kr]):!!de[xe]:Ut.namespaceURI===sr?Fe.namespaceURI===xr?xe==="math":Fe.namespaceURI===Me?xe==="math"&&vt[Kr]:!!ae[xe]:Ut.namespaceURI===xr?Fe.namespaceURI===Me&&!vt[Kr]||Fe.namespaceURI===sr&&!Ot[Kr]?!1:!ae[xe]&&(jt[xe]||!de[xe]):!!(Dr==="application/xhtml+xml"&&Fi[Ut.namespaceURI]):!1},Ee=function(Ut){Oh(t.removed,{element:Ut});try{Ut.parentNode.removeChild(Ut)}catch{try{Ut.outerHTML=Tt}catch{Ut.remove()}}},Re=function(Ut,Fe){try{Oh(t.removed,{attribute:Fe.getAttributeNode(Ut),from:Fe})}catch{Oh(t.removed,{attribute:null,from:Fe})}if(Fe.removeAttribute(Ut),Ut==="is"&&!Et[Ut])if(ce||ge)try{Ee(Fe)}catch{}else try{Fe.setAttribute(Ut,"")}catch{}},Fr=function(Ut){var Fe,xe;if($e)Ut="<remove></remove>"+Ut;else{var Kr=R2(Ut,/^[\r\n\t ]+/);xe=Kr&&Kr[0]}Dr==="application/xhtml+xml"&&Gr===xr&&(Ut='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ut+"</body></html>");var vr=St?St.createHTML(Ut):Ut;if(Gr===xr)try{Fe=new Q().parseFromString(vr,Dr)}catch{}if(!Fe||!Fe.documentElement){Fe=Ft.createDocument(Gr,"template",null);try{Fe.documentElement.innerHTML=ke?Tt:vr}catch{}}var Ji=Fe.body||Fe.documentElement;return Ut&&xe&&Ji.insertBefore(s.createTextNode(xe),Ji.childNodes[0]||null),Gr===xr?Wt.call(Fe,nt?"html":"body")[0]:nt?Fe.documentElement:Ji},ar=function(Ut){return yt.call(Ut.ownerDocument||Ut,Ut,v.SHOW_ELEMENT|v.SHOW_COMMENT|v.SHOW_TEXT|v.SHOW_PROCESSING_INSTRUCTION|v.SHOW_CDATA_SECTION,null,!1)},Br=function(Ut){return Ut instanceof U&&(typeof Ut.nodeName!="string"||typeof Ut.textContent!="string"||typeof Ut.removeChild!="function"||!(Ut.attributes instanceof I)||typeof Ut.removeAttribute!="function"||typeof Ut.setAttribute!="function"||typeof Ut.namespaceURI!="string"||typeof Ut.insertBefore!="function"||typeof Ut.hasChildNodes!="function")},Ur=function(Ut){return Nl(p)==="object"?Ut instanceof p:Ut&&Nl(Ut)==="object"&&typeof Ut.nodeType=="number"&&typeof Ut.nodeName=="string"},Ir=function(Ut,Fe,xe){bt[Ut]&&XT(bt[Ut],function(Kr){Kr.call(t,Fe,xe,tt)})},Zr=function(Ut){var Fe;if(Ir("beforeSanitizeElements",Ut,null),Br(Ut)||es(/[\u0080-\uFFFF]/,Ut.nodeName))return Ee(Ut),!0;var xe=q(Ut.nodeName);if(Ir("uponSanitizeElement",Ut,{tagName:xe,allowedTags:dt}),Ut.hasChildNodes()&&!Ur(Ut.firstElementChild)&&(!Ur(Ut.content)||!Ur(Ut.content.firstElementChild))&&es(/<[/\w]/g,Ut.innerHTML)&&es(/<[/\w]/g,Ut.textContent)||xe==="select"&&es(/<template/i,Ut.innerHTML)||Ut.nodeType===7||le&&Ut.nodeType===8&&es(/<[/\w]/g,Ut.data))return Ee(Ut),!0;if(!dt[xe]||ie[xe]){if(!ie[xe]&&jr(xe)&&(Ht.tagNameCheck instanceof RegExp&&es(Ht.tagNameCheck,xe)||Ht.tagNameCheck instanceof Function&&Ht.tagNameCheck(xe)))return!1;if(pr&&!pe[xe]){var Kr=it(Ut)||Ut.parentNode,vr=$(Ut)||Ut.childNodes;if(vr&&Kr)for(var Ji=vr.length,si=Ji-1;si>=0;--si){var yi=V(vr[si],!0);yi.__removalCount=(Ut.__removalCount||0)+1,Kr.insertBefore(yi,Y(Ut))}}return Ee(Ut),!0}return Ut instanceof o&&!ne(Ut)||(xe==="noscript"||xe==="noembed"||xe==="noframes")&&es(/<\/no(script|embed|frames)/i,Ut.innerHTML)?(Ee(Ut),!0):(Qe&&Ut.nodeType===3&&(Fe=Ut.textContent,Fe=Po(Fe,wt," "),Fe=Po(Fe,Xt," "),Fe=Po(Fe,Gt," "),Ut.textContent!==Fe&&(Oh(t.removed,{element:Ut.cloneNode()}),Ut.textContent=Fe)),Ir("afterSanitizeElements",Ut,null),!1)},cr=function(Ut,Fe,xe){if(Ie&&(Fe==="id"||Fe==="name")&&(xe in s||xe in _t))return!1;if(!(be&&!se[Fe]&&es(Yt,Fe))&&!(Ce&&es(qt,Fe))){if(!Et[Fe]||se[Fe]){if(!(jr(Ut)&&(Ht.tagNameCheck instanceof RegExp&&es(Ht.tagNameCheck,Ut)||Ht.tagNameCheck instanceof Function&&Ht.tagNameCheck(Ut))&&(Ht.attributeNameCheck instanceof RegExp&&es(Ht.attributeNameCheck,Fe)||Ht.attributeNameCheck instanceof Function&&Ht.attributeNameCheck(Fe))||Fe==="is"&&Ht.allowCustomizedBuiltInElements&&(Ht.tagNameCheck instanceof RegExp&&es(Ht.tagNameCheck,xe)||Ht.tagNameCheck instanceof Function&&Ht.tagNameCheck(xe))))return!1}else if(!Jr[Fe]&&!es(rt,Po(xe,Jt,""))&&!((Fe==="src"||Fe==="xlink:href"||Fe==="href")&&Ut!=="script"&&ZT(xe,"data:")===0&&ur[Ut])&&!(Te&&!es(te,Po(xe,Jt,"")))&&xe)return!1}return!0},jr=function(Ut){return Ut!=="annotation-xml"&&R2(Ut,me)},ni=function(Ut){var Fe,xe,Kr,vr;Ir("beforeSanitizeAttributes",Ut,null);var Ji=Ut.attributes;if(Ji){var si={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Et};for(vr=Ji.length;vr--;){Fe=Ji[vr];var yi=Fe,li=yi.name,Si=yi.namespaceURI;if(xe=li==="value"?Fe.value:YT(Fe.value),Kr=q(li),si.attrName=Kr,si.attrValue=xe,si.keepAttr=!0,si.forceKeepAttr=void 0,Ir("uponSanitizeAttribute",Ut,si),xe=si.attrValue,!si.forceKeepAttr&&(Re(li,Ut),!!si.keepAttr)){if(!Le&&es(/\/>/i,xe)){Re(li,Ut);continue}if(le&&es(/((--!?|])>)|<\/(style|title)/i,xe)){Re(li,Ut);continue}Qe&&(xe=Po(xe,wt," "),xe=Po(xe,Xt," "),xe=Po(xe,Gt," "));var tn=q(Ut.nodeName);if(cr(tn,Kr,xe)){if(Ge&&(Kr==="id"||Kr==="name")&&(Re(li,Ut),xe=Ze+xe),St&&Nl(P)==="object"&&typeof P.getAttributeType=="function"&&!Si)switch(P.getAttributeType(tn,Kr)){case"TrustedHTML":{xe=St.createHTML(xe);break}case"TrustedScriptURL":{xe=St.createScriptURL(xe);break}}try{Si?Ut.setAttributeNS(Si,li,xe):Ut.setAttribute(li,xe),Br(Ut)?Ee(Ut):O2(t.removed)}catch{}}}}Ir("afterSanitizeAttributes",Ut,null)}},zi=function Ut(Fe){var xe,Kr=ar(Fe);for(Ir("beforeSanitizeShadowDOM",Fe,null);xe=Kr.nextNode();)Ir("uponSanitizeShadowNode",xe,null),!Zr(xe)&&(xe.content instanceof l&&Ut(xe.content),ni(xe));Ir("afterSanitizeShadowDOM",Fe,null)};return t.sanitize=function(Ut){var Fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},xe,Kr,vr,Ji,si;if(ke=!Ut,ke&&(Ut="<!-->"),typeof Ut!="string"&&!Ur(Ut))if(typeof Ut.toString=="function"){if(Ut=Ut.toString(),typeof Ut!="string")throw Mm("dirty is not a string, aborting")}else throw Mm("toString is not a function");if(!t.isSupported){if(Nl(n.toStaticHTML)==="object"||typeof n.toStaticHTML=="function"){if(typeof Ut=="string")return n.toStaticHTML(Ut);if(Ur(Ut))return n.toStaticHTML(Ut.outerHTML)}return Ut}if(dr||kt(Fe),t.removed=[],typeof Ut=="string"&&(wr=!1),wr){if(Ut.nodeName){var yi=q(Ut.nodeName);if(!dt[yi]||ie[yi])throw Mm("root node is forbidden and cannot be sanitized in-place")}}else if(Ut instanceof p)xe=Fr("<!---->"),Kr=xe.ownerDocument.importNode(Ut,!0),Kr.nodeType===1&&Kr.nodeName==="BODY"||Kr.nodeName==="HTML"?xe=Kr:xe.appendChild(Kr);else{if(!ce&&!Qe&&!nt&&Ut.indexOf("<")===-1)return St&&Se?St.createHTML(Ut):Ut;if(xe=Fr(Ut),!xe)return ce?null:Se?Tt:""}xe&&$e&&Ee(xe.firstChild);for(var li=ar(wr?Ut:xe);vr=li.nextNode();)vr.nodeType===3&&vr===Ji||Zr(vr)||(vr.content instanceof l&&zi(vr.content),ni(vr),Ji=vr);if(Ji=null,wr)return Ut;if(ce){if(ge)for(si=Rt.call(xe.ownerDocument);xe.firstChild;)si.appendChild(xe.firstChild);else si=xe;return(Et.shadowroot||Et.shadowrootmod)&&(si=At.call(i,si,!0)),si}var Si=nt?xe.outerHTML:xe.innerHTML;return nt&&dt["!doctype"]&&xe.ownerDocument&&xe.ownerDocument.doctype&&xe.ownerDocument.doctype.name&&es(cU,xe.ownerDocument.doctype.name)&&(Si="<!DOCTYPE "+xe.ownerDocument.doctype.name+`>
`+Si),Qe&&(Si=Po(Si,wt," "),Si=Po(Si,Xt," "),Si=Po(Si,Gt," ")),St&&Se?St.createHTML(Si):Si},t.setConfig=function(Ut){kt(Ut),dr=!0},t.clearConfig=function(){tt=null,dr=!1},t.isValidAttribute=function(Ut,Fe,xe){tt||kt({});var Kr=q(Ut),vr=q(Fe);return cr(Kr,vr,xe)},t.addHook=function(Ut,Fe){typeof Fe=="function"&&(bt[Ut]=bt[Ut]||[],Oh(bt[Ut],Fe))},t.removeHook=function(Ut){if(bt[Ut])return O2(bt[Ut])},t.removeHooks=function(Ut){bt[Ut]&&(bt[Ut]=[])},t.removeAllHooks=function(){bt={}},t}var pU=K2();const fU=Object.freeze(Object.defineProperty({__proto__:null,default:pU},Symbol.toStringTag,{value:"Module"}));var Iu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $2(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Rh=function(n){return n&&n.Math===Math&&n},yn=Rh(typeof globalThis=="object"&&globalThis)||Rh(typeof window=="object"&&window)||Rh(typeof self=="object"&&self)||Rh(typeof Iu=="object"&&Iu)||Rh(typeof Iu=="object"&&Iu)||function(){return this}()||Function("return this")(),zh={},vn=function(n){try{return!!n()}catch{return!0}},gU=vn,Lo=!gU(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),mU=vn,Vp=!mU(function(){var n=(function(){}).bind();return typeof n!="function"||n.hasOwnProperty("prototype")}),yU=Vp,jp=Function.prototype.call,rs=yU?jp.bind(jp):function(){return jp.apply(jp,arguments)},q2={},G2={}.propertyIsEnumerable,W2=Object.getOwnPropertyDescriptor,vU=W2&&!G2.call({1:2},1);q2.f=vU?function(n){var t=W2(this,n);return!!t&&t.enumerable}:G2;var Rm=function(n,t){return{enumerable:!(n&1),configurable:!(n&2),writable:!(n&4),value:t}},X2=Vp,Z2=Function.prototype,zm=Z2.call,wU=X2&&Z2.bind.bind(zm,zm),wn=X2?wU:function(n){return function(){return zm.apply(n,arguments)}},Y2=wn,_U=Y2({}.toString),bU=Y2("".slice),xc=function(n){return bU(_U(n),8,-1)},xU=wn,BU=vn,CU=xc,Hm=Object,FU=xU("".split),J2=BU(function(){return!Hm("z").propertyIsEnumerable(0)})?function(n){return CU(n)==="String"?FU(n,""):Hm(n)}:Hm,Bc=function(n){return n==null},SU=Bc,IU=TypeError,Qo=function(n){if(SU(n))throw new IU("Can't call method on "+n);return n},EU=J2,TU=Qo,Hh=function(n){return EU(TU(n))},Vm=typeof document=="object"&&document.all,_n=typeof Vm>"u"&&Vm!==void 0?function(n){return typeof n=="function"||n===Vm}:function(n){return typeof n=="function"},UU=_n,Mo=function(n){return typeof n=="object"?n!==null:UU(n)},jm=yn,PU=_n,LU=function(n){return PU(n)?n:void 0},Cc=function(n,t){return arguments.length<2?LU(jm[n]):jm[n]&&jm[n][t]},QU=wn,Kp=QU({}.isPrototypeOf),$p=typeof navigator<"u"&&String(navigator.userAgent)||"",t_=yn,Km=$p,e_=t_.process,r_=t_.Deno,i_=e_&&e_.versions||r_&&r_.version,n_=i_&&i_.v8,ko,qp;n_&&(ko=n_.split("."),qp=ko[0]>0&&ko[0]<4?1:+(ko[0]+ko[1])),!qp&&Km&&(ko=Km.match(/Edge\/(\d+)/),(!ko||ko[1]>=74)&&(ko=Km.match(/Chrome\/(\d+)/),ko&&(qp=+ko[1])));var $m=qp,s_=$m,MU=vn,kU=yn,DU=kU.String,a_=!!Object.getOwnPropertySymbols&&!MU(function(){var n=Symbol("symbol detection");return!DU(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&s_&&s_<41}),NU=a_,o_=NU&&!Symbol.sham&&typeof Symbol.iterator=="symbol",OU=Cc,RU=_n,zU=Kp,HU=o_,VU=Object,A_=HU?function(n){return typeof n=="symbol"}:function(n){var t=OU("Symbol");return RU(t)&&zU(t.prototype,VU(n))},jU=String,Gp=function(n){try{return jU(n)}catch{return"Object"}},KU=_n,$U=Gp,qU=TypeError,WA=function(n){if(KU(n))return n;throw new qU($U(n)+" is not a function")},GU=WA,WU=Bc,Eu=function(n,t){var i=n[t];return WU(i)?void 0:GU(i)},qm=rs,Gm=_n,Wm=Mo,XU=TypeError,ZU=function(n,t){var i,s;if(t==="string"&&Gm(i=n.toString)&&!Wm(s=qm(i,n))||Gm(i=n.valueOf)&&!Wm(s=qm(i,n))||t!=="string"&&Gm(i=n.toString)&&!Wm(s=qm(i,n)))return s;throw new XU("Can't convert object to primitive value")},l_={exports:{}},c_=yn,YU=Object.defineProperty,Xm=function(n,t){try{YU(c_,n,{value:t,configurable:!0,writable:!0})}catch{c_[n]=t}return t},JU=yn,tP=Xm,u_="__core-js_shared__",h_=l_.exports=JU[u_]||tP(u_,{});(h_.versions||(h_.versions=[])).push({version:"3.37.1",mode:"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE",source:"https://github.com/zloirock/core-js"});var Zm=l_.exports,d_=Zm,Ym=function(n,t){return d_[n]||(d_[n]=t||{})},eP=Qo,rP=Object,Wp=function(n){return rP(eP(n))},iP=wn,nP=Wp,sP=iP({}.hasOwnProperty),Do=Object.hasOwn||function(n,t){return sP(nP(n),t)},aP=wn,oP=0,AP=Math.random(),lP=aP(1 .toString),p_=function(n){return"Symbol("+(n===void 0?"":n)+")_"+lP(++oP+AP,36)},cP=yn,uP=Ym,f_=Do,hP=p_,dP=a_,pP=o_,Tu=cP.Symbol,Jm=uP("wks"),fP=pP?Tu.for||Tu:Tu&&Tu.withoutSetter||hP,On=function(n){return f_(Jm,n)||(Jm[n]=dP&&f_(Tu,n)?Tu[n]:fP("Symbol."+n)),Jm[n]},gP=rs,g_=Mo,m_=A_,mP=Eu,yP=ZU,vP=On,wP=TypeError,_P=vP("toPrimitive"),bP=function(n,t){if(!g_(n)||m_(n))return n;var i=mP(n,_P),s;if(i){if(t===void 0&&(t="default"),s=gP(i,n,t),!g_(s)||m_(s))return s;throw new wP("Can't convert object to primitive value")}return t===void 0&&(t="number"),yP(n,t)},xP=bP,BP=A_,y_=function(n){var t=xP(n,"string");return BP(t)?t:t+""},CP=yn,v_=Mo,t0=CP.document,FP=v_(t0)&&v_(t0.createElement),Xp=function(n){return FP?t0.createElement(n):{}},SP=Lo,IP=vn,EP=Xp,w_=!SP&&!IP(function(){return Object.defineProperty(EP("div"),"a",{get:function(){return 7}}).a!==7}),TP=Lo,UP=rs,PP=q2,LP=Rm,QP=Hh,MP=y_,kP=Do,DP=w_,__=Object.getOwnPropertyDescriptor;zh.f=TP?__:function(n,t){if(n=QP(n),t=MP(t),DP)try{return __(n,t)}catch{}if(kP(n,t))return LP(!UP(PP.f,n,t),n[t])};var XA={},NP=Lo,OP=vn,b_=NP&&OP(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),RP=Mo,zP=String,HP=TypeError,Os=function(n){if(RP(n))return n;throw new HP(zP(n)+" is not an object")},VP=Lo,jP=w_,KP=b_,Zp=Os,x_=y_,$P=TypeError,e0=Object.defineProperty,qP=Object.getOwnPropertyDescriptor,r0="enumerable",i0="configurable",n0="writable";XA.f=VP?KP?function(n,t,i){if(Zp(n),t=x_(t),Zp(i),typeof n=="function"&&t==="prototype"&&"value"in i&&n0 in i&&!i[n0]){var s=qP(n,t);s&&s[n0]&&(n[t]=i.value,i={configurable:i0 in i?i[i0]:s[i0],enumerable:r0 in i?i[r0]:s[r0],writable:!1})}return e0(n,t,i)}:e0:function(n,t,i){if(Zp(n),t=x_(t),Zp(i),jP)try{return e0(n,t,i)}catch{}if("get"in i||"set"in i)throw new $P("Accessors not supported");return"value"in i&&(n[t]=i.value),n};var GP=Lo,WP=XA,XP=Rm,Vh=GP?function(n,t,i){return WP.f(n,t,XP(1,i))}:function(n,t,i){return n[t]=i,n},B_={exports:{}},s0=Lo,ZP=Do,C_=Function.prototype,YP=s0&&Object.getOwnPropertyDescriptor,a0=ZP(C_,"name"),JP=a0&&(function(){}).name==="something",tL=a0&&(!s0||s0&&YP(C_,"name").configurable),Yp={EXISTS:a0,PROPER:JP,CONFIGURABLE:tL},eL=wn,rL=_n,o0=Zm,iL=eL(Function.toString);rL(o0.inspectSource)||(o0.inspectSource=function(n){return iL(n)});var A0=o0.inspectSource,nL=yn,sL=_n,F_=nL.WeakMap,aL=sL(F_)&&/native code/.test(String(F_)),oL=Ym,AL=p_,S_=oL("keys"),l0=function(n){return S_[n]||(S_[n]=AL(n))},c0={},lL=aL,I_=yn,cL=Mo,uL=Vh,u0=Do,h0=Zm,hL=l0,dL=c0,E_="Object already initialized",d0=I_.TypeError,pL=I_.WeakMap,Jp,jh,tf,fL=function(n){return tf(n)?jh(n):Jp(n,{})},gL=function(n){return function(t){var i;if(!cL(t)||(i=jh(t)).type!==n)throw new d0("Incompatible receiver, "+n+" required");return i}};if(lL||h0.state){var cA=h0.state||(h0.state=new pL);cA.get=cA.get,cA.has=cA.has,cA.set=cA.set,Jp=function(n,t){if(cA.has(n))throw new d0(E_);return t.facade=n,cA.set(n,t),t},jh=function(n){return cA.get(n)||{}},tf=function(n){return cA.has(n)}}else{var Uu=hL("state");dL[Uu]=!0,Jp=function(n,t){if(u0(n,Uu))throw new d0(E_);return t.facade=n,uL(n,Uu,t),t},jh=function(n){return u0(n,Uu)?n[Uu]:{}},tf=function(n){return u0(n,Uu)}}var ef={set:Jp,get:jh,has:tf,enforce:fL,getterFor:gL},p0=wn,mL=vn,yL=_n,rf=Do,f0=Lo,vL=Yp.CONFIGURABLE,wL=A0,T_=ef,_L=T_.enforce,bL=T_.get,U_=String,nf=Object.defineProperty,xL=p0("".slice),BL=p0("".replace),CL=p0([].join),FL=f0&&!mL(function(){return nf(function(){},"length",{value:8}).length!==8}),SL=String(String).split("String"),IL=B_.exports=function(n,t,i){xL(U_(t),0,7)==="Symbol("&&(t="["+BL(U_(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),i&&i.getter&&(t="get "+t),i&&i.setter&&(t="set "+t),(!rf(n,"name")||vL&&n.name!==t)&&(f0?nf(n,"name",{value:t,configurable:!0}):n.name=t),FL&&i&&rf(i,"arity")&&n.length!==i.arity&&nf(n,"length",{value:i.arity});try{i&&rf(i,"constructor")&&i.constructor?f0&&nf(n,"prototype",{writable:!1}):n.prototype&&(n.prototype=void 0)}catch{}var s=_L(n);return rf(s,"source")||(s.source=CL(SL,typeof t=="string"?t:"")),n};Function.prototype.toString=IL(function(){return yL(this)&&bL(this).source||wL(this)},"toString");var P_=B_.exports,EL=_n,TL=XA,UL=P_,PL=Xm,Fc=function(n,t,i,s){s||(s={});var l=s.enumerable,h=s.name!==void 0?s.name:t;if(EL(i)&&UL(i,h,s),s.global)l?n[t]=i:PL(t,i);else{try{s.unsafe?n[t]&&(l=!0):delete n[t]}catch{}l?n[t]=i:TL.f(n,t,{value:i,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return n},L_={},LL=Math.ceil,QL=Math.floor,ML=Math.trunc||function(n){var t=+n;return(t>0?QL:LL)(t)},kL=ML,sf=function(n){var t=+n;return t!==t||t===0?0:kL(t)},DL=sf,NL=Math.max,OL=Math.min,RL=function(n,t){var i=DL(n);return i<0?NL(i+t,0):OL(i,t)},zL=sf,HL=Math.min,Pu=function(n){var t=zL(n);return t>0?HL(t,9007199254740991):0},VL=Pu,g0=function(n){return VL(n.length)},jL=Hh,KL=RL,$L=g0,Q_=function(n){return function(t,i,s){var l=jL(t),h=$L(l);if(h===0)return!n&&-1;var p=KL(s,h),o;if(n&&i!==i){for(;h>p;)if(o=l[p++],o!==o)return!0}else for(;h>p;p++)if((n||p in l)&&l[p]===i)return n||p||0;return!n&&-1}},M_={includes:Q_(!0),indexOf:Q_(!1)},qL=wn,m0=Do,GL=Hh,WL=M_.indexOf,XL=c0,k_=qL([].push),D_=function(n,t){var i=GL(n),s=0,l=[],h;for(h in i)!m0(XL,h)&&m0(i,h)&&k_(l,h);for(;t.length>s;)m0(i,h=t[s++])&&(~WL(l,h)||k_(l,h));return l},y0=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ZL=D_,YL=y0,JL=YL.concat("length","prototype");L_.f=Object.getOwnPropertyNames||function(n){return ZL(n,JL)};var N_={};N_.f=Object.getOwnPropertySymbols;var tQ=Cc,eQ=wn,rQ=L_,iQ=N_,nQ=Os,sQ=eQ([].concat),aQ=tQ("Reflect","ownKeys")||function(n){var t=rQ.f(nQ(n)),i=iQ.f;return i?sQ(t,i(n)):t},O_=Do,oQ=aQ,AQ=zh,lQ=XA,cQ=function(n,t,i){for(var s=oQ(t),l=lQ.f,h=AQ.f,p=0;p<s.length;p++){var o=s[p];!O_(n,o)&&!(i&&O_(i,o))&&l(n,o,h(t,o))}},uQ=vn,hQ=_n,dQ=/#|\.prototype\./,Kh=function(n,t){var i=fQ[pQ(n)];return i===mQ?!0:i===gQ?!1:hQ(t)?uQ(t):!!t},pQ=Kh.normalize=function(n){return String(n).replace(dQ,".").toLowerCase()},fQ=Kh.data={},gQ=Kh.NATIVE="N",mQ=Kh.POLYFILL="P",R_=Kh,af=yn,yQ=zh.f,vQ=Vh,wQ=Fc,_Q=Xm,bQ=cQ,xQ=R_,Rs=function(n,t){var i=n.target,s=n.global,l=n.stat,h,p,o,v,C,I;if(s?p=af:l?p=af[i]||_Q(i,{}):p=af[i]&&af[i].prototype,p)for(o in t){if(C=t[o],n.dontCallGetSet?(I=yQ(p,o),v=I&&I.value):v=p[o],h=xQ(s?o:i+(l?".":"#")+o,n.forced),!h&&v!==void 0){if(typeof C==typeof v)continue;bQ(C,v)}(n.sham||v&&v.sham)&&vQ(C,"sham",!0),wQ(p,o,C,n)}},BQ=yn,CQ=xc,$h=CQ(BQ.process)==="process",FQ=wn,SQ=WA,IQ=function(n,t,i){try{return FQ(SQ(Object.getOwnPropertyDescriptor(n,t)[i]))}catch{}},EQ=Mo,TQ=function(n){return EQ(n)||n===null},UQ=TQ,PQ=String,LQ=TypeError,QQ=function(n){if(UQ(n))return n;throw new LQ("Can't set "+PQ(n)+" as a prototype")},MQ=IQ,kQ=Mo,DQ=Qo,NQ=QQ,z_=Object.setPrototypeOf||("__proto__"in{}?function(){var n=!1,t={},i;try{i=MQ(Object.prototype,"__proto__","set"),i(t,[]),n=t instanceof Array}catch{}return function(s,l){return DQ(s),NQ(l),kQ(s)&&(n?i(s,l):s.__proto__=l),s}}():void 0),OQ=XA.f,RQ=Do,zQ=On,H_=zQ("toStringTag"),of=function(n,t,i){n&&!i&&(n=n.prototype),n&&!RQ(n,H_)&&OQ(n,H_,{configurable:!0,value:t})},V_=P_,HQ=XA,VQ=function(n,t,i){return i.get&&V_(i.get,t,{getter:!0}),i.set&&V_(i.set,t,{setter:!0}),HQ.f(n,t,i)},jQ=Cc,KQ=VQ,$Q=On,qQ=Lo,j_=$Q("species"),GQ=function(n){var t=jQ(n);qQ&&t&&!t[j_]&&KQ(t,j_,{configurable:!0,get:function(){return this}})},WQ=Kp,XQ=TypeError,ZQ=function(n,t){if(WQ(t,n))return n;throw new XQ("Incorrect invocation")},YQ=On,JQ=YQ("toStringTag"),K_={};K_[JQ]="z";var t6=String(K_)==="[object z]",e6=t6,r6=_n,Af=xc,i6=On,n6=i6("toStringTag"),s6=Object,a6=Af(function(){return arguments}())==="Arguments",o6=function(n,t){try{return n[t]}catch{}},v0=e6?Af:function(n){var t,i,s;return n===void 0?"Undefined":n===null?"Null":typeof(i=o6(t=s6(n),n6))=="string"?i:a6?Af(t):(s=Af(t))==="Object"&&r6(t.callee)?"Arguments":s},A6=wn,l6=vn,$_=_n,c6=v0,u6=Cc,h6=A0,q_=function(){},G_=u6("Reflect","construct"),w0=/^\s*(?:class|function)\b/,d6=A6(w0.exec),p6=!w0.test(q_),qh=function(n){if(!$_(n))return!1;try{return G_(q_,[],n),!0}catch{return!1}},W_=function(n){if(!$_(n))return!1;switch(c6(n)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p6||!!d6(w0,h6(n))}catch{return!0}};W_.sham=!0;var f6=!G_||l6(function(){var n;return qh(qh.call)||!qh(Object)||!qh(function(){n=!0})||n})?W_:qh,g6=f6,m6=Gp,y6=TypeError,v6=function(n){if(g6(n))return n;throw new y6(m6(n)+" is not a constructor")},X_=Os,w6=v6,_6=Bc,b6=On,x6=b6("species"),Z_=function(n,t){var i=X_(n).constructor,s;return i===void 0||_6(s=X_(i)[x6])?t:w6(s)},B6=Vp,Y_=Function.prototype,J_=Y_.apply,tb=Y_.call,eb=typeof Reflect=="object"&&Reflect.apply||(B6?tb.bind(J_):function(){return tb.apply(J_,arguments)}),C6=xc,F6=wn,lf=function(n){if(C6(n)==="Function")return F6(n)},rb=lf,S6=WA,I6=Vp,E6=rb(rb.bind),_0=function(n,t){return S6(n),t===void 0?n:I6?E6(n,t):function(){return n.apply(t,arguments)}},T6=Cc,ib=T6("document","documentElement"),U6=wn,P6=U6([].slice),L6=TypeError,Q6=function(n,t){if(n<t)throw new L6("Not enough arguments");return n},M6=$p,nb=/(?:ipad|iphone|ipod).*applewebkit/i.test(M6),ba=yn,k6=eb,D6=_0,sb=_n,N6=Do,ab=vn,ob=ib,O6=P6,Ab=Xp,R6=Q6,z6=nb,H6=$h,b0=ba.setImmediate,x0=ba.clearImmediate,V6=ba.process,B0=ba.Dispatch,j6=ba.Function,lb=ba.MessageChannel,K6=ba.String,C0=0,Gh={},cb="onreadystatechange",Wh,Sc,F0,S0;ab(function(){Wh=ba.location});var I0=function(n){if(N6(Gh,n)){var t=Gh[n];delete Gh[n],t()}},E0=function(n){return function(){I0(n)}},ub=function(n){I0(n.data)},hb=function(n){ba.postMessage(K6(n),Wh.protocol+"//"+Wh.host)};(!b0||!x0)&&(b0=function(n){R6(arguments.length,1);var t=sb(n)?n:j6(n),i=O6(arguments,1);return Gh[++C0]=function(){k6(t,void 0,i)},Sc(C0),C0},x0=function(n){delete Gh[n]},H6?Sc=function(n){V6.nextTick(E0(n))}:B0&&B0.now?Sc=function(n){B0.now(E0(n))}:lb&&!z6?(F0=new lb,S0=F0.port2,F0.port1.onmessage=ub,Sc=D6(S0.postMessage,S0)):ba.addEventListener&&sb(ba.postMessage)&&!ba.importScripts&&Wh&&Wh.protocol!=="file:"&&!ab(hb)?(Sc=hb,ba.addEventListener("message",ub,!1)):cb in Ab("script")?Sc=function(n){ob.appendChild(Ab("script"))[cb]=function(){ob.removeChild(this),I0(n)}}:Sc=function(n){setTimeout(E0(n),0)});var db={set:b0,clear:x0},pb=yn,$6=Lo,q6=Object.getOwnPropertyDescriptor,G6=function(n){if(!$6)return pb[n];var t=q6(pb,n);return t&&t.value},fb=function(){this.head=null,this.tail=null};fb.prototype={add:function(n){var t={item:n,next:null},i=this.tail;i?i.next=t:this.head=t,this.tail=t},get:function(){var n=this.head;if(n){var t=this.head=n.next;return t===null&&(this.tail=null),n.item}}};var gb=fb,W6=$p,X6=/ipad|iphone|ipod/i.test(W6)&&typeof Pebble<"u",Z6=$p,Y6=/web0s(?!.*chrome)/i.test(Z6),Lu=yn,J6=G6,mb=_0,T0=db.set,tM=gb,eM=nb,rM=X6,iM=Y6,U0=$h,yb=Lu.MutationObserver||Lu.WebKitMutationObserver,vb=Lu.document,wb=Lu.process,cf=Lu.Promise,P0=J6("queueMicrotask"),Qu,L0,Q0,uf,_b;if(!P0){var hf=new tM,df=function(){var n,t;for(U0&&(n=wb.domain)&&n.exit();t=hf.get();)try{t()}catch(i){throw hf.head&&Qu(),i}n&&n.enter()};!eM&&!U0&&!iM&&yb&&vb?(L0=!0,Q0=vb.createTextNode(""),new yb(df).observe(Q0,{characterData:!0}),Qu=function(){Q0.data=L0=!L0}):!rM&&cf&&cf.resolve?(uf=cf.resolve(void 0),uf.constructor=cf,_b=mb(uf.then,uf),Qu=function(){_b(df)}):U0?Qu=function(){wb.nextTick(df)}:(T0=mb(T0,Lu),Qu=function(){T0(df)}),P0=function(n){hf.head||Qu(),hf.add(n)}}var nM=P0,sM=function(n,t){try{arguments.length===1?console.error(n):console.error(n,t)}catch{}},M0=function(n){try{return{error:!1,value:n()}}catch(t){return{error:!0,value:t}}},aM=yn,pf=aM.Promise,bb=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",oM=bb,AM=$h,lM=!oM&&!AM&&typeof window=="object"&&typeof document=="object",cM=yn,Xh=pf,uM=_n,hM=R_,dM=A0,pM=On,fM=lM,gM=bb,k0=$m;Xh&&Xh.prototype;var mM=pM("species"),D0=!1,xb=uM(cM.PromiseRejectionEvent),yM=hM("Promise",function(){var n=dM(Xh),t=n!==String(Xh);if(!t&&k0===66)return!0;if(!k0||k0<51||!/native code/.test(n)){var i=new Xh(function(h){h(1)}),s=function(h){h(function(){},function(){})},l=i.constructor={};if(l[mM]=s,D0=i.then(function(){})instanceof s,!D0)return!0}return!t&&(fM||gM)&&!xb}),Zh={CONSTRUCTOR:yM,REJECTION_EVENT:xb,SUBCLASSING:D0},Mu={},Bb=WA,vM=TypeError,wM=function(n){var t,i;this.promise=new n(function(s,l){if(t!==void 0||i!==void 0)throw new vM("Bad Promise constructor");t=s,i=l}),this.resolve=Bb(t),this.reject=Bb(i)};Mu.f=function(n){return new wM(n)};var _M=Rs,ff=$h,Ol=yn,ku=rs,Cb=Fc,Fb=z_,bM=of,xM=GQ,BM=WA,gf=_n,CM=Mo,FM=ZQ,SM=Z_,Sb=db.set,N0=nM,IM=sM,EM=M0,TM=gb,Ib=ef,mf=pf,O0=Zh,Eb=Mu,yf="Promise",Tb=O0.CONSTRUCTOR,UM=O0.REJECTION_EVENT,PM=O0.SUBCLASSING,R0=Ib.getterFor(yf),LM=Ib.set,Du=mf&&mf.prototype,Ic=mf,vf=Du,Ub=Ol.TypeError,z0=Ol.document,H0=Ol.process,V0=Eb.f,QM=V0,MM=!!(z0&&z0.createEvent&&Ol.dispatchEvent),Pb="unhandledrejection",kM="rejectionhandled",Lb=0,Qb=1,DM=2,j0=1,Mb=2,wf,kb,NM,Db,Nb=function(n){var t;return CM(n)&&gf(t=n.then)?t:!1},Ob=function(n,t){var i=t.value,s=t.state===Qb,l=s?n.ok:n.fail,h=n.resolve,p=n.reject,o=n.domain,v,C,I;try{l?(s||(t.rejection===Mb&&RM(t),t.rejection=j0),l===!0?v=i:(o&&o.enter(),v=l(i),o&&(o.exit(),I=!0)),v===n.promise?p(new Ub("Promise-chain cycle")):(C=Nb(v))?ku(C,v,h,p):h(v)):p(i)}catch(U){o&&!I&&o.exit(),p(U)}},Rb=function(n,t){n.notified||(n.notified=!0,N0(function(){for(var i=n.reactions,s;s=i.get();)Ob(s,n);n.notified=!1,t&&!n.rejection&&OM(n)}))},zb=function(n,t,i){var s,l;MM?(s=z0.createEvent("Event"),s.promise=t,s.reason=i,s.initEvent(n,!1,!0),Ol.dispatchEvent(s)):s={promise:t,reason:i},!UM&&(l=Ol["on"+n])?l(s):n===Pb&&IM("Unhandled promise rejection",i)},OM=function(n){ku(Sb,Ol,function(){var t=n.facade,i=n.value,s=Hb(n),l;if(s&&(l=EM(function(){ff?H0.emit("unhandledRejection",i,t):zb(Pb,t,i)}),n.rejection=ff||Hb(n)?Mb:j0,l.error))throw l.value})},Hb=function(n){return n.rejection!==j0&&!n.parent},RM=function(n){ku(Sb,Ol,function(){var t=n.facade;ff?H0.emit("rejectionHandled",t):zb(kM,t,n.value)})},Nu=function(n,t,i){return function(s){n(t,s,i)}},Ou=function(n,t,i){n.done||(n.done=!0,i&&(n=i),n.value=t,n.state=DM,Rb(n,!0))},K0=function(n,t,i){if(!n.done){n.done=!0,i&&(n=i);try{if(n.facade===t)throw new Ub("Promise can't be resolved itself");var s=Nb(t);s?N0(function(){var l={done:!1};try{ku(s,t,Nu(K0,l,n),Nu(Ou,l,n))}catch(h){Ou(l,h,n)}}):(n.value=t,n.state=Qb,Rb(n,!1))}catch(l){Ou({done:!1},l,n)}}};if(Tb&&(Ic=function(n){FM(this,vf),BM(n),ku(wf,this);var t=R0(this);try{n(Nu(K0,t),Nu(Ou,t))}catch(i){Ou(t,i)}},vf=Ic.prototype,wf=function(n){LM(this,{type:yf,done:!1,notified:!1,parent:!1,reactions:new TM,rejection:!1,state:Lb,value:void 0})},wf.prototype=Cb(vf,"then",function(n,t){var i=R0(this),s=V0(SM(this,Ic));return i.parent=!0,s.ok=gf(n)?n:!0,s.fail=gf(t)&&t,s.domain=ff?H0.domain:void 0,i.state===Lb?i.reactions.add(s):N0(function(){Ob(s,i)}),s.promise}),kb=function(){var n=new wf,t=R0(n);this.promise=n,this.resolve=Nu(K0,t),this.reject=Nu(Ou,t)},Eb.f=V0=function(n){return n===Ic||n===NM?new kb(n):QM(n)},gf(mf)&&Du!==Object.prototype)){Db=Du.then,PM||Cb(Du,"then",function(n,t){var i=this;return new Ic(function(s,l){ku(Db,i,s,l)}).then(n,t)},{unsafe:!0});try{delete Du.constructor}catch{}Fb&&Fb(Du,vf)}_M({global:!0,constructor:!0,wrap:!0,forced:Tb},{Promise:Ic}),bM(Ic,yf,!1),xM(yf);var Yh={},zM=On,HM=Yh,VM=zM("iterator"),jM=Array.prototype,KM=function(n){return n!==void 0&&(HM.Array===n||jM[VM]===n)},$M=v0,Vb=Eu,qM=Bc,GM=Yh,WM=On,XM=WM("iterator"),jb=function(n){if(!qM(n))return Vb(n,XM)||Vb(n,"@@iterator")||GM[$M(n)]},ZM=rs,YM=WA,JM=Os,tk=Gp,ek=jb,rk=TypeError,ik=function(n,t){var i=arguments.length<2?ek(n):t;if(YM(i))return JM(ZM(i,n));throw new rk(tk(n)+" is not iterable")},nk=rs,Kb=Os,sk=Eu,ak=function(n,t,i){var s,l;Kb(n);try{if(s=sk(n,"return"),!s){if(t==="throw")throw i;return i}s=nk(s,n)}catch(h){l=!0,s=h}if(t==="throw")throw i;if(l)throw s;return Kb(s),i},ok=_0,Ak=rs,lk=Os,ck=Gp,uk=KM,hk=g0,$b=Kp,dk=ik,pk=jb,qb=ak,fk=TypeError,_f=function(n,t){this.stopped=n,this.result=t},Gb=_f.prototype,Wb=function(n,t,i){var s=i&&i.that,l=!!(i&&i.AS_ENTRIES),h=!!(i&&i.IS_RECORD),p=!!(i&&i.IS_ITERATOR),o=!!(i&&i.INTERRUPTED),v=ok(t,s),C,I,U,Q,P,K,V,Y=function(it){return C&&qb(C,"normal",it),new _f(!0,it)},$=function(it){return l?(lk(it),o?v(it[0],it[1],Y):v(it[0],it[1])):o?v(it,Y):v(it)};if(h)C=n.iterator;else if(p)C=n;else{if(I=pk(n),!I)throw new fk(ck(n)+" is not iterable");if(uk(I)){for(U=0,Q=hk(n);Q>U;U++)if(P=$(n[U]),P&&$b(Gb,P))return P;return new _f(!1)}C=dk(n,I)}for(K=h?n.next:C.next;!(V=Ak(K,C)).done;){try{P=$(V.value)}catch(it){qb(C,"throw",it)}if(typeof P=="object"&&P&&$b(Gb,P))return P}return new _f(!1)},gk=On,Xb=gk("iterator"),Zb=!1;try{var mk=0,Yb={next:function(){return{done:!!mk++}},return:function(){Zb=!0}};Yb[Xb]=function(){return this},Array.from(Yb,function(){throw 2})}catch{}var yk=function(n,t){try{if(!t&&!Zb)return!1}catch{return!1}var i=!1;try{var s={};s[Xb]=function(){return{next:function(){return{done:i=!0}}}},n(s)}catch{}return i},vk=pf,wk=yk,_k=Zh.CONSTRUCTOR,Jb=_k||!wk(function(n){vk.all(n).then(void 0,function(){})}),bk=Rs,xk=rs,Bk=WA,Ck=Mu,Fk=M0,Sk=Wb,Ik=Jb;bk({target:"Promise",stat:!0,forced:Ik},{all:function(n){var t=this,i=Ck.f(t),s=i.resolve,l=i.reject,h=Fk(function(){var p=Bk(t.resolve),o=[],v=0,C=1;Sk(n,function(I){var U=v++,Q=!1;C++,xk(p,t,I).then(function(P){Q||(Q=!0,o[U]=P,--C||s(o))},l)}),--C||s(o)});return h.error&&l(h.value),i.promise}});var Ek=Rs,Tk=Zh.CONSTRUCTOR,$0=pf,Uk=Cc,Pk=_n,Lk=Fc,tx=$0&&$0.prototype;if(Ek({target:"Promise",proto:!0,forced:Tk,real:!0},{catch:function(n){return this.then(void 0,n)}}),Pk($0)){var ex=Uk("Promise").prototype.catch;tx.catch!==ex&&Lk(tx,"catch",ex,{unsafe:!0})}var Qk=Rs,Mk=rs,kk=WA,Dk=Mu,Nk=M0,Ok=Wb,Rk=Jb;Qk({target:"Promise",stat:!0,forced:Rk},{race:function(n){var t=this,i=Dk.f(t),s=i.reject,l=Nk(function(){var h=kk(t.resolve);Ok(n,function(p){Mk(h,t,p).then(i.resolve,s)})});return l.error&&s(l.value),i.promise}});var zk=Rs,Hk=Mu,Vk=Zh.CONSTRUCTOR;zk({target:"Promise",stat:!0,forced:Vk},{reject:function(n){var t=Hk.f(this),i=t.reject;return i(n),t.promise}});var jk=Os,Kk=Mo,$k=Mu,qk=function(n,t){if(jk(n),Kk(t)&&t.constructor===n)return t;var i=$k.f(n),s=i.resolve;return s(t),i.promise},Gk=Rs,Wk=Cc,Xk=Zh.CONSTRUCTOR,Zk=qk;Wk("Promise"),Gk({target:"Promise",stat:!0,forced:Xk},{resolve:function(n){return Zk(this,n)}});function rx(n,t,i,s,l,h,p){try{var o=n[h](p),v=o.value}catch(C){return void i(C)}o.done?t(v):Promise.resolve(v).then(s,l)}function ZA(n){return function(){var t=this,i=arguments;return new Promise(function(s,l){var h=n.apply(t,i);function p(v){rx(h,s,l,p,o,"next",v)}function o(v){rx(h,s,l,p,o,"throw",v)}p(void 0)})}}var Yk=v0,Jk=String,uA=function(n){if(Yk(n)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return Jk(n)},tD=Os,ix=function(){var n=tD(this),t="";return n.hasIndices&&(t+="d"),n.global&&(t+="g"),n.ignoreCase&&(t+="i"),n.multiline&&(t+="m"),n.dotAll&&(t+="s"),n.unicode&&(t+="u"),n.unicodeSets&&(t+="v"),n.sticky&&(t+="y"),t},q0=vn,eD=yn,G0=eD.RegExp,W0=q0(function(){var n=G0("a","y");return n.lastIndex=2,n.exec("abcd")!==null}),rD=W0||q0(function(){return!G0("a","y").sticky}),iD=W0||q0(function(){var n=G0("^r","gy");return n.lastIndex=2,n.exec("str")!==null}),nx={BROKEN_CARET:iD,MISSED_STICKY:rD,UNSUPPORTED_Y:W0},sx={},nD=D_,sD=y0,aD=Object.keys||function(n){return nD(n,sD)},oD=Lo,AD=b_,lD=XA,cD=Os,uD=Hh,hD=aD;sx.f=oD&&!AD?Object.defineProperties:function(n,t){cD(n);for(var i=uD(t),s=hD(t),l=s.length,h=0,p;l>h;)lD.f(n,p=s[h++],i[p]);return n};var dD=Os,pD=sx,ax=y0,fD=c0,gD=ib,mD=Xp,yD=l0,ox=">",Ax="<",X0="prototype",Z0="script",lx=yD("IE_PROTO"),Y0=function(){},cx=function(n){return Ax+Z0+ox+n+Ax+"/"+Z0+ox},ux=function(n){n.write(cx("")),n.close();var t=n.parentWindow.Object;return n=null,t},vD=function(){var n=mD("iframe"),t="java"+Z0+":",i;return n.style.display="none",gD.appendChild(n),n.src=String(t),i=n.contentWindow.document,i.open(),i.write(cx("document.F=Object")),i.close(),i.F},bf,xf=function(){try{bf=new ActiveXObject("htmlfile")}catch{}xf=typeof document<"u"?document.domain&&bf?ux(bf):vD():ux(bf);for(var n=ax.length;n--;)delete xf[X0][ax[n]];return xf()};fD[lx]=!0;var J0=Object.create||function(n,t){var i;return n!==null?(Y0[X0]=dD(n),i=new Y0,Y0[X0]=null,i[lx]=n):i=xf(),t===void 0?i:pD.f(i,t)},wD=vn,_D=yn,bD=_D.RegExp,xD=wD(function(){var n=bD(".","s");return!(n.dotAll&&n.test(`
`)&&n.flags==="s")}),BD=vn,CD=yn,FD=CD.RegExp,SD=BD(function(){var n=FD("(?<a>b)","g");return n.exec("b").groups.a!=="b"||"b".replace(n,"$<a>c")!=="bc"}),Ru=rs,Bf=wn,ID=uA,ED=ix,TD=nx,UD=Ym,PD=J0,LD=ef.get,QD=xD,MD=SD,kD=UD("native-string-replace",String.prototype.replace),Cf=RegExp.prototype.exec,t1=Cf,DD=Bf("".charAt),ND=Bf("".indexOf),OD=Bf("".replace),e1=Bf("".slice),r1=function(){var n=/a/,t=/b*/g;return Ru(Cf,n,"a"),Ru(Cf,t,"a"),n.lastIndex!==0||t.lastIndex!==0}(),hx=TD.BROKEN_CARET,i1=/()??/.exec("")[1]!==void 0,RD=r1||i1||hx||QD||MD;RD&&(t1=function(n){var t=this,i=LD(t),s=ID(n),l=i.raw,h,p,o,v,C,I,U;if(l)return l.lastIndex=t.lastIndex,h=Ru(t1,l,s),t.lastIndex=l.lastIndex,h;var Q=i.groups,P=hx&&t.sticky,K=Ru(ED,t),V=t.source,Y=0,$=s;if(P&&(K=OD(K,"y",""),ND(K,"g")===-1&&(K+="g"),$=e1(s,t.lastIndex),t.lastIndex>0&&(!t.multiline||t.multiline&&DD(s,t.lastIndex-1)!==`
`)&&(V="(?: "+V+")",$=" "+$,Y++),p=new RegExp("^(?:"+V+")",K)),i1&&(p=new RegExp("^"+V+"$(?!\\s)",K)),r1&&(o=t.lastIndex),v=Ru(Cf,P?p:t,$),P?v?(v.input=e1(v.input,Y),v[0]=e1(v[0],Y),v.index=t.lastIndex,t.lastIndex+=v[0].length):t.lastIndex=0:r1&&v&&(t.lastIndex=t.global?v.index+v[0].length:o),i1&&v&&v.length>1&&Ru(kD,v[0],p,function(){for(C=1;C<arguments.length-2;C++)arguments[C]===void 0&&(v[C]=void 0)}),v&&Q)for(v.groups=I=PD(null),C=0;C<Q.length;C++)U=Q[C],I[U[0]]=v[U[1]];return v});var n1=t1,zD=Rs,dx=n1;zD({target:"RegExp",proto:!0,forced:/./.exec!==dx},{exec:dx});var px=rs,fx=Fc,HD=n1,gx=vn,mx=On,VD=Vh,jD=mx("species"),s1=RegExp.prototype,a1=function(n,t,i,s){var l=mx(n),h=!gx(function(){var C={};return C[l]=function(){return 7},""[n](C)!==7}),p=h&&!gx(function(){var C=!1,I=/a/;return n==="split"&&(I={},I.constructor={},I.constructor[jD]=function(){return I},I.flags="",I[l]=/./[l]),I.exec=function(){return C=!0,null},I[l](""),!C});if(!h||!p||i){var o=/./[l],v=t(l,""[n],function(C,I,U,Q,P){var K=I.exec;return K===HD||K===s1.exec?h&&!P?{done:!0,value:px(o,I,U,Q)}:{done:!0,value:px(C,U,I,Q)}:{done:!1}});fx(String.prototype,n,v[0]),fx(s1,l,v[1])}s&&VD(s1[l],"sham",!0)},o1=wn,KD=sf,$D=uA,qD=Qo,GD=o1("".charAt),yx=o1("".charCodeAt),WD=o1("".slice),vx=function(n){return function(t,i){var s=$D(qD(t)),l=KD(i),h=s.length,p,o;return l<0||l>=h?n?"":void 0:(p=yx(s,l),p<55296||p>56319||l+1===h||(o=yx(s,l+1))<56320||o>57343?n?GD(s,l):p:n?WD(s,l,l+2):(p-55296<<10)+(o-56320)+65536)}},XD={codeAt:vx(!1),charAt:vx(!0)},ZD=XD.charAt,A1=function(n,t,i){return t+(i?ZD(n,t).length:1)},wx=rs,YD=Os,JD=_n,t8=xc,e8=n1,r8=TypeError,l1=function(n,t){var i=n.exec;if(JD(i)){var s=wx(i,n,t);return s!==null&&YD(s),s}if(t8(n)==="RegExp")return wx(e8,n,t);throw new r8("RegExp#exec called on incompatible receiver")},i8=rs,n8=a1,s8=Os,a8=Bc,o8=Pu,c1=uA,A8=Qo,l8=Eu,c8=A1,_x=l1;n8("match",function(n,t,i){return[function(s){var l=A8(this),h=a8(s)?void 0:l8(s,n);return h?i8(h,s,l):new RegExp(s)[n](c1(l))},function(s){var l=s8(this),h=c1(s),p=i(t,l,h);if(p.done)return p.value;if(!l.global)return _x(l,h);var o=l.unicode;l.lastIndex=0;for(var v=[],C=0,I;(I=_x(l,h))!==null;){var U=c1(I[0]);v[C]=U,U===""&&(l.lastIndex=c8(h,o8(l.lastIndex),o)),C++}return C===0?null:v}]});var u1=wn,u8=Wp,h8=Math.floor,h1=u1("".charAt),d8=u1("".replace),d1=u1("".slice),p8=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,f8=/\$([$&'`]|\d{1,2})/g,g8=function(n,t,i,s,l,h){var p=i+n.length,o=s.length,v=f8;return l!==void 0&&(l=u8(l),v=p8),d8(h,v,function(C,I){var U;switch(h1(I,0)){case"$":return"$";case"&":return n;case"`":return d1(t,0,i);case"'":return d1(t,p);case"<":U=l[d1(I,1,-1)];break;default:var Q=+I;if(Q===0)return C;if(Q>o){var P=h8(Q/10);return P===0?C:P<=o?s[P-1]===void 0?h1(I,1):s[P-1]+h1(I,1):C}U=s[Q-1]}return U===void 0?"":U})},m8=eb,bx=rs,Ff=wn,y8=a1,v8=vn,w8=Os,_8=_n,b8=Bc,x8=sf,B8=Pu,zu=uA,C8=Qo,F8=A1,S8=Eu,I8=g8,E8=l1,T8=On,p1=T8("replace"),U8=Math.max,P8=Math.min,L8=Ff([].concat),f1=Ff([].push),xx=Ff("".indexOf),Bx=Ff("".slice),Q8=function(n){return n===void 0?n:String(n)},M8=function(){return"a".replace(/./,"$0")==="$0"}(),Cx=function(){return/./[p1]?/./[p1]("a","$0")==="":!1}(),k8=!v8(function(){var n=/./;return n.exec=function(){var t=[];return t.groups={a:"7"},t},"".replace(n,"$<a>")!=="7"});y8("replace",function(n,t,i){var s=Cx?"$":"$0";return[function(l,h){var p=C8(this),o=b8(l)?void 0:S8(l,p1);return o?bx(o,l,p,h):bx(t,zu(p),l,h)},function(l,h){var p=w8(this),o=zu(l);if(typeof h=="string"&&xx(h,s)===-1&&xx(h,"$<")===-1){var v=i(t,p,o,h);if(v.done)return v.value}var C=_8(h);C||(h=zu(h));var I=p.global,U;I&&(U=p.unicode,p.lastIndex=0);for(var Q=[],P;P=E8(p,o),!(P===null||(f1(Q,P),!I));){var K=zu(P[0]);K===""&&(p.lastIndex=F8(o,B8(p.lastIndex),U))}for(var V="",Y=0,$=0;$<Q.length;$++){P=Q[$];for(var it=zu(P[0]),ht=U8(P8(x8(P.index),o.length),0),St=[],Tt,Lt=1;Lt<P.length;Lt++)f1(St,Q8(P[Lt]));var Ft=P.groups;if(C){var yt=L8([it],St,ht,o);Ft!==void 0&&f1(yt,Ft),Tt=zu(m8(h,void 0,yt))}else Tt=I8(it,o,ht,St,Ft,h);ht>=Y&&(V+=Bx(o,Y,ht)+Tt,Y=ht+it.length)}return V+Bx(o,Y)}]},!k8||!M8||Cx);var D8=Mo,N8=xc,O8=On,R8=O8("match"),z8=function(n){var t;return D8(n)&&((t=n[R8])!==void 0?!!t:N8(n)==="RegExp")},H8=z8,V8=TypeError,g1=function(n){if(H8(n))throw new V8("The method doesn't accept regular expressions");return n},j8=On,K8=j8("match"),m1=function(n){var t=/./;try{"/./"[n](t)}catch{try{return t[K8]=!1,"/./"[n](t)}catch{}}return!1},$8=Rs,q8=lf,G8=zh.f,W8=Pu,Fx=uA,X8=g1,Z8=Qo,Y8=m1,J8=q8("".slice),tN=Math.min,Sx=Y8("startsWith"),eN=!Sx&&!!function(){var n=G8(String.prototype,"startsWith");return n&&!n.writable}();$8({target:"String",proto:!0,forced:!eN&&!Sx},{startsWith:function(n){var t=Fx(Z8(this));X8(n);var i=W8(tN(arguments.length>1?arguments[1]:void 0,t.length)),s=Fx(n);return J8(t,i,i+s.length)===s}});var rN=On,iN=J0,nN=XA.f,y1=rN("unscopables"),v1=Array.prototype;v1[y1]===void 0&&nN(v1,y1,{configurable:!0,value:iN(null)});var sN=function(n){v1[y1][n]=!0},aN=vn,oN=!aN(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype}),AN=Do,lN=_n,cN=Wp,uN=l0,hN=oN,Ix=uN("IE_PROTO"),w1=Object,dN=w1.prototype,Ex=hN?w1.getPrototypeOf:function(n){var t=cN(n);if(AN(t,Ix))return t[Ix];var i=t.constructor;return lN(i)&&t instanceof i?i.prototype:t instanceof w1?dN:null},pN=vn,fN=_n,gN=Mo,Tx=Ex,mN=Fc,yN=On,_1=yN("iterator"),Ux=!1,Ec,b1,x1;[].keys&&(x1=[].keys(),"next"in x1?(b1=Tx(Tx(x1)),b1!==Object.prototype&&(Ec=b1)):Ux=!0);var vN=!gN(Ec)||pN(function(){var n={};return Ec[_1].call(n)!==n});vN&&(Ec={}),fN(Ec[_1])||mN(Ec,_1,function(){return this});var Px={IteratorPrototype:Ec,BUGGY_SAFARI_ITERATORS:Ux},wN=Px.IteratorPrototype,_N=J0,bN=Rm,xN=of,BN=Yh,CN=function(){return this},FN=function(n,t,i,s){var l=t+" Iterator";return n.prototype=_N(wN,{next:bN(+!s,i)}),xN(n,l,!1),BN[l]=CN,n},SN=Rs,IN=rs,Lx=Yp,EN=_n,TN=FN,Qx=Ex,Mx=z_,UN=of,PN=Vh,B1=Fc,LN=On,QN=Yh,kx=Px,MN=Lx.PROPER,kN=Lx.CONFIGURABLE,Dx=kx.IteratorPrototype,Sf=kx.BUGGY_SAFARI_ITERATORS,Jh=LN("iterator"),Nx="keys",td="values",Ox="entries",DN=function(){return this},NN=function(n,t,i,s,l,h,p){TN(i,t,s);var o=function($){if($===l&&Q)return Q;if(!Sf&&$&&$ in I)return I[$];switch($){case Nx:return function(){return new i(this,$)};case td:return function(){return new i(this,$)};case Ox:return function(){return new i(this,$)}}return function(){return new i(this)}},v=t+" Iterator",C=!1,I=n.prototype,U=I[Jh]||I["@@iterator"]||l&&I[l],Q=!Sf&&U||o(l),P=t==="Array"&&I.entries||U,K,V,Y;if(P&&(K=Qx(P.call(new n)),K!==Object.prototype&&K.next&&(Qx(K)!==Dx&&(Mx?Mx(K,Dx):EN(K[Jh])||B1(K,Jh,DN)),UN(K,v,!0))),MN&&l===td&&U&&U.name!==td&&(kN?PN(I,"name",td):(C=!0,Q=function(){return IN(U,this)})),l)if(V={values:o(td),keys:h?Q:o(Nx),entries:o(Ox)},p)for(Y in V)(Sf||C||!(Y in I))&&B1(I,Y,V[Y]);else SN({target:t,proto:!0,forced:Sf||C},V);return I[Jh]!==Q&&B1(I,Jh,Q,{name:l}),QN[t]=Q,V},ON=function(n,t){return{value:n,done:t}},RN=Hh,C1=sN,Rx=Yh,zx=ef,zN=XA.f,HN=NN,If=ON,VN=Lo,Hx="Array Iterator",jN=zx.set,KN=zx.getterFor(Hx),$N=HN(Array,"Array",function(n,t){jN(this,{type:Hx,target:RN(n),index:0,kind:t})},function(){var n=KN(this),t=n.target,i=n.index++;if(!t||i>=t.length)return n.target=void 0,If(void 0,!0);switch(n.kind){case"keys":return If(i,!1);case"values":return If(t[i],!1)}return If([i,t[i]],!1)},"values"),Vx=Rx.Arguments=Rx.Array;if(C1("keys"),C1("values"),C1("entries"),VN&&Vx.name!=="values")try{zN(Vx,"name",{value:"values"})}catch{}var qN={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},GN=Xp,F1=GN("span").classList,jx=F1&&F1.constructor&&F1.constructor.prototype,WN=jx===Object.prototype?void 0:jx,Kx=yn,$x=qN,XN=WN,ed=$N,qx=Vh,ZN=of,YN=On,S1=YN("iterator"),I1=ed.values,Gx=function(n,t){if(n){if(n[S1]!==I1)try{qx(n,S1,I1)}catch{n[S1]=I1}if(ZN(n,t,!0),$x[t]){for(var i in ed)if(n[i]!==ed[i])try{qx(n,i,ed[i])}catch{n[i]=ed[i]}}}};for(var E1 in $x)Gx(Kx[E1]&&Kx[E1].prototype,E1);Gx(XN,"DOMTokenList");function JN(n,t){if(ii(n)!="object"||!n)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var s=i.call(n,t||"default");if(ii(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function tO(n){var t=JN(n,"string");return ii(t)=="symbol"?t:t+""}function T1(n,t,i){return(t=tO(t))in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n}var eO=WA,rO=Wp,iO=J2,nO=g0,Wx=TypeError,Xx="Reduce of empty array with no initial value",Zx=function(n){return function(t,i,s,l){var h=rO(t),p=iO(h),o=nO(h);if(eO(i),o===0&&s<2)throw new Wx(Xx);var v=n?o-1:0,C=n?-1:1;if(s<2)for(;;){if(v in p){l=p[v],v+=C;break}if(v+=C,n?v<0:o<=v)throw new Wx(Xx)}for(;n?v>=0:o>v;v+=C)v in p&&(l=i(l,p[v],v,h));return l}},sO={left:Zx(!1),right:Zx(!0)},aO=vn,Yx=function(n,t){var i=[][n];return!!i&&aO(function(){i.call(null,t||function(){return 1},1)})},oO=Rs,AO=sO.left,lO=Yx,Jx=$m,cO=$h,uO=!cO&&Jx>79&&Jx<83,hO=uO||!lO("reduce");oO({target:"Array",proto:!0,forced:hO},{reduce:function(n){var t=arguments.length;return AO(this,n,t,t>1?arguments[1]:void 0)}});var dO=Rs,pO=lf,fO=zh.f,gO=Pu,tB=uA,mO=g1,yO=Qo,vO=m1,wO=pO("".slice),_O=Math.min,eB=vO("endsWith"),bO=!eB&&!!function(){var n=fO(String.prototype,"endsWith");return n&&!n.writable}();dO({target:"String",proto:!0,forced:!bO&&!eB},{endsWith:function(n){var t=tB(yO(this));mO(n);var i=arguments.length>1?arguments[1]:void 0,s=t.length,l=i===void 0?s:_O(gO(i),s),h=tB(n);return wO(t,l-h.length,l)===h}});var U1=rs,rB=wn,xO=a1,BO=Os,CO=Bc,FO=Qo,SO=Z_,IO=A1,EO=Pu,iB=uA,TO=Eu,nB=l1,UO=nx,PO=vn,Hu=UO.UNSUPPORTED_Y,LO=4294967295,QO=Math.min,P1=rB([].push),L1=rB("".slice),MO=!PO(function(){var n=/(?:)/,t=n.exec;n.exec=function(){return t.apply(this,arguments)};var i="ab".split(n);return i.length!==2||i[0]!=="a"||i[1]!=="b"}),sB="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;xO("split",function(n,t,i){var s="0".split(void 0,0).length?function(l,h){return l===void 0&&h===0?[]:U1(t,this,l,h)}:t;return[function(l,h){var p=FO(this),o=CO(l)?void 0:TO(l,n);return o?U1(o,l,p,h):U1(s,iB(p),l,h)},function(l,h){var p=BO(this),o=iB(l);if(!sB){var v=i(s,p,o,h,s!==t);if(v.done)return v.value}var C=SO(p,RegExp),I=p.unicode,U=(p.ignoreCase?"i":"")+(p.multiline?"m":"")+(p.unicode?"u":"")+(Hu?"g":"y"),Q=new C(Hu?"^(?:"+p.source+")":p,U),P=h===void 0?LO:h>>>0;if(P===0)return[];if(o.length===0)return nB(Q,o)===null?[o]:[];for(var K=0,V=0,Y=[];V<o.length;){Q.lastIndex=Hu?0:V;var $=nB(Q,Hu?L1(o,V):o),it;if($===null||(it=QO(EO(Q.lastIndex+(Hu?V:0)),o.length))===K)V=IO(o,V,I);else{if(P1(Y,L1(o,K,V)),Y.length===P)return Y;for(var ht=1;ht<=$.length-1;ht++)if(P1(Y,$[ht]),Y.length===P)return Y;V=K=it}}return P1(Y,L1(o,K)),Y}]},sB||!MO,Hu);var Ef={exports:{}},rd={exports:{}};(function(){var n,t,i,s,l,h;typeof performance<"u"&&performance!==null&&performance.now?rd.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(rd.exports=function(){return(n()-l)/1e6},t=process.hrtime,n=function(){var p;return p=t(),p[0]*1e9+p[1]},s=n(),h=process.uptime()*1e9,l=s-h):Date.now?(rd.exports=function(){return Date.now()-i},i=Date.now()):(rd.exports=function(){return new Date().getTime()-i},i=new Date().getTime())}).call(Iu);for(var kO=rd.exports,DO=kO,YA=typeof window>"u"?Iu:window,Tf=["moz","webkit"],Vu="AnimationFrame",ju=YA["request"+Vu],id=YA["cancel"+Vu]||YA["cancelRequest"+Vu],nd=0;!ju&&nd<Tf.length;nd++)ju=YA[Tf[nd]+"Request"+Vu],id=YA[Tf[nd]+"Cancel"+Vu]||YA[Tf[nd]+"CancelRequest"+Vu];if(!ju||!id){var Q1=0,aB=0,Tc=[],NO=1e3/60;ju=function(n){if(Tc.length===0){var t=DO(),i=Math.max(0,NO-(t-Q1));Q1=i+t,setTimeout(function(){var s=Tc.slice(0);Tc.length=0;for(var l=0;l<s.length;l++)if(!s[l].cancelled)try{s[l].callback(Q1)}catch(h){setTimeout(function(){throw h},0)}},Math.round(i))}return Tc.push({handle:++aB,callback:n,cancelled:!1}),aB},id=function(n){for(var t=0;t<Tc.length;t++)Tc[t].handle===n&&(Tc[t].cancelled=!0)}}Ef.exports=function(n){return ju.call(YA,n)},Ef.exports.cancel=function(){id.apply(YA,arguments)},Ef.exports.polyfill=function(n){n||(n=YA),n.requestAnimationFrame=ju,n.cancelAnimationFrame=id};var OO=Ef.exports;const M1=$2(OO);var oB=`	
\v\f\r                　\u2028\u2029\uFEFF`,RO=wn,zO=Qo,HO=uA,k1=oB,AB=RO("".replace),VO=RegExp("^["+k1+"]+"),jO=RegExp("(^|[^"+k1+"])["+k1+"]+$"),D1=function(n){return function(t){var i=HO(zO(t));return n&1&&(i=AB(i,VO,"")),n&2&&(i=AB(i,jO,"$1")),i}},KO={start:D1(1),end:D1(2),trim:D1(3)},$O=Yp.PROPER,qO=vn,lB=oB,cB="​᠎",GO=function(n){return qO(function(){return!!lB[n]()||cB[n]()!==cB||$O&&lB[n].name!==n})},WO=Rs,XO=KO.trim,ZO=GO;WO({target:"String",proto:!0,forced:ZO("trim")},{trim:function(){return XO(this)}});var YO=function(n){this.ok=!1,this.alpha=1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n=n.replace(/ /g,""),n=n.toLowerCase();var t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};n=t[n]||n;for(var i=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(v){return[parseInt(v[1]),parseInt(v[2]),parseInt(v[3]),parseFloat(v[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(v){return[parseInt(v[1]),parseInt(v[2]),parseInt(v[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(v){return[parseInt(v[1],16),parseInt(v[2],16),parseInt(v[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(v){return[parseInt(v[1]+v[1],16),parseInt(v[2]+v[2],16),parseInt(v[3]+v[3],16)]}}],s=0;s<i.length;s++){var l=i[s].re,h=i[s].process,p=l.exec(n);if(p){var o=h(p);this.r=o[0],this.g=o[1],this.b=o[2],o.length>3&&(this.alpha=o[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var v=this.r.toString(16),C=this.g.toString(16),I=this.b.toString(16);return v.length==1&&(v="0"+v),C.length==1&&(C="0"+C),I.length==1&&(I="0"+I),"#"+v+C+I},this.getHelpXML=function(){for(var v=new Array,C=0;C<i.length;C++)for(var I=i[C].example,U=0;U<I.length;U++)v[v.length]=I[U];for(var Q in t)v[v.length]=Q;var P=document.createElement("ul");P.setAttribute("id","rgbcolor-examples");for(var C=0;C<v.length;C++)try{var K=document.createElement("li"),V=new RGBColor(v[C]),Y=document.createElement("div");Y.style.cssText="margin: 3px; border: 1px solid black; background:"+V.toHex()+"; color:"+V.toHex(),Y.appendChild(document.createTextNode("test"));var $=document.createTextNode(" "+v[C]+" -> "+V.toRGB()+" -> "+V.toHex());K.appendChild(Y),K.appendChild($),P.appendChild(K)}catch{}return P}};const N1=$2(YO);var JO=Rs,tR=lf,eR=M_.indexOf,rR=Yx,O1=tR([].indexOf),uB=!!O1&&1/O1([1],1,-0)<0,iR=uB||!rR("indexOf");JO({target:"Array",proto:!0,forced:iR},{indexOf:function(n){var t=arguments.length>1?arguments[1]:void 0;return uB?O1(this,n,t)||0:eR(this,n,t)}});var nR=Rs,sR=wn,aR=g1,oR=Qo,hB=uA,AR=m1,lR=sR("".indexOf);nR({target:"String",proto:!0,forced:!AR("includes")},{includes:function(n){return!!~lR(hB(oR(this)),hB(aR(n)),arguments.length>1?arguments[1]:void 0)}});var cR=xc,uR=Array.isArray||function(n){return cR(n)==="Array"},hR=Rs,dR=wn,pR=uR,fR=dR([].reverse),dB=[1,2];hR({target:"Array",proto:!0,forced:String(dB)===String(dB.reverse())},{reverse:function(){return pR(this)&&(this.length=this.length),fR(this)}});/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var pB=function(n,t){return(pB=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(i[l]=s[l])})(n,t)};function fB(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}pB(n,t),n.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}function gR(n){var t="";Array.isArray(n)||(n=[n]);for(var i=0;i<n.length;i++){var s=n[i];if(s.type===Be.CLOSE_PATH)t+="z";else if(s.type===Be.HORIZ_LINE_TO)t+=(s.relative?"h":"H")+s.x;else if(s.type===Be.VERT_LINE_TO)t+=(s.relative?"v":"V")+s.y;else if(s.type===Be.MOVE_TO)t+=(s.relative?"m":"M")+s.x+" "+s.y;else if(s.type===Be.LINE_TO)t+=(s.relative?"l":"L")+s.x+" "+s.y;else if(s.type===Be.CURVE_TO)t+=(s.relative?"c":"C")+s.x1+" "+s.y1+" "+s.x2+" "+s.y2+" "+s.x+" "+s.y;else if(s.type===Be.SMOOTH_CURVE_TO)t+=(s.relative?"s":"S")+s.x2+" "+s.y2+" "+s.x+" "+s.y;else if(s.type===Be.QUAD_TO)t+=(s.relative?"q":"Q")+s.x1+" "+s.y1+" "+s.x+" "+s.y;else if(s.type===Be.SMOOTH_QUAD_TO)t+=(s.relative?"t":"T")+s.x+" "+s.y;else{if(s.type!==Be.ARC)throw new Error('Unexpected command type "'+s.type+'" at index '+i+".");t+=(s.relative?"a":"A")+s.rX+" "+s.rY+" "+s.xRot+" "+ +s.lArcFlag+" "+ +s.sweepFlag+" "+s.x+" "+s.y}}return t}function R1(n,t){var i=n[0],s=n[1];return[i*Math.cos(t)-s*Math.sin(t),i*Math.sin(t)+s*Math.cos(t)]}function No(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];for(var i=0;i<n.length;i++)if(typeof n[i]!="number")throw new Error("assertNumbers arguments["+i+"] is not a number. "+typeof n[i]+" == typeof "+n[i]);return!0}var Rl=Math.PI;function z1(n,t,i){n.lArcFlag=n.lArcFlag===0?0:1,n.sweepFlag=n.sweepFlag===0?0:1;var s=n.rX,l=n.rY,h=n.x,p=n.y;s=Math.abs(n.rX),l=Math.abs(n.rY);var o=R1([(t-h)/2,(i-p)/2],-n.xRot/180*Rl),v=o[0],C=o[1],I=Math.pow(v,2)/Math.pow(s,2)+Math.pow(C,2)/Math.pow(l,2);1<I&&(s*=Math.sqrt(I),l*=Math.sqrt(I)),n.rX=s,n.rY=l;var U=Math.pow(s,2)*Math.pow(C,2)+Math.pow(l,2)*Math.pow(v,2),Q=(n.lArcFlag!==n.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(s,2)*Math.pow(l,2)-U)/U)),P=s*C/l*Q,K=-l*v/s*Q,V=R1([P,K],n.xRot/180*Rl);n.cX=V[0]+(t+h)/2,n.cY=V[1]+(i+p)/2,n.phi1=Math.atan2((C-K)/l,(v-P)/s),n.phi2=Math.atan2((-C-K)/l,(-v-P)/s),n.sweepFlag===0&&n.phi2>n.phi1&&(n.phi2-=2*Rl),n.sweepFlag===1&&n.phi2<n.phi1&&(n.phi2+=2*Rl),n.phi1*=180/Rl,n.phi2*=180/Rl}function gB(n,t,i){No(n,t,i);var s=n*n+t*t-i*i;if(0>s)return[];if(s===0)return[[n*i/(n*n+t*t),t*i/(n*n+t*t)]];var l=Math.sqrt(s);return[[(n*i+t*l)/(n*n+t*t),(t*i-n*l)/(n*n+t*t)],[(n*i-t*l)/(n*n+t*t),(t*i+n*l)/(n*n+t*t)]]}var Fn,JA=Math.PI/180;function mB(n,t,i){return(1-i)*n+i*t}function yB(n,t,i,s){return n+Math.cos(s/180*Rl)*t+Math.sin(s/180*Rl)*i}function vB(n,t,i,s){var l=1e-6,h=t-n,p=i-t,o=3*h+3*(s-i)-6*p,v=6*(p-h),C=3*h;return Math.abs(o)<l?[-C/v]:function(I,U,Q){var P=I*I/4-U;if(P<-Q)return[];if(P<=Q)return[-I/2];var K=Math.sqrt(P);return[-I/2-K,-I/2+K]}(v/o,C/o,l)}function wB(n,t,i,s,l){var h=1-l;return n*(h*h*h)+t*(3*h*h*l)+i*(3*h*l*l)+s*(l*l*l)}(function(n){function t(){return l(function(o,v,C){return o.relative&&(o.x1!==void 0&&(o.x1+=v),o.y1!==void 0&&(o.y1+=C),o.x2!==void 0&&(o.x2+=v),o.y2!==void 0&&(o.y2+=C),o.x!==void 0&&(o.x+=v),o.y!==void 0&&(o.y+=C),o.relative=!1),o})}function i(){var o=NaN,v=NaN,C=NaN,I=NaN;return l(function(U,Q,P){return U.type&Be.SMOOTH_CURVE_TO&&(U.type=Be.CURVE_TO,o=isNaN(o)?Q:o,v=isNaN(v)?P:v,U.x1=U.relative?Q-o:2*Q-o,U.y1=U.relative?P-v:2*P-v),U.type&Be.CURVE_TO?(o=U.relative?Q+U.x2:U.x2,v=U.relative?P+U.y2:U.y2):(o=NaN,v=NaN),U.type&Be.SMOOTH_QUAD_TO&&(U.type=Be.QUAD_TO,C=isNaN(C)?Q:C,I=isNaN(I)?P:I,U.x1=U.relative?Q-C:2*Q-C,U.y1=U.relative?P-I:2*P-I),U.type&Be.QUAD_TO?(C=U.relative?Q+U.x1:U.x1,I=U.relative?P+U.y1:U.y1):(C=NaN,I=NaN),U})}function s(){var o=NaN,v=NaN;return l(function(C,I,U){if(C.type&Be.SMOOTH_QUAD_TO&&(C.type=Be.QUAD_TO,o=isNaN(o)?I:o,v=isNaN(v)?U:v,C.x1=C.relative?I-o:2*I-o,C.y1=C.relative?U-v:2*U-v),C.type&Be.QUAD_TO){o=C.relative?I+C.x1:C.x1,v=C.relative?U+C.y1:C.y1;var Q=C.x1,P=C.y1;C.type=Be.CURVE_TO,C.x1=((C.relative?0:I)+2*Q)/3,C.y1=((C.relative?0:U)+2*P)/3,C.x2=(C.x+2*Q)/3,C.y2=(C.y+2*P)/3}else o=NaN,v=NaN;return C})}function l(o){var v=0,C=0,I=NaN,U=NaN;return function(Q){if(isNaN(I)&&!(Q.type&Be.MOVE_TO))throw new Error("path must start with moveto");var P=o(Q,v,C,I,U);return Q.type&Be.CLOSE_PATH&&(v=I,C=U),Q.x!==void 0&&(v=Q.relative?v+Q.x:Q.x),Q.y!==void 0&&(C=Q.relative?C+Q.y:Q.y),Q.type&Be.MOVE_TO&&(I=v,U=C),P}}function h(o,v,C,I,U,Q){return No(o,v,C,I,U,Q),l(function(P,K,V,Y){var $=P.x1,it=P.x2,ht=P.relative&&!isNaN(Y),St=P.x!==void 0?P.x:ht?0:K,Tt=P.y!==void 0?P.y:ht?0:V;function Lt(rt){return rt*rt}P.type&Be.HORIZ_LINE_TO&&v!==0&&(P.type=Be.LINE_TO,P.y=P.relative?0:V),P.type&Be.VERT_LINE_TO&&C!==0&&(P.type=Be.LINE_TO,P.x=P.relative?0:K),P.x!==void 0&&(P.x=P.x*o+Tt*C+(ht?0:U)),P.y!==void 0&&(P.y=St*v+P.y*I+(ht?0:Q)),P.x1!==void 0&&(P.x1=P.x1*o+P.y1*C+(ht?0:U)),P.y1!==void 0&&(P.y1=$*v+P.y1*I+(ht?0:Q)),P.x2!==void 0&&(P.x2=P.x2*o+P.y2*C+(ht?0:U)),P.y2!==void 0&&(P.y2=it*v+P.y2*I+(ht?0:Q));var Ft=o*I-v*C;if(P.xRot!==void 0&&(o!==1||v!==0||C!==0||I!==1))if(Ft===0)delete P.rX,delete P.rY,delete P.xRot,delete P.lArcFlag,delete P.sweepFlag,P.type=Be.LINE_TO;else{var yt=P.xRot*Math.PI/180,Rt=Math.sin(yt),Wt=Math.cos(yt),At=1/Lt(P.rX),lt=1/Lt(P.rY),bt=Lt(Wt)*At+Lt(Rt)*lt,wt=2*Rt*Wt*(At-lt),Xt=Lt(Rt)*At+Lt(Wt)*lt,Gt=bt*I*I-wt*v*I+Xt*v*v,Yt=wt*(o*I+v*C)-2*(bt*C*I+Xt*o*v),qt=bt*C*C-wt*o*C+Xt*o*o,te=(Math.atan2(Yt,Gt-qt)+Math.PI)%Math.PI/2,Jt=Math.sin(te),me=Math.cos(te);P.rX=Math.abs(Ft)/Math.sqrt(Gt*Lt(me)+Yt*Jt*me+qt*Lt(Jt)),P.rY=Math.abs(Ft)/Math.sqrt(Gt*Lt(Jt)-Yt*Jt*me+qt*Lt(me)),P.xRot=180*te/Math.PI}return P.sweepFlag!==void 0&&0>Ft&&(P.sweepFlag=+!P.sweepFlag),P})}function p(){return function(o){var v={};for(var C in o)v[C]=o[C];return v}}n.ROUND=function(o){function v(C){return Math.round(C*o)/o}return o===void 0&&(o=1e13),No(o),function(C){return C.x1!==void 0&&(C.x1=v(C.x1)),C.y1!==void 0&&(C.y1=v(C.y1)),C.x2!==void 0&&(C.x2=v(C.x2)),C.y2!==void 0&&(C.y2=v(C.y2)),C.x!==void 0&&(C.x=v(C.x)),C.y!==void 0&&(C.y=v(C.y)),C.rX!==void 0&&(C.rX=v(C.rX)),C.rY!==void 0&&(C.rY=v(C.rY)),C}},n.TO_ABS=t,n.TO_REL=function(){return l(function(o,v,C){return o.relative||(o.x1!==void 0&&(o.x1-=v),o.y1!==void 0&&(o.y1-=C),o.x2!==void 0&&(o.x2-=v),o.y2!==void 0&&(o.y2-=C),o.x!==void 0&&(o.x-=v),o.y!==void 0&&(o.y-=C),o.relative=!0),o})},n.NORMALIZE_HVZ=function(o,v,C){return o===void 0&&(o=!0),v===void 0&&(v=!0),C===void 0&&(C=!0),l(function(I,U,Q,P,K){if(isNaN(P)&&!(I.type&Be.MOVE_TO))throw new Error("path must start with moveto");return v&&I.type&Be.HORIZ_LINE_TO&&(I.type=Be.LINE_TO,I.y=I.relative?0:Q),C&&I.type&Be.VERT_LINE_TO&&(I.type=Be.LINE_TO,I.x=I.relative?0:U),o&&I.type&Be.CLOSE_PATH&&(I.type=Be.LINE_TO,I.x=I.relative?P-U:P,I.y=I.relative?K-Q:K),I.type&Be.ARC&&(I.rX===0||I.rY===0)&&(I.type=Be.LINE_TO,delete I.rX,delete I.rY,delete I.xRot,delete I.lArcFlag,delete I.sweepFlag),I})},n.NORMALIZE_ST=i,n.QT_TO_C=s,n.INFO=l,n.SANITIZE=function(o){o===void 0&&(o=0),No(o);var v=NaN,C=NaN,I=NaN,U=NaN;return l(function(Q,P,K,V,Y){var $=Math.abs,it=!1,ht=0,St=0;if(Q.type&Be.SMOOTH_CURVE_TO&&(ht=isNaN(v)?0:P-v,St=isNaN(C)?0:K-C),Q.type&(Be.CURVE_TO|Be.SMOOTH_CURVE_TO)?(v=Q.relative?P+Q.x2:Q.x2,C=Q.relative?K+Q.y2:Q.y2):(v=NaN,C=NaN),Q.type&Be.SMOOTH_QUAD_TO?(I=isNaN(I)?P:2*P-I,U=isNaN(U)?K:2*K-U):Q.type&Be.QUAD_TO?(I=Q.relative?P+Q.x1:Q.x1,U=Q.relative?K+Q.y1:Q.y2):(I=NaN,U=NaN),Q.type&Be.LINE_COMMANDS||Q.type&Be.ARC&&(Q.rX===0||Q.rY===0||!Q.lArcFlag)||Q.type&Be.CURVE_TO||Q.type&Be.SMOOTH_CURVE_TO||Q.type&Be.QUAD_TO||Q.type&Be.SMOOTH_QUAD_TO){var Tt=Q.x===void 0?0:Q.relative?Q.x:Q.x-P,Lt=Q.y===void 0?0:Q.relative?Q.y:Q.y-K;ht=isNaN(I)?Q.x1===void 0?ht:Q.relative?Q.x:Q.x1-P:I-P,St=isNaN(U)?Q.y1===void 0?St:Q.relative?Q.y:Q.y1-K:U-K;var Ft=Q.x2===void 0?0:Q.relative?Q.x:Q.x2-P,yt=Q.y2===void 0?0:Q.relative?Q.y:Q.y2-K;$(Tt)<=o&&$(Lt)<=o&&$(ht)<=o&&$(St)<=o&&$(Ft)<=o&&$(yt)<=o&&(it=!0)}return Q.type&Be.CLOSE_PATH&&$(P-V)<=o&&$(K-Y)<=o&&(it=!0),it?[]:Q})},n.MATRIX=h,n.ROTATE=function(o,v,C){v===void 0&&(v=0),C===void 0&&(C=0),No(o,v,C);var I=Math.sin(o),U=Math.cos(o);return h(U,I,-I,U,v-v*U+C*I,C-v*I-C*U)},n.TRANSLATE=function(o,v){return v===void 0&&(v=0),No(o,v),h(1,0,0,1,o,v)},n.SCALE=function(o,v){return v===void 0&&(v=o),No(o,v),h(o,0,0,v,0,0)},n.SKEW_X=function(o){return No(o),h(1,0,Math.atan(o),1,0,0)},n.SKEW_Y=function(o){return No(o),h(1,Math.atan(o),0,1,0,0)},n.X_AXIS_SYMMETRY=function(o){return o===void 0&&(o=0),No(o),h(-1,0,0,1,o,0)},n.Y_AXIS_SYMMETRY=function(o){return o===void 0&&(o=0),No(o),h(1,0,0,-1,0,o)},n.A_TO_C=function(){return l(function(o,v,C){return Be.ARC===o.type?function(I,U,Q){var P,K,V,Y;I.cX||z1(I,U,Q);for(var $=Math.min(I.phi1,I.phi2),it=Math.max(I.phi1,I.phi2)-$,ht=Math.ceil(it/90),St=new Array(ht),Tt=U,Lt=Q,Ft=0;Ft<ht;Ft++){var yt=mB(I.phi1,I.phi2,Ft/ht),Rt=mB(I.phi1,I.phi2,(Ft+1)/ht),Wt=Rt-yt,At=4/3*Math.tan(Wt*JA/4),lt=[Math.cos(yt*JA)-At*Math.sin(yt*JA),Math.sin(yt*JA)+At*Math.cos(yt*JA)],bt=lt[0],wt=lt[1],Xt=[Math.cos(Rt*JA),Math.sin(Rt*JA)],Gt=Xt[0],Yt=Xt[1],qt=[Gt+At*Math.sin(Rt*JA),Yt-At*Math.cos(Rt*JA)],te=qt[0],Jt=qt[1];St[Ft]={relative:I.relative,type:Be.CURVE_TO};var me=function(rt,dt){var Bt=R1([rt*I.rX,dt*I.rY],I.xRot),Et=Bt[0],Nt=Bt[1];return[I.cX+Et,I.cY+Nt]};P=me(bt,wt),St[Ft].x1=P[0],St[Ft].y1=P[1],K=me(te,Jt),St[Ft].x2=K[0],St[Ft].y2=K[1],V=me(Gt,Yt),St[Ft].x=V[0],St[Ft].y=V[1],I.relative&&(St[Ft].x1-=Tt,St[Ft].y1-=Lt,St[Ft].x2-=Tt,St[Ft].y2-=Lt,St[Ft].x-=Tt,St[Ft].y-=Lt),Tt=(Y=[St[Ft].x,St[Ft].y])[0],Lt=Y[1]}return St}(o,o.relative?0:v,o.relative?0:C):o})},n.ANNOTATE_ARCS=function(){return l(function(o,v,C){return o.relative&&(v=0,C=0),Be.ARC===o.type&&z1(o,v,C),o})},n.CLONE=p,n.CALCULATE_BOUNDS=function(){var o=function(Q){var P={};for(var K in Q)P[K]=Q[K];return P},v=t(),C=s(),I=i(),U=l(function(Q,P,K){var V=I(C(v(o(Q))));function Y(Jt){Jt>U.maxX&&(U.maxX=Jt),Jt<U.minX&&(U.minX=Jt)}function $(Jt){Jt>U.maxY&&(U.maxY=Jt),Jt<U.minY&&(U.minY=Jt)}if(V.type&Be.DRAWING_COMMANDS&&(Y(P),$(K)),V.type&Be.HORIZ_LINE_TO&&Y(V.x),V.type&Be.VERT_LINE_TO&&$(V.y),V.type&Be.LINE_TO&&(Y(V.x),$(V.y)),V.type&Be.CURVE_TO){Y(V.x),$(V.y);for(var it=0,ht=vB(P,V.x1,V.x2,V.x);it<ht.length;it++)0<(te=ht[it])&&1>te&&Y(wB(P,V.x1,V.x2,V.x,te));for(var St=0,Tt=vB(K,V.y1,V.y2,V.y);St<Tt.length;St++)0<(te=Tt[St])&&1>te&&$(wB(K,V.y1,V.y2,V.y,te))}if(V.type&Be.ARC){Y(V.x),$(V.y),z1(V,P,K);for(var Lt=V.xRot/180*Math.PI,Ft=Math.cos(Lt)*V.rX,yt=Math.sin(Lt)*V.rX,Rt=-Math.sin(Lt)*V.rY,Wt=Math.cos(Lt)*V.rY,At=V.phi1<V.phi2?[V.phi1,V.phi2]:-180>V.phi2?[V.phi2+360,V.phi1+360]:[V.phi2,V.phi1],lt=At[0],bt=At[1],wt=function(Jt){var me=Jt[0],rt=Jt[1],dt=180*Math.atan2(rt,me)/Math.PI;return dt<lt?dt+360:dt},Xt=0,Gt=gB(Rt,-Ft,0).map(wt);Xt<Gt.length;Xt++)(te=Gt[Xt])>lt&&te<bt&&Y(yB(V.cX,Ft,Rt,te));for(var Yt=0,qt=gB(Wt,-yt,0).map(wt);Yt<qt.length;Yt++){var te;(te=qt[Yt])>lt&&te<bt&&$(yB(V.cY,yt,Wt,te))}}return Q});return U.minX=1/0,U.maxX=-1/0,U.minY=1/0,U.maxY=-1/0,U}})(Fn||(Fn={}));var Oo,_B=function(){function n(){}return n.prototype.round=function(t){return this.transform(Fn.ROUND(t))},n.prototype.toAbs=function(){return this.transform(Fn.TO_ABS())},n.prototype.toRel=function(){return this.transform(Fn.TO_REL())},n.prototype.normalizeHVZ=function(t,i,s){return this.transform(Fn.NORMALIZE_HVZ(t,i,s))},n.prototype.normalizeST=function(){return this.transform(Fn.NORMALIZE_ST())},n.prototype.qtToC=function(){return this.transform(Fn.QT_TO_C())},n.prototype.aToC=function(){return this.transform(Fn.A_TO_C())},n.prototype.sanitize=function(t){return this.transform(Fn.SANITIZE(t))},n.prototype.translate=function(t,i){return this.transform(Fn.TRANSLATE(t,i))},n.prototype.scale=function(t,i){return this.transform(Fn.SCALE(t,i))},n.prototype.rotate=function(t,i,s){return this.transform(Fn.ROTATE(t,i,s))},n.prototype.matrix=function(t,i,s,l,h,p){return this.transform(Fn.MATRIX(t,i,s,l,h,p))},n.prototype.skewX=function(t){return this.transform(Fn.SKEW_X(t))},n.prototype.skewY=function(t){return this.transform(Fn.SKEW_Y(t))},n.prototype.xSymmetry=function(t){return this.transform(Fn.X_AXIS_SYMMETRY(t))},n.prototype.ySymmetry=function(t){return this.transform(Fn.Y_AXIS_SYMMETRY(t))},n.prototype.annotateArcs=function(){return this.transform(Fn.ANNOTATE_ARCS())},n}(),mR=function(n){return n===" "||n==="	"||n==="\r"||n===`
`},bB=function(n){return 48<=n.charCodeAt(0)&&n.charCodeAt(0)<=57},yR=function(n){function t(){var i=n.call(this)||this;return i.curNumber="",i.curCommandType=-1,i.curCommandRelative=!1,i.canParseCommandOrComma=!0,i.curNumberHasExp=!1,i.curNumberHasExpDigits=!1,i.curNumberHasDecimal=!1,i.curArgs=[],i}return fB(t,n),t.prototype.finish=function(i){if(i===void 0&&(i=[]),this.parse(" ",i),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return i},t.prototype.parse=function(i,s){var l=this;s===void 0&&(s=[]);for(var h=function(U){s.push(U),l.curArgs.length=0,l.canParseCommandOrComma=!0},p=0;p<i.length;p++){var o=i[p],v=!(this.curCommandType!==Be.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!=="0"&&this.curNumber!=="1"),C=bB(o)&&(this.curNumber==="0"&&o==="0"||v);if(!bB(o)||C)if(o!=="e"&&o!=="E")if(o!=="-"&&o!=="+"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(o!=="."||this.curNumberHasExp||this.curNumberHasDecimal||v){if(this.curNumber&&this.curCommandType!==-1){var I=Number(this.curNumber);if(isNaN(I))throw new SyntaxError("Invalid number ending at "+p);if(this.curCommandType===Be.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>I)throw new SyntaxError('Expected positive number, got "'+I+'" at index "'+p+'"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+p+'"')}this.curArgs.push(I),this.curArgs.length===vR[this.curCommandType]&&(Be.HORIZ_LINE_TO===this.curCommandType?h({type:Be.HORIZ_LINE_TO,relative:this.curCommandRelative,x:I}):Be.VERT_LINE_TO===this.curCommandType?h({type:Be.VERT_LINE_TO,relative:this.curCommandRelative,y:I}):this.curCommandType===Be.MOVE_TO||this.curCommandType===Be.LINE_TO||this.curCommandType===Be.SMOOTH_QUAD_TO?(h({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),Be.MOVE_TO===this.curCommandType&&(this.curCommandType=Be.LINE_TO)):this.curCommandType===Be.CURVE_TO?h({type:Be.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===Be.SMOOTH_CURVE_TO?h({type:Be.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===Be.QUAD_TO?h({type:Be.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===Be.ARC&&h({type:Be.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!mR(o))if(o===","&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(o!=="+"&&o!=="-"&&o!==".")if(C)this.curNumber=o,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError("Unterminated command at index "+p+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+o+'" at index '+p+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,o!=="z"&&o!=="Z")if(o==="h"||o==="H")this.curCommandType=Be.HORIZ_LINE_TO,this.curCommandRelative=o==="h";else if(o==="v"||o==="V")this.curCommandType=Be.VERT_LINE_TO,this.curCommandRelative=o==="v";else if(o==="m"||o==="M")this.curCommandType=Be.MOVE_TO,this.curCommandRelative=o==="m";else if(o==="l"||o==="L")this.curCommandType=Be.LINE_TO,this.curCommandRelative=o==="l";else if(o==="c"||o==="C")this.curCommandType=Be.CURVE_TO,this.curCommandRelative=o==="c";else if(o==="s"||o==="S")this.curCommandType=Be.SMOOTH_CURVE_TO,this.curCommandRelative=o==="s";else if(o==="q"||o==="Q")this.curCommandType=Be.QUAD_TO,this.curCommandRelative=o==="q";else if(o==="t"||o==="T")this.curCommandType=Be.SMOOTH_QUAD_TO,this.curCommandRelative=o==="t";else{if(o!=="a"&&o!=="A")throw new SyntaxError('Unexpected character "'+o+'" at index '+p+".");this.curCommandType=Be.ARC,this.curCommandRelative=o==="a"}else s.push({type:Be.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=o,this.curNumberHasDecimal=o==="."}else this.curNumber+=o,this.curNumberHasDecimal=!0;else this.curNumber+=o;else this.curNumber+=o,this.curNumberHasExp=!0;else this.curNumber+=o,this.curNumberHasExpDigits=this.curNumberHasExp}return s},t.prototype.transform=function(i){return Object.create(this,{parse:{value:function(s,l){l===void 0&&(l=[]);for(var h=0,p=Object.getPrototypeOf(this).parse.call(this,s);h<p.length;h++){var o=p[h],v=i(o);Array.isArray(v)?l.push.apply(l,v):l.push(v)}return l}}})},t}(_B),Be=function(n){function t(i){var s=n.call(this)||this;return s.commands=typeof i=="string"?t.parse(i):i,s}return fB(t,n),t.prototype.encode=function(){return t.encode(this.commands)},t.prototype.getBounds=function(){var i=Fn.CALCULATE_BOUNDS();return this.transform(i),i},t.prototype.transform=function(i){for(var s=[],l=0,h=this.commands;l<h.length;l++){var p=i(h[l]);Array.isArray(p)?s.push.apply(s,p):s.push(p)}return this.commands=s,this},t.encode=function(i){return gR(i)},t.parse=function(i){var s=new yR,l=[];return s.parse(i,l),s.finish(l),l},t.CLOSE_PATH=1,t.MOVE_TO=2,t.HORIZ_LINE_TO=4,t.VERT_LINE_TO=8,t.LINE_TO=16,t.CURVE_TO=32,t.SMOOTH_CURVE_TO=64,t.QUAD_TO=128,t.SMOOTH_QUAD_TO=256,t.ARC=512,t.LINE_COMMANDS=t.LINE_TO|t.HORIZ_LINE_TO|t.VERT_LINE_TO,t.DRAWING_COMMANDS=t.HORIZ_LINE_TO|t.VERT_LINE_TO|t.LINE_TO|t.CURVE_TO|t.SMOOTH_CURVE_TO|t.QUAD_TO|t.SMOOTH_QUAD_TO|t.ARC,t}(_B),vR=((Oo={})[Be.MOVE_TO]=2,Oo[Be.LINE_TO]=2,Oo[Be.HORIZ_LINE_TO]=1,Oo[Be.VERT_LINE_TO]=1,Oo[Be.CLOSE_PATH]=0,Oo[Be.QUAD_TO]=4,Oo[Be.SMOOTH_QUAD_TO]=2,Oo[Be.CURVE_TO]=6,Oo[Be.SMOOTH_CURVE_TO]=4,Oo[Be.ARC]=7,Oo),wR=rs,_R=Do,bR=Kp,xR=ix,xB=RegExp.prototype,BR=function(n){var t=n.flags;return t===void 0&&!("flags"in xB)&&!_R(n,"flags")&&bR(xB,n)?wR(xR,n):t},CR=Yp.PROPER,FR=Fc,SR=Os,BB=uA,IR=vn,ER=BR,H1="toString",CB=RegExp.prototype,FB=CB[H1],TR=IR(function(){return FB.call({source:"a",flags:"b"})!=="/a/b"}),UR=CR&&FB.name!==H1;(TR||UR)&&FR(CB,H1,function(){var n=SR(this),t=BB(n.source),i=BB(ER(n));return"/"+t+"/"+i},{unsafe:!0});function Uf(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Uf=function(t){return typeof t}:Uf=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uf(n)}function PR(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}var LR=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],QR=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function MR(n,t,i,s,l){if(typeof n=="string"&&(n=document.getElementById(n)),!n||Uf(n)!=="object"||!("getContext"in n))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var h=n.getContext("2d");try{return h.getImageData(t,i,s,l)}catch(p){throw new Error("unable to access image data: "+p)}}function kR(n,t,i,s,l,h){if(!(isNaN(h)||h<1)){h|=0;var p=MR(n,t,i,s,l);p=DR(p,t,i,s,l,h),n.getContext("2d").putImageData(p,t,i)}}function DR(n,t,i,s,l,h){for(var p=n.data,o=2*h+1,v=s-1,C=l-1,I=h+1,U=I*(I+1)/2,Q=new SB,P=Q,K,V=1;V<o;V++)P=P.next=new SB,V===I&&(K=P);P.next=Q;for(var Y=null,$=null,it=0,ht=0,St=LR[h],Tt=QR[h],Lt=0;Lt<l;Lt++){P=Q;for(var Ft=p[ht],yt=p[ht+1],Rt=p[ht+2],Wt=p[ht+3],At=0;At<I;At++)P.r=Ft,P.g=yt,P.b=Rt,P.a=Wt,P=P.next;for(var lt=0,bt=0,wt=0,Xt=0,Gt=I*Ft,Yt=I*yt,qt=I*Rt,te=I*Wt,Jt=U*Ft,me=U*yt,rt=U*Rt,dt=U*Wt,Bt=1;Bt<I;Bt++){var Et=ht+((v<Bt?v:Bt)<<2),Nt=p[Et],Ht=p[Et+1],ie=p[Et+2],se=p[Et+3],Ce=I-Bt;Jt+=(P.r=Nt)*Ce,me+=(P.g=Ht)*Ce,rt+=(P.b=ie)*Ce,dt+=(P.a=se)*Ce,lt+=Nt,bt+=Ht,wt+=ie,Xt+=se,P=P.next}Y=Q,$=K;for(var be=0;be<s;be++){var Te=dt*St>>>Tt;if(p[ht+3]=Te,Te!==0){var Le=255/Te;p[ht]=(Jt*St>>>Tt)*Le,p[ht+1]=(me*St>>>Tt)*Le,p[ht+2]=(rt*St>>>Tt)*Le}else p[ht]=p[ht+1]=p[ht+2]=0;Jt-=Gt,me-=Yt,rt-=qt,dt-=te,Gt-=Y.r,Yt-=Y.g,qt-=Y.b,te-=Y.a;var Qe=be+h+1;Qe=it+(Qe<v?Qe:v)<<2,lt+=Y.r=p[Qe],bt+=Y.g=p[Qe+1],wt+=Y.b=p[Qe+2],Xt+=Y.a=p[Qe+3],Jt+=lt,me+=bt,rt+=wt,dt+=Xt,Y=Y.next;var le=$,nt=le.r,dr=le.g,$e=le.b,ce=le.a;Gt+=nt,Yt+=dr,qt+=$e,te+=ce,lt-=nt,bt-=dr,wt-=$e,Xt-=ce,$=$.next,ht+=4}it+=s}for(var ge=0;ge<s;ge++){ht=ge<<2;var Se=p[ht],Ie=p[ht+1],Ge=p[ht+2],Ze=p[ht+3],pr=I*Se,wr=I*Ie,Sr=I*Ge,pe=I*Ze,Xe=U*Se,ur=U*Ie,Ue=U*Ge,Jr=U*Ze;P=Q;for(var he=0;he<I;he++)P.r=Se,P.g=Ie,P.b=Ge,P.a=Ze,P=P.next;for(var sr=s,Me=0,xr=0,Gr=0,ke=0,Fi=1;Fi<=h;Fi++){ht=sr+ge<<2;var zr=I-Fi;Xe+=(P.r=Se=p[ht])*zr,ur+=(P.g=Ie=p[ht+1])*zr,Ue+=(P.b=Ge=p[ht+2])*zr,Jr+=(P.a=Ze=p[ht+3])*zr,ke+=Se,Me+=Ie,xr+=Ge,Gr+=Ze,P=P.next,Fi<C&&(sr+=s)}ht=ge,Y=Q,$=K;for(var Dr=0;Dr<l;Dr++){var pt=ht<<2;p[pt+3]=Ze=Jr*St>>>Tt,Ze>0?(Ze=255/Ze,p[pt]=(Xe*St>>>Tt)*Ze,p[pt+1]=(ur*St>>>Tt)*Ze,p[pt+2]=(Ue*St>>>Tt)*Ze):p[pt]=p[pt+1]=p[pt+2]=0,Xe-=pr,ur-=wr,Ue-=Sr,Jr-=pe,pr-=Y.r,wr-=Y.g,Sr-=Y.b,pe-=Y.a,pt=ge+((pt=Dr+I)<C?pt:C)*s<<2,Xe+=ke+=Y.r=p[pt],ur+=Me+=Y.g=p[pt+1],Ue+=xr+=Y.b=p[pt+2],Jr+=Gr+=Y.a=p[pt+3],Y=Y.next,pr+=Se=$.r,wr+=Ie=$.g,Sr+=Ge=$.b,pe+=Ze=$.a,ke-=Se,Me-=Ie,xr-=Ge,Gr-=Ze,$=$.next,ht+=s}}return n}var SB=function n(){PR(this,n),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function NR(){var{DOMParser:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t={window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:n,createCanvas(i,s){return new OffscreenCanvas(i,s)},createImage(i){return ZA(function*(){var s=yield fetch(i),l=yield s.blob(),h=yield createImageBitmap(l);return h})()}};return(typeof DOMParser<"u"||typeof n>"u")&&Reflect.deleteProperty(t,"DOMParser"),t}function OR(n){var{DOMParser:t,canvas:i,fetch:s}=n;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:t,fetch:s,createCanvas:i.createCanvas,createImage:i.loadImage}}var RR=Object.freeze({__proto__:null,offscreen:NR,node:OR});function Uc(n){return n.replace(/(?!\u3000)\s+/gm," ")}function IB(n){return n.replace(/^[\n \t]+/,"")}function EB(n){return n.replace(/[\n \t]+$/,"")}function ia(n){var t=(n||"").match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm)||[];return t.map(parseFloat)}var zR=/^[A-Z-]+$/;function TB(n){return zR.test(n)?n.toLowerCase():n}function V1(n){var t=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(n)||[];return t[2]||t[3]||t[4]}function UB(n){if(!n.startsWith("rgb"))return n;var t=3,i=n.replace(/\d+(\.\d+)?/g,(s,l)=>t--&&l?String(Math.round(parseFloat(s))):s);return i}var HR=/(\[[^\]]+\])/g,VR=/(#[^\s+>~.[:]+)/g,jR=/(\.[^\s+>~.[:]+)/g,KR=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,$R=/(:[\w-]+\([^)]*\))/gi,qR=/(:[^\s+>~.[:]+)/g,GR=/([^\s+>~.[:]+)/g;function Pc(n,t){var i=t.exec(n);return i?[n.replace(t," "),i.length]:[n,0]}function PB(n){var t=[0,0,0],i=n.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),s=0;return[i,s]=Pc(i,HR),t[1]+=s,[i,s]=Pc(i,VR),t[0]+=s,[i,s]=Pc(i,jR),t[1]+=s,[i,s]=Pc(i,KR),t[2]+=s,[i,s]=Pc(i,$R),t[1]+=s,[i,s]=Pc(i,qR),t[1]+=s,i=i.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[i,s]=Pc(i,GR),t[2]+=s,t.join("")}var Lc=1e-8;function j1(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2))}function Pf(n,t){return(n[0]*t[0]+n[1]*t[1])/(j1(n)*j1(t))}function K1(n,t){return(n[0]*t[1]<n[1]*t[0]?-1:1)*Math.acos(Pf(n,t))}function $1(n){return n*n*n}function q1(n){return 3*n*n*(1-n)}function G1(n){return 3*n*(1-n)*(1-n)}function W1(n){return(1-n)*(1-n)*(1-n)}function X1(n){return n*n}function Z1(n){return 2*n*(1-n)}function Y1(n){return(1-n)*(1-n)}class br{constructor(t,i,s){this.document=t,this.name=i,this.value=s,this.isNormalizedColor=!1}static empty(t){return new br(t,"EMPTY","")}split(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:" ",{document:i,name:s}=this;return Uc(this.getString()).trim().split(t).map(l=>new br(i,s,l))}hasValue(t){var{value:i}=this;return i!==null&&i!==""&&(t||i!==0)&&typeof i<"u"}isString(t){var{value:i}=this,s=typeof i=="string";return!s||!t?s:t.test(i)}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;var t=this.getString();switch(!0){case t.endsWith("px"):case/^[0-9]+$/.test(t):return!0;default:return!1}}setValue(t){return this.value=t,this}getValue(t){return typeof t>"u"||this.hasValue()?this.value:t}getNumber(t){if(!this.hasValue())return typeof t>"u"?0:parseFloat(t);var{value:i}=this,s=parseFloat(i);return this.isString(/%$/)&&(s/=100),s}getString(t){return typeof t>"u"||this.hasValue()?typeof this.value>"u"?"":String(this.value):String(t)}getColor(t){var i=this.getString(t);return this.isNormalizedColor||(this.isNormalizedColor=!0,i=UB(i),this.value=i),i}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasValue())return 0;var[s,l]=typeof t=="boolean"?[void 0,t]:[t],{viewPort:h}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(h.computeSize("x"),h.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(h.computeSize("x"),h.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*h.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*h.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return this.getNumber()*15;case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case(this.isString(/%$/)&&l):return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*h.computeSize(s);default:{var p=this.getNumber();return i&&p<1?p*h.computeSize(s):p}}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():this.getNumber()*1e3:0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){var t=this.getString(),i=/#([^)'"]+)/.exec(t);return i&&(i=i[1]),i||(i=t),this.document.definitions[i]}getFillStyleDefinition(t,i){var s=this.getDefinition();if(!s)return null;if(typeof s.createGradient=="function")return s.createGradient(this.document.ctx,t,i);if(typeof s.createPattern=="function"){if(s.getHrefAttribute().hasValue()){var l=s.getAttribute("patternTransform");s=s.getHrefAttribute().getDefinition(),l.hasValue()&&s.getAttribute("patternTransform",!0).setValue(l.value)}return s.createPattern(this.document.ctx,t,i)}return null}getTextBaseline(){return this.hasValue()?br.textBaselineMapping[this.getString()]:null}addOpacity(t){for(var i=this.getColor(),s=i.length,l=0,h=0;h<s&&(i[h]===","&&l++,l!==3);h++);if(t.hasValue()&&this.isString()&&l!==3){var p=new N1(i);p.ok&&(p.alpha=t.getNumber(),i=p.toRGBA())}return new br(this.document,this.name,i)}}br.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};class LB{constructor(){this.viewPorts=[]}clear(){this.viewPorts=[]}setCurrent(t,i){this.viewPorts.push({width:t,height:i})}removeCurrent(){this.viewPorts.pop()}getCurrent(){var{viewPorts:t}=this;return t[t.length-1]}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(t){return typeof t=="number"?t:t==="x"?this.width:t==="y"?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}}class an{constructor(t,i){this.x=t,this.y=i}static parse(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,[s=i,l=i]=ia(t);return new an(s,l)}static parseScale(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,[s=i,l=s]=ia(t);return new an(s,l)}static parsePath(t){for(var i=ia(t),s=i.length,l=[],h=0;h<s;h+=2)l.push(new an(i[h],i[h+1]));return l}angleTo(t){return Math.atan2(t.y-this.y,t.x-this.x)}applyTransform(t){var{x:i,y:s}=this,l=i*t[0]+s*t[2]+t[4],h=i*t[1]+s*t[3]+t[5];this.x=l,this.y=h}}class QB{constructor(t){this.screen=t,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}isWorking(){return this.working}start(){if(!this.working){var{screen:t,onClick:i,onMouseMove:s}=this,l=t.ctx.canvas;l.onclick=i,l.onmousemove=s,this.working=!0}}stop(){if(this.working){var t=this.screen.ctx.canvas;this.working=!1,t.onclick=null,t.onmousemove=null}}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(this.working){var{screen:t,events:i,eventElements:s}=this,{style:l}=t.ctx.canvas;l&&(l.cursor=""),i.forEach((h,p)=>{for(var{run:o}=h,v=s[p];v;)o(v),v=v.parent}),this.events=[],this.eventElements=[]}}checkPath(t,i){if(!(!this.working||!i)){var{events:s,eventElements:l}=this;s.forEach((h,p)=>{var{x:o,y:v}=h;!l[p]&&i.isPointInPath&&i.isPointInPath(o,v)&&(l[p]=t)})}}checkBoundingBox(t,i){if(!(!this.working||!i)){var{events:s,eventElements:l}=this;s.forEach((h,p)=>{var{x:o,y:v}=h;!l[p]&&i.isPointInBox(o,v)&&(l[p]=t)})}}mapXY(t,i){for(var{window:s,ctx:l}=this.screen,h=new an(t,i),p=l.canvas;p;)h.x-=p.offsetLeft,h.y-=p.offsetTop,p=p.offsetParent;return s.scrollX&&(h.x+=s.scrollX),s.scrollY&&(h.y+=s.scrollY),h}onClick(t){var{x:i,y:s}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onclick",x:i,y:s,run(l){l.onClick&&l.onClick()}})}onMouseMove(t){var{x:i,y:s}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onmousemove",x:i,y:s,run(l){l.onMouseMove&&l.onMouseMove()}})}}var MB=typeof window<"u"?window:null,kB=typeof fetch<"u"?fetch.bind(void 0):null;class sd{constructor(t){var{fetch:i=kB,window:s=MB}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.ctx=t,this.FRAMERATE=30,this.MAX_VIRTUAL_PIXELS=3e4,this.CLIENT_WIDTH=800,this.CLIENT_HEIGHT=600,this.viewPort=new LB,this.mouse=new QB(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=s,this.fetch=i}wait(t){this.waits.push(t)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;var t=this.waits.every(i=>i());return t&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=t,t}setDefaults(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4}setViewBox(t){var{document:i,ctx:s,aspectRatio:l,width:h,desiredWidth:p,height:o,desiredHeight:v,minX:C=0,minY:I=0,refX:U,refY:Q,clip:P=!1,clipX:K=0,clipY:V=0}=t,Y=Uc(l).replace(/^defer\s/,""),[$,it]=Y.split(" "),ht=$||"xMidYMid",St=it||"meet",Tt=h/p,Lt=o/v,Ft=Math.min(Tt,Lt),yt=Math.max(Tt,Lt),Rt=p,Wt=v;St==="meet"&&(Rt*=Ft,Wt*=Ft),St==="slice"&&(Rt*=yt,Wt*=yt);var At=new br(i,"refX",U),lt=new br(i,"refY",Q),bt=At.hasValue()&&lt.hasValue();if(bt&&s.translate(-Ft*At.getPixels("x"),-Ft*lt.getPixels("y")),P){var wt=Ft*K,Xt=Ft*V;s.beginPath(),s.moveTo(wt,Xt),s.lineTo(h,Xt),s.lineTo(h,o),s.lineTo(wt,o),s.closePath(),s.clip()}if(!bt){var Gt=St==="meet"&&Ft===Lt,Yt=St==="slice"&&yt===Lt,qt=St==="meet"&&Ft===Tt,te=St==="slice"&&yt===Tt;ht.startsWith("xMid")&&(Gt||Yt)&&s.translate(h/2-Rt/2,0),ht.endsWith("YMid")&&(qt||te)&&s.translate(0,o/2-Wt/2),ht.startsWith("xMax")&&(Gt||Yt)&&s.translate(h-Rt,0),ht.endsWith("YMax")&&(qt||te)&&s.translate(0,o-Wt)}switch(!0){case ht==="none":s.scale(Tt,Lt);break;case St==="meet":s.scale(Ft,Ft);break;case St==="slice":s.scale(yt,yt);break}s.translate(-C,-I)}start(t){var{enableRedraw:i=!1,ignoreMouse:s=!1,ignoreAnimation:l=!1,ignoreDimensions:h=!1,ignoreClear:p=!1,forceRedraw:o,scaleWidth:v,scaleHeight:C,offsetX:I,offsetY:U}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{FRAMERATE:Q,mouse:P}=this,K=1e3/Q;if(this.frameDuration=K,this.readyPromise=new Promise(ht=>{this.resolveReady=ht}),this.isReady()&&this.render(t,h,p,v,C,I,U),!!i){var V=Date.now(),Y=V,$=0,it=()=>{V=Date.now(),$=V-Y,$>=K&&(Y=V-$%K,this.shouldUpdate(l,o)&&(this.render(t,h,p,v,C,I,U),P.runEvents())),this.intervalId=M1(it)};s||P.start(),this.intervalId=M1(it)}}stop(){this.intervalId&&(M1.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(t,i){if(!t){var{frameDuration:s}=this,l=this.animations.reduce((h,p)=>p.update(s)||h,!1);if(l)return!0}return!!(typeof i=="function"&&i()||!this.isReadyLock&&this.isReady()||this.mouse.hasEvents())}render(t,i,s,l,h,p,o){var{CLIENT_WIDTH:v,CLIENT_HEIGHT:C,viewPort:I,ctx:U,isFirstRender:Q}=this,P=U.canvas;I.clear(),P.width&&P.height?I.setCurrent(P.width,P.height):I.setCurrent(v,C);var K=t.getStyle("width"),V=t.getStyle("height");!i&&(Q||typeof l!="number"&&typeof h!="number")&&(K.hasValue()&&(P.width=K.getPixels("x"),P.style&&(P.style.width="".concat(P.width,"px"))),V.hasValue()&&(P.height=V.getPixels("y"),P.style&&(P.style.height="".concat(P.height,"px"))));var Y=P.clientWidth||P.width,$=P.clientHeight||P.height;if(i&&K.hasValue()&&V.hasValue()&&(Y=K.getPixels("x"),$=V.getPixels("y")),I.setCurrent(Y,$),typeof p=="number"&&t.getAttribute("x",!0).setValue(p),typeof o=="number"&&t.getAttribute("y",!0).setValue(o),typeof l=="number"||typeof h=="number"){var it=ia(t.getAttribute("viewBox").getString()),ht=0,St=0;if(typeof l=="number"){var Tt=t.getStyle("width");Tt.hasValue()?ht=Tt.getPixels("x")/l:isNaN(it[2])||(ht=it[2]/l)}if(typeof h=="number"){var Lt=t.getStyle("height");Lt.hasValue()?St=Lt.getPixels("y")/h:isNaN(it[3])||(St=it[3]/h)}ht||(ht=St),St||(St=ht),t.getAttribute("width",!0).setValue(l),t.getAttribute("height",!0).setValue(h);var Ft=t.getStyle("transform",!0,!0);Ft.setValue("".concat(Ft.getString()," scale(").concat(1/ht,", ").concat(1/St,")"))}s||U.clearRect(0,0,Y,$),t.render(U),Q&&(this.isFirstRender=!1)}}sd.defaultWindow=MB,sd.defaultFetch=kB;var{defaultFetch:WR}=sd,XR=typeof DOMParser<"u"?DOMParser:null;class Lf{constructor(){var{fetch:t=WR,DOMParser:i=XR}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fetch=t,this.DOMParser=i}parse(t){var i=this;return ZA(function*(){return t.startsWith("<")?i.parseFromString(t):i.load(t)})()}parseFromString(t){var i=new this.DOMParser;try{return this.checkDocument(i.parseFromString(t,"image/svg+xml"))}catch{return this.checkDocument(i.parseFromString(t,"text/xml"))}}checkDocument(t){var i=t.getElementsByTagName("parsererror")[0];if(i)throw new Error(i.textContent);return t}load(t){var i=this;return ZA(function*(){var s=yield i.fetch(t),l=yield s.text();return i.parseFromString(l)})()}}class DB{constructor(t,i){this.type="translate",this.point=null,this.point=an.parse(i)}apply(t){var{x:i,y:s}=this.point;t.translate(i||0,s||0)}unapply(t){var{x:i,y:s}=this.point;t.translate(-1*i||0,-1*s||0)}applyToPoint(t){var{x:i,y:s}=this.point;t.applyTransform([1,0,0,1,i||0,s||0])}}class NB{constructor(t,i,s){this.type="rotate",this.angle=null,this.originX=null,this.originY=null,this.cx=0,this.cy=0;var l=ia(i);this.angle=new br(t,"angle",l[0]),this.originX=s[0],this.originY=s[1],this.cx=l[1]||0,this.cy=l[2]||0}apply(t){var{cx:i,cy:s,originX:l,originY:h,angle:p}=this,o=i+l.getPixels("x"),v=s+h.getPixels("y");t.translate(o,v),t.rotate(p.getRadians()),t.translate(-o,-v)}unapply(t){var{cx:i,cy:s,originX:l,originY:h,angle:p}=this,o=i+l.getPixels("x"),v=s+h.getPixels("y");t.translate(o,v),t.rotate(-1*p.getRadians()),t.translate(-o,-v)}applyToPoint(t){var{cx:i,cy:s,angle:l}=this,h=l.getRadians();t.applyTransform([1,0,0,1,i||0,s||0]),t.applyTransform([Math.cos(h),Math.sin(h),-Math.sin(h),Math.cos(h),0,0]),t.applyTransform([1,0,0,1,-i||0,-s||0])}}class OB{constructor(t,i,s){this.type="scale",this.scale=null,this.originX=null,this.originY=null;var l=an.parseScale(i);(l.x===0||l.y===0)&&(l.x=Lc,l.y=Lc),this.scale=l,this.originX=s[0],this.originY=s[1]}apply(t){var{scale:{x:i,y:s},originX:l,originY:h}=this,p=l.getPixels("x"),o=h.getPixels("y");t.translate(p,o),t.scale(i,s||i),t.translate(-p,-o)}unapply(t){var{scale:{x:i,y:s},originX:l,originY:h}=this,p=l.getPixels("x"),o=h.getPixels("y");t.translate(p,o),t.scale(1/i,1/s||i),t.translate(-p,-o)}applyToPoint(t){var{x:i,y:s}=this.scale;t.applyTransform([i||0,0,0,s||0,0,0])}}class J1{constructor(t,i,s){this.type="matrix",this.matrix=[],this.originX=null,this.originY=null,this.matrix=ia(i),this.originX=s[0],this.originY=s[1]}apply(t){var{originX:i,originY:s,matrix:l}=this,h=i.getPixels("x"),p=s.getPixels("y");t.translate(h,p),t.transform(l[0],l[1],l[2],l[3],l[4],l[5]),t.translate(-h,-p)}unapply(t){var{originX:i,originY:s,matrix:l}=this,h=l[0],p=l[2],o=l[4],v=l[1],C=l[3],I=l[5],U=0,Q=0,P=1,K=1/(h*(C*P-I*Q)-p*(v*P-I*U)+o*(v*Q-C*U)),V=i.getPixels("x"),Y=s.getPixels("y");t.translate(V,Y),t.transform(K*(C*P-I*Q),K*(I*U-v*P),K*(o*Q-p*P),K*(h*P-o*U),K*(p*I-o*C),K*(o*v-h*I)),t.translate(-V,-Y)}applyToPoint(t){t.applyTransform(this.matrix)}}class ty extends J1{constructor(t,i,s){super(t,i,s),this.type="skew",this.angle=null,this.angle=new br(t,"angle",i)}}class RB extends ty{constructor(t,i,s){super(t,i,s),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}}class zB extends ty{constructor(t,i,s){super(t,i,s),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}}function ZR(n){return Uc(n).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function YR(n){var[t,i]=n.split("(");return[t.trim(),i.trim().replace(")","")]}class zl{constructor(t,i,s){this.document=t,this.transforms=[];var l=ZR(i);l.forEach(h=>{if(h!=="none"){var[p,o]=YR(h),v=zl.transformTypes[p];typeof v<"u"&&this.transforms.push(new v(this.document,o,s))}})}static fromElement(t,i){var s=i.getStyle("transform",!1,!0),[l,h=l]=i.getStyle("transform-origin",!1,!0).split(),p=[l,h];return s.hasValue()?new zl(t,s.getString(),p):null}apply(t){for(var{transforms:i}=this,s=i.length,l=0;l<s;l++)i[l].apply(t)}unapply(t){for(var{transforms:i}=this,s=i.length,l=s-1;l>=0;l--)i[l].unapply(t)}applyToPoint(t){for(var{transforms:i}=this,s=i.length,l=0;l<s;l++)i[l].applyToPoint(t)}}zl.transformTypes={translate:DB,rotate:NB,scale:OB,matrix:J1,skewX:RB,skewY:zB};class Mi{constructor(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(this.document=t,this.node=i,this.captureTextNodes=s,this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],!(!i||i.nodeType!==1)){if(Array.from(i.attributes).forEach(o=>{var v=TB(o.nodeName);this.attributes[v]=new br(t,v,o.value)}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()){var l=this.getAttribute("style").getString().split(";").map(o=>o.trim());l.forEach(o=>{if(o){var[v,C]=o.split(":").map(I=>I.trim());this.styles[v]=new br(t,v,C)}})}var{definitions:h}=t,p=this.getAttribute("id");p.hasValue()&&(h[p.getString()]||(h[p.getString()]=this)),Array.from(i.childNodes).forEach(o=>{if(o.nodeType===1)this.addChild(o);else if(s&&(o.nodeType===3||o.nodeType===4)){var v=t.createTextNode(o);v.getText().length>0&&this.addChild(v)}})}}getAttribute(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=this.attributes[t];if(!s&&i){var l=new br(this.document,t,"");return this.attributes[t]=l,l}return s||br.empty(this.document)}getHrefAttribute(){for(var t in this.attributes)if(t==="href"||t.endsWith(":href"))return this.attributes[t];return br.empty(this.document)}getStyle(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,l=this.styles[t];if(l)return l;var h=this.getAttribute(t);if(h!=null&&h.hasValue())return this.styles[t]=h,h;if(!s){var{parent:p}=this;if(p){var o=p.getStyle(t);if(o!=null&&o.hasValue())return o}}if(i){var v=new br(this.document,t,"");return this.styles[t]=v,v}return l||br.empty(this.document)}render(t){if(!(this.getStyle("display").getString()==="none"||this.getStyle("visibility").getString()==="hidden")){if(t.save(),this.getStyle("mask").hasValue()){var i=this.getStyle("mask").getDefinition();i&&(this.applyEffects(t),i.apply(t,this))}else if(this.getStyle("filter").getValue("none")!=="none"){var s=this.getStyle("filter").getDefinition();s&&(this.applyEffects(t),s.apply(t,this))}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}}setContext(t){}applyEffects(t){var i=zl.fromElement(this.document,this);i&&i.apply(t);var s=this.getStyle("clip-path",!1,!0);if(s.hasValue()){var l=s.getDefinition();l&&l.apply(t)}}clearContext(t){}renderChildren(t){this.children.forEach(i=>{i.render(t)})}addChild(t){var i=t instanceof Mi?t:this.document.createElement(t);i.parent=this,Mi.ignoreChildTypes.includes(i.type)||this.children.push(i)}matchesSelector(t){var i,{node:s}=this;if(typeof s.matches=="function")return s.matches(t);var l=(i=s.getAttribute)===null||i===void 0?void 0:i.call(s,"class");return!l||l===""?!1:l.split(" ").some(h=>".".concat(h)===t)}addStylesFromStyleDefinition(){var{styles:t,stylesSpecificity:i}=this.document;for(var s in t)if(!s.startsWith("@")&&this.matchesSelector(s)){var l=t[s],h=i[s];if(l)for(var p in l){var o=this.stylesSpecificity[p];typeof o>"u"&&(o="000"),h>=o&&(this.styles[p]=l[p],this.stylesSpecificity[p]=h)}}}removeStyles(t,i){var s=i.reduce((l,h)=>{var p=t.getStyle(h);if(!p.hasValue())return l;var o=p.getString();return p.setValue(""),[...l,[h,o]]},[]);return s}restoreStyles(t,i){i.forEach(s=>{var[l,h]=s;t.getStyle(l,!0).setValue(h)})}isFirstChild(){var t;return((t=this.parent)===null||t===void 0?void 0:t.children.indexOf(this))===0}}Mi.ignoreChildTypes=["title"];class HB extends Mi{constructor(t,i,s){super(t,i,s)}}function JR(n){var t=n.trim();return/^('|")/.test(t)?t:'"'.concat(t,'"')}function t7(n){return typeof process>"u"?n:n.trim().split(",").map(JR).join(",")}function e7(n){if(!n)return"";var t=n.trim().toLowerCase();switch(t){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return t;default:return/^oblique\s+(-|)\d+deg$/.test(t)?t:""}}function r7(n){if(!n)return"";var t=n.trim().toLowerCase();switch(t){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return t;default:return/^[\d.]+$/.test(t)?t:""}}class ms{constructor(t,i,s,l,h,p){var o=p?typeof p=="string"?ms.parse(p):p:{};this.fontFamily=h||o.fontFamily,this.fontSize=l||o.fontSize,this.fontStyle=t||o.fontStyle,this.fontWeight=s||o.fontWeight,this.fontVariant=i||o.fontVariant}static parse(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0,s="",l="",h="",p="",o="",v=Uc(t).trim().split(" "),C={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return v.forEach(I=>{switch(!0){case(!C.fontStyle&&ms.styles.includes(I)):I!=="inherit"&&(s=I),C.fontStyle=!0;break;case(!C.fontVariant&&ms.variants.includes(I)):I!=="inherit"&&(l=I),C.fontStyle=!0,C.fontVariant=!0;break;case(!C.fontWeight&&ms.weights.includes(I)):I!=="inherit"&&(h=I),C.fontStyle=!0,C.fontVariant=!0,C.fontWeight=!0;break;case!C.fontSize:I!=="inherit"&&([p]=I.split("/")),C.fontStyle=!0,C.fontVariant=!0,C.fontWeight=!0,C.fontSize=!0;break;default:I!=="inherit"&&(o+=I)}}),new ms(s,l,h,p,o,i)}toString(){return[e7(this.fontStyle),this.fontVariant,r7(this.fontWeight),this.fontSize,t7(this.fontFamily)].join(" ").trim()}}ms.styles="normal|italic|oblique|inherit",ms.variants="normal|small-caps|inherit",ms.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";class Za{constructor(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.NaN,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.NaN,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Number.NaN,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Number.NaN;this.x1=t,this.y1=i,this.x2=s,this.y2=l,this.addPoint(t,i),this.addPoint(s,l)}get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(t,i){typeof t<"u"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),typeof i<"u"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=i,this.y2=i),i<this.y1&&(this.y1=i),i>this.y2&&(this.y2=i))}addX(t){this.addPoint(t,null)}addY(t){this.addPoint(null,t)}addBoundingBox(t){if(t){var{x1:i,y1:s,x2:l,y2:h}=t;this.addPoint(i,s),this.addPoint(l,h)}}sumCubic(t,i,s,l,h){return Math.pow(1-t,3)*i+3*Math.pow(1-t,2)*t*s+3*(1-t)*Math.pow(t,2)*l+Math.pow(t,3)*h}bezierCurveAdd(t,i,s,l,h){var p=6*i-12*s+6*l,o=-3*i+9*s-9*l+3*h,v=3*s-3*i;if(o===0){if(p===0)return;var C=-v/p;0<C&&C<1&&(t?this.addX(this.sumCubic(C,i,s,l,h)):this.addY(this.sumCubic(C,i,s,l,h)));return}var I=Math.pow(p,2)-4*v*o;if(!(I<0)){var U=(-p+Math.sqrt(I))/(2*o);0<U&&U<1&&(t?this.addX(this.sumCubic(U,i,s,l,h)):this.addY(this.sumCubic(U,i,s,l,h)));var Q=(-p-Math.sqrt(I))/(2*o);0<Q&&Q<1&&(t?this.addX(this.sumCubic(Q,i,s,l,h)):this.addY(this.sumCubic(Q,i,s,l,h)))}}addBezierCurve(t,i,s,l,h,p,o,v){this.addPoint(t,i),this.addPoint(o,v),this.bezierCurveAdd(!0,t,s,h,o),this.bezierCurveAdd(!1,i,l,p,v)}addQuadraticCurve(t,i,s,l,h,p){var o=t+.6666666666666666*(s-t),v=i+2/3*(l-i),C=o+1/3*(h-t),I=v+1/3*(p-i);this.addBezierCurve(t,i,o,C,v,I,h,p)}isPointInBox(t,i){var{x1:s,y1:l,x2:h,y2:p}=this;return s<=t&&t<=h&&l<=i&&i<=p}}class Or extends Be{constructor(t){super(t.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=null,this.start=null,this.current=null,this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new an(0,0),this.control=new an(0,0),this.current=new an(0,0),this.points=[],this.angles=[]}isEnd(){var{i:t,commands:i}=this;return t>=i.length-1}next(){var t=this.commands[++this.i];return this.previousCommand=this.command,this.command=t,t}getPoint(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"x",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"y",s=new an(this.command[t],this.command[i]);return this.makeAbsolute(s)}getAsControlPoint(t,i){var s=this.getPoint(t,i);return this.control=s,s}getAsCurrentPoint(t,i){var s=this.getPoint(t,i);return this.current=s,s}getReflectedControlPoint(){var t=this.previousCommand.type;if(t!==Be.CURVE_TO&&t!==Be.SMOOTH_CURVE_TO&&t!==Be.QUAD_TO&&t!==Be.SMOOTH_QUAD_TO)return this.current;var{current:{x:i,y:s},control:{x:l,y:h}}=this,p=new an(2*i-l,2*s-h);return p}makeAbsolute(t){if(this.command.relative){var{x:i,y:s}=this.current;t.x+=i,t.y+=s}return t}addMarker(t,i,s){var{points:l,angles:h}=this;s&&h.length>0&&!h[h.length-1]&&(h[h.length-1]=l[l.length-1].angleTo(s)),this.addMarkerAngle(t,i?i.angleTo(t):null)}addMarkerAngle(t,i){this.points.push(t),this.angles.push(i)}getMarkerPoints(){return this.points}getMarkerAngles(){for(var{angles:t}=this,i=t.length,s=0;s<i;s++)if(!t[s]){for(var l=s+1;l<i;l++)if(t[l]){t[s]=t[l];break}}return t}}class Hl extends Mi{constructor(){super(...arguments),this.modifiedEmSizeStack=!1}calculateOpacity(){for(var t=1,i=this;i;){var s=i.getStyle("opacity",!1,!0);s.hasValue(!0)&&(t*=s.getNumber()),i=i.parent}return t}setContext(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!i){var s=this.getStyle("fill"),l=this.getStyle("fill-opacity"),h=this.getStyle("stroke"),p=this.getStyle("stroke-opacity");if(s.isUrlDefinition()){var o=s.getFillStyleDefinition(this,l);o&&(t.fillStyle=o)}else if(s.hasValue()){s.getString()==="currentColor"&&s.setValue(this.getStyle("color").getColor());var v=s.getColor();v!=="inherit"&&(t.fillStyle=v==="none"?"rgba(0,0,0,0)":v)}if(l.hasValue()){var C=new br(this.document,"fill",t.fillStyle).addOpacity(l).getColor();t.fillStyle=C}if(h.isUrlDefinition()){var I=h.getFillStyleDefinition(this,p);I&&(t.strokeStyle=I)}else if(h.hasValue()){h.getString()==="currentColor"&&h.setValue(this.getStyle("color").getColor());var U=h.getString();U!=="inherit"&&(t.strokeStyle=U==="none"?"rgba(0,0,0,0)":U)}if(p.hasValue()){var Q=new br(this.document,"stroke",t.strokeStyle).addOpacity(p).getString();t.strokeStyle=Q}var P=this.getStyle("stroke-width");if(P.hasValue()){var K=P.getPixels();t.lineWidth=K||Lc}var V=this.getStyle("stroke-linecap"),Y=this.getStyle("stroke-linejoin"),$=this.getStyle("stroke-miterlimit"),it=this.getStyle("stroke-dasharray"),ht=this.getStyle("stroke-dashoffset");if(V.hasValue()&&(t.lineCap=V.getString()),Y.hasValue()&&(t.lineJoin=Y.getString()),$.hasValue()&&(t.miterLimit=$.getNumber()),it.hasValue()&&it.getString()!=="none"){var St=ia(it.getString());typeof t.setLineDash<"u"?t.setLineDash(St):typeof t.webkitLineDash<"u"?t.webkitLineDash=St:typeof t.mozDash<"u"&&!(St.length===1&&St[0]===0)&&(t.mozDash=St);var Tt=ht.getPixels();typeof t.lineDashOffset<"u"?t.lineDashOffset=Tt:typeof t.webkitLineDashOffset<"u"?t.webkitLineDashOffset=Tt:typeof t.mozDashOffset<"u"&&(t.mozDashOffset=Tt)}}if(this.modifiedEmSizeStack=!1,typeof t.font<"u"){var Lt=this.getStyle("font"),Ft=this.getStyle("font-style"),yt=this.getStyle("font-variant"),Rt=this.getStyle("font-weight"),Wt=this.getStyle("font-size"),At=this.getStyle("font-family"),lt=new ms(Ft.getString(),yt.getString(),Rt.getString(),Wt.hasValue()?"".concat(Wt.getPixels(!0),"px"):"",At.getString(),ms.parse(Lt.getString(),t.font));Ft.setValue(lt.fontStyle),yt.setValue(lt.fontVariant),Rt.setValue(lt.fontWeight),Wt.setValue(lt.fontSize),At.setValue(lt.fontFamily),t.font=lt.toString(),Wt.isPixels()&&(this.document.emSize=Wt.getPixels(),this.modifiedEmSizeStack=!0)}i||(this.applyEffects(t),t.globalAlpha=this.calculateOpacity())}clearContext(t){super.clearContext(t),this.modifiedEmSizeStack&&this.document.popEmSize()}}class pi extends Hl{constructor(t,i,s){super(t,i,s),this.type="path",this.pathParser=null,this.pathParser=new Or(this.getAttribute("d").getString())}path(t){var{pathParser:i}=this,s=new Za;for(i.reset(),t&&t.beginPath();!i.isEnd();)switch(i.next().type){case Or.MOVE_TO:this.pathM(t,s);break;case Or.LINE_TO:this.pathL(t,s);break;case Or.HORIZ_LINE_TO:this.pathH(t,s);break;case Or.VERT_LINE_TO:this.pathV(t,s);break;case Or.CURVE_TO:this.pathC(t,s);break;case Or.SMOOTH_CURVE_TO:this.pathS(t,s);break;case Or.QUAD_TO:this.pathQ(t,s);break;case Or.SMOOTH_QUAD_TO:this.pathT(t,s);break;case Or.ARC:this.pathA(t,s);break;case Or.CLOSE_PATH:this.pathZ(t,s);break}return s}getBoundingBox(t){return this.path()}getMarkers(){var{pathParser:t}=this,i=t.getMarkerPoints(),s=t.getMarkerAngles(),l=i.map((h,p)=>[h,s[p]]);return l}renderChildren(t){this.path(t),this.document.screen.mouse.checkPath(this,t);var i=this.getStyle("fill-rule");t.fillStyle!==""&&(i.getString("inherit")!=="inherit"?t.fill(i.getString()):t.fill()),t.strokeStyle!==""&&(this.getAttribute("vector-effect").getString()==="non-scaling-stroke"?(t.save(),t.setTransform(1,0,0,1,0,0),t.stroke(),t.restore()):t.stroke());var s=this.getMarkers();if(s){var l=s.length-1,h=this.getStyle("marker-start"),p=this.getStyle("marker-mid"),o=this.getStyle("marker-end");if(h.isUrlDefinition()){var v=h.getDefinition(),[C,I]=s[0];v.render(t,C,I)}if(p.isUrlDefinition())for(var U=p.getDefinition(),Q=1;Q<l;Q++){var[P,K]=s[Q];U.render(t,P,K)}if(o.isUrlDefinition()){var V=o.getDefinition(),[Y,$]=s[l];V.render(t,Y,$)}}}static pathM(t){var i=t.getAsCurrentPoint();return t.start=t.current,{point:i}}pathM(t,i){var{pathParser:s}=this,{point:l}=pi.pathM(s),{x:h,y:p}=l;s.addMarker(l),i.addPoint(h,p),t&&t.moveTo(h,p)}static pathL(t){var{current:i}=t,s=t.getAsCurrentPoint();return{current:i,point:s}}pathL(t,i){var{pathParser:s}=this,{current:l,point:h}=pi.pathL(s),{x:p,y:o}=h;s.addMarker(h,l),i.addPoint(p,o),t&&t.lineTo(p,o)}static pathH(t){var{current:i,command:s}=t,l=new an((s.relative?i.x:0)+s.x,i.y);return t.current=l,{current:i,point:l}}pathH(t,i){var{pathParser:s}=this,{current:l,point:h}=pi.pathH(s),{x:p,y:o}=h;s.addMarker(h,l),i.addPoint(p,o),t&&t.lineTo(p,o)}static pathV(t){var{current:i,command:s}=t,l=new an(i.x,(s.relative?i.y:0)+s.y);return t.current=l,{current:i,point:l}}pathV(t,i){var{pathParser:s}=this,{current:l,point:h}=pi.pathV(s),{x:p,y:o}=h;s.addMarker(h,l),i.addPoint(p,o),t&&t.lineTo(p,o)}static pathC(t){var{current:i}=t,s=t.getPoint("x1","y1"),l=t.getAsControlPoint("x2","y2"),h=t.getAsCurrentPoint();return{current:i,point:s,controlPoint:l,currentPoint:h}}pathC(t,i){var{pathParser:s}=this,{current:l,point:h,controlPoint:p,currentPoint:o}=pi.pathC(s);s.addMarker(o,p,h),i.addBezierCurve(l.x,l.y,h.x,h.y,p.x,p.y,o.x,o.y),t&&t.bezierCurveTo(h.x,h.y,p.x,p.y,o.x,o.y)}static pathS(t){var{current:i}=t,s=t.getReflectedControlPoint(),l=t.getAsControlPoint("x2","y2"),h=t.getAsCurrentPoint();return{current:i,point:s,controlPoint:l,currentPoint:h}}pathS(t,i){var{pathParser:s}=this,{current:l,point:h,controlPoint:p,currentPoint:o}=pi.pathS(s);s.addMarker(o,p,h),i.addBezierCurve(l.x,l.y,h.x,h.y,p.x,p.y,o.x,o.y),t&&t.bezierCurveTo(h.x,h.y,p.x,p.y,o.x,o.y)}static pathQ(t){var{current:i}=t,s=t.getAsControlPoint("x1","y1"),l=t.getAsCurrentPoint();return{current:i,controlPoint:s,currentPoint:l}}pathQ(t,i){var{pathParser:s}=this,{current:l,controlPoint:h,currentPoint:p}=pi.pathQ(s);s.addMarker(p,h,h),i.addQuadraticCurve(l.x,l.y,h.x,h.y,p.x,p.y),t&&t.quadraticCurveTo(h.x,h.y,p.x,p.y)}static pathT(t){var{current:i}=t,s=t.getReflectedControlPoint();t.control=s;var l=t.getAsCurrentPoint();return{current:i,controlPoint:s,currentPoint:l}}pathT(t,i){var{pathParser:s}=this,{current:l,controlPoint:h,currentPoint:p}=pi.pathT(s);s.addMarker(p,h,h),i.addQuadraticCurve(l.x,l.y,h.x,h.y,p.x,p.y),t&&t.quadraticCurveTo(h.x,h.y,p.x,p.y)}static pathA(t){var{current:i,command:s}=t,{rX:l,rY:h,xRot:p,lArcFlag:o,sweepFlag:v}=s,C=p*(Math.PI/180),I=t.getAsCurrentPoint(),U=new an(Math.cos(C)*(i.x-I.x)/2+Math.sin(C)*(i.y-I.y)/2,-Math.sin(C)*(i.x-I.x)/2+Math.cos(C)*(i.y-I.y)/2),Q=Math.pow(U.x,2)/Math.pow(l,2)+Math.pow(U.y,2)/Math.pow(h,2);Q>1&&(l*=Math.sqrt(Q),h*=Math.sqrt(Q));var P=(o===v?-1:1)*Math.sqrt((Math.pow(l,2)*Math.pow(h,2)-Math.pow(l,2)*Math.pow(U.y,2)-Math.pow(h,2)*Math.pow(U.x,2))/(Math.pow(l,2)*Math.pow(U.y,2)+Math.pow(h,2)*Math.pow(U.x,2)));isNaN(P)&&(P=0);var K=new an(P*l*U.y/h,P*-h*U.x/l),V=new an((i.x+I.x)/2+Math.cos(C)*K.x-Math.sin(C)*K.y,(i.y+I.y)/2+Math.sin(C)*K.x+Math.cos(C)*K.y),Y=K1([1,0],[(U.x-K.x)/l,(U.y-K.y)/h]),$=[(U.x-K.x)/l,(U.y-K.y)/h],it=[(-U.x-K.x)/l,(-U.y-K.y)/h],ht=K1($,it);return Pf($,it)<=-1&&(ht=Math.PI),Pf($,it)>=1&&(ht=0),{currentPoint:I,rX:l,rY:h,sweepFlag:v,xAxisRotation:C,centp:V,a1:Y,ad:ht}}pathA(t,i){var{pathParser:s}=this,{currentPoint:l,rX:h,rY:p,sweepFlag:o,xAxisRotation:v,centp:C,a1:I,ad:U}=pi.pathA(s),Q=1-o?1:-1,P=I+Q*(U/2),K=new an(C.x+h*Math.cos(P),C.y+p*Math.sin(P));if(s.addMarkerAngle(K,P-Q*Math.PI/2),s.addMarkerAngle(l,P-Q*Math.PI),i.addPoint(l.x,l.y),t&&!isNaN(I)&&!isNaN(U)){var V=h>p?h:p,Y=h>p?1:h/p,$=h>p?p/h:1;t.translate(C.x,C.y),t.rotate(v),t.scale(Y,$),t.arc(0,0,V,I,I+U,!!(1-o)),t.scale(1/Y,1/$),t.rotate(-v),t.translate(-C.x,-C.y)}}static pathZ(t){t.current=t.start}pathZ(t,i){pi.pathZ(this.pathParser),t&&i.x1!==i.x2&&i.y1!==i.y2&&t.closePath()}}class ey extends pi{constructor(t,i,s){super(t,i,s),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}}class tl extends Hl{constructor(t,i,s){super(t,i,new.target===tl?!0:s),this.type="text",this.x=0,this.y=0,this.measureCache=-1}setContext(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.setContext(t,i);var s=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();s&&(t.textBaseline=s)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(t){if(this.type!=="text")return this.getTElementBoundingBox(t);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t);var i=null;return this.children.forEach((s,l)=>{var h=this.getChildBoundingBox(t,this,this,l);i?i.addBoundingBox(h):i=h}),i}getFontSize(){var{document:t,parent:i}=this,s=ms.parse(t.ctx.font).fontSize,l=i.getStyle("font-size").getNumber(s);return l}getTElementBoundingBox(t){var i=this.getFontSize();return new Za(this.x,this.y-i,this.x+this.measureText(t),this.y)}getGlyph(t,i,s){var l=i[s],h=null;if(t.isArabic){var p=i.length,o=i[s-1],v=i[s+1],C="isolated";if((s===0||o===" ")&&s<p-1&&v!==" "&&(C="terminal"),s>0&&o!==" "&&s<p-1&&v!==" "&&(C="medial"),s>0&&o!==" "&&(s===p-1||v===" ")&&(C="initial"),typeof t.glyphs[l]<"u"){var I=t.glyphs[l];h=I instanceof ey?I:I[C]}}else h=t.glyphs[l];return h||(h=t.missingGlyph),h}getText(){return""}getTextFromNode(t){var i=t||this.node,s=Array.from(i.parentNode.childNodes),l=s.indexOf(i),h=s.length-1,p=Uc(i.textContent||"");return l===0&&(p=IB(p)),l===h&&(p=EB(p)),p}renderChildren(t){if(this.type!=="text"){this.renderTElementChildren(t);return}this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t),this.children.forEach((s,l)=>{this.renderChild(t,this,this,l)});var{mouse:i}=this.document.screen;i.isWorking()&&i.checkBoundingBox(this,this.getBoundingBox(t))}renderTElementChildren(t){var{document:i,parent:s}=this,l=this.getText(),h=s.getStyle("font-family").getDefinition();if(h){for(var{unitsPerEm:p}=h.fontFace,o=ms.parse(i.ctx.font),v=s.getStyle("font-size").getNumber(o.fontSize),C=s.getStyle("font-style").getString(o.fontStyle),I=v/p,U=h.isRTL?l.split("").reverse().join(""):l,Q=ia(s.getAttribute("dx").getString()),P=U.length,K=0;K<P;K++){var V=this.getGlyph(h,U,K);t.translate(this.x,this.y),t.scale(I,-I);var Y=t.lineWidth;t.lineWidth=t.lineWidth*p/v,C==="italic"&&t.transform(1,0,.4,1,0,0),V.render(t),C==="italic"&&t.transform(1,0,-.4,1,0,0),t.lineWidth=Y,t.scale(1/I,-1/I),t.translate(-this.x,-this.y),this.x+=v*(V.horizAdvX||h.horizAdvX)/p,typeof Q[K]<"u"&&!isNaN(Q[K])&&(this.x+=Q[K])}return}var{x:$,y:it}=this;t.fillStyle&&t.fillText(l,$,it),t.strokeStyle&&t.strokeText(l,$,it)}applyAnchoring(){if(!(this.textChunkStart>=this.leafTexts.length)){var t=this.leafTexts[this.textChunkStart],i=t.getStyle("text-anchor").getString("start"),s=!1,l=0;i==="start"&&!s||i==="end"&&s?l=t.x-this.minX:i==="end"&&!s||i==="start"&&s?l=t.x-this.maxX:l=t.x-(this.minX+this.maxX)/2;for(var h=this.textChunkStart;h<this.leafTexts.length;h++)this.leafTexts[h].x+=l;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}}adjustChildCoordinatesRecursive(t){this.children.forEach((i,s)=>{this.adjustChildCoordinatesRecursiveCore(t,this,this,s)}),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(t,i,s,l){var h=s.children[l];h.children.length>0?h.children.forEach((p,o)=>{i.adjustChildCoordinatesRecursiveCore(t,i,h,o)}):this.adjustChildCoordinates(t,i,s,l)}adjustChildCoordinates(t,i,s,l){var h=s.children[l];if(typeof h.measureText!="function")return h;t.save(),h.setContext(t,!0);var p=h.getAttribute("x"),o=h.getAttribute("y"),v=h.getAttribute("dx"),C=h.getAttribute("dy"),I=h.getStyle("font-family").getDefinition(),U=!!I&&I.isRTL;l===0&&(p.hasValue()||p.setValue(h.getInheritedAttribute("x")),o.hasValue()||o.setValue(h.getInheritedAttribute("y")),v.hasValue()||v.setValue(h.getInheritedAttribute("dx")),C.hasValue()||C.setValue(h.getInheritedAttribute("dy")));var Q=h.measureText(t);return U&&(i.x-=Q),p.hasValue()?(i.applyAnchoring(),h.x=p.getPixels("x"),v.hasValue()&&(h.x+=v.getPixels("x"))):(v.hasValue()&&(i.x+=v.getPixels("x")),h.x=i.x),i.x=h.x,U||(i.x+=Q),o.hasValue()?(h.y=o.getPixels("y"),C.hasValue()&&(h.y+=C.getPixels("y"))):(C.hasValue()&&(i.y+=C.getPixels("y")),h.y=i.y),i.y=h.y,i.leafTexts.push(h),i.minX=Math.min(i.minX,h.x,h.x+Q),i.maxX=Math.max(i.maxX,h.x,h.x+Q),h.clearContext(t),t.restore(),h}getChildBoundingBox(t,i,s,l){var h=s.children[l];if(typeof h.getBoundingBox!="function")return null;var p=h.getBoundingBox(t);return p?(h.children.forEach((o,v)=>{var C=i.getChildBoundingBox(t,i,h,v);p.addBoundingBox(C)}),p):null}renderChild(t,i,s,l){var h=s.children[l];h.render(t),h.children.forEach((p,o)=>{i.renderChild(t,i,h,o)})}measureText(t){var{measureCache:i}=this;if(~i)return i;var s=this.getText(),l=this.measureTargetText(t,s);return this.measureCache=l,l}measureTargetText(t,i){if(!i.length)return 0;var{parent:s}=this,l=s.getStyle("font-family").getDefinition();if(l){for(var h=this.getFontSize(),p=l.isRTL?i.split("").reverse().join(""):i,o=ia(s.getAttribute("dx").getString()),v=p.length,C=0,I=0;I<v;I++){var U=this.getGlyph(l,p,I);C+=(U.horizAdvX||l.horizAdvX)*h/l.fontFace.unitsPerEm,typeof o[I]<"u"&&!isNaN(o[I])&&(C+=o[I])}return C}if(!t.measureText)return i.length*10;t.save(),this.setContext(t,!0);var{width:Q}=t.measureText(i);return this.clearContext(t),t.restore(),Q}getInheritedAttribute(t){for(var i=this;i instanceof tl&&i.isFirstChild();){var s=i.parent.getAttribute(t);if(s.hasValue(!0))return s.getValue("0");i=i.parent}return null}}class ad extends tl{constructor(t,i,s){super(t,i,new.target===ad?!0:s),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}getText(){return this.text}}class i7 extends ad{constructor(){super(...arguments),this.type="textNode"}}class Ku extends Hl{constructor(){super(...arguments),this.type="svg",this.root=!1}setContext(t){var i,{document:s}=this,{screen:l,window:h}=s,p=t.canvas;if(l.setDefaults(t),p.style&&typeof t.font<"u"&&h&&typeof h.getComputedStyle<"u"){t.font=h.getComputedStyle(p).getPropertyValue("font");var o=new br(s,"fontSize",ms.parse(t.font).fontSize);o.hasValue()&&(s.rootEmSize=o.getPixels("y"),s.emSize=s.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);var{width:v,height:C}=l.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");var I=this.getAttribute("refX"),U=this.getAttribute("refY"),Q=this.getAttribute("viewBox"),P=Q.hasValue()?ia(Q.getString()):null,K=!this.root&&this.getStyle("overflow").getValue("hidden")!=="visible",V=0,Y=0,$=0,it=0;P&&(V=P[0],Y=P[1]),this.root||(v=this.getStyle("width").getPixels("x"),C=this.getStyle("height").getPixels("y"),this.type==="marker"&&($=V,it=Y,V=0,Y=0)),l.viewPort.setCurrent(v,C),this.node&&(!this.parent||((i=this.node.parentNode)===null||i===void 0?void 0:i.nodeName)==="foreignObject")&&this.getStyle("transform",!1,!0).hasValue()&&!this.getStyle("transform-origin",!1,!0).hasValue()&&this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(t),t.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),P&&(v=P[2],C=P[3]),s.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:l.viewPort.width,desiredWidth:v,height:l.viewPort.height,desiredHeight:C,minX:V,minY:Y,refX:I.getValue(),refY:U.getValue(),clip:K,clipX:$,clipY:it}),P&&(l.viewPort.removeCurrent(),l.viewPort.setCurrent(v,C))}clearContext(t){super.clearContext(t),this.document.screen.viewPort.removeCurrent()}resize(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,l=this.getAttribute("width",!0),h=this.getAttribute("height",!0),p=this.getAttribute("viewBox"),o=this.getAttribute("style"),v=l.getNumber(0),C=h.getNumber(0);if(s)if(typeof s=="string")this.getAttribute("preserveAspectRatio",!0).setValue(s);else{var I=this.getAttribute("preserveAspectRatio");I.hasValue()&&I.setValue(I.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(l.setValue(t),h.setValue(i),p.hasValue()||p.setValue("0 0 ".concat(v||t," ").concat(C||i)),o.hasValue()){var U=this.getStyle("width"),Q=this.getStyle("height");U.hasValue()&&U.setValue("".concat(t,"px")),Q.hasValue()&&Q.setValue("".concat(i,"px"))}}}class ry extends pi{constructor(){super(...arguments),this.type="rect"}path(t){var i=this.getAttribute("x").getPixels("x"),s=this.getAttribute("y").getPixels("y"),l=this.getStyle("width",!1,!0).getPixels("x"),h=this.getStyle("height",!1,!0).getPixels("y"),p=this.getAttribute("rx"),o=this.getAttribute("ry"),v=p.getPixels("x"),C=o.getPixels("y");if(p.hasValue()&&!o.hasValue()&&(C=v),o.hasValue()&&!p.hasValue()&&(v=C),v=Math.min(v,l/2),C=Math.min(C,h/2),t){var I=4*((Math.sqrt(2)-1)/3);t.beginPath(),h>0&&l>0&&(t.moveTo(i+v,s),t.lineTo(i+l-v,s),t.bezierCurveTo(i+l-v+I*v,s,i+l,s+C-I*C,i+l,s+C),t.lineTo(i+l,s+h-C),t.bezierCurveTo(i+l,s+h-C+I*C,i+l-v+I*v,s+h,i+l-v,s+h),t.lineTo(i+v,s+h),t.bezierCurveTo(i+v-I*v,s+h,i,s+h-C+I*C,i,s+h-C),t.lineTo(i,s+C),t.bezierCurveTo(i,s+C-I*C,i+v-I*v,s,i+v,s),t.closePath())}return new Za(i,s,i+l,s+h)}getMarkers(){return null}}class VB extends pi{constructor(){super(...arguments),this.type="circle"}path(t){var i=this.getAttribute("cx").getPixels("x"),s=this.getAttribute("cy").getPixels("y"),l=this.getAttribute("r").getPixels();return t&&l>0&&(t.beginPath(),t.arc(i,s,l,0,Math.PI*2,!1),t.closePath()),new Za(i-l,s-l,i+l,s+l)}getMarkers(){return null}}class jB extends pi{constructor(){super(...arguments),this.type="ellipse"}path(t){var i=4*((Math.sqrt(2)-1)/3),s=this.getAttribute("rx").getPixels("x"),l=this.getAttribute("ry").getPixels("y"),h=this.getAttribute("cx").getPixels("x"),p=this.getAttribute("cy").getPixels("y");return t&&s>0&&l>0&&(t.beginPath(),t.moveTo(h+s,p),t.bezierCurveTo(h+s,p+i*l,h+i*s,p+l,h,p+l),t.bezierCurveTo(h-i*s,p+l,h-s,p+i*l,h-s,p),t.bezierCurveTo(h-s,p-i*l,h-i*s,p-l,h,p-l),t.bezierCurveTo(h+i*s,p-l,h+s,p-i*l,h+s,p),t.closePath()),new Za(h-s,p-l,h+s,p+l)}getMarkers(){return null}}class KB extends pi{constructor(){super(...arguments),this.type="line"}getPoints(){return[new an(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new an(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(t){var[{x:i,y:s},{x:l,y:h}]=this.getPoints();return t&&(t.beginPath(),t.moveTo(i,s),t.lineTo(l,h)),new Za(i,s,l,h)}getMarkers(){var[t,i]=this.getPoints(),s=t.angleTo(i);return[[t,s],[i,s]]}}class iy extends pi{constructor(t,i,s){super(t,i,s),this.type="polyline",this.points=[],this.points=an.parsePath(this.getAttribute("points").getString())}path(t){var{points:i}=this,[{x:s,y:l}]=i,h=new Za(s,l);return t&&(t.beginPath(),t.moveTo(s,l)),i.forEach(p=>{var{x:o,y:v}=p;h.addPoint(o,v),t&&t.lineTo(o,v)}),h}getMarkers(){var{points:t}=this,i=t.length-1,s=[];return t.forEach((l,h)=>{h!==i&&s.push([l,l.angleTo(t[h+1])])}),s.length>0&&s.push([t[t.length-1],s[s.length-1][1]]),s}}class $B extends iy{constructor(){super(...arguments),this.type="polygon"}path(t){var i=super.path(t),[{x:s,y:l}]=this.points;return t&&(t.lineTo(s,l),t.closePath()),i}}class qB extends Mi{constructor(){super(...arguments),this.type="pattern"}createPattern(t,i,s){var l=this.getStyle("width").getPixels("x",!0),h=this.getStyle("height").getPixels("y",!0),p=new Ku(this.document,null);p.attributes.viewBox=new br(this.document,"viewBox",this.getAttribute("viewBox").getValue()),p.attributes.width=new br(this.document,"width","".concat(l,"px")),p.attributes.height=new br(this.document,"height","".concat(h,"px")),p.attributes.transform=new br(this.document,"transform",this.getAttribute("patternTransform").getValue()),p.children=this.children;var o=this.document.createCanvas(l,h),v=o.getContext("2d"),C=this.getAttribute("x"),I=this.getAttribute("y");C.hasValue()&&I.hasValue()&&v.translate(C.getPixels("x",!0),I.getPixels("y",!0)),s.hasValue()?this.styles["fill-opacity"]=s:Reflect.deleteProperty(this.styles,"fill-opacity");for(var U=-1;U<=1;U++)for(var Q=-1;Q<=1;Q++)v.save(),p.attributes.x=new br(this.document,"x",U*o.width),p.attributes.y=new br(this.document,"y",Q*o.height),p.render(v),v.restore();var P=t.createPattern(o,"repeat");return P}}class GB extends Mi{constructor(){super(...arguments),this.type="marker"}render(t,i,s){if(i){var{x:l,y:h}=i,p=this.getAttribute("orient").getString("auto"),o=this.getAttribute("markerUnits").getString("strokeWidth");t.translate(l,h),p==="auto"&&t.rotate(s),o==="strokeWidth"&&t.scale(t.lineWidth,t.lineWidth),t.save();var v=new Ku(this.document,null);v.type=this.type,v.attributes.viewBox=new br(this.document,"viewBox",this.getAttribute("viewBox").getValue()),v.attributes.refX=new br(this.document,"refX",this.getAttribute("refX").getValue()),v.attributes.refY=new br(this.document,"refY",this.getAttribute("refY").getValue()),v.attributes.width=new br(this.document,"width",this.getAttribute("markerWidth").getValue()),v.attributes.height=new br(this.document,"height",this.getAttribute("markerHeight").getValue()),v.attributes.overflow=new br(this.document,"overflow",this.getAttribute("overflow").getValue()),v.attributes.fill=new br(this.document,"fill",this.getAttribute("fill").getColor("black")),v.attributes.stroke=new br(this.document,"stroke",this.getAttribute("stroke").getValue("none")),v.children=this.children,v.render(t),t.restore(),o==="strokeWidth"&&t.scale(1/t.lineWidth,1/t.lineWidth),p==="auto"&&t.rotate(-s),t.translate(-l,-h)}}}class WB extends Mi{constructor(){super(...arguments),this.type="defs"}render(){}}class Qf extends Hl{constructor(){super(...arguments),this.type="g"}getBoundingBox(t){var i=new Za;return this.children.forEach(s=>{i.addBoundingBox(s.getBoundingBox(t))}),i}}class ny extends Mi{constructor(t,i,s){super(t,i,s),this.attributesToInherit=["gradientUnits"],this.stops=[];var{stops:l,children:h}=this;h.forEach(p=>{p.type==="stop"&&l.push(p)})}getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(t,i,s){var l=this;this.getHrefAttribute().hasValue()&&(l=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(l));var{stops:h}=l,p=this.getGradient(t,i);if(!p)return this.addParentOpacity(s,h[h.length-1].color);if(h.forEach(Y=>{p.addColorStop(Y.offset,this.addParentOpacity(s,Y.color))}),this.getAttribute("gradientTransform").hasValue()){var{document:o}=this,{MAX_VIRTUAL_PIXELS:v,viewPort:C}=o.screen,[I]=C.viewPorts,U=new ry(o,null);U.attributes.x=new br(o,"x",-v/3),U.attributes.y=new br(o,"y",-v/3),U.attributes.width=new br(o,"width",v),U.attributes.height=new br(o,"height",v);var Q=new Qf(o,null);Q.attributes.transform=new br(o,"transform",this.getAttribute("gradientTransform").getValue()),Q.children=[U];var P=new Ku(o,null);P.attributes.x=new br(o,"x",0),P.attributes.y=new br(o,"y",0),P.attributes.width=new br(o,"width",I.width),P.attributes.height=new br(o,"height",I.height),P.children=[Q];var K=o.createCanvas(I.width,I.height),V=K.getContext("2d");return V.fillStyle=p,P.render(V),V.createPattern(K,"no-repeat")}return p}inheritStopContainer(t){this.attributesToInherit.forEach(i=>{!this.getAttribute(i).hasValue()&&t.getAttribute(i).hasValue()&&this.getAttribute(i,!0).setValue(t.getAttribute(i).getValue())})}addParentOpacity(t,i){if(t.hasValue()){var s=new br(this.document,"color",i);return s.addOpacity(t).getColor()}return i}}class XB extends ny{constructor(t,i,s){super(t,i,s),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}getGradient(t,i){var s=this.getGradientUnits()==="objectBoundingBox",l=s?i.getBoundingBox(t):null;if(s&&!l)return null;!this.getAttribute("x1").hasValue()&&!this.getAttribute("y1").hasValue()&&!this.getAttribute("x2").hasValue()&&!this.getAttribute("y2").hasValue()&&(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));var h=s?l.x+l.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),p=s?l.y+l.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),o=s?l.x+l.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),v=s?l.y+l.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return h===o&&p===v?null:t.createLinearGradient(h,p,o,v)}}class ZB extends ny{constructor(t,i,s){super(t,i,s),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}getGradient(t,i){var s=this.getGradientUnits()==="objectBoundingBox",l=i.getBoundingBox(t);if(s&&!l)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");var h=s?l.x+l.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),p=s?l.y+l.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),o=h,v=p;this.getAttribute("fx").hasValue()&&(o=s?l.x+l.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(v=s?l.y+l.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));var C=s?(l.width+l.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),I=this.getAttribute("fr").getPixels();return t.createRadialGradient(o,v,I,h,p,C)}}class YB extends Mi{constructor(t,i,s){super(t,i,s),this.type="stop";var l=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),h=this.getStyle("stop-opacity"),p=this.getStyle("stop-color",!0);p.getString()===""&&p.setValue("#000"),h.hasValue()&&(p=p.addOpacity(h)),this.offset=l,this.color=p.getColor()}}class Mf extends Mi{constructor(t,i,s){super(t,i,s),this.type="animate",this.duration=0,this.initialValue=null,this.initialUnits="",this.removed=!1,this.frozen=!1,t.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new br(t,"values",null);var l=this.getAttribute("values");l.hasValue()&&this.values.setValue(l.getString().split(";"))}getProperty(){var t=this.getAttribute("attributeType").getString(),i=this.getAttribute("attributeName").getString();return t==="CSS"?this.parent.getStyle(i,!0):this.parent.getAttribute(i,!0)}calcValue(){var{initialUnits:t}=this,{progress:i,from:s,to:l}=this.getProgress(),h=s.getNumber()+(l.getNumber()-s.getNumber())*i;return t==="%"&&(h*=100),"".concat(h).concat(t)}update(t){var{parent:i}=this,s=this.getProperty();if(this.initialValue||(this.initialValue=s.getString(),this.initialUnits=s.getUnits()),this.duration>this.maxDuration){var l=this.getAttribute("fill").getString("remove");if(this.getAttribute("repeatCount").getString()==="indefinite"||this.getAttribute("repeatDur").getString()==="indefinite")this.duration=0;else if(l==="freeze"&&!this.frozen)this.frozen=!0,i.animationFrozen=!0,i.animationFrozenValue=s.getString();else if(l==="remove"&&!this.removed)return this.removed=!0,s.setValue(i.animationFrozen?i.animationFrozenValue:this.initialValue),!0;return!1}this.duration+=t;var h=!1;if(this.begin<this.duration){var p=this.calcValue(),o=this.getAttribute("type");if(o.hasValue()){var v=o.getString();p="".concat(v,"(").concat(p,")")}s.setValue(p),h=!0}return h}getProgress(){var{document:t,values:i}=this,s={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(i.hasValue()){var l=s.progress*(i.getValue().length-1),h=Math.floor(l),p=Math.ceil(l);s.from=new br(t,"from",parseFloat(i.getValue()[h])),s.to=new br(t,"to",parseFloat(i.getValue()[p])),s.progress=(l-h)/(p-h)}else s.from=this.from,s.to=this.to;return s}}class JB extends Mf{constructor(){super(...arguments),this.type="animateColor"}calcValue(){var{progress:t,from:i,to:s}=this.getProgress(),l=new N1(i.getColor()),h=new N1(s.getColor());if(l.ok&&h.ok){var p=l.r+(h.r-l.r)*t,o=l.g+(h.g-l.g)*t,v=l.b+(h.b-l.b)*t;return"rgb(".concat(Math.floor(p),", ").concat(Math.floor(o),", ").concat(Math.floor(v),")")}return this.getAttribute("from").getColor()}}class t5 extends Mf{constructor(){super(...arguments),this.type="animateTransform"}calcValue(){var{progress:t,from:i,to:s}=this.getProgress(),l=ia(i.getString()),h=ia(s.getString()),p=l.map((o,v)=>{var C=h[v];return o+(C-o)*t}).join(" ");return p}}class e5 extends Mi{constructor(t,i,s){super(t,i,s),this.type="font",this.glyphs={},this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();var{definitions:l}=t,{children:h}=this;for(var p of h)switch(p.type){case"font-face":{this.fontFace=p;var o=p.getStyle("font-family");o.hasValue()&&(l[o.getString()]=this);break}case"missing-glyph":this.missingGlyph=p;break;case"glyph":{var v=p;v.arabicForm?(this.isRTL=!0,this.isArabic=!0,typeof this.glyphs[v.unicode]>"u"&&(this.glyphs[v.unicode]={}),this.glyphs[v.unicode][v.arabicForm]=v):this.glyphs[v.unicode]=v;break}}}render(){}}class r5 extends Mi{constructor(t,i,s){super(t,i,s),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}}class i5 extends pi{constructor(){super(...arguments),this.type="missing-glyph",this.horizAdvX=0}}class n5 extends tl{constructor(){super(...arguments),this.type="tref"}getText(){var t=this.getHrefAttribute().getDefinition();if(t){var i=t.children[0];if(i)return i.getText()}return""}}class s5 extends tl{constructor(t,i,s){super(t,i,s),this.type="a";var{childNodes:l}=i,h=l[0],p=l.length>0&&Array.from(l).every(o=>o.nodeType===3);this.hasText=p,this.text=p?this.getTextFromNode(h):""}getText(){return this.text}renderChildren(t){if(this.hasText){super.renderChildren(t);var{document:i,x:s,y:l}=this,{mouse:h}=i.screen,p=new br(i,"fontSize",ms.parse(i.ctx.font).fontSize);h.isWorking()&&h.checkBoundingBox(this,new Za(s,l-p.getPixels("y"),s+this.measureText(t),l))}else if(this.children.length>0){var o=new Qf(this.document,null);o.children=this.children,o.parent=this,o.render(t)}}onClick(){var{window:t}=this.document;t&&t.open(this.getHrefAttribute().getString())}onMouseMove(){var t=this.document.ctx;t.canvas.style.cursor="pointer"}}function a5(n,t){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function kf(n){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?a5(Object(i),!0).forEach(function(s){T1(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):a5(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}class o5 extends tl{constructor(t,i,s){super(t,i,s),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);var l=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(l)}getText(){return this.text}path(t){var{dataArray:i}=this;t&&t.beginPath(),i.forEach(s=>{var{type:l,points:h}=s;switch(l){case Or.LINE_TO:t&&t.lineTo(h[0],h[1]);break;case Or.MOVE_TO:t&&t.moveTo(h[0],h[1]);break;case Or.CURVE_TO:t&&t.bezierCurveTo(h[0],h[1],h[2],h[3],h[4],h[5]);break;case Or.QUAD_TO:t&&t.quadraticCurveTo(h[0],h[1],h[2],h[3]);break;case Or.ARC:{var[p,o,v,C,I,U,Q,P]=h,K=v>C?v:C,V=v>C?1:v/C,Y=v>C?C/v:1;t&&(t.translate(p,o),t.rotate(Q),t.scale(V,Y),t.arc(0,0,K,I,I+U,!!(1-P)),t.scale(1/V,1/Y),t.rotate(-Q),t.translate(-p,-o));break}case Or.CLOSE_PATH:t&&t.closePath();break}})}renderChildren(t){this.setTextData(t),t.save();var i=this.parent.getStyle("text-decoration").getString(),s=this.getFontSize(),{glyphInfo:l}=this,h=t.fillStyle;i==="underline"&&t.beginPath(),l.forEach((p,o)=>{var{p0:v,p1:C,rotation:I,text:U}=p;t.save(),t.translate(v.x,v.y),t.rotate(I),t.fillStyle&&t.fillText(U,0,0),t.strokeStyle&&t.strokeText(U,0,0),t.restore(),i==="underline"&&(o===0&&t.moveTo(v.x,v.y+s/8),t.lineTo(C.x,C.y+s/5))}),i==="underline"&&(t.lineWidth=s/20,t.strokeStyle=h,t.stroke(),t.closePath()),t.restore()}getLetterSpacingAt(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.letterSpacingCache[t]||0}findSegmentToFitChar(t,i,s,l,h,p,o,v,C){var I=p,U=this.measureText(t,v);v===" "&&i==="justify"&&s<l&&(U+=(l-s)/h),C>-1&&(I+=this.getLetterSpacingAt(C));var Q=this.textHeight/20,P=this.getEquidistantPointOnPath(I,Q,0),K=this.getEquidistantPointOnPath(I+U,Q,0),V={p0:P,p1:K},Y=P&&K?Math.atan2(K.y-P.y,K.x-P.x):0;if(o){var $=Math.cos(Math.PI/2+Y)*o,it=Math.cos(-Y)*o;V.p0=kf(kf({},P),{},{x:P.x+$,y:P.y+it}),V.p1=kf(kf({},K),{},{x:K.x+$,y:K.y+it})}return I+=U,{offset:I,segment:V,rotation:Y}}measureText(t,i){var{measuresCache:s}=this,l=i||this.getText();if(s.has(l))return s.get(l);var h=this.measureTargetText(t,l);return s.set(l,h),h}setTextData(t){if(!this.glyphInfo){var i=this.getText(),s=i.split(""),l=i.split(" ").length-1,h=this.parent.getAttribute("dx").split().map(St=>St.getPixels("x")),p=this.parent.getAttribute("dy").getPixels("y"),o=this.parent.getStyle("text-anchor").getString("start"),v=this.getStyle("letter-spacing"),C=this.parent.getStyle("letter-spacing"),I=0;!v.hasValue()||v.getValue()==="inherit"?I=C.getPixels():v.hasValue()&&v.getValue()!=="initial"&&v.getValue()!=="unset"&&(I=v.getPixels());var U=[],Q=i.length;this.letterSpacingCache=U;for(var P=0;P<Q;P++)U.push(typeof h[P]<"u"?h[P]:I);var K=U.reduce((St,Tt,Lt)=>Lt===0?0:St+Tt||0,0),V=this.measureText(t),Y=Math.max(V+K,0);this.textWidth=V,this.textHeight=this.getFontSize(),this.glyphInfo=[];var $=this.getPathLength(),it=this.getStyle("startOffset").getNumber(0)*$,ht=0;(o==="middle"||o==="center")&&(ht=-Y/2),(o==="end"||o==="right")&&(ht=-Y),ht+=it,s.forEach((St,Tt)=>{var{offset:Lt,segment:Ft,rotation:yt}=this.findSegmentToFitChar(t,o,Y,$,l,ht,p,St,Tt);ht=Lt,!(!Ft.p0||!Ft.p1)&&this.glyphInfo.push({text:s[Tt],p0:Ft.p0,p1:Ft.p1,rotation:yt})})}}parsePathData(t){if(this.pathLength=-1,!t)return[];var i=[],{pathParser:s}=t;for(s.reset();!s.isEnd();){var{current:l}=s,h=l?l.x:0,p=l?l.y:0,o=s.next(),v=o.type,C=[];switch(o.type){case Or.MOVE_TO:this.pathM(s,C);break;case Or.LINE_TO:v=this.pathL(s,C);break;case Or.HORIZ_LINE_TO:v=this.pathH(s,C);break;case Or.VERT_LINE_TO:v=this.pathV(s,C);break;case Or.CURVE_TO:this.pathC(s,C);break;case Or.SMOOTH_CURVE_TO:v=this.pathS(s,C);break;case Or.QUAD_TO:this.pathQ(s,C);break;case Or.SMOOTH_QUAD_TO:v=this.pathT(s,C);break;case Or.ARC:C=this.pathA(s);break;case Or.CLOSE_PATH:pi.pathZ(s);break}o.type!==Or.CLOSE_PATH?i.push({type:v,points:C,start:{x:h,y:p},pathLength:this.calcLength(h,p,v,C)}):i.push({type:Or.CLOSE_PATH,points:[],pathLength:0})}return i}pathM(t,i){var{x:s,y:l}=pi.pathM(t).point;i.push(s,l)}pathL(t,i){var{x:s,y:l}=pi.pathL(t).point;return i.push(s,l),Or.LINE_TO}pathH(t,i){var{x:s,y:l}=pi.pathH(t).point;return i.push(s,l),Or.LINE_TO}pathV(t,i){var{x:s,y:l}=pi.pathV(t).point;return i.push(s,l),Or.LINE_TO}pathC(t,i){var{point:s,controlPoint:l,currentPoint:h}=pi.pathC(t);i.push(s.x,s.y,l.x,l.y,h.x,h.y)}pathS(t,i){var{point:s,controlPoint:l,currentPoint:h}=pi.pathS(t);return i.push(s.x,s.y,l.x,l.y,h.x,h.y),Or.CURVE_TO}pathQ(t,i){var{controlPoint:s,currentPoint:l}=pi.pathQ(t);i.push(s.x,s.y,l.x,l.y)}pathT(t,i){var{controlPoint:s,currentPoint:l}=pi.pathT(t);return i.push(s.x,s.y,l.x,l.y),Or.QUAD_TO}pathA(t){var{rX:i,rY:s,sweepFlag:l,xAxisRotation:h,centp:p,a1:o,ad:v}=pi.pathA(t);return l===0&&v>0&&(v-=2*Math.PI),l===1&&v<0&&(v+=2*Math.PI),[p.x,p.y,i,s,o,v,h,l]}calcLength(t,i,s,l){var h=0,p=null,o=null,v=0;switch(s){case Or.LINE_TO:return this.getLineLength(t,i,l[0],l[1]);case Or.CURVE_TO:for(h=0,p=this.getPointOnCubicBezier(0,t,i,l[0],l[1],l[2],l[3],l[4],l[5]),v=.01;v<=1;v+=.01)o=this.getPointOnCubicBezier(v,t,i,l[0],l[1],l[2],l[3],l[4],l[5]),h+=this.getLineLength(p.x,p.y,o.x,o.y),p=o;return h;case Or.QUAD_TO:for(h=0,p=this.getPointOnQuadraticBezier(0,t,i,l[0],l[1],l[2],l[3]),v=.01;v<=1;v+=.01)o=this.getPointOnQuadraticBezier(v,t,i,l[0],l[1],l[2],l[3]),h+=this.getLineLength(p.x,p.y,o.x,o.y),p=o;return h;case Or.ARC:{h=0;var C=l[4],I=l[5],U=l[4]+I,Q=Math.PI/180;if(Math.abs(C-U)<Q&&(Q=Math.abs(C-U)),p=this.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],C,0),I<0)for(v=C-Q;v>U;v-=Q)o=this.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],v,0),h+=this.getLineLength(p.x,p.y,o.x,o.y),p=o;else for(v=C+Q;v<U;v+=Q)o=this.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],v,0),h+=this.getLineLength(p.x,p.y,o.x,o.y),p=o;return o=this.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],U,0),h+=this.getLineLength(p.x,p.y,o.x,o.y),h}}return 0}getPointOnLine(t,i,s,l,h){var p=arguments.length>5&&arguments[5]!==void 0?arguments[5]:i,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:s,v=(h-s)/(l-i+Lc),C=Math.sqrt(t*t/(1+v*v));l<i&&(C*=-1);var I=v*C,U=null;if(l===i)U={x:p,y:o+I};else if((o-s)/(p-i+Lc)===v)U={x:p+C,y:o+I};else{var Q=0,P=0,K=this.getLineLength(i,s,l,h);if(K<Lc)return null;var V=(p-i)*(l-i)+(o-s)*(h-s);V/=K*K,Q=i+V*(l-i),P=s+V*(h-s);var Y=this.getLineLength(p,o,Q,P),$=Math.sqrt(t*t-Y*Y);C=Math.sqrt($*$/(1+v*v)),l<i&&(C*=-1),I=v*C,U={x:Q+C,y:P+I}}return U}getPointOnPath(t){var i=this.getPathLength(),s=0,l=null;if(t<-5e-5||t-5e-5>i)return null;var{dataArray:h}=this;for(var p of h){if(p&&(p.pathLength<5e-5||s+p.pathLength+5e-5<t)){s+=p.pathLength;continue}var o=t-s,v=0;switch(p.type){case Or.LINE_TO:l=this.getPointOnLine(o,p.start.x,p.start.y,p.points[0],p.points[1],p.start.x,p.start.y);break;case Or.ARC:{var C=p.points[4],I=p.points[5],U=p.points[4]+I;if(v=C+o/p.pathLength*I,I<0&&v<U||I>=0&&v>U)break;l=this.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],v,p.points[6]);break}case Or.CURVE_TO:v=o/p.pathLength,v>1&&(v=1),l=this.getPointOnCubicBezier(v,p.start.x,p.start.y,p.points[0],p.points[1],p.points[2],p.points[3],p.points[4],p.points[5]);break;case Or.QUAD_TO:v=o/p.pathLength,v>1&&(v=1),l=this.getPointOnQuadraticBezier(v,p.start.x,p.start.y,p.points[0],p.points[1],p.points[2],p.points[3]);break}if(l)return l;break}return null}getLineLength(t,i,s,l){return Math.sqrt((s-t)*(s-t)+(l-i)*(l-i))}getPathLength(){return this.pathLength===-1&&(this.pathLength=this.dataArray.reduce((t,i)=>i.pathLength>0?t+i.pathLength:t,0)),this.pathLength}getPointOnCubicBezier(t,i,s,l,h,p,o,v,C){var I=v*$1(t)+p*q1(t)+l*G1(t)+i*W1(t),U=C*$1(t)+o*q1(t)+h*G1(t)+s*W1(t);return{x:I,y:U}}getPointOnQuadraticBezier(t,i,s,l,h,p,o){var v=p*X1(t)+l*Z1(t)+i*Y1(t),C=o*X1(t)+h*Z1(t)+s*Y1(t);return{x:v,y:C}}getPointOnEllipticalArc(t,i,s,l,h,p){var o=Math.cos(p),v=Math.sin(p),C={x:s*Math.cos(h),y:l*Math.sin(h)};return{x:t+(C.x*o-C.y*v),y:i+(C.x*v+C.y*o)}}buildEquidistantCache(t,i){var s=this.getPathLength(),l=i||.25,h=t||s/100;if(!this.equidistantCache||this.equidistantCache.step!==h||this.equidistantCache.precision!==l){this.equidistantCache={step:h,precision:l,points:[]};for(var p=0,o=0;o<=s;o+=l){var v=this.getPointOnPath(o),C=this.getPointOnPath(o+l);!v||!C||(p+=this.getLineLength(v.x,v.y,C.x,C.y),p>=h&&(this.equidistantCache.points.push({x:v.x,y:v.y,distance:o}),p-=h))}}}getEquidistantPointOnPath(t,i,s){if(this.buildEquidistantCache(i,s),t<0||t-this.getPathLength()>5e-5)return null;var l=Math.round(t/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[l]||null}}var n7=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i;class A5 extends Hl{constructor(t,i,s){super(t,i,s),this.type="image",this.loaded=!1;var l=this.getHrefAttribute().getString();if(l){var h=l.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(l);t.images.push(this),h?this.loadSvg(l):this.loadImage(l),this.isSvg=h}}loadImage(t){var i=this;return ZA(function*(){try{var s=yield i.document.createImage(t);i.image=s}catch(l){console.error('Error while loading image "'.concat(t,'":'),l)}i.loaded=!0})()}loadSvg(t){var i=this;return ZA(function*(){var s=n7.exec(t);if(s){var l=s[5];s[4]==="base64"?i.image=atob(l):i.image=decodeURIComponent(l)}else try{var h=yield i.document.fetch(t),p=yield h.text();i.image=p}catch(o){console.error('Error while loading image "'.concat(t,'":'),o)}i.loaded=!0})()}renderChildren(t){var{document:i,image:s,loaded:l}=this,h=this.getAttribute("x").getPixels("x"),p=this.getAttribute("y").getPixels("y"),o=this.getStyle("width").getPixels("x"),v=this.getStyle("height").getPixels("y");if(!(!l||!s||!o||!v)){if(t.save(),t.translate(h,p),this.isSvg){var C=i.canvg.forkString(t,this.image,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:o,scaleHeight:v});C.document.documentElement.parent=this,C.render()}else{var I=this.image;i.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:o,desiredWidth:I.width,height:v,desiredHeight:I.height}),this.loaded&&(typeof I.complete>"u"||I.complete)&&t.drawImage(I,0,0)}t.restore()}}getBoundingBox(){var t=this.getAttribute("x").getPixels("x"),i=this.getAttribute("y").getPixels("y"),s=this.getStyle("width").getPixels("x"),l=this.getStyle("height").getPixels("y");return new Za(t,i,t+s,i+l)}}class l5 extends Hl{constructor(){super(...arguments),this.type="symbol"}render(t){}}class c5{constructor(t){this.document=t,this.loaded=!1,t.fonts.push(this)}load(t,i){var s=this;return ZA(function*(){try{var{document:l}=s,h=yield l.canvg.parser.load(i),p=h.getElementsByTagName("font");Array.from(p).forEach(o=>{var v=l.createElement(o);l.definitions[t]=v})}catch(o){console.error('Error while loading font "'.concat(i,'":'),o)}s.loaded=!0})()}}class sy extends Mi{constructor(t,i,s){super(t,i,s),this.type="style";var l=Uc(Array.from(i.childNodes).map(p=>p.textContent).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")),h=l.split("}");h.forEach(p=>{var o=p.trim();if(o){var v=o.split("{"),C=v[0].split(","),I=v[1].split(";");C.forEach(U=>{var Q=U.trim();if(Q){var P=t.styles[Q]||{};if(I.forEach(Y=>{var $=Y.indexOf(":"),it=Y.substr(0,$).trim(),ht=Y.substr($+1,Y.length-$).trim();it&&ht&&(P[it]=new br(t,it,ht))}),t.styles[Q]=P,t.stylesSpecificity[Q]=PB(Q),Q==="@font-face"){var K=P["font-family"].getString().replace(/"|'/g,""),V=P.src.getString().split(",");V.forEach(Y=>{if(Y.indexOf('format("svg")')>0){var $=V1(Y);$&&new c5(t).load(K,$)}})}}})}})}}sy.parseExternalUrl=V1;class u5 extends Hl{constructor(){super(...arguments),this.type="use"}setContext(t){super.setContext(t);var i=this.getAttribute("x"),s=this.getAttribute("y");i.hasValue()&&t.translate(i.getPixels("x"),0),s.hasValue()&&t.translate(0,s.getPixels("y"))}path(t){var{element:i}=this;i&&i.path(t)}renderChildren(t){var{document:i,element:s}=this;if(s){var l=s;if(s.type==="symbol"&&(l=new Ku(i,null),l.attributes.viewBox=new br(i,"viewBox",s.getAttribute("viewBox").getString()),l.attributes.preserveAspectRatio=new br(i,"preserveAspectRatio",s.getAttribute("preserveAspectRatio").getString()),l.attributes.overflow=new br(i,"overflow",s.getAttribute("overflow").getString()),l.children=s.children,s.styles.opacity=new br(i,"opacity",this.calculateOpacity())),l.type==="svg"){var h=this.getStyle("width",!1,!0),p=this.getStyle("height",!1,!0);h.hasValue()&&(l.attributes.width=new br(i,"width",h.getString())),p.hasValue()&&(l.attributes.height=new br(i,"height",p.getString()))}var o=l.parent;l.parent=this,l.render(t),l.parent=o}}getBoundingBox(t){var{element:i}=this;return i?i.getBoundingBox(t):null}elementTransform(){var{document:t,element:i}=this;return zl.fromElement(t,i)}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}}function Df(n,t,i,s,l,h){return n[i*s*4+t*4+h]}function Nf(n,t,i,s,l,h,p){n[i*s*4+t*4+h]=p}function Sn(n,t,i){var s=n[t];return s*i}function el(n,t,i,s){return t+Math.cos(n)*i+Math.sin(n)*s}class ay extends Mi{constructor(t,i,s){super(t,i,s),this.type="feColorMatrix";var l=ia(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":{var h=l[0];l=[.213+.787*h,.715-.715*h,.072-.072*h,0,0,.213-.213*h,.715+.285*h,.072-.072*h,0,0,.213-.213*h,.715-.715*h,.072+.928*h,0,0,0,0,0,1,0,0,0,0,0,1];break}case"hueRotate":{var p=l[0]*Math.PI/180;l=[el(p,.213,.787,-.213),el(p,.715,-.715,-.715),el(p,.072,-.072,.928),0,0,el(p,.213,-.213,.143),el(p,.715,.285,.14),el(p,.072,-.072,-.283),0,0,el(p,.213,-.213,-.787),el(p,.715,-.715,.715),el(p,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break}case"luminanceToAlpha":l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];break}this.matrix=l,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}apply(t,i,s,l,h){for(var{includeOpacity:p,matrix:o}=this,v=t.getImageData(0,0,l,h),C=0;C<h;C++)for(var I=0;I<l;I++){var U=Df(v.data,I,C,l,h,0),Q=Df(v.data,I,C,l,h,1),P=Df(v.data,I,C,l,h,2),K=Df(v.data,I,C,l,h,3),V=Sn(o,0,U)+Sn(o,1,Q)+Sn(o,2,P)+Sn(o,3,K)+Sn(o,4,1),Y=Sn(o,5,U)+Sn(o,6,Q)+Sn(o,7,P)+Sn(o,8,K)+Sn(o,9,1),$=Sn(o,10,U)+Sn(o,11,Q)+Sn(o,12,P)+Sn(o,13,K)+Sn(o,14,1),it=Sn(o,15,U)+Sn(o,16,Q)+Sn(o,17,P)+Sn(o,18,K)+Sn(o,19,1);p&&(V=0,Y=0,$=0,it*=K/255),Nf(v.data,I,C,l,h,0,V),Nf(v.data,I,C,l,h,1,Y),Nf(v.data,I,C,l,h,2,$),Nf(v.data,I,C,l,h,3,it)}t.clearRect(0,0,l,h),t.putImageData(v,0,0)}}class od extends Mi{constructor(){super(...arguments),this.type="mask"}apply(t,i){var{document:s}=this,l=this.getAttribute("x").getPixels("x"),h=this.getAttribute("y").getPixels("y"),p=this.getStyle("width").getPixels("x"),o=this.getStyle("height").getPixels("y");if(!p&&!o){var v=new Za;this.children.forEach(K=>{v.addBoundingBox(K.getBoundingBox(t))}),l=Math.floor(v.x1),h=Math.floor(v.y1),p=Math.floor(v.width),o=Math.floor(v.height)}var C=this.removeStyles(i,od.ignoreStyles),I=s.createCanvas(l+p,h+o),U=I.getContext("2d");s.screen.setDefaults(U),this.renderChildren(U),new ay(s,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(U,0,0,l+p,h+o);var Q=s.createCanvas(l+p,h+o),P=Q.getContext("2d");s.screen.setDefaults(P),i.render(P),P.globalCompositeOperation="destination-in",P.fillStyle=U.createPattern(I,"no-repeat"),P.fillRect(0,0,l+p,h+o),t.fillStyle=P.createPattern(Q,"no-repeat"),t.fillRect(0,0,l+p,h+o),this.restoreStyles(i,C)}render(t){}}od.ignoreStyles=["mask","transform","clip-path"];var h5=()=>{};class d5 extends Mi{constructor(){super(...arguments),this.type="clipPath"}apply(t){var{document:i}=this,s=Reflect.getPrototypeOf(t),{beginPath:l,closePath:h}=t;s&&(s.beginPath=h5,s.closePath=h5),Reflect.apply(l,t,[]),this.children.forEach(p=>{if(!(typeof p.path>"u")){var o=typeof p.elementTransform<"u"?p.elementTransform():null;o||(o=zl.fromElement(i,p)),o&&o.apply(t),p.path(t),s&&(s.closePath=h),o&&o.unapply(t)}}),Reflect.apply(h,t,[]),t.clip(),s&&(s.beginPath=l,s.closePath=h)}render(t){}}class Ad extends Mi{constructor(){super(...arguments),this.type="filter"}apply(t,i){var{document:s,children:l}=this,h=i.getBoundingBox(t);if(h){var p=0,o=0;l.forEach($=>{var it=$.extraFilterDistance||0;p=Math.max(p,it),o=Math.max(o,it)});var v=Math.floor(h.width),C=Math.floor(h.height),I=v+2*p,U=C+2*o;if(!(I<1||U<1)){var Q=Math.floor(h.x),P=Math.floor(h.y),K=this.removeStyles(i,Ad.ignoreStyles),V=s.createCanvas(I,U),Y=V.getContext("2d");s.screen.setDefaults(Y),Y.translate(-Q+p,-P+o),i.render(Y),l.forEach($=>{typeof $.apply=="function"&&$.apply(Y,0,0,I,U)}),t.drawImage(V,0,0,I,U,Q-p,P-o,I,U),this.restoreStyles(i,K)}}}render(t){}}Ad.ignoreStyles=["filter","transform","clip-path"];class p5 extends Mi{constructor(t,i,s){super(t,i,s),this.type="feDropShadow",this.addStylesFromStyleDefinition()}apply(t,i,s,l,h){}}class f5 extends Mi{constructor(){super(...arguments),this.type="feMorphology"}apply(t,i,s,l,h){}}class g5 extends Mi{constructor(){super(...arguments),this.type="feComposite"}apply(t,i,s,l,h){}}class m5 extends Mi{constructor(t,i,s){super(t,i,s),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}apply(t,i,s,l,h){var{document:p,blurRadius:o}=this,v=p.window?p.window.document.body:null,C=t.canvas;C.id=p.getUniqueId(),v&&(C.style.display="none",v.appendChild(C)),kR(C,i,s,l,h,o),v&&v.removeChild(C)}}class y5 extends Mi{constructor(){super(...arguments),this.type="title"}}class v5 extends Mi{constructor(){super(...arguments),this.type="desc"}}var s7={svg:Ku,rect:ry,circle:VB,ellipse:jB,line:KB,polyline:iy,polygon:$B,path:pi,pattern:qB,marker:GB,defs:WB,linearGradient:XB,radialGradient:ZB,stop:YB,animate:Mf,animateColor:JB,animateTransform:t5,font:e5,"font-face":r5,"missing-glyph":i5,glyph:ey,text:tl,tspan:ad,tref:n5,a:s5,textPath:o5,image:A5,g:Qf,symbol:l5,style:sy,use:u5,mask:od,clipPath:d5,filter:Ad,feDropShadow:p5,feMorphology:f5,feComposite:g5,feColorMatrix:ay,feGaussianBlur:m5,title:y5,desc:v5};function w5(n,t){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function a7(n){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?w5(Object(i),!0).forEach(function(s){T1(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):w5(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function o7(n,t){var i=document.createElement("canvas");return i.width=n,i.height=t,i}function A7(n){return oy.apply(this,arguments)}function oy(){return oy=ZA(function*(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=document.createElement("img");return t&&(i.crossOrigin="Anonymous"),new Promise((s,l)=>{i.onload=()=>{s(i)},i.onerror=(h,p,o,v,C)=>{l(C)},i.src=n})}),oy.apply(this,arguments)}class rl{constructor(t){var{rootEmSize:i=12,emSize:s=12,createCanvas:l=rl.createCanvas,createImage:h=rl.createImage,anonymousCrossOrigin:p}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.canvg=t,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=t.screen,this.rootEmSize=i,this.emSize=s,this.createCanvas=l,this.createImage=this.bindCreateImage(h,p),this.screen.wait(this.isImagesLoaded.bind(this)),this.screen.wait(this.isFontsLoaded.bind(this))}bindCreateImage(t,i){return typeof i=="boolean"?(s,l)=>t(s,typeof l=="boolean"?l:i):t}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){var{emSizeStack:t}=this;return t[t.length-1]}set emSize(t){var{emSizeStack:i}=this;i.push(t)}popEmSize(){var{emSizeStack:t}=this;t.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every(t=>t.loaded)}isFontsLoaded(){return this.fonts.every(t=>t.loaded)}createDocumentElement(t){var i=this.createElement(t.documentElement);return i.root=!0,i.addStylesFromStyleDefinition(),this.documentElement=i,i}createElement(t){var i=t.nodeName.replace(/^[^:]+:/,""),s=rl.elementTypes[i];return typeof s<"u"?new s(this,t):new HB(this,t)}createTextNode(t){return new i7(this,t)}setViewBox(t){this.screen.setViewBox(a7({document:this},t))}}rl.createCanvas=o7,rl.createImage=A7,rl.elementTypes=s7;function _5(n,t){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),i.push.apply(i,s)}return i}function Qc(n){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?_5(Object(i),!0).forEach(function(s){T1(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):_5(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}class Mc{constructor(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.parser=new Lf(s),this.screen=new sd(t,s),this.options=s;var l=new rl(this,s),h=l.createDocumentElement(i);this.document=l,this.documentElement=h}static from(t,i){var s=arguments;return ZA(function*(){var l=s.length>2&&s[2]!==void 0?s[2]:{},h=new Lf(l),p=yield h.parse(i);return new Mc(t,p,l)})()}static fromString(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=new Lf(s),h=l.parseFromString(i);return new Mc(t,h,s)}fork(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Mc.from(t,i,Qc(Qc({},this.options),s))}forkString(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Mc.fromString(t,i,Qc(Qc({},this.options),s))}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}render(){var t=arguments,i=this;return ZA(function*(){var s=t.length>0&&t[0]!==void 0?t[0]:{};i.start(Qc({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0},s)),yield i.ready(),i.stop()})()}start(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{documentElement:i,screen:s,options:l}=this;s.start(i,Qc(Qc({enableRedraw:!0},l),t))}stop(){this.screen.stop()}resize(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.documentElement.resize(t,i,s)}}const l7=Object.freeze(Object.defineProperty({__proto__:null,AElement:s5,AnimateColorElement:JB,AnimateElement:Mf,AnimateTransformElement:t5,BoundingBox:Za,CB1:$1,CB2:q1,CB3:G1,CB4:W1,Canvg:Mc,CircleElement:VB,ClipPathElement:d5,DefsElement:WB,DescElement:v5,Document:rl,Element:Mi,EllipseElement:jB,FeColorMatrixElement:ay,FeCompositeElement:g5,FeDropShadowElement:p5,FeGaussianBlurElement:m5,FeMorphologyElement:f5,FilterElement:Ad,Font:ms,FontElement:e5,FontFaceElement:r5,GElement:Qf,GlyphElement:ey,GradientElement:ny,ImageElement:A5,LineElement:KB,LinearGradientElement:XB,MarkerElement:GB,MaskElement:od,Matrix:J1,MissingGlyphElement:i5,Mouse:QB,PSEUDO_ZERO:Lc,Parser:Lf,PathElement:pi,PathParser:Or,PatternElement:qB,Point:an,PolygonElement:$B,PolylineElement:iy,Property:br,QB1:X1,QB2:Z1,QB3:Y1,RadialGradientElement:ZB,RectElement:ry,RenderedElement:Hl,Rotate:NB,SVGElement:Ku,SVGFontLoader:c5,Scale:OB,Screen:sd,Skew:ty,SkewX:RB,SkewY:zB,StopElement:YB,StyleElement:sy,SymbolElement:l5,TRefElement:n5,TSpanElement:ad,TextElement:tl,TextPathElement:o5,TitleElement:y5,Transform:zl,Translate:DB,UnknownElement:HB,UseElement:u5,ViewPort:LB,compressSpaces:Uc,default:Mc,getSelectorSpecificity:PB,normalizeAttributeName:TB,normalizeColor:UB,parseExternalUrl:V1,presets:RR,toNumbers:ia,trimLeft:IB,trimRight:EB,vectorMagnitude:j1,vectorsAngle:K1,vectorsRatio:Pf},Symbol.toStringTag,{value:"Module"}));Yn.DPI=hg,Yn.Format=rA,Yn.MapboxExportControl=d3,Yn.PageOrientation=ch,Yn.Size=xl,Object.defineProperty(Yn,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=mapbox-gl-export.umd.js.map
